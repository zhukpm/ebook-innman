!function (e, n) {
    "object" == typeof exports && "undefined" != typeof module ? n() : "function" == typeof define && define.amd ? define(n) : n()
}(0, function () {
    "use strict";

    function e(e) {
        var n = this.constructor;
        return this.then(function (t) {
            return n.resolve(e()).then(function () {
                return t
            })
        }, function (t) {
            return n.resolve(e()).then(function () {
                return n.reject(t)
            })
        })
    }

    function n(e) {
        return !(!e || "undefined" == typeof e.length)
    }

    function t() {
    }

    function o(e) {
        if (!(this instanceof o)) throw new TypeError("Promises must be constructed via new");
        if ("function" != typeof e) throw new TypeError("not a function");
        this._state = 0, this._handled = !1, this._value = undefined, this._deferreds = [], c(e, this)
    }

    function r(e, n) {
        for (; 3 === e._state;) e = e._value;
        0 !== e._state ? (e._handled = !0, o._immediateFn(function () {
            var t = 1 === e._state ? n.onFulfilled : n.onRejected;
            if (null !== t) {
                var o;
                try {
                    o = t(e._value)
                } catch (r) {
                    return void f(n.promise, r)
                }
                i(n.promise, o)
            } else (1 === e._state ? i : f)(n.promise, e._value)
        })) : e._deferreds.push(n)
    }

    function i(e, n) {
        try {
            if (n === e) throw new TypeError("A promise cannot be resolved with itself.");
            if (n && ("object" == typeof n || "function" == typeof n)) {
                var t = n.then;
                if (n instanceof o) return e._state = 3, e._value = n, void u(e);
                if ("function" == typeof t) return void c(function (e, n) {
                    return function () {
                        e.apply(n, arguments)
                    }
                }(t, n), e)
            }
            e._state = 1, e._value = n, u(e)
        } catch (r) {
            f(e, r)
        }
    }

    function f(e, n) {
        e._state = 2, e._value = n, u(e)
    }

    function u(e) {
        2 === e._state && 0 === e._deferreds.length && o._immediateFn(function () {
            e._handled || o._unhandledRejectionFn(e._value)
        });
        for (var n = 0, t = e._deferreds.length; t > n; n++) r(e, e._deferreds[n]);
        e._deferreds = null
    }

    function c(e, n) {
        var t = !1;
        try {
            e(function (e) {
                t || (t = !0, i(n, e))
            }, function (e) {
                t || (t = !0, f(n, e))
            })
        } catch (o) {
            if (t) return;
            t = !0, f(n, o)
        }
    }

    var a = setTimeout;
    o.prototype["catch"] = function (e) {
        return this.then(null, e)
    }, o.prototype.then = function (e, n) {
        var o = new this.constructor(t);
        return r(this, new function (e, n, t) {
            this.onFulfilled = "function" == typeof e ? e : null, this.onRejected = "function" == typeof n ? n : null, this.promise = t
        }(e, n, o)), o
    }, o.prototype["finally"] = e, o.all = function (e) {
        return new o(function (t, o) {
            function r(e, n) {
                try {
                    if (n && ("object" == typeof n || "function" == typeof n)) {
                        var u = n.then;
                        if ("function" == typeof u) return void u.call(n, function (n) {
                            r(e, n)
                        }, o)
                    }
                    i[e] = n, 0 == --f && t(i)
                } catch (c) {
                    o(c)
                }
            }

            if (!n(e)) return o(new TypeError("Promise.all accepts an array"));
            var i = Array.prototype.slice.call(e);
            if (0 === i.length) return t([]);
            for (var f = i.length, u = 0; i.length > u; u++) r(u, i[u])
        })
    }, o.resolve = function (e) {
        return e && "object" == typeof e && e.constructor === o ? e : new o(function (n) {
            n(e)
        })
    }, o.reject = function (e) {
        return new o(function (n, t) {
            t(e)
        })
    }, o.race = function (e) {
        return new o(function (t, r) {
            if (!n(e)) return r(new TypeError("Promise.race accepts an array"));
            for (var i = 0, f = e.length; f > i; i++) o.resolve(e[i]).then(t, r)
        })
    }, o._immediateFn = "function" == typeof setImmediate && function (e) {
        setImmediate(e)
    } || function (e) {
        a(e, 0)
    }, o._unhandledRejectionFn = function (e) {
        void 0 !== console && console && console.warn("Possible Unhandled Promise Rejection:", e)
    };
    var l = function () {
        if ("undefined" != typeof self) return self;
        if ("undefined" != typeof window) return window;
        if ("undefined" != typeof global) return global;
        throw Error("unable to locate global object")
    }();
    "Promise" in l ? l.Promise.prototype["finally"] || (l.Promise.prototype["finally"] = e) : l.Promise = o
});

!function () {
    "use strict";

    function o() {
        var o = window, t = document;
        if (!("scrollBehavior" in t.documentElement.style && !0 !== o.__forceSmoothScrollPolyfill__)) {
            var l, e = o.HTMLElement || o.Element, r = 468, i = {
                    scroll: o.scroll || o.scrollTo,
                    scrollBy: o.scrollBy,
                    elementScroll: e.prototype.scroll || n,
                    scrollIntoView: e.prototype.scrollIntoView
                }, s = o.performance && o.performance.now ? o.performance.now.bind(o.performance) : Date.now,
                c = (l = o.navigator.userAgent, new RegExp(["MSIE ", "Trident/", "Edge/"].join("|")).test(l) ? 1 : 0);
            o.scroll = o.scrollTo = function () {
                void 0 !== arguments[0] && (!0 !== f(arguments[0]) ? h.call(o, t.body, void 0 !== arguments[0].left ? ~~arguments[0].left : o.scrollX || o.pageXOffset, void 0 !== arguments[0].top ? ~~arguments[0].top : o.scrollY || o.pageYOffset) : i.scroll.call(o, void 0 !== arguments[0].left ? arguments[0].left : "object" != typeof arguments[0] ? arguments[0] : o.scrollX || o.pageXOffset, void 0 !== arguments[0].top ? arguments[0].top : void 0 !== arguments[1] ? arguments[1] : o.scrollY || o.pageYOffset))
            }, o.scrollBy = function () {
                void 0 !== arguments[0] && (f(arguments[0]) ? i.scrollBy.call(o, void 0 !== arguments[0].left ? arguments[0].left : "object" != typeof arguments[0] ? arguments[0] : 0, void 0 !== arguments[0].top ? arguments[0].top : void 0 !== arguments[1] ? arguments[1] : 0) : h.call(o, t.body, ~~arguments[0].left + (o.scrollX || o.pageXOffset), ~~arguments[0].top + (o.scrollY || o.pageYOffset)))
            }, e.prototype.scroll = e.prototype.scrollTo = function () {
                if (void 0 !== arguments[0]) if (!0 !== f(arguments[0])) {
                    var o = arguments[0].left, t = arguments[0].top;
                    h.call(this, this, void 0 === o ? this.scrollLeft : ~~o, void 0 === t ? this.scrollTop : ~~t)
                } else {
                    if ("number" == typeof arguments[0] && void 0 === arguments[1]) throw new SyntaxError("Value could not be converted");
                    i.elementScroll.call(this, void 0 !== arguments[0].left ? ~~arguments[0].left : "object" != typeof arguments[0] ? ~~arguments[0] : this.scrollLeft, void 0 !== arguments[0].top ? ~~arguments[0].top : void 0 !== arguments[1] ? ~~arguments[1] : this.scrollTop)
                }
            }, e.prototype.scrollBy = function () {
                void 0 !== arguments[0] && (!0 !== f(arguments[0]) ? this.scroll({
                    left: ~~arguments[0].left + this.scrollLeft,
                    top: ~~arguments[0].top + this.scrollTop,
                    behavior: arguments[0].behavior
                }) : i.elementScroll.call(this, void 0 !== arguments[0].left ? ~~arguments[0].left + this.scrollLeft : ~~arguments[0] + this.scrollLeft, void 0 !== arguments[0].top ? ~~arguments[0].top + this.scrollTop : ~~arguments[1] + this.scrollTop))
            }, e.prototype.scrollIntoView = function () {
                if (!0 !== f(arguments[0])) {
                    var l = function (o) {
                        for (; o !== t.body && !1 === (e = p(l = o, "Y") && a(l, "Y"), r = p(l, "X") && a(l, "X"), e || r);) o = o.parentNode || o.host;
                        var l, e, r;
                        return o
                    }(this), e = l.getBoundingClientRect(), r = this.getBoundingClientRect();
                    l !== t.body ? (h.call(this, l, l.scrollLeft + r.left - e.left, l.scrollTop + r.top - e.top), "fixed" !== o.getComputedStyle(l).position && o.scrollBy({
                        left: e.left,
                        top: e.top,
                        behavior: "smooth"
                    })) : o.scrollBy({left: r.left, top: r.top, behavior: "smooth"})
                } else i.scrollIntoView.call(this, void 0 === arguments[0] || arguments[0])
            }
        }

        function n(o, t) {
            this.scrollLeft = o, this.scrollTop = t
        }

        function f(o) {
            if (null === o || "object" != typeof o || void 0 === o.behavior || "auto" === o.behavior || "instant" === o.behavior) return !0;
            if ("object" == typeof o && "smooth" === o.behavior) return !1;
            throw new TypeError("behavior member of ScrollOptions " + o.behavior + " is not a valid value for enumeration ScrollBehavior.")
        }

        function p(o, t) {
            return "Y" === t ? o.clientHeight + c < o.scrollHeight : "X" === t ? o.clientWidth + c < o.scrollWidth : void 0
        }

        function a(t, l) {
            var e = o.getComputedStyle(t, null)["overflow" + l];
            return "auto" === e || "scroll" === e
        }

        function d(t) {
            var l, e, i, c, n = (s() - t.startTime) / r;
            c = n = n > 1 ? 1 : n, l = .5 * (1 - Math.cos(Math.PI * c)), e = t.startX + (t.x - t.startX) * l, i = t.startY + (t.y - t.startY) * l, t.method.call(t.scrollable, e, i), e === t.x && i === t.y || o.requestAnimationFrame(d.bind(o, t))
        }

        function h(l, e, r) {
            var c, f, p, a, h = s();
            l === t.body ? (c = o, f = o.scrollX || o.pageXOffset, p = o.scrollY || o.pageYOffset, a = i.scroll) : (c = l, f = l.scrollLeft, p = l.scrollTop, a = n), d({
                scrollable: c,
                method: a,
                startTime: h,
                startX: f,
                startY: p,
                x: e,
                y: r
            })
        }
    }

    "object" == typeof exports && "undefined" != typeof module ? module.exports = {polyfill: o} : o()
}();
/*!
 * ionic.bundle.js is a concatenation of:
 * ionic.js, angular.js, angular-animate.js,
 * angular-sanitize.js, angular-ui-router.js,
 * and ionic-angular.js
 */

/*!
 * Copyright 2015 Drifty Co.
 * http://drifty.com/
 *
 * Ionic, v1.3.1
 * A powerful HTML5 mobile app framework.
 * http://ionicframework.com/
 *
 * By @maxlynch, @benjsperry, @adamdbradley <3
 *
 * Licensed under the MIT license. Please see LICENSE for more information.
 *
 */

!function () {
    function e(e, t, n) {
        t !== !1 ? X.addEventListener(e, J[e], n) : X.removeEventListener(e, J[e])
    }

    function t(e) {
        var t = w(e.target), i = T(t);
        if (ionic.tap.requiresNativeClick(i) || $) return !1;
        var r = ionic.tap.pointerCoord(e);
        n("click", i, r.x, r.y), h(i)
    }

    function n(e, t, n, i) {
        var r = document.createEvent("MouseEvents");
        r.initMouseEvent(e, !0, !0, window, 1, 0, 0, n, i, !1, !1, !1, !1, 0, null), r.isIonicTap = !0, t.dispatchEvent(r)
    }

    function i(e) {
        return "submit" == e.target.type && 0 === e.detail ? null : ionic.scroll.isScrolling && ionic.tap.containsOrIsTextInput(e.target) || !e.isIonicTap && !ionic.tap.requiresNativeClick(e.target) ? (e.stopPropagation(), ionic.tap.isLabelWithTextInput(e.target) || e.preventDefault(), !1) : void 0
    }

    function r(t) {
        return t.isIonicTap || p(t) ? null : B ? (t.stopPropagation(), ionic.Platform.isEdge() || ionic.tap.isTextInput(t.target) && K === t.target || b(t.target.tagName) || ionic.tap.isVideo(t.target) || t.preventDefault(), !1) : ($ = !1, q = ionic.tap.pointerCoord(t), e("mousemove"), void ionic.activator.start(t))
    }

    function a(n) {
        return B ? (n.stopPropagation(), n.preventDefault(), !1) : p(n) || b(n.target.tagName) ? !1 : (_(n) || t(n), e("mousemove", !1), ionic.activator.end(), void ($ = !1))
    }

    function o(t) {
        return _(t) ? (e("mousemove", !1), ionic.activator.end(), $ = !0, !1) : void 0
    }

    function s(t) {
        if (!p(t) && ($ = !1, u(), q = ionic.tap.pointerCoord(t), e(j), ionic.activator.start(t), ionic.Platform.isIOS() && ionic.tap.isLabelWithTextInput(t.target))) {
            var n = T(w(t.target));
            n !== F && t.preventDefault()
        }
    }

    function l(e) {
        p(e) || (u(), _(e) || (t(e), b(e.target.tagName) && e.preventDefault()), K = e.target, d())
    }

    function c(t) {
        return _(t) ? ($ = !0, e(j, !1), ionic.activator.end(), !1) : void 0
    }

    function d() {
        e(j, !1), ionic.activator.end(), $ = !1
    }

    function u() {
        B = !0, clearTimeout(W), W = setTimeout(function () {
            B = !1
        }, 600)
    }

    function p(e) {
        return e.isTapHandled ? !0 : (e.isTapHandled = !0, ionic.tap.isElementTapDisabled(e.target) ? !0 : ionic.scroll.isScrolling && ionic.tap.containsOrIsTextInput(e.target) ? (e.preventDefault(), !0) : void 0)
    }

    function h(e) {
        U = null;
        var t = !1;
        "SELECT" == e.tagName ? (n("mousedown", e, 0, 0), e.focus && e.focus(), t = !0) : v() === e ? t = !0 : /^(input|textarea|ion-label)$/i.test(e.tagName) || e.isContentEditable ? (t = !0, e.focus && e.focus(), e.value = e.value, B && (U = e)) : f(), t && (v(e), ionic.trigger("ionic.focusin", {target: e}, !0))
    }

    function f() {
        var e = v();
        e && (/^(input|textarea|select)$/i.test(e.tagName) || e.isContentEditable) && e.blur(), v(null)
    }

    function m(e) {
        B && ionic.tap.isTextInput(v()) && ionic.tap.isTextInput(U) && U !== e.target && (U.focus(), U = null), ionic.scroll.isScrolling = !1
    }

    function g() {
        v(null)
    }

    function v(e) {
        return arguments.length && (F = e), F || document.activeElement
    }

    function _(e) {
        if (!e || 1 !== e.target.nodeType || !q || 0 === q.x && 0 === q.y) return !1;
        var t = ionic.tap.pointerCoord(e),
            n = !(!e.target.classList || !e.target.classList.contains || "function" != typeof e.target.classList.contains),
            i = n && e.target.classList.contains("button") ? Q : Z;
        return Math.abs(q.x - t.x) > i || Math.abs(q.y - t.y) > i
    }

    function w(e, t) {
        for (var n = e, i = 0; 6 > i && n; i++) {
            if ("LABEL" === n.tagName) return n;
            n = n.parentElement
        }
        return t !== !1 ? e : void 0
    }

    function T(e) {
        if (e && "LABEL" === e.tagName) {
            if (e.control) return e.control;
            if (e.querySelector) {
                var t = e.querySelector("input,textarea,select");
                if (t) return t
            }
        }
        return e
    }

    function b(e) {
        return /^(select|option)$/i.test(e)
    }

    function S() {
        ionic.keyboard.isInitialized || (V() ? (window.addEventListener("native.keyboardshow", pe), window.addEventListener("native.keyboardhide", x)) : document.body.addEventListener("focusout", x), document.body.addEventListener("ionic.focusin", ue), document.body.addEventListener("focusin", ue), window.navigator.msPointerEnabled ? document.removeEventListener("MSPointerDown", S) : document.removeEventListener("touchstart", S), ionic.keyboard.isInitialized = !0)
    }

    function y(e) {
        clearTimeout(re), (!ionic.keyboard.isOpen || ionic.keyboard.isClosing) && (ionic.keyboard.isOpening = !0, ionic.keyboard.isClosing = !1), ionic.keyboard.height = e.keyboardHeight, le ? C(O, !0) : C(I, !0)
    }

    function E(e) {
        return clearTimeout(re), e.target && !e.target.readOnly && ionic.tap.isKeyboardElement(e.target) && (ne = ionic.DomUtil.getParentWithClass(e.target, de)) ? (ee = e.target, ne.classList.contains("overflow-scroll") || (document.body.scrollTop = 0, ne.scrollTop = 0, ionic.requestAnimationFrame(function () {
            document.body.scrollTop = 0, ne.scrollTop = 0
        }), window.navigator.msPointerEnabled ? document.addEventListener("MSPointerMove", L, !1) : document.addEventListener("touchmove", L, !1)), (!ionic.keyboard.isOpen || ionic.keyboard.isClosing) && (ionic.keyboard.isOpening = !0, ionic.keyboard.isClosing = !1), document.addEventListener("keydown", M, !1), void (ionic.keyboard.isOpen || V() ? ionic.keyboard.isOpen && I() : C(I, !0))) : (ee && (te = ee), void (ee = null))
    }

    function x() {
        clearTimeout(re), (ionic.keyboard.isOpen || ionic.keyboard.isOpening) && (ionic.keyboard.isClosing = !0, ionic.keyboard.isOpening = !1), re = setTimeout(function () {
            ionic.requestAnimationFrame(function () {
                le ? C(function () {
                    O(), P()
                }, !1) : C(P, !1)
            })
        }, 50)
    }

    function D() {
        ionic.keyboard.isLandscape = !ionic.keyboard.isLandscape, ionic.Platform.isIOS() && O(), ionic.Platform.isAndroid() && (ionic.keyboard.isOpen && V() ? le = !0 : C(O, !1))
    }

    function M(e) {
        ionic.scroll.isScrolling && L(e)
    }

    function L(e) {
        "TEXTAREA" !== e.target.tagName && e.preventDefault()
    }

    function C(e, t) {
        clearInterval(ie);
        var n, i = 0, r = G(), a = r;
        return n = ionic.Platform.isAndroid() && ionic.Platform.version() < 4.4 ? 30 : ionic.Platform.isAndroid() ? 10 : 1, ie = setInterval(function () {
            a = G(), (!(++i < n) || (N(a) || z(a)) && ionic.keyboard.height) && (V() || (ionic.keyboard.height = Math.abs(r - window.innerHeight)), ionic.keyboard.isOpen = t, clearInterval(ie), e())
        }, 50), n
    }

    function P() {
        clearTimeout(re), ionic.keyboard.isOpen = !1, ionic.keyboard.isClosing = !1, (ee || te) && ionic.trigger("resetScrollView", {target: ee || te}, !0), ionic.requestAnimationFrame(function () {
            document.body.classList.remove(ce)
        }), window.navigator.msPointerEnabled ? document.removeEventListener("MSPointerMove", L) : document.removeEventListener("touchmove", L), document.removeEventListener("keydown", M), ionic.Platform.isAndroid() && (V() && cordova.plugins.Keyboard.close(), ee && ee.blur()), ee = null, te = null
    }

    function I() {
        ionic.keyboard.isOpen = !0, ionic.keyboard.isOpening = !1;
        var e = {keyboardHeight: k(), viewportHeight: ae};
        if (ee) {
            e.target = ee;
            var t = ee.getBoundingClientRect();
            e.elementTop = Math.round(t.top), e.elementBottom = Math.round(t.bottom), e.windowHeight = e.viewportHeight - e.keyboardHeight, e.isElementUnderKeyboard = e.elementBottom > e.windowHeight, ionic.trigger("scrollChildIntoView", e, !0)
        }
        return setTimeout(function () {
            document.body.classList.add(ce)
        }, 400), e
    }

    function k() {
        if (ionic.keyboard.height) return ionic.keyboard.height;
        if (ionic.Platform.isAndroid()) {
            if (ionic.Platform.isFullScreen) return 275;
            var e = window.innerHeight;
            return ae > e ? ae - e : 0
        }
        return ionic.Platform.isIOS() ? ionic.keyboard.isLandscape ? 206 : ionic.Platform.isWebView() ? 260 : 216 : 275
    }

    function N(e) {
        return !!(!ionic.keyboard.isLandscape && oe && Math.abs(oe - e) < 2)
    }

    function z(e) {
        return !!(ionic.keyboard.isLandscape && se && Math.abs(se - e) < 2)
    }

    function O() {
        le = !1, ae = G(), ionic.keyboard.isLandscape && !se ? se = ae : ionic.keyboard.isLandscape || oe || (oe = ae), ee && ionic.trigger("resetScrollView", {target: ee}, !0), ionic.keyboard.isOpen && ionic.tap.isTextInput(ee) && I()
    }

    function A() {
        var e = G();
        e / window.innerWidth < 1 && (ionic.keyboard.isLandscape = !0), ae = e, ionic.keyboard.isLandscape && !se ? se = ae : ionic.keyboard.isLandscape || oe || (oe = ae)
    }

    function G() {
        var e = window.innerHeight;
        return ionic.Platform.isAndroid() && ionic.Platform.isFullScreen || !ionic.keyboard.isOpen && !ionic.keyboard.isOpening || ionic.keyboard.isClosing ? e : e + k()
    }

    function V() {
        return !!(window.cordova && cordova.plugins && cordova.plugins.Keyboard)
    }

    function R() {
        var e;
        for (e = 0; e < document.head.children.length; e++) if ("viewport" == document.head.children[e].name) {
            he = document.head.children[e];
            break
        }
        if (he) {
            var t, n = he.content.toLowerCase().replace(/\s+/g, "").split(",");
            for (e = 0; e < n.length; e++) n[e] && (t = n[e].split("="), fe[t[0]] = t.length > 1 ? t[1] : "_");
            H()
        }
    }

    function H() {
        var e = fe.width, t = fe.height, n = ionic.Platform, i = n.version(), r = "device-width", a = "device-height",
            o = ionic.viewport.orientation();
        delete fe.height, fe.width = r, n.isIPad() ? i > 7 ? delete fe.width : n.isWebView() ? 90 == o ? fe.height = "0" : 7 == i && (fe.height = a) : 7 > i && (fe.height = "0") : n.isIOS() && (n.isWebView() ? i > 7 ? delete fe.width : 7 > i ? t && (fe.height = "0") : 7 == i && (fe.height = a) : 7 > i && t && (fe.height = "0")), (e !== fe.width || t !== fe.height) && Y()
    }

    function Y() {
        var e, t = [];
        for (e in fe) fe[e] && t.push(e + ("_" == fe[e] ? "" : "=" + fe[e]));
        he.content = t.join(", ")
    }

    window.ionic = window.ionic || {}, window.ionic.views = {}, window.ionic.version = "1.3.1", function (e) {
        e.DelegateService = function (e) {
            function t() {
                return !0
            }

            if (e.indexOf("$getByHandle") > -1) throw new Error("Method '$getByHandle' is implicitly added to each delegate service. Do not list it as a method.");
            return ["$log", function (n) {
                function i(e, t) {
                    this._instances = e, this.handle = t
                }

                function r() {
                    this._instances = []
                }

                function a(e) {
                    return function () {
                        var t, i = this.handle, r = arguments, a = 0;
                        return this._instances.forEach(function (n) {
                            if ((!i || i == n.$$delegateHandle) && n.$$filterFn(n)) {
                                a++;
                                var o = n[e].apply(n, r);
                                1 === a && (t = o)
                            }
                        }), !a && i ? n.warn('Delegate for handle "' + i + '" could not find a corresponding element with delegate-handle="' + i + '"! ' + e + "() was not called!\nPossible cause: If you are calling " + e + '() immediately, and your element with delegate-handle="' + i + '" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to ' + e + "() and try again.") : t
                    }
                }

                return e.forEach(function (e) {
                    i.prototype[e] = a(e)
                }), r.prototype = i.prototype, r.prototype._registerInstance = function (e, n, i) {
                    var r = this._instances;
                    return e.$$delegateHandle = n, e.$$filterFn = i || t, r.push(e), function () {
                        var t = r.indexOf(e);
                        -1 !== t && r.splice(t, 1)
                    }
                }, r.prototype.$getByHandle = function (e) {
                    return new i(this._instances, e)
                }, new r
            }]
        }
    }(window.ionic), function (e, t, n) {
        function i() {
            a = !0;
            for (var e = 0; e < r.length; e++) n.requestAnimationFrame(r[e]);
            r = [], t.removeEventListener("DOMContentLoaded", i)
        }

        var r = [], a = "complete" === t.readyState || "interactive" === t.readyState;
        a || t.addEventListener("DOMContentLoaded", i), e._rAF = function () {
            return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || function (t) {
                e.setTimeout(t, 16)
            }
        }();
        var o = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.mozCancelAnimationFrame || e.webkitCancelRequestAnimationFrame;
        n.DomUtil = {
            requestAnimationFrame: function (t) {
                return e._rAF(t)
            }, cancelAnimationFrame: function (e) {
                o(e)
            }, animationFrameThrottle: function (e) {
                var t, i, r;
                return function () {
                    t = arguments, r = this, i || (i = !0, n.requestAnimationFrame(function () {
                        e.apply(r, t), i = !1
                    }))
                }
            }, contains: function (e, t) {
                for (var n = t; n;) {
                    if (n === e) return !0;
                    n = n.parentNode
                }
            }, getPositionInParent: function (e) {
                return {left: e.offsetLeft, top: e.offsetTop}
            }, getOffsetTop: function (e) {
                var t = 0;
                if (e.offsetParent) {
                    do t += e.offsetTop, e = e.offsetParent; while (e);
                    return t
                }
            }, ready: function (e) {
                a ? n.requestAnimationFrame(e) : r.push(e)
            }, getTextBounds: function (n) {
                if (t.createRange) {
                    var i = t.createRange();
                    if (i.selectNodeContents(n), i.getBoundingClientRect) {
                        var r = i.getBoundingClientRect();
                        if (r) {
                            var a = e.scrollX, o = e.scrollY;
                            return {
                                top: r.top + o,
                                left: r.left + a,
                                right: r.left + a + r.width,
                                bottom: r.top + o + r.height,
                                width: r.width,
                                height: r.height
                            }
                        }
                    }
                }
                return null
            }, getChildIndex: function (e, t) {
                if (t) for (var n, i = e.parentNode.children, r = 0, a = 0, o = i.length; o > r; r++) if (n = i[r], n.nodeName && n.nodeName.toLowerCase() == t) {
                    if (n == e) return a;
                    a++
                }
                return Array.prototype.slice.call(e.parentNode.children).indexOf(e)
            }, swapNodes: function (e, t) {
                t.parentNode.insertBefore(e, t)
            }, elementIsDescendant: function (e, t, n) {
                var i = e;
                do {
                    if (i === t) return !0;
                    i = i.parentNode
                } while (i && i !== n);
                return !1
            }, getParentWithClass: function (e, t, n) {
                for (n = n || 10; e.parentNode && n--;) {
                    if (e.parentNode.classList && e.parentNode.classList.contains(t)) return e.parentNode;
                    e = e.parentNode
                }
                return null
            }, getParentOrSelfWithClass: function (e, t, n) {
                for (n = n || 10; e && n--;) {
                    if (e.classList && e.classList.contains(t)) return e;
                    e = e.parentNode
                }
                return null
            }, rectContains: function (e, t, n, i, r, a) {
                return n > e || e > r ? !1 : i > t || t > a ? !1 : !0
            }, blurAll: function () {
                return t.activeElement && t.activeElement != t.body ? (t.activeElement.blur(), t.activeElement) : null
            }, cachedAttr: function (e, t, n) {
                if (e = e && e.length && e[0] || e, e && e.setAttribute) {
                    var i = "$attr-" + t;
                    return arguments.length > 2 ? e[i] !== n && (e.setAttribute(t, n), e[i] = n) : "undefined" == typeof e[i] && (e[i] = e.getAttribute(t)), e[i]
                }
            }, cachedStyles: function (e, t) {
                if (e = e && e.length && e[0] || e, e && e.style) for (var n in t) e["$style-" + n] !== t[n] && (e.style[n] = e["$style-" + n] = t[n])
            }
        }, n.requestAnimationFrame = n.DomUtil.requestAnimationFrame, n.cancelAnimationFrame = n.DomUtil.cancelAnimationFrame, n.animationFrameThrottle = n.DomUtil.animationFrameThrottle
    }(window, document, ionic), function (e) {
        e.CustomEvent = function () {
            if ("function" == typeof window.CustomEvent) return CustomEvent;
            var e = function (e, t) {
                var n;
                t = t || {bubbles: !1, cancelable: !1, detail: void 0};
                try {
                    n = document.createEvent("CustomEvent"), n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail)
                } catch (i) {
                    n = document.createEvent("Event");
                    for (var r in t) n[r] = t[r];
                    n.initEvent(e, t.bubbles, t.cancelable)
                }
                return n
            };
            return e.prototype = window.Event.prototype, e
        }(), e.EventController = {
            VIRTUALIZED_EVENTS: ["tap", "swipe", "swiperight", "swipeleft", "drag", "hold", "release"],
            trigger: function (t, n, i, r) {
                var a = new e.CustomEvent(t, {detail: n, bubbles: !!i, cancelable: !!r});
                n && n.target && n.target.dispatchEvent && n.target.dispatchEvent(a) || window.dispatchEvent(a)
            },
            on: function (t, n, i) {
                for (var r = i || window, a = 0, o = this.VIRTUALIZED_EVENTS.length; o > a; a++) if (t == this.VIRTUALIZED_EVENTS[a]) {
                    var s = new e.Gesture(i);
                    return s.on(t, n), s
                }
                r.addEventListener(t, n)
            },
            off: function (e, t, n) {
                n.removeEventListener(e, t)
            },
            onGesture: function (t, n, i, r) {
                var a = new e.Gesture(i, r);
                return a.on(t, n), a
            },
            offGesture: function (e, t, n) {
                e && e.off(t, n)
            },
            handlePopState: function () {
            }
        }, e.on = function () {
            e.EventController.on.apply(e.EventController, arguments)
        }, e.off = function () {
            e.EventController.off.apply(e.EventController, arguments)
        }, e.trigger = e.EventController.trigger, e.onGesture = function () {
            return e.EventController.onGesture.apply(e.EventController.onGesture, arguments)
        }, e.offGesture = function () {
            return e.EventController.offGesture.apply(e.EventController.offGesture, arguments)
        }
    }(window.ionic), function (e) {
        function t() {
            if (!e.Gestures.READY) {
                e.Gestures.event.determineEventTypes();
                for (var t in e.Gestures.gestures) e.Gestures.gestures.hasOwnProperty(t) && e.Gestures.detection.register(e.Gestures.gestures[t]);
                e.Gestures.event.onTouch(e.Gestures.DOCUMENT, e.Gestures.EVENT_MOVE, e.Gestures.detection.detect), e.Gestures.event.onTouch(e.Gestures.DOCUMENT, e.Gestures.EVENT_END, e.Gestures.detection.detect), e.Gestures.READY = !0
            }
        }

        e.Gesture = function (t, n) {
            return new e.Gestures.Instance(t, n || {})
        }, e.Gestures = {}, e.Gestures.defaults = {stop_browser_behavior: "disable-user-behavior"}, e.Gestures.HAS_POINTEREVENTS = window.navigator.pointerEnabled || window.navigator.msPointerEnabled, e.Gestures.HAS_TOUCHEVENTS = "ontouchstart" in window, e.Gestures.MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android|silk/i, e.Gestures.NO_MOUSEEVENTS = e.Gestures.HAS_TOUCHEVENTS && window.navigator.userAgent.match(e.Gestures.MOBILE_REGEX), e.Gestures.EVENT_TYPES = {}, e.Gestures.DIRECTION_DOWN = "down", e.Gestures.DIRECTION_LEFT = "left", e.Gestures.DIRECTION_UP = "up", e.Gestures.DIRECTION_RIGHT = "right", e.Gestures.POINTER_MOUSE = "mouse", e.Gestures.POINTER_TOUCH = "touch", e.Gestures.POINTER_PEN = "pen", e.Gestures.EVENT_START = "start", e.Gestures.EVENT_MOVE = "move", e.Gestures.EVENT_END = "end", e.Gestures.DOCUMENT = window.document, e.Gestures.plugins = {}, e.Gestures.READY = !1, e.Gestures.Instance = function (n, i) {
            var r = this;
            return null === n ? this : (t(), this.element = n, this.enabled = !0, this.options = e.Gestures.utils.extend(e.Gestures.utils.extend({}, e.Gestures.defaults), i || {}), this.options.stop_browser_behavior && e.Gestures.utils.stopDefaultBrowserBehavior(this.element, this.options.stop_browser_behavior), e.Gestures.event.onTouch(n, e.Gestures.EVENT_START, function (t) {
                r.enabled && e.Gestures.detection.startDetect(r, t)
            }), this)
        }, e.Gestures.Instance.prototype = {
            on: function (e, t) {
                for (var n = e.split(" "), i = 0; i < n.length; i++) this.element.addEventListener(n[i], t, !1);
                return this
            }, off: function (e, t) {
                for (var n = e.split(" "), i = 0; i < n.length; i++) this.element.removeEventListener(n[i], t, !1);
                return this
            }, trigger: function (t, n) {
                var i = e.Gestures.DOCUMENT.createEvent("Event");
                i.initEvent(t, !0, !0), i.gesture = n;
                var r = this.element;
                return e.Gestures.utils.hasParent(n.target, r) && (r = n.target), r.dispatchEvent(i), this
            }, enable: function (e) {
                return this.enabled = e, this
            }
        };
        var n = null, i = !1, r = !1;
        e.Gestures.event = {
            bindDom: function (e, t, n) {
                for (var i = t.split(" "), r = 0; r < i.length; r++) e.addEventListener(i[r], n, !1)
            }, onTouch: function (t, a, o) {
                var s = this;
                this.bindDom(t, e.Gestures.EVENT_TYPES[a], function (l) {
                    var c = l.type.toLowerCase();
                    if (!c.match(/mouse/) || !r) {
                        c.match(/touch/) || c.match(/pointerdown/) || c.match(/mouse/) && 1 === l.which ? i = !0 : c.match(/mouse/) && 1 !== l.which && (i = !1), c.match(/touch|pointer/) && (r = !0);
                        var d = 0;
                        i && (e.Gestures.HAS_POINTEREVENTS && a != e.Gestures.EVENT_END ? d = e.Gestures.PointerEvent.updatePointer(a, l) : c.match(/touch/) ? d = l.touches.length : r || (d = c.match(/up/) ? 0 : 1), d > 0 && a == e.Gestures.EVENT_END ? a = e.Gestures.EVENT_MOVE : d || (a = e.Gestures.EVENT_END), (d || null === n) && (n = l), o.call(e.Gestures.detection, s.collectEventData(t, a, s.getTouchList(n, a), l)), e.Gestures.HAS_POINTEREVENTS && a == e.Gestures.EVENT_END && (d = e.Gestures.PointerEvent.updatePointer(a, l))), d || (n = null, i = !1, r = !1, e.Gestures.PointerEvent.reset())
                    }
                })
            }, determineEventTypes: function () {
                var t;
                t = e.Gestures.HAS_POINTEREVENTS ? e.Gestures.PointerEvent.getEvents() : e.Gestures.NO_MOUSEEVENTS ? ["touchstart", "touchmove", "touchend touchcancel"] : ["touchstart mousedown", "touchmove mousemove", "touchend touchcancel mouseup"], e.Gestures.EVENT_TYPES[e.Gestures.EVENT_START] = t[0], e.Gestures.EVENT_TYPES[e.Gestures.EVENT_MOVE] = t[1], e.Gestures.EVENT_TYPES[e.Gestures.EVENT_END] = t[2]
            }, getTouchList: function (t) {
                return e.Gestures.HAS_POINTEREVENTS ? e.Gestures.PointerEvent.getTouchList() : t.touches ? t.touches : (t.identifier = 1, [t])
            }, collectEventData: function (t, n, i, r) {
                var a = e.Gestures.POINTER_TOUCH;
                return (r.type.match(/mouse/) || e.Gestures.PointerEvent.matchType(e.Gestures.POINTER_MOUSE, r)) && (a = e.Gestures.POINTER_MOUSE), {
                    center: e.Gestures.utils.getCenter(i),
                    timeStamp: (new Date).getTime(),
                    target: r.target,
                    touches: i,
                    eventType: n,
                    pointerType: a,
                    srcEvent: r,
                    preventDefault: function () {
                        this.srcEvent.preventManipulation && this.srcEvent.preventManipulation(), this.srcEvent.preventDefault
                    },
                    stopPropagation: function () {
                        this.srcEvent.stopPropagation()
                    },
                    stopDetect: function () {
                        return e.Gestures.detection.stopDetect()
                    }
                }
            }
        }, e.Gestures.PointerEvent = {
            pointers: {}, getTouchList: function () {
                var e = this, t = [];
                return Object.keys(e.pointers).sort().forEach(function (n) {
                    t.push(e.pointers[n])
                }), t
            }, updatePointer: function (t, n) {
                return t == e.Gestures.EVENT_END ? this.pointers = {} : (n.identifier = n.pointerId, this.pointers[n.pointerId] = n), Object.keys(this.pointers).length
            }, matchType: function (t, n) {
                if (!n.pointerType) return !1;
                var i = {};
                return i[e.Gestures.POINTER_MOUSE] = n.pointerType == n.MSPOINTER_TYPE_MOUSE || n.pointerType == e.Gestures.POINTER_MOUSE, i[e.Gestures.POINTER_TOUCH] = n.pointerType == n.MSPOINTER_TYPE_TOUCH || n.pointerType == e.Gestures.POINTER_TOUCH, i[e.Gestures.POINTER_PEN] = n.pointerType == n.MSPOINTER_TYPE_PEN || n.pointerType == e.Gestures.POINTER_PEN, i[t]
            }, getEvents: function () {
                return ["pointerdown MSPointerDown", "pointermove MSPointerMove", "pointerup pointercancel MSPointerUp MSPointerCancel"]
            }, reset: function () {
                this.pointers = {}
            }
        }, e.Gestures.utils = {
            extend: function (e, t, n) {
                for (var i in t) void 0 !== e[i] && n || (e[i] = t[i]);
                return e
            }, hasParent: function (e, t) {
                for (; e;) {
                    if (e == t) return !0;
                    e = e.parentNode
                }
                return !1
            }, getCenter: function (e) {
                for (var t = [], n = [], i = 0, r = e.length; r > i; i++) t.push(e[i].pageX), n.push(e[i].pageY);
                return {
                    pageX: (Math.min.apply(Math, t) + Math.max.apply(Math, t)) / 2,
                    pageY: (Math.min.apply(Math, n) + Math.max.apply(Math, n)) / 2
                }
            }, getVelocity: function (e, t, n) {
                return {x: Math.abs(t / e) || 0, y: Math.abs(n / e) || 0}
            }, getAngle: function (e, t) {
                var n = t.pageY - e.pageY, i = t.pageX - e.pageX;
                return 180 * Math.atan2(n, i) / Math.PI
            }, getDirection: function (t, n) {
                var i = Math.abs(t.pageX - n.pageX), r = Math.abs(t.pageY - n.pageY);
                return i >= r ? t.pageX - n.pageX > 0 ? e.Gestures.DIRECTION_LEFT : e.Gestures.DIRECTION_RIGHT : t.pageY - n.pageY > 0 ? e.Gestures.DIRECTION_UP : e.Gestures.DIRECTION_DOWN
            }, getDistance: function (e, t) {
                var n = t.pageX - e.pageX, i = t.pageY - e.pageY;
                return Math.sqrt(n * n + i * i)
            }, getScale: function (e, t) {
                return e.length >= 2 && t.length >= 2 ? this.getDistance(t[0], t[1]) / this.getDistance(e[0], e[1]) : 1
            }, getRotation: function (e, t) {
                return e.length >= 2 && t.length >= 2 ? this.getAngle(t[1], t[0]) - this.getAngle(e[1], e[0]) : 0
            }, isVertical: function (t) {
                return t == e.Gestures.DIRECTION_UP || t == e.Gestures.DIRECTION_DOWN
            }, stopDefaultBrowserBehavior: function (e, t) {
                e && e.classList && (e.classList.add(t), e.onselectstart = function () {
                    return !1
                })
            }
        }, e.Gestures.detection = {
            gestures: [], current: null, previous: null, stopped: !1, startDetect: function (t, n) {
                this.current || (this.stopped = !1, this.current = {
                    inst: t,
                    startEvent: e.Gestures.utils.extend({}, n),
                    lastEvent: !1,
                    name: ""
                }, this.detect(n))
            }, detect: function (t) {
                if (!this.current || this.stopped) return null;
                t = this.extendEventData(t);
                for (var n = this.current.inst.options, i = 0, r = this.gestures.length; r > i; i++) {
                    var a = this.gestures[i];
                    if (!this.stopped && n[a.name] !== !1 && a.handler.call(a, t, this.current.inst) === !1) {
                        this.stopDetect();
                        break
                    }
                }
                return this.current && (this.current.lastEvent = t), t.eventType == e.Gestures.EVENT_END && !t.touches.length - 1 && this.stopDetect(), t
            }, stopDetect: function () {
                this.previous = e.Gestures.utils.extend({}, this.current), this.current = null, this.stopped = !0
            }, extendEventData: function (t) {
                var n = this.current.startEvent;
                if (n && (t.touches.length != n.touches.length || t.touches === n.touches)) {
                    n.touches = [];
                    for (var i = 0, r = t.touches.length; r > i; i++) n.touches.push(e.Gestures.utils.extend({}, t.touches[i]))
                }
                var a = t.timeStamp - n.timeStamp, o = t.center.pageX - n.center.pageX,
                    s = t.center.pageY - n.center.pageY, l = e.Gestures.utils.getVelocity(a, o, s);
                return e.Gestures.utils.extend(t, {
                    deltaTime: a,
                    deltaX: o,
                    deltaY: s,
                    velocityX: l.x,
                    velocityY: l.y,
                    distance: e.Gestures.utils.getDistance(n.center, t.center),
                    angle: e.Gestures.utils.getAngle(n.center, t.center),
                    direction: e.Gestures.utils.getDirection(n.center, t.center),
                    scale: e.Gestures.utils.getScale(n.touches, t.touches),
                    rotation: e.Gestures.utils.getRotation(n.touches, t.touches),
                    startEvent: n
                }), t
            }, register: function (t) {
                var n = t.defaults || {};
                return void 0 === n[t.name] && (n[t.name] = !0), e.Gestures.utils.extend(e.Gestures.defaults, n, !0), t.index = t.index || 1e3, this.gestures.push(t), this.gestures.sort(function (e, t) {
                    return e.index < t.index ? -1 : e.index > t.index ? 1 : 0
                }), this.gestures
            }
        }, e.Gestures.gestures = e.Gestures.gestures || {}, e.Gestures.gestures.Hold = {
            name: "hold",
            index: 10,
            defaults: {hold_timeout: 500, hold_threshold: 9},
            timer: null,
            handler: function (t, n) {
                switch (t.eventType) {
                    case e.Gestures.EVENT_START:
                        clearTimeout(this.timer), e.Gestures.detection.current.name = this.name, this.timer = setTimeout(function () {
                            "hold" == e.Gestures.detection.current.name && (e.tap.cancelClick(), n.trigger("hold", t))
                        }, n.options.hold_timeout);
                        break;
                    case e.Gestures.EVENT_MOVE:
                        t.distance > n.options.hold_threshold && clearTimeout(this.timer);
                        break;
                    case e.Gestures.EVENT_END:
                        clearTimeout(this.timer)
                }
            }
        }, e.Gestures.gestures.Tap = {
            name: "tap",
            index: 100,
            defaults: {
                tap_max_touchtime: 250,
                tap_max_distance: 10,
                tap_always: !0,
                doubletap_distance: 20,
                doubletap_interval: 300
            },
            handler: function (t, n) {
                if (t.eventType == e.Gestures.EVENT_END && "touchcancel" != t.srcEvent.type) {
                    var i = e.Gestures.detection.previous, r = !1;
                    if (t.deltaTime > n.options.tap_max_touchtime || t.distance > n.options.tap_max_distance) return;
                    i && "tap" == i.name && t.timeStamp - i.lastEvent.timeStamp < n.options.doubletap_interval && t.distance < n.options.doubletap_distance && (n.trigger("doubletap", t), r = !0), (!r || n.options.tap_always) && (e.Gestures.detection.current.name = "tap", n.trigger("tap", t))
                }
            }
        }, e.Gestures.gestures.Swipe = {
            name: "swipe",
            index: 40,
            defaults: {swipe_max_touches: 1, swipe_velocity: .4},
            handler: function (t, n) {
                if (t.eventType == e.Gestures.EVENT_END) {
                    if (n.options.swipe_max_touches > 0 && t.touches.length > n.options.swipe_max_touches) return;
                    (t.velocityX > n.options.swipe_velocity || t.velocityY > n.options.swipe_velocity) && (n.trigger(this.name, t), n.trigger(this.name + t.direction, t))
                }
            }
        }, e.Gestures.gestures.Drag = {
            name: "drag",
            index: 50,
            defaults: {
                drag_min_distance: 10,
                correct_for_drag_min_distance: !0,
                drag_max_touches: 1,
                drag_block_horizontal: !0,
                drag_block_vertical: !0,
                drag_lock_to_axis: !1,
                drag_lock_min_distance: 25,
                prevent_default_directions: []
            },
            triggered: !1,
            handler: function (t, n) {
                if ("touchstart" == t.srcEvent.type || "touchend" == t.srcEvent.type ? this.preventedFirstMove = !1 : this.preventedFirstMove || "touchmove" != t.srcEvent.type || (n.options.prevent_default_directions.length > 0 && -1 != n.options.prevent_default_directions.indexOf(t.direction) && t.srcEvent.preventDefault(), this.preventedFirstMove = !0), e.Gestures.detection.current.name != this.name && this.triggered) return n.trigger(this.name + "end", t), void (this.triggered = !1);
                if (!(n.options.drag_max_touches > 0 && t.touches.length > n.options.drag_max_touches)) switch (t.eventType) {
                    case e.Gestures.EVENT_START:
                        this.triggered = !1;
                        break;
                    case e.Gestures.EVENT_MOVE:
                        if (t.distance < n.options.drag_min_distance && e.Gestures.detection.current.name != this.name) return;
                        if (e.Gestures.detection.current.name != this.name && (e.Gestures.detection.current.name = this.name, n.options.correct_for_drag_min_distance)) {
                            var i = Math.abs(n.options.drag_min_distance / t.distance);
                            e.Gestures.detection.current.startEvent.center.pageX += t.deltaX * i, e.Gestures.detection.current.startEvent.center.pageY += t.deltaY * i, t = e.Gestures.detection.extendEventData(t)
                        }
                        (e.Gestures.detection.current.lastEvent.drag_locked_to_axis || n.options.drag_lock_to_axis && n.options.drag_lock_min_distance <= t.distance) && (t.drag_locked_to_axis = !0);
                        var r = e.Gestures.detection.current.lastEvent.direction;
                        t.drag_locked_to_axis && r !== t.direction && (e.Gestures.utils.isVertical(r) ? t.direction = t.deltaY < 0 ? e.Gestures.DIRECTION_UP : e.Gestures.DIRECTION_DOWN : t.direction = t.deltaX < 0 ? e.Gestures.DIRECTION_LEFT : e.Gestures.DIRECTION_RIGHT), this.triggered || (n.trigger(this.name + "start", t), this.triggered = !0), n.trigger(this.name, t), n.trigger(this.name + t.direction, t), (n.options.drag_block_vertical && e.Gestures.utils.isVertical(t.direction) || n.options.drag_block_horizontal && !e.Gestures.utils.isVertical(t.direction)) && t.preventDefault();
                        break;
                    case e.Gestures.EVENT_END:
                        this.triggered && n.trigger(this.name + "end", t), this.triggered = !1
                }
            }
        }, e.Gestures.gestures.Transform = {
            name: "transform",
            index: 45,
            defaults: {transform_min_scale: .01, transform_min_rotation: 1, transform_always_block: !1},
            triggered: !1,
            handler: function (t, n) {
                if (e.Gestures.detection.current.name != this.name && this.triggered) return n.trigger(this.name + "end", t), void (this.triggered = !1);
                if (!(t.touches.length < 2)) switch (n.options.transform_always_block && t.preventDefault(), t.eventType) {
                    case e.Gestures.EVENT_START:
                        this.triggered = !1;
                        break;
                    case e.Gestures.EVENT_MOVE:
                        var i = Math.abs(1 - t.scale), r = Math.abs(t.rotation);
                        if (i < n.options.transform_min_scale && r < n.options.transform_min_rotation) return;
                        e.Gestures.detection.current.name = this.name, this.triggered || (n.trigger(this.name + "start", t), this.triggered = !0), n.trigger(this.name, t), r > n.options.transform_min_rotation && n.trigger("rotate", t), i > n.options.transform_min_scale && (n.trigger("pinch", t), n.trigger("pinch" + (t.scale < 1 ? "in" : "out"), t));
                        break;
                    case e.Gestures.EVENT_END:
                        this.triggered && n.trigger(this.name + "end", t), this.triggered = !1
                }
            }
        }, e.Gestures.gestures.Touch = {
            name: "touch",
            index: -(1 / 0),
            defaults: {prevent_default: !1, prevent_mouseevents: !1},
            handler: function (t, n) {
                return n.options.prevent_mouseevents && t.pointerType == e.Gestures.POINTER_MOUSE ? void t.stopDetect() : (n.options.prevent_default && t.preventDefault(), void (t.eventType == e.Gestures.EVENT_START && n.trigger(this.name, t)))
            }
        }, e.Gestures.gestures.Release = {
            name: "release", index: 1 / 0, handler: function (t, n) {
                t.eventType == e.Gestures.EVENT_END && n.trigger(this.name, t)
            }
        }
    }(window.ionic), function (e, t, n) {
        function i(e) {
            e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var t = new RegExp("[\\?&]" + e + "=([^&#]*)"), n = t.exec(location.search);
            return null === n ? "" : decodeURIComponent(n[1].replace(/\+/g, " "))
        }

        function r() {
            setTimeout(function () {
                !f.isReady && f.isWebView()
            }, _)
        }

        function a() {
            f.isWebView() ? t.addEventListener("deviceready", o, !1) : o(), s && e.removeEventListener("load", a, !1)
        }

        function o() {
            f.isReady = !0, f.detect();
            for (var e = 0; e < v.length; e++) v[e]();
            v = [], n.trigger("platformready", {target: t}), h(function () {
                t.body.classList.add("platform-ready")
            })
        }

        var s, l = "ios", c = "android", d = "windowsphone", u = "edge", p = "crosswalk", h = n.requestAnimationFrame,
            f = n.Platform = {
                navigator: e.navigator,
                isReady: !1,
                isFullScreen: !1,
                platforms: null,
                grade: null,
                ua: navigator.userAgent,
                ready: function (e) {
                    f.isReady ? e() : v.push(e)
                },
                detect: function () {
                    f._checkPlatforms(), h(function () {
                        for (var e = 0; e < f.platforms.length; e++) t.body.classList.add("platform-" + f.platforms[e])
                    })
                },
                setGrade: function (e) {
                    var n = f.grade;
                    f.grade = e, h(function () {
                        n && t.body.classList.remove("grade-" + n), t.body.classList.add("grade-" + e)
                    })
                },
                device: function () {
                    return e.device || {}
                },
                _checkPlatforms: function () {
                    f.platforms = [];
                    var t = "a";
                    f.isWebView() ? (f.platforms.push("webview"), e.cordova || e.PhoneGap || e.phonegap ? f.platforms.push("cordova") : "object" == typeof e.forge && f.platforms.push("trigger")) : f.platforms.push("browser"), f.isIPad() && f.platforms.push("ipad");
                    var n = f.platform();
                    if (n) {
                        f.platforms.push(n);
                        var i = f.version();
                        if (i) {
                            var r = i.toString();
                            r.indexOf(".") > 0 ? r = r.replace(".", "_") : r += "_0", f.platforms.push(n + r.split("_")[0]), f.platforms.push(n + r), f.isAndroid() && 4.4 > i ? t = 4 > i ? "c" : "b" : f.isWindowsPhone() && (t = "b")
                        }
                    }
                    f.setGrade(t)
                },
                isWebView: function () {
                    return !(!e.cordova && !e.PhoneGap && !e.phonegap && "object" !== e.forge)
                },
                isIPad: function () {
                    return /iPad/i.test(f.navigator.platform) ? !0 : /iPad/i.test(f.ua)
                },
                isIOS: function () {
                    return f.is(l)
                },
                isAndroid: function () {
                    return f.is(c)
                },
                isWindowsPhone: function () {
                    return f.is(d)
                },
                isEdge: function () {
                    return f.is(u)
                },
                isCrosswalk: function () {
                    return f.is(p)
                },
                platform: function () {
                    return null === m && f.setPlatform(f.device().platform), m
                },
                setPlatform: function (e) {
                    m = "undefined" != typeof e && null !== e && e.length ? e.toLowerCase() : i("ionicplatform") ? i("ionicplatform") : f.ua.indexOf("Edge") > -1 ? u : f.ua.indexOf("Windows Phone") > -1 ? d : f.ua.indexOf("Android") > 0 ? c : /iPhone|iPad|iPod/.test(f.ua) ? l : f.navigator.platform && navigator.platform.toLowerCase().split(" ")[0] || ""
                },
                version: function () {
                    return null === g && f.setVersion(f.device().version), g
                },
                setVersion: function (e) {
                    if ("undefined" != typeof e && null !== e && (e = e.split("."), e = parseFloat(e[0] + "." + (e.length > 1 ? e[1] : 0)), !isNaN(e))) return void (g = e);
                    g = 0;
                    var t = f.platform(), n = {
                        android: /Android (\d+).(\d+)?/,
                        ios: /OS (\d+)_(\d+)?/,
                        windowsphone: /Windows Phone (\d+).(\d+)?/
                    };
                    n[t] && (e = f.ua.match(n[t]), e && e.length > 2 && (g = parseFloat(e[1] + "." + e[2])))
                },
                is: function (e) {
                    if (e = e.toLowerCase(), f.platforms) for (var t = 0; t < f.platforms.length; t++) if (f.platforms[t] === e) return !0;
                    var n = f.platform();
                    return n ? n === e.toLowerCase() : f.ua.toLowerCase().indexOf(e) >= 0
                },
                exitApp: function () {
                    f.ready(function () {
                        navigator.app && navigator.app.exitApp && navigator.app.exitApp()
                    })
                },
                showStatusBar: function (n) {
                    f._showStatusBar = n, f.ready(function () {
                        h(function () {
                            f._showStatusBar ? (e.StatusBar && e.StatusBar.show(), t.body.classList.remove("status-bar-hide")) : (e.StatusBar && e.StatusBar.hide(), t.body.classList.add("status-bar-hide"))
                        })
                    })
                },
                fullScreen: function (e, i) {
                    f.isFullScreen = e !== !1, n.DomUtil.ready(function () {
                        h(function () {
                            f.isFullScreen ? t.body.classList.add("fullscreen") : t.body.classList.remove("fullscreen")
                        }), f.showStatusBar(i === !0)
                    })
                }
            }, m = null, g = null, v = [], _ = 2e3;
        r(), "complete" === t.readyState ? a() : (s = !0, e.addEventListener("load", a, !1))
    }(window, document, ionic), function (e, t) {
        "use strict";
        t.CSS = {}, t.CSS.TRANSITION = [], t.CSS.TRANSFORM = [], t.EVENTS = {}, function () {
            var n,
                i = ["webkitTransform", "transform", "-webkit-transform", "webkit-transform", "-moz-transform", "moz-transform", "MozTransform", "mozTransform", "msTransform"];
            for (n = 0; n < i.length; n++) if (void 0 !== e.documentElement.style[i[n]]) {
                t.CSS.TRANSFORM = i[n];
                break
            }
            for (i = ["webkitTransition", "mozTransition", "msTransition", "transition"], n = 0; n < i.length; n++) if (void 0 !== e.documentElement.style[i[n]]) {
                t.CSS.TRANSITION = i[n];
                break
            }
            t.CSS.TRANSITION = t.CSS.TRANSITION || "transition";
            var r = t.CSS.TRANSITION.indexOf("webkit") > -1;
            t.CSS.TRANSITION_DURATION = (r ? "-webkit-" : "") + "transition-duration", t.CSS.TRANSITIONEND = (r ? "webkitTransitionEnd " : "") + "transitionend"
        }(), function () {
            var e = "touchstart", n = "touchmove", i = "touchend", r = "touchcancel";
            window.navigator.pointerEnabled ? (e = "pointerdown",
                n = "pointermove", i = "pointerup", r = "pointercancel") : window.navigator.msPointerEnabled && (e = "MSPointerDown", n = "MSPointerMove", i = "MSPointerUp", r = "MSPointerCancel"), t.EVENTS.touchstart = e, t.EVENTS.touchmove = n, t.EVENTS.touchend = i, t.EVENTS.touchcancel = r
        }(), "classList" in e.documentElement || !Object.defineProperty || "undefined" == typeof HTMLElement || Object.defineProperty(HTMLElement.prototype, "classList", {
            get: function () {
                function e(e) {
                    return function () {
                        var n, i = t.className.split(/\s+/);
                        for (n = 0; n < arguments.length; n++) e(i, i.indexOf(arguments[n]), arguments[n]);
                        t.className = i.join(" ")
                    }
                }

                var t = this;
                return {
                    add: e(function (e, t, n) {
                        ~t || e.push(n)
                    }), remove: e(function (e, t) {
                        ~t && e.splice(t, 1)
                    }), toggle: e(function (e, t, n) {
                        ~t ? e.splice(t, 1) : e.push(n)
                    }), contains: function (e) {
                        return !!~t.className.split(/\s+/).indexOf(e)
                    }, item: function (e) {
                        return t.className.split(/\s+/)[e] || null
                    }
                }
            }
        })
    }(document, ionic);
    var X, F, B, W, $, q, U, K, j = "touchmove", Z = 12, Q = 50, J = {
        click: i,
        mousedown: r,
        mouseup: a,
        mousemove: o,
        touchstart: s,
        touchend: l,
        touchcancel: d,
        touchmove: c,
        pointerdown: s,
        pointerup: l,
        pointercancel: d,
        pointermove: c,
        MSPointerDown: s,
        MSPointerUp: l,
        MSPointerCancel: d,
        MSPointerMove: c,
        focusin: m,
        focusout: g
    };
    ionic.tap = {
        register: function (t) {
            return X = t, e("click", !0, !0), e("mouseup"), e("mousedown"), window.navigator.pointerEnabled ? (e("pointerdown"), e("pointerup"), e("pointercancel"), j = "pointermove") : window.navigator.msPointerEnabled ? (e("MSPointerDown"), e("MSPointerUp"), e("MSPointerCancel"), j = "MSPointerMove") : (e("touchstart"), e("touchend"), e("touchcancel")), e("focusin"), e("focusout"), function () {
                for (var t in J) e(t, !1);
                X = null, F = null, B = !1, $ = !1, q = null
            }
        }, ignoreScrollStart: function (e) {
            return e.defaultPrevented || /^(file|range)$/i.test(e.target.type) || "true" == (e.target.dataset ? e.target.dataset.preventScroll : e.target.getAttribute("data-prevent-scroll")) || !!/^(object|embed)$/i.test(e.target.tagName) || ionic.tap.isElementTapDisabled(e.target)
        }, isTextInput: function (e) {
            return !!e && ("TEXTAREA" == e.tagName || "true" === e.contentEditable || "INPUT" == e.tagName && !/^(radio|checkbox|range|file|submit|reset|color|image|button)$/i.test(e.type))
        }, isDateInput: function (e) {
            return !!e && "INPUT" == e.tagName && /^(date|time|datetime-local|month|week)$/i.test(e.type)
        }, isVideo: function (e) {
            return !!e && "VIDEO" == e.tagName
        }, isKeyboardElement: function (e) {
            return !ionic.Platform.isIOS() || ionic.Platform.isIPad() ? ionic.tap.isTextInput(e) && !ionic.tap.isDateInput(e) : ionic.tap.isTextInput(e) || !!e && "SELECT" == e.tagName
        }, isLabelWithTextInput: function (e) {
            var t = w(e, !1);
            return !!t && ionic.tap.isTextInput(T(t))
        }, containsOrIsTextInput: function (e) {
            return ionic.tap.isTextInput(e) || ionic.tap.isLabelWithTextInput(e)
        }, cloneFocusedInput: function (e) {
            ionic.tap.hasCheckedClone || (ionic.tap.hasCheckedClone = !0, ionic.requestAnimationFrame(function () {
                var t = e.querySelector(":focus");
                if (ionic.tap.isTextInput(t) && !ionic.tap.isDateInput(t)) {
                    var n = t.cloneNode(!0);
                    n.value = t.value, n.classList.add("cloned-text-input"), n.readOnly = !0, t.isContentEditable && (n.contentEditable = t.contentEditable, n.innerHTML = t.innerHTML), t.parentElement.insertBefore(n, t), t.classList.add("previous-input-focus"), n.scrollTop = t.scrollTop
                }
            }))
        }, hasCheckedClone: !1, removeClonedInputs: function (e) {
            ionic.tap.hasCheckedClone = !1, ionic.requestAnimationFrame(function () {
                var t, n = e.querySelectorAll(".cloned-text-input"), i = e.querySelectorAll(".previous-input-focus");
                for (t = 0; t < n.length; t++) n[t].parentElement.removeChild(n[t]);
                for (t = 0; t < i.length; t++) i[t].classList.remove("previous-input-focus"), i[t].style.top = "", ionic.keyboard.isOpen && !ionic.keyboard.isClosing && i[t].focus()
            })
        }, requiresNativeClick: function (e) {
            return ionic.Platform.isWindowsPhone() && ("A" == e.tagName || "BUTTON" == e.tagName || e.hasAttribute("ng-click") || "INPUT" == e.tagName && ("button" == e.type || "submit" == e.type)) ? !0 : !e || e.disabled || /^(file|range)$/i.test(e.type) || /^(object|video)$/i.test(e.tagName) || ionic.tap.isLabelContainingFileInput(e) ? !0 : ionic.tap.isElementTapDisabled(e)
        }, isLabelContainingFileInput: function (e) {
            var t = w(e);
            if ("LABEL" !== t.tagName) return !1;
            var n = t.querySelector("input[type=file]");
            return n && n.disabled === !1 ? !0 : !1
        }, isElementTapDisabled: function (e) {
            if (e && 1 === e.nodeType) for (var t = e; t;) {
                if (t.getAttribute && "true" == t.getAttribute("data-tap-disabled")) return !0;
                t = t.parentElement
            }
            return !1
        }, setTolerance: function (e, t) {
            Z = e, Q = t
        }, cancelClick: function () {
            $ = !0
        }, pointerCoord: function (e) {
            var t = {x: 0, y: 0};
            if (e) {
                var n = e.touches && e.touches.length ? e.touches : [e],
                    i = e.changedTouches && e.changedTouches[0] || n[0];
                i && (t.x = i.clientX || i.pageX || 0, t.y = i.clientY || i.pageY || 0)
            }
            return t
        }
    }, ionic.DomUtil.ready(function () {
        var e = "undefined" != typeof angular ? angular : null;
        (!e || e && !e.scenario) && ionic.tap.register(document)
    }), function (e, t) {
        "use strict";

        function n() {
            a = {}, t.requestAnimationFrame(r)
        }

        function i() {
            for (var e in a) a[e] && (a[e].classList.add(l), o[e] = a[e]);
            a = {}
        }

        function r() {
            if (t.transition && t.transition.isActive) return void setTimeout(r, 400);
            for (var e in o) o[e] && (o[e].classList.remove(l), delete o[e])
        }

        var a = {}, o = {}, s = 0, l = "activated";
        t.activator = {
            start: function (e) {
                var n = t.tap.pointerCoord(e).x;
                n > 0 && 30 > n || t.requestAnimationFrame(function () {
                    if (!(t.scroll && t.scroll.isScrolling || t.tap.requiresNativeClick(e.target))) {
                        for (var n, r = e.target, o = 0; 6 > o && (r && 1 === r.nodeType); o++) {
                            if (n && r.classList && r.classList.contains("item")) {
                                n = r;
                                break
                            }
                            if ("A" == r.tagName || "BUTTON" == r.tagName || r.hasAttribute("ng-click")) {
                                n = r;
                                break
                            }
                            if (r.classList && r.classList.contains("button")) {
                                n = r;
                                break
                            }
                            if ("ION-CONTENT" == r.tagName || r.classList && r.classList.contains("pane") || "BODY" == r.tagName) break;
                            r = r.parentElement
                        }
                        n && (a[s] = n, t.requestAnimationFrame(i), s = s > 29 ? 0 : s + 1)
                    }
                })
            }, end: function () {
                setTimeout(n, 200)
            }
        }
    }(document, ionic), function (e) {
        var t = 0;
        e.Utils = {
            arrayMove: function (e, t, n) {
                if (n >= e.length) for (var i = n - e.length; i-- + 1;) e.push(void 0);
                return e.splice(n, 0, e.splice(t, 1)[0]), e
            }, proxy: function (e, t) {
                var n = Array.prototype.slice.call(arguments, 2);
                return function () {
                    return e.apply(t, n.concat(Array.prototype.slice.call(arguments)))
                }
            }, debounce: function (e, t, n) {
                var i, r, a, o, s;
                return function () {
                    a = this, r = arguments, o = new Date;
                    var l = function () {
                        var c = new Date - o;
                        t > c ? i = setTimeout(l, t - c) : (i = null, n || (s = e.apply(a, r)))
                    }, c = n && !i;
                    return i || (i = setTimeout(l, t)), c && (s = e.apply(a, r)), s
                }
            }, throttle: function (e, t, n) {
                var i, r, a, o = null, s = 0;
                n || (n = {});
                var l = function () {
                    s = n.leading === !1 ? 0 : Date.now(), o = null, a = e.apply(i, r)
                };
                return function () {
                    var c = Date.now();
                    s || n.leading !== !1 || (s = c);
                    var d = t - (c - s);
                    return i = this, r = arguments, 0 >= d ? (clearTimeout(o), o = null, s = c, a = e.apply(i, r)) : o || n.trailing === !1 || (o = setTimeout(l, d)), a
                }
            }, inherit: function (t, n) {
                var i, r = this;
                i = t && t.hasOwnProperty("constructor") ? t.constructor : function () {
                    return r.apply(this, arguments)
                }, e.extend(i, r, n);
                var a = function () {
                    this.constructor = i
                };
                return a.prototype = r.prototype, i.prototype = new a, t && e.extend(i.prototype, t), i.__super__ = r.prototype, i
            }, extend: function (e) {
                for (var t = Array.prototype.slice.call(arguments, 1), n = 0; n < t.length; n++) {
                    var i = t[n];
                    if (i) for (var r in i) e[r] = i[r]
                }
                return e
            }, nextUid: function () {
                return "ion" + t++
            }, disconnectScope: function (e) {
                if (e && e.$root !== e) {
                    var t = e.$parent;
                    e.$$disconnected = !0, e.$broadcast("$ionic.disconnectScope", e), t.$$childHead === e && (t.$$childHead = e.$$nextSibling), t.$$childTail === e && (t.$$childTail = e.$$prevSibling), e.$$prevSibling && (e.$$prevSibling.$$nextSibling = e.$$nextSibling), e.$$nextSibling && (e.$$nextSibling.$$prevSibling = e.$$prevSibling), e.$$nextSibling = e.$$prevSibling = null
                }
            }, reconnectScope: function (e) {
                if (e && e.$root !== e && e.$$disconnected) {
                    var t = e.$parent;
                    e.$$disconnected = !1, e.$broadcast("$ionic.reconnectScope", e), e.$$prevSibling = t.$$childTail, t.$$childHead ? (t.$$childTail.$$nextSibling = e, t.$$childTail = e) : t.$$childHead = t.$$childTail = e
                }
            }, isScopeDisconnected: function (e) {
                for (var t = e; t;) {
                    if (t.$$disconnected) return !0;
                    t = t.$parent
                }
                return !1
            }
        }, e.inherit = e.Utils.inherit, e.extend = e.Utils.extend, e.throttle = e.Utils.throttle, e.proxy = e.Utils.proxy, e.debounce = e.Utils.debounce
    }(window.ionic);
    var ee, te, ne, ie, re, ae = 0, oe = 0, se = 0, le = !1, ce = "keyboard-open", de = "scroll-content",
        ue = ionic.debounce(E, 200, !0), pe = ionic.debounce(y, 100, !0);
    ionic.keyboard = {
        isOpen: !1,
        isClosing: !1,
        isOpening: !1,
        height: 0,
        isLandscape: !1,
        isInitialized: !1,
        hide: function () {
            V() && cordova.plugins.Keyboard.close(), ee && ee.blur()
        },
        show: function () {
            V() && cordova.plugins.Keyboard.show()
        },
        disable: function () {
            V() ? (window.removeEventListener("native.keyboardshow", pe), window.removeEventListener("native.keyboardhide", x)) : document.body.removeEventListener("focusout", x), document.body.removeEventListener("ionic.focusin", ue), document.body.removeEventListener("focusin", ue), window.removeEventListener("orientationchange", D), window.navigator.msPointerEnabled ? document.removeEventListener("MSPointerDown", S) : document.removeEventListener("touchstart", S), ionic.keyboard.isInitialized = !1
        },
        enable: function () {
            S()
        }
    }, ae = G(), ionic.Platform.ready(function () {
        A(), window.addEventListener("orientationchange", D), setTimeout(A, 999), window.navigator.msPointerEnabled ? document.addEventListener("MSPointerDown", S, !1) : document.addEventListener("touchstart", S, !1)
    });
    var he, fe = {};
    ionic.viewport = {
        orientation: function () {
            return window.innerWidth > window.innerHeight ? 90 : 0
        }
    }, ionic.Platform.ready(function () {
        R(), window.addEventListener("orientationchange", function () {
            setTimeout(H, 1e3)
        }, !1)
    }), function (e) {
        "use strict";
        e.views.View = function () {
            this.initialize.apply(this, arguments)
        }, e.views.View.inherit = e.inherit, e.extend(e.views.View.prototype, {
            initialize: function () {
            }
        })
    }(window.ionic);
    var me = {effect: {}};
    !function (e) {
        var t = Date.now || function () {
            return +new Date
        }, n = 60, i = 1e3, r = {}, a = 1;
        me.effect.Animate = {
            requestAnimationFrame: function () {
                var t = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame,
                    n = !!t;
                if (t && !/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString()) && (n = !1), n) return function (e, n) {
                    t(e, n)
                };
                var i = 60, r = {}, a = 0, o = 1, s = null, l = +new Date;
                return function (e) {
                    var t = o++;
                    return r[t] = e, a++, null === s && (s = setInterval(function () {
                        var e = +new Date, t = r;
                        r = {}, a = 0;
                        for (var n in t) t.hasOwnProperty(n) && (t[n](e), l = e);
                        e - l > 2500 && (clearInterval(s), s = null)
                    }, 1e3 / i)), t
                }
            }(), stop: function (e) {
                var t = null != r[e];
                return t && (r[e] = null), t
            }, isRunning: function (e) {
                return null != r[e]
            }, start: function (e, o, s, l, c, d) {
                var u = t(), p = u, h = 0, f = 0, m = a++;
                if (d || (d = document.body), m % 20 === 0) {
                    var g = {};
                    for (var v in r) g[v] = !0;
                    r = g
                }
                var _ = function (a) {
                    var g = a !== !0, v = t();
                    if (!r[m] || o && !o(m)) return r[m] = null, void (s && s(n - f / ((v - u) / i), m, !1));
                    if (g) for (var w = Math.round((v - p) / (i / n)) - 1, T = 0; T < Math.min(w, 4); T++) _(!0), f++;
                    l && (h = (v - u) / l, h > 1 && (h = 1));
                    var b = c ? c(h) : h;
                    e(b, v, g) !== !1 && 1 !== h || !g ? g && (p = v, me.effect.Animate.requestAnimationFrame(_, d)) : (r[m] = null, s && s(n - f / ((v - u) / i), m, 1 === h || null == l))
                };
                return r[m] = !0, me.effect.Animate.requestAnimationFrame(_, d), m
            }
        }
    }(window), function (e) {
        var t = function () {
        }, n = function (e) {
            return Math.pow(e - 1, 3) + 1
        }, i = function (e) {
            return (e /= .5) < 1 ? .5 * Math.pow(e, 3) : .5 * (Math.pow(e - 2, 3) + 2)
        };
        e.views.Scroll = e.views.View.inherit({
            initialize: function (n) {
                var i = this;
                i.__container = n.el, i.__content = n.el.firstElementChild, setTimeout(function () {
                    i.__container && i.__content && (i.__container.scrollTop = 0, i.__content.scrollTop = 0)
                }), i.options = {
                    scrollingX: !1,
                    scrollbarX: !0,
                    scrollingY: !0,
                    scrollbarY: !0,
                    startX: 0,
                    startY: 0,
                    wheelDampen: 6,
                    minScrollbarSizeX: 5,
                    minScrollbarSizeY: 5,
                    scrollbarsFade: !0,
                    scrollbarFadeDelay: 300,
                    scrollbarResizeFadeDelay: 1e3,
                    animating: !0,
                    animationDuration: 250,
                    decelVelocityThreshold: 4,
                    decelVelocityThresholdPaging: 4,
                    bouncing: !0,
                    locking: !0,
                    paging: !1,
                    snapping: !1,
                    zooming: !1,
                    minZoom: .5,
                    maxZoom: 3,
                    speedMultiplier: 1,
                    deceleration: .97,
                    preventDefault: !1,
                    scrollingComplete: t,
                    penetrationDeceleration: .03,
                    penetrationAcceleration: .08,
                    scrollEventInterval: 10,
                    freeze: !1,
                    getContentWidth: function () {
                        return Math.max(i.__content.scrollWidth, i.__content.offsetWidth)
                    },
                    getContentHeight: function () {
                        return Math.max(i.__content.scrollHeight, i.__content.offsetHeight + 2 * i.__content.offsetTop)
                    }
                };
                for (var r in n) i.options[r] = n[r];
                i.hintResize = e.debounce(function () {
                    i.resize()
                }, 1e3, !0), i.onScroll = function () {
                    e.scroll.isScrolling ? (clearTimeout(i.scrollTimer), i.scrollTimer = setTimeout(i.setScrollStop, 80)) : setTimeout(i.setScrollStart, 50)
                }, i.freeze = function (e) {
                    return arguments.length && (i.options.freeze = e), i.options.freeze
                }, i.freezeShut = i.freeze, i.setScrollStart = function () {
                    e.scroll.isScrolling = Math.abs(e.scroll.lastTop - i.__scrollTop) > 1, clearTimeout(i.scrollTimer), i.scrollTimer = setTimeout(i.setScrollStop, 80)
                }, i.setScrollStop = function () {
                    e.scroll.isScrolling = !1, e.scroll.lastTop = i.__scrollTop
                }, i.triggerScrollEvent = e.throttle(function () {
                    i.onScroll(), e.trigger("scroll", {
                        scrollTop: i.__scrollTop,
                        scrollLeft: i.__scrollLeft,
                        target: i.__container
                    })
                }, i.options.scrollEventInterval), i.triggerScrollEndEvent = function () {
                    e.trigger("scrollend", {
                        scrollTop: i.__scrollTop,
                        scrollLeft: i.__scrollLeft,
                        target: i.__container
                    })
                }, i.__scrollLeft = i.options.startX, i.__scrollTop = i.options.startY, i.__callback = i.getRenderFn(), i.__initEventHandlers(), i.__createScrollbars()
            },
            run: function () {
                this.resize(), this.__fadeScrollbars("out", this.options.scrollbarResizeFadeDelay)
            },
            __isSingleTouch: !1,
            __isTracking: !1,
            __didDecelerationComplete: !1,
            __isGesturing: !1,
            __isDragging: !1,
            __isDecelerating: !1,
            __isAnimating: !1,
            __clientLeft: 0,
            __clientTop: 0,
            __clientWidth: 0,
            __clientHeight: 0,
            __contentWidth: 0,
            __contentHeight: 0,
            __snapWidth: 100,
            __snapHeight: 100,
            __refreshHeight: null,
            __refreshActive: !1,
            __refreshActivate: null,
            __refreshDeactivate: null,
            __refreshStart: null,
            __zoomLevel: 1,
            __scrollLeft: 0,
            __scrollTop: 0,
            __maxScrollLeft: 0,
            __maxScrollTop: 0,
            __scheduledLeft: 0,
            __scheduledTop: 0,
            __scheduledZoom: 0,
            __lastTouchLeft: null,
            __lastTouchTop: null,
            __lastTouchMove: null,
            __positions: null,
            __minDecelerationScrollLeft: null,
            __minDecelerationScrollTop: null,
            __maxDecelerationScrollLeft: null,
            __maxDecelerationScrollTop: null,
            __decelerationVelocityX: null,
            __decelerationVelocityY: null,
            __transformProperty: null,
            __perspectiveProperty: null,
            __indicatorX: null,
            __indicatorY: null,
            __scrollbarFadeTimeout: null,
            __didWaitForSize: null,
            __sizerTimeout: null,
            __initEventHandlers: function () {
                function t(e) {
                    return e.touches && e.touches.length ? e.touches : [{pageX: e.pageX, pageY: e.pageY}]
                }

                var n, i = this, r = i.__container;
                if (i.scrollChildIntoView = function (t) {
                    var a = r.getBoundingClientRect().bottom;
                    n = r.offsetHeight;
                    var o = i.isShrunkForKeyboard, s = r.parentNode.classList.contains("modal"),
                        l = s && window.innerWidth >= 680;
                    if (!o) {
                        if (e.Platform.isIOS() || e.Platform.isFullScreen || l) {
                            var c = t.detail.viewportHeight - a, d = Math.max(0, t.detail.keyboardHeight - c);
                            e.requestAnimationFrame(function () {
                                n -= d, r.style.height = n + "px", r.style.overflow = "visible", i.resize()
                            })
                        }
                        i.isShrunkForKeyboard = !0
                    }
                    t.detail.isElementUnderKeyboard && e.requestAnimationFrame(function () {
                        r.scrollTop = 0, i.isShrunkForKeyboard && !o && (a = r.getBoundingClientRect().bottom);
                        var s = .5 * n, l = (t.detail.elementBottom + t.detail.elementTop) / 2, c = l - a, d = c + s;
                        d > 0 && (e.Platform.isIOS() && e.tap.cloneFocusedInput(r, i), i.scrollBy(0, d, !0), i.onScroll())
                    }), t.stopPropagation()
                }, i.resetScrollView = function () {
                    i.isShrunkForKeyboard && (i.isShrunkForKeyboard = !1, r.style.height = "", r.style.overflow = ""), i.resize()
                }, r.addEventListener("scrollChildIntoView", i.scrollChildIntoView), document.addEventListener("resetScrollView", i.resetScrollView), i.touchStart = function (n) {
                    if (i.startCoordinates = e.tap.pointerCoord(n), !e.tap.ignoreScrollStart(n)) {
                        if (i.__isDown = !0, e.tap.containsOrIsTextInput(n.target) || "SELECT" === n.target.tagName) return void (i.__hasStarted = !1);
                        i.__isSelectable = !0, i.__enableScrollY = !0, i.__hasStarted = !0, i.doTouchStart(t(n), n.timeStamp), n.preventDefault()
                    }
                }, i.touchMove = function (n) {
                    if (!(i.options.freeze || !i.__isDown || !i.__isDown && n.defaultPrevented || "TEXTAREA" === n.target.tagName && n.target.parentElement.querySelector(":focus"))) {
                        if (!i.__hasStarted && (e.tap.containsOrIsTextInput(n.target) || "SELECT" === n.target.tagName)) return i.__hasStarted = !0, i.doTouchStart(t(n), n.timeStamp), void n.preventDefault();
                        if (i.startCoordinates) {
                            var a = e.tap.pointerCoord(n);
                            i.__isSelectable && e.tap.isTextInput(n.target) && Math.abs(i.startCoordinates.x - a.x) > 20 && (i.__enableScrollY = !1, i.__isSelectable = !0), i.__enableScrollY && Math.abs(i.startCoordinates.y - a.y) > 10 && (i.__isSelectable = !1, e.tap.cloneFocusedInput(r, i))
                        }
                        i.doTouchMove(t(n), n.timeStamp, n.scale), i.__isDown = !0
                    }
                }, i.touchMoveBubble = function (e) {
                    i.__isDown && i.options.preventDefault && e.preventDefault()
                }, i.touchEnd = function (t) {
                    i.__isDown && (i.doTouchEnd(t, t.timeStamp), i.__isDown = !1, i.__hasStarted = !1, i.__isSelectable = !0, i.__enableScrollY = !0, i.__isDragging || i.__isDecelerating || i.__isAnimating || e.tap.removeClonedInputs(r, i))
                }, i.mouseWheel = e.animationFrameThrottle(function (t) {
                    var n = e.DomUtil.getParentOrSelfWithClass(t.target, "ionic-scroll");
                    i.options.freeze || n !== i.__container || (i.hintResize(), i.scrollBy((t.wheelDeltaX || t.deltaX || 0) / i.options.wheelDampen, (-t.wheelDeltaY || t.deltaY || 0) / i.options.wheelDampen), i.__fadeScrollbars("in"), clearTimeout(i.__wheelHideBarTimeout), i.__wheelHideBarTimeout = setTimeout(function () {
                        i.__fadeScrollbars("out")
                    }, 100))
                }), "ontouchstart" in window) r.addEventListener("touchstart", i.touchStart, !1), i.options.preventDefault && r.addEventListener("touchmove", i.touchMoveBubble, !1), document.addEventListener("touchmove", i.touchMove, !1), document.addEventListener("touchend", i.touchEnd, !1), document.addEventListener("touchcancel", i.touchEnd, !1), document.addEventListener("wheel", i.mouseWheel, !1); else if (window.navigator.pointerEnabled) r.addEventListener("pointerdown", i.touchStart, !1), i.options.preventDefault && r.addEventListener("pointermove", i.touchMoveBubble, !1), document.addEventListener("pointermove", i.touchMove, !1), document.addEventListener("pointerup", i.touchEnd, !1), document.addEventListener("pointercancel", i.touchEnd, !1), document.addEventListener("wheel", i.mouseWheel, !1); else if (window.navigator.msPointerEnabled) r.addEventListener("MSPointerDown", i.touchStart, !1), i.options.preventDefault && r.addEventListener("MSPointerMove", i.touchMoveBubble, !1), document.addEventListener("MSPointerMove", i.touchMove, !1), document.addEventListener("MSPointerUp", i.touchEnd, !1), document.addEventListener("MSPointerCancel", i.touchEnd, !1), document.addEventListener("wheel", i.mouseWheel, !1); else {
                    var a = !1;
                    i.mouseDown = function (n) {
                        e.tap.ignoreScrollStart(n) || "SELECT" === n.target.tagName || (i.doTouchStart(t(n), n.timeStamp), e.tap.isTextInput(n.target) || n.preventDefault(), a = !0)
                    }, i.mouseMove = function (e) {
                        i.options.freeze || !a || !a && e.defaultPrevented || (i.doTouchMove(t(e), e.timeStamp), a = !0)
                    }, i.mouseMoveBubble = function (e) {
                        a && i.options.preventDefault && e.preventDefault()
                    }, i.mouseUp = function (e) {
                        a && (i.doTouchEnd(e, e.timeStamp), a = !1)
                    }, r.addEventListener("mousedown", i.mouseDown, !1), i.options.preventDefault && r.addEventListener("mousemove", i.mouseMoveBubble, !1), document.addEventListener("mousemove", i.mouseMove, !1), document.addEventListener("mouseup", i.mouseUp, !1), document.addEventListener("mousewheel", i.mouseWheel, !1), document.addEventListener("wheel", i.mouseWheel, !1)
                }
            },
            __cleanup: function () {
                var n = this, i = n.__container;
                i.removeEventListener("touchstart", n.touchStart), i.removeEventListener("touchmove", n.touchMoveBubble), document.removeEventListener("touchmove", n.touchMove), document.removeEventListener("touchend", n.touchEnd), document.removeEventListener("touchcancel", n.touchEnd), i.removeEventListener("pointerdown", n.touchStart), i.removeEventListener("pointermove", n.touchMoveBubble), document.removeEventListener("pointermove", n.touchMove), document.removeEventListener("pointerup", n.touchEnd), document.removeEventListener("pointercancel", n.touchEnd), i.removeEventListener("MSPointerDown", n.touchStart), i.removeEventListener("MSPointerMove", n.touchMoveBubble), document.removeEventListener("MSPointerMove", n.touchMove), document.removeEventListener("MSPointerUp", n.touchEnd), document.removeEventListener("MSPointerCancel", n.touchEnd), i.removeEventListener("mousedown", n.mouseDown), i.removeEventListener("mousemove", n.mouseMoveBubble), document.removeEventListener("mousemove", n.mouseMove), document.removeEventListener("mouseup", n.mouseUp), document.removeEventListener("mousewheel", n.mouseWheel), document.removeEventListener("wheel", n.mouseWheel), i.removeEventListener("scrollChildIntoView", n.scrollChildIntoView), document.removeEventListener("resetScrollView", n.resetScrollView), e.tap.removeClonedInputs(i, n), delete n.__container, delete n.__content, delete n.__indicatorX, delete n.__indicatorY, delete n.options.el, n.__callback = n.scrollChildIntoView = n.resetScrollView = t, n.mouseMove = n.mouseDown = n.mouseUp = n.mouseWheel = n.touchStart = n.touchMove = n.touchEnd = n.touchCancel = t, n.resize = n.scrollTo = n.zoomTo = n.__scrollingComplete = t, i = null
            },
            __createScrollbar: function (e) {
                var t = document.createElement("div"), n = document.createElement("div");
                return n.className = "scroll-bar-indicator scroll-bar-fade-out", "h" == e ? t.className = "scroll-bar scroll-bar-h" : t.className = "scroll-bar scroll-bar-v", t.appendChild(n), t
            },
            __createScrollbars: function () {
                var e, t, n = this;
                n.options.scrollingX && (e = {
                    el: n.__createScrollbar("h"),
                    sizeRatio: 1
                }, e.indicator = e.el.children[0], n.options.scrollbarX && n.__container.appendChild(e.el), n.__indicatorX = e), n.options.scrollingY && (t = {
                    el: n.__createScrollbar("v"),
                    sizeRatio: 1
                }, t.indicator = t.el.children[0], n.options.scrollbarY && n.__container.appendChild(t.el), n.__indicatorY = t)
            },
            __resizeScrollbars: function () {
                var t = this;
                if (t.__indicatorX) {
                    var n = Math.max(Math.round(t.__clientWidth * t.__clientWidth / t.__contentWidth), 20);
                    n > t.__contentWidth && (n = 0), n !== t.__indicatorX.size && e.requestAnimationFrame(function () {
                        t.__indicatorX.indicator.style.width = n + "px"
                    }), t.__indicatorX.size = n, t.__indicatorX.minScale = t.options.minScrollbarSizeX / n, t.__indicatorX.maxPos = t.__clientWidth - n, t.__indicatorX.sizeRatio = t.__maxScrollLeft ? t.__indicatorX.maxPos / t.__maxScrollLeft : 1
                }
                if (t.__indicatorY) {
                    var i = Math.max(Math.round(t.__clientHeight * t.__clientHeight / t.__contentHeight), 20);
                    i > t.__contentHeight && (i = 0), i !== t.__indicatorY.size && e.requestAnimationFrame(function () {
                        t.__indicatorY && (t.__indicatorY.indicator.style.height = i + "px")
                    }), t.__indicatorY.size = i, t.__indicatorY.minScale = t.options.minScrollbarSizeY / i, t.__indicatorY.maxPos = t.__clientHeight - i, t.__indicatorY.sizeRatio = t.__maxScrollTop ? t.__indicatorY.maxPos / t.__maxScrollTop : 1
                }
            },
            __repositionScrollbars: function () {
                var e, t, n, i, r, a, o = this, s = 0, l = 0;
                if (o.__indicatorX) {
                    o.__indicatorY && (s = 10), r = Math.round(o.__indicatorX.sizeRatio * o.__scrollLeft) || 0, n = o.__scrollLeft - (o.__maxScrollLeft - s), o.__scrollLeft < 0 ? (t = Math.max(o.__indicatorX.minScale, (o.__indicatorX.size - Math.abs(o.__scrollLeft)) / o.__indicatorX.size), r = 0, o.__indicatorX.indicator.style[o.__transformOriginProperty] = "left center") : n > 0 ? (t = Math.max(o.__indicatorX.minScale, (o.__indicatorX.size - n) / o.__indicatorX.size), r = o.__indicatorX.maxPos - s, o.__indicatorX.indicator.style[o.__transformOriginProperty] = "right center") : (r = Math.min(o.__maxScrollLeft, Math.max(0, r)), t = 1);
                    var c = "translate3d(" + r + "px, 0, 0) scaleX(" + t + ")";
                    o.__indicatorX.transformProp !== c && (o.__indicatorX.indicator.style[o.__transformProperty] = c, o.__indicatorX.transformProp = c)
                }
                if (o.__indicatorY) {
                    a = Math.round(o.__indicatorY.sizeRatio * o.__scrollTop) || 0, o.__indicatorX && (l = 10), i = o.__scrollTop - (o.__maxScrollTop - l), o.__scrollTop < 0 ? (e = Math.max(o.__indicatorY.minScale, (o.__indicatorY.size - Math.abs(o.__scrollTop)) / o.__indicatorY.size), a = 0, "center top" !== o.__indicatorY.originProp && (o.__indicatorY.indicator.style[o.__transformOriginProperty] = "center top", o.__indicatorY.originProp = "center top")) : i > 0 ? (e = Math.max(o.__indicatorY.minScale, (o.__indicatorY.size - i) / o.__indicatorY.size), a = o.__indicatorY.maxPos - l, "center bottom" !== o.__indicatorY.originProp && (o.__indicatorY.indicator.style[o.__transformOriginProperty] = "center bottom", o.__indicatorY.originProp = "center bottom")) : (a = Math.min(o.__maxScrollTop, Math.max(0, a)), e = 1);
                    var d = "translate3d(0," + a + "px, 0) scaleY(" + e + ")";
                    o.__indicatorY.transformProp !== d && (o.__indicatorY.indicator.style[o.__transformProperty] = d, o.__indicatorY.transformProp = d)
                }
            },
            __fadeScrollbars: function (e, t) {
                var n = this;
                if (n.options.scrollbarsFade) {
                    var i = "scroll-bar-fade-out";
                    n.options.scrollbarsFade === !0 && (clearTimeout(n.__scrollbarFadeTimeout), "in" == e ? (n.__indicatorX && n.__indicatorX.indicator.classList.remove(i), n.__indicatorY && n.__indicatorY.indicator.classList.remove(i)) : n.__scrollbarFadeTimeout = setTimeout(function () {
                        n.__indicatorX && n.__indicatorX.indicator.classList.add(i), n.__indicatorY && n.__indicatorY.indicator.classList.add(i)
                    }, t || n.options.scrollbarFadeDelay))
                }
            },
            __scrollingComplete: function () {
                this.options.scrollingComplete(), e.tap.removeClonedInputs(this.__container, this), this.__fadeScrollbars("out")
            },
            resize: function (e) {
                var t = this;
                t.__container && t.options && t.setDimensions(t.__container.clientWidth, t.__container.clientHeight, t.options.getContentWidth(), t.options.getContentHeight(), e)
            },
            getRenderFn: function () {
                var e, t = this, n = t.__content, i = document.documentElement.style;
                "MozAppearance" in i ? e = "gecko" : "WebkitAppearance" in i ? e = "webkit" : "string" == typeof navigator.cpuClass && (e = "trident");
                var r, a = {trident: "ms", gecko: "Moz", webkit: "Webkit", presto: "O"}[e],
                    o = document.createElement("div"), s = a + "Perspective", l = a + "Transform",
                    c = a + "TransformOrigin";
                return t.__perspectiveProperty = l, t.__transformProperty = l, t.__transformOriginProperty = c, o.style[s] !== r ? function (e, i, r, a) {
                    var o = "translate3d(" + -e + "px," + -i + "px,0) scale(" + r + ")";
                    o !== t.contentTransform && (n.style[l] = o, t.contentTransform = o), t.__repositionScrollbars(), a || t.triggerScrollEvent()
                } : o.style[l] !== r ? function (e, i, r, a) {
                    n.style[l] = "translate(" + -e + "px," + -i + "px) scale(" + r + ")", t.__repositionScrollbars(), a || t.triggerScrollEvent()
                } : function (e, i, r, a) {
                    n.style.marginLeft = e ? -e / r + "px" : "", n.style.marginTop = i ? -i / r + "px" : "", n.style.zoom = r || "", t.__repositionScrollbars(), a || t.triggerScrollEvent()
                }
            },
            setDimensions: function (e, t, n, i, r) {
                var a = this;
                (e || t || n || i) && (e === +e && (a.__clientWidth = e), t === +t && (a.__clientHeight = t), n === +n && (a.__contentWidth = n), i === +i && (a.__contentHeight = i), a.__computeScrollMax(), a.__resizeScrollbars(), r || a.scrollTo(a.__scrollLeft, a.__scrollTop, !0, null, !0))
            },
            setPosition: function (e, t) {
                this.__clientLeft = e || 0, this.__clientTop = t || 0
            },
            setSnapSize: function (e, t) {
                this.__snapWidth = e, this.__snapHeight = t
            },
            activatePullToRefresh: function (t, n) {
                var i = this;
                i.__refreshHeight = t, i.__refreshActivate = function () {
                    e.requestAnimationFrame(n.activate)
                }, i.__refreshDeactivate = function () {
                    e.requestAnimationFrame(n.deactivate)
                }, i.__refreshStart = function () {
                    e.requestAnimationFrame(n.start)
                }, i.__refreshShow = function () {
                    e.requestAnimationFrame(n.show)
                }, i.__refreshHide = function () {
                    e.requestAnimationFrame(n.hide)
                }, i.__refreshTail = function () {
                    e.requestAnimationFrame(n.tail)
                }, i.__refreshTailTime = 100, i.__minSpinTime = 600
            },
            triggerPullToRefresh: function () {
                this.__publish(this.__scrollLeft, -this.__refreshHeight, this.__zoomLevel, !0);
                var e = new Date;
                this.refreshStartTime = e.getTime(), this.__refreshStart && this.__refreshStart()
            },
            finishPullToRefresh: function () {
                var e = this, t = new Date, n = 0;
                e.refreshStartTime + e.__minSpinTime > t.getTime() && (n = e.refreshStartTime + e.__minSpinTime - t.getTime()), setTimeout(function () {
                    e.__refreshTail && e.__refreshTail(), setTimeout(function () {
                        e.__refreshActive = !1, e.__refreshDeactivate && e.__refreshDeactivate(), e.__refreshHide && e.__refreshHide(), e.scrollTo(e.__scrollLeft, e.__scrollTop, !0)
                    }, e.__refreshTailTime)
                }, n)
            },
            getValues: function () {
                return {left: this.__scrollLeft, top: this.__scrollTop, zoom: this.__zoomLevel}
            },
            getScrollMax: function () {
                return {left: this.__maxScrollLeft, top: this.__maxScrollTop}
            },
            zoomTo: function (e, t, n, i) {
                var r = this;
                if (!r.options.zooming) throw new Error("Zooming is not enabled!");
                r.__isDecelerating && (me.effect.Animate.stop(r.__isDecelerating), r.__isDecelerating = !1);
                var a = r.__zoomLevel;
                null == n && (n = r.__clientWidth / 2), null == i && (i = r.__clientHeight / 2), e = Math.max(Math.min(e, r.options.maxZoom), r.options.minZoom), r.__computeScrollMax(e);
                var o = (n + r.__scrollLeft) * e / a - n, s = (i + r.__scrollTop) * e / a - i;
                o > r.__maxScrollLeft ? o = r.__maxScrollLeft : 0 > o && (o = 0), s > r.__maxScrollTop ? s = r.__maxScrollTop : 0 > s && (s = 0), r.__publish(o, s, e, t)
            },
            zoomBy: function (e, t, n, i) {
                this.zoomTo(this.__zoomLevel * e, t, n, i)
            },
            scrollTo: function (e, t, n, i, r) {
                var a = this;
                if (a.__isDecelerating && (me.effect.Animate.stop(a.__isDecelerating), a.__isDecelerating = !1), null != i && i !== a.__zoomLevel) {
                    if (!a.options.zooming) throw new Error("Zooming is not enabled!");
                    e *= i, t *= i, a.__computeScrollMax(i)
                } else i = a.__zoomLevel;
                a.options.scrollingX ? a.options.paging ? e = Math.round(e / a.__clientWidth) * a.__clientWidth : a.options.snapping && (e = Math.round(e / a.__snapWidth) * a.__snapWidth) : e = a.__scrollLeft, a.options.scrollingY ? a.options.paging ? t = Math.round(t / a.__clientHeight) * a.__clientHeight : a.options.snapping && (t = Math.round(t / a.__snapHeight) * a.__snapHeight) : t = a.__scrollTop, e = Math.max(Math.min(a.__maxScrollLeft, e), 0), t = Math.max(Math.min(a.__maxScrollTop, t), 0), e === a.__scrollLeft && t === a.__scrollTop && (n = !1), a.__publish(e, t, i, n, r)
            },
            scrollBy: function (e, t, n) {
                var i = this, r = i.__isAnimating ? i.__scheduledLeft : i.__scrollLeft,
                    a = i.__isAnimating ? i.__scheduledTop : i.__scrollTop;
                i.scrollTo(r + (e || 0), a + (t || 0), n)
            },
            doMouseZoom: function (e, t, n, i) {
                var r = e > 0 ? .97 : 1.03;
                return this.zoomTo(this.__zoomLevel * r, !1, n - this.__clientLeft, i - this.__clientTop)
            },
            doTouchStart: function (e, t) {
                var n = this;
                n.__decStopped = !(!n.__isDecelerating && !n.__isAnimating), n.hintResize(), t instanceof Date && (t = t.valueOf()), "number" != typeof t && (t = Date.now()), n.__interruptedAnimation = !0, n.__isDecelerating && (me.effect.Animate.stop(n.__isDecelerating), n.__isDecelerating = !1, n.__interruptedAnimation = !0), n.__isAnimating && (me.effect.Animate.stop(n.__isAnimating), n.__isAnimating = !1, n.__interruptedAnimation = !0);
                var i, r, a = 1 === e.length;
                a ? (i = e[0].pageX, r = e[0].pageY) : (i = Math.abs(e[0].pageX + e[1].pageX) / 2, r = Math.abs(e[0].pageY + e[1].pageY) / 2), n.__initialTouchLeft = i, n.__initialTouchTop = r, n.__initialTouches = e, n.__zoomLevelStart = n.__zoomLevel, n.__lastTouchLeft = i, n.__lastTouchTop = r, n.__lastTouchMove = t, n.__lastScale = 1, n.__enableScrollX = !a && n.options.scrollingX, n.__enableScrollY = !a && n.options.scrollingY, n.__isTracking = !0, n.__didDecelerationComplete = !1, n.__isDragging = !a, n.__isSingleTouch = a, n.__positions = []
            },
            doTouchMove: function (e, t, n) {
                t instanceof Date && (t = t.valueOf()), "number" != typeof t && (t = Date.now());
                var i = this;
                if (i.__isTracking) {
                    var r, a;
                    2 === e.length ? (r = Math.abs(e[0].pageX + e[1].pageX) / 2, a = Math.abs(e[0].pageY + e[1].pageY) / 2, !n && i.options.zooming && (n = i.__getScale(i.__initialTouches, e))) : (r = e[0].pageX, a = e[0].pageY);
                    var o = i.__positions;
                    if (i.__isDragging) {
                        i.__decStopped = !1;
                        var s = r - i.__lastTouchLeft, l = a - i.__lastTouchTop, c = i.__scrollLeft, d = i.__scrollTop,
                            u = i.__zoomLevel;
                        if (null != n && i.options.zooming) {
                            var p = u;
                            if (u = u / i.__lastScale * n, u = Math.max(Math.min(u, i.options.maxZoom), i.options.minZoom), p !== u) {
                                var h = r - i.__clientLeft, f = a - i.__clientTop;
                                c = (h + c) * u / p - h, d = (f + d) * u / p - f, i.__computeScrollMax(u)
                            }
                        }
                        if (i.__enableScrollX) {
                            c -= s * i.options.speedMultiplier;
                            var m = i.__maxScrollLeft;
                            (c > m || 0 > c) && (i.options.bouncing ? c += s / 2 * i.options.speedMultiplier : c = c > m ? m : 0)
                        }
                        if (i.__enableScrollY) {
                            d -= l * i.options.speedMultiplier;
                            var g = i.__maxScrollTop;
                            d > g || 0 > d ? i.options.bouncing || i.__refreshHeight && 0 > d ? (d += l / 2 * i.options.speedMultiplier, i.__enableScrollX || null == i.__refreshHeight || (0 > d ? (i.__refreshHidden = !1, i.__refreshShow()) : (i.__refreshHide(), i.__refreshHidden = !0), !i.__refreshActive && d <= -i.__refreshHeight ? (i.__refreshActive = !0, i.__refreshActivate && i.__refreshActivate()) : i.__refreshActive && d > -i.__refreshHeight && (i.__refreshActive = !1, i.__refreshDeactivate && i.__refreshDeactivate()))) : d = d > g ? g : 0 : i.__refreshHeight && !i.__refreshHidden && (i.__refreshHide(), i.__refreshHidden = !0)
                        }
                        o.length > 60 && o.splice(0, 30), o.push(c, d, t), i.__publish(c, d, u)
                    } else {
                        var v = i.options.locking ? 3 : 0, _ = 5, w = Math.abs(r - i.__initialTouchLeft),
                            T = Math.abs(a - i.__initialTouchTop);
                        i.__enableScrollX = i.options.scrollingX && w >= v, i.__enableScrollY = i.options.scrollingY && T >= v, o.push(i.__scrollLeft, i.__scrollTop, t), i.__isDragging = (i.__enableScrollX || i.__enableScrollY) && (w >= _ || T >= _), i.__isDragging && (i.__interruptedAnimation = !1, i.__fadeScrollbars("in"))
                    }
                    i.__lastTouchLeft = r, i.__lastTouchTop = a, i.__lastTouchMove = t, i.__lastScale = n
                }
            },
            doTouchEnd: function (t, n) {
                n instanceof Date && (n = n.valueOf()), "number" != typeof n && (n = Date.now());
                var i = this;
                if (i.__isTracking) {
                    if (i.__isTracking = !1, i.__isDragging) if (i.__isDragging = !1, i.__isSingleTouch && i.options.animating && n - i.__lastTouchMove <= 100) {
                        for (var r = i.__positions, a = r.length - 1, o = a, s = a; s > 0 && r[s] > i.__lastTouchMove - 100; s -= 3) o = s;
                        if (o !== a) {
                            var l = r[a] - r[o], c = i.__scrollLeft - r[o - 2], d = i.__scrollTop - r[o - 1];
                            i.__decelerationVelocityX = c / l * (1e3 / 60), i.__decelerationVelocityY = d / l * (1e3 / 60);
                            var u = i.options.paging || i.options.snapping ? i.options.decelVelocityThresholdPaging : i.options.decelVelocityThreshold;
                            (Math.abs(i.__decelerationVelocityX) > u || Math.abs(i.__decelerationVelocityY) > u) && (i.__refreshActive || i.__startDeceleration(n))
                        } else i.__scrollingComplete()
                    } else n - i.__lastTouchMove > 100 && i.__scrollingComplete(); else i.__decStopped && (t.isTapHandled = !0, i.__decStopped = !1);
                    if (!i.__isDecelerating) if (i.__refreshActive && i.__refreshStart) {
                        i.__publish(i.__scrollLeft, -i.__refreshHeight, i.__zoomLevel, !0);
                        var p = new Date;
                        i.refreshStartTime = p.getTime(), i.__refreshStart && i.__refreshStart(), e.Platform.isAndroid() || i.__startDeceleration()
                    } else (i.__interruptedAnimation || i.__isDragging) && i.__scrollingComplete(), i.scrollTo(i.__scrollLeft, i.__scrollTop, !0, i.__zoomLevel), i.__refreshActive && (i.__refreshActive = !1, i.__refreshDeactivate && i.__refreshDeactivate());
                    i.__positions.length = 0
                }
            },
            __publish: function (e, t, r, a, o) {
                var s = this, l = s.__isAnimating;
                if (l && (me.effect.Animate.stop(l), s.__isAnimating = !1), a && s.options.animating) {
                    s.__scheduledLeft = e, s.__scheduledTop = t, s.__scheduledZoom = r;
                    var c = s.__scrollLeft, d = s.__scrollTop, u = s.__zoomLevel, p = e - c, h = t - d, f = r - u,
                        m = function (e, t, n) {
                            n && (s.__scrollLeft = c + p * e, s.__scrollTop = d + h * e, s.__zoomLevel = u + f * e, s.__callback && s.__callback(s.__scrollLeft, s.__scrollTop, s.__zoomLevel, o))
                        }, g = function (e) {
                            return s.__isAnimating === e
                        }, v = function (e, t, n) {
                            t === s.__isAnimating && (s.__isAnimating = !1), (s.__didDecelerationComplete || n) && s.__scrollingComplete(), s.options.zooming && s.__computeScrollMax()
                        };
                    s.__isAnimating = me.effect.Animate.start(m, g, v, s.options.animationDuration, l ? n : i)
                } else s.__scheduledLeft = s.__scrollLeft = e, s.__scheduledTop = s.__scrollTop = t, s.__scheduledZoom = s.__zoomLevel = r, s.__callback && s.__callback(e, t, r, o), s.options.zooming && s.__computeScrollMax()
            },
            __computeScrollMax: function (e) {
                var t = this;
                null == e && (e = t.__zoomLevel), t.__maxScrollLeft = Math.max(t.__contentWidth * e - t.__clientWidth, 0), t.__maxScrollTop = Math.max(t.__contentHeight * e - t.__clientHeight, 0), t.__didWaitForSize || t.__maxScrollLeft || t.__maxScrollTop || (t.__didWaitForSize = !0, t.__waitForSize())
            },
            __waitForSize: function () {
                var e = this;
                clearTimeout(e.__sizerTimeout);
                var t = function () {
                    e.resize(!0)
                };
                t(), e.__sizerTimeout = setTimeout(t, 500)
            },
            __startDeceleration: function () {
                var e = this;
                if (e.options.paging) {
                    var t = Math.max(Math.min(e.__scrollLeft, e.__maxScrollLeft), 0),
                        n = Math.max(Math.min(e.__scrollTop, e.__maxScrollTop), 0), i = e.__clientWidth,
                        r = e.__clientHeight;
                    e.__minDecelerationScrollLeft = Math.floor(t / i) * i, e.__minDecelerationScrollTop = Math.floor(n / r) * r, e.__maxDecelerationScrollLeft = Math.ceil(t / i) * i, e.__maxDecelerationScrollTop = Math.ceil(n / r) * r
                } else e.__minDecelerationScrollLeft = 0, e.__minDecelerationScrollTop = 0, e.__maxDecelerationScrollLeft = e.__maxScrollLeft, e.__maxDecelerationScrollTop = e.__maxScrollTop, e.__refreshActive && (e.__minDecelerationScrollTop = -1 * e.__refreshHeight);
                var a = function (t, n, i) {
                    e.__stepThroughDeceleration(i)
                };
                e.__minVelocityToKeepDecelerating = e.options.snapping ? 4 : .1;
                var o = function () {
                    var t = Math.abs(e.__decelerationVelocityX) >= e.__minVelocityToKeepDecelerating || Math.abs(e.__decelerationVelocityY) >= e.__minVelocityToKeepDecelerating;
                    return t || (e.__didDecelerationComplete = !0, e.options.bouncing && !e.__refreshActive && e.scrollTo(Math.min(Math.max(e.__scrollLeft, 0), e.__maxScrollLeft), Math.min(Math.max(e.__scrollTop, 0), e.__maxScrollTop), e.__refreshActive)), t
                }, s = function () {
                    e.__isDecelerating = !1, e.__didDecelerationComplete && e.__scrollingComplete(), e.options.paging && e.scrollTo(e.__scrollLeft, e.__scrollTop, e.options.snapping)
                };
                e.__isDecelerating = me.effect.Animate.start(a, o, s)
            },
            __stepThroughDeceleration: function (e) {
                var t = this, n = t.__scrollLeft + t.__decelerationVelocityX,
                    i = t.__scrollTop + t.__decelerationVelocityY;
                if (!t.options.bouncing) {
                    var r = Math.max(Math.min(t.__maxDecelerationScrollLeft, n), t.__minDecelerationScrollLeft);
                    r !== n && (n = r, t.__decelerationVelocityX = 0);
                    var a = Math.max(Math.min(t.__maxDecelerationScrollTop, i), t.__minDecelerationScrollTop);
                    a !== i && (i = a, t.__decelerationVelocityY = 0)
                }
                if (e ? t.__publish(n, i, t.__zoomLevel) : (t.__scrollLeft = n, t.__scrollTop = i), !t.options.paging) {
                    var o = t.options.deceleration;
                    t.__decelerationVelocityX *= o, t.__decelerationVelocityY *= o
                }
                if (t.options.bouncing) {
                    var s = 0, l = 0, c = t.options.penetrationDeceleration, d = t.options.penetrationAcceleration;
                    if (n < t.__minDecelerationScrollLeft ? s = t.__minDecelerationScrollLeft - n : n > t.__maxDecelerationScrollLeft && (s = t.__maxDecelerationScrollLeft - n), i < t.__minDecelerationScrollTop ? l = t.__minDecelerationScrollTop - i : i > t.__maxDecelerationScrollTop && (l = t.__maxDecelerationScrollTop - i), 0 !== s) {
                        var u = s * t.__decelerationVelocityX <= t.__minDecelerationScrollLeft;
                        u && (t.__decelerationVelocityX += s * c);
                        var p = Math.abs(t.__decelerationVelocityX) <= t.__minVelocityToKeepDecelerating;
                        (!u || p) && (t.__decelerationVelocityX = s * d)
                    }
                    if (0 !== l) {
                        var h = l * t.__decelerationVelocityY <= t.__minDecelerationScrollTop;
                        h && (t.__decelerationVelocityY += l * c);
                        var f = Math.abs(t.__decelerationVelocityY) <= t.__minVelocityToKeepDecelerating;
                        (!h || f) && (t.__decelerationVelocityY = l * d)
                    }
                }
            },
            __getDistance: function (e, t) {
                var n = t.pageX - e.pageX, i = t.pageY - e.pageY;
                return Math.sqrt(n * n + i * i)
            },
            __getScale: function (e, t) {
                return e.length >= 2 && t.length >= 2 ? this.__getDistance(t[0], t[1]) / this.__getDistance(e[0], e[1]) : 1
            }
        }), e.scroll = {isScrolling: !1, lastTop: 0}
    }(ionic), function (e) {
        var t = function () {
        }, n = function (e) {
        };
        e.views.ScrollNative = e.views.View.inherit({
            initialize: function (t) {
                var n = this;
                n.__container = n.el = t.el, n.__content = t.el.firstElementChild, n.__frozen = !1, n.isNative = !0, n.__scrollTop = n.el.scrollTop, n.__scrollLeft = n.el.scrollLeft, n.__clientHeight = n.__content.clientHeight, n.__clientWidth = n.__content.clientWidth, n.__maxScrollTop = Math.max(n.__contentHeight - n.__clientHeight, 0), n.__maxScrollLeft = Math.max(n.__contentWidth - n.__clientWidth, 0), (t.startY >= 0 || t.startX >= 0) && e.requestAnimationFrame(function () {
                    n.el.scrollTop = t.startY || 0, n.el.scrollLeft = t.startX || 0, n.__scrollTop = n.el.scrollTop, n.__scrollLeft = n.el.scrollLeft
                }), n.options = {
                    freeze: !1, getContentWidth: function () {
                        return Math.max(n.__content.scrollWidth, n.__content.offsetWidth)
                    }, getContentHeight: function () {
                        return Math.max(n.__content.scrollHeight, n.__content.offsetHeight + 2 * n.__content.offsetTop)
                    }
                };
                for (var i in t) n.options[i] = t[i];
                n.onScroll = function () {
                    e.scroll.isScrolling || (e.scroll.isScrolling = !0), clearTimeout(n.scrollTimer), n.scrollTimer = setTimeout(function () {
                        e.scroll.isScrolling = !1
                    }, 80)
                }, n.freeze = function (e) {
                    n.__frozen = e
                }, n.freezeShut = function (e) {
                    n.__frozenShut = e
                }, n.__initEventHandlers()
            }, __callback: function () {
                n("__callback")
            }, zoomTo: function () {
                n("zoomTo")
            }, zoomBy: function () {
                n("zoomBy")
            }, activatePullToRefresh: function () {
                n("activatePullToRefresh")
            }, resize: function (e) {
                var t = this;
                t.__container && t.options && t.setDimensions(t.__container.clientWidth, t.__container.clientHeight, t.options.getContentWidth(), t.options.getContentHeight(), e)
            }, run: function () {
                this.resize()
            }, getValues: function () {
                var e = this;
                return e.update(), {left: e.__scrollLeft, top: e.__scrollTop, zoom: 1}
            }, update: function () {
                var e = this;
                e.__scrollLeft = e.el.scrollLeft, e.__scrollTop = e.el.scrollTop
            }, setDimensions: function (e, t, n, i) {
                var r = this;
                (e || t || n || i) && (e === +e && (r.__clientWidth = e), t === +t && (r.__clientHeight = t), n === +n && (r.__contentWidth = n), i === +i && (r.__contentHeight = i), r.__computeScrollMax())
            }, getScrollMax: function () {
                return {left: this.__maxScrollLeft, top: this.__maxScrollTop}
            }, scrollBy: function (e, t, n) {
                var i = this;
                i.update();
                var r = i.__isAnimating ? i.__scheduledLeft : i.__scrollLeft,
                    a = i.__isAnimating ? i.__scheduledTop : i.__scrollTop;
                i.scrollTo(r + (e || 0), a + (t || 0), n)
            }, scrollTo: function (t, n, i) {
                function r(t, n) {
                    function i(e) {
                        return --e * e * e + 1
                    }

                    function r() {
                        var p = Date.now(), h = Math.min(1, (p - l) / c), f = i(h);
                        d != t && (a.el.scrollTop = parseInt(f * (t - d) + d, 10)), u != n && (a.el.scrollLeft = parseInt(f * (n - u) + u, 10)), 1 > h ? e.requestAnimationFrame(r) : (e.tap.removeClonedInputs(a.__container, a), a.el.style.overflowX = o, a.el.style.overflowY = s, a.resize())
                    }

                    var l = Date.now(), c = 250, d = a.el.scrollTop, u = a.el.scrollLeft;
                    return d === t && u === n ? (a.el.style.overflowX = o, a.el.style.overflowY = s, void a.resize()) : void e.requestAnimationFrame(r)
                }

                var a = this;
                if (!i) return a.el.scrollTop = n, a.el.scrollLeft = t, void a.resize();
                var o = a.el.style.overflowX, s = a.el.style.overflowY;
                clearTimeout(a.__scrollToCleanupTimeout), a.__scrollToCleanupTimeout = setTimeout(function () {
                    a.el.style.overflowX = o, a.el.style.overflowY = s
                }, 500), a.el.style.overflowY = "hidden", a.el.style.overflowX = "hidden", r(n, t)
            }, __waitForSize: function () {
                var e = this;
                clearTimeout(e.__sizerTimeout);
                var t = function () {
                    e.resize(!0)
                };
                t(), e.__sizerTimeout = setTimeout(t, 500)
            }, __computeScrollMax: function () {
                var e = this;
                e.__maxScrollLeft = Math.max(e.__contentWidth - e.__clientWidth, 0), e.__maxScrollTop = Math.max(e.__contentHeight - e.__clientHeight, 0), e.__didWaitForSize || e.__maxScrollLeft || e.__maxScrollTop || (e.__didWaitForSize = !0, e.__waitForSize())
            }, __initEventHandlers: function () {
                var t, n, i = this, r = i.__container;
                i.scrollChildIntoView = function (a) {
                    var o = r.getBoundingClientRect();
                    i.__originalContainerHeight || (i.__originalContainerHeight = o.height), t = i.__originalContainerHeight;
                    var s = i.isShrunkForKeyboard, l = r.parentNode.classList.contains("modal"),
                        c = r.parentNode.classList.contains("popover"), d = l && window.innerWidth >= 680,
                        u = n && n !== a.detail.keyboardHeight;
                    (!s || u) && (!c && (e.Platform.isIOS() || e.Platform.isFullScreen || d) && e.requestAnimationFrame(function () {
                        t = Math.max(0, Math.min(i.__originalContainerHeight, i.__originalContainerHeight - (a.detail.keyboardHeight - 43))), r.style.height = t + "px", r.classList.add("keyboard-up"), i.resize()
                    }), i.isShrunkForKeyboard = !0), n = a.detail.keyboardHeight, a.detail.isElementUnderKeyboard && e.requestAnimationFrame(function () {
                        var t = e.DomUtil.getOffsetTop(a.detail.target);
                        setTimeout(function () {
                            e.Platform.isIOS() && e.tap.cloneFocusedInput(r, i), i.scrollTo(0, t - (o.top + 100), !0), i.onScroll()
                        }, 32)
                    }), a.stopPropagation()
                }, i.resetScrollView = function () {
                    i.isShrunkForKeyboard && (i.isShrunkForKeyboard = !1, r.style.height = "", i.__originalContainerHeight = r.getBoundingClientRect().height, e.Platform.isIOS() && e.requestAnimationFrame(function () {
                        r.classList.remove("keyboard-up")
                    })), i.resize()
                }, i.handleTouchMove = function (e) {
                    return i.__frozenShut ? (e.preventDefault(), e.stopPropagation(), !1) : i.__frozen ? (e.preventDefault(), !1) : !0
                }, r.addEventListener("scroll", i.onScroll), r.addEventListener("scrollChildIntoView", i.scrollChildIntoView), r.addEventListener(e.EVENTS.touchstart, i.handleTouchMove), r.addEventListener(e.EVENTS.touchmove, i.handleTouchMove), document.addEventListener("resetScrollView", i.resetScrollView)
            }, __cleanup: function () {
                var n = this, i = n.__container;
                i.removeEventListener("resetScrollView", n.resetScrollView), i.removeEventListener("scroll", n.onScroll), i.removeEventListener("scrollChildIntoView", n.scrollChildIntoView), i.removeEventListener("resetScrollView", n.resetScrollView), i.removeEventListener(e.EVENTS.touchstart, n.handleTouchMove), i.removeEventListener(e.EVENTS.touchmove, n.handleTouchMove), e.tap.removeClonedInputs(i, n), delete n.__container, delete n.__content, delete n.__indicatorX, delete n.__indicatorY, delete n.options.el, n.resize = n.scrollTo = n.onScroll = n.resetScrollView = t, n.scrollChildIntoView = t, i = null
            }
        })
    }(ionic), function (e) {
        "use strict";
        var t = "item", n = "item-content", i = "item-sliding", r = "item-options", a = "item-placeholder",
            o = "item-reordering", s = "item-reorder", l = function () {
            };
        l.prototype = {
            start: function () {
            }, drag: function () {
            }, end: function () {
            }, isSameItem: function () {
                return !1
            }
        };
        var c = function (e) {
            this.dragThresholdX = e.dragThresholdX || 10, this.el = e.el, this.item = e.item, this.canSwipe = e.canSwipe
        };
        c.prototype = new l, c.prototype.start = function (a) {
            var o, s, l, c;
            this.canSwipe() && (o = a.target.classList.contains(n) ? a.target : a.target.classList.contains(t) ? a.target.querySelector("." + n) : e.DomUtil.getParentWithClass(a.target, n), o && (o.classList.remove(i), l = parseFloat(o.style[e.CSS.TRANSFORM].replace("translate3d(", "").split(",")[0]) || 0, s = o.parentNode.querySelector("." + r), s && (s.classList.remove("invisible"), c = s.offsetWidth, this._currentDrag = {
                buttons: s,
                buttonsWidth: c,
                content: o,
                startOffsetX: l
            })))
        }, c.prototype.isSameItem = function (e) {
            return e._lastDrag && this._currentDrag ? this._currentDrag.content == e._lastDrag.content : !1
        }, c.prototype.clean = function (t) {
            function n() {
                i.buttons && i.buttons.classList.add("invisible")
            }

            var i = this._lastDrag;
            i && i.content && (i.content.style[e.CSS.TRANSITION] = "", i.content.style[e.CSS.TRANSFORM] = "", t ? (i.content.style[e.CSS.TRANSITION] = "none", n(), e.requestAnimationFrame(function () {
                i.content.style[e.CSS.TRANSITION] = ""
            })) : e.requestAnimationFrame(function () {
                setTimeout(n, 250)
            }))
        }, c.prototype.drag = e.animationFrameThrottle(function (t) {
            var n;
            if (this._currentDrag && (!this._isDragging && (Math.abs(t.gesture.deltaX) > this.dragThresholdX || Math.abs(this._currentDrag.startOffsetX) > 0) && (this._isDragging = !0), this._isDragging)) {
                n = this._currentDrag.buttonsWidth;
                var i = Math.min(0, this._currentDrag.startOffsetX + t.gesture.deltaX);
                -n > i && (i = Math.min(-n, -n + .4 * (t.gesture.deltaX + n))), this._currentDrag.content.$$ionicOptionsOpen = 0 !== i, this._currentDrag.content.style[e.CSS.TRANSFORM] = "translate3d(" + i + "px, 0, 0)", this._currentDrag.content.style[e.CSS.TRANSITION] = "none"
            }
        }), c.prototype.end = function (t, n) {
            var i = this;
            if (!i._currentDrag) return void (n && n());
            var r = -i._currentDrag.buttonsWidth;
            t.gesture.deltaX > -(i._currentDrag.buttonsWidth / 2) && ("left" == t.gesture.direction && Math.abs(t.gesture.velocityX) < .3 ? r = 0 : "right" == t.gesture.direction && (r = 0)), e.requestAnimationFrame(function () {
                if (0 === r) {
                    i._currentDrag.content.style[e.CSS.TRANSFORM] = "";
                    var t = i._currentDrag.buttons;
                    setTimeout(function () {
                        t && t.classList.add("invisible")
                    }, 250)
                } else i._currentDrag.content.style[e.CSS.TRANSFORM] = "translate3d(" + r + "px,0,0)";
                i._currentDrag.content.style[e.CSS.TRANSITION] = "", i._lastDrag || (i._lastDrag = {}), e.extend(i._lastDrag, i._currentDrag), i._currentDrag && (i._currentDrag.buttons = null, i._currentDrag.content = null), i._currentDrag = null, n && n()
            })
        };
        var d = function (e) {
            var t = this;
            if (t.dragThresholdY = e.dragThresholdY || 0, t.onReorder = e.onReorder, t.listEl = e.listEl, t.el = t.item = e.el, t.scrollEl = e.scrollEl, t.scrollView = e.scrollView, t.listElTrueTop = 0, t.listEl.offsetParent) {
                var n = t.listEl;
                do t.listElTrueTop += n.offsetTop, n = n.offsetParent; while (n)
            }
        };
        d.prototype = new l, d.prototype._moveElement = function (t) {
            var n = t.gesture.center.pageY + this.scrollView.getValues().top - this._currentDrag.elementHeight / 2 - this.listElTrueTop;
            this.el.style[e.CSS.TRANSFORM] = "translate3d(0, " + n + "px, 0)"
        }, d.prototype.deregister = function () {
            this.listEl = this.el = this.scrollEl = this.scrollView = null
        }, d.prototype.start = function (t) {
            var n = e.DomUtil.getChildIndex(this.el, this.el.nodeName.toLowerCase()), i = this.el.scrollHeight,
                r = this.el.cloneNode(!0);
            r.classList.add(a), this.el.parentNode.insertBefore(r, this.el), this.el.classList.add(o), this._currentDrag = {
                elementHeight: i,
                startIndex: n,
                placeholder: r,
                scrollHeight: scroll,
                list: r.parentNode
            }, this._moveElement(t)
        }, d.prototype.drag = e.animationFrameThrottle(function (t) {
            var n = this;
            if (this._currentDrag) {
                var i = 0, r = t.gesture.center.pageY, a = this.listElTrueTop;
                if (this.scrollView) {
                    var o = this.scrollView.__container;
                    i = this.scrollView.getValues().top;
                    var s = o.offsetTop, l = s - r + this._currentDrag.elementHeight / 2,
                        c = r + this._currentDrag.elementHeight / 2 - s - o.offsetHeight;
                    t.gesture.deltaY < 0 && l > 0 && i > 0 && (this.scrollView.scrollBy(null, -l), e.requestAnimationFrame(function () {
                        n.drag(t)
                    })), t.gesture.deltaY > 0 && c > 0 && i < this.scrollView.getScrollMax().top && (this.scrollView.scrollBy(null, c), e.requestAnimationFrame(function () {
                        n.drag(t)
                    }))
                }
                !this._isDragging && Math.abs(t.gesture.deltaY) > this.dragThresholdY && (this._isDragging = !0), this._isDragging && (this._moveElement(t), this._currentDrag.currentY = i + r - a)
            }
        }), d.prototype._getReorderIndex = function () {
            for (var e, t = this, n = Array.prototype.slice.call(t._currentDrag.placeholder.parentNode.children).filter(function (e) {
                return e.nodeName === t.el.nodeName && e !== t.el
            }), i = t._currentDrag.currentY, r = 0, a = n.length; a > r; r++) if (e = n[r], r === a - 1) {
                if (i > e.offsetTop) return r
            } else if (0 === r) {
                if (i < e.offsetTop + e.offsetHeight) return r
            } else if (i > e.offsetTop - e.offsetHeight / 2 && i < e.offsetTop + e.offsetHeight) return r;
            return t._currentDrag.startIndex
        }, d.prototype.end = function (t, n) {
            if (!this._currentDrag) return void (n && n());
            var i = this._currentDrag.placeholder, r = this._getReorderIndex();
            this.el.classList.remove(o), this.el.style[e.CSS.TRANSFORM] = "", i.parentNode.insertBefore(this.el, i), i.parentNode.removeChild(i), this.onReorder && this.onReorder(this.el, this._currentDrag.startIndex, r), this._currentDrag = {
                placeholder: null,
                content: null
            }, this._currentDrag = null, n && n()
        }, e.views.ListView = e.views.View.inherit({
            initialize: function (t) {
                var n = this;
                t = e.extend({
                    onReorder: function () {
                    }, virtualRemoveThreshold: -200, virtualAddThreshold: 200, canSwipe: function () {
                        return !0
                    }
                }, t), e.extend(n, t), !n.itemHeight && n.listEl && (n.itemHeight = n.listEl.children[0] && parseInt(n.listEl.children[0].style.height, 10)), n.onRefresh = t.onRefresh || function () {
                }, n.onRefreshOpening = t.onRefreshOpening || function () {
                }, n.onRefreshHolding = t.onRefreshHolding || function () {
                };
                var i = {};
                e.DomUtil.getParentOrSelfWithClass(n.el, "overflow-scroll") && (i.prevent_default_directions = ["left", "right"]), window.ionic.onGesture("release", function (e) {
                    n._handleEndDrag(e)
                }, n.el, i), window.ionic.onGesture("drag", function (e) {
                    n._handleDrag(e)
                }, n.el, i), n._initDrag()
            }, deregister: function () {
                this.el = this.listEl = this.scrollEl = this.scrollView = null, this.isScrollFreeze && self.scrollView.freeze(!1)
            }, stopRefreshing: function () {
                var e = this.el.querySelector(".list-refresher");
                e.style.height = "0"
            }, didScroll: function (e) {
                var t = this;
                if (t.isVirtual) {
                    var n = t.itemHeight, i = e.target.scrollHeight, r = t.el.parentNode.offsetHeight,
                        a = Math.max(0, e.scrollTop + t.virtualRemoveThreshold),
                        o = Math.min(i, Math.abs(e.scrollTop) + r + t.virtualAddThreshold),
                        s = parseInt(Math.abs(a / n), 10), l = parseInt(Math.abs(o / n), 10);
                    t._virtualItemsToRemove = Array.prototype.slice.call(t.listEl.children, 0, s), t.renderViewport && t.renderViewport(a, o, s, l)
                }
            }, didStopScrolling: function () {
                if (this.isVirtual) for (var e = 0; e < this._virtualItemsToRemove.length; e++) this.didHideItem && this.didHideItem(e)
            }, clearDragEffects: function (e) {
                this._lastDragOp && (this._lastDragOp.clean && this._lastDragOp.clean(e), this._lastDragOp.deregister && this._lastDragOp.deregister(), this._lastDragOp = null)
            }, _initDrag: function () {
                this._lastDragOp && this._lastDragOp.deregister && this._lastDragOp.deregister(), this._lastDragOp = this._dragOp, this._dragOp = null
            }, _getItem: function (e) {
                for (; e;) {
                    if (e.classList && e.classList.contains(t)) return e;
                    e = e.parentNode
                }
                return null
            }, _startDrag: function (t) {
                var n = this;
                n._isDragging = !1;
                var i, r = n._lastDragOp;
                n._didDragUpOrDown && r instanceof c && r.clean && r.clean(), !e.DomUtil.getParentOrSelfWithClass(t.target, s) || "up" != t.gesture.direction && "down" != t.gesture.direction ? !n._didDragUpOrDown && ("left" == t.gesture.direction || "right" == t.gesture.direction) && Math.abs(t.gesture.deltaX) > 5 && (i = n._getItem(t.target), i && i.querySelector(".item-options") && (n._dragOp = new c({
                    el: n.el,
                    item: i,
                    canSwipe: n.canSwipe
                }), n._dragOp.start(t), t.preventDefault(), n.isScrollFreeze = n.scrollView.freeze(!0))) : (i = n._getItem(t.target), i && (n._dragOp = new d({
                    listEl: n.el,
                    el: i,
                    scrollEl: n.scrollEl,
                    scrollView: n.scrollView,
                    onReorder: function (e, t, i) {
                        n.onReorder && n.onReorder(e, t, i)
                    }
                }), n._dragOp.start(t), t.preventDefault())), r && n._dragOp && !n._dragOp.isSameItem(r) && t.defaultPrevented && r.clean && r.clean()
            }, _handleEndDrag: function (e) {
                var t = this;
                t.scrollView && (t.isScrollFreeze = t.scrollView.freeze(!1)), t._didDragUpOrDown = !1, t._dragOp && t._dragOp.end(e, function () {
                    t._initDrag()
                })
            }, _handleDrag: function (e) {
                var t = this;
                Math.abs(e.gesture.deltaY) > 5 && (t._didDragUpOrDown = !0), t.isDragging || t._dragOp || t._startDrag(e), t._dragOp && (e.gesture.srcEvent.preventDefault(), t._dragOp.drag(e))
            }
        })
    }(ionic), function (e) {
        "use strict";
        e.views.Modal = e.views.View.inherit({
            initialize: function (t) {
                t = e.extend({
                    focusFirstInput: !1,
                    unfocusOnHide: !0,
                    focusFirstDelay: 600,
                    backdropClickToClose: !0,
                    hardwareBackButtonClose: !0
                }, t), e.extend(this, t), this.el = t.el
            }, show: function () {
                var e = this;
                e.focusFirstInput && window.setTimeout(function () {
                    var t = e.el.querySelector("input, textarea");
                    t && t.focus && t.focus()
                }, e.focusFirstDelay)
            }, hide: function () {
                if (this.unfocusOnHide) {
                    var e = this.el.querySelectorAll("input, textarea");
                    window.setTimeout(function () {
                        for (var t = 0; t < e.length; t++) e[t].blur && e[t].blur()
                    })
                }
            }
        })
    }(ionic), function (e) {
        "use strict";
        e.views.SideMenu = e.views.View.inherit({
            initialize: function (e) {
                this.el = e.el, this.isEnabled = "undefined" == typeof e.isEnabled ? !0 : e.isEnabled, this.setWidth(e.width)
            }, getFullWidth: function () {
                return this.width
            }, setWidth: function (e) {
                this.width = e, this.el.style.width = e + "px"
            }, setIsEnabled: function (e) {
                this.isEnabled = e
            }, bringUp: function () {
                "0" !== this.el.style.zIndex && (this.el.style.zIndex = "0")
            }, pushDown: function () {
                "-1" !== this.el.style.zIndex && (this.el.style.zIndex = "-1")
            }
        }), e.views.SideMenuContent = e.views.View.inherit({
            initialize: function (t) {
                e.extend(this, {
                    animationClass: "menu-animated", onDrag: function () {
                    }, onEndDrag: function () {
                    }
                }, t), e.onGesture("drag", e.proxy(this._onDrag, this), this.el), e.onGesture("release", e.proxy(this._onEndDrag, this), this.el)
            }, _onDrag: function (e) {
                this.onDrag && this.onDrag(e)
            }, _onEndDrag: function (e) {
                this.onEndDrag && this.onEndDrag(e)
            }, disableAnimation: function () {
                this.el.classList.remove(this.animationClass)
            }, enableAnimation: function () {
                this.el.classList.add(this.animationClass)
            }, getTranslateX: function () {
                return parseFloat(this.el.style[e.CSS.TRANSFORM].replace("translate3d(", "").split(",")[0])
            }, setTranslateX: e.animationFrameThrottle(function (t) {
                this.el.style[e.CSS.TRANSFORM] = "translate3d(" + t + "px, 0, 0)"
            })
        })
    }(ionic), function (e) {
        "use strict";
        e.views.Slider = e.views.View.inherit({
            initialize: function (e) {
                function t() {
                    if (b.offsetWidth) {
                        S = D.children, x = S.length, S.length < 2 && (e.continuous = !1), T.transitions && e.continuous && S.length < 3 && (D.appendChild(S[0].cloneNode(!0)), D.appendChild(D.children[1].cloneNode(!0)), S = D.children), y = new Array(S.length), E = b.offsetWidth || b.getBoundingClientRect().width, D.style.width = S.length * E + "px";
                        for (var t = S.length; t--;) {
                            var n = S[t];
                            n.style.width = E + "px", n.setAttribute("data-index", t), T.transitions && (n.style.left = t * -E + "px", o(t, M > t ? -E : t > M ? E : 0, 0))
                        }
                        e.continuous && T.transitions && (o(r(M - 1), -E, 0), o(r(M + 1), E, 0)), T.transitions || (D.style.left = M * -E + "px"), b.style.visibility = "visible", e.slidesChanged && e.slidesChanged()
                    }
                }

                function n(t) {
                    e.continuous ? a(M - 1, t) : M && a(M - 1, t)
                }

                function i(t) {
                    e.continuous ? a(M + 1, t) : M < S.length - 1 && a(M + 1, t)
                }

                function r(e) {
                    return (S.length + e % S.length) % S.length
                }

                function a(t, n) {
                    if (M != t) {
                        if (!S) return void (M = t);
                        if (T.transitions) {
                            var i = Math.abs(M - t) / (M - t);
                            if (e.continuous) {
                                var a = i;
                                i = -y[r(t)] / E, i !== a && (t = -i * S.length + t)
                            }
                            for (var s = Math.abs(M - t) - 1; s--;) o(r((t > M ? t : M) - s - 1), E * i, 0);
                            t = r(t), o(M, E * i, n || L), o(t, 0, n || L), e.continuous && o(r(t - i), -(E * i), 0)
                        } else t = r(t), l(M * -E, t * -E, n || L);
                        M = t, w(e.callback && e.callback(M, S[M]))
                    }
                }

                function o(e, t, n) {
                    s(e, t, n), y[e] = t
                }

                function s(e, t, n) {
                    var i = S[e], r = i && i.style;
                    r && (r.webkitTransitionDuration = r.MozTransitionDuration = r.msTransitionDuration = r.OTransitionDuration = r.transitionDuration = n + "ms", r.webkitTransform = "translate(" + t + "px,0)translateZ(0)", r.msTransform = r.MozTransform = r.OTransform = "translateX(" + t + "px)")
                }

                function l(t, n, i) {
                    if (!i) return void (D.style.left = n + "px");
                    var r = +new Date, a = setInterval(function () {
                        var o = +new Date - r;
                        return o > i ? (D.style.left = n + "px", I && c(), e.transitionEnd && e.transitionEnd.call(event, M, S[M]), void clearInterval(a)) : void (D.style.left = (n - t) * (Math.floor(o / i * 100) / 100) + t + "px")
                    }, 4)
                }

                function c() {
                    C = setTimeout(i, I)
                }

                function d() {
                    I = e.auto || 0, clearTimeout(C)
                }

                var u, p, h, f = this;
                window.navigator.pointerEnabled ? (u = "pointerdown", p = "pointermove", h = "pointerup") : window.navigator.msPointerEnabled ? (u = "MSPointerDown", p = "MSPointerMove", h = "MSPointerUp") : (u = "touchstart", p = "touchmove", h = "touchend");
                var m = "mousedown", g = "mousemove", v = "mouseup", _ = function () {
                }, w = function (e) {
                    setTimeout(e || _, 0)
                }, T = {
                    addEventListener: !!window.addEventListener, transitions: function (e) {
                        var t = ["transitionProperty", "WebkitTransition", "MozTransition", "OTransition", "msTransition"];
                        for (var n in t) if (void 0 !== e.style[t[n]]) return !0;
                        return !1
                    }(document.createElement("swipe"))
                }, b = e.el;
                if (b) {
                    var S, y, E, x, D = b.children[0];
                    e = e || {};
                    var M = parseInt(e.startSlide, 10) || 0, L = e.speed || 300;
                    e.continuous = void 0 !== e.continuous ? e.continuous : !0;
                    var C, P, I = e.auto || 0, k = {}, N = {}, z = {
                        handleEvent: function (n) {
                            switch (!n.touches && n.pageX && n.pageY && (n.touches = [{
                                pageX: n.pageX,
                                pageY: n.pageY
                            }]), n.type) {
                                case u:
                                    this.start(n);
                                    break;
                                case m:
                                    this.start(n);
                                    break;
                                case p:
                                    this.touchmove(n);
                                    break;
                                case g:
                                    this.touchmove(n);
                                    break;
                                case h:
                                    w(this.end(n));
                                    break;
                                case v:
                                    w(this.end(n));
                                    break;
                                case"webkitTransitionEnd":
                                case"msTransitionEnd":
                                case"oTransitionEnd":
                                case"otransitionend":
                                case"transitionend":
                                    w(this.transitionEnd(n));
                                    break;
                                case"resize":
                                    w(t)
                            }
                            e.stopPropagation && n.stopPropagation()
                        }, start: function (e) {
                            if (e.touches) {
                                var t = e.touches[0];
                                k = {
                                    x: t.pageX,
                                    y: t.pageY,
                                    time: +new Date
                                }, P = void 0, N = {}, D.addEventListener(p, this, !1), D.addEventListener(g, this, !1), D.addEventListener(h, this, !1), D.addEventListener(v, this, !1), document.addEventListener(h, this, !1), document.addEventListener(v, this, !1)
                            }
                        }, touchmove: function (t) {
                            if (!(!t.touches || t.touches.length > 1 || t.scale && 1 !== t.scale || f.slideIsDisabled)) {
                                e.disableScroll && t.preventDefault();
                                var n = t.touches[0];
                                N = {
                                    x: n.pageX - k.x,
                                    y: n.pageY - k.y
                                }, "undefined" == typeof P && (P = !!(P || Math.abs(N.x) < Math.abs(N.y))), P || (t.preventDefault(), d(), e.continuous ? (s(r(M - 1), N.x + y[r(M - 1)], 0), s(M, N.x + y[M], 0), s(r(M + 1), N.x + y[r(M + 1)], 0)) : (e.bouncing ? N.x = N.x / (!M && N.x > 0 || M == S.length - 1 && N.x < 0 ? Math.abs(N.x) / E + 1 : 1) : (E * M - N.x < 0 && (N.x = Math.min(N.x, E * M)), Math.abs(N.x) > E * (S.length - M - 1) && (N.x = Math.max(-E * (S.length - M - 1), N.x))), s(M - 1, N.x + y[M - 1], 0), s(M, N.x + y[M], 0), s(M + 1, N.x + y[M + 1], 0)), e.onDrag && e.onDrag())
                            }
                        }, end: function () {
                            var t = +new Date - k.time,
                                n = Number(t) < 250 && Math.abs(N.x) > 20 || Math.abs(N.x) > E / 2,
                                i = !M && N.x > 0 || M == S.length - 1 && N.x < 0;
                            e.continuous && (i = !1);
                            var a = N.x < 0;
                            P || (n && !i ? (a ? (e.continuous ? (o(r(M - 1), -E, 0), o(r(M + 2), E, 0)) : o(M - 1, -E, 0), o(M, y[M] - E, L), o(r(M + 1), y[r(M + 1)] - E, L), M = r(M + 1)) : (e.continuous ? (o(r(M + 1), E, 0), o(r(M - 2), -E, 0)) : o(M + 1, E, 0), o(M, y[M] + E, L), o(r(M - 1), y[r(M - 1)] + E, L), M = r(M - 1)), e.callback && e.callback(M, S[M])) : e.continuous ? (o(r(M - 1), -E, L), o(M, 0, L), o(r(M + 1), E, L)) : (o(M - 1, -E, L), o(M, 0, L), o(M + 1, E, L))), D.removeEventListener(p, z, !1), D.removeEventListener(g, z, !1), D.removeEventListener(h, z, !1), D.removeEventListener(v, z, !1), document.removeEventListener(h, z, !1), document.removeEventListener(v, z, !1), e.onDragEnd && e.onDragEnd()
                        }, transitionEnd: function (t) {
                            parseInt(t.target.getAttribute("data-index"), 10) == M && (I && c(), e.transitionEnd && e.transitionEnd.call(t, M, S[M]))
                        }
                    };
                    this.update = function () {
                        setTimeout(t)
                    }, this.setup = function () {
                        t()
                    }, this.loop = function (t) {
                        return arguments.length && (e.continuous = !!t), e.continuous
                    }, this.enableSlide = function (e) {
                        return arguments.length && (this.slideIsDisabled = !e), !this.slideIsDisabled
                    }, this.slide = this.select = function (e, t) {
                        d(), a(e, t)
                    }, this.prev = this.previous = function () {
                        d(), n()
                    }, this.next = function () {
                        d(), i()
                    }, this.stop = function () {
                        d()
                    }, this.start = function () {
                        c()
                    }, this.autoPlay = function (e) {
                        !I || 0 > I ? d() : (I = e, c())
                    }, this.currentIndex = this.selected = function () {
                        return M
                    }, this.slidesCount = this.count = function () {
                        return x
                    }, this.kill = function () {
                        d(), D.style.width = "", D.style.left = "", S && (S = []), T.addEventListener ? (D.removeEventListener(u, z, !1), D.removeEventListener(m, z, !1), D.removeEventListener("webkitTransitionEnd", z, !1), D.removeEventListener("msTransitionEnd", z, !1), D.removeEventListener("oTransitionEnd", z, !1), D.removeEventListener("otransitionend", z, !1), D.removeEventListener("transitionend", z, !1), window.removeEventListener("resize", z, !1)) : window.onresize = null
                    }, this.load = function () {
                        t(), I && c(), T.addEventListener ? (D.addEventListener(u, z, !1), D.addEventListener(m, z, !1), T.transitions && (D.addEventListener("webkitTransitionEnd", z, !1), D.addEventListener("msTransitionEnd", z, !1), D.addEventListener("oTransitionEnd", z, !1), D.addEventListener("otransitionend", z, !1), D.addEventListener("transitionend", z, !1)), window.addEventListener("resize", z, !1)) : window.onresize = function () {
                            t()
                        }
                    }
                }
            }
        })
    }(ionic), function () {
        "use strict";

        function e(e) {
            e.fn.swiper = function (t) {
                var i;
                return e(this).each(function () {
                    var e = new n(this, t);
                    i || (i = e)
                }), i
            }
        }

        var t, n = function (e, r, a, o) {
            function s() {
                return "horizontal" === y.params.direction
            }

            function l(e) {
                return Math.floor(e)
            }

            function c() {
                y.autoplayTimeoutId = setTimeout(function () {
                    y.params.loop ? (y.fixLoop(), y._slideNext()) : y.isEnd ? r.autoplayStopOnLast ? y.stopAutoplay() : y._slideTo(0) : y._slideNext()
                }, y.params.autoplay)
            }

            function d(e, n) {
                var i = t(e.target);
                if (!i.is(n)) if ("string" == typeof n) i = i.parents(n); else if (n.nodeType) {
                    var r;
                    return i.parents().each(function (e, t) {
                        t === n && (r = n)
                    }), r ? n : void 0
                }
                return 0 === i.length ? void 0 : i[0]
            }

            function u(e, t) {
                t = t || {};
                var n = window.MutationObserver || window.WebkitMutationObserver, i = new n(function (e) {
                    e.forEach(function (e) {
                        y.onResize(!0), y.emit("onObserverUpdate", y, e)
                    })
                });
                i.observe(e, {
                    attributes: "undefined" == typeof t.attributes ? !0 : t.attributes,
                    childList: "undefined" == typeof t.childList ? !0 : t.childList,
                    characterData: "undefined" == typeof t.characterData ? !0 : t.characterData
                }), y.observers.push(i)
            }

            function p(e) {
                e.originalEvent && (e = e.originalEvent);
                var t = e.keyCode || e.charCode;
                if (!y.params.allowSwipeToNext && (s() && 39 === t || !s() && 40 === t)) return !1;
                if (!y.params.allowSwipeToPrev && (s() && 37 === t || !s() && 38 === t)) return !1;
                if (!(e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || document.activeElement && document.activeElement.nodeName && ("input" === document.activeElement.nodeName.toLowerCase() || "textarea" === document.activeElement.nodeName.toLowerCase()))) {
                    if (37 === t || 39 === t || 38 === t || 40 === t) {
                        var n = !1;
                        if (y.container.parents(".swiper-slide").length > 0 && 0 === y.container.parents(".swiper-slide-active").length) return;
                        var i = {left: window.pageXOffset, top: window.pageYOffset}, r = window.innerWidth,
                            a = window.innerHeight, o = y.container.offset();
                        y.rtl && (o.left = o.left - y.container[0].scrollLeft);
                        for (var l = [[o.left, o.top], [o.left + y.width, o.top], [o.left, o.top + y.height], [o.left + y.width, o.top + y.height]], c = 0; c < l.length; c++) {
                            var d = l[c];
                            d[0] >= i.left && d[0] <= i.left + r && d[1] >= i.top && d[1] <= i.top + a && (n = !0)
                        }
                        if (!n) return
                    }
                    s() ? ((37 === t || 39 === t) && (e.preventDefault ? e.preventDefault() : e.returnValue = !1), (39 === t && !y.rtl || 37 === t && y.rtl) && y.slideNext(), (37 === t && !y.rtl || 39 === t && y.rtl) && y.slidePrev()) : ((38 === t || 40 === t) && (e.preventDefault ? e.preventDefault() : e.returnValue = !1), 40 === t && y.slideNext(), 38 === t && y.slidePrev())
                }
            }

            function h(e) {
                e.originalEvent && (e = e.originalEvent);
                var t = y.mousewheel.event, n = 0, i = y.rtl ? -1 : 1;
                if (e.detail) n = -e.detail; else if ("mousewheel" === t) if (y.params.mousewheelForceToAxis) if (s()) {
                    if (!(Math.abs(e.wheelDeltaX) > Math.abs(e.wheelDeltaY))) return;
                    n = e.wheelDeltaX * i
                } else {
                    if (!(Math.abs(e.wheelDeltaY) > Math.abs(e.wheelDeltaX))) return;
                    n = e.wheelDeltaY
                } else n = Math.abs(e.wheelDeltaX) > Math.abs(e.wheelDeltaY) ? -e.wheelDeltaX * i : -e.wheelDeltaY; else if ("DOMMouseScroll" === t) n = -e.detail; else if ("wheel" === t) if (y.params.mousewheelForceToAxis) if (s()) {
                    if (!(Math.abs(e.deltaX) > Math.abs(e.deltaY))) return;
                    n = -e.deltaX * i
                } else {
                    if (!(Math.abs(e.deltaY) > Math.abs(e.deltaX))) return;
                    n = -e.deltaY
                } else n = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? -e.deltaX * i : -e.deltaY;
                if (0 !== n) {
                    if (y.params.mousewheelInvert && (n = -n), y.params.freeMode) {
                        var r = y.getWrapperTranslate() + n * y.params.mousewheelSensitivity, a = y.isBeginning,
                            o = y.isEnd;
                        if (r >= y.minTranslate() && (r = y.minTranslate()), r <= y.maxTranslate() && (r = y.maxTranslate()), y.setWrapperTransition(0), y.setWrapperTranslate(r), y.updateProgress(), y.updateActiveIndex(), (!a && y.isBeginning || !o && y.isEnd) && y.updateClasses(), y.params.freeModeSticky && (clearTimeout(y.mousewheel.timeout), y.mousewheel.timeout = setTimeout(function () {
                            y.slideReset()
                        }, 300)), 0 === r || r === y.maxTranslate()) return
                    } else {
                        if ((new window.Date).getTime() - y.mousewheel.lastScrollTime > 60) if (0 > n) if (y.isEnd && !y.params.loop || y.animating) {
                            if (y.params.mousewheelReleaseOnEdges) return !0
                        } else y.slideNext(); else if (y.isBeginning && !y.params.loop || y.animating) {
                            if (y.params.mousewheelReleaseOnEdges) return !0
                        } else y.slidePrev();
                        y.mousewheel.lastScrollTime = (new window.Date).getTime()
                    }
                    return y.params.autoplay && y.stopAutoplay(), e.preventDefault ? e.preventDefault() : e.returnValue = !1, !1
                }
            }

            function f(e, n) {
                e = t(e);
                var i, r, a, o = y.rtl ? -1 : 1;
                i = e.attr("data-swiper-parallax") || "0", r = e.attr("data-swiper-parallax-x"),
                    a = e.attr("data-swiper-parallax-y"), r || a ? (r = r || "0", a = a || "0") : s() ? (r = i, a = "0") : (a = i, r = "0"), r = r.indexOf("%") >= 0 ? parseInt(r, 10) * n * o + "%" : r * n * o + "px", a = a.indexOf("%") >= 0 ? parseInt(a, 10) * n + "%" : a * n + "px", e.transform("translate3d(" + r + ", " + a + ",0px)")
            }

            function m(e) {
                return 0 !== e.indexOf("on") && (e = e[0] !== e[0].toUpperCase() ? "on" + e[0].toUpperCase() + e.substring(1) : "on" + e), e
            }

            if (!(this instanceof n)) return new n(e, r);
            var g = {
                direction: "horizontal",
                touchEventsTarget: "container",
                initialSlide: 0,
                speed: 300,
                autoplay: !1,
                autoplayDisableOnInteraction: !0,
                iOSEdgeSwipeDetection: !1,
                iOSEdgeSwipeThreshold: 20,
                freeMode: !1,
                freeModeMomentum: !0,
                freeModeMomentumRatio: 1,
                freeModeMomentumBounce: !0,
                freeModeMomentumBounceRatio: 1,
                freeModeSticky: !1,
                freeModeMinimumVelocity: .02,
                autoHeight: !1,
                setWrapperSize: !1,
                virtualTranslate: !1,
                effect: "slide",
                coverflow: {rotate: 50, stretch: 0, depth: 100, modifier: 1, slideShadows: !0},
                cube: {slideShadows: !0, shadow: !0, shadowOffset: 20, shadowScale: .94},
                fade: {crossFade: !1},
                parallax: !1,
                scrollbar: null,
                scrollbarHide: !0,
                scrollbarDraggable: !1,
                scrollbarSnapOnRelease: !1,
                keyboardControl: !1,
                mousewheelControl: !1,
                mousewheelReleaseOnEdges: !1,
                mousewheelInvert: !1,
                mousewheelForceToAxis: !1,
                mousewheelSensitivity: 1,
                hashnav: !1,
                breakpoints: void 0,
                spaceBetween: 0,
                slidesPerView: 1,
                slidesPerColumn: 1,
                slidesPerColumnFill: "column",
                slidesPerGroup: 1,
                centeredSlides: !1,
                slidesOffsetBefore: 0,
                slidesOffsetAfter: 0,
                roundLengths: !1,
                touchRatio: 1,
                touchAngle: 45,
                simulateTouch: !0,
                shortSwipes: !0,
                longSwipes: !0,
                longSwipesRatio: .5,
                longSwipesMs: 300,
                followFinger: !0,
                onlyExternal: !1,
                threshold: 0,
                touchMoveStopPropagation: !0,
                pagination: null,
                paginationElement: "span",
                paginationClickable: !1,
                paginationHide: !1,
                paginationBulletRender: null,
                resistance: !0,
                resistanceRatio: .85,
                nextButton: null,
                prevButton: null,
                watchSlidesProgress: !1,
                watchSlidesVisibility: !1,
                grabCursor: !1,
                preventClicks: !0,
                preventClicksPropagation: !0,
                slideToClickedSlide: !1,
                lazyLoading: !1,
                lazyLoadingInPrevNext: !1,
                lazyLoadingOnTransitionStart: !1,
                preloadImages: !0,
                updateOnImagesReady: !0,
                loop: !1,
                loopAdditionalSlides: 0,
                loopedSlides: null,
                control: void 0,
                controlInverse: !1,
                controlBy: "slide",
                allowSwipeToPrev: !0,
                allowSwipeToNext: !0,
                swipeHandler: null,
                noSwiping: !0,
                noSwipingClass: "swiper-no-swiping",
                slideClass: "swiper-slide",
                slideActiveClass: "swiper-slide-active",
                slideVisibleClass: "swiper-slide-visible",
                slideDuplicateClass: "swiper-slide-duplicate",
                slideNextClass: "swiper-slide-next",
                slidePrevClass: "swiper-slide-prev",
                wrapperClass: "swiper-wrapper",
                bulletClass: "swiper-pagination-bullet",
                bulletActiveClass: "swiper-pagination-bullet-active",
                buttonDisabledClass: "swiper-button-disabled",
                paginationHiddenClass: "swiper-pagination-hidden",
                observer: !1,
                observeParents: !1,
                a11y: !1,
                prevSlideMessage: "Previous slide",
                nextSlideMessage: "Next slide",
                firstSlideMessage: "This is the first slide",
                lastSlideMessage: "This is the last slide",
                paginationBulletMessage: "Go to slide {{index}}",
                runCallbacksOnInit: !0
            }, v = r && r.virtualTranslate;
            r = r || {};
            var _ = {};
            for (var w in r) if ("object" != typeof r[w] || (r[w].nodeType || r[w] === window || r[w] === document || "undefined" != typeof i && r[w] instanceof i || "undefined" != typeof jQuery && r[w] instanceof jQuery)) _[w] = r[w]; else {
                _[w] = {};
                for (var T in r[w]) _[w][T] = r[w][T]
            }
            for (var b in g) if ("undefined" == typeof r[b]) r[b] = g[b]; else if ("object" == typeof r[b]) for (var S in g[b]) "undefined" == typeof r[b][S] && (r[b][S] = g[b][S]);
            var y = this;
            if (y.params = r, y.originalParams = _, y.classNames = [], "undefined" != typeof t && "undefined" != typeof i && (t = i), ("undefined" != typeof t || (t = "undefined" == typeof i ? window.Dom7 || window.Zepto || window.jQuery : i)) && (y.$ = t, y.currentBreakpoint = void 0, y.getActiveBreakpoint = function () {
                if (!y.params.breakpoints) return !1;
                var e, t = !1, n = [];
                for (e in y.params.breakpoints) y.params.breakpoints.hasOwnProperty(e) && n.push(e);
                n.sort(function (e, t) {
                    return parseInt(e, 10) > parseInt(t, 10)
                });
                for (var i = 0; i < n.length; i++) e = n[i], e >= window.innerWidth && !t && (t = e);
                return t || "max"
            }, y.setBreakpoint = function () {
                var e = y.getActiveBreakpoint();
                if (e && y.currentBreakpoint !== e) {
                    var t = e in y.params.breakpoints ? y.params.breakpoints[e] : y.originalParams;
                    for (var n in t) y.params[n] = t[n];
                    y.currentBreakpoint = e
                }
            }, y.params.breakpoints && y.setBreakpoint(), y.container = t(e), 0 !== y.container.length)) {
                if (y.container.length > 1) return void y.container.each(function () {
                    new n(this, r)
                });
                y.container[0].swiper = y, y.container.data("swiper", y), y.classNames.push("swiper-container-" + y.params.direction), y.params.freeMode && y.classNames.push("swiper-container-free-mode"), y.support.flexbox || (y.classNames.push("swiper-container-no-flexbox"), y.params.slidesPerColumn = 1), y.params.autoHeight && y.classNames.push("swiper-container-autoheight"), (y.params.parallax || y.params.watchSlidesVisibility) && (y.params.watchSlidesProgress = !0), ["cube", "coverflow"].indexOf(y.params.effect) >= 0 && (y.support.transforms3d ? (y.params.watchSlidesProgress = !0, y.classNames.push("swiper-container-3d")) : y.params.effect = "slide"), "slide" !== y.params.effect && y.classNames.push("swiper-container-" + y.params.effect), "cube" === y.params.effect && (y.params.resistanceRatio = 0, y.params.slidesPerView = 1, y.params.slidesPerColumn = 1, y.params.slidesPerGroup = 1, y.params.centeredSlides = !1, y.params.spaceBetween = 0, y.params.virtualTranslate = !0, y.params.setWrapperSize = !1), "fade" === y.params.effect && (y.params.slidesPerView = 1, y.params.slidesPerColumn = 1, y.params.slidesPerGroup = 1, y.params.watchSlidesProgress = !0, y.params.spaceBetween = 0, "undefined" == typeof v && (y.params.virtualTranslate = !0)), y.params.grabCursor && y.support.touch && (y.params.grabCursor = !1), y.wrapper = y.container.children("." + y.params.wrapperClass), y.params.pagination && (y.paginationContainer = t(y.params.pagination), y.params.paginationClickable && y.paginationContainer.addClass("swiper-pagination-clickable")), y.rtl = s() && ("rtl" === y.container[0].dir.toLowerCase() || "rtl" === y.container.css("direction")), y.rtl && y.classNames.push("swiper-container-rtl"), y.rtl && (y.wrongRTL = "-webkit-box" === y.wrapper.css("display")), y.params.slidesPerColumn > 1 && y.classNames.push("swiper-container-multirow"), y.device.android && y.classNames.push("swiper-container-android"), y.container.addClass(y.classNames.join(" ")), y.translate = 0, y.progress = 0, y.velocity = 0, y.lockSwipeToNext = function () {
                    y.params.allowSwipeToNext = !1
                }, y.lockSwipeToPrev = function () {
                    y.params.allowSwipeToPrev = !1
                }, y.lockSwipes = function () {
                    y.params.allowSwipeToNext = y.params.allowSwipeToPrev = !1
                }, y.unlockSwipeToNext = function () {
                    y.params.allowSwipeToNext = !0
                }, y.unlockSwipeToPrev = function () {
                    y.params.allowSwipeToPrev = !0
                }, y.unlockSwipes = function () {
                    y.params.allowSwipeToNext = y.params.allowSwipeToPrev = !0
                }, y.params.grabCursor && (y.container[0].style.cursor = "move", y.container[0].style.cursor = "-webkit-grab", y.container[0].style.cursor = "-moz-grab", y.container[0].style.cursor = "grab"), y.imagesToLoad = [], y.imagesLoaded = 0, y.loadImage = function (e, t, n, i, r) {
                    function a() {
                        r && r()
                    }

                    var o;
                    e.complete && i ? a() : t ? (o = new window.Image, o.onload = a, o.onerror = a, n && (o.srcset = n), t && (o.src = t)) : a()
                }, y.preloadImages = function () {
                    function e() {
                        "undefined" != typeof y && null !== y && (void 0 !== y.imagesLoaded && y.imagesLoaded++, y.imagesLoaded === y.imagesToLoad.length && (y.params.updateOnImagesReady && y.update(), y.emit("onImagesReady", y)))
                    }

                    y.imagesToLoad = y.container.find("img");
                    for (var t = 0; t < y.imagesToLoad.length; t++) y.loadImage(y.imagesToLoad[t], y.imagesToLoad[t].currentSrc || y.imagesToLoad[t].getAttribute("src"), y.imagesToLoad[t].srcset || y.imagesToLoad[t].getAttribute("srcset"), !0, e)
                }, y.autoplayTimeoutId = void 0, y.autoplaying = !1, y.autoplayPaused = !1, y.startAutoplay = function () {
                    return "undefined" != typeof y.autoplayTimeoutId ? !1 : y.params.autoplay ? y.autoplaying ? !1 : (y.autoplaying = !0, y.emit("onAutoplayStart", y), void c()) : !1
                }, y.stopAutoplay = function (e) {
                    y.autoplayTimeoutId && (y.autoplayTimeoutId && clearTimeout(y.autoplayTimeoutId), y.autoplaying = !1, y.autoplayTimeoutId = void 0, y.emit("onAutoplayStop", y))
                }, y.pauseAutoplay = function (e) {
                    y.autoplayPaused || (y.autoplayTimeoutId && clearTimeout(y.autoplayTimeoutId), y.autoplayPaused = !0, 0 === e ? (y.autoplayPaused = !1, c()) : y.wrapper.transitionEnd(function () {
                        y && (y.autoplayPaused = !1, y.autoplaying ? c() : y.stopAutoplay())
                    }))
                }, y.minTranslate = function () {
                    return -y.snapGrid[0]
                }, y.maxTranslate = function () {
                    return -y.snapGrid[y.snapGrid.length - 1]
                }, y.updateAutoHeight = function () {
                    var e = y.slides.eq(y.activeIndex)[0].offsetHeight;
                    e && y.wrapper.css("height", y.slides.eq(y.activeIndex)[0].offsetHeight + "px")
                }, y.updateContainerSize = function () {
                    var e, t;
                    e = "undefined" != typeof y.params.width ? y.params.width : y.container[0].clientWidth, t = "undefined" != typeof y.params.height ? y.params.height : y.container[0].clientHeight, 0 === e && s() || 0 === t && !s() || (e = e - parseInt(y.container.css("padding-left"), 10) - parseInt(y.container.css("padding-right"), 10), t = t - parseInt(y.container.css("padding-top"), 10) - parseInt(y.container.css("padding-bottom"), 10), y.width = e, y.height = t, y.size = s() ? y.width : y.height)
                }, y.updateSlidesSize = function () {
                    y.slides = y.wrapper.children("." + y.params.slideClass), y.snapGrid = [], y.slidesGrid = [], y.slidesSizesGrid = [];
                    var e, t = y.params.spaceBetween, n = -y.params.slidesOffsetBefore, i = 0, r = 0;
                    "string" == typeof t && t.indexOf("%") >= 0 && (t = parseFloat(t.replace("%", "")) / 100 * y.size), y.virtualSize = -t, y.rtl ? y.slides.css({
                        marginLeft: "",
                        marginTop: ""
                    }) : y.slides.css({marginRight: "", marginBottom: ""});
                    var a;
                    y.params.slidesPerColumn > 1 && (a = Math.floor(y.slides.length / y.params.slidesPerColumn) === y.slides.length / y.params.slidesPerColumn ? y.slides.length : Math.ceil(y.slides.length / y.params.slidesPerColumn) * y.params.slidesPerColumn, "auto" !== y.params.slidesPerView && "row" === y.params.slidesPerColumnFill && (a = Math.max(a, y.params.slidesPerView * y.params.slidesPerColumn)));
                    var o, c = y.params.slidesPerColumn, d = a / c,
                        u = d - (y.params.slidesPerColumn * d - y.slides.length);
                    for (e = 0; e < y.slides.length; e++) {
                        o = 0;
                        var p = y.slides.eq(e);
                        if (y.params.slidesPerColumn > 1) {
                            var h, f, m;
                            "column" === y.params.slidesPerColumnFill ? (f = Math.floor(e / c), m = e - f * c, (f > u || f === u && m === c - 1) && ++m >= c && (m = 0, f++), h = f + m * a / c, p.css({
                                "-webkit-box-ordinal-group": h,
                                "-moz-box-ordinal-group": h,
                                "-ms-flex-order": h,
                                "-webkit-order": h,
                                order: h
                            })) : (m = Math.floor(e / d), f = e - m * d), p.css({"margin-top": 0 !== m && y.params.spaceBetween && y.params.spaceBetween + "px"}).attr("data-swiper-column", f).attr("data-swiper-row", m)
                        }
                        "none" !== p.css("display") && ("auto" === y.params.slidesPerView ? (o = s() ? p.outerWidth(!0) : p.outerHeight(!0), y.params.roundLengths && (o = l(o))) : (o = (y.size - (y.params.slidesPerView - 1) * t) / y.params.slidesPerView, y.params.roundLengths && (o = l(o)), s() ? y.slides[e].style.width = o + "px" : y.slides[e].style.height = o + "px"), y.slides[e].swiperSlideSize = o, y.slidesSizesGrid.push(o), y.params.centeredSlides ? (n = n + o / 2 + i / 2 + t, 0 === e && (n = n - y.size / 2 - t), Math.abs(n) < .001 && (n = 0), r % y.params.slidesPerGroup === 0 && y.snapGrid.push(n), y.slidesGrid.push(n)) : (r % y.params.slidesPerGroup === 0 && y.snapGrid.push(n), y.slidesGrid.push(n), n = n + o + t), y.virtualSize += o + t, i = o, r++)
                    }
                    y.virtualSize = Math.max(y.virtualSize, y.size) + y.params.slidesOffsetAfter;
                    var g;
                    if (y.rtl && y.wrongRTL && ("slide" === y.params.effect || "coverflow" === y.params.effect) && y.wrapper.css({width: y.virtualSize + y.params.spaceBetween + "px"}), (!y.support.flexbox || y.params.setWrapperSize) && (s() ? y.wrapper.css({width: y.virtualSize + y.params.spaceBetween + "px"}) : y.wrapper.css({height: y.virtualSize + y.params.spaceBetween + "px"})), y.params.slidesPerColumn > 1 && (y.virtualSize = (o + y.params.spaceBetween) * a, y.virtualSize = Math.ceil(y.virtualSize / y.params.slidesPerColumn) - y.params.spaceBetween, y.wrapper.css({width: y.virtualSize + y.params.spaceBetween + "px"}), y.params.centeredSlides)) {
                        for (g = [], e = 0; e < y.snapGrid.length; e++) y.snapGrid[e] < y.virtualSize + y.snapGrid[0] && g.push(y.snapGrid[e]);
                        y.snapGrid = g
                    }
                    if (!y.params.centeredSlides) {
                        for (g = [], e = 0; e < y.snapGrid.length; e++) y.snapGrid[e] <= y.virtualSize - y.size && g.push(y.snapGrid[e]);
                        y.snapGrid = g, Math.floor(y.virtualSize - y.size) > Math.floor(y.snapGrid[y.snapGrid.length - 1]) && y.snapGrid.push(y.virtualSize - y.size)
                    }
                    0 === y.snapGrid.length && (y.snapGrid = [0]), 0 !== y.params.spaceBetween && (s() ? y.rtl ? y.slides.css({marginLeft: t + "px"}) : y.slides.css({marginRight: t + "px"}) : y.slides.css({marginBottom: t + "px"})), y.params.watchSlidesProgress && y.updateSlidesOffset()
                }, y.updateSlidesOffset = function () {
                    for (var e = 0; e < y.slides.length; e++) y.slides[e].swiperSlideOffset = s() ? y.slides[e].offsetLeft : y.slides[e].offsetTop
                }, y.updateSlidesProgress = function (e) {
                    if ("undefined" == typeof e && (e = y.translate || 0), 0 !== y.slides.length) {
                        "undefined" == typeof y.slides[0].swiperSlideOffset && y.updateSlidesOffset();
                        var t = -e;
                        y.rtl && (t = e), y.slides.removeClass(y.params.slideVisibleClass);
                        for (var n = 0; n < y.slides.length; n++) {
                            var i = y.slides[n],
                                r = (t - i.swiperSlideOffset) / (i.swiperSlideSize + y.params.spaceBetween);
                            if (y.params.watchSlidesVisibility) {
                                var a = -(t - i.swiperSlideOffset), o = a + y.slidesSizesGrid[n],
                                    s = a >= 0 && a < y.size || o > 0 && o <= y.size || 0 >= a && o >= y.size;
                                s && y.slides.eq(n).addClass(y.params.slideVisibleClass)
                            }
                            i.progress = y.rtl ? -r : r
                        }
                    }
                }, y.updateProgress = function (e) {
                    "undefined" == typeof e && (e = y.translate || 0);
                    var t = y.maxTranslate() - y.minTranslate(), n = y.isBeginning, i = y.isEnd;
                    0 === t ? (y.progress = 0, y.isBeginning = y.isEnd = !0) : (y.progress = (e - y.minTranslate()) / t, y.isBeginning = y.progress <= 0, y.isEnd = y.progress >= 1), y.isBeginning && !n && y.emit("onReachBeginning", y), y.isEnd && !i && y.emit("onReachEnd", y), y.params.watchSlidesProgress && y.updateSlidesProgress(e), y.emit("onProgress", y, y.progress)
                }, y.updateActiveIndex = function () {
                    var e, t, n, i = y.rtl ? y.translate : -y.translate;
                    for (t = 0; t < y.slidesGrid.length; t++) "undefined" != typeof y.slidesGrid[t + 1] ? i >= y.slidesGrid[t] && i < y.slidesGrid[t + 1] - (y.slidesGrid[t + 1] - y.slidesGrid[t]) / 2 ? e = t : i >= y.slidesGrid[t] && i < y.slidesGrid[t + 1] && (e = t + 1) : i >= y.slidesGrid[t] && (e = t);
                    (0 > e || "undefined" == typeof e) && (e = 0), n = Math.floor(e / y.params.slidesPerGroup), n >= y.snapGrid.length && (n = y.snapGrid.length - 1), e !== y.activeIndex && (y.snapIndex = n, y.previousIndex = y.activeIndex, y.activeIndex = e, y.updateClasses())
                }, y.updateClasses = function () {
                    y.slides.removeClass(y.params.slideActiveClass + " " + y.params.slideNextClass + " " + y.params.slidePrevClass);
                    var e = y.slides.eq(y.activeIndex);
                    if (e.addClass(y.params.slideActiveClass), e.next("." + y.params.slideClass).addClass(y.params.slideNextClass), e.prev("." + y.params.slideClass).addClass(y.params.slidePrevClass), y.bullets && y.bullets.length > 0) {
                        y.bullets.removeClass(y.params.bulletActiveClass);
                        var n;
                        y.params.loop ? (n = Math.ceil(y.activeIndex - y.loopedSlides) / y.params.slidesPerGroup, n > y.slides.length - 1 - 2 * y.loopedSlides && (n -= y.slides.length - 2 * y.loopedSlides), n > y.bullets.length - 1 && (n -= y.bullets.length)) : n = "undefined" != typeof y.snapIndex ? y.snapIndex : y.activeIndex || 0, y.paginationContainer.length > 1 ? y.bullets.each(function () {
                            t(this).index() === n && t(this).addClass(y.params.bulletActiveClass)
                        }) : y.bullets.eq(n).addClass(y.params.bulletActiveClass)
                    }
                    y.params.loop || (y.params.prevButton && (y.isBeginning ? (t(y.params.prevButton).addClass(y.params.buttonDisabledClass), y.params.a11y && y.a11y && y.a11y.disable(t(y.params.prevButton))) : (t(y.params.prevButton).removeClass(y.params.buttonDisabledClass), y.params.a11y && y.a11y && y.a11y.enable(t(y.params.prevButton)))), y.params.nextButton && (y.isEnd ? (t(y.params.nextButton).addClass(y.params.buttonDisabledClass), y.params.a11y && y.a11y && y.a11y.disable(t(y.params.nextButton))) : (t(y.params.nextButton).removeClass(y.params.buttonDisabledClass), y.params.a11y && y.a11y && y.a11y.enable(t(y.params.nextButton)))))
                }, y.updatePagination = function () {
                    if (y.params.pagination && y.paginationContainer && y.paginationContainer.length > 0) {
                        for (var e = "", t = y.params.loop ? Math.ceil((y.slides.length - 2 * y.loopedSlides) / y.params.slidesPerGroup) : y.snapGrid.length, n = 0; t > n; n++) e += y.params.paginationBulletRender ? y.params.paginationBulletRender(n, y.params.bulletClass) : "<" + y.params.paginationElement + ' class="' + y.params.bulletClass + '"></' + y.params.paginationElement + ">";
                        y.paginationContainer.html(e), y.bullets = y.paginationContainer.find("." + y.params.bulletClass), y.params.paginationClickable && y.params.a11y && y.a11y && y.a11y.initPagination()
                    }
                }, y.update = function (e) {
                    function t() {
                        i = Math.min(Math.max(y.translate, y.maxTranslate()), y.minTranslate()), y.setWrapperTranslate(i), y.updateActiveIndex(), y.updateClasses()
                    }

                    if (y.updateContainerSize(), y.updateSlidesSize(), y.updateProgress(), y.updatePagination(), y.updateClasses(), y.params.scrollbar && y.scrollbar && y.scrollbar.set(), e) {
                        var n, i;
                        y.controller && y.controller.spline && (y.controller.spline = void 0), y.params.freeMode ? (t(), y.params.autoHeight && y.updateAutoHeight()) : (n = ("auto" === y.params.slidesPerView || y.params.slidesPerView > 1) && y.isEnd && !y.params.centeredSlides ? y.slideTo(y.slides.length - 1, 0, !1, !0) : y.slideTo(y.activeIndex, 0, !1, !0), n || t())
                    } else y.params.autoHeight && y.updateAutoHeight()
                }, y.onResize = function (e) {
                    y.params.breakpoints && y.setBreakpoint();
                    var t = y.params.allowSwipeToPrev, n = y.params.allowSwipeToNext;
                    if (y.params.allowSwipeToPrev = y.params.allowSwipeToNext = !0, y.updateContainerSize(), y.updateSlidesSize(), ("auto" === y.params.slidesPerView || y.params.freeMode || e) && y.updatePagination(), y.params.scrollbar && y.scrollbar && y.scrollbar.set(), y.controller && y.controller.spline && (y.controller.spline = void 0), y.params.freeMode) {
                        var i = Math.min(Math.max(y.translate, y.maxTranslate()), y.minTranslate());
                        y.setWrapperTranslate(i), y.updateActiveIndex(), y.updateClasses(), y.params.autoHeight && y.updateAutoHeight()
                    } else y.updateClasses(), ("auto" === y.params.slidesPerView || y.params.slidesPerView > 1) && y.isEnd && !y.params.centeredSlides ? y.slideTo(y.slides.length - 1, 0, !1, !0) : y.slideTo(y.activeIndex, 0, !1, !0);
                    y.params.allowSwipeToPrev = t, y.params.allowSwipeToNext = n
                };
                var E = ["mousedown", "mousemove", "mouseup"];
                window.navigator.pointerEnabled ? E = ["pointerdown", "pointermove", "pointerup"] : window.navigator.msPointerEnabled && (E = ["MSPointerDown", "MSPointerMove", "MSPointerUp"]), y.touchEvents = {
                    start: y.support.touch || !y.params.simulateTouch ? "touchstart" : E[0],
                    move: y.support.touch || !y.params.simulateTouch ? "touchmove" : E[1],
                    end: y.support.touch || !y.params.simulateTouch ? "touchend" : E[2]
                }, (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) && ("container" === y.params.touchEventsTarget ? y.container : y.wrapper).addClass("swiper-wp8-" + y.params.direction), y.initEvents = function (e) {
                    var n = e ? "off" : "on", i = e ? "removeEventListener" : "addEventListener",
                        a = "container" === y.params.touchEventsTarget ? y.container[0] : y.wrapper[0],
                        o = y.support.touch ? a : document, s = y.params.nested ? !0 : !1;
                    y.browser.ie ? (a[i](y.touchEvents.start, y.onTouchStart, !1), o[i](y.touchEvents.move, y.onTouchMove, s), o[i](y.touchEvents.end, y.onTouchEnd, !1)) : (y.support.touch && (a[i](y.touchEvents.start, y.onTouchStart, !1), a[i](y.touchEvents.move, y.onTouchMove, s), a[i](y.touchEvents.end, y.onTouchEnd, !1)), !r.simulateTouch || y.device.ios || y.device.android || (a[i]("mousedown", y.onTouchStart, !1), document[i]("mousemove", y.onTouchMove, s), document[i]("mouseup", y.onTouchEnd, !1))), window[i]("resize", y.onResize), y.params.nextButton && (t(y.params.nextButton)[n]("click", y.onClickNext), y.params.a11y && y.a11y && t(y.params.nextButton)[n]("keydown", y.a11y.onEnterKey)), y.params.prevButton && (t(y.params.prevButton)[n]("click", y.onClickPrev), y.params.a11y && y.a11y && t(y.params.prevButton)[n]("keydown", y.a11y.onEnterKey)), y.params.pagination && y.params.paginationClickable && (t(y.paginationContainer)[n]("click", "." + y.params.bulletClass, y.onClickIndex), y.params.a11y && y.a11y && t(y.paginationContainer)[n]("keydown", "." + y.params.bulletClass, y.a11y.onEnterKey)), (y.params.preventClicks || y.params.preventClicksPropagation) && a[i]("click", y.preventClicks, !0)
                }, y.attachEvents = function (e) {
                    y.initEvents()
                }, y.detachEvents = function () {
                    y.initEvents(!0)
                }, y.allowClick = !0, y.preventClicks = function (e) {
                    y.allowClick || (y.params.preventClicks && e.preventDefault(), y.params.preventClicksPropagation && y.animating && (e.stopPropagation(), e.stopImmediatePropagation()))
                }, y.onClickNext = function (e) {
                    e.preventDefault(), (!y.isEnd || y.params.loop) && y.slideNext()
                }, y.onClickPrev = function (e) {
                    e.preventDefault(), (!y.isBeginning || y.params.loop) && y.slidePrev()
                }, y.onClickIndex = function (e) {
                    e.preventDefault();
                    var n = t(this).index() * y.params.slidesPerGroup;
                    y.params.loop && (n += y.loopedSlides), y.slideTo(n)
                }, y.updateClickedSlide = function (e) {
                    var n = d(e, "." + y.params.slideClass), i = !1;
                    if (n) for (var r = 0; r < y.slides.length; r++) y.slides[r] === n && (i = !0);
                    if (!n || !i) return y.clickedSlide = void 0, void (y.clickedIndex = void 0);
                    if (y.clickedSlide = n, y.clickedIndex = t(n).index(), y.params.slideToClickedSlide && void 0 !== y.clickedIndex && y.clickedIndex !== y.activeIndex) {
                        var a, o = y.clickedIndex;
                        if (y.params.loop) {
                            if (y.animating) return;
                            a = t(y.clickedSlide).attr("data-swiper-slide-index"), y.params.centeredSlides ? o < y.loopedSlides - y.params.slidesPerView / 2 || o > y.slides.length - y.loopedSlides + y.params.slidesPerView / 2 ? (y.fixLoop(), o = y.wrapper.children("." + y.params.slideClass + '[data-swiper-slide-index="' + a + '"]:not(.swiper-slide-duplicate)').eq(0).index(), setTimeout(function () {
                                y.slideTo(o)
                            }, 0)) : y.slideTo(o) : o > y.slides.length - y.params.slidesPerView ? (y.fixLoop(), o = y.wrapper.children("." + y.params.slideClass + '[data-swiper-slide-index="' + a + '"]:not(.swiper-slide-duplicate)').eq(0).index(), setTimeout(function () {
                                y.slideTo(o)
                            }, 0)) : y.slideTo(o)
                        } else y.slideTo(o)
                    }
                };
                var x, D, M, L, C, P, I, k, N, z, O = "input, select, textarea, button", A = Date.now(), G = [];
                y.animating = !1, y.touches = {startX: 0, startY: 0, currentX: 0, currentY: 0, diff: 0};
                var V, R;
                if (y.onTouchStart = function (e) {
                    if (e.originalEvent && (e = e.originalEvent), V = "touchstart" === e.type, V || !("which" in e) || 3 !== e.which) {
                        if (y.params.noSwiping && d(e, "." + y.params.noSwipingClass)) return void (y.allowClick = !0);
                        if (!y.params.swipeHandler || d(e, y.params.swipeHandler)) {
                            var n = y.touches.currentX = "touchstart" === e.type ? e.targetTouches[0].pageX : e.pageX,
                                i = y.touches.currentY = "touchstart" === e.type ? e.targetTouches[0].pageY : e.pageY;
                            if (!(y.device.ios && y.params.iOSEdgeSwipeDetection && n <= y.params.iOSEdgeSwipeThreshold)) {
                                if (x = !0, D = !1, M = !0, C = void 0, R = void 0, y.touches.startX = n, y.touches.startY = i, L = Date.now(), y.allowClick = !0, y.updateContainerSize(), y.swipeDirection = void 0, y.params.threshold > 0 && (k = !1), "touchstart" !== e.type) {
                                    var r = !0;
                                    t(e.target).is(O) && (r = !1), document.activeElement && t(document.activeElement).is(O) && document.activeElement.blur(), r && e.preventDefault()
                                }
                                y.emit("onTouchStart", y, e)
                            }
                        }
                    }
                }, y.onTouchMove = function (e) {
                    if (e.originalEvent && (e = e.originalEvent), !(V && "mousemove" === e.type || e.preventedByNestedSwiper)) {
                        if (y.params.onlyExternal) return y.allowClick = !1, void (x && (y.touches.startX = y.touches.currentX = "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX, y.touches.startY = y.touches.currentY = "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY, L = Date.now()));
                        if (V && document.activeElement && e.target === document.activeElement && t(e.target).is(O)) return D = !0, void (y.allowClick = !1);
                        if (M && y.emit("onTouchMove", y, e), !(e.targetTouches && e.targetTouches.length > 1)) {
                            if (y.touches.currentX = "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX, y.touches.currentY = "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY, "undefined" == typeof C) {
                                var n = 180 * Math.atan2(Math.abs(y.touches.currentY - y.touches.startY), Math.abs(y.touches.currentX - y.touches.startX)) / Math.PI;
                                C = s() ? n > y.params.touchAngle : 90 - n > y.params.touchAngle
                            }
                            if (C && y.emit("onTouchMoveOpposite", y, e), "undefined" == typeof R && y.browser.ieTouch && (y.touches.currentX !== y.touches.startX || y.touches.currentY !== y.touches.startY) && (R = !0), x) {
                                if (C) return void (x = !1);
                                if (R || !y.browser.ieTouch) {
                                    y.allowClick = !1, y.emit("onSliderMove", y, e), e.preventDefault(), y.params.touchMoveStopPropagation && !y.params.nested && e.stopPropagation(), D || (r.loop && y.fixLoop(), I = y.getWrapperTranslate(), y.setWrapperTransition(0), y.animating && y.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"), y.params.autoplay && y.autoplaying && (y.params.autoplayDisableOnInteraction ? y.stopAutoplay() : y.pauseAutoplay()), z = !1, y.params.grabCursor && (y.container[0].style.cursor = "move", y.container[0].style.cursor = "-webkit-grabbing", y.container[0].style.cursor = "-moz-grabbin", y.container[0].style.cursor = "grabbing")), D = !0;
                                    var i = y.touches.diff = s() ? y.touches.currentX - y.touches.startX : y.touches.currentY - y.touches.startY;
                                    i *= y.params.touchRatio, y.rtl && (i = -i), y.swipeDirection = i > 0 ? "prev" : "next", P = i + I;
                                    var a = !0;
                                    if (i > 0 && P > y.minTranslate() ? (a = !1, y.params.resistance && (P = y.minTranslate() - 1 + Math.pow(-y.minTranslate() + I + i, y.params.resistanceRatio))) : 0 > i && P < y.maxTranslate() && (a = !1, y.params.resistance && (P = y.maxTranslate() + 1 - Math.pow(y.maxTranslate() - I - i, y.params.resistanceRatio))), a && (e.preventedByNestedSwiper = !0), !y.params.allowSwipeToNext && "next" === y.swipeDirection && I > P && (P = I), !y.params.allowSwipeToPrev && "prev" === y.swipeDirection && P > I && (P = I), y.params.followFinger) {
                                        if (y.params.threshold > 0) {
                                            if (!(Math.abs(i) > y.params.threshold || k)) return void (P = I);
                                            if (!k) return k = !0, y.touches.startX = y.touches.currentX, y.touches.startY = y.touches.currentY, P = I, void (y.touches.diff = s() ? y.touches.currentX - y.touches.startX : y.touches.currentY - y.touches.startY)
                                        }
                                        (y.params.freeMode || y.params.watchSlidesProgress) && y.updateActiveIndex(), y.params.freeMode && (0 === G.length && G.push({
                                            position: y.touches[s() ? "startX" : "startY"],
                                            time: L
                                        }), G.push({
                                            position: y.touches[s() ? "currentX" : "currentY"],
                                            time: (new window.Date).getTime()
                                        })), y.updateProgress(P), y.setWrapperTranslate(P)
                                    }
                                }
                            }
                        }
                    }
                }, y.onTouchEnd = function (e) {
                    if (e.originalEvent && (e = e.originalEvent), M && y.emit("onTouchEnd", y, e), M = !1, x) {
                        y.params.grabCursor && D && x && (y.container[0].style.cursor = "move", y.container[0].style.cursor = "-webkit-grab", y.container[0].style.cursor = "-moz-grab", y.container[0].style.cursor = "grab");
                        var n = Date.now(), i = n - L;
                        if (y.allowClick && (y.updateClickedSlide(e), y.emit("onTap", y, e), 300 > i && n - A > 300 && (N && clearTimeout(N), N = setTimeout(function () {
                            y && (y.params.paginationHide && y.paginationContainer.length > 0 && !t(e.target).hasClass(y.params.bulletClass) && y.paginationContainer.toggleClass(y.params.paginationHiddenClass), y.emit("onClick", y, e))
                        }, 300)), 300 > i && 300 > n - A && (N && clearTimeout(N), y.emit("onDoubleTap", y, e))), A = Date.now(), setTimeout(function () {
                            y && (y.allowClick = !0)
                        }, 0), !x || !D || !y.swipeDirection || 0 === y.touches.diff || P === I) return void (x = D = !1);
                        x = D = !1;
                        var r;
                        if (r = y.params.followFinger ? y.rtl ? y.translate : -y.translate : -P, y.params.freeMode) {
                            if (r < -y.minTranslate()) return void y.slideTo(y.activeIndex);
                            if (r > -y.maxTranslate()) return void (y.slides.length < y.snapGrid.length ? y.slideTo(y.snapGrid.length - 1) : y.slideTo(y.slides.length - 1));
                            if (y.params.freeModeMomentum) {
                                if (G.length > 1) {
                                    var a = G.pop(), o = G.pop(), s = a.position - o.position, l = a.time - o.time;
                                    y.velocity = s / l, y.velocity = y.velocity / 2, Math.abs(y.velocity) < y.params.freeModeMinimumVelocity && (y.velocity = 0), (l > 150 || (new window.Date).getTime() - a.time > 300) && (y.velocity = 0)
                                } else y.velocity = 0;
                                G.length = 0;
                                var c = 1e3 * y.params.freeModeMomentumRatio, d = y.velocity * c, u = y.translate + d;
                                y.rtl && (u = -u);
                                var p, h = !1, f = 20 * Math.abs(y.velocity) * y.params.freeModeMomentumBounceRatio;
                                if (u < y.maxTranslate()) y.params.freeModeMomentumBounce ? (u + y.maxTranslate() < -f && (u = y.maxTranslate() - f), p = y.maxTranslate(), h = !0, z = !0) : u = y.maxTranslate(); else if (u > y.minTranslate()) y.params.freeModeMomentumBounce ? (u - y.minTranslate() > f && (u = y.minTranslate() + f), p = y.minTranslate(), h = !0, z = !0) : u = y.minTranslate(); else if (y.params.freeModeSticky) {
                                    var m, g = 0;
                                    for (g = 0; g < y.snapGrid.length; g += 1) if (y.snapGrid[g] > -u) {
                                        m = g;
                                        break
                                    }
                                    u = Math.abs(y.snapGrid[m] - u) < Math.abs(y.snapGrid[m - 1] - u) || "next" === y.swipeDirection ? y.snapGrid[m] : y.snapGrid[m - 1], y.rtl || (u = -u)
                                }
                                if (0 !== y.velocity) c = y.rtl ? Math.abs((-u - y.translate) / y.velocity) : Math.abs((u - y.translate) / y.velocity); else if (y.params.freeModeSticky) return void y.slideReset();
                                y.params.freeModeMomentumBounce && h ? (y.updateProgress(p), y.setWrapperTransition(c), y.setWrapperTranslate(u), y.onTransitionStart(), y.animating = !0, y.wrapper.transitionEnd(function () {
                                    y && z && (y.emit("onMomentumBounce", y), y.setWrapperTransition(y.params.speed), y.setWrapperTranslate(p), y.wrapper.transitionEnd(function () {
                                        y && y.onTransitionEnd()
                                    }))
                                })) : y.velocity ? (y.updateProgress(u), y.setWrapperTransition(c), y.setWrapperTranslate(u), y.onTransitionStart(), y.animating || (y.animating = !0, y.wrapper.transitionEnd(function () {
                                    y && y.onTransitionEnd()
                                }))) : y.updateProgress(u), y.updateActiveIndex()
                            }
                            return void ((!y.params.freeModeMomentum || i >= y.params.longSwipesMs) && (y.updateProgress(), y.updateActiveIndex()))
                        }
                        var v, _ = 0, w = y.slidesSizesGrid[0];
                        for (v = 0; v < y.slidesGrid.length; v += y.params.slidesPerGroup) "undefined" != typeof y.slidesGrid[v + y.params.slidesPerGroup] ? r >= y.slidesGrid[v] && r < y.slidesGrid[v + y.params.slidesPerGroup] && (_ = v, w = y.slidesGrid[v + y.params.slidesPerGroup] - y.slidesGrid[v]) : r >= y.slidesGrid[v] && (_ = v, w = y.slidesGrid[y.slidesGrid.length - 1] - y.slidesGrid[y.slidesGrid.length - 2]);
                        var T = (r - y.slidesGrid[_]) / w;
                        if (i > y.params.longSwipesMs) {
                            if (!y.params.longSwipes) return void y.slideTo(y.activeIndex);
                            "next" === y.swipeDirection && (T >= y.params.longSwipesRatio ? y.slideTo(_ + y.params.slidesPerGroup) : y.slideTo(_)), "prev" === y.swipeDirection && (T > 1 - y.params.longSwipesRatio ? y.slideTo(_ + y.params.slidesPerGroup) : y.slideTo(_))
                        } else {
                            if (!y.params.shortSwipes) return void y.slideTo(y.activeIndex);
                            "next" === y.swipeDirection && y.slideTo(_ + y.params.slidesPerGroup), "prev" === y.swipeDirection && y.slideTo(_)
                        }
                    }
                }, y._slideTo = function (e, t) {
                    return y.slideTo(e, t, !0, !0)
                }, y.slideTo = function (e, t, n, i) {
                    "undefined" == typeof n && (n = !0), "undefined" == typeof e && (e = 0), 0 > e && (e = 0), y.snapIndex = Math.floor(e / y.params.slidesPerGroup), y.snapIndex >= y.snapGrid.length && (y.snapIndex = y.snapGrid.length - 1);
                    var r = -y.snapGrid[y.snapIndex];
                    y.params.autoplay && y.autoplaying && (i || !y.params.autoplayDisableOnInteraction ? y.pauseAutoplay(t) : y.stopAutoplay()), y.updateProgress(r);
                    for (var a = 0; a < y.slidesGrid.length; a++) -Math.floor(100 * r) >= Math.floor(100 * y.slidesGrid[a]) && (e = a);
                    return !y.params.allowSwipeToNext && r < y.translate && r < y.minTranslate() ? !1 : !y.params.allowSwipeToPrev && r > y.translate && r > y.maxTranslate() && (y.activeIndex || 0) !== e ? !1 : ("undefined" == typeof t && (t = y.params.speed), y.previousIndex = y.activeIndex || 0, y.activeIndex = e, y.rtl && -r === y.translate || !y.rtl && r === y.translate ? (y.params.autoHeight && y.updateAutoHeight(), y.updateClasses(), "slide" !== y.params.effect && y.setWrapperTranslate(r), !1) : (y.updateClasses(), y.onTransitionStart(n), 0 === t ? (y.setWrapperTranslate(r), y.setWrapperTransition(0), y.onTransitionEnd(n)) : (y.setWrapperTranslate(r), y.setWrapperTransition(t), y.animating || (y.animating = !0, y.wrapper.transitionEnd(function () {
                        y && y.onTransitionEnd(n)
                    }))), !0))
                }, y.onTransitionStart = function (e) {
                    "undefined" == typeof e && (e = !0), y.params.autoHeight && y.updateAutoHeight(), y.lazy && y.lazy.onTransitionStart(), e && (y.emit("onTransitionStart", y), y.activeIndex !== y.previousIndex && (y.emit("onSlideChangeStart", y), a.$emit("$ionicSlides.slideChangeStart", {
                        slider: y,
                        activeIndex: y.getSlideDataIndex(y.activeIndex),
                        previousIndex: y.getSlideDataIndex(y.previousIndex)
                    }), y.activeIndex > y.previousIndex ? y.emit("onSlideNextStart", y) : y.emit("onSlidePrevStart", y)))
                }, y.onTransitionEnd = function (e) {
                    y.animating = !1, y.setWrapperTransition(0), "undefined" == typeof e && (e = !0), y.lazy && y.lazy.onTransitionEnd(), e && (y.emit("onTransitionEnd", y), y.activeIndex !== y.previousIndex && (y.emit("onSlideChangeEnd", y), a.$emit("$ionicSlides.slideChangeEnd", {
                        slider: y,
                        activeIndex: y.getSlideDataIndex(y.activeIndex),
                        previousIndex: y.getSlideDataIndex(y.previousIndex)
                    }), y.activeIndex > y.previousIndex ? y.emit("onSlideNextEnd", y) : y.emit("onSlidePrevEnd", y))), y.params.hashnav && y.hashnav && y.hashnav.setHash()
                }, y.slideNext = function (e, t, n) {
                    if (y.params.loop) {
                        if (y.animating) return !1;
                        y.fixLoop();
                        y.container[0].clientLeft;
                        return y.slideTo(y.activeIndex + y.params.slidesPerGroup, t, e, n)
                    }
                    return y.slideTo(y.activeIndex + y.params.slidesPerGroup, t, e, n)
                }, y._slideNext = function (e) {
                    return y.slideNext(!0, e, !0)
                }, y.slidePrev = function (e, t, n) {
                    if (y.params.loop) {
                        if (y.animating) return !1;
                        y.fixLoop();
                        y.container[0].clientLeft;
                        return y.slideTo(y.activeIndex - 1, t, e, n)
                    }
                    return y.slideTo(y.activeIndex - 1, t, e, n)
                }, y._slidePrev = function (e) {
                    return y.slidePrev(!0, e, !0)
                }, y.slideReset = function (e, t, n) {
                    return y.slideTo(y.activeIndex, t, e)
                }, y.setWrapperTransition = function (e, t) {
                    y.wrapper.transition(e), "slide" !== y.params.effect && y.effects[y.params.effect] && y.effects[y.params.effect].setTransition(e), y.params.parallax && y.parallax && y.parallax.setTransition(e), y.params.scrollbar && y.scrollbar && y.scrollbar.setTransition(e), y.params.control && y.controller && y.controller.setTransition(e, t), y.emit("onSetTransition", y, e)
                }, y.setWrapperTranslate = function (e, t, n) {
                    var i = 0, r = 0, a = 0;
                    s() ? i = y.rtl ? -e : e : r = e, y.params.roundLengths && (i = l(i),
                        r = l(r)), y.params.virtualTranslate || (y.support.transforms3d ? y.wrapper.transform("translate3d(" + i + "px, " + r + "px, " + a + "px)") : y.wrapper.transform("translate(" + i + "px, " + r + "px)")), y.translate = s() ? i : r;
                    var o, c = y.maxTranslate() - y.minTranslate();
                    o = 0 === c ? 0 : (e - y.minTranslate()) / c, o !== y.progress && y.updateProgress(e), t && y.updateActiveIndex(), "slide" !== y.params.effect && y.effects[y.params.effect] && y.effects[y.params.effect].setTranslate(y.translate), y.params.parallax && y.parallax && y.parallax.setTranslate(y.translate), y.params.scrollbar && y.scrollbar && y.scrollbar.setTranslate(y.translate), y.params.control && y.controller && y.controller.setTranslate(y.translate, n), y.emit("onSetTranslate", y, y.translate)
                }, y.getTranslate = function (e, t) {
                    var n, i, r, a;
                    return "undefined" == typeof t && (t = "x"), y.params.virtualTranslate ? y.rtl ? -y.translate : y.translate : (r = window.getComputedStyle(e, null), window.WebKitCSSMatrix ? (i = r.transform || r.webkitTransform, i.split(",").length > 6 && (i = i.split(", ").map(function (e) {
                        return e.replace(",", ".")
                    }).join(", ")), a = new window.WebKitCSSMatrix("none" === i ? "" : i)) : (a = r.MozTransform || r.OTransform || r.MsTransform || r.msTransform || r.transform || r.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,"), n = a.toString().split(",")), "x" === t && (i = window.WebKitCSSMatrix ? a.m41 : 16 === n.length ? parseFloat(n[12]) : parseFloat(n[4])), "y" === t && (i = window.WebKitCSSMatrix ? a.m42 : 16 === n.length ? parseFloat(n[13]) : parseFloat(n[5])), y.rtl && i && (i = -i), i || 0)
                }, y.getWrapperTranslate = function (e) {
                    return "undefined" == typeof e && (e = s() ? "x" : "y"), y.getTranslate(y.wrapper[0], e)
                }, y.observers = [], y.initObservers = function () {
                    if (y.params.observeParents) for (var e = y.container.parents(), t = 0; t < e.length; t++) u(e[t]);
                    u(y.container[0], {childList: !1}), u(y.wrapper[0], {attributes: !1})
                }, y.disconnectObservers = function () {
                    for (var e = 0; e < y.observers.length; e++) y.observers[e].disconnect();
                    y.observers = []
                }, y.updateLoop = function () {
                    var e = y.slides.eq(y.activeIndex);
                    if (angular.element(e).hasClass(y.params.slideDuplicateClass)) {
                        for (var t = angular.element(e).attr("data-swiper-slide-index"), n = y.wrapper.children("." + y.params.slideClass), i = 0; i < n.length; i++) if (!angular.element(n[i]).hasClass(y.params.slideDuplicateClass) && angular.element(n[i]).attr("data-swiper-slide-index") === t) {
                            y.slideTo(i, 0, !1, !0);
                            break
                        }
                        setTimeout(function () {
                            y.createLoop()
                        }, 50)
                    }
                }, y.getSlideDataIndex = function (e) {
                    var t = y.slides.eq(e), n = angular.element(t).attr("data-swiper-slide-index");
                    return parseInt(n)
                }, y.createLoop = function () {
                    y.wrapper.children("." + y.params.slideClass + "." + y.params.slideDuplicateClass).remove();
                    var e = y.wrapper.children("." + y.params.slideClass);
                    "auto" !== y.params.slidesPerView || y.params.loopedSlides || (y.params.loopedSlides = e.length), y.loopedSlides = parseInt(y.params.loopedSlides || y.params.slidesPerView, 10), y.loopedSlides = y.loopedSlides + y.params.loopAdditionalSlides, y.loopedSlides > e.length && (y.loopedSlides = e.length);
                    var n, i, r, a = [], s = [];
                    for (e.each(function (n, i) {
                        var r = t(this);
                        n < y.loopedSlides && s.push(i), n < e.length && n >= e.length - y.loopedSlides && a.push(i), r.attr("data-swiper-slide-index", n)
                    }), n = 0; n < s.length; n++) r = angular.element(s[n]).clone().addClass(y.params.slideDuplicateClass), r.removeAttr("ng-transclude"), r.removeAttr("ng-repeat"), i = angular.element(s[n]).scope(), r = o(r)(i), angular.element(y.wrapper).append(r);
                    for (n = a.length - 1; n >= 0; n--) r = angular.element(a[n]).clone().addClass(y.params.slideDuplicateClass), r.removeAttr("ng-transclude"), r.removeAttr("ng-repeat"), i = angular.element(a[n]).scope(), r = o(r)(i), angular.element(y.wrapper).prepend(r)
                }, y.destroyLoop = function () {
                    y.wrapper.children("." + y.params.slideClass + "." + y.params.slideDuplicateClass).remove(), y.slides.removeAttr("data-swiper-slide-index")
                }, y.fixLoop = function () {
                    var e;
                    y.activeIndex < y.loopedSlides ? (e = y.slides.length - 3 * y.loopedSlides + y.activeIndex, e += y.loopedSlides, y.slideTo(e, 0, !1, !0)) : ("auto" === y.params.slidesPerView && y.activeIndex >= 2 * y.loopedSlides || y.activeIndex > y.slides.length - 2 * y.params.slidesPerView) && (e = -y.slides.length + y.activeIndex + y.loopedSlides, e += y.loopedSlides, y.slideTo(e, 0, !1, !0))
                }, y.appendSlide = function (e) {
                    if (y.params.loop && y.destroyLoop(), "object" == typeof e && e.length) for (var t = 0; t < e.length; t++) e[t] && y.wrapper.append(e[t]); else y.wrapper.append(e);
                    y.params.loop && y.createLoop(), y.params.observer && y.support.observer || y.update(!0)
                }, y.prependSlide = function (e) {
                    y.params.loop && y.destroyLoop();
                    var t = y.activeIndex + 1;
                    if ("object" == typeof e && e.length) {
                        for (var n = 0; n < e.length; n++) e[n] && y.wrapper.prepend(e[n]);
                        t = y.activeIndex + e.length
                    } else y.wrapper.prepend(e);
                    y.params.loop && y.createLoop(), y.params.observer && y.support.observer || y.update(!0), y.slideTo(t, 0, !1)
                }, y.removeSlide = function (e) {
                    y.params.loop && (y.destroyLoop(), y.slides = y.wrapper.children("." + y.params.slideClass));
                    var t, n = y.activeIndex;
                    if ("object" == typeof e && e.length) {
                        for (var i = 0; i < e.length; i++) t = e[i], y.slides[t] && y.slides.eq(t).remove(), n > t && n--;
                        n = Math.max(n, 0)
                    } else t = e, y.slides[t] && y.slides.eq(t).remove(), n > t && n--, n = Math.max(n, 0);
                    y.params.loop && y.createLoop(), y.params.observer && y.support.observer || y.update(!0), y.params.loop ? y.slideTo(n + y.loopedSlides, 0, !1) : y.slideTo(n, 0, !1)
                }, y.removeAllSlides = function () {
                    for (var e = [], t = 0; t < y.slides.length; t++) e.push(t);
                    y.removeSlide(e)
                }, y.effects = {
                    fade: {
                        setTranslate: function () {
                            for (var e = 0; e < y.slides.length; e++) {
                                var t = y.slides.eq(e), n = t[0].swiperSlideOffset, i = -n;
                                y.params.virtualTranslate || (i -= y.translate);
                                var r = 0;
                                s() || (r = i, i = 0);
                                var a = y.params.fade.crossFade ? Math.max(1 - Math.abs(t[0].progress), 0) : 1 + Math.min(Math.max(t[0].progress, -1), 0);
                                t.css({opacity: a}).transform("translate3d(" + i + "px, " + r + "px, 0px)")
                            }
                        }, setTransition: function (e) {
                            if (y.slides.transition(e), y.params.virtualTranslate && 0 !== e) {
                                var t = !1;
                                y.slides.transitionEnd(function () {
                                    if (!t && y) {
                                        t = !0, y.animating = !1;
                                        for (var e = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"], n = 0; n < e.length; n++) y.wrapper.trigger(e[n])
                                    }
                                })
                            }
                        }
                    }, cube: {
                        setTranslate: function () {
                            var e, n = 0;
                            y.params.cube.shadow && (s() ? (e = y.wrapper.find(".swiper-cube-shadow"), 0 === e.length && (e = t('<div class="swiper-cube-shadow"></div>'), y.wrapper.append(e)), e.css({height: y.width + "px"})) : (e = y.container.find(".swiper-cube-shadow"), 0 === e.length && (e = t('<div class="swiper-cube-shadow"></div>'), y.container.append(e))));
                            for (var i = 0; i < y.slides.length; i++) {
                                var r = y.slides.eq(i), a = 90 * i, o = Math.floor(a / 360);
                                y.rtl && (a = -a, o = Math.floor(-a / 360));
                                var l = Math.max(Math.min(r[0].progress, 1), -1), c = 0, d = 0, u = 0;
                                i % 4 === 0 ? (c = 4 * -o * y.size, u = 0) : (i - 1) % 4 === 0 ? (c = 0, u = 4 * -o * y.size) : (i - 2) % 4 === 0 ? (c = y.size + 4 * o * y.size, u = y.size) : (i - 3) % 4 === 0 && (c = -y.size, u = 3 * y.size + 4 * y.size * o), y.rtl && (c = -c), s() || (d = c, c = 0);
                                var p = "rotateX(" + (s() ? 0 : -a) + "deg) rotateY(" + (s() ? a : 0) + "deg) translate3d(" + c + "px, " + d + "px, " + u + "px)";
                                if (1 >= l && l > -1 && (n = 90 * i + 90 * l, y.rtl && (n = 90 * -i - 90 * l)), r.transform(p), y.params.cube.slideShadows) {
                                    var h = s() ? r.find(".swiper-slide-shadow-left") : r.find(".swiper-slide-shadow-top"),
                                        f = s() ? r.find(".swiper-slide-shadow-right") : r.find(".swiper-slide-shadow-bottom");
                                    0 === h.length && (h = t('<div class="swiper-slide-shadow-' + (s() ? "left" : "top") + '"></div>'), r.append(h)), 0 === f.length && (f = t('<div class="swiper-slide-shadow-' + (s() ? "right" : "bottom") + '"></div>'), r.append(f));
                                    r[0].progress;
                                    h.length && (h[0].style.opacity = -r[0].progress), f.length && (f[0].style.opacity = r[0].progress)
                                }
                            }
                            if (y.wrapper.css({
                                "-webkit-transform-origin": "50% 50% -" + y.size / 2 + "px",
                                "-moz-transform-origin": "50% 50% -" + y.size / 2 + "px",
                                "-ms-transform-origin": "50% 50% -" + y.size / 2 + "px",
                                "transform-origin": "50% 50% -" + y.size / 2 + "px"
                            }), y.params.cube.shadow) if (s()) e.transform("translate3d(0px, " + (y.width / 2 + y.params.cube.shadowOffset) + "px, " + -y.width / 2 + "px) rotateX(90deg) rotateZ(0deg) scale(" + y.params.cube.shadowScale + ")"); else {
                                var m = Math.abs(n) - 90 * Math.floor(Math.abs(n) / 90),
                                    g = 1.5 - (Math.sin(2 * m * Math.PI / 360) / 2 + Math.cos(2 * m * Math.PI / 360) / 2),
                                    v = y.params.cube.shadowScale, _ = y.params.cube.shadowScale / g,
                                    w = y.params.cube.shadowOffset;
                                e.transform("scale3d(" + v + ", 1, " + _ + ") translate3d(0px, " + (y.height / 2 + w) + "px, " + -y.height / 2 / _ + "px) rotateX(-90deg)")
                            }
                            var T = y.isSafari || y.isUiWebView ? -y.size / 2 : 0;
                            y.wrapper.transform("translate3d(0px,0," + T + "px) rotateX(" + (s() ? 0 : n) + "deg) rotateY(" + (s() ? -n : 0) + "deg)")
                        }, setTransition: function (e) {
                            y.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e), y.params.cube.shadow && !s() && y.container.find(".swiper-cube-shadow").transition(e)
                        }
                    }, coverflow: {
                        setTranslate: function () {
                            for (var e = y.translate, n = s() ? -e + y.width / 2 : -e + y.height / 2, i = s() ? y.params.coverflow.rotate : -y.params.coverflow.rotate, r = y.params.coverflow.depth, a = 0, o = y.slides.length; o > a; a++) {
                                var l = y.slides.eq(a), c = y.slidesSizesGrid[a], d = l[0].swiperSlideOffset,
                                    u = (n - d - c / 2) / c * y.params.coverflow.modifier, p = s() ? i * u : 0,
                                    h = s() ? 0 : i * u, f = -r * Math.abs(u),
                                    m = s() ? 0 : y.params.coverflow.stretch * u,
                                    g = s() ? y.params.coverflow.stretch * u : 0;
                                Math.abs(g) < .001 && (g = 0), Math.abs(m) < .001 && (m = 0), Math.abs(f) < .001 && (f = 0), Math.abs(p) < .001 && (p = 0), Math.abs(h) < .001 && (h = 0);
                                var v = "translate3d(" + g + "px," + m + "px," + f + "px)  rotateX(" + h + "deg) rotateY(" + p + "deg)";
                                if (l.transform(v), l[0].style.zIndex = -Math.abs(Math.round(u)) + 1, y.params.coverflow.slideShadows) {
                                    var _ = s() ? l.find(".swiper-slide-shadow-left") : l.find(".swiper-slide-shadow-top"),
                                        w = s() ? l.find(".swiper-slide-shadow-right") : l.find(".swiper-slide-shadow-bottom");
                                    0 === _.length && (_ = t('<div class="swiper-slide-shadow-' + (s() ? "left" : "top") + '"></div>'), l.append(_)), 0 === w.length && (w = t('<div class="swiper-slide-shadow-' + (s() ? "right" : "bottom") + '"></div>'), l.append(w)), _.length && (_[0].style.opacity = u > 0 ? u : 0), w.length && (w[0].style.opacity = -u > 0 ? -u : 0)
                                }
                            }
                            if (y.browser.ie) {
                                var T = y.wrapper[0].style;
                                T.perspectiveOrigin = n + "px 50%"
                            }
                        }, setTransition: function (e) {
                            y.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)
                        }
                    }
                }, y.lazy = {
                    initialImageLoaded: !1, loadImageInSlide: function (e, n) {
                        if ("undefined" != typeof e && ("undefined" == typeof n && (n = !0), 0 !== y.slides.length)) {
                            var i = y.slides.eq(e),
                                r = i.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");
                            !i.hasClass("swiper-lazy") || i.hasClass("swiper-lazy-loaded") || i.hasClass("swiper-lazy-loading") || (r = r.add(i[0])), 0 !== r.length && r.each(function () {
                                var e = t(this);
                                e.addClass("swiper-lazy-loading");
                                var r = e.attr("data-background"), a = e.attr("data-src"), o = e.attr("data-srcset");
                                y.loadImage(e[0], a || r, o, !1, function () {
                                    if (r ? (e.css("background-image", "url(" + r + ")"), e.removeAttr("data-background")) : (o && (e.attr("srcset", o), e.removeAttr("data-srcset")), a && (e.attr("src", a), e.removeAttr("data-src"))), e.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"), i.find(".swiper-lazy-preloader, .preloader").remove(), y.params.loop && n) {
                                        var t = i.attr("data-swiper-slide-index");
                                        if (i.hasClass(y.params.slideDuplicateClass)) {
                                            var s = y.wrapper.children('[data-swiper-slide-index="' + t + '"]:not(.' + y.params.slideDuplicateClass + ")");
                                            y.lazy.loadImageInSlide(s.index(), !1)
                                        } else {
                                            var l = y.wrapper.children("." + y.params.slideDuplicateClass + '[data-swiper-slide-index="' + t + '"]');
                                            y.lazy.loadImageInSlide(l.index(), !1)
                                        }
                                    }
                                    y.emit("onLazyImageReady", y, i[0], e[0])
                                }), y.emit("onLazyImageLoad", y, i[0], e[0])
                            })
                        }
                    }, load: function () {
                        var e;
                        if (y.params.watchSlidesVisibility) y.wrapper.children("." + y.params.slideVisibleClass).each(function () {
                            y.lazy.loadImageInSlide(t(this).index())
                        }); else if (y.params.slidesPerView > 1) for (e = y.activeIndex; e < y.activeIndex + y.params.slidesPerView; e++) y.slides[e] && y.lazy.loadImageInSlide(e); else y.lazy.loadImageInSlide(y.activeIndex);
                        if (y.params.lazyLoadingInPrevNext) if (y.params.slidesPerView > 1) {
                            for (e = y.activeIndex + y.params.slidesPerView; e < y.activeIndex + y.params.slidesPerView + y.params.slidesPerView; e++) y.slides[e] && y.lazy.loadImageInSlide(e);
                            for (e = y.activeIndex - y.params.slidesPerView; e < y.activeIndex; e++) y.slides[e] && y.lazy.loadImageInSlide(e)
                        } else {
                            var n = y.wrapper.children("." + y.params.slideNextClass);
                            n.length > 0 && y.lazy.loadImageInSlide(n.index());
                            var i = y.wrapper.children("." + y.params.slidePrevClass);
                            i.length > 0 && y.lazy.loadImageInSlide(i.index())
                        }
                    }, onTransitionStart: function () {
                        y.params.lazyLoading && (y.params.lazyLoadingOnTransitionStart || !y.params.lazyLoadingOnTransitionStart && !y.lazy.initialImageLoaded) && y.lazy.load()
                    }, onTransitionEnd: function () {
                        y.params.lazyLoading && !y.params.lazyLoadingOnTransitionStart && y.lazy.load()
                    }
                }, y.scrollbar = {
                    isTouched: !1, setDragPosition: function (e) {
                        var t = y.scrollbar,
                            n = s() ? "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX || e.clientX : "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY || e.clientY,
                            i = n - t.track.offset()[s() ? "left" : "top"] - t.dragSize / 2,
                            r = -y.minTranslate() * t.moveDivider, a = -y.maxTranslate() * t.moveDivider;
                        r > i ? i = r : i > a && (i = a), i = -i / t.moveDivider, y.updateProgress(i), y.setWrapperTranslate(i, !0)
                    }, dragStart: function (e) {
                        var t = y.scrollbar;
                        t.isTouched = !0, e.preventDefault(), e.stopPropagation(), t.setDragPosition(e), clearTimeout(t.dragTimeout), t.track.transition(0), y.params.scrollbarHide && t.track.css("opacity", 1), y.wrapper.transition(100), t.drag.transition(100), y.emit("onScrollbarDragStart", y)
                    }, dragMove: function (e) {
                        var t = y.scrollbar;
                        t.isTouched && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, t.setDragPosition(e), y.wrapper.transition(0), t.track.transition(0), t.drag.transition(0), y.emit("onScrollbarDragMove", y))
                    }, dragEnd: function (e) {
                        var t = y.scrollbar;
                        t.isTouched && (t.isTouched = !1, y.params.scrollbarHide && (clearTimeout(t.dragTimeout), t.dragTimeout = setTimeout(function () {
                            t.track.css("opacity", 0), t.track.transition(400)
                        }, 1e3)), y.emit("onScrollbarDragEnd", y), y.params.scrollbarSnapOnRelease && y.slideReset())
                    }, enableDraggable: function () {
                        var e = y.scrollbar, n = y.support.touch ? e.track : document;
                        t(e.track).on(y.touchEvents.start, e.dragStart), t(n).on(y.touchEvents.move, e.dragMove), t(n).on(y.touchEvents.end, e.dragEnd)
                    }, disableDraggable: function () {
                        var e = y.scrollbar, n = y.support.touch ? e.track : document;
                        t(e.track).off(y.touchEvents.start, e.dragStart), t(n).off(y.touchEvents.move, e.dragMove), t(n).off(y.touchEvents.end, e.dragEnd)
                    }, set: function () {
                        if (y.params.scrollbar) {
                            var e = y.scrollbar;
                            e.track = t(y.params.scrollbar), e.drag = e.track.find(".swiper-scrollbar-drag"), 0 === e.drag.length && (e.drag = t('<div class="swiper-scrollbar-drag"></div>'), e.track.append(e.drag)), e.drag[0].style.width = "", e.drag[0].style.height = "", e.trackSize = s() ? e.track[0].offsetWidth : e.track[0].offsetHeight, e.divider = y.size / y.virtualSize, e.moveDivider = e.divider * (e.trackSize / y.size), e.dragSize = e.trackSize * e.divider, s() ? e.drag[0].style.width = e.dragSize + "px" : e.drag[0].style.height = e.dragSize + "px", e.divider >= 1 ? e.track[0].style.display = "none" : e.track[0].style.display = "", y.params.scrollbarHide && (e.track[0].style.opacity = 0)
                        }
                    }, setTranslate: function () {
                        if (y.params.scrollbar) {
                            var e, t = y.scrollbar, n = (y.translate || 0, t.dragSize);
                            e = (t.trackSize - t.dragSize) * y.progress, y.rtl && s() ? (e = -e, e > 0 ? (n = t.dragSize - e, e = 0) : -e + t.dragSize > t.trackSize && (n = t.trackSize + e)) : 0 > e ? (n = t.dragSize + e, e = 0) : e + t.dragSize > t.trackSize && (n = t.trackSize - e), s() ? (y.support.transforms3d ? t.drag.transform("translate3d(" + e + "px, 0, 0)") : t.drag.transform("translateX(" + e + "px)"), t.drag[0].style.width = n + "px") : (y.support.transforms3d ? t.drag.transform("translate3d(0px, " + e + "px, 0)") : t.drag.transform("translateY(" + e + "px)"), t.drag[0].style.height = n + "px"), y.params.scrollbarHide && (clearTimeout(t.timeout), t.track[0].style.opacity = 1, t.timeout = setTimeout(function () {
                                t.track[0].style.opacity = 0, t.track.transition(400)
                            }, 1e3))
                        }
                    }, setTransition: function (e) {
                        y.params.scrollbar && y.scrollbar.drag.transition(e)
                    }
                }, y.controller = {
                    LinearSpline: function (e, t) {
                        this.x = e, this.y = t, this.lastIndex = e.length - 1;
                        var n, i;
                        this.x.length;
                        this.interpolate = function (e) {
                            return e ? (i = r(this.x, e), n = i - 1, (e - this.x[n]) * (this.y[i] - this.y[n]) / (this.x[i] - this.x[n]) + this.y[n]) : 0
                        };
                        var r = function () {
                            var e, t, n;
                            return function (i, r) {
                                for (t = -1, e = i.length; e - t > 1;) i[n = e + t >> 1] <= r ? t = n : e = n;
                                return e
                            }
                        }()
                    }, getInterpolateFunction: function (e) {
                        y.controller.spline || (y.controller.spline = y.params.loop ? new y.controller.LinearSpline(y.slidesGrid, e.slidesGrid) : new y.controller.LinearSpline(y.snapGrid, e.snapGrid))
                    }, setTranslate: function (e, t) {
                        function i(t) {
                            e = t.rtl && "horizontal" === t.params.direction ? -y.translate : y.translate, "slide" === y.params.controlBy && (y.controller.getInterpolateFunction(t), a = -y.controller.spline.interpolate(-e)), a && "container" !== y.params.controlBy || (r = (t.maxTranslate() - t.minTranslate()) / (y.maxTranslate() - y.minTranslate()), a = (e - y.minTranslate()) * r + t.minTranslate()), y.params.controlInverse && (a = t.maxTranslate() - a), t.updateProgress(a), t.setWrapperTranslate(a, !1, y), t.updateActiveIndex()
                        }

                        var r, a, o = y.params.control;
                        if (y.isArray(o)) for (var s = 0; s < o.length; s++) o[s] !== t && o[s] instanceof n && i(o[s]); else o instanceof n && t !== o && i(o)
                    }, setTransition: function (e, t) {
                        function i(t) {
                            t.setWrapperTransition(e, y), 0 !== e && (t.onTransitionStart(), t.wrapper.transitionEnd(function () {
                                a && (t.params.loop && "slide" === y.params.controlBy && t.fixLoop(), t.onTransitionEnd())
                            }))
                        }

                        var r, a = y.params.control;
                        if (y.isArray(a)) for (r = 0; r < a.length; r++) a[r] !== t && a[r] instanceof n && i(a[r]); else a instanceof n && t !== a && i(a)
                    }
                }, y.hashnav = {
                    init: function () {
                        if (y.params.hashnav) {
                            y.hashnav.initialized = !0;
                            var e = document.location.hash.replace("#", "");
                            if (e) for (var t = 0, n = 0, i = y.slides.length; i > n; n++) {
                                var r = y.slides.eq(n), a = r.attr("data-hash");
                                if (a === e && !r.hasClass(y.params.slideDuplicateClass)) {
                                    var o = r.index();
                                    y.slideTo(o, t, y.params.runCallbacksOnInit, !0)
                                }
                            }
                        }
                    }, setHash: function () {
                        y.hashnav.initialized && y.params.hashnav && (document.location.hash = y.slides.eq(y.activeIndex).attr("data-hash") || "")
                    }
                }, y.disableKeyboardControl = function () {
                    y.params.keyboardControl = !1, t(document).off("keydown", p)
                }, y.enableKeyboardControl = function () {
                    y.params.keyboardControl = !0, t(document).on("keydown", p)
                }, y.mousewheel = {
                    event: !1,
                    lastScrollTime: (new window.Date).getTime()
                }, y.params.mousewheelControl) {
                    try {
                        new window.WheelEvent("wheel"), y.mousewheel.event = "wheel"
                    } catch (H) {
                    }
                    y.mousewheel.event || void 0 === document.onmousewheel || (y.mousewheel.event = "mousewheel"), y.mousewheel.event || (y.mousewheel.event = "DOMMouseScroll")
                }
                y.disableMousewheelControl = function () {
                    return y.mousewheel.event ? (y.container.off(y.mousewheel.event, h), !0) : !1
                }, y.enableMousewheelControl = function () {
                    return y.mousewheel.event ? (y.container.on(y.mousewheel.event, h), !0) : !1
                }, y.parallax = {
                    setTranslate: function () {
                        y.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function () {
                            f(this, y.progress)
                        }), y.slides.each(function () {
                            var e = t(this);
                            e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function () {
                                var t = Math.min(Math.max(e[0].progress, -1), 1);
                                f(this, t)
                            })
                        })
                    }, setTransition: function (e) {
                        "undefined" == typeof e && (e = y.params.speed), y.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function () {
                            var n = t(this), i = parseInt(n.attr("data-swiper-parallax-duration"), 10) || e;
                            0 === e && (i = 0), n.transition(i)
                        })
                    }
                }, y._plugins = [];
                for (var Y in y.plugins) {
                    var X = y.plugins[Y](y, y.params[Y]);
                    X && y._plugins.push(X)
                }
                return y.callPlugins = function (e) {
                    for (var t = 0; t < y._plugins.length; t++) e in y._plugins[t] && y._plugins[t][e](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
                }, y.emitterEventListeners = {}, y.emit = function (e) {
                    y.params[e] && y.params[e](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
                    var t;
                    if (y.emitterEventListeners[e]) for (t = 0; t < y.emitterEventListeners[e].length; t++) y.emitterEventListeners[e][t](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
                    y.callPlugins && y.callPlugins(e, arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])
                }, y.on = function (e, t) {
                    return e = m(e), y.emitterEventListeners[e] || (y.emitterEventListeners[e] = []), y.emitterEventListeners[e].push(t), y
                }, y.off = function (e, t) {
                    var n;
                    if (e = m(e), "undefined" == typeof t) return y.emitterEventListeners[e] = [], y;
                    if (y.emitterEventListeners[e] && 0 !== y.emitterEventListeners[e].length) {
                        for (n = 0; n < y.emitterEventListeners[e].length; n++) y.emitterEventListeners[e][n] === t && y.emitterEventListeners[e].splice(n, 1);
                        return y
                    }
                }, y.once = function (e, t) {
                    e = m(e);
                    var n = function () {
                        t(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]), y.off(e, n)
                    };
                    return y.on(e, n), y
                }, y.a11y = {
                    makeFocusable: function (e) {
                        return e.attr("tabIndex", "0"), e
                    },
                    addRole: function (e, t) {
                        return e.attr("role", t), e
                    },
                    addLabel: function (e, t) {
                        return e.attr("aria-label", t), e
                    },
                    disable: function (e) {
                        return e.attr("aria-disabled", !0), e
                    },
                    enable: function (e) {
                        return e.attr("aria-disabled", !1), e
                    },
                    onEnterKey: function (e) {
                        13 === e.keyCode && (t(e.target).is(y.params.nextButton) ? (y.onClickNext(e), y.isEnd ? y.a11y.notify(y.params.lastSlideMessage) : y.a11y.notify(y.params.nextSlideMessage)) : t(e.target).is(y.params.prevButton) && (y.onClickPrev(e), y.isBeginning ? y.a11y.notify(y.params.firstSlideMessage) : y.a11y.notify(y.params.prevSlideMessage)), t(e.target).is("." + y.params.bulletClass) && t(e.target)[0].click())
                    },
                    liveRegion: t('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),
                    notify: function (e) {
                        var t = y.a11y.liveRegion;
                        0 !== t.length && (t.html(""), t.html(e))
                    },
                    init: function () {
                        if (y.params.nextButton) {
                            var e = t(y.params.nextButton);
                            y.a11y.makeFocusable(e), y.a11y.addRole(e, "button"), y.a11y.addLabel(e, y.params.nextSlideMessage)
                        }
                        if (y.params.prevButton) {
                            var n = t(y.params.prevButton);
                            y.a11y.makeFocusable(n), y.a11y.addRole(n, "button"), y.a11y.addLabel(n, y.params.prevSlideMessage)
                        }
                        t(y.container).append(y.a11y.liveRegion)
                    },
                    initPagination: function () {
                        y.params.pagination && y.params.paginationClickable && y.bullets && y.bullets.length && y.bullets.each(function () {
                            var e = t(this);
                            y.a11y.makeFocusable(e), y.a11y.addRole(e, "button"), y.a11y.addLabel(e, y.params.paginationBulletMessage.replace(/{{index}}/, e.index() + 1))
                        })
                    },
                    destroy: function () {
                        y.a11y.liveRegion && y.a11y.liveRegion.length > 0 && y.a11y.liveRegion.remove()
                    }
                }, y.init = function () {
                    y.params.loop && y.createLoop(), y.updateContainerSize(), y.updateSlidesSize(), y.updatePagination(), y.params.scrollbar && y.scrollbar && (y.scrollbar.set(), y.params.scrollbarDraggable && y.scrollbar.enableDraggable()), "slide" !== y.params.effect && y.effects[y.params.effect] && (y.params.loop || y.updateProgress(), y.effects[y.params.effect].setTranslate()), y.params.loop ? y.slideTo(y.params.initialSlide + y.loopedSlides, 0, y.params.runCallbacksOnInit) : (y.slideTo(y.params.initialSlide, 0, y.params.runCallbacksOnInit), 0 === y.params.initialSlide && (y.parallax && y.params.parallax && y.parallax.setTranslate(), y.lazy && y.params.lazyLoading && (y.lazy.load(), y.lazy.initialImageLoaded = !0))), y.attachEvents(), y.params.observer && y.support.observer && y.initObservers(), y.params.preloadImages && !y.params.lazyLoading && y.preloadImages(), y.params.autoplay && y.startAutoplay(), y.params.keyboardControl && y.enableKeyboardControl && y.enableKeyboardControl(), y.params.mousewheelControl && y.enableMousewheelControl && y.enableMousewheelControl(), y.params.hashnav && y.hashnav && y.hashnav.init(), y.params.a11y && y.a11y && y.a11y.init(), y.emit("onInit", y)
                }, y.cleanupStyles = function () {
                    y.container.removeClass(y.classNames.join(" ")).removeAttr("style"), y.wrapper.removeAttr("style"), y.slides && y.slides.length && y.slides.removeClass([y.params.slideVisibleClass, y.params.slideActiveClass, y.params.slideNextClass, y.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"), y.paginationContainer && y.paginationContainer.length && y.paginationContainer.removeClass(y.params.paginationHiddenClass), y.bullets && y.bullets.length && y.bullets.removeClass(y.params.bulletActiveClass), y.params.prevButton && t(y.params.prevButton).removeClass(y.params.buttonDisabledClass), y.params.nextButton && t(y.params.nextButton).removeClass(y.params.buttonDisabledClass), y.params.scrollbar && y.scrollbar && (y.scrollbar.track && y.scrollbar.track.length && y.scrollbar.track.removeAttr("style"), y.scrollbar.drag && y.scrollbar.drag.length && y.scrollbar.drag.removeAttr("style"))
                }, y.destroy = function (e, t) {
                    y.detachEvents(), y.stopAutoplay(), y.params.scrollbar && y.scrollbar && y.params.scrollbarDraggable && y.scrollbar.disableDraggable(), y.params.loop && y.destroyLoop(), t && y.cleanupStyles(), y.disconnectObservers(), y.params.keyboardControl && y.disableKeyboardControl && y.disableKeyboardControl(), y.params.mousewheelControl && y.disableMousewheelControl && y.disableMousewheelControl(), y.params.a11y && y.a11y && y.a11y.destroy(), y.emit("onDestroy"), e !== !1 && (y = null)
                }, y.init(), y
            }
        };
        n.prototype = {
            isSafari: function () {
                var e = navigator.userAgent.toLowerCase();
                return e.indexOf("safari") >= 0 && e.indexOf("chrome") < 0 && e.indexOf("android") < 0
            }(),
            isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),
            isArray: function (e) {
                return "[object Array]" === Object.prototype.toString.apply(e)
            },
            browser: {
                ie: window.navigator.pointerEnabled || window.navigator.msPointerEnabled,
                ieTouch: window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints > 1 || window.navigator.pointerEnabled && window.navigator.maxTouchPoints > 1
            },
            device: function () {
                var e = navigator.userAgent, t = e.match(/(Android);?[\s\/]+([\d.]+)?/),
                    n = e.match(/(iPad).*OS\s([\d_]+)/), i = e.match(/(iPod)(.*OS\s([\d_]+))?/),
                    r = !n && e.match(/(iPhone\sOS)\s([\d_]+)/);
                return {ios: n || r || i, android: t}
            }(),
            support: {
                touch: window.Modernizr && Modernizr.touch === !0 || function () {
                    return !!("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch)
                }(), transforms3d: window.Modernizr && Modernizr.csstransforms3d === !0 || function () {
                    var e = document.createElement("div").style;
                    return "webkitPerspective" in e || "MozPerspective" in e || "OPerspective" in e || "MsPerspective" in e || "perspective" in e
                }(), flexbox: function () {
                    for (var e = document.createElement("div").style, t = "alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "), n = 0; n < t.length; n++) if (t[n] in e) return !0
                }(), observer: function () {
                    return "MutationObserver" in window || "WebkitMutationObserver" in window
                }()
            },
            plugins: {}
        };
        for (var i = (function () {
            var e = function (e) {
                var t = this, n = 0;
                for (n = 0; n < e.length; n++) t[n] = e[n];
                return t.length = e.length, this
            }, t = function (t, n) {
                var i = [], r = 0;
                if (t && !n && t instanceof e) return t;
                if (t) if ("string" == typeof t) {
                    var a, o, s = t.trim();
                    if (s.indexOf("<") >= 0 && s.indexOf(">") >= 0) {
                        var l = "div";
                        for (0 === s.indexOf("<li") && (l = "ul"), 0 === s.indexOf("<tr") && (l = "tbody"), (0 === s.indexOf("<td") || 0 === s.indexOf("<th")) && (l = "tr"), 0 === s.indexOf("<tbody") && (l = "table"), 0 === s.indexOf("<option") && (l = "select"), o = document.createElement(l), o.innerHTML = t, r = 0; r < o.childNodes.length; r++) i.push(o.childNodes[r])
                    } else for (a = n || "#" !== t[0] || t.match(/[ .<>:~]/) ? (n || document).querySelectorAll(t) : [document.getElementById(t.split("#")[1])], r = 0; r < a.length; r++) a[r] && i.push(a[r])
                } else if (t.nodeType || t === window || t === document) i.push(t); else if (t.length > 0 && t[0].nodeType) for (r = 0; r < t.length; r++) i.push(t[r]);
                return new e(i)
            };
            return e.prototype = {
                addClass: function (e) {
                    if ("undefined" == typeof e) return this;
                    for (var t = e.split(" "), n = 0; n < t.length; n++) for (var i = 0; i < this.length; i++) this[i].classList.add(t[n]);
                    return this
                }, removeClass: function (e) {
                    for (var t = e.split(" "), n = 0; n < t.length; n++) for (var i = 0; i < this.length; i++) this[i].classList.remove(t[n]);
                    return this
                }, hasClass: function (e) {
                    return this[0] ? this[0].classList.contains(e) : !1
                }, toggleClass: function (e) {
                    for (var t = e.split(" "), n = 0; n < t.length; n++) for (var i = 0; i < this.length; i++) this[i].classList.toggle(t[n]);
                    return this
                }, attr: function (e, t) {
                    if (1 === arguments.length && "string" == typeof e) return this[0] ? this[0].getAttribute(e) : void 0;
                    for (var n = 0; n < this.length; n++) if (2 === arguments.length) this[n].setAttribute(e, t); else for (var i in e) this[n][i] = e[i], this[n].setAttribute(i, e[i]);
                    return this
                }, removeAttr: function (e) {
                    for (var t = 0; t < this.length; t++) this[t].removeAttribute(e);
                    return this
                }, data: function (e, t) {
                    if ("undefined" == typeof t) {
                        if (this[0]) {
                            var n = this[0].getAttribute("data-" + e);
                            return n ? n : this[0].dom7ElementDataStorage && e in this[0].dom7ElementDataStorage ? this[0].dom7ElementDataStorage[e] : void 0
                        }
                        return void 0
                    }
                    for (var i = 0; i < this.length; i++) {
                        var r = this[i];
                        r.dom7ElementDataStorage || (r.dom7ElementDataStorage = {}), r.dom7ElementDataStorage[e] = t
                    }
                    return this
                }, transform: function (e) {
                    for (var t = 0; t < this.length; t++) {
                        var n = this[t].style;
                        n.webkitTransform = n.MsTransform = n.msTransform = n.MozTransform = n.OTransform = n.transform = e
                    }
                    return this
                }, transition: function (e) {
                    "string" != typeof e && (e += "ms");
                    for (var t = 0; t < this.length; t++) {
                        var n = this[t].style;
                        n.webkitTransitionDuration = n.MsTransitionDuration = n.msTransitionDuration = n.MozTransitionDuration = n.OTransitionDuration = n.transitionDuration = e
                    }
                    return this
                }, on: function (e, n, i, r) {
                    function a(e) {
                        var r = e.target;
                        if (t(r).is(n)) i.call(r, e); else for (var a = t(r).parents(), o = 0; o < a.length; o++) t(a[o]).is(n) && i.call(a[o], e)
                    }

                    var o, s, l = e.split(" ");
                    for (o = 0; o < this.length; o++) if ("function" == typeof n || n === !1) for ("function" == typeof n && (i = arguments[1], r = arguments[2] || !1), s = 0; s < l.length; s++) this[o].addEventListener(l[s], i, r); else for (s = 0; s < l.length; s++) this[o].dom7LiveListeners || (this[o].dom7LiveListeners = []), this[o].dom7LiveListeners.push({
                        listener: i,
                        liveListener: a
                    }), this[o].addEventListener(l[s], a, r);
                    return this
                }, off: function (e, t, n, i) {
                    for (var r = e.split(" "), a = 0; a < r.length; a++) for (var o = 0; o < this.length; o++) if ("function" == typeof t || t === !1) "function" == typeof t && (n = arguments[1], i = arguments[2] || !1), this[o].removeEventListener(r[a], n, i); else if (this[o].dom7LiveListeners) for (var s = 0; s < this[o].dom7LiveListeners.length; s++) this[o].dom7LiveListeners[s].listener === n && this[o].removeEventListener(r[a], this[o].dom7LiveListeners[s].liveListener, i);
                    return this
                }, once: function (e, t, n, i) {
                    function r(o) {
                        n(o), a.off(e, t, r, i)
                    }

                    var a = this;
                    "function" == typeof t && (t = !1, n = arguments[1], i = arguments[2]), a.on(e, t, r, i)
                }, trigger: function (e, t) {
                    for (var n = 0; n < this.length; n++) {
                        var i;
                        try {
                            i = new window.CustomEvent(e, {detail: t, bubbles: !0, cancelable: !0})
                        } catch (r) {
                            i = document.createEvent("Event"), i.initEvent(e, !0, !0), i.detail = t
                        }
                        this[n].dispatchEvent(i)
                    }
                    return this
                }, transitionEnd: function (e) {
                    function t(a) {
                        if (a.target === this) for (e.call(this, a), n = 0; n < i.length; n++) r.off(i[n], t)
                    }

                    var n,
                        i = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"],
                        r = this;
                    if (e) for (n = 0; n < i.length; n++) r.on(i[n], t);
                    return this
                }, width: function () {
                    return this[0] === window ? window.innerWidth : this.length > 0 ? parseFloat(this.css("width")) : null
                }, outerWidth: function (e) {
                    return this.length > 0 ? e ? this[0].offsetWidth + parseFloat(this.css("margin-right")) + parseFloat(this.css("margin-left")) : this[0].offsetWidth : null
                }, height: function () {
                    return this[0] === window ? window.innerHeight : this.length > 0 ? parseFloat(this.css("height")) : null
                }, outerHeight: function (e) {
                    return this.length > 0 ? e ? this[0].offsetHeight + parseFloat(this.css("margin-top")) + parseFloat(this.css("margin-bottom")) : this[0].offsetHeight : null
                }, offset: function () {
                    if (this.length > 0) {
                        var e = this[0], t = e.getBoundingClientRect(), n = document.body,
                            i = e.clientTop || n.clientTop || 0, r = e.clientLeft || n.clientLeft || 0,
                            a = window.pageYOffset || e.scrollTop, o = window.pageXOffset || e.scrollLeft;
                        return {top: t.top + a - i, left: t.left + o - r}
                    }
                    return null
                }, css: function (e, t) {
                    var n;
                    if (1 === arguments.length) {
                        if ("string" != typeof e) {
                            for (n = 0; n < this.length; n++) for (var i in e) this[n].style[i] = e[i];
                            return this
                        }
                        if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(e)
                    }
                    if (2 === arguments.length && "string" == typeof e) {
                        for (n = 0; n < this.length; n++) this[n].style[e] = t;
                        return this
                    }
                    return this
                }, each: function (e) {
                    for (var t = 0; t < this.length; t++) e.call(this[t], t, this[t]);
                    return this
                }, html: function (e) {
                    if ("undefined" == typeof e) return this[0] ? this[0].innerHTML : void 0;
                    for (var t = 0; t < this.length; t++) this[t].innerHTML = e;
                    return this
                }, is: function (n) {
                    if (!this[0]) return !1;
                    var i, r;
                    if ("string" == typeof n) {
                        var a = this[0];
                        if (a === document) return n === document;
                        if (a === window) return n === window;
                        if (a.matches) return a.matches(n);
                        if (a.webkitMatchesSelector) return a.webkitMatchesSelector(n);
                        if (a.mozMatchesSelector) return a.mozMatchesSelector(n);
                        if (a.msMatchesSelector) return a.msMatchesSelector(n);
                        for (i = t(n), r = 0; r < i.length; r++) if (i[r] === this[0]) return !0;
                        return !1
                    }
                    if (n === document) return this[0] === document;
                    if (n === window) return this[0] === window;
                    if (n.nodeType || n instanceof e) {
                        for (i = n.nodeType ? [n] : n, r = 0; r < i.length; r++) if (i[r] === this[0]) return !0;
                        return !1;
                    }
                    return !1
                }, index: function () {
                    if (this[0]) {
                        for (var e = this[0], t = 0; null !== (e = e.previousSibling);) 1 === e.nodeType && t++;
                        return t
                    }
                    return void 0
                }, eq: function (t) {
                    if ("undefined" == typeof t) return this;
                    var n, i = this.length;
                    return t > i - 1 ? new e([]) : 0 > t ? (n = i + t, new e(0 > n ? [] : [this[n]])) : new e([this[t]])
                }, append: function (t) {
                    var n, i;
                    for (n = 0; n < this.length; n++) if ("string" == typeof t) {
                        var r = document.createElement("div");
                        for (r.innerHTML = t; r.firstChild;) this[n].appendChild(r.firstChild)
                    } else if (t instanceof e) for (i = 0; i < t.length; i++) this[n].appendChild(t[i]); else this[n].appendChild(t);
                    return this
                }, prepend: function (t) {
                    var n, i;
                    for (n = 0; n < this.length; n++) if ("string" == typeof t) {
                        var r = document.createElement("div");
                        for (r.innerHTML = t, i = r.childNodes.length - 1; i >= 0; i--) this[n].insertBefore(r.childNodes[i], this[n].childNodes[0])
                    } else if (t instanceof e) for (i = 0; i < t.length; i++) this[n].insertBefore(t[i], this[n].childNodes[0]); else this[n].insertBefore(t, this[n].childNodes[0]);
                    return this
                }, insertBefore: function (e) {
                    for (var n = t(e), i = 0; i < this.length; i++) if (1 === n.length) n[0].parentNode.insertBefore(this[i], n[0]); else if (n.length > 1) for (var r = 0; r < n.length; r++) n[r].parentNode.insertBefore(this[i].cloneNode(!0), n[r])
                }, insertAfter: function (e) {
                    for (var n = t(e), i = 0; i < this.length; i++) if (1 === n.length) n[0].parentNode.insertBefore(this[i], n[0].nextSibling); else if (n.length > 1) for (var r = 0; r < n.length; r++) n[r].parentNode.insertBefore(this[i].cloneNode(!0), n[r].nextSibling)
                }, next: function (n) {
                    return new e(this.length > 0 ? n ? this[0].nextElementSibling && t(this[0].nextElementSibling).is(n) ? [this[0].nextElementSibling] : [] : this[0].nextElementSibling ? [this[0].nextElementSibling] : [] : [])
                }, nextAll: function (n) {
                    var i = [], r = this[0];
                    if (!r) return new e([]);
                    for (; r.nextElementSibling;) {
                        var a = r.nextElementSibling;
                        n ? t(a).is(n) && i.push(a) : i.push(a), r = a
                    }
                    return new e(i)
                }, prev: function (n) {
                    return new e(this.length > 0 ? n ? this[0].previousElementSibling && t(this[0].previousElementSibling).is(n) ? [this[0].previousElementSibling] : [] : this[0].previousElementSibling ? [this[0].previousElementSibling] : [] : [])
                }, prevAll: function (n) {
                    var i = [], r = this[0];
                    if (!r) return new e([]);
                    for (; r.previousElementSibling;) {
                        var a = r.previousElementSibling;
                        n ? t(a).is(n) && i.push(a) : i.push(a), r = a
                    }
                    return new e(i)
                }, parent: function (e) {
                    for (var n = [], i = 0; i < this.length; i++) e ? t(this[i].parentNode).is(e) && n.push(this[i].parentNode) : n.push(this[i].parentNode);
                    return t(t.unique(n))
                }, parents: function (e) {
                    for (var n = [], i = 0; i < this.length; i++) for (var r = this[i].parentNode; r;) e ? t(r).is(e) && n.push(r) : n.push(r), r = r.parentNode;
                    return t(t.unique(n))
                }, find: function (t) {
                    for (var n = [], i = 0; i < this.length; i++) for (var r = this[i].querySelectorAll(t), a = 0; a < r.length; a++) n.push(r[a]);
                    return new e(n)
                }, children: function (n) {
                    for (var i = [], r = 0; r < this.length; r++) for (var a = this[r].childNodes, o = 0; o < a.length; o++) n ? 1 === a[o].nodeType && t(a[o]).is(n) && i.push(a[o]) : 1 === a[o].nodeType && i.push(a[o]);
                    return new e(t.unique(i))
                }, remove: function () {
                    for (var e = 0; e < this.length; e++) this[e].parentNode && this[e].parentNode.removeChild(this[e]);
                    return this
                }, add: function () {
                    var e, n, i = this;
                    for (e = 0; e < arguments.length; e++) {
                        var r = t(arguments[e]);
                        for (n = 0; n < r.length; n++) i[i.length] = r[n], i.length++
                    }
                    return i
                }
            }, t.fn = e.prototype, t.unique = function (e) {
                for (var t = [], n = 0; n < e.length; n++) -1 === t.indexOf(e[n]) && t.push(e[n]);
                return t
            }, t
        }()), r = ["jQuery", "Zepto", "Dom7"], a = 0; a < r.length; a++) window[r[a]] && e(window[r[a]]);
        var o;
        o = "undefined" == typeof i ? window.Dom7 || window.Zepto || window.jQuery : i, o && ("transitionEnd" in o.fn || (o.fn.transitionEnd = function (e) {
            function t(a) {
                if (a.target === this) for (e.call(this, a), n = 0; n < i.length; n++) r.off(i[n], t)
            }

            var n, i = ["webkitTransitionEnd", "transitionend", "oTransitionEnd", "MSTransitionEnd", "msTransitionEnd"],
                r = this;
            if (e) for (n = 0; n < i.length; n++) r.on(i[n], t);
            return this
        }), "transform" in o.fn || (o.fn.transform = function (e) {
            for (var t = 0; t < this.length; t++) {
                var n = this[t].style;
                n.webkitTransform = n.MsTransform = n.msTransform = n.MozTransform = n.OTransform = n.transform = e
            }
            return this
        }), "transition" in o.fn || (o.fn.transition = function (e) {
            "string" != typeof e && (e += "ms");
            for (var t = 0; t < this.length; t++) {
                var n = this[t].style;
                n.webkitTransitionDuration = n.MsTransitionDuration = n.msTransitionDuration = n.MozTransitionDuration = n.OTransitionDuration = n.transitionDuration = e
            }
            return this
        })), ionic.views.Swiper = n
    }(), function (e) {
        "use strict";
        e.views.Toggle = e.views.View.inherit({
            initialize: function (t) {
                var n = this;
                this.el = t.el, this.checkbox = t.checkbox, this.track = t.track, this.handle = t.handle, this.openPercent = -1, this.onChange = t.onChange || function () {
                }, this.triggerThreshold = t.triggerThreshold || 20, this.dragStartHandler = function (e) {
                    n.dragStart(e)
                }, this.dragHandler = function (e) {
                    n.drag(e)
                }, this.holdHandler = function (e) {
                    n.hold(e)
                }, this.releaseHandler = function (e) {
                    n.release(e)
                }, this.dragStartGesture = e.onGesture("dragstart", this.dragStartHandler, this.el), this.dragGesture = e.onGesture("drag", this.dragHandler, this.el), this.dragHoldGesture = e.onGesture("hold", this.holdHandler, this.el), this.dragReleaseGesture = e.onGesture("release", this.releaseHandler, this.el)
            }, destroy: function () {
                e.offGesture(this.dragStartGesture, "dragstart", this.dragStartGesture), e.offGesture(this.dragGesture, "drag", this.dragGesture), e.offGesture(this.dragHoldGesture, "hold", this.holdHandler), e.offGesture(this.dragReleaseGesture, "release", this.releaseHandler)
            }, tap: function () {
                "disabled" !== this.el.getAttribute("disabled") && this.val(!this.checkbox.checked)
            }, dragStart: function (e) {
                this.checkbox.disabled || (this._dragInfo = {
                    width: this.el.offsetWidth,
                    left: this.el.offsetLeft,
                    right: this.el.offsetLeft + this.el.offsetWidth,
                    triggerX: this.el.offsetWidth / 2,
                    initialState: this.checkbox.checked
                }, e.gesture.srcEvent.preventDefault(), this.hold(e))
            }, drag: function (t) {
                var n = this;
                this._dragInfo && (t.gesture.srcEvent.preventDefault(), e.requestAnimationFrame(function () {
                    if (n._dragInfo) {
                        var e = t.gesture.touches[0].pageX - n._dragInfo.left,
                            i = n._dragInfo.width - n.triggerThreshold;
                        n._dragInfo.initialState ? e < n.triggerThreshold ? n.setOpenPercent(0) : e > n._dragInfo.triggerX && n.setOpenPercent(100) : e < n._dragInfo.triggerX ? n.setOpenPercent(0) : e > i && n.setOpenPercent(100)
                    }
                }))
            }, endDrag: function () {
                this._dragInfo = null
            }, hold: function () {
                this.el.classList.add("dragging")
            }, release: function (e) {
                this.el.classList.remove("dragging"), this.endDrag(e)
            }, setOpenPercent: function (t) {
                if (this.openPercent < 0 || t < this.openPercent - 3 || t > this.openPercent + 3) if (this.openPercent = t, 0 === t) this.val(!1); else if (100 === t) this.val(!0); else {
                    var n = Math.round(t / 100 * this.track.offsetWidth - this.handle.offsetWidth);
                    n = 1 > n ? 0 : n, this.handle.style[e.CSS.TRANSFORM] = "translate3d(" + n + "px,0,0)"
                }
            }, val: function (t) {
                return (t === !0 || t === !1) && ("" !== this.handle.style[e.CSS.TRANSFORM] && (this.handle.style[e.CSS.TRANSFORM] = ""), this.checkbox.checked = t, this.openPercent = t ? 100 : 0, this.onChange && this.onChange()), this.checkbox.checked
            }
        })
    }(ionic)
}();
/*!
 * ionic.bundle.js is a concatenation of:
 * ionic.js, angular.js, angular-animate.js,
 * angular-sanitize.js, angular-ui-router.js,
 * and ionic-angular.js
 */

/*
 AngularJS v1.5.3
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function (T, P, u) {
    'use strict';

    function O(a) {
        return function () {
            var b = arguments[0], d;
            d = "[" + (a ? a + ":" : "") + b + "] http://errors.angularjs.org/1.5.3/" + (a ? a + "/" : "") + b;
            for (b = 1; b < arguments.length; b++) {
                d = d + (1 == b ? "?" : "&") + "p" + (b - 1) + "=";
                var c = encodeURIComponent, e;
                e = arguments[b];
                e = "function" == typeof e ? e.toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof e ? "undefined" : "string" != typeof e ? JSON.stringify(e) : e;
                d += c(e)
            }
            return Error(d)
        }
    }

    function za(a) {
        if (null == a || Ya(a)) return !1;
        if (M(a) || y(a) || H && a instanceof H) return !0;
        var b = "length" in Object(a) && a.length;
        return R(b) && (0 <= b && (b - 1 in a || a instanceof Array) || "function" == typeof a.item)
    }

    function q(a, b, d) {
        var c, e;
        if (a) if (D(a)) for (c in a) "prototype" == c || "length" == c || "name" == c || a.hasOwnProperty && !a.hasOwnProperty(c) || b.call(d, a[c], c, a); else if (M(a) || za(a)) {
            var f = "object" !== typeof a;
            c = 0;
            for (e = a.length; c < e; c++) (f || c in a) && b.call(d, a[c], c, a)
        } else if (a.forEach && a.forEach !== q) a.forEach(b, d, a); else if (oc(a)) for (c in a) b.call(d, a[c], c, a); else if ("function" === typeof a.hasOwnProperty) for (c in a) a.hasOwnProperty(c) &&
        b.call(d, a[c], c, a); else for (c in a) va.call(a, c) && b.call(d, a[c], c, a);
        return a
    }

    function pc(a, b, d) {
        for (var c = Object.keys(a).sort(), e = 0; e < c.length; e++) b.call(d, a[c[e]], c[e]);
        return c
    }

    function qc(a) {
        return function (b, d) {
            a(d, b)
        }
    }

    function Wd() {
        return ++qb
    }

    function Ob(a, b, d) {
        for (var c = a.$$hashKey, e = 0, f = b.length; e < f; ++e) {
            var g = b[e];
            if (J(g) || D(g)) for (var h = Object.keys(g), k = 0, l = h.length; k < l; k++) {
                var m = h[k], n = g[m];
                d && J(n) ? fa(n) ? a[m] = new Date(n.valueOf()) : Za(n) ? a[m] = new RegExp(n) : n.nodeName ? a[m] = n.cloneNode(!0) :
                    Pb(n) ? a[m] = n.clone() : (J(a[m]) || (a[m] = M(n) ? [] : {}), Ob(a[m], [n], !0)) : a[m] = n
            }
        }
        c ? a.$$hashKey = c : delete a.$$hashKey;
        return a
    }

    function S(a) {
        return Ob(a, Aa.call(arguments, 1), !1)
    }

    function Xd(a) {
        return Ob(a, Aa.call(arguments, 1), !0)
    }

    function Y(a) {
        return parseInt(a, 10)
    }

    function Qb(a, b) {
        return S(Object.create(a), b)
    }

    function E() {
    }

    function $a(a) {
        return a
    }

    function da(a) {
        return function () {
            return a
        }
    }

    function rc(a) {
        return D(a.toString) && a.toString !== ka
    }

    function z(a) {
        return "undefined" === typeof a
    }

    function A(a) {
        return "undefined" !==
            typeof a
    }

    function J(a) {
        return null !== a && "object" === typeof a
    }

    function oc(a) {
        return null !== a && "object" === typeof a && !sc(a)
    }

    function y(a) {
        return "string" === typeof a
    }

    function R(a) {
        return "number" === typeof a
    }

    function fa(a) {
        return "[object Date]" === ka.call(a)
    }

    function D(a) {
        return "function" === typeof a
    }

    function Za(a) {
        return "[object RegExp]" === ka.call(a)
    }

    function Ya(a) {
        return a && a.window === a
    }

    function ab(a) {
        return a && a.$evalAsync && a.$watch
    }

    function Oa(a) {
        return "boolean" === typeof a
    }

    function Yd(a) {
        return a && R(a.length) &&
            Zd.test(ka.call(a))
    }

    function Pb(a) {
        return !(!a || !(a.nodeName || a.prop && a.attr && a.find))
    }

    function $d(a) {
        var b = {};
        a = a.split(",");
        var d;
        for (d = 0; d < a.length; d++) b[a[d]] = !0;
        return b
    }

    function oa(a) {
        return N(a.nodeName || a[0] && a[0].nodeName)
    }

    function bb(a, b) {
        var d = a.indexOf(b);
        0 <= d && a.splice(d, 1);
        return d
    }

    function pa(a, b) {
        function d(a, b) {
            var d = b.$$hashKey, e;
            if (M(a)) {
                e = 0;
                for (var f = a.length; e < f; e++) b.push(c(a[e]))
            } else if (oc(a)) for (e in a) b[e] = c(a[e]); else if (a && "function" === typeof a.hasOwnProperty) for (e in a) a.hasOwnProperty(e) &&
            (b[e] = c(a[e])); else for (e in a) va.call(a, e) && (b[e] = c(a[e]));
            d ? b.$$hashKey = d : delete b.$$hashKey;
            return b
        }

        function c(a) {
            if (!J(a)) return a;
            var b = f.indexOf(a);
            if (-1 !== b) return g[b];
            if (Ya(a) || ab(a)) throw Ba("cpws");
            var b = !1, c = e(a);
            c === u && (c = M(a) ? [] : Object.create(sc(a)), b = !0);
            f.push(a);
            g.push(c);
            return b ? d(a, c) : c
        }

        function e(a) {
            switch (ka.call(a)) {
                case "[object Int8Array]":
                case "[object Int16Array]":
                case "[object Int32Array]":
                case "[object Float32Array]":
                case "[object Float64Array]":
                case "[object Uint8Array]":
                case "[object Uint8ClampedArray]":
                case "[object Uint16Array]":
                case "[object Uint32Array]":
                    return new a.constructor(c(a.buffer));
                case "[object ArrayBuffer]":
                    if (!a.slice) {
                        var b = new ArrayBuffer(a.byteLength);
                        (new Uint8Array(b)).set(new Uint8Array(a));
                        return b
                    }
                    return a.slice(0);
                case "[object Boolean]":
                case "[object Number]":
                case "[object String]":
                case "[object Date]":
                    return new a.constructor(a.valueOf());
                case "[object RegExp]":
                    return b = new RegExp(a.source, a.toString().match(/[^\/]*$/)[0]), b.lastIndex = a.lastIndex, b;
                case "[object Blob]":
                    return new a.constructor([a], {type: a.type})
            }
            if (D(a.cloneNode)) return a.cloneNode(!0)
        }

        var f = [],
            g = [];
        if (b) {
            if (Yd(b) || "[object ArrayBuffer]" === ka.call(b)) throw Ba("cpta");
            if (a === b) throw Ba("cpi");
            M(b) ? b.length = 0 : q(b, function (a, c) {
                "$$hashKey" !== c && delete b[c]
            });
            f.push(a);
            g.push(b);
            return d(a, b)
        }
        return c(a)
    }

    function ia(a, b) {
        if (M(a)) {
            b = b || [];
            for (var d = 0, c = a.length; d < c; d++) b[d] = a[d]
        } else if (J(a)) for (d in b = b || {}, a) if ("$" !== d.charAt(0) || "$" !== d.charAt(1)) b[d] = a[d];
        return b || a
    }

    function na(a, b) {
        if (a === b) return !0;
        if (null === a || null === b) return !1;
        if (a !== a && b !== b) return !0;
        var d = typeof a, c;
        if (d == typeof b &&
            "object" == d) if (M(a)) {
            if (!M(b)) return !1;
            if ((d = a.length) == b.length) {
                for (c = 0; c < d; c++) if (!na(a[c], b[c])) return !1;
                return !0
            }
        } else {
            if (fa(a)) return fa(b) ? na(a.getTime(), b.getTime()) : !1;
            if (Za(a)) return Za(b) ? a.toString() == b.toString() : !1;
            if (ab(a) || ab(b) || Ya(a) || Ya(b) || M(b) || fa(b) || Za(b)) return !1;
            d = V();
            for (c in a) if ("$" !== c.charAt(0) && !D(a[c])) {
                if (!na(a[c], b[c])) return !1;
                d[c] = !0
            }
            for (c in b) if (!(c in d) && "$" !== c.charAt(0) && A(b[c]) && !D(b[c])) return !1;
            return !0
        }
        return !1
    }

    function cb(a, b, d) {
        return a.concat(Aa.call(b,
            d))
    }

    function tc(a, b) {
        var d = 2 < arguments.length ? Aa.call(arguments, 2) : [];
        return !D(b) || b instanceof RegExp ? b : d.length ? function () {
            return arguments.length ? b.apply(a, cb(d, arguments, 0)) : b.apply(a, d)
        } : function () {
            return arguments.length ? b.apply(a, arguments) : b.call(a)
        }
    }

    function ae(a, b) {
        var d = b;
        "string" === typeof a && "$" === a.charAt(0) && "$" === a.charAt(1) ? d = u : Ya(b) ? d = "$WINDOW" : b && P === b ? d = "$DOCUMENT" : ab(b) && (d = "$SCOPE");
        return d
    }

    function db(a, b) {
        if (z(a)) return u;
        R(b) || (b = b ? 2 : null);
        return JSON.stringify(a, ae, b)
    }

    function uc(a) {
        return y(a) ?
            JSON.parse(a) : a
    }

    function vc(a, b) {
        a = a.replace(be, "");
        var d = Date.parse("Jan 01, 1970 00:00:00 " + a) / 6E4;
        return isNaN(d) ? b : d
    }

    function Rb(a, b, d) {
        d = d ? -1 : 1;
        var c = a.getTimezoneOffset();
        b = vc(b, c);
        d *= b - c;
        a = new Date(a.getTime());
        a.setMinutes(a.getMinutes() + d);
        return a
    }

    function wa(a) {
        a = H(a).clone();
        try {
            a.empty()
        } catch (b) {
        }
        var d = H("<div>").append(a).html();
        try {
            return a[0].nodeType === Pa ? N(d) : d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function (a, b) {
                return "<" + N(b)
            })
        } catch (c) {
            return N(d)
        }
    }

    function wc(a) {
        try {
            return decodeURIComponent(a)
        } catch (b) {
        }
    }

    function xc(a) {
        var b = {};
        q((a || "").split("&"), function (a) {
            var c, e, f;
            a && (e = a = a.replace(/\+/g, "%20"), c = a.indexOf("="), -1 !== c && (e = a.substring(0, c), f = a.substring(c + 1)), e = wc(e), A(e) && (f = A(f) ? wc(f) : !0, va.call(b, e) ? M(b[e]) ? b[e].push(f) : b[e] = [b[e], f] : b[e] = f))
        });
        return b
    }

    function Sb(a) {
        var b = [];
        q(a, function (a, c) {
            M(a) ? q(a, function (a) {
                b.push(ja(c, !0) + (!0 === a ? "" : "=" + ja(a, !0)))
            }) : b.push(ja(c, !0) + (!0 === a ? "" : "=" + ja(a, !0)))
        });
        return b.length ? b.join("&") : ""
    }

    function rb(a) {
        return ja(a, !0).replace(/%26/gi, "&").replace(/%3D/gi,
            "=").replace(/%2B/gi, "+")
    }

    function ja(a, b) {
        return encodeURIComponent(a).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%3B/gi, ";").replace(/%20/g, b ? "%20" : "+")
    }

    function ce(a, b) {
        var d, c, e = Qa.length;
        for (c = 0; c < e; ++c) if (d = Qa[c] + b, y(d = a.getAttribute(d))) return d;
        return null
    }

    function de(a, b) {
        var d, c, e = {};
        q(Qa, function (b) {
            b += "app";
            !d && a.hasAttribute && a.hasAttribute(b) && (d = a, c = a.getAttribute(b))
        });
        q(Qa, function (b) {
            b += "app";
            var e;
            !d && (e = a.querySelector("[" + b.replace(":",
                "\\:") + "]")) && (d = e, c = e.getAttribute(b))
        });
        d && (e.strictDi = null !== ce(d, "strict-di"), b(d, c ? [c] : [], e))
    }

    function yc(a, b, d) {
        J(d) || (d = {});
        d = S({strictDi: !1}, d);
        var c = function () {
            a = H(a);
            if (a.injector()) {
                var c = a[0] === P ? "document" : wa(a);
                throw Ba("btstrpd", c.replace(/</, "&lt;").replace(/>/, "&gt;"));
            }
            b = b || [];
            b.unshift(["$provide", function (b) {
                b.value("$rootElement", a)
            }]);
            d.debugInfoEnabled && b.push(["$compileProvider", function (a) {
                a.debugInfoEnabled(!0)
            }]);
            b.unshift("ng");
            c = eb(b, d.strictDi);
            c.invoke(["$rootScope",
                "$rootElement", "$compile", "$injector", function (a, b, c, d) {
                    a.$apply(function () {
                        b.data("$injector", d);
                        c(b)(a)
                    })
                }]);
            return c
        }, e = /^NG_ENABLE_DEBUG_INFO!/, f = /^NG_DEFER_BOOTSTRAP!/;
        T && e.test(T.name) && (d.debugInfoEnabled = !0, T.name = T.name.replace(e, ""));
        if (T && !f.test(T.name)) return c();
        T.name = T.name.replace(f, "");
        ea.resumeBootstrap = function (a) {
            q(a, function (a) {
                b.push(a)
            });
            return c()
        };
        D(ea.resumeDeferredBootstrap) && ea.resumeDeferredBootstrap()
    }

    function ee() {
        T.name = "NG_ENABLE_DEBUG_INFO!" + T.name;
        T.location.reload()
    }

    function fe(a) {
        a = ea.element(a).injector();
        if (!a) throw Ba("test");
        return a.get("$$testability")
    }

    function zc(a, b) {
        b = b || "_";
        return a.replace(ge, function (a, c) {
            return (c ? b : "") + a.toLowerCase()
        })
    }

    function he() {
        var a;
        if (!Ac) {
            var b = sb();
            ($ = z(b) ? T.jQuery : b ? T[b] : u) && $.fn.on ? (H = $, S($.fn, {
                scope: Ra.scope,
                isolateScope: Ra.isolateScope,
                controller: Ra.controller,
                injector: Ra.injector,
                inheritedData: Ra.inheritedData
            }), a = $.cleanData, $.cleanData = function (b) {
                for (var c, e = 0, f; null != (f = b[e]); e++) (c = $._data(f, "events")) && c.$destroy &&
                $(f).triggerHandler("$destroy");
                a(b)
            }) : H = U;
            ea.element = H;
            Ac = !0
        }
    }

    function tb(a, b, d) {
        if (!a) throw Ba("areq", b || "?", d || "required");
        return a
    }

    function Sa(a, b, d) {
        d && M(a) && (a = a[a.length - 1]);
        tb(D(a), b, "not a function, got " + (a && "object" === typeof a ? a.constructor.name || "Object" : typeof a));
        return a
    }

    function Ta(a, b) {
        if ("hasOwnProperty" === a) throw Ba("badname", b);
    }

    function Bc(a, b, d) {
        if (!b) return a;
        b = b.split(".");
        for (var c, e = a, f = b.length, g = 0; g < f; g++) c = b[g], a && (a = (e = a)[c]);
        return !d && D(a) ? tc(e, a) : a
    }

    function ub(a) {
        for (var b =
            a[0], d = a[a.length - 1], c, e = 1; b !== d && (b = b.nextSibling); e++) if (c || a[e] !== b) c || (c = H(Aa.call(a, 0, e))), c.push(b);
        return c || a
    }

    function V() {
        return Object.create(null)
    }

    function ie(a) {
        function b(a, b, c) {
            return a[b] || (a[b] = c())
        }

        var d = O("$injector"), c = O("ng");
        a = b(a, "angular", Object);
        a.$$minErr = a.$$minErr || O;
        return b(a, "module", function () {
            var a = {};
            return function (f, g, h) {
                if ("hasOwnProperty" === f) throw c("badname", "module");
                g && a.hasOwnProperty(f) && (a[f] = null);
                return b(a, f, function () {
                    function a(b, d, e, f) {
                        f || (f = c);
                        return function () {
                            f[e ||
                            "push"]([b, d, arguments]);
                            return L
                        }
                    }

                    function b(a, d) {
                        return function (b, e) {
                            e && D(e) && (e.$$moduleName = f);
                            c.push([a, d, arguments]);
                            return L
                        }
                    }

                    if (!g) throw d("nomod", f);
                    var c = [], e = [], p = [], F = a("$injector", "invoke", "push", e), L = {
                        _invokeQueue: c,
                        _configBlocks: e,
                        _runBlocks: p,
                        requires: g,
                        name: f,
                        provider: b("$provide", "provider"),
                        factory: b("$provide", "factory"),
                        service: b("$provide", "service"),
                        value: a("$provide", "value"),
                        constant: a("$provide", "constant", "unshift"),
                        decorator: b("$provide", "decorator"),
                        animation: b("$animateProvider",
                            "register"),
                        filter: b("$filterProvider", "register"),
                        controller: b("$controllerProvider", "register"),
                        directive: b("$compileProvider", "directive"),
                        component: b("$compileProvider", "component"),
                        config: F,
                        run: function (a) {
                            p.push(a);
                            return this
                        }
                    };
                    h && F(h);
                    return L
                })
            }
        })
    }

    function je(a) {
        S(a, {
            bootstrap: yc,
            copy: pa,
            extend: S,
            merge: Xd,
            equals: na,
            element: H,
            forEach: q,
            injector: eb,
            noop: E,
            bind: tc,
            toJson: db,
            fromJson: uc,
            identity: $a,
            isUndefined: z,
            isDefined: A,
            isString: y,
            isFunction: D,
            isObject: J,
            isNumber: R,
            isElement: Pb,
            isArray: M,
            version: ke,
            isDate: fa,
            lowercase: N,
            uppercase: vb,
            callbacks: {counter: 0},
            getTestability: fe,
            $$minErr: O,
            $$csp: Ga,
            reloadWithDebugInfo: ee
        });
        Tb = ie(T);
        Tb("ng", ["ngLocale"], ["$provide", function (a) {
            a.provider({$$sanitizeUri: le});
            a.provider("$compile", Cc).directive({
                a: me,
                input: Dc,
                textarea: Dc,
                form: ne,
                script: oe,
                select: pe,
                style: qe,
                option: re,
                ngBind: se,
                ngBindHtml: te,
                ngBindTemplate: ue,
                ngClass: ve,
                ngClassEven: we,
                ngClassOdd: xe,
                ngCloak: ye,
                ngController: ze,
                ngForm: Ae,
                ngHide: Be,
                ngIf: Ce,
                ngInclude: De,
                ngInit: Ee,
                ngNonBindable: Fe,
                ngPluralize: Ge,
                ngRepeat: He,
                ngShow: Ie,
                ngStyle: Je,
                ngSwitch: Ke,
                ngSwitchWhen: Le,
                ngSwitchDefault: Me,
                ngOptions: Ne,
                ngTransclude: Oe,
                ngModel: Pe,
                ngList: Qe,
                ngChange: Re,
                pattern: Ec,
                ngPattern: Ec,
                required: Fc,
                ngRequired: Fc,
                minlength: Gc,
                ngMinlength: Gc,
                maxlength: Hc,
                ngMaxlength: Hc,
                ngValue: Se,
                ngModelOptions: Te
            }).directive({ngInclude: Ue}).directive(wb).directive(Ic);
            a.provider({
                $anchorScroll: Ve,
                $animate: We,
                $animateCss: Xe,
                $$animateJs: Ye,
                $$animateQueue: Ze,
                $$AnimateRunner: $e,
                $$animateAsyncRun: af,
                $browser: bf,
                $cacheFactory: cf,
                $controller: df,
                $document: ef,
                $exceptionHandler: ff,
                $filter: Jc,
                $$forceReflow: gf,
                $interpolate: hf,
                $interval: jf,
                $http: kf,
                $httpParamSerializer: lf,
                $httpParamSerializerJQLike: mf,
                $httpBackend: nf,
                $xhrFactory: of,
                $location: pf,
                $log: qf,
                $parse: rf,
                $rootScope: sf,
                $q: tf,
                $$q: uf,
                $sce: vf,
                $sceDelegate: wf,
                $sniffer: xf,
                $templateCache: yf,
                $templateRequest: zf,
                $$testability: Af,
                $timeout: Bf,
                $window: Cf,
                $$rAF: Df,
                $$jqLite: Ef,
                $$HashMap: Ff,
                $$cookieReader: Gf
            })
        }])
    }

    function fb(a) {
        return a.replace(Hf, function (a, d, c, e) {
            return e ? c.toUpperCase() :
                c
        }).replace(If, "Moz$1")
    }

    function Kc(a) {
        a = a.nodeType;
        return 1 === a || !a || 9 === a
    }

    function Lc(a, b) {
        var d, c, e = b.createDocumentFragment(), f = [];
        if (Ub.test(a)) {
            d = d || e.appendChild(b.createElement("div"));
            c = (Jf.exec(a) || ["", ""])[1].toLowerCase();
            c = ha[c] || ha._default;
            d.innerHTML = c[1] + a.replace(Kf, "<$1></$2>") + c[2];
            for (c = c[0]; c--;) d = d.lastChild;
            f = cb(f, d.childNodes);
            d = e.firstChild;
            d.textContent = ""
        } else f.push(b.createTextNode(a));
        e.textContent = "";
        e.innerHTML = "";
        q(f, function (a) {
            e.appendChild(a)
        });
        return e
    }

    function Mc(a,
                b) {
        var d = a.parentNode;
        d && d.replaceChild(b, a);
        b.appendChild(a)
    }

    function U(a) {
        if (a instanceof U) return a;
        var b;
        y(a) && (a = W(a), b = !0);
        if (!(this instanceof U)) {
            if (b && "<" != a.charAt(0)) throw Vb("nosel");
            return new U(a)
        }
        if (b) {
            b = P;
            var d;
            a = (d = Lf.exec(a)) ? [b.createElement(d[1])] : (d = Lc(a, b)) ? d.childNodes : []
        }
        Nc(this, a)
    }

    function Wb(a) {
        return a.cloneNode(!0)
    }

    function xb(a, b) {
        b || gb(a);
        if (a.querySelectorAll) for (var d = a.querySelectorAll("*"), c = 0, e = d.length; c < e; c++) gb(d[c])
    }

    function Oc(a, b, d, c) {
        if (A(c)) throw Vb("offargs");
        var e = (c = yb(a)) && c.events, f = c && c.handle;
        if (f) if (b) {
            var g = function (b) {
                var c = e[b];
                A(d) && bb(c || [], d);
                A(d) && c && 0 < c.length || (a.removeEventListener(b, f, !1), delete e[b])
            };
            q(b.split(" "), function (a) {
                g(a);
                zb[a] && g(zb[a])
            })
        } else for (b in e) "$destroy" !== b && a.removeEventListener(b, f, !1), delete e[b]
    }

    function gb(a, b) {
        var d = a.ng339, c = d && hb[d];
        c && (b ? delete c.data[b] : (c.handle && (c.events.$destroy && c.handle({}, "$destroy"), Oc(a)), delete hb[d], a.ng339 = u))
    }

    function yb(a, b) {
        var d = a.ng339, d = d && hb[d];
        b && !d && (a.ng339 = d = ++Mf,
            d = hb[d] = {events: {}, data: {}, handle: u});
        return d
    }

    function Xb(a, b, d) {
        if (Kc(a)) {
            var c = A(d), e = !c && b && !J(b), f = !b;
            a = (a = yb(a, !e)) && a.data;
            if (c) a[b] = d; else {
                if (f) return a;
                if (e) return a && a[b];
                S(a, b)
            }
        }
    }

    function Ab(a, b) {
        return a.getAttribute ? -1 < (" " + (a.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + b + " ") : !1
    }

    function Bb(a, b) {
        b && a.setAttribute && q(b.split(" "), function (b) {
            a.setAttribute("class", W((" " + (a.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + W(b) + " ", " ")))
        })
    }

    function Cb(a,
                b) {
        if (b && a.setAttribute) {
            var d = (" " + (a.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            q(b.split(" "), function (a) {
                a = W(a);
                -1 === d.indexOf(" " + a + " ") && (d += a + " ")
            });
            a.setAttribute("class", W(d))
        }
    }

    function Nc(a, b) {
        if (b) if (b.nodeType) a[a.length++] = b; else {
            var d = b.length;
            if ("number" === typeof d && b.window !== b) {
                if (d) for (var c = 0; c < d; c++) a[a.length++] = b[c]
            } else a[a.length++] = b
        }
    }

    function Pc(a, b) {
        return Db(a, "$" + (b || "ngController") + "Controller")
    }

    function Db(a, b, d) {
        9 == a.nodeType && (a = a.documentElement);
        for (b =
                 M(b) ? b : [b]; a;) {
            for (var c = 0, e = b.length; c < e; c++) if (A(d = H.data(a, b[c]))) return d;
            a = a.parentNode || 11 === a.nodeType && a.host
        }
    }

    function Qc(a) {
        for (xb(a, !0); a.firstChild;) a.removeChild(a.firstChild)
    }

    function Yb(a, b) {
        b || xb(a);
        var d = a.parentNode;
        d && d.removeChild(a)
    }

    function Nf(a, b) {
        b = b || T;
        if ("complete" === b.document.readyState) b.setTimeout(a); else H(b).on("load", a)
    }

    function Rc(a, b) {
        var d = Eb[b.toLowerCase()];
        return d && Sc[oa(a)] && d
    }

    function Of(a, b) {
        var d = function (c, d) {
            c.isDefaultPrevented = function () {
                return c.defaultPrevented
            };
            var f = b[d || c.type], g = f ? f.length : 0;
            if (g) {
                if (z(c.immediatePropagationStopped)) {
                    var h = c.stopImmediatePropagation;
                    c.stopImmediatePropagation = function () {
                        c.immediatePropagationStopped = !0;
                        c.stopPropagation && c.stopPropagation();
                        h && h.call(c)
                    }
                }
                c.isImmediatePropagationStopped = function () {
                    return !0 === c.immediatePropagationStopped
                };
                var k = f.specialHandlerWrapper || Pf;
                1 < g && (f = ia(f));
                for (var l = 0; l < g; l++) c.isImmediatePropagationStopped() || k(a, c, f[l])
            }
        };
        d.elem = a;
        return d
    }

    function Pf(a, b, d) {
        d.call(a, b)
    }

    function Qf(a, b,
                d) {
        var c = b.relatedTarget;
        c && (c === a || Rf.call(a, c)) || d.call(a, b)
    }

    function Ef() {
        this.$get = function () {
            return S(U, {
                hasClass: function (a, b) {
                    a.attr && (a = a[0]);
                    return Ab(a, b)
                }, addClass: function (a, b) {
                    a.attr && (a = a[0]);
                    return Cb(a, b)
                }, removeClass: function (a, b) {
                    a.attr && (a = a[0]);
                    return Bb(a, b)
                }
            })
        }
    }

    function Ha(a, b) {
        var d = a && a.$$hashKey;
        if (d) return "function" === typeof d && (d = a.$$hashKey()), d;
        d = typeof a;
        return d = "function" == d || "object" == d && null !== a ? a.$$hashKey = d + ":" + (b || Wd)() : d + ":" + a
    }

    function Ua(a, b) {
        if (b) {
            var d = 0;
            this.nextUid =
                function () {
                    return ++d
                }
        }
        q(a, this.put, this)
    }

    function Tc(a) {
        a = a.toString().replace(Sf, "");
        return a.match(Tf) || a.match(Uf)
    }

    function Vf(a) {
        return (a = Tc(a)) ? "function(" + (a[1] || "").replace(/[\s\r\n]+/, " ") + ")" : "fn"
    }

    function eb(a, b) {
        function d(a) {
            return function (b, c) {
                if (J(b)) q(b, qc(a)); else return a(b, c)
            }
        }

        function c(a, b) {
            Ta(a, "service");
            if (D(b) || M(b)) b = p.instantiate(b);
            if (!b.$get) throw Ia("pget", a);
            return n[a + "Provider"] = b
        }

        function e(a, b) {
            return function () {
                var c = x.invoke(b, this);
                if (z(c)) throw Ia("undef", a);
                return c
            }
        }

        function f(a, b, d) {
            return c(a, {$get: !1 !== d ? e(a, b) : b})
        }

        function g(a) {
            tb(z(a) || M(a), "modulesToLoad", "not an array");
            var b = [], c;
            q(a, function (a) {
                function d(a) {
                    var b, c;
                    b = 0;
                    for (c = a.length; b < c; b++) {
                        var e = a[b], f = p.get(e[0]);
                        f[e[1]].apply(f, e[2])
                    }
                }

                if (!m.get(a)) {
                    m.put(a, !0);
                    try {
                        y(a) ? (c = Tb(a), b = b.concat(g(c.requires)).concat(c._runBlocks), d(c._invokeQueue), d(c._configBlocks)) : D(a) ? b.push(p.invoke(a)) : M(a) ? b.push(p.invoke(a)) : Sa(a, "module")
                    } catch (e) {
                        throw M(a) && (a = a[a.length - 1]), e.message && e.stack &&
                        -1 == e.stack.indexOf(e.message) && (e = e.message + "\n" + e.stack), Ia("modulerr", a, e.stack || e.message || e);
                    }
                }
            });
            return b
        }

        function h(a, c) {
            function d(b, e) {
                if (a.hasOwnProperty(b)) {
                    if (a[b] === k) throw Ia("cdep", b + " <- " + l.join(" <- "));
                    return a[b]
                }
                try {
                    return l.unshift(b), a[b] = k, a[b] = c(b, e)
                } catch (f) {
                    throw a[b] === k && delete a[b], f;
                } finally {
                    l.shift()
                }
            }

            function e(a, c, f) {
                var g = [];
                a = eb.$$annotate(a, b, f);
                for (var h = 0, k = a.length; h < k; h++) {
                    var l = a[h];
                    if ("string" !== typeof l) throw Ia("itkn", l);
                    g.push(c && c.hasOwnProperty(l) ? c[l] :
                        d(l, f))
                }
                return g
            }

            return {
                invoke: function (a, b, c, d) {
                    "string" === typeof c && (d = c, c = null);
                    c = e(a, c, d);
                    M(a) && (a = a[a.length - 1]);
                    d = 11 >= Da ? !1 : "function" === typeof a && /^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a));
                    return d ? (c.unshift(null), new (Function.prototype.bind.apply(a, c))) : a.apply(b, c)
                }, instantiate: function (a, b, c) {
                    var d = M(a) ? a[a.length - 1] : a;
                    a = e(a, b, c);
                    a.unshift(null);
                    return new (Function.prototype.bind.apply(d, a))
                }, get: d, annotate: eb.$$annotate, has: function (b) {
                    return n.hasOwnProperty(b +
                        "Provider") || a.hasOwnProperty(b)
                }
            }
        }

        b = !0 === b;
        var k = {}, l = [], m = new Ua([], !0), n = {
            $provide: {
                provider: d(c), factory: d(f), service: d(function (a, b) {
                    return f(a, ["$injector", function (a) {
                        return a.instantiate(b)
                    }])
                }), value: d(function (a, b) {
                    return f(a, da(b), !1)
                }), constant: d(function (a, b) {
                    Ta(a, "constant");
                    n[a] = b;
                    F[a] = b
                }), decorator: function (a, b) {
                    var c = p.get(a + "Provider"), d = c.$get;
                    c.$get = function () {
                        var a = x.invoke(d, c);
                        return x.invoke(b, null, {$delegate: a})
                    }
                }
            }
        }, p = n.$injector = h(n, function (a, b) {
            ea.isString(b) && l.push(b);
            throw Ia("unpr", l.join(" <- "));
        }), F = {}, L = h(F, function (a, b) {
            var c = p.get(a + "Provider", b);
            return x.invoke(c.$get, c, u, a)
        }), x = L;
        n.$injectorProvider = {$get: da(L)};
        var r = g(a), x = L.get("$injector");
        x.strictDi = b;
        q(r, function (a) {
            a && x.invoke(a)
        });
        return x
    }

    function Ve() {
        var a = !0;
        this.disableAutoScrolling = function () {
            a = !1
        };
        this.$get = ["$window", "$location", "$rootScope", function (b, d, c) {
            function e(a) {
                var b = null;
                Array.prototype.some.call(a, function (a) {
                    if ("a" === oa(a)) return b = a, !0
                });
                return b
            }

            function f(a) {
                if (a) {
                    a.scrollIntoView();
                    var c;
                    c = g.yOffset;
                    D(c) ? c = c() : Pb(c) ? (c = c[0], c = "fixed" !== b.getComputedStyle(c).position ? 0 : c.getBoundingClientRect().bottom) : R(c) || (c = 0);
                    c && (a = a.getBoundingClientRect().top, b.scrollBy(0, a - c))
                } else b.scrollTo(0, 0)
            }

            function g(a) {
                a = y(a) ? a : d.hash();
                var b;
                a ? (b = h.getElementById(a)) ? f(b) : (b = e(h.getElementsByName(a))) ? f(b) : "top" === a && f(null) : f(null)
            }

            var h = b.document;
            a && c.$watch(function () {
                return d.hash()
            }, function (a, b) {
                a === b && "" === a || Nf(function () {
                    c.$evalAsync(g)
                })
            });
            return g
        }]
    }

    function ib(a, b) {
        if (!a && !b) return "";
        if (!a) return b;
        if (!b) return a;
        M(a) && (a = a.join(" "));
        M(b) && (b = b.join(" "));
        return a + " " + b
    }

    function Wf(a) {
        y(a) && (a = a.split(" "));
        var b = V();
        q(a, function (a) {
            a.length && (b[a] = !0)
        });
        return b
    }

    function Ja(a) {
        return J(a) ? a : {}
    }

    function Xf(a, b, d, c) {
        function e(a) {
            try {
                a.apply(null, Aa.call(arguments, 1))
            } finally {
                if (L--, 0 === L) for (; x.length;) try {
                    x.pop()()
                } catch (b) {
                    d.error(b)
                }
            }
        }

        function f() {
            t = null;
            g();
            h()
        }

        function g() {
            r = G();
            r = z(r) ? null : r;
            na(r, I) && (r = I);
            I = r
        }

        function h() {
            if (v !== k.url() || w !== r) v = k.url(), w = r, q(C, function (a) {
                a(k.url(),
                    r)
            })
        }

        var k = this, l = a.location, m = a.history, n = a.setTimeout, p = a.clearTimeout, F = {};
        k.isMock = !1;
        var L = 0, x = [];
        k.$$completeOutstandingRequest = e;
        k.$$incOutstandingRequestCount = function () {
            L++
        };
        k.notifyWhenNoOutstandingRequests = function (a) {
            0 === L ? a() : x.push(a)
        };
        var r, w, v = l.href, Q = b.find("base"), t = null, G = c.history ? function () {
            try {
                return m.state
            } catch (a) {
            }
        } : E;
        g();
        w = r;
        k.url = function (b, d, e) {
            z(e) && (e = null);
            l !== a.location && (l = a.location);
            m !== a.history && (m = a.history);
            if (b) {
                var f = w === e;
                if (v === b && (!c.history || f)) return k;
                var h = v && Ka(v) === Ka(b);
                v = b;
                w = e;
                if (!c.history || h && f) {
                    if (!h || t) t = b;
                    d ? l.replace(b) : h ? (d = l, e = b.indexOf("#"), e = -1 === e ? "" : b.substr(e), d.hash = e) : l.href = b;
                    l.href !== b && (t = b)
                } else m[d ? "replaceState" : "pushState"](e, "", b), g(), w = r;
                return k
            }
            return t || l.href.replace(/%27/g, "'")
        };
        k.state = function () {
            return r
        };
        var C = [], K = !1, I = null;
        k.onUrlChange = function (b) {
            if (!K) {
                if (c.history) H(a).on("popstate", f);
                H(a).on("hashchange", f);
                K = !0
            }
            C.push(b);
            return b
        };
        k.$$applicationDestroyed = function () {
            H(a).off("hashchange popstate", f)
        };
        k.$$checkUrlChange = h;
        k.baseHref = function () {
            var a = Q.attr("href");
            return a ? a.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
        };
        k.defer = function (a, b) {
            var c;
            L++;
            c = n(function () {
                delete F[c];
                e(a)
            }, b || 0);
            F[c] = !0;
            return c
        };
        k.defer.cancel = function (a) {
            return F[a] ? (delete F[a], p(a), e(E), !0) : !1
        }
    }

    function bf() {
        this.$get = ["$window", "$log", "$sniffer", "$document", function (a, b, d, c) {
            return new Xf(a, c, b, d)
        }]
    }

    function cf() {
        this.$get = function () {
            function a(a, c) {
                function e(a) {
                    a != n && (p ? p == a && (p = a.n) : p = a, f(a.n, a.p), f(a, n), n = a, n.n =
                        null)
                }

                function f(a, b) {
                    a != b && (a && (a.p = b), b && (b.n = a))
                }

                if (a in b) throw O("$cacheFactory")("iid", a);
                var g = 0, h = S({}, c, {id: a}), k = V(), l = c && c.capacity || Number.MAX_VALUE, m = V(), n = null,
                    p = null;
                return b[a] = {
                    put: function (a, b) {
                        if (!z(b)) {
                            if (l < Number.MAX_VALUE) {
                                var c = m[a] || (m[a] = {key: a});
                                e(c)
                            }
                            a in k || g++;
                            k[a] = b;
                            g > l && this.remove(p.key);
                            return b
                        }
                    }, get: function (a) {
                        if (l < Number.MAX_VALUE) {
                            var b = m[a];
                            if (!b) return;
                            e(b)
                        }
                        return k[a]
                    }, remove: function (a) {
                        if (l < Number.MAX_VALUE) {
                            var b = m[a];
                            if (!b) return;
                            b == n && (n = b.p);
                            b == p && (p =
                                b.n);
                            f(b.n, b.p);
                            delete m[a]
                        }
                        a in k && (delete k[a], g--)
                    }, removeAll: function () {
                        k = V();
                        g = 0;
                        m = V();
                        n = p = null
                    }, destroy: function () {
                        m = h = k = null;
                        delete b[a]
                    }, info: function () {
                        return S({}, h, {size: g})
                    }
                }
            }

            var b = {};
            a.info = function () {
                var a = {};
                q(b, function (b, e) {
                    a[e] = b.info()
                });
                return a
            };
            a.get = function (a) {
                return b[a]
            };
            return a
        }
    }

    function yf() {
        this.$get = ["$cacheFactory", function (a) {
            return a("templates")
        }]
    }

    function Cc(a, b) {
        function d(a, b, c) {
            var d = /^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/, e = {};
            q(a, function (a, f) {
                if (a in m) e[f] =
                    m[a]; else {
                    var g = a.match(d);
                    if (!g) throw ga("iscp", b, f, a, c ? "controller bindings definition" : "isolate scope definition");
                    e[f] = {mode: g[1][0], collection: "*" === g[2], optional: "?" === g[3], attrName: g[4] || f};
                    g[4] && (m[a] = e[f])
                }
            });
            return e
        }

        function c(a) {
            var b = a.charAt(0);
            if (!b || b !== N(b)) throw ga("baddir", a);
            if (a !== a.trim()) throw ga("baddir", a);
        }

        var e = {}, f = /^\s*directive\:\s*([\w\-]+)\s+(.*)$/, g = /(([\w\-]+)(?:\:([^;]+))?;?)/,
            h = $d("ngSrc,ngSrcset,src,srcset"), k = /^(?:(\^\^?)?(\?)?(\^\^?)?)?/, l = /^(on[a-z]+|formaction)$/,
            m = V();
        this.directive = function L(b, d) {
            Ta(b, "directive");
            y(b) ? (c(b), tb(d, "directiveFactory"), e.hasOwnProperty(b) || (e[b] = [], a.factory(b + "Directive", ["$injector", "$exceptionHandler", function (a, c) {
                var d = [];
                q(e[b], function (e, f) {
                    try {
                        var g = a.invoke(e);
                        D(g) ? g = {compile: da(g)} : !g.compile && g.link && (g.compile = da(g.link));
                        g.priority = g.priority || 0;
                        g.index = f;
                        g.name = g.name || b;
                        g.require = g.require || g.controller && g.name;
                        g.restrict = g.restrict || "EA";
                        g.$$moduleName = e.$$moduleName;
                        d.push(g)
                    } catch (h) {
                        c(h)
                    }
                });
                return d
            }])),
                e[b].push(d)) : q(b, qc(L));
            return this
        };
        this.component = function (a, b) {
            function c(a) {
                function e(b) {
                    return D(b) || M(b) ? function (c, d) {
                        return a.invoke(b, this, {$element: c, $attrs: d})
                    } : b
                }

                var f = b.template || b.templateUrl ? b.template : "";
                return {
                    controller: d,
                    controllerAs: Uc(b.controller) || b.controllerAs || "$ctrl",
                    template: e(f),
                    templateUrl: e(b.templateUrl),
                    transclude: b.transclude,
                    scope: {},
                    bindToController: b.bindings || {},
                    restrict: "E",
                    require: b.require
                }
            }

            var d = b.controller || E;
            q(b, function (a, b) {
                "$" === b.charAt(0) && (c[b] =
                    a, d[b] = a)
            });
            c.$inject = ["$injector"];
            return this.directive(a, c)
        };
        this.aHrefSanitizationWhitelist = function (a) {
            return A(a) ? (b.aHrefSanitizationWhitelist(a), this) : b.aHrefSanitizationWhitelist()
        };
        this.imgSrcSanitizationWhitelist = function (a) {
            return A(a) ? (b.imgSrcSanitizationWhitelist(a), this) : b.imgSrcSanitizationWhitelist()
        };
        var n = !0;
        this.debugInfoEnabled = function (a) {
            return A(a) ? (n = a, this) : n
        };
        var p = 10;
        this.onChangesTtl = function (a) {
            return arguments.length ? (p = a, this) : p
        };
        this.$get = ["$injector", "$interpolate",
            "$exceptionHandler", "$templateRequest", "$parse", "$controller", "$rootScope", "$sce", "$animate", "$$sanitizeUri", function (a, b, c, m, v, Q, t, G, C, K) {
                function I() {
                    try {
                        if (!--pa) throw $ = u, ga("infchng", p);
                        t.$apply(function () {
                            for (var a = 0, b = $.length; a < b; ++a) $[a]();
                            $ = u
                        })
                    } finally {
                        pa++
                    }
                }

                function qa(a, b) {
                    if (b) {
                        var c = Object.keys(b), d, e, f;
                        d = 0;
                        for (e = c.length; d < e; d++) f = c[d], this[f] = b[f]
                    } else this.$attr = {};
                    this.$$element = a
                }

                function Ca(a, b, c) {
                    la.innerHTML = "<span " + b + ">";
                    b = la.firstChild.attributes;
                    var d = b[0];
                    b.removeNamedItem(d.name);
                    d.value = c;
                    a.attributes.setNamedItem(d)
                }

                function B(a, b) {
                    try {
                        a.addClass(b)
                    } catch (c) {
                    }
                }

                function ba(a, b, c, d, e) {
                    a instanceof H || (a = H(a));
                    for (var f = /\S+/, g = 0, h = a.length; g < h; g++) {
                        var k = a[g];
                        k.nodeType === Pa && k.nodeValue.match(f) && Mc(k, a[g] = P.createElement("span"))
                    }
                    var l = xa(a, b, a, c, d, e);
                    ba.$$addScopeClass(a);
                    var m = null;
                    return function (b, c, d) {
                        tb(b, "scope");
                        e && e.needsNewScope && (b = b.$parent.$new());
                        d = d || {};
                        var f = d.parentBoundTranscludeFn, g = d.transcludeControllers;
                        d = d.futureParentElement;
                        f && f.$$boundTransclude &&
                        (f = f.$$boundTransclude);
                        m || (m = (d = d && d[0]) ? "foreignobject" !== oa(d) && ka.call(d).match(/SVG/) ? "svg" : "html" : "html");
                        d = "html" !== m ? H(ca(m, H("<div>").append(a).html())) : c ? Ra.clone.call(a) : a;
                        if (g) for (var h in g) d.data("$" + h + "Controller", g[h].instance);
                        ba.$$addScopeInfo(d, b);
                        c && c(d, b);
                        l && l(b, d, d, f);
                        return d
                    }
                }

                function xa(a, b, c, d, e, f) {
                    function g(a, c, d, e) {
                        var f, k, l, m, n, p, G;
                        if (r) for (G = Array(c.length), m = 0; m < h.length; m += 3) f = h[m], G[f] = c[f]; else G = c;
                        m = 0;
                        for (n = h.length; m < n;) k = G[h[m++]], c = h[m++], f = h[m++], c ? (c.scope ?
                            (l = a.$new(), ba.$$addScopeInfo(H(k), l)) : l = a, p = c.transcludeOnThisElement ? s(a, c.transclude, e) : !c.templateOnThisElement && e ? e : !e && b ? s(a, b) : null, c(f, l, k, d, p)) : f && f(a, k.childNodes, u, e)
                    }

                    for (var h = [], k, l, m, n, r, p = 0; p < a.length; p++) {
                        k = new qa;
                        l = A(a[p], [], k, 0 === p ? d : u, e);
                        (f = l.length ? ra(l, a[p], k, b, c, null, [], [], f) : null) && f.scope && ba.$$addScopeClass(k.$$element);
                        k = f && f.terminal || !(m = a[p].childNodes) || !m.length ? null : xa(m, f ? (f.transcludeOnThisElement || !f.templateOnThisElement) && f.transclude : b);
                        if (f || k) h.push(p, f, k),
                            n = !0, r = r || f;
                        f = null
                    }
                    return n ? g : null
                }

                function s(a, b, c) {
                    function d(e, f, g, h, k) {
                        e || (e = a.$new(!1, k), e.$$transcluded = !0);
                        return b(e, f, {parentBoundTranscludeFn: c, transcludeControllers: g, futureParentElement: h})
                    }

                    var e = d.$$slots = V(), f;
                    for (f in b.$$slots) e[f] = b.$$slots[f] ? s(a, b.$$slots[f], c) : null;
                    return d
                }

                function A(a, b, c, d, e) {
                    var h = c.$attr, k;
                    switch (a.nodeType) {
                        case 1:
                            Fa(b, ya(oa(a)), "E", d, e);
                            for (var l, m, n, r = a.attributes, p = 0, G = r && r.length; p < G; p++) {
                                var v = !1, C = !1;
                                l = r[p];
                                k = l.name;
                                m = W(l.value);
                                l = ya(k);
                                if (n = za.test(l)) k =
                                    k.replace(Vc, "").substr(8).replace(/_(.)/g, function (a, b) {
                                        return b.toUpperCase()
                                    });
                                (l = l.match(Ba)) && R(l[1]) && (v = k, C = k.substr(0, k.length - 5) + "end", k = k.substr(0, k.length - 6));
                                l = ya(k.toLowerCase());
                                h[l] = k;
                                if (n || !c.hasOwnProperty(l)) c[l] = m, Rc(a, l) && (c[l] = !0);
                                fa(a, b, m, l, n);
                                Fa(b, l, "A", d, e, v, C)
                            }
                            a = a.className;
                            J(a) && (a = a.animVal);
                            if (y(a) && "" !== a) for (; k = g.exec(a);) l = ya(k[2]), Fa(b, l, "C", d, e) && (c[l] = W(k[3])), a = a.substr(k.index + k[0].length);
                            break;
                        case Pa:
                            if (11 === Da) for (; a.parentNode && a.nextSibling && a.nextSibling.nodeType ===
                                                  Pa;) a.nodeValue += a.nextSibling.nodeValue, a.parentNode.removeChild(a.nextSibling);
                            Y(b, a.nodeValue);
                            break;
                        case 8:
                            try {
                                if (k = f.exec(a.nodeValue)) l = ya(k[1]), Fa(b, l, "M", d, e) && (c[l] = W(k[2]))
                            } catch (w) {
                            }
                    }
                    b.sort(Z);
                    return b
                }

                function Wc(a, b, c) {
                    var d = [], e = 0;
                    if (b && a.hasAttribute && a.hasAttribute(b)) {
                        do {
                            if (!a) throw ga("uterdir", b, c);
                            1 == a.nodeType && (a.hasAttribute(b) && e++, a.hasAttribute(c) && e--);
                            d.push(a);
                            a = a.nextSibling
                        } while (0 < e)
                    } else d.push(a);
                    return H(d)
                }

                function O(a, b, c) {
                    return function (d, e, f, g, h) {
                        e = Wc(e[0],
                            b, c);
                        return a(d, e, f, g, h)
                    }
                }

                function Zb(a, b, c, d, e, f) {
                    var g;
                    return a ? ba(b, c, d, e, f) : function () {
                        g || (g = ba(b, c, d, e, f), b = c = f = null);
                        return g.apply(this, arguments)
                    }
                }

                function ra(a, b, d, e, f, g, h, k, l) {
                    function m(a, b, c, d) {
                        if (a) {
                            c && (a = O(a, c, d));
                            a.require = B.require;
                            a.directiveName = L;
                            if (C === B || B.$$isolateScope) a = ia(a, {isolateScope: !0});
                            h.push(a)
                        }
                        if (b) {
                            c && (b = O(b, c, d));
                            b.require = B.require;
                            b.directiveName = L;
                            if (C === B || B.$$isolateScope) b = ia(b, {isolateScope: !0});
                            k.push(b)
                        }
                    }

                    function n(a, c, e, f, g) {
                        function l(a, b, c, d) {
                            var e;
                            ab(a) || (d = c, c = b, b = a, a = u);
                            Ca && (e = K);
                            c || (c = Ca ? t.parent() : t);
                            if (d) {
                                var f = g.$$slots[d];
                                if (f) return f(a, b, e, c, s);
                                if (z(f)) throw ga("noslot", d, wa(t));
                            } else return g(a, b, e, c, s)
                        }

                        var m, r, p, B, I, K, x, t;
                        b === e ? (f = d, t = d.$$element) : (t = H(e), f = new qa(t, d));
                        I = c;
                        C ? B = c.$new(!0) : G && (I = c.$parent);
                        g && (x = l, x.$$boundTransclude = g, x.isSlotFilled = function (a) {
                            return !!g.$$slots[a]
                        });
                        v && (K = T(t, f, x, v, B, c, C));
                        C && (ba.$$addScopeInfo(t, B, !0, !(w && (w === C || w === C.$$originalDirective))), ba.$$addScopeClass(t, !0), B.$$isolateBindings = C.$$isolateBindings,
                        (p = ha(c, f, B, B.$$isolateBindings, C)) && B.$on("$destroy", p));
                        for (r in K) {
                            p = v[r];
                            var Va = K[r], Q = p.$$bindings.bindToController;
                            Va.identifier && Q && (m = ha(I, f, Va.instance, Q, p));
                            var L = Va();
                            L !== Va.instance && (Va.instance = L, t.data("$" + p.name + "Controller", L), m && m(), m = ha(I, f, Va.instance, Q, p))
                        }
                        q(v, function (a, b) {
                            var c = a.require;
                            a.bindToController && !M(c) && J(c) && S(K[b].instance, jb(b, c, t, K))
                        });
                        q(K, function (a) {
                            var b = a.instance;
                            D(b.$onInit) && b.$onInit();
                            D(b.$onDestroy) && I.$on("$destroy", function () {
                                b.$onDestroy()
                            })
                        });
                        m =
                            0;
                        for (r = h.length; m < r; m++) p = h[m], ja(p, p.isolateScope ? B : c, t, f, p.require && jb(p.directiveName, p.require, t, K), x);
                        var s = c;
                        C && (C.template || null === C.templateUrl) && (s = B);
                        a && a(s, e.childNodes, u, g);
                        for (m = k.length - 1; 0 <= m; m--) p = k[m], ja(p, p.isolateScope ? B : c, t, f, p.require && jb(p.directiveName, p.require, t, K), x);
                        q(K, function (a) {
                            a = a.instance;
                            D(a.$postLink) && a.$postLink()
                        })
                    }

                    l = l || {};
                    for (var p = -Number.MAX_VALUE, G = l.newScopeDirective, v = l.controllerDirectives, C = l.newIsolateScopeDirective, w = l.templateDirective, I = l.nonTlbTranscludeDirective,
                             K = !1, x = !1, Ca = l.hasElementTranscludeDirective, t = d.$$element = H(b), B, L, Q, s = e, xa, Ea = !1, E = !1, y, ra = 0, N = a.length; ra < N; ra++) {
                        B = a[ra];
                        var R = B.$$start, Fa = B.$$end;
                        R && (t = Wc(b, R, Fa));
                        Q = u;
                        if (p > B.priority) break;
                        if (y = B.scope) B.templateUrl || (J(y) ? (X("new/isolated scope", C || G, B, t), C = B) : X("new/isolated scope", C, B, t)), G = G || B;
                        L = B.name;
                        if (!Ea && (B.replace && (B.templateUrl || B.template) || B.transclude && !B.$$tlb)) {
                            for (y = ra + 1; Ea = a[y++];) if (Ea.transclude && !Ea.$$tlb || Ea.replace && (Ea.templateUrl || Ea.template)) {
                                E = !0;
                                break
                            }
                            Ea = !0
                        }
                        !B.templateUrl &&
                        B.controller && (y = B.controller, v = v || V(), X("'" + L + "' controller", v[L], B, t), v[L] = B);
                        if (y = B.transclude) if (K = !0, B.$$tlb || (X("transclusion", I, B, t), I = B), "element" == y) Ca = !0, p = B.priority, Q = t, t = d.$$element = H(ba.$$createComment(L, d[L])), b = t[0], da(f, Aa.call(Q, 0), b), Q[0].$$parentNode = Q[0].parentNode, s = Zb(E, Q, e, p, g && g.name, {nonTlbTranscludeDirective: I}); else {
                            var P = V();
                            Q = H(Wb(b)).contents();
                            if (J(y)) {
                                Q = [];
                                var Z = V(), Y = V();
                                q(y, function (a, b) {
                                    var c = "?" === a.charAt(0);
                                    a = c ? a.substring(1) : a;
                                    Z[a] = b;
                                    P[b] = null;
                                    Y[b] = c
                                });
                                q(t.contents(),
                                    function (a) {
                                        var b = Z[ya(oa(a))];
                                        b ? (Y[b] = !0, P[b] = P[b] || [], P[b].push(a)) : Q.push(a)
                                    });
                                q(Y, function (a, b) {
                                    if (!a) throw ga("reqslot", b);
                                });
                                for (var $ in P) P[$] && (P[$] = Zb(E, P[$], e))
                            }
                            t.empty();
                            s = Zb(E, Q, e, u, u, {needsNewScope: B.$$isolateScope || B.$$newScope});
                            s.$$slots = P
                        }
                        if (B.template) if (x = !0, X("template", w, B, t), w = B, y = D(B.template) ? B.template(t, d) : B.template, y = ua(y), B.replace) {
                            g = B;
                            Q = Ub.test(y) ? Xc(ca(B.templateNamespace, W(y))) : [];
                            b = Q[0];
                            if (1 != Q.length || 1 !== b.nodeType) throw ga("tplrt", L, "");
                            da(f, t, b);
                            N = {$attr: {}};
                            y = A(b, [], N);
                            var ea = a.splice(ra + 1, a.length - (ra + 1));
                            (C || G) && Yc(y, C, G);
                            a = a.concat(y).concat(ea);
                            U(d, N);
                            N = a.length
                        } else t.html(y);
                        if (B.templateUrl) x = !0, X("template", w, B, t), w = B, B.replace && (g = B), n = aa(a.splice(ra, a.length - ra), t, d, f, K && s, h, k, {
                            controllerDirectives: v,
                            newScopeDirective: G !== B && G,
                            newIsolateScopeDirective: C,
                            templateDirective: w,
                            nonTlbTranscludeDirective: I
                        }), N = a.length; else if (B.compile) try {
                            xa = B.compile(t, d, s), D(xa) ? m(null, xa, R, Fa) : xa && m(xa.pre, xa.post, R, Fa)
                        } catch (fa) {
                            c(fa, wa(t))
                        }
                        B.terminal && (n.terminal =
                            !0, p = Math.max(p, B.priority))
                    }
                    n.scope = G && !0 === G.scope;
                    n.transcludeOnThisElement = K;
                    n.templateOnThisElement = x;
                    n.transclude = s;
                    l.hasElementTranscludeDirective = Ca;
                    return n
                }

                function jb(a, b, c, d) {
                    var e;
                    if (y(b)) {
                        var f = b.match(k);
                        b = b.substring(f[0].length);
                        var g = f[1] || f[3], f = "?" === f[2];
                        "^^" === g ? c = c.parent() : e = (e = d && d[b]) && e.instance;
                        if (!e) {
                            var h = "$" + b + "Controller";
                            e = g ? c.inheritedData(h) : c.data(h)
                        }
                        if (!e && !f) throw ga("ctreq", b, a);
                    } else if (M(b)) for (e = [], g = 0, f = b.length; g < f; g++) e[g] = jb(a, b[g], c, d); else J(b) && (e =
                        {}, q(b, function (b, f) {
                        e[f] = jb(a, b, c, d)
                    }));
                    return e || null
                }

                function T(a, b, c, d, e, f, g) {
                    var h = V(), k;
                    for (k in d) {
                        var l = d[k],
                            m = {$scope: l === g || l.$$isolateScope ? e : f, $element: a, $attrs: b, $transclude: c},
                            n = l.controller;
                        "@" == n && (n = b[l.name]);
                        m = Q(n, m, !0, l.controllerAs);
                        h[l.name] = m;
                        a.data("$" + l.name + "Controller", m.instance)
                    }
                    return h
                }

                function Yc(a, b, c) {
                    for (var d = 0, e = a.length; d < e; d++) a[d] = Qb(a[d], {$$isolateScope: b, $$newScope: c})
                }

                function Fa(b, f, g, h, k, l, m) {
                    if (f === k) return null;
                    k = null;
                    if (e.hasOwnProperty(f)) {
                        var n;
                        f =
                            a.get(f + "Directive");
                        for (var p = 0, G = f.length; p < G; p++) try {
                            if (n = f[p], (z(h) || h > n.priority) && -1 != n.restrict.indexOf(g)) {
                                l && (n = Qb(n, {$$start: l, $$end: m}));
                                if (!n.$$bindings) {
                                    var v = n, C = n, w = n.name, B = {isolateScope: null, bindToController: null};
                                    J(C.scope) && (!0 === C.bindToController ? (B.bindToController = d(C.scope, w, !0), B.isolateScope = {}) : B.isolateScope = d(C.scope, w, !1));
                                    J(C.bindToController) && (B.bindToController = d(C.bindToController, w, !0));
                                    if (J(B.bindToController)) {
                                        var I = C.controller, K = C.controllerAs;
                                        if (!I) throw ga("noctrl",
                                            w);
                                        if (!Uc(I, K)) throw ga("noident", w);
                                    }
                                    var x = v.$$bindings = B;
                                    J(x.isolateScope) && (n.$$isolateBindings = x.isolateScope)
                                }
                                b.push(n);
                                k = n
                            }
                        } catch (t) {
                            c(t)
                        }
                    }
                    return k
                }

                function R(b) {
                    if (e.hasOwnProperty(b)) for (var c = a.get(b + "Directive"), d = 0, f = c.length; d < f; d++) if (b = c[d], b.multiElement) return !0;
                    return !1
                }

                function U(a, b) {
                    var c = b.$attr, d = a.$attr, e = a.$$element;
                    q(a, function (d, e) {
                        "$" != e.charAt(0) && (b[e] && b[e] !== d && (d += ("style" === e ? ";" : " ") + b[e]), a.$set(e, d, !0, c[e]))
                    });
                    q(b, function (b, f) {
                        "class" == f ? (B(e, b), a["class"] = (a["class"] ?
                            a["class"] + " " : "") + b) : "style" == f ? (e.attr("style", e.attr("style") + ";" + b), a.style = (a.style ? a.style + ";" : "") + b) : "$" == f.charAt(0) || a.hasOwnProperty(f) || (a[f] = b, d[f] = c[f])
                    })
                }

                function aa(a, b, c, d, e, f, g, h) {
                    var k = [], l, n, p = b[0], r = a.shift(),
                        G = Qb(r, {templateUrl: null, transclude: null, replace: null, $$originalDirective: r}),
                        v = D(r.templateUrl) ? r.templateUrl(b, c) : r.templateUrl, C = r.templateNamespace;
                    b.empty();
                    m(v).then(function (m) {
                        var w, I;
                        m = ua(m);
                        if (r.replace) {
                            m = Ub.test(m) ? Xc(ca(C, W(m))) : [];
                            w = m[0];
                            if (1 != m.length || 1 !==
                                w.nodeType) throw ga("tplrt", r.name, v);
                            m = {$attr: {}};
                            da(d, b, w);
                            var K = A(w, [], m);
                            J(r.scope) && Yc(K, !0);
                            a = K.concat(a);
                            U(c, m)
                        } else w = p, b.html(m);
                        a.unshift(G);
                        l = ra(a, w, c, e, b, r, f, g, h);
                        q(d, function (a, c) {
                            a == w && (d[c] = b[0])
                        });
                        for (n = xa(b[0].childNodes, e); k.length;) {
                            m = k.shift();
                            I = k.shift();
                            var x = k.shift(), t = k.shift(), K = b[0];
                            if (!m.$$destroyed) {
                                if (I !== p) {
                                    var qa = I.className;
                                    h.hasElementTranscludeDirective && r.replace || (K = Wb(w));
                                    da(x, H(I), K);
                                    B(H(K), qa)
                                }
                                I = l.transcludeOnThisElement ? s(m, l.transclude, t) : t;
                                l(n, m, K, d, I)
                            }
                        }
                        k =
                            null
                    });
                    return function (a, b, c, d, e) {
                        a = e;
                        b.$$destroyed || (k ? k.push(b, c, d, a) : (l.transcludeOnThisElement && (a = s(b, l.transclude, e)), l(n, b, c, d, a)))
                    }
                }

                function Z(a, b) {
                    var c = b.priority - a.priority;
                    return 0 !== c ? c : a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index
                }

                function X(a, b, c, d) {
                    function e(a) {
                        return a ? " (module: " + a + ")" : ""
                    }

                    if (b) throw ga("multidir", b.name, e(b.$$moduleName), c.name, e(c.$$moduleName), a, wa(d));
                }

                function Y(a, c) {
                    var d = b(c, !0);
                    d && a.push({
                        priority: 0, compile: function (a) {
                            a = a.parent();
                            var b = !!a.length;
                            b && ba.$$addBindingClass(a);
                            return function (a, c) {
                                var e = c.parent();
                                b || ba.$$addBindingClass(e);
                                ba.$$addBindingInfo(e, d.expressions);
                                a.$watch(d, function (a) {
                                    c[0].nodeValue = a
                                })
                            }
                        }
                    })
                }

                function ca(a, b) {
                    a = N(a || "html");
                    switch (a) {
                        case "svg":
                        case "math":
                            var c = P.createElement("div");
                            c.innerHTML = "<" + a + ">" + b + "</" + a + ">";
                            return c.childNodes[0].childNodes;
                        default:
                            return b
                    }
                }

                function ea(a, b) {
                    if ("srcdoc" == b) return G.HTML;
                    var c = oa(a);
                    if ("xlinkHref" == b || "form" == c && "action" == b || "img" != c && ("src" == b || "ngSrc" == b)) return G.RESOURCE_URL
                }

                function fa(a, c, d, e, f) {
                    var g = ea(a, e);
                    f = h[e] || f;
                    var k = b(d, !0, g, f);
                    if (k) {
                        if ("multiple" === e && "select" === oa(a)) throw ga("selmulti", wa(a));
                        c.push({
                            priority: 100, compile: function () {
                                return {
                                    pre: function (a, c, h) {
                                        c = h.$$observers || (h.$$observers = V());
                                        if (l.test(e)) throw ga("nodomevents");
                                        var m = h[e];
                                        m !== d && (k = m && b(m, !0, g, f), d = m);
                                        k && (h[e] = k(a), (c[e] || (c[e] = [])).$$inter = !0, (h.$$observers && h.$$observers[e].$$scope || a).$watch(k, function (a, b) {
                                            "class" === e && a != b ? h.$updateClass(a, b) : h.$set(e, a)
                                        }))
                                    }
                                }
                            }
                        })
                    }
                }

                function da(a, b,
                            c) {
                    var d = b[0], e = b.length, f = d.parentNode, g, h;
                    if (a) for (g = 0, h = a.length; g < h; g++) if (a[g] == d) {
                        a[g++] = c;
                        h = g + e - 1;
                        for (var k = a.length; g < k; g++, h++) h < k ? a[g] = a[h] : delete a[g];
                        a.length -= e - 1;
                        a.context === d && (a.context = c);
                        break
                    }
                    f && f.replaceChild(c, d);
                    a = P.createDocumentFragment();
                    for (g = 0; g < e; g++) a.appendChild(b[g]);
                    H.hasData(d) && (H.data(c, H.data(d)), H(d).off("$destroy"));
                    H.cleanData(a.querySelectorAll("*"));
                    for (g = 1; g < e; g++) delete b[g];
                    b[0] = c;
                    b.length = 1
                }

                function ia(a, b) {
                    return S(function () {
                            return a.apply(null, arguments)
                        },
                        a, b)
                }

                function ja(a, b, d, e, f, g) {
                    try {
                        a(b, d, e, f, g)
                    } catch (h) {
                        c(h, wa(d))
                    }
                }

                function ha(a, c, d, e, f) {
                    function g(b, c, e) {
                        D(d.$onChanges) && c !== e && ($ || (a.$$postDigest(I), $ = []), l || (l = {}, $.push(h)), l[b] && (e = l[b].previousValue), l[b] = {
                            previousValue: e,
                            currentValue: c
                        })
                    }

                    function h() {
                        d.$onChanges(l);
                        l = u
                    }

                    var k = [], l;
                    q(e, function (e, h) {
                        var l = e.attrName, m = e.optional, n, r, p, G;
                        switch (e.mode) {
                            case "@":
                                m || va.call(c, l) || (d[h] = c[l] = void 0);
                                c.$observe(l, function (a) {
                                    y(a) && (g(h, a, d[h]), d[h] = a)
                                });
                                c.$$observers[l].$$scope = a;
                                n = c[l];
                                y(n) ?
                                    d[h] = b(n)(a) : Oa(n) && (d[h] = n);
                                break;
                            case "=":
                                if (!va.call(c, l)) {
                                    if (m) break;
                                    c[l] = void 0
                                }
                                if (m && !c[l]) break;
                                r = v(c[l]);
                                G = r.literal ? na : function (a, b) {
                                    return a === b || a !== a && b !== b
                                };
                                p = r.assign || function () {
                                    n = d[h] = r(a);
                                    throw ga("nonassign", c[l], l, f.name);
                                };
                                n = d[h] = r(a);
                                m = function (b) {
                                    G(b, d[h]) || (G(b, n) ? p(a, b = d[h]) : d[h] = b);
                                    return n = b
                                };
                                m.$stateful = !0;
                                m = e.collection ? a.$watchCollection(c[l], m) : a.$watch(v(c[l], m), null, r.literal);
                                k.push(m);
                                break;
                            case "<":
                                if (!va.call(c, l)) {
                                    if (m) break;
                                    c[l] = void 0
                                }
                                if (m && !c[l]) break;
                                r = v(c[l]);
                                d[h] = r(a);
                                m = a.$watch(r, function (a) {
                                    g(h, a, d[h]);
                                    d[h] = a
                                }, r.literal);
                                k.push(m);
                                break;
                            case "&":
                                r = c.hasOwnProperty(l) ? v(c[l]) : E;
                                if (r === E && m) break;
                                d[h] = function (b) {
                                    return r(a, b)
                                }
                        }
                    });
                    return k.length && function () {
                        for (var a = 0, b = k.length; a < b; ++a) k[a]()
                    }
                }

                var ma = /^\w/, la = P.createElement("div"), pa = p, $;
                qa.prototype = {
                    $normalize: ya, $addClass: function (a) {
                        a && 0 < a.length && C.addClass(this.$$element, a)
                    }, $removeClass: function (a) {
                        a && 0 < a.length && C.removeClass(this.$$element, a)
                    }, $updateClass: function (a, b) {
                        var c = Zc(a, b);
                        c &&
                        c.length && C.addClass(this.$$element, c);
                        (c = Zc(b, a)) && c.length && C.removeClass(this.$$element, c)
                    }, $set: function (a, b, d, e) {
                        var f = Rc(this.$$element[0], a), g = $c[a], h = a;
                        f ? (this.$$element.prop(a, b), e = f) : g && (this[g] = b, h = g);
                        this[a] = b;
                        e ? this.$attr[a] = e : (e = this.$attr[a]) || (this.$attr[a] = e = zc(a, "-"));
                        f = oa(this.$$element);
                        if ("a" === f && ("href" === a || "xlinkHref" === a) || "img" === f && "src" === a) this[a] = b = K(b, "src" === a); else if ("img" === f && "srcset" === a) {
                            for (var f = "", g = W(b), k = /(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/, k = /\s/.test(g) ?
                                k : /(,)/, g = g.split(k), k = Math.floor(g.length / 2), l = 0; l < k; l++) var m = 2 * l, f = f + K(W(g[m]), !0), f = f + (" " + W(g[m + 1]));
                            g = W(g[2 * l]).split(/\s/);
                            f += K(W(g[0]), !0);
                            2 === g.length && (f += " " + W(g[1]));
                            this[a] = b = f
                        }
                        !1 !== d && (null === b || z(b) ? this.$$element.removeAttr(e) : ma.test(e) ? this.$$element.attr(e, b) : Ca(this.$$element[0], e, b));
                        (a = this.$$observers) && q(a[h], function (a) {
                            try {
                                a(b)
                            } catch (d) {
                                c(d)
                            }
                        })
                    }, $observe: function (a, b) {
                        var c = this, d = c.$$observers || (c.$$observers = V()), e = d[a] || (d[a] = []);
                        e.push(b);
                        t.$evalAsync(function () {
                            e.$$inter ||
                            !c.hasOwnProperty(a) || z(c[a]) || b(c[a])
                        });
                        return function () {
                            bb(e, b)
                        }
                    }
                };
                var sa = b.startSymbol(), ta = b.endSymbol(), ua = "{{" == sa && "}}" == ta ? $a : function (a) {
                    return a.replace(/\{\{/g, sa).replace(/}}/g, ta)
                }, za = /^ngAttr[A-Z]/, Ba = /^(.+)Start$/;
                ba.$$addBindingInfo = n ? function (a, b) {
                    var c = a.data("$binding") || [];
                    M(b) ? c = c.concat(b) : c.push(b);
                    a.data("$binding", c)
                } : E;
                ba.$$addBindingClass = n ? function (a) {
                    B(a, "ng-binding")
                } : E;
                ba.$$addScopeInfo = n ? function (a, b, c, d) {
                    a.data(c ? d ? "$isolateScopeNoTemplate" : "$isolateScope" : "$scope",
                        b)
                } : E;
                ba.$$addScopeClass = n ? function (a, b) {
                    B(a, b ? "ng-isolate-scope" : "ng-scope")
                } : E;
                ba.$$createComment = function (a, b) {
                    var c = "";
                    n && (c = " " + (a || "") + ": " + (b || "") + " ");
                    return P.createComment(c)
                };
                return ba
            }]
    }

    function ya(a) {
        return fb(a.replace(Vc, ""))
    }

    function Zc(a, b) {
        var d = "", c = a.split(/\s+/), e = b.split(/\s+/), f = 0;
        a:for (; f < c.length; f++) {
            for (var g = c[f], h = 0; h < e.length; h++) if (g == e[h]) continue a;
            d += (0 < d.length ? " " : "") + g
        }
        return d
    }

    function Xc(a) {
        a = H(a);
        var b = a.length;
        if (1 >= b) return a;
        for (; b--;) 8 === a[b].nodeType &&
        Yf.call(a, b, 1);
        return a
    }

    function Uc(a, b) {
        if (b && y(b)) return b;
        if (y(a)) {
            var d = ad.exec(a);
            if (d) return d[3]
        }
    }

    function df() {
        var a = {}, b = !1;
        this.has = function (b) {
            return a.hasOwnProperty(b)
        };
        this.register = function (b, c) {
            Ta(b, "controller");
            J(b) ? S(a, b) : a[b] = c
        };
        this.allowGlobals = function () {
            b = !0
        };
        this.$get = ["$injector", "$window", function (d, c) {
            function e(a, b, c, d) {
                if (!a || !J(a.$scope)) throw O("$controller")("noscp", d, b);
                a.$scope[b] = c
            }

            return function (f, g, h, k) {
                var l, m, n;
                h = !0 === h;
                k && y(k) && (n = k);
                if (y(f)) {
                    k = f.match(ad);
                    if (!k) throw Zf("ctrlfmt", f);
                    m = k[1];
                    n = n || k[3];
                    f = a.hasOwnProperty(m) ? a[m] : Bc(g.$scope, m, !0) || (b ? Bc(c, m, !0) : u);
                    Sa(f, m, !0)
                }
                if (h) return h = (M(f) ? f[f.length - 1] : f).prototype, l = Object.create(h || null), n && e(g, n, l, m || f.name), S(function () {
                    var a = d.invoke(f, l, g, m);
                    a !== l && (J(a) || D(a)) && (l = a, n && e(g, n, l, m || f.name));
                    return l
                }, {instance: l, identifier: n});
                l = d.instantiate(f, g, m);
                n && e(g, n, l, m || f.name);
                return l
            }
        }]
    }

    function ef() {
        this.$get = ["$window", function (a) {
            return H(a.document)
        }]
    }

    function ff() {
        this.$get = ["$log", function (a) {
            return function (b,
                             d) {
                a.error.apply(a, arguments)
            }
        }]
    }

    function $b(a) {
        return J(a) ? fa(a) ? a.toISOString() : db(a) : a
    }

    function lf() {
        this.$get = function () {
            return function (a) {
                if (!a) return "";
                var b = [];
                pc(a, function (a, c) {
                    null === a || z(a) || (M(a) ? q(a, function (a) {
                        b.push(ja(c) + "=" + ja($b(a)))
                    }) : b.push(ja(c) + "=" + ja($b(a))))
                });
                return b.join("&")
            }
        }
    }

    function mf() {
        this.$get = function () {
            return function (a) {
                function b(a, e, f) {
                    null === a || z(a) || (M(a) ? q(a, function (a, c) {
                        b(a, e + "[" + (J(a) ? c : "") + "]")
                    }) : J(a) && !fa(a) ? pc(a, function (a, c) {
                        b(a, e + (f ? "" : "[") + c + (f ?
                            "" : "]"))
                    }) : d.push(ja(e) + "=" + ja($b(a))))
                }

                if (!a) return "";
                var d = [];
                b(a, "", !0);
                return d.join("&")
            }
        }
    }

    function ac(a, b) {
        if (y(a)) {
            var d = a.replace($f, "").trim();
            if (d) {
                var c = b("Content-Type");
                (c = c && 0 === c.indexOf(bd)) || (c = (c = d.match(ag)) && bg[c[0]].test(d));
                c && (a = uc(d))
            }
        }
        return a
    }

    function cd(a) {
        var b = V(), d;
        y(a) ? q(a.split("\n"), function (a) {
            d = a.indexOf(":");
            var e = N(W(a.substr(0, d)));
            a = W(a.substr(d + 1));
            e && (b[e] = b[e] ? b[e] + ", " + a : a)
        }) : J(a) && q(a, function (a, d) {
            var f = N(d), g = W(a);
            f && (b[f] = b[f] ? b[f] + ", " + g : g)
        });
        return b
    }

    function dd(a) {
        var b;
        return function (d) {
            b || (b = cd(a));
            return d ? (d = b[N(d)], void 0 === d && (d = null), d) : b
        }
    }

    function ed(a, b, d, c) {
        if (D(c)) return c(a, b, d);
        q(c, function (c) {
            a = c(a, b, d)
        });
        return a
    }

    function kf() {
        var a = this.defaults = {
            transformResponse: [ac],
            transformRequest: [function (a) {
                return J(a) && "[object File]" !== ka.call(a) && "[object Blob]" !== ka.call(a) && "[object FormData]" !== ka.call(a) ? db(a) : a
            }],
            headers: {common: {Accept: "application/json, text/plain, */*"}, post: ia(bc), put: ia(bc), patch: ia(bc)},
            xsrfCookieName: "XSRF-TOKEN",
            xsrfHeaderName: "X-XSRF-TOKEN",
            paramSerializer: "$httpParamSerializer"
        }, b = !1;
        this.useApplyAsync = function (a) {
            return A(a) ? (b = !!a, this) : b
        };
        var d = !0;
        this.useLegacyPromiseExtensions = function (a) {
            return A(a) ? (d = !!a, this) : d
        };
        var c = this.interceptors = [];
        this.$get = ["$httpBackend", "$$cookieReader", "$cacheFactory", "$rootScope", "$q", "$injector", function (e, f, g, h, k, l) {
            function m(b) {
                function c(a) {
                    var b = S({}, a);
                    b.data = ed(a.data, a.headers, a.status, f.transformResponse);
                    a = a.status;
                    return 200 <= a && 300 > a ? b : k.reject(b)
                }

                function e(a,
                           b) {
                    var c, d = {};
                    q(a, function (a, e) {
                        D(a) ? (c = a(b), null != c && (d[e] = c)) : d[e] = a
                    });
                    return d
                }

                if (!J(b)) throw O("$http")("badreq", b);
                if (!y(b.url)) throw O("$http")("badreq", b.url);
                var f = S({
                    method: "get",
                    transformRequest: a.transformRequest,
                    transformResponse: a.transformResponse,
                    paramSerializer: a.paramSerializer
                }, b);
                f.headers = function (b) {
                    var c = a.headers, d = S({}, b.headers), f, g, h, c = S({}, c.common, c[N(b.method)]);
                    a:for (f in c) {
                        g = N(f);
                        for (h in d) if (N(h) === g) continue a;
                        d[f] = c[f]
                    }
                    return e(d, ia(b))
                }(b);
                f.method = vb(f.method);
                f.paramSerializer = y(f.paramSerializer) ? l.get(f.paramSerializer) : f.paramSerializer;
                var g = [function (b) {
                    var d = b.headers, e = ed(b.data, dd(d), u, b.transformRequest);
                    z(e) && q(d, function (a, b) {
                        "content-type" === N(b) && delete d[b]
                    });
                    z(b.withCredentials) && !z(a.withCredentials) && (b.withCredentials = a.withCredentials);
                    return n(b, e).then(c, c)
                }, u], h = k.when(f);
                for (q(L, function (a) {
                    (a.request || a.requestError) && g.unshift(a.request, a.requestError);
                    (a.response || a.responseError) && g.push(a.response, a.responseError)
                }); g.length;) {
                    b =
                        g.shift();
                    var m = g.shift(), h = h.then(b, m)
                }
                d ? (h.success = function (a) {
                    Sa(a, "fn");
                    h.then(function (b) {
                        a(b.data, b.status, b.headers, f)
                    });
                    return h
                }, h.error = function (a) {
                    Sa(a, "fn");
                    h.then(null, function (b) {
                        a(b.data, b.status, b.headers, f)
                    });
                    return h
                }) : (h.success = fd("success"), h.error = fd("error"));
                return h
            }

            function n(c, d) {
                function g(a, c, d, e) {
                    function f() {
                        l(c, a, d, e)
                    }

                    K && (200 <= a && 300 > a ? K.put(L, [a, c, cd(d), e]) : K.remove(L));
                    b ? h.$applyAsync(f) : (f(), h.$$phase || h.$apply())
                }

                function l(a, b, d, e) {
                    b = -1 <= b ? b : 0;
                    (200 <= b && 300 > b ? G.resolve :
                        G.reject)({data: a, status: b, headers: dd(d), config: c, statusText: e})
                }

                function n(a) {
                    l(a.data, a.status, ia(a.headers()), a.statusText)
                }

                function t() {
                    var a = m.pendingRequests.indexOf(c);
                    -1 !== a && m.pendingRequests.splice(a, 1)
                }

                var G = k.defer(), C = G.promise, K, I, qa = c.headers, L = p(c.url, c.paramSerializer(c.params));
                m.pendingRequests.push(c);
                C.then(t, t);
                !c.cache && !a.cache || !1 === c.cache || "GET" !== c.method && "JSONP" !== c.method || (K = J(c.cache) ? c.cache : J(a.cache) ? a.cache : F);
                K && (I = K.get(L), A(I) ? I && D(I.then) ? I.then(n, n) : M(I) ?
                    l(I[1], I[0], ia(I[2]), I[3]) : l(I, 200, {}, "OK") : K.put(L, C));
                z(I) && ((I = gd(c.url) ? f()[c.xsrfCookieName || a.xsrfCookieName] : u) && (qa[c.xsrfHeaderName || a.xsrfHeaderName] = I), e(c.method, L, d, g, qa, c.timeout, c.withCredentials, c.responseType));
                return C
            }

            function p(a, b) {
                0 < b.length && (a += (-1 == a.indexOf("?") ? "?" : "&") + b);
                return a
            }

            var F = g("$http");
            a.paramSerializer = y(a.paramSerializer) ? l.get(a.paramSerializer) : a.paramSerializer;
            var L = [];
            q(c, function (a) {
                L.unshift(y(a) ? l.get(a) : l.invoke(a))
            });
            m.pendingRequests = [];
            (function (a) {
                q(arguments,
                    function (a) {
                        m[a] = function (b, c) {
                            return m(S({}, c || {}, {method: a, url: b}))
                        }
                    })
            })("get", "delete", "head", "jsonp");
            (function (a) {
                q(arguments, function (a) {
                    m[a] = function (b, c, d) {
                        return m(S({}, d || {}, {method: a, url: b, data: c}))
                    }
                })
            })("post", "put", "patch");
            m.defaults = a;
            return m
        }]
    }

    function of() {
        this.$get = function () {
            return function () {
                return new T.XMLHttpRequest
            }
        }
    }

    function nf() {
        this.$get = ["$browser", "$window", "$document", "$xhrFactory", function (a, b, d, c) {
            return cg(a, c, a.defer, b.angular.callbacks, d[0])
        }]
    }

    function cg(a, b, d,
                c, e) {
        function f(a, b, d) {
            var f = e.createElement("script"), m = null;
            f.type = "text/javascript";
            f.src = a;
            f.async = !0;
            m = function (a) {
                f.removeEventListener("load", m, !1);
                f.removeEventListener("error", m, !1);
                e.body.removeChild(f);
                f = null;
                var g = -1, F = "unknown";
                a && ("load" !== a.type || c[b].called || (a = {type: "error"}), F = a.type, g = "error" === a.type ? 404 : 200);
                d && d(g, F)
            };
            f.addEventListener("load", m, !1);
            f.addEventListener("error", m, !1);
            e.body.appendChild(f);
            return m
        }

        return function (e, h, k, l, m, n, p, F) {
            function L() {
                w && w();
                v && v.abort()
            }

            function x(b, c, e, f, g) {
                A(t) && d.cancel(t);
                w = v = null;
                b(c, e, f, g);
                a.$$completeOutstandingRequest(E)
            }

            a.$$incOutstandingRequestCount();
            h = h || a.url();
            if ("jsonp" == N(e)) {
                var r = "_" + (c.counter++).toString(36);
                c[r] = function (a) {
                    c[r].data = a;
                    c[r].called = !0
                };
                var w = f(h.replace("JSON_CALLBACK", "angular.callbacks." + r), r, function (a, b) {
                    x(l, a, c[r].data, "", b);
                    c[r] = E
                })
            } else {
                var v = b(e, h);
                v.open(e, h, !0);
                q(m, function (a, b) {
                    A(a) && v.setRequestHeader(b, a)
                });
                v.onload = function () {
                    var a = v.statusText || "", b = "response" in v ? v.response : v.responseText,
                        c = 1223 === v.status ? 204 : v.status;
                    0 === c && (c = b ? 200 : "file" == sa(h).protocol ? 404 : 0);
                    x(l, c, b, v.getAllResponseHeaders(), a)
                };
                e = function () {
                    x(l, -1, null, null, "")
                };
                v.onerror = e;
                v.onabort = e;
                p && (v.withCredentials = !0);
                if (F) try {
                    v.responseType = F
                } catch (Q) {
                    if ("json" !== F) throw Q;
                }
                v.send(z(k) ? null : k)
            }
            if (0 < n) var t = d(L, n); else n && D(n.then) && n.then(L)
        }
    }

    function hf() {
        var a = "{{", b = "}}";
        this.startSymbol = function (b) {
            return b ? (a = b, this) : a
        };
        this.endSymbol = function (a) {
            return a ? (b = a, this) : b
        };
        this.$get = ["$parse", "$exceptionHandler",
            "$sce", function (d, c, e) {
                function f(a) {
                    return "\\\\\\" + a
                }

                function g(c) {
                    return c.replace(n, a).replace(p, b)
                }

                function h(a, b, c, d) {
                    var e;
                    return e = a.$watch(function (a) {
                        e();
                        return d(a)
                    }, b, c)
                }

                function k(f, k, n, r) {
                    function p(a) {
                        try {
                            var b = a;
                            a = n ? e.getTrusted(n, b) : e.valueOf(b);
                            var d;
                            if (r && !A(a)) d = a; else if (null == a) d = ""; else {
                                switch (typeof a) {
                                    case "string":
                                        break;
                                    case "number":
                                        a = "" + a;
                                        break;
                                    default:
                                        a = db(a)
                                }
                                d = a
                            }
                            return d
                        } catch (g) {
                            c(La.interr(f, g))
                        }
                    }

                    if (!f.length || -1 === f.indexOf(a)) {
                        var v;
                        k || (k = g(f), v = da(k), v.exp = f, v.expressions =
                            [], v.$$watchDelegate = h);
                        return v
                    }
                    r = !!r;
                    var q, t, G = 0, C = [], K = [];
                    v = f.length;
                    for (var I = [], qa = []; G < v;) if (-1 != (q = f.indexOf(a, G)) && -1 != (t = f.indexOf(b, q + l))) G !== q && I.push(g(f.substring(G, q))), G = f.substring(q + l, t), C.push(G), K.push(d(G, p)), G = t + m, qa.push(I.length), I.push(""); else {
                        G !== v && I.push(g(f.substring(G)));
                        break
                    }
                    n && 1 < I.length && La.throwNoconcat(f);
                    if (!k || C.length) {
                        var Ca = function (a) {
                            for (var b = 0, c = C.length; b < c; b++) {
                                if (r && z(a[b])) return;
                                I[qa[b]] = a[b]
                            }
                            return I.join("")
                        };
                        return S(function (a) {
                            var b = 0, d = C.length,
                                e = Array(d);
                            try {
                                for (; b < d; b++) e[b] = K[b](a);
                                return Ca(e)
                            } catch (g) {
                                c(La.interr(f, g))
                            }
                        }, {
                            exp: f, expressions: C, $$watchDelegate: function (a, b) {
                                var c;
                                return a.$watchGroup(K, function (d, e) {
                                    var f = Ca(d);
                                    D(b) && b.call(this, f, d !== e ? c : f, a);
                                    c = f
                                })
                            }
                        })
                    }
                }

                var l = a.length, m = b.length, n = new RegExp(a.replace(/./g, f), "g"),
                    p = new RegExp(b.replace(/./g, f), "g");
                k.startSymbol = function () {
                    return a
                };
                k.endSymbol = function () {
                    return b
                };
                return k
            }]
    }

    function jf() {
        this.$get = ["$rootScope", "$window", "$q", "$$q", "$browser", function (a, b, d, c, e) {
            function f(f,
                       k, l, m) {
                function n() {
                    p ? f.apply(null, F) : f(r)
                }

                var p = 4 < arguments.length, F = p ? Aa.call(arguments, 4) : [], q = b.setInterval,
                    x = b.clearInterval, r = 0, w = A(m) && !m, v = (w ? c : d).defer(), Q = v.promise;
                l = A(l) ? l : 0;
                Q.$$intervalId = q(function () {
                    w ? e.defer(n) : a.$evalAsync(n);
                    v.notify(r++);
                    0 < l && r >= l && (v.resolve(r), x(Q.$$intervalId), delete g[Q.$$intervalId]);
                    w || a.$apply()
                }, k);
                g[Q.$$intervalId] = v;
                return Q
            }

            var g = {};
            f.cancel = function (a) {
                return a && a.$$intervalId in g ? (g[a.$$intervalId].reject("canceled"), b.clearInterval(a.$$intervalId),
                    delete g[a.$$intervalId], !0) : !1
            };
            return f
        }]
    }

    function cc(a) {
        a = a.split("/");
        for (var b = a.length; b--;) a[b] = rb(a[b]);
        return a.join("/")
    }

    function hd(a, b) {
        var d = sa(a);
        b.$$protocol = d.protocol;
        b.$$host = d.hostname;
        b.$$port = Y(d.port) || dg[d.protocol] || null
    }

    function id(a, b) {
        var d = "/" !== a.charAt(0);
        d && (a = "/" + a);
        var c = sa(a);
        b.$$path = decodeURIComponent(d && "/" === c.pathname.charAt(0) ? c.pathname.substring(1) : c.pathname);
        b.$$search = xc(c.search);
        b.$$hash = decodeURIComponent(c.hash);
        b.$$path && "/" != b.$$path.charAt(0) && (b.$$path =
            "/" + b.$$path)
    }

    function la(a, b) {
        if (0 === b.indexOf(a)) return b.substr(a.length)
    }

    function Ka(a) {
        var b = a.indexOf("#");
        return -1 == b ? a : a.substr(0, b)
    }

    function kb(a) {
        return a.replace(/(#.+)|#$/, "$1")
    }

    function dc(a, b, d) {
        this.$$html5 = !0;
        d = d || "";
        hd(a, this);
        this.$$parse = function (a) {
            var d = la(b, a);
            if (!y(d)) throw Fb("ipthprfx", a, b);
            id(d, this);
            this.$$path || (this.$$path = "/");
            this.$$compose()
        };
        this.$$compose = function () {
            var a = Sb(this.$$search), d = this.$$hash ? "#" + rb(this.$$hash) : "";
            this.$$url = cc(this.$$path) + (a ? "?" + a : "") +
                d;
            this.$$absUrl = b + this.$$url.substr(1)
        };
        this.$$parseLinkUrl = function (c, e) {
            if (e && "#" === e[0]) return this.hash(e.slice(1)), !0;
            var f, g;
            A(f = la(a, c)) ? (g = f, g = A(f = la(d, f)) ? b + (la("/", f) || f) : a + g) : A(f = la(b, c)) ? g = b + f : b == c + "/" && (g = b);
            g && this.$$parse(g);
            return !!g
        }
    }

    function ec(a, b, d) {
        hd(a, this);
        this.$$parse = function (c) {
            var e = la(a, c) || la(b, c), f;
            z(e) || "#" !== e.charAt(0) ? this.$$html5 ? f = e : (f = "", z(e) && (a = c, this.replace())) : (f = la(d, e), z(f) && (f = e));
            id(f, this);
            c = this.$$path;
            var e = a, g = /^\/[A-Z]:(\/.*)/;
            0 === f.indexOf(e) &&
            (f = f.replace(e, ""));
            g.exec(f) || (c = (f = g.exec(c)) ? f[1] : c);
            this.$$path = c;
            this.$$compose()
        };
        this.$$compose = function () {
            var b = Sb(this.$$search), e = this.$$hash ? "#" + rb(this.$$hash) : "";
            this.$$url = cc(this.$$path) + (b ? "?" + b : "") + e;
            this.$$absUrl = a + (this.$$url ? d + this.$$url : "")
        };
        this.$$parseLinkUrl = function (b, d) {
            return Ka(a) == Ka(b) ? (this.$$parse(b), !0) : !1
        }
    }

    function jd(a, b, d) {
        this.$$html5 = !0;
        ec.apply(this, arguments);
        this.$$parseLinkUrl = function (c, e) {
            if (e && "#" === e[0]) return this.hash(e.slice(1)), !0;
            var f, g;
            a == Ka(c) ?
                f = c : (g = la(b, c)) ? f = a + d + g : b === c + "/" && (f = b);
            f && this.$$parse(f);
            return !!f
        };
        this.$$compose = function () {
            var b = Sb(this.$$search), e = this.$$hash ? "#" + rb(this.$$hash) : "";
            this.$$url = cc(this.$$path) + (b ? "?" + b : "") + e;
            this.$$absUrl = a + d + this.$$url
        }
    }

    function Gb(a) {
        return function () {
            return this[a]
        }
    }

    function kd(a, b) {
        return function (d) {
            if (z(d)) return this[a];
            this[a] = b(d);
            this.$$compose();
            return this
        }
    }

    function pf() {
        var a = "", b = {enabled: !1, requireBase: !0, rewriteLinks: !0};
        this.hashPrefix = function (b) {
            return A(b) ? (a = b, this) :
                a
        };
        this.html5Mode = function (a) {
            return Oa(a) ? (b.enabled = a, this) : J(a) ? (Oa(a.enabled) && (b.enabled = a.enabled), Oa(a.requireBase) && (b.requireBase = a.requireBase), Oa(a.rewriteLinks) && (b.rewriteLinks = a.rewriteLinks), this) : b
        };
        this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", "$window", function (d, c, e, f, g) {
            function h(a, b, d) {
                var e = l.url(), f = l.$$state;
                try {
                    c.url(a, b, d), l.$$state = c.state()
                } catch (g) {
                    throw l.url(e), l.$$state = f, g;
                }
            }

            function k(a, b) {
                d.$broadcast("$locationChangeSuccess", l.absUrl(), a, l.$$state,
                    b)
            }

            var l, m;
            m = c.baseHref();
            var n = c.url(), p;
            if (b.enabled) {
                if (!m && b.requireBase) throw Fb("nobase");
                p = n.substring(0, n.indexOf("/", n.indexOf("//") + 2)) + (m || "/");
                m = e.history ? dc : jd
            } else p = Ka(n), m = ec;
            var F = p.substr(0, Ka(p).lastIndexOf("/") + 1);
            l = new m(p, F, "#" + a);
            l.$$parseLinkUrl(n, n);
            l.$$state = c.state();
            var q = /^\s*(javascript|mailto):/i;
            f.on("click", function (a) {
                if (b.rewriteLinks && !a.ctrlKey && !a.metaKey && !a.shiftKey && 2 != a.which && 2 != a.button) {
                    for (var e = H(a.target); "a" !== oa(e[0]);) if (e[0] === f[0] || !(e = e.parent())[0]) return;
                    var h = e.prop("href"), k = e.attr("href") || e.attr("xlink:href");
                    J(h) && "[object SVGAnimatedString]" === h.toString() && (h = sa(h.animVal).href);
                    q.test(h) || !h || e.attr("target") || a.isDefaultPrevented() || !l.$$parseLinkUrl(h, k) || (a.preventDefault(), l.absUrl() != c.url() && (d.$apply(), g.angular["ff-684208-preventDefault"] = !0))
                }
            });
            kb(l.absUrl()) != kb(n) && c.url(l.absUrl(), !0);
            var x = !0;
            c.onUrlChange(function (a, b) {
                z(la(F, a)) ? g.location.href = a : (d.$evalAsync(function () {
                    var c = l.absUrl(), e = l.$$state, f;
                    a = kb(a);
                    l.$$parse(a);
                    l.$$state = b;
                    f = d.$broadcast("$locationChangeStart", a, c, b, e).defaultPrevented;
                    l.absUrl() === a && (f ? (l.$$parse(c), l.$$state = e, h(c, !1, e)) : (x = !1, k(c, e)))
                }), d.$$phase || d.$digest())
            });
            d.$watch(function () {
                var a = kb(c.url()), b = kb(l.absUrl()), f = c.state(), g = l.$$replace,
                    m = a !== b || l.$$html5 && e.history && f !== l.$$state;
                if (x || m) x = !1, d.$evalAsync(function () {
                    var b = l.absUrl(), c = d.$broadcast("$locationChangeStart", b, a, l.$$state, f).defaultPrevented;
                    l.absUrl() === b && (c ? (l.$$parse(a), l.$$state = f) : (m && h(b, g, f === l.$$state ? null :
                        l.$$state), k(a, f)))
                });
                l.$$replace = !1
            });
            return l
        }]
    }

    function qf() {
        var a = !0, b = this;
        this.debugEnabled = function (b) {
            return A(b) ? (a = b, this) : a
        };
        this.$get = ["$window", function (d) {
            function c(a) {
                a instanceof Error && (a.stack ? a = a.message && -1 === a.stack.indexOf(a.message) ? "Error: " + a.message + "\n" + a.stack : a.stack : a.sourceURL && (a = a.message + "\n" + a.sourceURL + ":" + a.line));
                return a
            }

            function e(a) {
                var b = d.console || {}, e = b[a] || b.log || E;
                a = !1;
                try {
                    a = !!e.apply
                } catch (k) {
                }
                return a ? function () {
                    var a = [];
                    q(arguments, function (b) {
                        a.push(c(b))
                    });
                    return e.apply(b, a)
                } : function (a, b) {
                    e(a, null == b ? "" : b)
                }
            }

            return {
                log: e("log"), info: e("info"), warn: e("warn"), error: e("error"), debug: function () {
                    var c = e("debug");
                    return function () {
                        a && c.apply(b, arguments)
                    }
                }()
            }
        }]
    }

    function Wa(a, b) {
        if ("__defineGetter__" === a || "__defineSetter__" === a || "__lookupGetter__" === a || "__lookupSetter__" === a || "__proto__" === a) throw ca("isecfld", b);
        return a
    }

    function eg(a) {
        return a + ""
    }

    function ta(a, b) {
        if (a) {
            if (a.constructor === a) throw ca("isecfn", b);
            if (a.window === a) throw ca("isecwindow", b);
            if (a.children &&
                (a.nodeName || a.prop && a.attr && a.find)) throw ca("isecdom", b);
            if (a === Object) throw ca("isecobj", b);
        }
        return a
    }

    function ld(a, b) {
        if (a) {
            if (a.constructor === a) throw ca("isecfn", b);
            if (a === fg || a === gg || a === hg) throw ca("isecff", b);
        }
    }

    function Hb(a, b) {
        if (a && (a === (0).constructor || a === (!1).constructor || a === "".constructor || a === {}.constructor || a === [].constructor || a === Function.constructor)) throw ca("isecaf", b);
    }

    function ig(a, b) {
        return "undefined" !== typeof a ? a : b
    }

    function md(a, b) {
        return "undefined" === typeof a ? b : "undefined" ===
        typeof b ? a : a + b
    }

    function aa(a, b) {
        var d, c;
        switch (a.type) {
            case s.Program:
                d = !0;
                q(a.body, function (a) {
                    aa(a.expression, b);
                    d = d && a.expression.constant
                });
                a.constant = d;
                break;
            case s.Literal:
                a.constant = !0;
                a.toWatch = [];
                break;
            case s.UnaryExpression:
                aa(a.argument, b);
                a.constant = a.argument.constant;
                a.toWatch = a.argument.toWatch;
                break;
            case s.BinaryExpression:
                aa(a.left, b);
                aa(a.right, b);
                a.constant = a.left.constant && a.right.constant;
                a.toWatch = a.left.toWatch.concat(a.right.toWatch);
                break;
            case s.LogicalExpression:
                aa(a.left,
                    b);
                aa(a.right, b);
                a.constant = a.left.constant && a.right.constant;
                a.toWatch = a.constant ? [] : [a];
                break;
            case s.ConditionalExpression:
                aa(a.test, b);
                aa(a.alternate, b);
                aa(a.consequent, b);
                a.constant = a.test.constant && a.alternate.constant && a.consequent.constant;
                a.toWatch = a.constant ? [] : [a];
                break;
            case s.Identifier:
                a.constant = !1;
                a.toWatch = [a];
                break;
            case s.MemberExpression:
                aa(a.object, b);
                a.computed && aa(a.property, b);
                a.constant = a.object.constant && (!a.computed || a.property.constant);
                a.toWatch = [a];
                break;
            case s.CallExpression:
                d =
                    a.filter ? !b(a.callee.name).$stateful : !1;
                c = [];
                q(a.arguments, function (a) {
                    aa(a, b);
                    d = d && a.constant;
                    a.constant || c.push.apply(c, a.toWatch)
                });
                a.constant = d;
                a.toWatch = a.filter && !b(a.callee.name).$stateful ? c : [a];
                break;
            case s.AssignmentExpression:
                aa(a.left, b);
                aa(a.right, b);
                a.constant = a.left.constant && a.right.constant;
                a.toWatch = [a];
                break;
            case s.ArrayExpression:
                d = !0;
                c = [];
                q(a.elements, function (a) {
                    aa(a, b);
                    d = d && a.constant;
                    a.constant || c.push.apply(c, a.toWatch)
                });
                a.constant = d;
                a.toWatch = c;
                break;
            case s.ObjectExpression:
                d =
                    !0;
                c = [];
                q(a.properties, function (a) {
                    aa(a.value, b);
                    d = d && a.value.constant;
                    a.value.constant || c.push.apply(c, a.value.toWatch)
                });
                a.constant = d;
                a.toWatch = c;
                break;
            case s.ThisExpression:
                a.constant = !1;
                a.toWatch = [];
                break;
            case s.LocalsExpression:
                a.constant = !1, a.toWatch = []
        }
    }

    function nd(a) {
        if (1 == a.length) {
            a = a[0].expression;
            var b = a.toWatch;
            return 1 !== b.length ? b : b[0] !== a ? b : u
        }
    }

    function od(a) {
        return a.type === s.Identifier || a.type === s.MemberExpression
    }

    function pd(a) {
        if (1 === a.body.length && od(a.body[0].expression)) return {
            type: s.AssignmentExpression,
            left: a.body[0].expression, right: {type: s.NGValueParameter}, operator: "="
        }
    }

    function qd(a) {
        return 0 === a.body.length || 1 === a.body.length && (a.body[0].expression.type === s.Literal || a.body[0].expression.type === s.ArrayExpression || a.body[0].expression.type === s.ObjectExpression)
    }

    function rd(a, b) {
        this.astBuilder = a;
        this.$filter = b
    }

    function sd(a, b) {
        this.astBuilder = a;
        this.$filter = b
    }

    function Ib(a) {
        return "constructor" == a
    }

    function fc(a) {
        return D(a.valueOf) ? a.valueOf() : jg.call(a)
    }

    function rf() {
        var a = V(), b = V(), d = {
            "true": !0,
            "false": !1, "null": null, undefined: u
        };
        this.addLiteral = function (a, b) {
            d[a] = b
        };
        this.$get = ["$filter", function (c) {
            function e(d, e, g) {
                var p, t, G;
                g = g || x;
                switch (typeof d) {
                    case "string":
                        G = d = d.trim();
                        var C = g ? b : a;
                        p = C[G];
                        if (!p) {
                            ":" === d.charAt(0) && ":" === d.charAt(1) && (t = !0, d = d.substring(2));
                            p = g ? L : F;
                            var K = new gc(p);
                            p = (new hc(K, c, p)).parse(d);
                            p.constant ? p.$$watchDelegate = m : t ? p.$$watchDelegate = p.literal ? l : k : p.inputs && (p.$$watchDelegate = h);
                            g && (p = f(p));
                            C[G] = p
                        }
                        return n(p, e);
                    case "function":
                        return n(d, e);
                    default:
                        return n(E,
                            e)
                }
            }

            function f(a) {
                function b(c, d, e, f) {
                    var g = x;
                    x = !0;
                    try {
                        return a(c, d, e, f)
                    } finally {
                        x = g
                    }
                }

                if (!a) return a;
                b.$$watchDelegate = a.$$watchDelegate;
                b.assign = f(a.assign);
                b.constant = a.constant;
                b.literal = a.literal;
                for (var c = 0; a.inputs && c < a.inputs.length; ++c) a.inputs[c] = f(a.inputs[c]);
                b.inputs = a.inputs;
                return b
            }

            function g(a, b) {
                return null == a || null == b ? a === b : "object" === typeof a && (a = fc(a), "object" === typeof a) ? !1 : a === b || a !== a && b !== b
            }

            function h(a, b, c, d, e) {
                var f = d.inputs, h;
                if (1 === f.length) {
                    var k = g, f = f[0];
                    return a.$watch(function (a) {
                        var b =
                            f(a);
                        g(b, k) || (h = d(a, u, u, [b]), k = b && fc(b));
                        return h
                    }, b, c, e)
                }
                for (var l = [], m = [], n = 0, p = f.length; n < p; n++) l[n] = g, m[n] = null;
                return a.$watch(function (a) {
                    for (var b = !1, c = 0, e = f.length; c < e; c++) {
                        var k = f[c](a);
                        if (b || (b = !g(k, l[c]))) m[c] = k, l[c] = k && fc(k)
                    }
                    b && (h = d(a, u, u, m));
                    return h
                }, b, c, e)
            }

            function k(a, b, c, d) {
                var e, f;
                return e = a.$watch(function (a) {
                    return d(a)
                }, function (a, c, d) {
                    f = a;
                    D(b) && b.apply(this, arguments);
                    A(a) && d.$$postDigest(function () {
                        A(f) && e()
                    })
                }, c)
            }

            function l(a, b, c, d) {
                function e(a) {
                    var b = !0;
                    q(a, function (a) {
                        A(a) ||
                        (b = !1)
                    });
                    return b
                }

                var f, g;
                return f = a.$watch(function (a) {
                    return d(a)
                }, function (a, c, d) {
                    g = a;
                    D(b) && b.call(this, a, c, d);
                    e(a) && d.$$postDigest(function () {
                        e(g) && f()
                    })
                }, c)
            }

            function m(a, b, c, d) {
                var e;
                return e = a.$watch(function (a) {
                    e();
                    return d(a)
                }, b, c)
            }

            function n(a, b) {
                if (!b) return a;
                var c = a.$$watchDelegate, d = !1, c = c !== l && c !== k ? function (c, e, f, g) {
                    f = d && g ? g[0] : a(c, e, f, g);
                    return b(f, c, e)
                } : function (c, d, e, f) {
                    e = a(c, d, e, f);
                    c = b(e, c, d);
                    return A(e) ? c : e
                };
                a.$$watchDelegate && a.$$watchDelegate !== h ? c.$$watchDelegate = a.$$watchDelegate :
                    b.$stateful || (c.$$watchDelegate = h, d = !a.inputs, c.inputs = a.inputs ? a.inputs : [a]);
                return c
            }

            var p = Ga().noUnsafeEval, F = {csp: p, expensiveChecks: !1, literals: pa(d)},
                L = {csp: p, expensiveChecks: !0, literals: pa(d)}, x = !1;
            e.$$runningExpensiveChecks = function () {
                return x
            };
            return e
        }]
    }

    function tf() {
        this.$get = ["$rootScope", "$exceptionHandler", function (a, b) {
            return td(function (b) {
                a.$evalAsync(b)
            }, b)
        }]
    }

    function uf() {
        this.$get = ["$browser", "$exceptionHandler", function (a, b) {
            return td(function (b) {
                a.defer(b)
            }, b)
        }]
    }

    function td(a,
                b) {
        function d() {
            this.$$state = {status: 0}
        }

        function c(a, b) {
            return function (c) {
                b.call(a, c)
            }
        }

        function e(c) {
            !c.processScheduled && c.pending && (c.processScheduled = !0, a(function () {
                var a, d, e;
                e = c.pending;
                c.processScheduled = !1;
                c.pending = u;
                for (var f = 0, g = e.length; f < g; ++f) {
                    d = e[f][0];
                    a = e[f][c.status];
                    try {
                        D(a) ? d.resolve(a(c.value)) : 1 === c.status ? d.resolve(c.value) : d.reject(c.value)
                    } catch (h) {
                        d.reject(h), b(h)
                    }
                }
            }))
        }

        function f() {
            this.promise = new d
        }

        var g = O("$q", TypeError);
        S(d.prototype, {
            then: function (a, b, c) {
                if (z(a) && z(b) &&
                    z(c)) return this;
                var d = new f;
                this.$$state.pending = this.$$state.pending || [];
                this.$$state.pending.push([d, a, b, c]);
                0 < this.$$state.status && e(this.$$state);
                return d.promise
            }, "catch": function (a) {
                return this.then(null, a)
            }, "finally": function (a, b) {
                return this.then(function (b) {
                    return k(b, !0, a)
                }, function (b) {
                    return k(b, !1, a)
                }, b)
            }
        });
        S(f.prototype, {
            resolve: function (a) {
                this.promise.$$state.status || (a === this.promise ? this.$$reject(g("qcycle", a)) : this.$$resolve(a))
            }, $$resolve: function (a) {
                function d(a) {
                    k || (k = !0, h.$$resolve(a))
                }

                function f(a) {
                    k || (k = !0, h.$$reject(a))
                }

                var g, h = this, k = !1;
                try {
                    if (J(a) || D(a)) g = a && a.then;
                    D(g) ? (this.promise.$$state.status = -1, g.call(a, d, f, c(this, this.notify))) : (this.promise.$$state.value = a, this.promise.$$state.status = 1, e(this.promise.$$state))
                } catch (l) {
                    f(l), b(l)
                }
            }, reject: function (a) {
                this.promise.$$state.status || this.$$reject(a)
            }, $$reject: function (a) {
                this.promise.$$state.value = a;
                this.promise.$$state.status = 2;
                e(this.promise.$$state)
            }, notify: function (c) {
                var d = this.promise.$$state.pending;
                0 >= this.promise.$$state.status &&
                d && d.length && a(function () {
                    for (var a, e, f = 0, g = d.length; f < g; f++) {
                        e = d[f][0];
                        a = d[f][3];
                        try {
                            e.notify(D(a) ? a(c) : c)
                        } catch (h) {
                            b(h)
                        }
                    }
                })
            }
        });
        var h = function (a, b) {
            var c = new f;
            b ? c.resolve(a) : c.reject(a);
            return c.promise
        }, k = function (a, b, c) {
            var d = null;
            try {
                D(c) && (d = c())
            } catch (e) {
                return h(e, !1)
            }
            return d && D(d.then) ? d.then(function () {
                return h(a, b)
            }, function (a) {
                return h(a, !1)
            }) : h(a, b)
        }, l = function (a, b, c, d) {
            var e = new f;
            e.resolve(a);
            return e.promise.then(b, c, d)
        }, m = function (a) {
            if (!D(a)) throw g("norslvr", a);
            var b = new f;
            a(function (a) {
                    b.resolve(a)
                },
                function (a) {
                    b.reject(a)
                });
            return b.promise
        };
        m.prototype = d.prototype;
        m.defer = function () {
            var a = new f;
            a.resolve = c(a, a.resolve);
            a.reject = c(a, a.reject);
            a.notify = c(a, a.notify);
            return a
        };
        m.reject = function (a) {
            var b = new f;
            b.reject(a);
            return b.promise
        };
        m.when = l;
        m.resolve = l;
        m.all = function (a) {
            var b = new f, c = 0, d = M(a) ? [] : {};
            q(a, function (a, e) {
                c++;
                l(a).then(function (a) {
                    d.hasOwnProperty(e) || (d[e] = a, --c || b.resolve(d))
                }, function (a) {
                    d.hasOwnProperty(e) || b.reject(a)
                })
            });
            0 === c && b.resolve(d);
            return b.promise
        };
        return m
    }

    function Df() {
        this.$get =
            ["$window", "$timeout", function (a, b) {
                var d = a.requestAnimationFrame || a.webkitRequestAnimationFrame,
                    c = a.cancelAnimationFrame || a.webkitCancelAnimationFrame || a.webkitCancelRequestAnimationFrame,
                    e = !!d, f = e ? function (a) {
                        var b = d(a);
                        return function () {
                            c(b)
                        }
                    } : function (a) {
                        var c = b(a, 16.66, !1);
                        return function () {
                            b.cancel(c)
                        }
                    };
                f.supported = e;
                return f
            }]
    }

    function sf() {
        function a(a) {
            function b() {
                this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null;
                this.$$listeners = {};
                this.$$listenerCount = {};
                this.$$watchersCount =
                    0;
                this.$id = ++qb;
                this.$$ChildScope = null
            }

            b.prototype = a;
            return b
        }

        var b = 10, d = O("$rootScope"), c = null, e = null;
        this.digestTtl = function (a) {
            arguments.length && (b = a);
            return b
        };
        this.$get = ["$exceptionHandler", "$parse", "$browser", function (f, g, h) {
            function k(a) {
                a.currentScope.$$destroyed = !0
            }

            function l(a) {
                9 === Da && (a.$$childHead && l(a.$$childHead), a.$$nextSibling && l(a.$$nextSibling));
                a.$parent = a.$$nextSibling = a.$$prevSibling = a.$$childHead = a.$$childTail = a.$root = a.$$watchers = null
            }

            function m() {
                this.$id = ++qb;
                this.$$phase =
                    this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null;
                this.$root = this;
                this.$$destroyed = !1;
                this.$$listeners = {};
                this.$$listenerCount = {};
                this.$$watchersCount = 0;
                this.$$isolateBindings = null
            }

            function n(a) {
                if (w.$$phase) throw d("inprog", w.$$phase);
                w.$$phase = a
            }

            function p(a, b) {
                do a.$$watchersCount += b; while (a = a.$parent)
            }

            function F(a, b, c) {
                do a.$$listenerCount[c] -= b, 0 === a.$$listenerCount[c] && delete a.$$listenerCount[c]; while (a = a.$parent)
            }

            function s() {
            }

            function x() {
                for (; t.length;) try {
                    t.shift()()
                } catch (a) {
                    f(a)
                }
                e =
                    null
            }

            function r() {
                null === e && (e = h.defer(function () {
                    w.$apply(x)
                }))
            }

            m.prototype = {
                constructor: m, $new: function (b, c) {
                    var d;
                    c = c || this;
                    b ? (d = new m, d.$root = this.$root) : (this.$$ChildScope || (this.$$ChildScope = a(this)), d = new this.$$ChildScope);
                    d.$parent = c;
                    d.$$prevSibling = c.$$childTail;
                    c.$$childHead ? (c.$$childTail.$$nextSibling = d, c.$$childTail = d) : c.$$childHead = c.$$childTail = d;
                    (b || c != this) && d.$on("$destroy", k);
                    return d
                }, $watch: function (a, b, d, e) {
                    var f = g(a);
                    if (f.$$watchDelegate) return f.$$watchDelegate(this, b, d, f,
                        a);
                    var h = this, k = h.$$watchers, l = {fn: b, last: s, get: f, exp: e || a, eq: !!d};
                    c = null;
                    D(b) || (l.fn = E);
                    k || (k = h.$$watchers = []);
                    k.unshift(l);
                    p(this, 1);
                    return function () {
                        0 <= bb(k, l) && p(h, -1);
                        c = null
                    }
                }, $watchGroup: function (a, b) {
                    function c() {
                        h = !1;
                        k ? (k = !1, b(e, e, g)) : b(e, d, g)
                    }

                    var d = Array(a.length), e = Array(a.length), f = [], g = this, h = !1, k = !0;
                    if (!a.length) {
                        var l = !0;
                        g.$evalAsync(function () {
                            l && b(e, e, g)
                        });
                        return function () {
                            l = !1
                        }
                    }
                    if (1 === a.length) return this.$watch(a[0], function (a, c, f) {
                        e[0] = a;
                        d[0] = c;
                        b(e, a === c ? e : d, f)
                    });
                    q(a, function (a,
                                   b) {
                        var k = g.$watch(a, function (a, f) {
                            e[b] = a;
                            d[b] = f;
                            h || (h = !0, g.$evalAsync(c))
                        });
                        f.push(k)
                    });
                    return function () {
                        for (; f.length;) f.shift()()
                    }
                }, $watchCollection: function (a, b) {
                    function c(a) {
                        e = a;
                        var b, d, g, h;
                        if (!z(e)) {
                            if (J(e)) if (za(e)) for (f !== n && (f = n, v = f.length = 0, l++), a = e.length, v !== a && (l++, f.length = v = a), b = 0; b < a; b++) h = f[b], g = e[b], d = h !== h && g !== g, d || h === g || (l++, f[b] = g); else {
                                f !== p && (f = p = {}, v = 0, l++);
                                a = 0;
                                for (b in e) va.call(e, b) && (a++, g = e[b], h = f[b], b in f ? (d = h !== h && g !== g, d || h === g || (l++, f[b] = g)) : (v++, f[b] = g, l++));
                                if (v >
                                    a) for (b in l++, f) va.call(e, b) || (v--, delete f[b])
                            } else f !== e && (f = e, l++);
                            return l
                        }
                    }

                    c.$stateful = !0;
                    var d = this, e, f, h, k = 1 < b.length, l = 0, m = g(a, c), n = [], p = {}, r = !0, v = 0;
                    return this.$watch(m, function () {
                        r ? (r = !1, b(e, e, d)) : b(e, h, d);
                        if (k) if (J(e)) if (za(e)) {
                            h = Array(e.length);
                            for (var a = 0; a < e.length; a++) h[a] = e[a]
                        } else for (a in h = {}, e) va.call(e, a) && (h[a] = e[a]); else h = e
                    })
                }, $digest: function () {
                    var a, g, k, l, m, p, r, q, t = b, F, A = [], z, y;
                    n("$digest");
                    h.$$checkUrlChange();
                    this === w && null !== e && (h.defer.cancel(e), x());
                    c = null;
                    do {
                        q = !1;
                        for (F = this; v.length;) {
                            try {
                                y = v.shift(), y.scope.$eval(y.expression, y.locals)
                            } catch (E) {
                                f(E)
                            }
                            c = null
                        }
                        a:do {
                            if (p = F.$$watchers) for (r = p.length; r--;) try {
                                if (a = p[r]) if (m = a.get, (g = m(F)) !== (k = a.last) && !(a.eq ? na(g, k) : "number" === typeof g && "number" === typeof k && isNaN(g) && isNaN(k))) q = !0, c = a, a.last = a.eq ? pa(g, null) : g, l = a.fn, l(g, k === s ? g : k, F), 5 > t && (z = 4 - t, A[z] || (A[z] = []), A[z].push({
                                    msg: D(a.exp) ? "fn: " + (a.exp.name || a.exp.toString()) : a.exp,
                                    newVal: g,
                                    oldVal: k
                                })); else if (a === c) {
                                    q = !1;
                                    break a
                                }
                            } catch (H) {
                                f(H)
                            }
                            if (!(p = F.$$watchersCount &&
                                F.$$childHead || F !== this && F.$$nextSibling)) for (; F !== this && !(p = F.$$nextSibling);) F = F.$parent
                        } while (F = p);
                        if ((q || v.length) && !t--) throw w.$$phase = null, d("infdig", b, A);
                    } while (q || v.length);
                    for (w.$$phase = null; u.length;) try {
                        u.shift()()
                    } catch (J) {
                        f(J)
                    }
                }, $destroy: function () {
                    if (!this.$$destroyed) {
                        var a = this.$parent;
                        this.$broadcast("$destroy");
                        this.$$destroyed = !0;
                        this === w && h.$$applicationDestroyed();
                        p(this, -this.$$watchersCount);
                        for (var b in this.$$listenerCount) F(this, this.$$listenerCount[b], b);
                        a && a.$$childHead ==
                        this && (a.$$childHead = this.$$nextSibling);
                        a && a.$$childTail == this && (a.$$childTail = this.$$prevSibling);
                        this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling);
                        this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling);
                        this.$destroy = this.$digest = this.$apply = this.$evalAsync = this.$applyAsync = E;
                        this.$on = this.$watch = this.$watchGroup = function () {
                            return E
                        };
                        this.$$listeners = {};
                        this.$$nextSibling = null;
                        l(this)
                    }
                }, $eval: function (a, b) {
                    return g(a)(this, b)
                }, $evalAsync: function (a, b) {
                    w.$$phase ||
                    v.length || h.defer(function () {
                        v.length && w.$digest()
                    });
                    v.push({scope: this, expression: g(a), locals: b})
                }, $$postDigest: function (a) {
                    u.push(a)
                }, $apply: function (a) {
                    try {
                        n("$apply");
                        try {
                            return this.$eval(a)
                        } finally {
                            w.$$phase = null
                        }
                    } catch (b) {
                        f(b)
                    } finally {
                        try {
                            w.$digest()
                        } catch (c) {
                            throw f(c), c;
                        }
                    }
                }, $applyAsync: function (a) {
                    function b() {
                        c.$eval(a)
                    }

                    var c = this;
                    a && t.push(b);
                    a = g(a);
                    r()
                }, $on: function (a, b) {
                    var c = this.$$listeners[a];
                    c || (this.$$listeners[a] = c = []);
                    c.push(b);
                    var d = this;
                    do d.$$listenerCount[a] || (d.$$listenerCount[a] =
                        0), d.$$listenerCount[a]++; while (d = d.$parent);
                    var e = this;
                    return function () {
                        var d = c.indexOf(b);
                        -1 !== d && (c[d] = null, F(e, 1, a))
                    }
                }, $emit: function (a, b) {
                    var c = [], d, e = this, g = !1, h = {
                        name: a, targetScope: e, stopPropagation: function () {
                            g = !0
                        }, preventDefault: function () {
                            h.defaultPrevented = !0
                        }, defaultPrevented: !1
                    }, k = cb([h], arguments, 1), l, m;
                    do {
                        d = e.$$listeners[a] || c;
                        h.currentScope = e;
                        l = 0;
                        for (m = d.length; l < m; l++) if (d[l]) try {
                            d[l].apply(null, k)
                        } catch (n) {
                            f(n)
                        } else d.splice(l, 1), l--, m--;
                        if (g) return h.currentScope = null, h;
                        e = e.$parent
                    } while (e);
                    h.currentScope = null;
                    return h
                }, $broadcast: function (a, b) {
                    var c = this, d = this, e = {
                        name: a, targetScope: this, preventDefault: function () {
                            e.defaultPrevented = !0
                        }, defaultPrevented: !1
                    };
                    if (!this.$$listenerCount[a]) return e;
                    for (var g = cb([e], arguments, 1), h, k; c = d;) {
                        e.currentScope = c;
                        d = c.$$listeners[a] || [];
                        h = 0;
                        for (k = d.length; h < k; h++) if (d[h]) try {
                            d[h].apply(null, g)
                        } catch (l) {
                            f(l)
                        } else d.splice(h, 1), h--, k--;
                        if (!(d = c.$$listenerCount[a] && c.$$childHead || c !== this && c.$$nextSibling)) for (; c !== this && !(d = c.$$nextSibling);) c = c.$parent
                    }
                    e.currentScope =
                        null;
                    return e
                }
            };
            var w = new m, v = w.$$asyncQueue = [], u = w.$$postDigestQueue = [], t = w.$$applyAsyncQueue = [];
            return w
        }]
    }

    function le() {
        var a = /^\s*(https?|ftp|mailto|tel|file):/, b = /^\s*((https?|ftp|file|blob):|data:image\/)/;
        this.aHrefSanitizationWhitelist = function (b) {
            return A(b) ? (a = b, this) : a
        };
        this.imgSrcSanitizationWhitelist = function (a) {
            return A(a) ? (b = a, this) : b
        };
        this.$get = function () {
            return function (d, c) {
                var e = c ? b : a, f;
                f = sa(d).href;
                return "" === f || f.match(e) ? d : "unsafe:" + f
            }
        }
    }

    function kg(a) {
        if ("self" === a) return a;
        if (y(a)) {
            if (-1 < a.indexOf("***")) throw ua("iwcard", a);
            a = ud(a).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*");
            return new RegExp("^" + a + "$")
        }
        if (Za(a)) return new RegExp("^" + a.source + "$");
        throw ua("imatcher");
    }

    function vd(a) {
        var b = [];
        A(a) && q(a, function (a) {
            b.push(kg(a))
        });
        return b
    }

    function wf() {
        this.SCE_CONTEXTS = ma;
        var a = ["self"], b = [];
        this.resourceUrlWhitelist = function (b) {
            arguments.length && (a = vd(b));
            return a
        };
        this.resourceUrlBlacklist = function (a) {
            arguments.length && (b = vd(a));
            return b
        };
        this.$get = ["$injector",
            function (d) {
                function c(a, b) {
                    return "self" === a ? gd(b) : !!a.exec(b.href)
                }

                function e(a) {
                    var b = function (a) {
                        this.$$unwrapTrustedValue = function () {
                            return a
                        }
                    };
                    a && (b.prototype = new a);
                    b.prototype.valueOf = function () {
                        return this.$$unwrapTrustedValue()
                    };
                    b.prototype.toString = function () {
                        return this.$$unwrapTrustedValue().toString()
                    };
                    return b
                }

                var f = function (a) {
                    throw ua("unsafe");
                };
                d.has("$sanitize") && (f = d.get("$sanitize"));
                var g = e(), h = {};
                h[ma.HTML] = e(g);
                h[ma.CSS] = e(g);
                h[ma.URL] = e(g);
                h[ma.JS] = e(g);
                h[ma.RESOURCE_URL] =
                    e(h[ma.URL]);
                return {
                    trustAs: function (a, b) {
                        var c = h.hasOwnProperty(a) ? h[a] : null;
                        if (!c) throw ua("icontext", a, b);
                        if (null === b || z(b) || "" === b) return b;
                        if ("string" !== typeof b) throw ua("itype", a);
                        return new c(b)
                    }, getTrusted: function (d, e) {
                        if (null === e || z(e) || "" === e) return e;
                        var g = h.hasOwnProperty(d) ? h[d] : null;
                        if (g && e instanceof g) return e.$$unwrapTrustedValue();
                        if (d === ma.RESOURCE_URL) {
                            var g = sa(e.toString()), n, p, q = !1;
                            n = 0;
                            for (p = a.length; n < p; n++) if (c(a[n], g)) {
                                q = !0;
                                break
                            }
                            if (q) for (n = 0, p = b.length; n < p; n++) if (c(b[n],
                                g)) {
                                q = !1;
                                break
                            }
                            if (q) return e;
                            throw ua("insecurl", e.toString());
                        }
                        if (d === ma.HTML) return f(e);
                        throw ua("unsafe");
                    }, valueOf: function (a) {
                        return a instanceof g ? a.$$unwrapTrustedValue() : a
                    }
                }
            }]
    }

    function vf() {
        var a = !0;
        this.enabled = function (b) {
            arguments.length && (a = !!b);
            return a
        };
        this.$get = ["$parse", "$sceDelegate", function (b, d) {
            if (a && 8 > Da) throw ua("iequirks");
            var c = ia(ma);
            c.isEnabled = function () {
                return a
            };
            c.trustAs = d.trustAs;
            c.getTrusted = d.getTrusted;
            c.valueOf = d.valueOf;
            a || (c.trustAs = c.getTrusted = function (a, b) {
                return b
            },
                c.valueOf = $a);
            c.parseAs = function (a, d) {
                var e = b(d);
                return e.literal && e.constant ? e : b(d, function (b) {
                    return c.getTrusted(a, b)
                })
            };
            var e = c.parseAs, f = c.getTrusted, g = c.trustAs;
            q(ma, function (a, b) {
                var d = N(b);
                c[fb("parse_as_" + d)] = function (b) {
                    return e(a, b)
                };
                c[fb("get_trusted_" + d)] = function (b) {
                    return f(a, b)
                };
                c[fb("trust_as_" + d)] = function (b) {
                    return g(a, b)
                }
            });
            return c
        }]
    }

    function xf() {
        this.$get = ["$window", "$document", function (a, b) {
            var d = {}, c = !(a.chrome && a.chrome.app && a.chrome.app.runtime) && a.history && a.history.pushState,
                e = Y((/android (\d+)/.exec(N((a.navigator || {}).userAgent)) || [])[1]),
                f = /Boxee/i.test((a.navigator || {}).userAgent), g = b[0] || {}, h, k = /^(Moz|webkit|ms)(?=[A-Z])/,
                l = g.body && g.body.style, m = !1, n = !1;
            if (l) {
                for (var p in l) if (m = k.exec(p)) {
                    h = m[0];
                    h = h.substr(0, 1).toUpperCase() + h.substr(1);
                    break
                }
                h || (h = "WebkitOpacity" in l && "webkit");
                m = !!("transition" in l || h + "Transition" in l);
                n = !!("animation" in l || h + "Animation" in l);
                !e || m && n || (m = y(l.webkitTransition), n = y(l.webkitAnimation))
            }
            return {
                history: !(!c || 4 > e || f), hasEvent: function (a) {
                    if ("input" ===
                        a && 11 >= Da) return !1;
                    if (z(d[a])) {
                        var b = g.createElement("div");
                        d[a] = "on" + a in b
                    }
                    return d[a]
                }, csp: Ga(), vendorPrefix: h, transitions: m, animations: n, android: e
            }
        }]
    }

    function zf() {
        var a;
        this.httpOptions = function (b) {
            return b ? (a = b, this) : a
        };
        this.$get = ["$templateCache", "$http", "$q", "$sce", function (b, d, c, e) {
            function f(g, h) {
                f.totalPendingRequests++;
                y(g) && b.get(g) || (g = e.getTrustedResourceUrl(g));
                var k = d.defaults && d.defaults.transformResponse;
                M(k) ? k = k.filter(function (a) {
                    return a !== ac
                }) : k === ac && (k = null);
                return d.get(g,
                    S({cache: b, transformResponse: k}, a))["finally"](function () {
                    f.totalPendingRequests--
                }).then(function (a) {
                    b.put(g, a.data);
                    return a.data
                }, function (a) {
                    if (!h) throw lg("tpload", g, a.status, a.statusText);
                    return c.reject(a)
                })
            }

            f.totalPendingRequests = 0;
            return f
        }]
    }

    function Af() {
        this.$get = ["$rootScope", "$browser", "$location", function (a, b, d) {
            return {
                findBindings: function (a, b, d) {
                    a = a.getElementsByClassName("ng-binding");
                    var g = [];
                    q(a, function (a) {
                        var c = ea.element(a).data("$binding");
                        c && q(c, function (c) {
                            d ? (new RegExp("(^|\\s)" +
                                ud(b) + "(\\s|\\||$)")).test(c) && g.push(a) : -1 != c.indexOf(b) && g.push(a)
                        })
                    });
                    return g
                }, findModels: function (a, b, d) {
                    for (var g = ["ng-", "data-ng-", "ng\\:"], h = 0; h < g.length; ++h) {
                        var k = a.querySelectorAll("[" + g[h] + "model" + (d ? "=" : "*=") + '"' + b + '"]');
                        if (k.length) return k
                    }
                }, getLocation: function () {
                    return d.url()
                }, setLocation: function (b) {
                    b !== d.url() && (d.url(b), a.$digest())
                }, whenStable: function (a) {
                    b.notifyWhenNoOutstandingRequests(a)
                }
            }
        }]
    }

    function Bf() {
        this.$get = ["$rootScope", "$browser", "$q", "$$q", "$exceptionHandler",
            function (a, b, d, c, e) {
                function f(f, k, l) {
                    D(f) || (l = k, k = f, f = E);
                    var m = Aa.call(arguments, 3), n = A(l) && !l, p = (n ? c : d).defer(), q = p.promise, s;
                    s = b.defer(function () {
                        try {
                            p.resolve(f.apply(null, m))
                        } catch (b) {
                            p.reject(b), e(b)
                        } finally {
                            delete g[q.$$timeoutId]
                        }
                        n || a.$apply()
                    }, k);
                    q.$$timeoutId = s;
                    g[s] = p;
                    return q
                }

                var g = {};
                f.cancel = function (a) {
                    return a && a.$$timeoutId in g ? (g[a.$$timeoutId].reject("canceled"), delete g[a.$$timeoutId], b.defer.cancel(a.$$timeoutId)) : !1
                };
                return f
            }]
    }

    function sa(a) {
        Da && (Z.setAttribute("href", a), a =
            Z.href);
        Z.setAttribute("href", a);
        return {
            href: Z.href,
            protocol: Z.protocol ? Z.protocol.replace(/:$/, "") : "",
            host: Z.host,
            search: Z.search ? Z.search.replace(/^\?/, "") : "",
            hash: Z.hash ? Z.hash.replace(/^#/, "") : "",
            hostname: Z.hostname,
            port: Z.port,
            pathname: "/" === Z.pathname.charAt(0) ? Z.pathname : "/" + Z.pathname
        }
    }

    function gd(a) {
        a = y(a) ? sa(a) : a;
        return a.protocol === wd.protocol && a.host === wd.host
    }

    function Cf() {
        this.$get = da(T)
    }

    function xd(a) {
        function b(a) {
            try {
                return decodeURIComponent(a)
            } catch (b) {
                return a
            }
        }

        var d = a[0] || {},
            c = {}, e = "";
        return function () {
            var a, g, h, k, l;
            a = d.cookie || "";
            if (a !== e) for (e = a, a = e.split("; "), c = {}, h = 0; h < a.length; h++) g = a[h], k = g.indexOf("="), 0 < k && (l = b(g.substring(0, k)), z(c[l]) && (c[l] = b(g.substring(k + 1))));
            return c
        }
    }

    function Gf() {
        this.$get = xd
    }

    function Jc(a) {
        function b(d, c) {
            if (J(d)) {
                var e = {};
                q(d, function (a, c) {
                    e[c] = b(c, a)
                });
                return e
            }
            return a.factory(d + "Filter", c)
        }

        this.register = b;
        this.$get = ["$injector", function (a) {
            return function (b) {
                return a.get(b + "Filter")
            }
        }];
        b("currency", yd);
        b("date", zd);
        b("filter", mg);
        b("json", ng);
        b("limitTo", og);
        b("lowercase", pg);
        b("number", Ad);
        b("orderBy", Bd);
        b("uppercase", qg)
    }

    function mg() {
        return function (a, b, d) {
            if (!za(a)) {
                if (null == a) return a;
                throw O("filter")("notarray", a);
            }
            var c;
            switch (ic(b)) {
                case "function":
                    break;
                case "boolean":
                case "null":
                case "number":
                case "string":
                    c = !0;
                case "object":
                    b = rg(b, d, c);
                    break;
                default:
                    return a
            }
            return Array.prototype.filter.call(a, b)
        }
    }

    function rg(a, b, d) {
        var c = J(a) && "$" in a;
        !0 === b ? b = na : D(b) || (b = function (a, b) {
            if (z(a)) return !1;
            if (null === a || null === b) return a ===
                b;
            if (J(b) || J(a) && !rc(a)) return !1;
            a = N("" + a);
            b = N("" + b);
            return -1 !== a.indexOf(b)
        });
        return function (e) {
            return c && !J(e) ? Ma(e, a.$, b, !1) : Ma(e, a, b, d)
        }
    }

    function Ma(a, b, d, c, e) {
        var f = ic(a), g = ic(b);
        if ("string" === g && "!" === b.charAt(0)) return !Ma(a, b.substring(1), d, c);
        if (M(a)) return a.some(function (a) {
            return Ma(a, b, d, c)
        });
        switch (f) {
            case "object":
                var h;
                if (c) {
                    for (h in a) if ("$" !== h.charAt(0) && Ma(a[h], b, d, !0)) return !0;
                    return e ? !1 : Ma(a, b, d, !1)
                }
                if ("object" === g) {
                    for (h in b) if (e = b[h], !D(e) && !z(e) && (f = "$" === h, !Ma(f ? a : a[h],
                        e, d, f, f))) return !1;
                    return !0
                }
                return d(a, b);
            case "function":
                return !1;
            default:
                return d(a, b)
        }
    }

    function ic(a) {
        return null === a ? "null" : typeof a
    }

    function yd(a) {
        var b = a.NUMBER_FORMATS;
        return function (a, c, e) {
            z(c) && (c = b.CURRENCY_SYM);
            z(e) && (e = b.PATTERNS[1].maxFrac);
            return null == a ? a : Cd(a, b.PATTERNS[1], b.GROUP_SEP, b.DECIMAL_SEP, e).replace(/\u00A4/g, c)
        }
    }

    function Ad(a) {
        var b = a.NUMBER_FORMATS;
        return function (a, c) {
            return null == a ? a : Cd(a, b.PATTERNS[0], b.GROUP_SEP, b.DECIMAL_SEP, c)
        }
    }

    function sg(a) {
        var b = 0, d, c, e, f, g;
        -1 <
        (c = a.indexOf(Dd)) && (a = a.replace(Dd, ""));
        0 < (e = a.search(/e/i)) ? (0 > c && (c = e), c += +a.slice(e + 1), a = a.substring(0, e)) : 0 > c && (c = a.length);
        for (e = 0; a.charAt(e) == jc; e++) ;
        if (e == (g = a.length)) d = [0], c = 1; else {
            for (g--; a.charAt(g) == jc;) g--;
            c -= e;
            d = [];
            for (f = 0; e <= g; e++, f++) d[f] = +a.charAt(e)
        }
        c > Ed && (d = d.splice(0, Ed - 1), b = c - 1, c = 1);
        return {d: d, e: b, i: c}
    }

    function tg(a, b, d, c) {
        var e = a.d, f = e.length - a.i;
        b = z(b) ? Math.min(Math.max(d, f), c) : +b;
        d = b + a.i;
        c = e[d];
        if (0 < d) {
            e.splice(Math.max(a.i, d));
            for (var g = d; g < e.length; g++) e[g] = 0
        } else for (f =
                        Math.max(0, f), a.i = 1, e.length = Math.max(1, d = b + 1), e[0] = 0, g = 1; g < d; g++) e[g] = 0;
        if (5 <= c) if (0 > d - 1) {
            for (c = 0; c > d; c--) e.unshift(0), a.i++;
            e.unshift(1);
            a.i++
        } else e[d - 1]++;
        for (; f < Math.max(0, b); f++) e.push(0);
        if (b = e.reduceRight(function (a, b, c, d) {
            b += a;
            d[c] = b % 10;
            return Math.floor(b / 10)
        }, 0)) e.unshift(b), a.i++
    }

    function Cd(a, b, d, c, e) {
        if (!y(a) && !R(a) || isNaN(a)) return "";
        var f = !isFinite(a), g = !1, h = Math.abs(a) + "", k = "";
        if (f) k = "\u221e"; else {
            g = sg(h);
            tg(g, e, b.minFrac, b.maxFrac);
            k = g.d;
            h = g.i;
            e = g.e;
            f = [];
            for (g = k.reduce(function (a,
                                        b) {
                return a && !b
            }, !0); 0 > h;) k.unshift(0), h++;
            0 < h ? f = k.splice(h) : (f = k, k = [0]);
            h = [];
            for (k.length >= b.lgSize && h.unshift(k.splice(-b.lgSize).join("")); k.length > b.gSize;) h.unshift(k.splice(-b.gSize).join(""));
            k.length && h.unshift(k.join(""));
            k = h.join(d);
            f.length && (k += c + f.join(""));
            e && (k += "e+" + e)
        }
        return 0 > a && !g ? b.negPre + k + b.negSuf : b.posPre + k + b.posSuf
    }

    function Jb(a, b, d, c) {
        var e = "";
        if (0 > a || c && 0 >= a) c ? a = -a + 1 : (a = -a, e = "-");
        for (a = "" + a; a.length < b;) a = jc + a;
        d && (a = a.substr(a.length - b));
        return e + a
    }

    function X(a, b, d, c, e) {
        d =
            d || 0;
        return function (f) {
            f = f["get" + a]();
            if (0 < d || f > -d) f += d;
            0 === f && -12 == d && (f = 12);
            return Jb(f, b, c, e)
        }
    }

    function lb(a, b, d) {
        return function (c, e) {
            var f = c["get" + a](), g = vb((d ? "STANDALONE" : "") + (b ? "SHORT" : "") + a);
            return e[g][f]
        }
    }

    function Fd(a) {
        var b = (new Date(a, 0, 1)).getDay();
        return new Date(a, 0, (4 >= b ? 5 : 12) - b)
    }

    function Gd(a) {
        return function (b) {
            var d = Fd(b.getFullYear());
            b = +new Date(b.getFullYear(), b.getMonth(), b.getDate() + (4 - b.getDay())) - +d;
            b = 1 + Math.round(b / 6048E5);
            return Jb(b, a)
        }
    }

    function kc(a, b) {
        return 0 >= a.getFullYear() ?
            b.ERAS[0] : b.ERAS[1]
    }

    function zd(a) {
        function b(a) {
            var b;
            if (b = a.match(d)) {
                a = new Date(0);
                var f = 0, g = 0, h = b[8] ? a.setUTCFullYear : a.setFullYear, k = b[8] ? a.setUTCHours : a.setHours;
                b[9] && (f = Y(b[9] + b[10]), g = Y(b[9] + b[11]));
                h.call(a, Y(b[1]), Y(b[2]) - 1, Y(b[3]));
                f = Y(b[4] || 0) - f;
                g = Y(b[5] || 0) - g;
                h = Y(b[6] || 0);
                b = Math.round(1E3 * parseFloat("0." + (b[7] || 0)));
                k.call(a, f, g, h, b)
            }
            return a
        }

        var d = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function (c, d, f) {
            var g = "", h =
                [], k, l;
            d = d || "mediumDate";
            d = a.DATETIME_FORMATS[d] || d;
            y(c) && (c = ug.test(c) ? Y(c) : b(c));
            R(c) && (c = new Date(c));
            if (!fa(c) || !isFinite(c.getTime())) return c;
            for (; d;) (l = vg.exec(d)) ? (h = cb(h, l, 1), d = h.pop()) : (h.push(d), d = null);
            var m = c.getTimezoneOffset();
            f && (m = vc(f, m), c = Rb(c, f, !0));
            q(h, function (b) {
                k = wg[b];
                g += k ? k(c, a.DATETIME_FORMATS, m) : "''" === b ? "'" : b.replace(/(^'|'$)/g, "").replace(/''/g, "'")
            });
            return g
        }
    }

    function ng() {
        return function (a, b) {
            z(b) && (b = 2);
            return db(a, b)
        }
    }

    function og() {
        return function (a, b, d) {
            b = Infinity ===
            Math.abs(Number(b)) ? Number(b) : Y(b);
            if (isNaN(b)) return a;
            R(a) && (a = a.toString());
            if (!M(a) && !y(a)) return a;
            d = !d || isNaN(d) ? 0 : Y(d);
            d = 0 > d ? Math.max(0, a.length + d) : d;
            return 0 <= b ? a.slice(d, d + b) : 0 === d ? a.slice(b, a.length) : a.slice(Math.max(0, d + b), d)
        }
    }

    function Bd(a) {
        function b(b, d) {
            d = d ? -1 : 1;
            return b.map(function (b) {
                var c = 1, h = $a;
                if (D(b)) h = b; else if (y(b)) {
                    if ("+" == b.charAt(0) || "-" == b.charAt(0)) c = "-" == b.charAt(0) ? -1 : 1, b = b.substring(1);
                    if ("" !== b && (h = a(b), h.constant)) var k = h(), h = function (a) {
                        return a[k]
                    }
                }
                return {
                    get: h,
                    descending: c * d
                }
            })
        }

        function d(a) {
            switch (typeof a) {
                case "number":
                case "boolean":
                case "string":
                    return !0;
                default:
                    return !1
            }
        }

        return function (a, e, f) {
            if (null == a) return a;
            if (!za(a)) throw O("orderBy")("notarray", a);
            M(e) || (e = [e]);
            0 === e.length && (e = ["+"]);
            var g = b(e, f);
            g.push({
                get: function () {
                    return {}
                }, descending: f ? -1 : 1
            });
            a = Array.prototype.map.call(a, function (a, b) {
                return {
                    value: a, predicateValues: g.map(function (c) {
                        var e = c.get(a);
                        c = typeof e;
                        if (null === e) c = "string", e = "null"; else if ("string" === c) e = e.toLowerCase(); else if ("object" ===
                            c) a:{
                            if ("function" === typeof e.valueOf && (e = e.valueOf(), d(e))) break a;
                            if (rc(e) && (e = e.toString(), d(e))) break a;
                            e = b
                        }
                        return {value: e, type: c}
                    })
                }
            });
            a.sort(function (a, b) {
                for (var c = 0, d = 0, e = g.length; d < e; ++d) {
                    var c = a.predicateValues[d], f = b.predicateValues[d], q = 0;
                    c.type === f.type ? c.value !== f.value && (q = c.value < f.value ? -1 : 1) : q = c.type < f.type ? -1 : 1;
                    if (c = q * g[d].descending) break
                }
                return c
            });
            return a = a.map(function (a) {
                return a.value
            })
        }
    }

    function Na(a) {
        D(a) && (a = {link: a});
        a.restrict = a.restrict || "AC";
        return da(a)
    }

    function Hd(a,
                b, d, c, e) {
        var f = this, g = [];
        f.$error = {};
        f.$$success = {};
        f.$pending = u;
        f.$name = e(b.name || b.ngForm || "")(d);
        f.$dirty = !1;
        f.$pristine = !0;
        f.$valid = !0;
        f.$invalid = !1;
        f.$submitted = !1;
        f.$$parentForm = Kb;
        f.$rollbackViewValue = function () {
            q(g, function (a) {
                a.$rollbackViewValue()
            })
        };
        f.$commitViewValue = function () {
            q(g, function (a) {
                a.$commitViewValue()
            })
        };
        f.$addControl = function (a) {
            Ta(a.$name, "input");
            g.push(a);
            a.$name && (f[a.$name] = a);
            a.$$parentForm = f
        };
        f.$$renameControl = function (a, b) {
            var c = a.$name;
            f[c] === a && delete f[c];
            f[b] =
                a;
            a.$name = b
        };
        f.$removeControl = function (a) {
            a.$name && f[a.$name] === a && delete f[a.$name];
            q(f.$pending, function (b, c) {
                f.$setValidity(c, null, a)
            });
            q(f.$error, function (b, c) {
                f.$setValidity(c, null, a)
            });
            q(f.$$success, function (b, c) {
                f.$setValidity(c, null, a)
            });
            bb(g, a);
            a.$$parentForm = Kb
        };
        Id({
            ctrl: this, $element: a, set: function (a, b, c) {
                var d = a[b];
                d ? -1 === d.indexOf(c) && d.push(c) : a[b] = [c]
            }, unset: function (a, b, c) {
                var d = a[b];
                d && (bb(d, c), 0 === d.length && delete a[b])
            }, $animate: c
        });
        f.$setDirty = function () {
            c.removeClass(a, Xa);
            c.addClass(a,
                Lb);
            f.$dirty = !0;
            f.$pristine = !1;
            f.$$parentForm.$setDirty()
        };
        f.$setPristine = function () {
            c.setClass(a, Xa, Lb + " ng-submitted");
            f.$dirty = !1;
            f.$pristine = !0;
            f.$submitted = !1;
            q(g, function (a) {
                a.$setPristine()
            })
        };
        f.$setUntouched = function () {
            q(g, function (a) {
                a.$setUntouched()
            })
        };
        f.$setSubmitted = function () {
            c.addClass(a, "ng-submitted");
            f.$submitted = !0;
            f.$$parentForm.$setSubmitted()
        }
    }

    function lc(a) {
        a.$formatters.push(function (b) {
            return a.$isEmpty(b) ? b : b.toString()
        })
    }

    function mb(a, b, d, c, e, f) {
        var g = N(b[0].type);
        if (!e.android) {
            var h =
                !1;
            b.on("compositionstart", function () {
                h = !0
            });
            b.on("compositionend", function () {
                h = !1;
                l()
            })
        }
        var k, l = function (a) {
            k && (f.defer.cancel(k), k = null);
            if (!h) {
                var e = b.val();
                a = a && a.type;
                "password" === g || d.ngTrim && "false" === d.ngTrim || (e = W(e));
                (c.$viewValue !== e || "" === e && c.$$hasNativeValidators) && c.$setViewValue(e, a)
            }
        };
        if (e.hasEvent("input")) b.on("input", l); else {
            var m = function (a, b, c) {
                k || (k = f.defer(function () {
                    k = null;
                    b && b.value === c || l(a)
                }))
            };
            b.on("keydown", function (a) {
                var b = a.keyCode;
                91 === b || 15 < b && 19 > b || 37 <= b && 40 >= b ||
                m(a, this, this.value)
            });
            if (e.hasEvent("paste")) b.on("paste cut", m)
        }
        b.on("change", l);
        if (Jd[g] && c.$$hasNativeValidators && g === d.type) b.on("keydown wheel mousedown", function (a) {
            if (!k) {
                var b = this.validity, c = b.badInput, d = b.typeMismatch;
                k = f.defer(function () {
                    k = null;
                    b.badInput === c && b.typeMismatch === d || l(a)
                })
            }
        });
        c.$render = function () {
            var a = c.$isEmpty(c.$viewValue) ? "" : c.$viewValue;
            b.val() !== a && b.val(a)
        }
    }

    function Mb(a, b) {
        return function (d, c) {
            var e, f;
            if (fa(d)) return d;
            if (y(d)) {
                '"' == d.charAt(0) && '"' == d.charAt(d.length -
                    1) && (d = d.substring(1, d.length - 1));
                if (xg.test(d)) return new Date(d);
                a.lastIndex = 0;
                if (e = a.exec(d)) return e.shift(), f = c ? {
                    yyyy: c.getFullYear(),
                    MM: c.getMonth() + 1,
                    dd: c.getDate(),
                    HH: c.getHours(),
                    mm: c.getMinutes(),
                    ss: c.getSeconds(),
                    sss: c.getMilliseconds() / 1E3
                } : {yyyy: 1970, MM: 1, dd: 1, HH: 0, mm: 0, ss: 0, sss: 0}, q(e, function (a, c) {
                    c < b.length && (f[b[c]] = +a)
                }), new Date(f.yyyy, f.MM - 1, f.dd, f.HH, f.mm, f.ss || 0, 1E3 * f.sss || 0)
            }
            return NaN
        }
    }

    function nb(a, b, d, c) {
        return function (e, f, g, h, k, l, m) {
            function n(a) {
                return a && !(a.getTime &&
                    a.getTime() !== a.getTime())
            }

            function p(a) {
                return A(a) && !fa(a) ? d(a) || u : a
            }

            Kd(e, f, g, h);
            mb(e, f, g, h, k, l);
            var q = h && h.$options && h.$options.timezone, s;
            h.$$parserName = a;
            h.$parsers.push(function (a) {
                return h.$isEmpty(a) ? null : b.test(a) ? (a = d(a, s), q && (a = Rb(a, q)), a) : u
            });
            h.$formatters.push(function (a) {
                if (a && !fa(a)) throw ob("datefmt", a);
                if (n(a)) return (s = a) && q && (s = Rb(s, q, !0)), m("date")(a, c, q);
                s = null;
                return ""
            });
            if (A(g.min) || g.ngMin) {
                var x;
                h.$validators.min = function (a) {
                    return !n(a) || z(x) || d(a) >= x
                };
                g.$observe("min", function (a) {
                    x =
                        p(a);
                    h.$validate()
                })
            }
            if (A(g.max) || g.ngMax) {
                var r;
                h.$validators.max = function (a) {
                    return !n(a) || z(r) || d(a) <= r
                };
                g.$observe("max", function (a) {
                    r = p(a);
                    h.$validate()
                })
            }
        }
    }

    function Kd(a, b, d, c) {
        (c.$$hasNativeValidators = J(b[0].validity)) && c.$parsers.push(function (a) {
            var c = b.prop("validity") || {};
            return c.badInput || c.typeMismatch ? u : a
        })
    }

    function Ld(a, b, d, c, e) {
        if (A(c)) {
            a = a(c);
            if (!a.constant) throw ob("constexpr", d, c);
            return a(b)
        }
        return e
    }

    function mc(a, b) {
        a = "ngClass" + a;
        return ["$animate", function (d) {
            function c(a, b) {
                var c =
                    [], d = 0;
                a:for (; d < a.length; d++) {
                    for (var e = a[d], m = 0; m < b.length; m++) if (e == b[m]) continue a;
                    c.push(e)
                }
                return c
            }

            function e(a) {
                var b = [];
                return M(a) ? (q(a, function (a) {
                    b = b.concat(e(a))
                }), b) : y(a) ? a.split(" ") : J(a) ? (q(a, function (a, c) {
                    a && (b = b.concat(c.split(" ")))
                }), b) : a
            }

            return {
                restrict: "AC", link: function (f, g, h) {
                    function k(a, b) {
                        var c = g.data("$classCounts") || V(), d = [];
                        q(a, function (a) {
                            if (0 < b || c[a]) c[a] = (c[a] || 0) + b, c[a] === +(0 < b) && d.push(a)
                        });
                        g.data("$classCounts", c);
                        return d.join(" ")
                    }

                    function l(a) {
                        if (!0 === b || f.$index %
                            2 === b) {
                            var l = e(a || []);
                            if (!m) {
                                var q = k(l, 1);
                                h.$addClass(q)
                            } else if (!na(a, m)) {
                                var s = e(m), q = c(l, s), l = c(s, l), q = k(q, 1), l = k(l, -1);
                                q && q.length && d.addClass(g, q);
                                l && l.length && d.removeClass(g, l)
                            }
                        }
                        m = ia(a)
                    }

                    var m;
                    f.$watch(h[a], l, !0);
                    h.$observe("class", function (b) {
                        l(f.$eval(h[a]))
                    });
                    "ngClass" !== a && f.$watch("$index", function (c, d) {
                        var g = c & 1;
                        if (g !== (d & 1)) {
                            var l = e(f.$eval(h[a]));
                            g === b ? (g = k(l, 1), h.$addClass(g)) : (g = k(l, -1), h.$removeClass(g))
                        }
                    })
                }
            }
        }]
    }

    function Id(a) {
        function b(a, b) {
            b && !f[a] ? (k.addClass(e, a), f[a] = !0) : !b &&
                f[a] && (k.removeClass(e, a), f[a] = !1)
        }

        function d(a, c) {
            a = a ? "-" + zc(a, "-") : "";
            b(pb + a, !0 === c);
            b(Md + a, !1 === c)
        }

        var c = a.ctrl, e = a.$element, f = {}, g = a.set, h = a.unset, k = a.$animate;
        f[Md] = !(f[pb] = e.hasClass(pb));
        c.$setValidity = function (a, e, f) {
            z(e) ? (c.$pending || (c.$pending = {}), g(c.$pending, a, f)) : (c.$pending && h(c.$pending, a, f), Nd(c.$pending) && (c.$pending = u));
            Oa(e) ? e ? (h(c.$error, a, f), g(c.$$success, a, f)) : (g(c.$error, a, f), h(c.$$success, a, f)) : (h(c.$error, a, f), h(c.$$success, a, f));
            c.$pending ? (b(Od, !0), c.$valid = c.$invalid =
                u, d("", null)) : (b(Od, !1), c.$valid = Nd(c.$error), c.$invalid = !c.$valid, d("", c.$valid));
            e = c.$pending && c.$pending[a] ? u : c.$error[a] ? !1 : c.$$success[a] ? !0 : null;
            d(a, e);
            c.$$parentForm.$setValidity(a, e, c)
        }
    }

    function Nd(a) {
        if (a) for (var b in a) if (a.hasOwnProperty(b)) return !1;
        return !0
    }

    var yg = /^\/(.+)\/([a-z]*)$/, va = Object.prototype.hasOwnProperty, N = function (a) {
            return y(a) ? a.toLowerCase() : a
        }, vb = function (a) {
            return y(a) ? a.toUpperCase() : a
        }, Da, H, $, Aa = [].slice, Yf = [].splice, zg = [].push, ka = Object.prototype.toString,
        sc = Object.getPrototypeOf,
        Ba = O("ng"), ea = T.angular || (T.angular = {}), Tb, qb = 0;
    Da = P.documentMode;
    E.$inject = [];
    $a.$inject = [];
    var M = Array.isArray,
        Zd = /^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,
        W = function (a) {
            return y(a) ? a.trim() : a
        }, ud = function (a) {
            return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")
        }, Ga = function () {
            if (!A(Ga.rules)) {
                var a = P.querySelector("[ng-csp]") || P.querySelector("[data-ng-csp]");
                if (a) {
                    var b = a.getAttribute("ng-csp") || a.getAttribute("data-ng-csp");
                    Ga.rules = {
                        noUnsafeEval: !b || -1 !== b.indexOf("no-unsafe-eval"),
                        noInlineStyle: !b || -1 !== b.indexOf("no-inline-style")
                    }
                } else {
                    a = Ga;
                    try {
                        new Function(""), b = !1
                    } catch (d) {
                        b = !0
                    }
                    a.rules = {noUnsafeEval: b, noInlineStyle: !1}
                }
            }
            return Ga.rules
        }, sb = function () {
            if (A(sb.name_)) return sb.name_;
            var a, b, d = Qa.length, c, e;
            for (b = 0; b < d; ++b) if (c = Qa[b], a = P.querySelector("[" + c.replace(":", "\\:") + "jq]")) {
                e = a.getAttribute(c + "jq");
                break
            }
            return sb.name_ = e
        }, be = /:/g, Qa = ["ng-", "data-ng-", "ng:", "x-ng-"], ge = /[A-Z]/g, Ac = !1, Pa = 3, ke = {
            full: "1.5.3",
            major: 1, minor: 5, dot: 3, codeName: "diplohaplontic-meiosis"
        };
    U.expando = "ng339";
    var hb = U.cache = {}, Mf = 1;
    U._data = function (a) {
        return this.cache[a[this.expando]] || {}
    };
    var Hf = /([\:\-\_]+(.))/g, If = /^moz([A-Z])/, zb = {mouseleave: "mouseout", mouseenter: "mouseover"},
        Vb = O("jqLite"), Lf = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/, Ub = /<|&#?\w+;/, Jf = /<([\w:-]+)/,
        Kf = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi, ha = {
            option: [1, '<select multiple="multiple">', "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2,
                "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    ha.optgroup = ha.option;
    ha.tbody = ha.tfoot = ha.colgroup = ha.caption = ha.thead;
    ha.th = ha.td;
    var Rf = Node.prototype.contains || function (a) {
        return !!(this.compareDocumentPosition(a) & 16)
    }, Ra = U.prototype = {
        ready: function (a) {
            function b() {
                d || (d = !0, a())
            }

            var d = !1;
            "complete" === P.readyState ? setTimeout(b) : (this.on("DOMContentLoaded", b), U(T).on("load", b))
        }, toString: function () {
            var a =
                [];
            q(this, function (b) {
                a.push("" + b)
            });
            return "[" + a.join(", ") + "]"
        }, eq: function (a) {
            return 0 <= a ? H(this[a]) : H(this[this.length + a])
        }, length: 0, push: zg, sort: [].sort, splice: [].splice
    }, Eb = {};
    q("multiple selected checked disabled readOnly required open".split(" "), function (a) {
        Eb[N(a)] = a
    });
    var Sc = {};
    q("input select option textarea button form details".split(" "), function (a) {
        Sc[a] = !0
    });
    var $c = {ngMinlength: "minlength", ngMaxlength: "maxlength", ngMin: "min", ngMax: "max", ngPattern: "pattern"};
    q({
        data: Xb, removeData: gb,
        hasData: function (a) {
            for (var b in hb[a.ng339]) return !0;
            return !1
        }, cleanData: function (a) {
            for (var b = 0, d = a.length; b < d; b++) gb(a[b])
        }
    }, function (a, b) {
        U[b] = a
    });
    q({
        data: Xb, inheritedData: Db, scope: function (a) {
            return H.data(a, "$scope") || Db(a.parentNode || a, ["$isolateScope", "$scope"])
        }, isolateScope: function (a) {
            return H.data(a, "$isolateScope") || H.data(a, "$isolateScopeNoTemplate")
        }, controller: Pc, injector: function (a) {
            return Db(a, "$injector")
        }, removeAttr: function (a, b) {
            a.removeAttribute(b)
        }, hasClass: Ab, css: function (a,
                                        b, d) {
            b = fb(b);
            if (A(d)) a.style[b] = d; else return a.style[b]
        }, attr: function (a, b, d) {
            var c = a.nodeType;
            if (c !== Pa && 2 !== c && 8 !== c) if (c = N(b), Eb[c]) if (A(d)) d ? (a[b] = !0, a.setAttribute(b, c)) : (a[b] = !1, a.removeAttribute(c)); else return a[b] || (a.attributes.getNamedItem(b) || E).specified ? c : u; else if (A(d)) a.setAttribute(b, d); else if (a.getAttribute) return a = a.getAttribute(b, 2), null === a ? u : a
        }, prop: function (a, b, d) {
            if (A(d)) a[b] = d; else return a[b]
        }, text: function () {
            function a(a, d) {
                if (z(d)) {
                    var c = a.nodeType;
                    return 1 === c || c ===
                    Pa ? a.textContent : ""
                }
                a.textContent = d
            }

            a.$dv = "";
            return a
        }(), val: function (a, b) {
            if (z(b)) {
                if (a.multiple && "select" === oa(a)) {
                    var d = [];
                    q(a.options, function (a) {
                        a.selected && d.push(a.value || a.text)
                    });
                    return 0 === d.length ? null : d
                }
                return a.value
            }
            a.value = b
        }, html: function (a, b) {
            if (z(b)) return a.innerHTML;
            xb(a, !0);
            a.innerHTML = b
        }, empty: Qc
    }, function (a, b) {
        U.prototype[b] = function (b, c) {
            var e, f, g = this.length;
            if (a !== Qc && z(2 == a.length && a !== Ab && a !== Pc ? b : c)) {
                if (J(b)) {
                    for (e = 0; e < g; e++) if (a === Xb) a(this[e], b); else for (f in b) a(this[e],
                        f, b[f]);
                    return this
                }
                e = a.$dv;
                g = z(e) ? Math.min(g, 1) : g;
                for (f = 0; f < g; f++) {
                    var h = a(this[f], b, c);
                    e = e ? e + h : h
                }
                return e
            }
            for (e = 0; e < g; e++) a(this[e], b, c);
            return this
        }
    });
    q({
        removeData: gb, on: function (a, b, d, c) {
            if (A(c)) throw Vb("onargs");
            if (Kc(a)) {
                c = yb(a, !0);
                var e = c.events, f = c.handle;
                f || (f = c.handle = Of(a, e));
                c = 0 <= b.indexOf(" ") ? b.split(" ") : [b];
                for (var g = c.length, h = function (b, c, g) {
                    var h = e[b];
                    h || (h = e[b] = [], h.specialHandlerWrapper = c, "$destroy" === b || g || a.addEventListener(b, f, !1));
                    h.push(d)
                }; g--;) b = c[g], zb[b] ? (h(zb[b], Qf),
                    h(b, u, !0)) : h(b)
            }
        }, off: Oc, one: function (a, b, d) {
            a = H(a);
            a.on(b, function e() {
                a.off(b, d);
                a.off(b, e)
            });
            a.on(b, d)
        }, replaceWith: function (a, b) {
            var d, c = a.parentNode;
            xb(a);
            q(new U(b), function (b) {
                d ? c.insertBefore(b, d.nextSibling) : c.replaceChild(b, a);
                d = b
            })
        }, children: function (a) {
            var b = [];
            q(a.childNodes, function (a) {
                1 === a.nodeType && b.push(a)
            });
            return b
        }, contents: function (a) {
            return a.contentDocument || a.childNodes || []
        }, append: function (a, b) {
            var d = a.nodeType;
            if (1 === d || 11 === d) {
                b = new U(b);
                for (var d = 0, c = b.length; d < c; d++) a.appendChild(b[d])
            }
        },
        prepend: function (a, b) {
            if (1 === a.nodeType) {
                var d = a.firstChild;
                q(new U(b), function (b) {
                    a.insertBefore(b, d)
                })
            }
        }, wrap: function (a, b) {
            Mc(a, H(b).eq(0).clone()[0])
        }, remove: Yb, detach: function (a) {
            Yb(a, !0)
        }, after: function (a, b) {
            var d = a, c = a.parentNode;
            b = new U(b);
            for (var e = 0, f = b.length; e < f; e++) {
                var g = b[e];
                c.insertBefore(g, d.nextSibling);
                d = g
            }
        }, addClass: Cb, removeClass: Bb, toggleClass: function (a, b, d) {
            b && q(b.split(" "), function (b) {
                var e = d;
                z(e) && (e = !Ab(a, b));
                (e ? Cb : Bb)(a, b)
            })
        }, parent: function (a) {
            return (a = a.parentNode) &&
            11 !== a.nodeType ? a : null
        }, next: function (a) {
            return a.nextElementSibling
        }, find: function (a, b) {
            return a.getElementsByTagName ? a.getElementsByTagName(b) : []
        }, clone: Wb, triggerHandler: function (a, b, d) {
            var c, e, f = b.type || b, g = yb(a);
            if (g = (g = g && g.events) && g[f]) c = {
                preventDefault: function () {
                    this.defaultPrevented = !0
                }, isDefaultPrevented: function () {
                    return !0 === this.defaultPrevented
                }, stopImmediatePropagation: function () {
                    this.immediatePropagationStopped = !0
                }, isImmediatePropagationStopped: function () {
                    return !0 === this.immediatePropagationStopped
                },
                stopPropagation: E, type: f, target: a
            }, b.type && (c = S(c, b)), b = ia(g), e = d ? [c].concat(d) : [c], q(b, function (b) {
                c.isImmediatePropagationStopped() || b.apply(a, e)
            })
        }
    }, function (a, b) {
        U.prototype[b] = function (b, c, e) {
            for (var f, g = 0, h = this.length; g < h; g++) z(f) ? (f = a(this[g], b, c, e), A(f) && (f = H(f))) : Nc(f, a(this[g], b, c, e));
            return A(f) ? f : this
        };
        U.prototype.bind = U.prototype.on;
        U.prototype.unbind = U.prototype.off
    });
    Ua.prototype = {
        put: function (a, b) {
            this[Ha(a, this.nextUid)] = b
        }, get: function (a) {
            return this[Ha(a, this.nextUid)]
        }, remove: function (a) {
            var b =
                this[a = Ha(a, this.nextUid)];
            delete this[a];
            return b
        }
    };
    var Ff = [function () {
            this.$get = [function () {
                return Ua
            }]
        }], Tf = /^([^\(]+?)=>/, Uf = /^[^\(]*\(\s*([^\)]*)\)/m, Ag = /,/, Bg = /^\s*(_?)(\S+?)\1\s*$/,
        Sf = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg, Ia = O("$injector");
    eb.$$annotate = function (a, b, d) {
        var c;
        if ("function" === typeof a) {
            if (!(c = a.$inject)) {
                c = [];
                if (a.length) {
                    if (b) throw y(d) && d || (d = a.name || Vf(a)), Ia("strictdi", d);
                    b = Tc(a);
                    q(b[1].split(Ag), function (a) {
                        a.replace(Bg, function (a, b, d) {
                            c.push(d)
                        })
                    })
                }
                a.$inject = c
            }
        } else M(a) ?
            (b = a.length - 1, Sa(a[b], "fn"), c = a.slice(0, b)) : Sa(a, "fn", !0);
        return c
    };
    var Pd = O("$animate"), Ye = function () {
        this.$get = E
    }, Ze = function () {
        var a = new Ua, b = [];
        this.$get = ["$$AnimateRunner", "$rootScope", function (d, c) {
            function e(a, b, c) {
                var d = !1;
                b && (b = y(b) ? b.split(" ") : M(b) ? b : [], q(b, function (b) {
                    b && (d = !0, a[b] = c)
                }));
                return d
            }

            function f() {
                q(b, function (b) {
                    var c = a.get(b);
                    if (c) {
                        var d = Wf(b.attr("class")), e = "", f = "";
                        q(c, function (a, b) {
                            a !== !!d[b] && (a ? e += (e.length ? " " : "") + b : f += (f.length ? " " : "") + b)
                        });
                        q(b, function (a) {
                            e && Cb(a,
                                e);
                            f && Bb(a, f)
                        });
                        a.remove(b)
                    }
                });
                b.length = 0
            }

            return {
                enabled: E, on: E, off: E, pin: E, push: function (g, h, k, l) {
                    l && l();
                    k = k || {};
                    k.from && g.css(k.from);
                    k.to && g.css(k.to);
                    if (k.addClass || k.removeClass) if (h = k.addClass, l = k.removeClass, k = a.get(g) || {}, h = e(k, h, !0), l = e(k, l, !1), h || l) a.put(g, k), b.push(g), 1 === b.length && c.$$postDigest(f);
                    g = new d;
                    g.complete();
                    return g
                }
            }
        }]
    }, We = ["$provide", function (a) {
        var b = this;
        this.$$registeredAnimations = Object.create(null);
        this.register = function (d, c) {
            if (d && "." !== d.charAt(0)) throw Pd("notcsel",
                d);
            var e = d + "-animation";
            b.$$registeredAnimations[d.substr(1)] = e;
            a.factory(e, c)
        };
        this.classNameFilter = function (a) {
            if (1 === arguments.length && (this.$$classNameFilter = a instanceof RegExp ? a : null) && /(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString())) throw Pd("nongcls", "ng-animate");
            return this.$$classNameFilter
        };
        this.$get = ["$$animateQueue", function (a) {
            function b(a, c, d) {
                if (d) {
                    var h;
                    a:{
                        for (h = 0; h < d.length; h++) {
                            var k = d[h];
                            if (1 === k.nodeType) {
                                h = k;
                                break a
                            }
                        }
                        h = void 0
                    }
                    !h || h.parentNode || h.previousElementSibling ||
                    (d = null)
                }
                d ? d.after(a) : c.prepend(a)
            }

            return {
                on: a.on, off: a.off, pin: a.pin, enabled: a.enabled, cancel: function (a) {
                    a.end && a.end()
                }, enter: function (e, f, g, h) {
                    f = f && H(f);
                    g = g && H(g);
                    f = f || g.parent();
                    b(e, f, g);
                    return a.push(e, "enter", Ja(h))
                }, move: function (e, f, g, h) {
                    f = f && H(f);
                    g = g && H(g);
                    f = f || g.parent();
                    b(e, f, g);
                    return a.push(e, "move", Ja(h))
                }, leave: function (b, c) {
                    return a.push(b, "leave", Ja(c), function () {
                        b.remove()
                    })
                }, addClass: function (b, c, g) {
                    g = Ja(g);
                    g.addClass = ib(g.addclass, c);
                    return a.push(b, "addClass", g)
                }, removeClass: function (b,
                                          c, g) {
                    g = Ja(g);
                    g.removeClass = ib(g.removeClass, c);
                    return a.push(b, "removeClass", g)
                }, setClass: function (b, c, g, h) {
                    h = Ja(h);
                    h.addClass = ib(h.addClass, c);
                    h.removeClass = ib(h.removeClass, g);
                    return a.push(b, "setClass", h)
                }, animate: function (b, c, g, h, k) {
                    k = Ja(k);
                    k.from = k.from ? S(k.from, c) : c;
                    k.to = k.to ? S(k.to, g) : g;
                    k.tempClasses = ib(k.tempClasses, h || "ng-inline-animate");
                    return a.push(b, "animate", k)
                }
            }
        }]
    }], af = function () {
        this.$get = ["$$rAF", function (a) {
            function b(b) {
                d.push(b);
                1 < d.length || a(function () {
                    for (var a = 0; a < d.length; a++) d[a]();
                    d = []
                })
            }

            var d = [];
            return function () {
                var a = !1;
                b(function () {
                    a = !0
                });
                return function (d) {
                    a ? d() : b(d)
                }
            }
        }]
    }, $e = function () {
        this.$get = ["$q", "$sniffer", "$$animateAsyncRun", "$document", "$timeout", function (a, b, d, c, e) {
            function f(a) {
                this.setHost(a);
                var b = d();
                this._doneCallbacks = [];
                this._tick = function (a) {
                    var d = c[0];
                    d && d.hidden ? e(a, 0, !1) : b(a)
                };
                this._state = 0
            }

            f.chain = function (a, b) {
                function c() {
                    if (d === a.length) b(!0); else a[d](function (a) {
                        !1 === a ? b(!1) : (d++, c())
                    })
                }

                var d = 0;
                c()
            };
            f.all = function (a, b) {
                function c(f) {
                    e = e && f;
                    ++d ===
                    a.length && b(e)
                }

                var d = 0, e = !0;
                q(a, function (a) {
                    a.done(c)
                })
            };
            f.prototype = {
                setHost: function (a) {
                    this.host = a || {}
                }, done: function (a) {
                    2 === this._state ? a() : this._doneCallbacks.push(a)
                }, progress: E, getPromise: function () {
                    if (!this.promise) {
                        var b = this;
                        this.promise = a(function (a, c) {
                            b.done(function (b) {
                                !1 === b ? c() : a()
                            })
                        })
                    }
                    return this.promise
                }, then: function (a, b) {
                    return this.getPromise().then(a, b)
                }, "catch": function (a) {
                    return this.getPromise()["catch"](a)
                }, "finally": function (a) {
                    return this.getPromise()["finally"](a)
                }, pause: function () {
                    this.host.pause &&
                    this.host.pause()
                }, resume: function () {
                    this.host.resume && this.host.resume()
                }, end: function () {
                    this.host.end && this.host.end();
                    this._resolve(!0)
                }, cancel: function () {
                    this.host.cancel && this.host.cancel();
                    this._resolve(!1)
                }, complete: function (a) {
                    var b = this;
                    0 === b._state && (b._state = 1, b._tick(function () {
                        b._resolve(a)
                    }))
                }, _resolve: function (a) {
                    2 !== this._state && (q(this._doneCallbacks, function (b) {
                        b(a)
                    }), this._doneCallbacks.length = 0, this._state = 2)
                }
            };
            return f
        }]
    }, Xe = function () {
        this.$get = ["$$rAF", "$q", "$$AnimateRunner",
            function (a, b, d) {
                return function (b, e) {
                    function f() {
                        a(function () {
                            g.addClass && (b.addClass(g.addClass), g.addClass = null);
                            g.removeClass && (b.removeClass(g.removeClass), g.removeClass = null);
                            g.to && (b.css(g.to), g.to = null);
                            h || k.complete();
                            h = !0
                        });
                        return k
                    }

                    var g = e || {};
                    g.$$prepared || (g = pa(g));
                    g.cleanupStyles && (g.from = g.to = null);
                    g.from && (b.css(g.from), g.from = null);
                    var h, k = new d;
                    return {start: f, end: f}
                }
            }]
    }, ga = O("$compile");
    Cc.$inject = ["$provide", "$$sanitizeUriProvider"];
    var Vc = /^((?:x|data)[\:\-_])/i, Zf = O("$controller"),
        ad = /^(\S+)(\s+as\s+([\w$]+))?$/, gf = function () {
            this.$get = ["$document", function (a) {
                return function (b) {
                    b ? !b.nodeType && b instanceof H && (b = b[0]) : b = a[0].body;
                    return b.offsetWidth + 1
                }
            }]
        }, bd = "application/json", bc = {"Content-Type": bd + ";charset=utf-8"}, ag = /^\[|^\{(?!\{)/,
        bg = {"[": /]$/, "{": /}$/}, $f = /^\)\]\}',?\n/, Cg = O("$http"), fd = function (a) {
            return function () {
                throw Cg("legacy", a);
            }
        }, La = ea.$interpolateMinErr = O("$interpolate");
    La.throwNoconcat = function (a) {
        throw La("noconcat", a);
    };
    La.interr = function (a, b) {
        return La("interr",
            a, b.toString())
    };
    var Dg = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/, dg = {http: 80, https: 443, ftp: 21}, Fb = O("$location"), Eg = {
        $$html5: !1, $$replace: !1, absUrl: Gb("$$absUrl"), url: function (a) {
            if (z(a)) return this.$$url;
            var b = Dg.exec(a);
            (b[1] || "" === a) && this.path(decodeURIComponent(b[1]));
            (b[2] || b[1] || "" === a) && this.search(b[3] || "");
            this.hash(b[5] || "");
            return this
        }, protocol: Gb("$$protocol"), host: Gb("$$host"), port: Gb("$$port"), path: kd("$$path", function (a) {
            a = null !== a ? a.toString() : "";
            return "/" == a.charAt(0) ? a : "/" + a
        }), search: function (a,
                              b) {
            switch (arguments.length) {
                case 0:
                    return this.$$search;
                case 1:
                    if (y(a) || R(a)) a = a.toString(), this.$$search = xc(a); else if (J(a)) a = pa(a, {}), q(a, function (b, c) {
                        null == b && delete a[c]
                    }), this.$$search = a; else throw Fb("isrcharg");
                    break;
                default:
                    z(b) || null === b ? delete this.$$search[a] : this.$$search[a] = b
            }
            this.$$compose();
            return this
        }, hash: kd("$$hash", function (a) {
            return null !== a ? a.toString() : ""
        }), replace: function () {
            this.$$replace = !0;
            return this
        }
    };
    q([jd, ec, dc], function (a) {
        a.prototype = Object.create(Eg);
        a.prototype.state =
            function (b) {
                if (!arguments.length) return this.$$state;
                if (a !== dc || !this.$$html5) throw Fb("nostate");
                this.$$state = z(b) ? null : b;
                return this
            }
    });
    var ca = O("$parse"), fg = Function.prototype.call, gg = Function.prototype.apply, hg = Function.prototype.bind,
        Nb = V();
    q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "), function (a) {
        Nb[a] = !0
    });
    var Fg = {n: "\n", f: "\f", r: "\r", t: "\t", v: "\v", "'": "'", '"': '"'}, gc = function (a) {
        this.options = a
    };
    gc.prototype = {
        constructor: gc, lex: function (a) {
            this.text = a;
            this.index = 0;
            for (this.tokens =
                     []; this.index < this.text.length;) if (a = this.text.charAt(this.index), '"' === a || "'" === a) this.readString(a); else if (this.isNumber(a) || "." === a && this.isNumber(this.peek())) this.readNumber(); else if (this.isIdent(a)) this.readIdent(); else if (this.is(a, "(){}[].,;:?")) this.tokens.push({
                index: this.index,
                text: a
            }), this.index++; else if (this.isWhitespace(a)) this.index++; else {
                var b = a + this.peek(), d = b + this.peek(2), c = Nb[b], e = Nb[d];
                Nb[a] || c || e ? (a = e ? d : c ? b : a, this.tokens.push({
                    index: this.index,
                    text: a,
                    operator: !0
                }), this.index +=
                    a.length) : this.throwError("Unexpected next character ", this.index, this.index + 1)
            }
            return this.tokens
        }, is: function (a, b) {
            return -1 !== b.indexOf(a)
        }, peek: function (a) {
            a = a || 1;
            return this.index + a < this.text.length ? this.text.charAt(this.index + a) : !1
        }, isNumber: function (a) {
            return "0" <= a && "9" >= a && "string" === typeof a
        }, isWhitespace: function (a) {
            return " " === a || "\r" === a || "\t" === a || "\n" === a || "\v" === a || "\u00a0" === a
        }, isIdent: function (a) {
            return "a" <= a && "z" >= a || "A" <= a && "Z" >= a || "_" === a || "$" === a
        }, isExpOperator: function (a) {
            return "-" ===
                a || "+" === a || this.isNumber(a)
        }, throwError: function (a, b, d) {
            d = d || this.index;
            b = A(b) ? "s " + b + "-" + this.index + " [" + this.text.substring(b, d) + "]" : " " + d;
            throw ca("lexerr", a, b, this.text);
        }, readNumber: function () {
            for (var a = "", b = this.index; this.index < this.text.length;) {
                var d = N(this.text.charAt(this.index));
                if ("." == d || this.isNumber(d)) a += d; else {
                    var c = this.peek();
                    if ("e" == d && this.isExpOperator(c)) a += d; else if (this.isExpOperator(d) && c && this.isNumber(c) && "e" == a.charAt(a.length - 1)) a += d; else if (!this.isExpOperator(d) ||
                        c && this.isNumber(c) || "e" != a.charAt(a.length - 1)) break; else this.throwError("Invalid exponent")
                }
                this.index++
            }
            this.tokens.push({index: b, text: a, constant: !0, value: Number(a)})
        }, readIdent: function () {
            for (var a = this.index; this.index < this.text.length;) {
                var b = this.text.charAt(this.index);
                if (!this.isIdent(b) && !this.isNumber(b)) break;
                this.index++
            }
            this.tokens.push({index: a, text: this.text.slice(a, this.index), identifier: !0})
        }, readString: function (a) {
            var b = this.index;
            this.index++;
            for (var d = "", c = a, e = !1; this.index < this.text.length;) {
                var f =
                    this.text.charAt(this.index), c = c + f;
                if (e) "u" === f ? (e = this.text.substring(this.index + 1, this.index + 5), e.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + e + "]"), this.index += 4, d += String.fromCharCode(parseInt(e, 16))) : d += Fg[f] || f, e = !1; else if ("\\" === f) e = !0; else {
                    if (f === a) {
                        this.index++;
                        this.tokens.push({index: b, text: c, constant: !0, value: d});
                        return
                    }
                    d += f
                }
                this.index++
            }
            this.throwError("Unterminated quote", b)
        }
    };
    var s = function (a, b) {
        this.lexer = a;
        this.options = b
    };
    s.Program = "Program";
    s.ExpressionStatement =
        "ExpressionStatement";
    s.AssignmentExpression = "AssignmentExpression";
    s.ConditionalExpression = "ConditionalExpression";
    s.LogicalExpression = "LogicalExpression";
    s.BinaryExpression = "BinaryExpression";
    s.UnaryExpression = "UnaryExpression";
    s.CallExpression = "CallExpression";
    s.MemberExpression = "MemberExpression";
    s.Identifier = "Identifier";
    s.Literal = "Literal";
    s.ArrayExpression = "ArrayExpression";
    s.Property = "Property";
    s.ObjectExpression = "ObjectExpression";
    s.ThisExpression = "ThisExpression";
    s.LocalsExpression = "LocalsExpression";
    s.NGValueParameter = "NGValueParameter";
    s.prototype = {
        ast: function (a) {
            this.text = a;
            this.tokens = this.lexer.lex(a);
            a = this.program();
            0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]);
            return a
        }, program: function () {
            for (var a = []; ;) if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && a.push(this.expressionStatement()), !this.expect(";")) return {
                type: s.Program,
                body: a
            }
        }, expressionStatement: function () {
            return {type: s.ExpressionStatement, expression: this.filterChain()}
        }, filterChain: function () {
            for (var a =
                this.expression(); this.expect("|");) a = this.filter(a);
            return a
        }, expression: function () {
            return this.assignment()
        }, assignment: function () {
            var a = this.ternary();
            this.expect("=") && (a = {type: s.AssignmentExpression, left: a, right: this.assignment(), operator: "="});
            return a
        }, ternary: function () {
            var a = this.logicalOR(), b, d;
            return this.expect("?") && (b = this.expression(), this.consume(":")) ? (d = this.expression(), {
                type: s.ConditionalExpression,
                test: a,
                alternate: b,
                consequent: d
            }) : a
        }, logicalOR: function () {
            for (var a = this.logicalAND(); this.expect("||");) a =
                {type: s.LogicalExpression, operator: "||", left: a, right: this.logicalAND()};
            return a
        }, logicalAND: function () {
            for (var a = this.equality(); this.expect("&&");) a = {
                type: s.LogicalExpression,
                operator: "&&",
                left: a,
                right: this.equality()
            };
            return a
        }, equality: function () {
            for (var a = this.relational(), b; b = this.expect("==", "!=", "===", "!==");) a = {
                type: s.BinaryExpression,
                operator: b.text,
                left: a,
                right: this.relational()
            };
            return a
        }, relational: function () {
            for (var a = this.additive(), b; b = this.expect("<", ">", "<=", ">=");) a = {
                type: s.BinaryExpression,
                operator: b.text, left: a, right: this.additive()
            };
            return a
        }, additive: function () {
            for (var a = this.multiplicative(), b; b = this.expect("+", "-");) a = {
                type: s.BinaryExpression,
                operator: b.text,
                left: a,
                right: this.multiplicative()
            };
            return a
        }, multiplicative: function () {
            for (var a = this.unary(), b; b = this.expect("*", "/", "%");) a = {
                type: s.BinaryExpression,
                operator: b.text,
                left: a,
                right: this.unary()
            };
            return a
        }, unary: function () {
            var a;
            return (a = this.expect("+", "-", "!")) ? {
                    type: s.UnaryExpression,
                    operator: a.text,
                    prefix: !0,
                    argument: this.unary()
                } :
                this.primary()
        }, primary: function () {
            var a;
            this.expect("(") ? (a = this.filterChain(), this.consume(")")) : this.expect("[") ? a = this.arrayDeclaration() : this.expect("{") ? a = this.object() : this.selfReferential.hasOwnProperty(this.peek().text) ? a = pa(this.selfReferential[this.consume().text]) : this.options.literals.hasOwnProperty(this.peek().text) ? a = {
                type: s.Literal,
                value: this.options.literals[this.consume().text]
            } : this.peek().identifier ? a = this.identifier() : this.peek().constant ? a = this.constant() : this.throwError("not a primary expression",
                this.peek());
            for (var b; b = this.expect("(", "[", ".");) "(" === b.text ? (a = {
                type: s.CallExpression,
                callee: a,
                arguments: this.parseArguments()
            }, this.consume(")")) : "[" === b.text ? (a = {
                type: s.MemberExpression,
                object: a,
                property: this.expression(),
                computed: !0
            }, this.consume("]")) : "." === b.text ? a = {
                type: s.MemberExpression,
                object: a,
                property: this.identifier(),
                computed: !1
            } : this.throwError("IMPOSSIBLE");
            return a
        }, filter: function (a) {
            a = [a];
            for (var b = {
                type: s.CallExpression,
                callee: this.identifier(),
                arguments: a,
                filter: !0
            }; this.expect(":");) a.push(this.expression());
            return b
        }, parseArguments: function () {
            var a = [];
            if (")" !== this.peekToken().text) {
                do a.push(this.expression()); while (this.expect(","))
            }
            return a
        }, identifier: function () {
            var a = this.consume();
            a.identifier || this.throwError("is not a valid identifier", a);
            return {type: s.Identifier, name: a.text}
        }, constant: function () {
            return {type: s.Literal, value: this.consume().value}
        }, arrayDeclaration: function () {
            var a = [];
            if ("]" !== this.peekToken().text) {
                do {
                    if (this.peek("]")) break;
                    a.push(this.expression())
                } while (this.expect(","))
            }
            this.consume("]");
            return {type: s.ArrayExpression, elements: a}
        }, object: function () {
            var a = [], b;
            if ("}" !== this.peekToken().text) {
                do {
                    if (this.peek("}")) break;
                    b = {type: s.Property, kind: "init"};
                    this.peek().constant ? b.key = this.constant() : this.peek().identifier ? b.key = this.identifier() : this.throwError("invalid key", this.peek());
                    this.consume(":");
                    b.value = this.expression();
                    a.push(b)
                } while (this.expect(","))
            }
            this.consume("}");
            return {type: s.ObjectExpression, properties: a}
        }, throwError: function (a, b) {
            throw ca("syntax", b.text, a, b.index + 1, this.text,
                this.text.substring(b.index));
        }, consume: function (a) {
            if (0 === this.tokens.length) throw ca("ueoe", this.text);
            var b = this.expect(a);
            b || this.throwError("is unexpected, expecting [" + a + "]", this.peek());
            return b
        }, peekToken: function () {
            if (0 === this.tokens.length) throw ca("ueoe", this.text);
            return this.tokens[0]
        }, peek: function (a, b, d, c) {
            return this.peekAhead(0, a, b, d, c)
        }, peekAhead: function (a, b, d, c, e) {
            if (this.tokens.length > a) {
                a = this.tokens[a];
                var f = a.text;
                if (f === b || f === d || f === c || f === e || !(b || d || c || e)) return a
            }
            return !1
        },
        expect: function (a, b, d, c) {
            return (a = this.peek(a, b, d, c)) ? (this.tokens.shift(), a) : !1
        }, selfReferential: {"this": {type: s.ThisExpression}, $locals: {type: s.LocalsExpression}}
    };
    rd.prototype = {
        compile: function (a, b) {
            var d = this, c = this.astBuilder.ast(a);
            this.state = {
                nextId: 0,
                filters: {},
                expensiveChecks: b,
                fn: {vars: [], body: [], own: {}},
                assign: {vars: [], body: [], own: {}},
                inputs: []
            };
            aa(c, d.$filter);
            var e = "", f;
            this.stage = "assign";
            if (f = pd(c)) this.state.computing = "assign", e = this.nextId(), this.recurse(f, e), this.return_(e), e = "fn.assign=" +
                this.generateFunction("assign", "s,v,l");
            f = nd(c.body);
            d.stage = "inputs";
            q(f, function (a, b) {
                var c = "fn" + b;
                d.state[c] = {vars: [], body: [], own: {}};
                d.state.computing = c;
                var e = d.nextId();
                d.recurse(a, e);
                d.return_(e);
                d.state.inputs.push(c);
                a.watchId = b
            });
            this.state.computing = "fn";
            this.stage = "main";
            this.recurse(c);
            e = '"' + this.USE + " " + this.STRICT + '";\n' + this.filterPrefix() + "var fn=" + this.generateFunction("fn", "s,l,a,i") + e + this.watchFns() + "return fn;";
            e = (new Function("$filter", "ensureSafeMemberName", "ensureSafeObject",
                "ensureSafeFunction", "getStringValue", "ensureSafeAssignContext", "ifDefined", "plus", "text", e))(this.$filter, Wa, ta, ld, eg, Hb, ig, md, a);
            this.state = this.stage = u;
            e.literal = qd(c);
            e.constant = c.constant;
            return e
        }, USE: "use", STRICT: "strict", watchFns: function () {
            var a = [], b = this.state.inputs, d = this;
            q(b, function (b) {
                a.push("var " + b + "=" + d.generateFunction(b, "s"))
            });
            b.length && a.push("fn.inputs=[" + b.join(",") + "];");
            return a.join("")
        }, generateFunction: function (a, b) {
            return "function(" + b + "){" + this.varsPrefix(a) + this.body(a) +
                "};"
        }, filterPrefix: function () {
            var a = [], b = this;
            q(this.state.filters, function (d, c) {
                a.push(d + "=$filter(" + b.escape(c) + ")")
            });
            return a.length ? "var " + a.join(",") + ";" : ""
        }, varsPrefix: function (a) {
            return this.state[a].vars.length ? "var " + this.state[a].vars.join(",") + ";" : ""
        }, body: function (a) {
            return this.state[a].body.join("")
        }, recurse: function (a, b, d, c, e, f) {
            var g, h, k = this, l, m;
            c = c || E;
            if (!f && A(a.watchId)) b = b || this.nextId(), this.if_("i", this.lazyAssign(b, this.computedMember("i", a.watchId)), this.lazyRecurse(a, b, d,
                c, e, !0)); else switch (a.type) {
                case s.Program:
                    q(a.body, function (b, c) {
                        k.recurse(b.expression, u, u, function (a) {
                            h = a
                        });
                        c !== a.body.length - 1 ? k.current().body.push(h, ";") : k.return_(h)
                    });
                    break;
                case s.Literal:
                    m = this.escape(a.value);
                    this.assign(b, m);
                    c(m);
                    break;
                case s.UnaryExpression:
                    this.recurse(a.argument, u, u, function (a) {
                        h = a
                    });
                    m = a.operator + "(" + this.ifDefined(h, 0) + ")";
                    this.assign(b, m);
                    c(m);
                    break;
                case s.BinaryExpression:
                    this.recurse(a.left, u, u, function (a) {
                        g = a
                    });
                    this.recurse(a.right, u, u, function (a) {
                        h = a
                    });
                    m = "+" ===
                    a.operator ? this.plus(g, h) : "-" === a.operator ? this.ifDefined(g, 0) + a.operator + this.ifDefined(h, 0) : "(" + g + ")" + a.operator + "(" + h + ")";
                    this.assign(b, m);
                    c(m);
                    break;
                case s.LogicalExpression:
                    b = b || this.nextId();
                    k.recurse(a.left, b);
                    k.if_("&&" === a.operator ? b : k.not(b), k.lazyRecurse(a.right, b));
                    c(b);
                    break;
                case s.ConditionalExpression:
                    b = b || this.nextId();
                    k.recurse(a.test, b);
                    k.if_(b, k.lazyRecurse(a.alternate, b), k.lazyRecurse(a.consequent, b));
                    c(b);
                    break;
                case s.Identifier:
                    b = b || this.nextId();
                    d && (d.context = "inputs" === k.stage ?
                        "s" : this.assign(this.nextId(), this.getHasOwnProperty("l", a.name) + "?l:s"), d.computed = !1, d.name = a.name);
                    Wa(a.name);
                    k.if_("inputs" === k.stage || k.not(k.getHasOwnProperty("l", a.name)), function () {
                        k.if_("inputs" === k.stage || "s", function () {
                            e && 1 !== e && k.if_(k.not(k.nonComputedMember("s", a.name)), k.lazyAssign(k.nonComputedMember("s", a.name), "{}"));
                            k.assign(b, k.nonComputedMember("s", a.name))
                        })
                    }, b && k.lazyAssign(b, k.nonComputedMember("l", a.name)));
                    (k.state.expensiveChecks || Ib(a.name)) && k.addEnsureSafeObject(b);
                    c(b);
                    break;
                case s.MemberExpression:
                    g = d && (d.context = this.nextId()) || this.nextId();
                    b = b || this.nextId();
                    k.recurse(a.object, g, u, function () {
                        k.if_(k.notNull(g), function () {
                            e && 1 !== e && k.addEnsureSafeAssignContext(g);
                            if (a.computed) h = k.nextId(), k.recurse(a.property, h), k.getStringValue(h), k.addEnsureSafeMemberName(h), e && 1 !== e && k.if_(k.not(k.computedMember(g, h)), k.lazyAssign(k.computedMember(g, h), "{}")), m = k.ensureSafeObject(k.computedMember(g, h)), k.assign(b, m), d && (d.computed = !0, d.name = h); else {
                                Wa(a.property.name);
                                e &&
                                1 !== e && k.if_(k.not(k.nonComputedMember(g, a.property.name)), k.lazyAssign(k.nonComputedMember(g, a.property.name), "{}"));
                                m = k.nonComputedMember(g, a.property.name);
                                if (k.state.expensiveChecks || Ib(a.property.name)) m = k.ensureSafeObject(m);
                                k.assign(b, m);
                                d && (d.computed = !1, d.name = a.property.name)
                            }
                        }, function () {
                            k.assign(b, "undefined")
                        });
                        c(b)
                    }, !!e);
                    break;
                case s.CallExpression:
                    b = b || this.nextId();
                    a.filter ? (h = k.filter(a.callee.name), l = [], q(a.arguments, function (a) {
                        var b = k.nextId();
                        k.recurse(a, b);
                        l.push(b)
                    }), m = h + "(" +
                        l.join(",") + ")", k.assign(b, m), c(b)) : (h = k.nextId(), g = {}, l = [], k.recurse(a.callee, h, g, function () {
                        k.if_(k.notNull(h), function () {
                            k.addEnsureSafeFunction(h);
                            q(a.arguments, function (a) {
                                k.recurse(a, k.nextId(), u, function (a) {
                                    l.push(k.ensureSafeObject(a))
                                })
                            });
                            g.name ? (k.state.expensiveChecks || k.addEnsureSafeObject(g.context), m = k.member(g.context, g.name, g.computed) + "(" + l.join(",") + ")") : m = h + "(" + l.join(",") + ")";
                            m = k.ensureSafeObject(m);
                            k.assign(b, m)
                        }, function () {
                            k.assign(b, "undefined")
                        });
                        c(b)
                    }));
                    break;
                case s.AssignmentExpression:
                    h =
                        this.nextId();
                    g = {};
                    if (!od(a.left)) throw ca("lval");
                    this.recurse(a.left, u, g, function () {
                        k.if_(k.notNull(g.context), function () {
                            k.recurse(a.right, h);
                            k.addEnsureSafeObject(k.member(g.context, g.name, g.computed));
                            k.addEnsureSafeAssignContext(g.context);
                            m = k.member(g.context, g.name, g.computed) + a.operator + h;
                            k.assign(b, m);
                            c(b || m)
                        })
                    }, 1);
                    break;
                case s.ArrayExpression:
                    l = [];
                    q(a.elements, function (a) {
                        k.recurse(a, k.nextId(), u, function (a) {
                            l.push(a)
                        })
                    });
                    m = "[" + l.join(",") + "]";
                    this.assign(b, m);
                    c(m);
                    break;
                case s.ObjectExpression:
                    l =
                        [];
                    q(a.properties, function (a) {
                        k.recurse(a.value, k.nextId(), u, function (b) {
                            l.push(k.escape(a.key.type === s.Identifier ? a.key.name : "" + a.key.value) + ":" + b)
                        })
                    });
                    m = "{" + l.join(",") + "}";
                    this.assign(b, m);
                    c(m);
                    break;
                case s.ThisExpression:
                    this.assign(b, "s");
                    c("s");
                    break;
                case s.LocalsExpression:
                    this.assign(b, "l");
                    c("l");
                    break;
                case s.NGValueParameter:
                    this.assign(b, "v"), c("v")
            }
        }, getHasOwnProperty: function (a, b) {
            var d = a + "." + b, c = this.current().own;
            c.hasOwnProperty(d) || (c[d] = this.nextId(!1, a + "&&(" + this.escape(b) + " in " +
                a + ")"));
            return c[d]
        }, assign: function (a, b) {
            if (a) return this.current().body.push(a, "=", b, ";"), a
        }, filter: function (a) {
            this.state.filters.hasOwnProperty(a) || (this.state.filters[a] = this.nextId(!0));
            return this.state.filters[a]
        }, ifDefined: function (a, b) {
            return "ifDefined(" + a + "," + this.escape(b) + ")"
        }, plus: function (a, b) {
            return "plus(" + a + "," + b + ")"
        }, return_: function (a) {
            this.current().body.push("return ", a, ";")
        }, if_: function (a, b, d) {
            if (!0 === a) b(); else {
                var c = this.current().body;
                c.push("if(", a, "){");
                b();
                c.push("}");
                d && (c.push("else{"), d(), c.push("}"))
            }
        }, not: function (a) {
            return "!(" + a + ")"
        }, notNull: function (a) {
            return a + "!=null"
        }, nonComputedMember: function (a, b) {
            return a + "." + b
        }, computedMember: function (a, b) {
            return a + "[" + b + "]"
        }, member: function (a, b, d) {
            return d ? this.computedMember(a, b) : this.nonComputedMember(a, b)
        }, addEnsureSafeObject: function (a) {
            this.current().body.push(this.ensureSafeObject(a), ";")
        }, addEnsureSafeMemberName: function (a) {
            this.current().body.push(this.ensureSafeMemberName(a), ";")
        }, addEnsureSafeFunction: function (a) {
            this.current().body.push(this.ensureSafeFunction(a),
                ";")
        }, addEnsureSafeAssignContext: function (a) {
            this.current().body.push(this.ensureSafeAssignContext(a), ";")
        }, ensureSafeObject: function (a) {
            return "ensureSafeObject(" + a + ",text)"
        }, ensureSafeMemberName: function (a) {
            return "ensureSafeMemberName(" + a + ",text)"
        }, ensureSafeFunction: function (a) {
            return "ensureSafeFunction(" + a + ",text)"
        }, getStringValue: function (a) {
            this.assign(a, "getStringValue(" + a + ")")
        }, ensureSafeAssignContext: function (a) {
            return "ensureSafeAssignContext(" + a + ",text)"
        }, lazyRecurse: function (a, b, d, c, e, f) {
            var g =
                this;
            return function () {
                g.recurse(a, b, d, c, e, f)
            }
        }, lazyAssign: function (a, b) {
            var d = this;
            return function () {
                d.assign(a, b)
            }
        }, stringEscapeRegex: /[^ a-zA-Z0-9]/g, stringEscapeFn: function (a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }, escape: function (a) {
            if (y(a)) return "'" + a.replace(this.stringEscapeRegex, this.stringEscapeFn) + "'";
            if (R(a)) return a.toString();
            if (!0 === a) return "true";
            if (!1 === a) return "false";
            if (null === a) return "null";
            if ("undefined" === typeof a) return "undefined";
            throw ca("esc");
        }, nextId: function (a,
                             b) {
            var d = "v" + this.state.nextId++;
            a || this.current().vars.push(d + (b ? "=" + b : ""));
            return d
        }, current: function () {
            return this.state[this.state.computing]
        }
    };
    sd.prototype = {
        compile: function (a, b) {
            var d = this, c = this.astBuilder.ast(a);
            this.expression = a;
            this.expensiveChecks = b;
            aa(c, d.$filter);
            var e, f;
            if (e = pd(c)) f = this.recurse(e);
            e = nd(c.body);
            var g;
            e && (g = [], q(e, function (a, b) {
                var c = d.recurse(a);
                a.input = c;
                g.push(c);
                a.watchId = b
            }));
            var h = [];
            q(c.body, function (a) {
                h.push(d.recurse(a.expression))
            });
            e = 0 === c.body.length ? E : 1 ===
            c.body.length ? h[0] : function (a, b) {
                var c;
                q(h, function (d) {
                    c = d(a, b)
                });
                return c
            };
            f && (e.assign = function (a, b, c) {
                return f(a, c, b)
            });
            g && (e.inputs = g);
            e.literal = qd(c);
            e.constant = c.constant;
            return e
        }, recurse: function (a, b, d) {
            var c, e, f = this, g;
            if (a.input) return this.inputs(a.input, a.watchId);
            switch (a.type) {
                case s.Literal:
                    return this.value(a.value, b);
                case s.UnaryExpression:
                    return e = this.recurse(a.argument), this["unary" + a.operator](e, b);
                case s.BinaryExpression:
                    return c = this.recurse(a.left), e = this.recurse(a.right),
                        this["binary" + a.operator](c, e, b);
                case s.LogicalExpression:
                    return c = this.recurse(a.left), e = this.recurse(a.right), this["binary" + a.operator](c, e, b);
                case s.ConditionalExpression:
                    return this["ternary?:"](this.recurse(a.test), this.recurse(a.alternate), this.recurse(a.consequent), b);
                case s.Identifier:
                    return Wa(a.name, f.expression), f.identifier(a.name, f.expensiveChecks || Ib(a.name), b, d, f.expression);
                case s.MemberExpression:
                    return c = this.recurse(a.object, !1, !!d), a.computed || (Wa(a.property.name, f.expression),
                        e = a.property.name), a.computed && (e = this.recurse(a.property)), a.computed ? this.computedMember(c, e, b, d, f.expression) : this.nonComputedMember(c, e, f.expensiveChecks, b, d, f.expression);
                case s.CallExpression:
                    return g = [], q(a.arguments, function (a) {
                        g.push(f.recurse(a))
                    }), a.filter && (e = this.$filter(a.callee.name)), a.filter || (e = this.recurse(a.callee, !0)), a.filter ? function (a, c, d, f) {
                        for (var n = [], p = 0; p < g.length; ++p) n.push(g[p](a, c, d, f));
                        a = e.apply(u, n, f);
                        return b ? {context: u, name: u, value: a} : a
                    } : function (a, c, d, m) {
                        var n =
                            e(a, c, d, m), p;
                        if (null != n.value) {
                            ta(n.context, f.expression);
                            ld(n.value, f.expression);
                            p = [];
                            for (var q = 0; q < g.length; ++q) p.push(ta(g[q](a, c, d, m), f.expression));
                            p = ta(n.value.apply(n.context, p), f.expression)
                        }
                        return b ? {value: p} : p
                    };
                case s.AssignmentExpression:
                    return c = this.recurse(a.left, !0, 1), e = this.recurse(a.right), function (a, d, g, m) {
                        var n = c(a, d, g, m);
                        a = e(a, d, g, m);
                        ta(n.value, f.expression);
                        Hb(n.context);
                        n.context[n.name] = a;
                        return b ? {value: a} : a
                    };
                case s.ArrayExpression:
                    return g = [], q(a.elements, function (a) {
                        g.push(f.recurse(a))
                    }),
                        function (a, c, d, e) {
                            for (var f = [], p = 0; p < g.length; ++p) f.push(g[p](a, c, d, e));
                            return b ? {value: f} : f
                        };
                case s.ObjectExpression:
                    return g = [], q(a.properties, function (a) {
                        g.push({
                            key: a.key.type === s.Identifier ? a.key.name : "" + a.key.value,
                            value: f.recurse(a.value)
                        })
                    }), function (a, c, d, e) {
                        for (var f = {}, p = 0; p < g.length; ++p) f[g[p].key] = g[p].value(a, c, d, e);
                        return b ? {value: f} : f
                    };
                case s.ThisExpression:
                    return function (a) {
                        return b ? {value: a} : a
                    };
                case s.LocalsExpression:
                    return function (a, c) {
                        return b ? {value: c} : c
                    };
                case s.NGValueParameter:
                    return function (a,
                                     c, d) {
                        return b ? {value: d} : d
                    }
            }
        }, "unary+": function (a, b) {
            return function (d, c, e, f) {
                d = a(d, c, e, f);
                d = A(d) ? +d : 0;
                return b ? {value: d} : d
            }
        }, "unary-": function (a, b) {
            return function (d, c, e, f) {
                d = a(d, c, e, f);
                d = A(d) ? -d : 0;
                return b ? {value: d} : d
            }
        }, "unary!": function (a, b) {
            return function (d, c, e, f) {
                d = !a(d, c, e, f);
                return b ? {value: d} : d
            }
        }, "binary+": function (a, b, d) {
            return function (c, e, f, g) {
                var h = a(c, e, f, g);
                c = b(c, e, f, g);
                h = md(h, c);
                return d ? {value: h} : h
            }
        }, "binary-": function (a, b, d) {
            return function (c, e, f, g) {
                var h = a(c, e, f, g);
                c = b(c, e, f, g);
                h = (A(h) ? h : 0) - (A(c) ? c : 0);
                return d ? {value: h} : h
            }
        }, "binary*": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) * b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary/": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) / b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary%": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) % b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary===": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) === b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary!==": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c,
                    e, f, g) !== b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary==": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) == b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary!=": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) != b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary<": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) < b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary>": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) > b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary<=": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f,
                    g) <= b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary>=": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) >= b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary&&": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) && b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "binary||": function (a, b, d) {
            return function (c, e, f, g) {
                c = a(c, e, f, g) || b(c, e, f, g);
                return d ? {value: c} : c
            }
        }, "ternary?:": function (a, b, d, c) {
            return function (e, f, g, h) {
                e = a(e, f, g, h) ? b(e, f, g, h) : d(e, f, g, h);
                return c ? {value: e} : e
            }
        }, value: function (a, b) {
            return function () {
                return b ? {
                    context: u,
                    name: u, value: a
                } : a
            }
        }, identifier: function (a, b, d, c, e) {
            return function (f, g, h, k) {
                f = g && a in g ? g : f;
                c && 1 !== c && f && !f[a] && (f[a] = {});
                g = f ? f[a] : u;
                b && ta(g, e);
                return d ? {context: f, name: a, value: g} : g
            }
        }, computedMember: function (a, b, d, c, e) {
            return function (f, g, h, k) {
                var l = a(f, g, h, k), m, n;
                null != l && (m = b(f, g, h, k), m += "", Wa(m, e), c && 1 !== c && (Hb(l), l && !l[m] && (l[m] = {})), n = l[m], ta(n, e));
                return d ? {context: l, name: m, value: n} : n
            }
        }, nonComputedMember: function (a, b, d, c, e, f) {
            return function (g, h, k, l) {
                g = a(g, h, k, l);
                e && 1 !== e && (Hb(g), g && !g[b] &&
                (g[b] = {}));
                h = null != g ? g[b] : u;
                (d || Ib(b)) && ta(h, f);
                return c ? {context: g, name: b, value: h} : h
            }
        }, inputs: function (a, b) {
            return function (d, c, e, f) {
                return f ? f[b] : a(d, c, e)
            }
        }
    };
    var hc = function (a, b, d) {
        this.lexer = a;
        this.$filter = b;
        this.options = d;
        this.ast = new s(a, d);
        this.astCompiler = d.csp ? new sd(this.ast, b) : new rd(this.ast, b)
    };
    hc.prototype = {
        constructor: hc, parse: function (a) {
            return this.astCompiler.compile(a, this.options.expensiveChecks)
        }
    };
    var jg = Object.prototype.valueOf, ua = O("$sce"), ma = {
        HTML: "html", CSS: "css", URL: "url",
        RESOURCE_URL: "resourceUrl", JS: "js"
    }, lg = O("$compile"), Z = P.createElement("a"), wd = sa(T.location.href);
    xd.$inject = ["$document"];
    Jc.$inject = ["$provide"];
    var Ed = 22, Dd = ".", jc = "0";
    yd.$inject = ["$locale"];
    Ad.$inject = ["$locale"];
    var wg = {
            yyyy: X("FullYear", 4, 0, !1, !0),
            yy: X("FullYear", 2, 0, !0, !0),
            y: X("FullYear", 1, 0, !1, !0),
            MMMM: lb("Month"),
            MMM: lb("Month", !0),
            MM: X("Month", 2, 1),
            M: X("Month", 1, 1),
            LLLL: lb("Month", !1, !0),
            dd: X("Date", 2),
            d: X("Date", 1),
            HH: X("Hours", 2),
            H: X("Hours", 1),
            hh: X("Hours", 2, -12),
            h: X("Hours", 1, -12),
            mm: X("Minutes", 2),
            m: X("Minutes", 1),
            ss: X("Seconds", 2),
            s: X("Seconds", 1),
            sss: X("Milliseconds", 3),
            EEEE: lb("Day"),
            EEE: lb("Day", !0),
            a: function (a, b) {
                return 12 > a.getHours() ? b.AMPMS[0] : b.AMPMS[1]
            },
            Z: function (a, b, d) {
                a = -1 * d;
                return a = (0 <= a ? "+" : "") + (Jb(Math[0 < a ? "floor" : "ceil"](a / 60), 2) + Jb(Math.abs(a % 60), 2))
            },
            ww: Gd(2),
            w: Gd(1),
            G: kc,
            GG: kc,
            GGG: kc,
            GGGG: function (a, b) {
                return 0 >= a.getFullYear() ? b.ERANAMES[0] : b.ERANAMES[1]
            }
        }, vg = /((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,
        ug = /^\-?\d+$/;
    zd.$inject = ["$locale"];
    var pg = da(N), qg = da(vb);
    Bd.$inject = ["$parse"];
    var me = da({
        restrict: "E", compile: function (a, b) {
            if (!b.href && !b.xlinkHref) return function (a, b) {
                if ("a" === b[0].nodeName.toLowerCase()) {
                    var e = "[object SVGAnimatedString]" === ka.call(b.prop("href")) ? "xlink:href" : "href";
                    b.on("click", function (a) {
                        b.attr(e) || a.preventDefault()
                    })
                }
            }
        }
    }), wb = {};
    q(Eb, function (a, b) {
        function d(a, d, e) {
            a.$watch(e[c], function (a) {
                e.$set(b, !!a)
            })
        }

        if ("multiple" != a) {
            var c = ya("ng-" + b), e = d;
            "checked" === a && (e = function (a,
                                              b, e) {
                e.ngModel !== e[c] && d(a, b, e)
            });
            wb[c] = function () {
                return {restrict: "A", priority: 100, link: e}
            }
        }
    });
    q($c, function (a, b) {
        wb[b] = function () {
            return {
                priority: 100, link: function (a, c, e) {
                    if ("ngPattern" === b && "/" == e.ngPattern.charAt(0) && (c = e.ngPattern.match(yg))) {
                        e.$set("ngPattern", new RegExp(c[1], c[2]));
                        return
                    }
                    a.$watch(e[b], function (a) {
                        e.$set(b, a)
                    })
                }
            }
        }
    });
    q(["src", "srcset", "href"], function (a) {
        var b = ya("ng-" + a);
        wb[b] = function () {
            return {
                priority: 99, link: function (d, c, e) {
                    var f = a, g = a;
                    "href" === a && "[object SVGAnimatedString]" ===
                    ka.call(c.prop("href")) && (g = "xlinkHref", e.$attr[g] = "xlink:href", f = null);
                    e.$observe(b, function (b) {
                        b ? (e.$set(g, b), Da && f && c.prop(f, e[g])) : "href" === a && e.$set(g, null)
                    })
                }
            }
        }
    });
    var Kb = {
        $addControl: E, $$renameControl: function (a, b) {
            a.$name = b
        }, $removeControl: E, $setValidity: E, $setDirty: E, $setPristine: E, $setSubmitted: E
    };
    Hd.$inject = ["$element", "$attrs", "$scope", "$animate", "$interpolate"];
    var Qd = function (a) {
            return ["$timeout", "$parse", function (b, d) {
                function c(a) {
                    return "" === a ? d('this[""]').assign : d(a).assign || E
                }

                return {
                    name: "form",
                    restrict: a ? "EAC" : "E", require: ["form", "^^?form"], controller: Hd, compile: function (d, f) {
                        d.addClass(Xa).addClass(pb);
                        var g = f.name ? "name" : a && f.ngForm ? "ngForm" : !1;
                        return {
                            pre: function (a, d, e, f) {
                                var n = f[0];
                                if (!("action" in e)) {
                                    var p = function (b) {
                                        a.$apply(function () {
                                            n.$commitViewValue();
                                            n.$setSubmitted()
                                        });
                                        b.preventDefault()
                                    };
                                    d[0].addEventListener("submit", p, !1);
                                    d.on("$destroy", function () {
                                        b(function () {
                                            d[0].removeEventListener("submit", p, !1)
                                        }, 0, !1)
                                    })
                                }
                                (f[1] || n.$$parentForm).$addControl(n);
                                var q = g ? c(n.$name) : E;
                                g &&
                                (q(a, n), e.$observe(g, function (b) {
                                    n.$name !== b && (q(a, u), n.$$parentForm.$$renameControl(n, b), q = c(n.$name), q(a, n))
                                }));
                                d.on("$destroy", function () {
                                    n.$$parentForm.$removeControl(n);
                                    q(a, u);
                                    S(n, Kb)
                                })
                            }
                        }
                    }
                }
            }]
        }, ne = Qd(), Ae = Qd(!0), xg = /^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,
        Gg = /^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,
        Hg = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
        Ig = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/, Rd = /^(\d{4,})-(\d{2})-(\d{2})$/,
        Sd = /^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/, nc = /^(\d{4,})-W(\d\d)$/,
        Td = /^(\d{4,})-(\d\d)$/, Ud = /^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/, Jd = V();
    q(["date", "datetime-local", "month", "time", "week"], function (a) {
        Jd[a] = !0
    });
    var Vd = {
        text: function (a, b, d, c, e, f) {
            mb(a, b, d, c, e, f);
            lc(c)
        },
        date: nb("date", Rd, Mb(Rd, ["yyyy", "MM", "dd"]), "yyyy-MM-dd"),
        "datetime-local": nb("datetimelocal", Sd, Mb(Sd, "yyyy MM dd HH mm ss sss".split(" ")),
            "yyyy-MM-ddTHH:mm:ss.sss"),
        time: nb("time", Ud, Mb(Ud, ["HH", "mm", "ss", "sss"]), "HH:mm:ss.sss"),
        week: nb("week", nc, function (a, b) {
            if (fa(a)) return a;
            if (y(a)) {
                nc.lastIndex = 0;
                var d = nc.exec(a);
                if (d) {
                    var c = +d[1], e = +d[2], f = d = 0, g = 0, h = 0, k = Fd(c), e = 7 * (e - 1);
                    b && (d = b.getHours(), f = b.getMinutes(), g = b.getSeconds(), h = b.getMilliseconds());
                    return new Date(c, 0, k.getDate() + e, d, f, g, h)
                }
            }
            return NaN
        }, "yyyy-Www"),
        month: nb("month", Td, Mb(Td, ["yyyy", "MM"]), "yyyy-MM"),
        number: function (a, b, d, c, e, f) {
            Kd(a, b, d, c);
            mb(a, b, d, c, e, f);
            c.$$parserName =
                "number";
            c.$parsers.push(function (a) {
                return c.$isEmpty(a) ? null : Ig.test(a) ? parseFloat(a) : u
            });
            c.$formatters.push(function (a) {
                if (!c.$isEmpty(a)) {
                    if (!R(a)) throw ob("numfmt", a);
                    a = a.toString()
                }
                return a
            });
            if (A(d.min) || d.ngMin) {
                var g;
                c.$validators.min = function (a) {
                    return c.$isEmpty(a) || z(g) || a >= g
                };
                d.$observe("min", function (a) {
                    A(a) && !R(a) && (a = parseFloat(a, 10));
                    g = R(a) && !isNaN(a) ? a : u;
                    c.$validate()
                })
            }
            if (A(d.max) || d.ngMax) {
                var h;
                c.$validators.max = function (a) {
                    return c.$isEmpty(a) || z(h) || a <= h
                };
                d.$observe("max", function (a) {
                    A(a) &&
                    !R(a) && (a = parseFloat(a, 10));
                    h = R(a) && !isNaN(a) ? a : u;
                    c.$validate()
                })
            }
        },
        url: function (a, b, d, c, e, f) {
            mb(a, b, d, c, e, f);
            lc(c);
            c.$$parserName = "url";
            c.$validators.url = function (a, b) {
                var d = a || b;
                return c.$isEmpty(d) || Gg.test(d)
            }
        },
        email: function (a, b, d, c, e, f) {
            mb(a, b, d, c, e, f);
            lc(c);
            c.$$parserName = "email";
            c.$validators.email = function (a, b) {
                var d = a || b;
                return c.$isEmpty(d) || Hg.test(d)
            }
        },
        radio: function (a, b, d, c) {
            z(d.name) && b.attr("name", ++qb);
            b.on("click", function (a) {
                b[0].checked && c.$setViewValue(d.value, a && a.type)
            });
            c.$render =
                function () {
                    b[0].checked = d.value == c.$viewValue
                };
            d.$observe("value", c.$render)
        },
        checkbox: function (a, b, d, c, e, f, g, h) {
            var k = Ld(h, a, "ngTrueValue", d.ngTrueValue, !0), l = Ld(h, a, "ngFalseValue", d.ngFalseValue, !1);
            b.on("click", function (a) {
                c.$setViewValue(b[0].checked, a && a.type)
            });
            c.$render = function () {
                b[0].checked = c.$viewValue
            };
            c.$isEmpty = function (a) {
                return !1 === a
            };
            c.$formatters.push(function (a) {
                return na(a, k)
            });
            c.$parsers.push(function (a) {
                return a ? k : l
            })
        },
        hidden: E,
        button: E,
        submit: E,
        reset: E,
        file: E
    }, Dc = ["$browser",
        "$sniffer", "$filter", "$parse", function (a, b, d, c) {
            return {
                restrict: "E", require: ["?ngModel"], link: {
                    pre: function (e, f, g, h) {
                        h[0] && (Vd[N(g.type)] || Vd.text)(e, f, g, h[0], b, a, d, c)
                    }
                }
            }
        }], Jg = /^(true|false|\d+)$/, Se = function () {
        return {
            restrict: "A", priority: 100, compile: function (a, b) {
                return Jg.test(b.ngValue) ? function (a, b, e) {
                    e.$set("value", a.$eval(e.ngValue))
                } : function (a, b, e) {
                    a.$watch(e.ngValue, function (a) {
                        e.$set("value", a)
                    })
                }
            }
        }
    }, se = ["$compile", function (a) {
        return {
            restrict: "AC", compile: function (b) {
                a.$$addBindingClass(b);
                return function (b, c, e) {
                    a.$$addBindingInfo(c, e.ngBind);
                    c = c[0];
                    b.$watch(e.ngBind, function (a) {
                        c.textContent = z(a) ? "" : a
                    })
                }
            }
        }
    }], ue = ["$interpolate", "$compile", function (a, b) {
        return {
            compile: function (d) {
                b.$$addBindingClass(d);
                return function (c, d, f) {
                    c = a(d.attr(f.$attr.ngBindTemplate));
                    b.$$addBindingInfo(d, c.expressions);
                    d = d[0];
                    f.$observe("ngBindTemplate", function (a) {
                        d.textContent = z(a) ? "" : a
                    })
                }
            }
        }
    }], te = ["$sce", "$parse", "$compile", function (a, b, d) {
        return {
            restrict: "A", compile: function (c, e) {
                var f = b(e.ngBindHtml), g =
                    b(e.ngBindHtml, function (a) {
                        return (a || "").toString()
                    });
                d.$$addBindingClass(c);
                return function (b, c, e) {
                    d.$$addBindingInfo(c, e.ngBindHtml);
                    b.$watch(g, function () {
                        c.html(a.getTrustedHtml(f(b)) || "")
                    })
                }
            }
        }
    }], Re = da({
        restrict: "A", require: "ngModel", link: function (a, b, d, c) {
            c.$viewChangeListeners.push(function () {
                a.$eval(d.ngChange)
            })
        }
    }), ve = mc("", !0), xe = mc("Odd", 0), we = mc("Even", 1), ye = Na({
        compile: function (a, b) {
            b.$set("ngCloak", u);
            a.removeClass("ng-cloak")
        }
    }), ze = [function () {
        return {
            restrict: "A", scope: !0, controller: "@",
            priority: 500
        }
    }], Ic = {}, Kg = {blur: !0, focus: !0};
    q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function (a) {
        var b = ya("ng-" + a);
        Ic[b] = ["$parse", "$rootScope", function (d, c) {
            return {
                restrict: "A", compile: function (e, f) {
                    var g = d(f[b], null, !0);
                    return function (b, d) {
                        d.on(a, function (d) {
                            var e = function () {
                                g(b, {$event: d})
                            };
                            Kg[a] && c.$$phase ? b.$evalAsync(e) : b.$apply(e)
                        })
                    }
                }
            }
        }]
    });
    var Ce = ["$animate", "$compile", function (a,
                                                b) {
            return {
                multiElement: !0,
                transclude: "element",
                priority: 600,
                terminal: !0,
                restrict: "A",
                $$tlb: !0,
                link: function (d, c, e, f, g) {
                    var h, k, l;
                    d.$watch(e.ngIf, function (d) {
                        d ? k || g(function (d, f) {
                            k = f;
                            d[d.length++] = b.$$createComment("end ngIf", e.ngIf);
                            h = {clone: d};
                            a.enter(d, c.parent(), c)
                        }) : (l && (l.remove(), l = null), k && (k.$destroy(), k = null), h && (l = ub(h.clone), a.leave(l).then(function () {
                            l = null
                        }), h = null))
                    })
                }
            }
        }], De = ["$templateRequest", "$anchorScroll", "$animate", function (a, b, d) {
            return {
                restrict: "ECA", priority: 400, terminal: !0,
                transclude: "element", controller: ea.noop, compile: function (c, e) {
                    var f = e.ngInclude || e.src, g = e.onload || "", h = e.autoscroll;
                    return function (c, e, m, n, p) {
                        var q = 0, s, x, r, w = function () {
                            x && (x.remove(), x = null);
                            s && (s.$destroy(), s = null);
                            r && (d.leave(r).then(function () {
                                x = null
                            }), x = r, r = null)
                        };
                        c.$watch(f, function (f) {
                            var m = function () {
                                !A(h) || h && !c.$eval(h) || b()
                            }, t = ++q;
                            f ? (a(f, !0).then(function (a) {
                                if (!c.$$destroyed && t === q) {
                                    var b = c.$new();
                                    n.template = a;
                                    a = p(b, function (a) {
                                        w();
                                        d.enter(a, null, e).then(m)
                                    });
                                    s = b;
                                    r = a;
                                    s.$emit("$includeContentLoaded",
                                        f);
                                    c.$eval(g)
                                }
                            }, function () {
                                c.$$destroyed || t !== q || (w(), c.$emit("$includeContentError", f))
                            }), c.$emit("$includeContentRequested", f)) : (w(), n.template = null)
                        })
                    }
                }
            }
        }], Ue = ["$compile", function (a) {
            return {
                restrict: "ECA", priority: -400, require: "ngInclude", link: function (b, d, c, e) {
                    ka.call(d[0]).match(/SVG/) ? (d.empty(), a(Lc(e.template, P).childNodes)(b, function (a) {
                        d.append(a)
                    }, {futureParentElement: d})) : (d.html(e.template), a(d.contents())(b))
                }
            }
        }], Ee = Na({
            priority: 450, compile: function () {
                return {
                    pre: function (a, b, d) {
                        a.$eval(d.ngInit)
                    }
                }
            }
        }),
        Qe = function () {
            return {
                restrict: "A", priority: 100, require: "ngModel", link: function (a, b, d, c) {
                    var e = b.attr(d.$attr.ngList) || ", ", f = "false" !== d.ngTrim, g = f ? W(e) : e;
                    c.$parsers.push(function (a) {
                        if (!z(a)) {
                            var b = [];
                            a && q(a.split(g), function (a) {
                                a && b.push(f ? W(a) : a)
                            });
                            return b
                        }
                    });
                    c.$formatters.push(function (a) {
                        return M(a) ? a.join(e) : u
                    });
                    c.$isEmpty = function (a) {
                        return !a || !a.length
                    }
                }
            }
        }, pb = "ng-valid", Md = "ng-invalid", Xa = "ng-pristine", Lb = "ng-dirty", Od = "ng-pending",
        ob = O("ngModel"), Lg = ["$scope", "$exceptionHandler", "$attrs",
            "$element", "$parse", "$animate", "$timeout", "$rootScope", "$q", "$interpolate", function (a, b, d, c, e, f, g, h, k, l) {
                this.$modelValue = this.$viewValue = Number.NaN;
                this.$$rawModelValue = u;
                this.$validators = {};
                this.$asyncValidators = {};
                this.$parsers = [];
                this.$formatters = [];
                this.$viewChangeListeners = [];
                this.$untouched = !0;
                this.$touched = !1;
                this.$pristine = !0;
                this.$dirty = !1;
                this.$valid = !0;
                this.$invalid = !1;
                this.$error = {};
                this.$$success = {};
                this.$pending = u;
                this.$name = l(d.name || "", !1)(a);
                this.$$parentForm = Kb;
                var m = e(d.ngModel),
                    n = m.assign, p = m, s = n, y = null, x, r = this;
                this.$$setOptions = function (a) {
                    if ((r.$options = a) && a.getterSetter) {
                        var b = e(d.ngModel + "()"), f = e(d.ngModel + "($$$p)");
                        p = function (a) {
                            var c = m(a);
                            D(c) && (c = b(a));
                            return c
                        };
                        s = function (a, b) {
                            D(m(a)) ? f(a, {$$$p: b}) : n(a, b)
                        }
                    } else if (!m.assign) throw ob("nonassign", d.ngModel, wa(c));
                };
                this.$render = E;
                this.$isEmpty = function (a) {
                    return z(a) || "" === a || null === a || a !== a
                };
                this.$$updateEmptyClasses = function (a) {
                    r.$isEmpty(a) ? (f.removeClass(c, "ng-not-empty"), f.addClass(c, "ng-empty")) : (f.removeClass(c,
                        "ng-empty"), f.addClass(c, "ng-not-empty"))
                };
                var w = 0;
                Id({
                    ctrl: this, $element: c, set: function (a, b) {
                        a[b] = !0
                    }, unset: function (a, b) {
                        delete a[b]
                    }, $animate: f
                });
                this.$setPristine = function () {
                    r.$dirty = !1;
                    r.$pristine = !0;
                    f.removeClass(c, Lb);
                    f.addClass(c, Xa)
                };
                this.$setDirty = function () {
                    r.$dirty = !0;
                    r.$pristine = !1;
                    f.removeClass(c, Xa);
                    f.addClass(c, Lb);
                    r.$$parentForm.$setDirty()
                };
                this.$setUntouched = function () {
                    r.$touched = !1;
                    r.$untouched = !0;
                    f.setClass(c, "ng-untouched", "ng-touched")
                };
                this.$setTouched = function () {
                    r.$touched =
                        !0;
                    r.$untouched = !1;
                    f.setClass(c, "ng-touched", "ng-untouched")
                };
                this.$rollbackViewValue = function () {
                    g.cancel(y);
                    r.$viewValue = r.$$lastCommittedViewValue;
                    r.$render()
                };
                this.$validate = function () {
                    if (!R(r.$modelValue) || !isNaN(r.$modelValue)) {
                        var a = r.$$rawModelValue, b = r.$valid, c = r.$modelValue,
                            d = r.$options && r.$options.allowInvalid;
                        r.$$runValidators(a, r.$$lastCommittedViewValue, function (e) {
                            d || b === e || (r.$modelValue = e ? a : u, r.$modelValue !== c && r.$$writeModelToScope())
                        })
                    }
                };
                this.$$runValidators = function (a, b, c) {
                    function d() {
                        var c =
                            !0;
                        q(r.$validators, function (d, e) {
                            var g = d(a, b);
                            c = c && g;
                            f(e, g)
                        });
                        return c ? !0 : (q(r.$asyncValidators, function (a, b) {
                            f(b, null)
                        }), !1)
                    }

                    function e() {
                        var c = [], d = !0;
                        q(r.$asyncValidators, function (e, g) {
                            var h = e(a, b);
                            if (!h || !D(h.then)) throw ob("nopromise", h);
                            f(g, u);
                            c.push(h.then(function () {
                                f(g, !0)
                            }, function () {
                                d = !1;
                                f(g, !1)
                            }))
                        });
                        c.length ? k.all(c).then(function () {
                            g(d)
                        }, E) : g(!0)
                    }

                    function f(a, b) {
                        h === w && r.$setValidity(a, b)
                    }

                    function g(a) {
                        h === w && c(a)
                    }

                    w++;
                    var h = w;
                    (function () {
                        var a = r.$$parserName || "parse";
                        if (z(x)) f(a, null);
                        else return x || (q(r.$validators, function (a, b) {
                            f(b, null)
                        }), q(r.$asyncValidators, function (a, b) {
                            f(b, null)
                        })), f(a, x), x;
                        return !0
                    })() ? d() ? e() : g(!1) : g(!1)
                };
                this.$commitViewValue = function () {
                    var a = r.$viewValue;
                    g.cancel(y);
                    if (r.$$lastCommittedViewValue !== a || "" === a && r.$$hasNativeValidators) r.$$updateEmptyClasses(a), r.$$lastCommittedViewValue = a, r.$pristine && this.$setDirty(), this.$$parseAndValidate()
                };
                this.$$parseAndValidate = function () {
                    var b = r.$$lastCommittedViewValue;
                    if (x = z(b) ? u : !0) for (var c = 0; c < r.$parsers.length; c++) if (b =
                        r.$parsers[c](b), z(b)) {
                        x = !1;
                        break
                    }
                    R(r.$modelValue) && isNaN(r.$modelValue) && (r.$modelValue = p(a));
                    var d = r.$modelValue, e = r.$options && r.$options.allowInvalid;
                    r.$$rawModelValue = b;
                    e && (r.$modelValue = b, r.$modelValue !== d && r.$$writeModelToScope());
                    r.$$runValidators(b, r.$$lastCommittedViewValue, function (a) {
                        e || (r.$modelValue = a ? b : u, r.$modelValue !== d && r.$$writeModelToScope())
                    })
                };
                this.$$writeModelToScope = function () {
                    s(a, r.$modelValue);
                    q(r.$viewChangeListeners, function (a) {
                        try {
                            a()
                        } catch (c) {
                            b(c)
                        }
                    })
                };
                this.$setViewValue =
                    function (a, b) {
                        r.$viewValue = a;
                        r.$options && !r.$options.updateOnDefault || r.$$debounceViewValueCommit(b)
                    };
                this.$$debounceViewValueCommit = function (b) {
                    var c = 0, d = r.$options;
                    d && A(d.debounce) && (d = d.debounce, R(d) ? c = d : R(d[b]) ? c = d[b] : R(d["default"]) && (c = d["default"]));
                    g.cancel(y);
                    c ? y = g(function () {
                        r.$commitViewValue()
                    }, c) : h.$$phase ? r.$commitViewValue() : a.$apply(function () {
                        r.$commitViewValue()
                    })
                };
                a.$watch(function () {
                    var b = p(a);
                    if (b !== r.$modelValue && (r.$modelValue === r.$modelValue || b === b)) {
                        r.$modelValue = r.$$rawModelValue =
                            b;
                        x = u;
                        for (var c = r.$formatters, d = c.length, e = b; d--;) e = c[d](e);
                        r.$viewValue !== e && (r.$$updateEmptyClasses(e), r.$viewValue = r.$$lastCommittedViewValue = e, r.$render(), r.$$runValidators(b, e, E))
                    }
                    return b
                })
            }], Pe = ["$rootScope", function (a) {
            return {
                restrict: "A",
                require: ["ngModel", "^?form", "^?ngModelOptions"],
                controller: Lg,
                priority: 1,
                compile: function (b) {
                    b.addClass(Xa).addClass("ng-untouched").addClass(pb);
                    return {
                        pre: function (a, b, e, f) {
                            var g = f[0];
                            b = f[1] || g.$$parentForm;
                            g.$$setOptions(f[2] && f[2].$options);
                            b.$addControl(g);
                            e.$observe("name", function (a) {
                                g.$name !== a && g.$$parentForm.$$renameControl(g, a)
                            });
                            a.$on("$destroy", function () {
                                g.$$parentForm.$removeControl(g)
                            })
                        }, post: function (b, c, e, f) {
                            var g = f[0];
                            if (g.$options && g.$options.updateOn) c.on(g.$options.updateOn, function (a) {
                                g.$$debounceViewValueCommit(a && a.type)
                            });
                            c.on("blur", function () {
                                g.$touched || (a.$$phase ? b.$evalAsync(g.$setTouched) : b.$apply(g.$setTouched))
                            })
                        }
                    }
                }
            }
        }], Mg = /(\s+|^)default(\s+|$)/, Te = function () {
            return {
                restrict: "A", controller: ["$scope", "$attrs", function (a,
                                                                          b) {
                    var d = this;
                    this.$options = pa(a.$eval(b.ngModelOptions));
                    A(this.$options.updateOn) ? (this.$options.updateOnDefault = !1, this.$options.updateOn = W(this.$options.updateOn.replace(Mg, function () {
                        d.$options.updateOnDefault = !0;
                        return " "
                    }))) : this.$options.updateOnDefault = !0
                }]
            }
        }, Fe = Na({terminal: !0, priority: 1E3}), Ng = O("ngOptions"),
        Og = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
        Ne = ["$compile", "$parse", function (a, b) {
            function d(a, c, d) {
                function e(a, b, c, d, f) {
                    this.selectValue = a;
                    this.viewValue = b;
                    this.label = c;
                    this.group = d;
                    this.disabled = f
                }

                function l(a) {
                    var b;
                    if (!p && za(a)) b = a; else {
                        b = [];
                        for (var c in a) a.hasOwnProperty(c) && "$" !== c.charAt(0) && b.push(c)
                    }
                    return b
                }

                var m = a.match(Og);
                if (!m) throw Ng("iexp", a, wa(c));
                var n = m[5] || m[7], p = m[6];
                a = / as /.test(m[0]) && m[1];
                var q = m[9];
                c = b(m[2] ? m[1] : n);
                var s = a && b(a) || c, x = q && b(q), r = q ? function (a, b) {
                        return x(d, b)
                    } : function (a) {
                        return Ha(a)
                    }, w = function (a,
                                     b) {
                        return r(a, y(a, b))
                    }, v = b(m[2] || m[1]), u = b(m[3] || ""), t = b(m[4] || ""), G = b(m[8]), C = {},
                    y = p ? function (a, b) {
                        C[p] = b;
                        C[n] = a;
                        return C
                    } : function (a) {
                        C[n] = a;
                        return C
                    };
                return {
                    trackBy: q, getTrackByValue: w, getWatchables: b(G, function (a) {
                        var b = [];
                        a = a || [];
                        for (var c = l(a), e = c.length, f = 0; f < e; f++) {
                            var g = a === c ? f : c[f], k = a[g], g = y(k, g), k = r(k, g);
                            b.push(k);
                            if (m[2] || m[1]) k = v(d, g), b.push(k);
                            m[4] && (g = t(d, g), b.push(g))
                        }
                        return b
                    }), getOptions: function () {
                        for (var a = [], b = {}, c = G(d) || [], f = l(c), g = f.length, m = 0; m < g; m++) {
                            var n = c === f ? m : f[m], p =
                                    y(c[n], n), x = s(d, p), n = r(x, p), C = v(d, p), A = u(d, p), p = t(d, p),
                                x = new e(n, x, C, A, p);
                            a.push(x);
                            b[n] = x
                        }
                        return {
                            items: a, selectValueMap: b, getOptionFromViewValue: function (a) {
                                return b[w(a)]
                            }, getViewValueFromOption: function (a) {
                                return q ? ea.copy(a.viewValue) : a.viewValue
                            }
                        }
                    }
                }
            }

            var c = P.createElement("option"), e = P.createElement("optgroup");
            return {
                restrict: "A", terminal: !0, require: ["select", "ngModel"], link: {
                    pre: function (a, b, c, d) {
                        d[0].registerOption = E
                    }, post: function (b, g, h, k) {
                        function l(a, b) {
                            a.element = b;
                            b.disabled = a.disabled;
                            a.label !== b.label && (b.label = a.label, b.textContent = a.label);
                            a.value !== b.value && (b.value = a.selectValue)
                        }

                        function m(a, b, c, d) {
                            b && N(b.nodeName) === c ? c = b : (c = d.cloneNode(!1), b ? a.insertBefore(c, b) : a.appendChild(c));
                            return c
                        }

                        function n(a) {
                            for (var b; a;) b = a.nextSibling, Yb(a), a = b
                        }

                        function p(a) {
                            var b = w && w[0], c = G && G[0];
                            if (b || c) for (; a && (a === b || a === c || 8 === a.nodeType || "option" === oa(a) && "" === a.value);) a = a.nextSibling;
                            return a
                        }

                        function s() {
                            var a = C && u.readValue();
                            C = z.getOptions();
                            var b = {}, d = g[0].firstChild;
                            t && g.prepend(w);
                            d = p(d);
                            C.items.forEach(function (a) {
                                var f, h;
                                A(a.group) ? (f = b[a.group], f || (f = m(g[0], d, "optgroup", e), d = f.nextSibling, f.label = a.group, f = b[a.group] = {
                                    groupElement: f,
                                    currentOptionElement: f.firstChild
                                }), h = m(f.groupElement, f.currentOptionElement, "option", c), l(a, h), f.currentOptionElement = h.nextSibling) : (h = m(g[0], d, "option", c), l(a, h), d = h.nextSibling)
                            });
                            Object.keys(b).forEach(function (a) {
                                n(b[a].currentOptionElement)
                            });
                            n(d);
                            x.$render();
                            if (!x.$isEmpty(a)) {
                                var f = u.readValue();
                                (z.trackBy || r ? na(a, f) : a === f) || (x.$setViewValue(f),
                                    x.$render())
                            }
                        }

                        var u = k[0], x = k[1], r = h.multiple, w;
                        k = 0;
                        for (var v = g.children(), y = v.length; k < y; k++) if ("" === v[k].value) {
                            w = v.eq(k);
                            break
                        }
                        var t = !!w, G = H(c.cloneNode(!1));
                        G.val("?");
                        var C, z = d(h.ngOptions, g, b);
                        r ? (x.$isEmpty = function (a) {
                            return !a || 0 === a.length
                        }, u.writeValue = function (a) {
                            C.items.forEach(function (a) {
                                a.element.selected = !1
                            });
                            a && a.forEach(function (a) {
                                (a = C.getOptionFromViewValue(a)) && !a.disabled && (a.element.selected = !0)
                            })
                        }, u.readValue = function () {
                            var a = g.val() || [], b = [];
                            q(a, function (a) {
                                (a = C.selectValueMap[a]) &&
                                !a.disabled && b.push(C.getViewValueFromOption(a))
                            });
                            return b
                        }, z.trackBy && b.$watchCollection(function () {
                            if (M(x.$viewValue)) return x.$viewValue.map(function (a) {
                                return z.getTrackByValue(a)
                            })
                        }, function () {
                            x.$render()
                        })) : (u.writeValue = function (a) {
                            var b = C.getOptionFromViewValue(a);
                            b && !b.disabled ? (g[0].value !== b.selectValue && (G.remove(), t || w.remove(), g[0].value = b.selectValue, b.element.selected = !0), b.element.setAttribute("selected", "selected")) : null === a || t ? (G.remove(), t || g.prepend(w), g.val(""), w.prop("selected",
                                !0), w.attr("selected", !0)) : (t || w.remove(), g.prepend(G), g.val("?"), G.prop("selected", !0), G.attr("selected", !0))
                        }, u.readValue = function () {
                            var a = C.selectValueMap[g.val()];
                            return a && !a.disabled ? (t || w.remove(), G.remove(), C.getViewValueFromOption(a)) : null
                        }, z.trackBy && b.$watch(function () {
                            return z.getTrackByValue(x.$viewValue)
                        }, function () {
                            x.$render()
                        }));
                        t ? (w.remove(), a(w)(b), w.removeClass("ng-scope")) : w = H(c.cloneNode(!1));
                        s();
                        b.$watchCollection(z.getWatchables, s)
                    }
                }
            }
        }], Ge = ["$locale", "$interpolate", "$log", function (a,
                                                               b, d) {
            var c = /{}/g, e = /^when(Minus)?(.+)$/;
            return {
                link: function (f, g, h) {
                    function k(a) {
                        g.text(a || "")
                    }

                    var l = h.count, m = h.$attr.when && g.attr(h.$attr.when), n = h.offset || 0, p = f.$eval(m) || {},
                        s = {}, u = b.startSymbol(), x = b.endSymbol(), r = u + l + "-" + n + x, w = ea.noop, v;
                    q(h, function (a, b) {
                        var c = e.exec(b);
                        c && (c = (c[1] ? "-" : "") + N(c[2]), p[c] = g.attr(h.$attr[b]))
                    });
                    q(p, function (a, d) {
                        s[d] = b(a.replace(c, r))
                    });
                    f.$watch(l, function (b) {
                        var c = parseFloat(b), e = isNaN(c);
                        e || c in p || (c = a.pluralCat(c - n));
                        c === v || e && R(v) && isNaN(v) || (w(), e = s[c], z(e) ?
                            (null != b && d.debug("ngPluralize: no rule defined for '" + c + "' in " + m), w = E, k()) : w = f.$watch(e, k), v = c)
                    })
                }
            }
        }], He = ["$parse", "$animate", "$compile", function (a, b, d) {
            var c = O("ngRepeat"), e = function (a, b, c, d, e, m, n) {
                a[c] = d;
                e && (a[e] = m);
                a.$index = b;
                a.$first = 0 === b;
                a.$last = b === n - 1;
                a.$middle = !(a.$first || a.$last);
                a.$odd = !(a.$even = 0 === (b & 1))
            };
            return {
                restrict: "A",
                multiElement: !0,
                transclude: "element",
                priority: 1E3,
                terminal: !0,
                $$tlb: !0,
                compile: function (f, g) {
                    var h = g.ngRepeat, k = d.$$createComment("end ngRepeat", h),
                        l = h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
                    if (!l) throw c("iexp", h);
                    var m = l[1], n = l[2], p = l[3], s = l[4],
                        l = m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);
                    if (!l) throw c("iidexp", m);
                    var y = l[3] || l[1], x = l[2];
                    if (p && (!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p) || /^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(p))) throw c("badident", p);
                    var r, w, v, z, t = {$id: Ha};
                    s ? r = a(s) : (v = function (a, b) {
                        return Ha(b)
                    }, z = function (a) {
                        return a
                    });
                    return function (a, d, f, g, l) {
                        r && (w = function (b, c, d) {
                            x && (t[x] = b);
                            t[y] = c;
                            t.$index =
                                d;
                            return r(a, t)
                        });
                        var m = V();
                        a.$watchCollection(n, function (f) {
                            var g, n, r = d[0], s, t = V(), A, E, H, D, I, F, J;
                            p && (a[p] = f);
                            if (za(f)) I = f, n = w || v; else for (J in n = w || z, I = [], f) va.call(f, J) && "$" !== J.charAt(0) && I.push(J);
                            A = I.length;
                            J = Array(A);
                            for (g = 0; g < A; g++) if (E = f === I ? g : I[g], H = f[E], D = n(E, H, g), m[D]) F = m[D], delete m[D], t[D] = F, J[g] = F; else {
                                if (t[D]) throw q(J, function (a) {
                                    a && a.scope && (m[a.id] = a)
                                }), c("dupes", h, D, H);
                                J[g] = {id: D, scope: u, clone: u};
                                t[D] = !0
                            }
                            for (s in m) {
                                F = m[s];
                                D = ub(F.clone);
                                b.leave(D);
                                if (D[0].parentNode) for (g = 0, n = D.length; g <
                                n; g++) D[g].$$NG_REMOVED = !0;
                                F.scope.$destroy()
                            }
                            for (g = 0; g < A; g++) if (E = f === I ? g : I[g], H = f[E], F = J[g], F.scope) {
                                s = r;
                                do s = s.nextSibling; while (s && s.$$NG_REMOVED);
                                F.clone[0] != s && b.move(ub(F.clone), null, r);
                                r = F.clone[F.clone.length - 1];
                                e(F.scope, g, y, H, x, E, A)
                            } else l(function (a, c) {
                                F.scope = c;
                                var d = k.cloneNode(!1);
                                a[a.length++] = d;
                                b.enter(a, null, r);
                                r = d;
                                F.clone = a;
                                t[F.id] = F;
                                e(F.scope, g, y, H, x, E, A)
                            });
                            m = t
                        })
                    }
                }
            }
        }], Ie = ["$animate", function (a) {
            return {
                restrict: "A", multiElement: !0, link: function (b, d, c) {
                    b.$watch(c.ngShow, function (b) {
                        a[b ?
                            "removeClass" : "addClass"](d, "ng-hide", {tempClasses: "ng-hide-animate"})
                    })
                }
            }
        }], Be = ["$animate", function (a) {
            return {
                restrict: "A", multiElement: !0, link: function (b, d, c) {
                    b.$watch(c.ngHide, function (b) {
                        a[b ? "addClass" : "removeClass"](d, "ng-hide", {tempClasses: "ng-hide-animate"})
                    })
                }
            }
        }], Je = Na(function (a, b, d) {
            a.$watch(d.ngStyle, function (a, d) {
                d && a !== d && q(d, function (a, c) {
                    b.css(c, "")
                });
                a && b.css(a)
            }, !0)
        }), Ke = ["$animate", "$compile", function (a, b) {
            return {
                require: "ngSwitch", controller: ["$scope", function () {
                    this.cases = {}
                }],
                link: function (d, c, e, f) {
                    var g = [], h = [], k = [], l = [], m = function (a, b) {
                        return function () {
                            a.splice(b, 1)
                        }
                    };
                    d.$watch(e.ngSwitch || e.on, function (c) {
                        var d, e;
                        d = 0;
                        for (e = k.length; d < e; ++d) a.cancel(k[d]);
                        d = k.length = 0;
                        for (e = l.length; d < e; ++d) {
                            var s = ub(h[d].clone);
                            l[d].$destroy();
                            (k[d] = a.leave(s)).then(m(k, d))
                        }
                        h.length = 0;
                        l.length = 0;
                        (g = f.cases["!" + c] || f.cases["?"]) && q(g, function (c) {
                            c.transclude(function (d, e) {
                                l.push(e);
                                var f = c.element;
                                d[d.length++] = b.$$createComment("end ngSwitchWhen");
                                h.push({clone: d});
                                a.enter(d, f.parent(),
                                    f)
                            })
                        })
                    })
                }
            }
        }], Le = Na({
            transclude: "element",
            priority: 1200,
            require: "^ngSwitch",
            multiElement: !0,
            link: function (a, b, d, c, e) {
                c.cases["!" + d.ngSwitchWhen] = c.cases["!" + d.ngSwitchWhen] || [];
                c.cases["!" + d.ngSwitchWhen].push({transclude: e, element: b})
            }
        }), Me = Na({
            transclude: "element",
            priority: 1200,
            require: "^ngSwitch",
            multiElement: !0,
            link: function (a, b, d, c, e) {
                c.cases["?"] = c.cases["?"] || [];
                c.cases["?"].push({transclude: e, element: b})
            }
        }), Pg = O("ngTransclude"), Oe = Na({
            restrict: "EAC", link: function (a, b, d, c, e) {
                d.ngTransclude ===
                d.$attr.ngTransclude && (d.ngTransclude = "");
                if (!e) throw Pg("orphan", wa(b));
                e(function (a) {
                    a.length && (b.empty(), b.append(a))
                }, null, d.ngTransclude || d.ngTranscludeSlot)
            }
        }), oe = ["$templateCache", function (a) {
            return {
                restrict: "E", terminal: !0, compile: function (b, d) {
                    "text/ng-template" == d.type && a.put(d.id, b[0].text)
                }
            }
        }], Qg = {$setViewValue: E, $render: E}, Rg = ["$element", "$scope", function (a, b) {
            var d = this, c = new Ua;
            d.ngModelCtrl = Qg;
            d.unknownOption = H(P.createElement("option"));
            d.renderUnknownOption = function (b) {
                b = "? " + Ha(b) +
                    " ?";
                d.unknownOption.val(b);
                a.prepend(d.unknownOption);
                a.val(b)
            };
            b.$on("$destroy", function () {
                d.renderUnknownOption = E
            });
            d.removeUnknownOption = function () {
                d.unknownOption.parent() && d.unknownOption.remove()
            };
            d.readValue = function () {
                d.removeUnknownOption();
                return a.val()
            };
            d.writeValue = function (b) {
                d.hasOption(b) ? (d.removeUnknownOption(), a.val(b), "" === b && d.emptyOption.prop("selected", !0)) : null == b && d.emptyOption ? (d.removeUnknownOption(), a.val("")) : d.renderUnknownOption(b)
            };
            d.addOption = function (a, b) {
                if (8 !==
                    b[0].nodeType) {
                    Ta(a, '"option value"');
                    "" === a && (d.emptyOption = b);
                    var g = c.get(a) || 0;
                    c.put(a, g + 1);
                    d.ngModelCtrl.$render();
                    b[0].hasAttribute("selected") && (b[0].selected = !0)
                }
            };
            d.removeOption = function (a) {
                var b = c.get(a);
                b && (1 === b ? (c.remove(a), "" === a && (d.emptyOption = u)) : c.put(a, b - 1))
            };
            d.hasOption = function (a) {
                return !!c.get(a)
            };
            d.registerOption = function (a, b, c, h, k) {
                if (h) {
                    var l;
                    c.$observe("value", function (a) {
                        A(l) && d.removeOption(l);
                        l = a;
                        d.addOption(a, b)
                    })
                } else k ? a.$watch(k, function (a, e) {
                    c.$set("value", a);
                    e !==
                    a && d.removeOption(e);
                    d.addOption(a, b)
                }) : d.addOption(c.value, b);
                b.on("$destroy", function () {
                    d.removeOption(c.value);
                    d.ngModelCtrl.$render()
                })
            }
        }], pe = function () {
            return {
                restrict: "E", require: ["select", "?ngModel"], controller: Rg, priority: 1, link: {
                    pre: function (a, b, d, c) {
                        var e = c[1];
                        if (e) {
                            var f = c[0];
                            f.ngModelCtrl = e;
                            b.on("change", function () {
                                a.$apply(function () {
                                    e.$setViewValue(f.readValue())
                                })
                            });
                            if (d.multiple) {
                                f.readValue = function () {
                                    var a = [];
                                    q(b.find("option"), function (b) {
                                        b.selected && a.push(b.value)
                                    });
                                    return a
                                };
                                f.writeValue = function (a) {
                                    var c = new Ua(a);
                                    q(b.find("option"), function (a) {
                                        a.selected = A(c.get(a.value))
                                    })
                                };
                                var g, h = NaN;
                                a.$watch(function () {
                                    h !== e.$viewValue || na(g, e.$viewValue) || (g = ia(e.$viewValue), e.$render());
                                    h = e.$viewValue
                                });
                                e.$isEmpty = function (a) {
                                    return !a || 0 === a.length
                                }
                            }
                        }
                    }, post: function (a, b, d, c) {
                        var e = c[1];
                        if (e) {
                            var f = c[0];
                            e.$render = function () {
                                f.writeValue(e.$viewValue)
                            }
                        }
                    }
                }
            }
        }, re = ["$interpolate", function (a) {
            return {
                restrict: "E", priority: 100, compile: function (b, d) {
                    if (A(d.value)) var c = a(d.value, !0); else {
                        var e =
                            a(b.text(), !0);
                        e || d.$set("value", b.text())
                    }
                    return function (a, b, d) {
                        var k = b.parent();
                        (k = k.data("$selectController") || k.parent().data("$selectController")) && k.registerOption(a, b, d, c, e)
                    }
                }
            }
        }], qe = da({restrict: "E", terminal: !1}), Fc = function () {
            return {
                restrict: "A", require: "?ngModel", link: function (a, b, d, c) {
                    c && (d.required = !0, c.$validators.required = function (a, b) {
                        return !d.required || !c.$isEmpty(b)
                    }, d.$observe("required", function () {
                        c.$validate()
                    }))
                }
            }
        }, Ec = function () {
            return {
                restrict: "A", require: "?ngModel", link: function (a,
                                                                    b, d, c) {
                    if (c) {
                        var e, f = d.ngPattern || d.pattern;
                        d.$observe("pattern", function (a) {
                            y(a) && 0 < a.length && (a = new RegExp("^" + a + "$"));
                            if (a && !a.test) throw O("ngPattern")("noregexp", f, a, wa(b));
                            e = a || u;
                            c.$validate()
                        });
                        c.$validators.pattern = function (a, b) {
                            return c.$isEmpty(b) || z(e) || e.test(b)
                        }
                    }
                }
            }
        }, Hc = function () {
            return {
                restrict: "A", require: "?ngModel", link: function (a, b, d, c) {
                    if (c) {
                        var e = -1;
                        d.$observe("maxlength", function (a) {
                            a = Y(a);
                            e = isNaN(a) ? -1 : a;
                            c.$validate()
                        });
                        c.$validators.maxlength = function (a, b) {
                            return 0 > e || c.$isEmpty(b) ||
                                b.length <= e
                        }
                    }
                }
            }
        }, Gc = function () {
            return {
                restrict: "A", require: "?ngModel", link: function (a, b, d, c) {
                    if (c) {
                        var e = 0;
                        d.$observe("minlength", function (a) {
                            e = Y(a) || 0;
                            c.$validate()
                        });
                        c.$validators.minlength = function (a, b) {
                            return c.$isEmpty(b) || b.length >= e
                        }
                    }
                }
            }
        };
    T.angular.bootstrap ? T.console && console.log("WARNING: Tried to load angular more than once.") : (he(), je(ea), ea.module("ngLocale", [], ["$provide", function (a) {
        function b(a) {
            a += "";
            var b = a.indexOf(".");
            return -1 == b ? 0 : a.length - b - 1
        }

        a.value("$locale", {
            DATETIME_FORMATS: {
                AMPMS: ["AM",
                    "PM"],
                DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                ERANAMES: ["Before Christ", "Anno Domini"],
                ERAS: ["BC", "AD"],
                FIRSTDAYOFWEEK: 6,
                MONTH: "January February March April May June July August September October November December".split(" "),
                SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                STANDALONEMONTH: "January February March April May June July August September October November December".split(" "),
                WEEKENDRANGE: [5,
                    6],
                fullDate: "EEEE, MMMM d, y",
                longDate: "MMMM d, y",
                medium: "MMM d, y h:mm:ss a",
                mediumDate: "MMM d, y",
                mediumTime: "h:mm:ss a",
                "short": "M/d/yy h:mm a",
                shortDate: "M/d/yy",
                shortTime: "h:mm a"
            },
            NUMBER_FORMATS: {
                CURRENCY_SYM: "$",
                DECIMAL_SEP: ".",
                GROUP_SEP: ",",
                PATTERNS: [{
                    gSize: 3,
                    lgSize: 3,
                    maxFrac: 3,
                    minFrac: 0,
                    minInt: 1,
                    negPre: "-",
                    negSuf: "",
                    posPre: "",
                    posSuf: ""
                }, {
                    gSize: 3,
                    lgSize: 3,
                    maxFrac: 2,
                    minFrac: 2,
                    minInt: 1,
                    negPre: "-\u00a4",
                    negSuf: "",
                    posPre: "\u00a4",
                    posSuf: ""
                }]
            },
            id: "en-us",
            localeID: "en_US",
            pluralCat: function (a,
                                 c) {
                var e = a | 0, f = c;
                u === f && (f = Math.min(b(a), 3));
                Math.pow(10, f);
                return 1 == e && 0 == f ? "one" : "other"
            }
        })
    }]), H(P).ready(function () {
        de(P, yc)
    }))
})(window, document);
!window.angular.$$csp().noInlineStyle && window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*!
 * ionic.bundle.js is a concatenation of:
 * ionic.js, angular.js, angular-animate.js,
 * angular-sanitize.js, angular-ui-router.js,
 * and ionic-angular.js
 */

/*
 AngularJS v1.5.3
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function (E, w, Va) {
    'use strict';

    function ya(a, b, c) {
        if (!a) throw Ka("areq", b || "?", c || "required");
        return a
    }

    function za(a, b) {
        if (!a && !b) return "";
        if (!a) return b;
        if (!b) return a;
        ba(a) && (a = a.join(" "));
        ba(b) && (b = b.join(" "));
        return a + " " + b
    }

    function La(a) {
        var b = {};
        a && (a.to || a.from) && (b.to = a.to, b.from = a.from);
        return b
    }

    function V(a, b, c) {
        var d = "";
        a = ba(a) ? a : a && I(a) && a.length ? a.split(/\s+/) : [];
        q(a, function (a, f) {
            a && 0 < a.length && (d += 0 < f ? " " : "", d += c ? b + a : a + b)
        });
        return d
    }

    function Ma(a) {
        if (a instanceof H) switch (a.length) {
            case 0:
                return [];
            case 1:
                if (1 === a[0].nodeType) return a;
                break;
            default:
                return H(ga(a))
        }
        if (1 === a.nodeType) return H(a)
    }

    function ga(a) {
        if (!a[0]) return a;
        for (var b = 0; b < a.length; b++) {
            var c = a[b];
            if (1 == c.nodeType) return c
        }
    }

    function Na(a, b, c) {
        q(b, function (b) {
            a.addClass(b, c)
        })
    }

    function Oa(a, b, c) {
        q(b, function (b) {
            a.removeClass(b, c)
        })
    }

    function Q(a) {
        return function (b, c) {
            c.addClass && (Na(a, b, c.addClass), c.addClass = null);
            c.removeClass && (Oa(a, b, c.removeClass), c.removeClass = null)
        }
    }

    function oa(a) {
        a = a || {};
        if (!a.$$prepared) {
            var b = a.domOperation ||
                O;
            a.domOperation = function () {
                a.$$domOperationFired = !0;
                b();
                b = O
            };
            a.$$prepared = !0
        }
        return a
    }

    function ha(a, b) {
        Aa(a, b);
        Ba(a, b)
    }

    function Aa(a, b) {
        b.from && (a.css(b.from), b.from = null)
    }

    function Ba(a, b) {
        b.to && (a.css(b.to), b.to = null)
    }

    function T(a, b, c) {
        var d = b.options || {};
        c = c.options || {};
        var e = (d.addClass || "") + " " + (c.addClass || ""), f = (d.removeClass || "") + " " + (c.removeClass || "");
        a = Pa(a.attr("class"), e, f);
        c.preparationClasses && (d.preparationClasses = W(c.preparationClasses, d.preparationClasses), delete c.preparationClasses);
        e = d.domOperation !== O ? d.domOperation : null;
        Ca(d, c);
        e && (d.domOperation = e);
        d.addClass = a.addClass ? a.addClass : null;
        d.removeClass = a.removeClass ? a.removeClass : null;
        b.addClass = d.addClass;
        b.removeClass = d.removeClass;
        return d
    }

    function Pa(a, b, c) {
        function d(a) {
            I(a) && (a = a.split(" "));
            var b = {};
            q(a, function (a) {
                a.length && (b[a] = !0)
            });
            return b
        }

        var e = {};
        a = d(a);
        b = d(b);
        q(b, function (a, b) {
            e[b] = 1
        });
        c = d(c);
        q(c, function (a, b) {
            e[b] = 1 === e[b] ? null : -1
        });
        var f = {addClass: "", removeClass: ""};
        q(e, function (b, c) {
            var d, e;
            1 === b ? (d = "addClass",
                e = !a[c]) : -1 === b && (d = "removeClass", e = a[c]);
            e && (f[d].length && (f[d] += " "), f[d] += c)
        });
        return f
    }

    function A(a) {
        return a instanceof w.element ? a[0] : a
    }

    function Qa(a, b, c) {
        var d = "";
        b && (d = V(b, "ng-", !0));
        c.addClass && (d = W(d, V(c.addClass, "-add")));
        c.removeClass && (d = W(d, V(c.removeClass, "-remove")));
        d.length && (c.preparationClasses = d, a.addClass(d))
    }

    function pa(a, b) {
        var c = b ? "-" + b + "s" : "";
        la(a, [ma, c]);
        return [ma, c]
    }

    function ra(a, b) {
        var c = b ? "paused" : "", d = X + "PlayState";
        la(a, [d, c]);
        return [d, c]
    }

    function la(a, b) {
        a.style[b[0]] =
            b[1]
    }

    function W(a, b) {
        return a ? b ? a + " " + b : a : b
    }

    function Da(a, b, c) {
        var d = Object.create(null), e = a.getComputedStyle(b) || {};
        q(c, function (a, b) {
            var c = e[a];
            if (c) {
                var F = c.charAt(0);
                if ("-" === F || "+" === F || 0 <= F) c = Ra(c);
                0 === c && (c = null);
                d[b] = c
            }
        });
        return d
    }

    function Ra(a) {
        var b = 0;
        a = a.split(/\s*,\s*/);
        q(a, function (a) {
            "s" == a.charAt(a.length - 1) && (a = a.substring(0, a.length - 1));
            a = parseFloat(a) || 0;
            b = b ? Math.max(a, b) : a
        });
        return b
    }

    function sa(a) {
        return 0 === a || null != a
    }

    function Ea(a, b) {
        var c = R, d = a + "s";
        b ? c += "Duration" : d += " linear all";
        return [c, d]
    }

    function Fa() {
        var a = Object.create(null);
        return {
            flush: function () {
                a = Object.create(null)
            }, count: function (b) {
                return (b = a[b]) ? b.total : 0
            }, get: function (b) {
                return (b = a[b]) && b.value
            }, put: function (b, c) {
                a[b] ? a[b].total++ : a[b] = {total: 1, value: c}
            }
        }
    }

    function Ga(a, b, c) {
        q(c, function (c) {
            a[c] = Y(a[c]) ? a[c] : b.style.getPropertyValue(c)
        })
    }

    var O = w.noop, Ha = w.copy, Ca = w.extend, H = w.element, q = w.forEach, ba = w.isArray, I = w.isString,
        ca = w.isObject, N = w.isUndefined, Y = w.isDefined, Ia = w.isFunction, ta = w.isElement, R, ua, X, va;
    N(E.ontransitionend) &&
    Y(E.onwebkittransitionend) ? (R = "WebkitTransition", ua = "webkitTransitionEnd transitionend") : (R = "transition", ua = "transitionend");
    N(E.onanimationend) && Y(E.onwebkitanimationend) ? (X = "WebkitAnimation", va = "webkitAnimationEnd animationend") : (X = "animation", va = "animationend");
    var qa = X + "Delay", wa = X + "Duration", ma = R + "Delay";
    E = R + "Duration";
    var Ka = w.$$minErr("ng"), Sa = {
            transitionDuration: E,
            transitionDelay: ma,
            transitionProperty: R + "Property",
            animationDuration: wa,
            animationDelay: qa,
            animationIterationCount: X + "IterationCount"
        },
        Ta = {transitionDuration: E, transitionDelay: ma, animationDuration: wa, animationDelay: qa};
    w.module("ngAnimate", []).directive("ngAnimateSwap", ["$animate", "$rootScope", function (a, b) {
        return {
            restrict: "A", transclude: "element", terminal: !0, priority: 600, link: function (b, d, e, f, r) {
                var x, F;
                b.$watchCollection(e.ngAnimateSwap || e["for"], function (e) {
                    x && a.leave(x);
                    F && (F.$destroy(), F = null);
                    if (e || 0 === e) F = b.$new(), r(F, function (b) {
                        x = b;
                        a.enter(b, null, d)
                    })
                })
            }
        }
    }]).directive("ngAnimateChildren", ["$interpolate", function (a) {
        return {
            link: function (b,
                            c, d) {
                function e(a) {
                    c.data("$$ngAnimateChildren", "on" === a || "true" === a)
                }

                var f = d.ngAnimateChildren;
                w.isString(f) && 0 === f.length ? c.data("$$ngAnimateChildren", !0) : (e(a(f)(b)), d.$observe("ngAnimateChildren", e))
            }
        }
    }]).factory("$$rAFScheduler", ["$$rAF", function (a) {
        function b(a) {
            d = d.concat(a);
            c()
        }

        function c() {
            if (d.length) {
                for (var b = d.shift(), r = 0; r < b.length; r++) b[r]();
                e || a(function () {
                    e || c()
                })
            }
        }

        var d, e;
        d = b.queue = [];
        b.waitUntilQuiet = function (b) {
            e && e();
            e = a(function () {
                e = null;
                b();
                c()
            })
        };
        return b
    }]).provider("$$animateQueue",
        ["$animateProvider", function (a) {
            function b(a) {
                if (!a) return null;
                a = a.split(" ");
                var b = Object.create(null);
                q(a, function (a) {
                    b[a] = !0
                });
                return b
            }

            function c(a, c) {
                if (a && c) {
                    var d = b(c);
                    return a.split(" ").some(function (a) {
                        return d[a]
                    })
                }
            }

            function d(a, b, c, d) {
                return f[a].some(function (a) {
                    return a(b, c, d)
                })
            }

            function e(a, b) {
                var c = 0 < (a.addClass || "").length, d = 0 < (a.removeClass || "").length;
                return b ? c && d : c || d
            }

            var f = this.rules = {skip: [], cancel: [], join: []};
            f.join.push(function (a, b, c) {
                return !b.structural && e(b)
            });
            f.skip.push(function (a,
                                  b, c) {
                return !b.structural && !e(b)
            });
            f.skip.push(function (a, b, c) {
                return "leave" == c.event && b.structural
            });
            f.skip.push(function (a, b, c) {
                return c.structural && 2 === c.state && !b.structural
            });
            f.cancel.push(function (a, b, c) {
                return c.structural && b.structural
            });
            f.cancel.push(function (a, b, c) {
                return 2 === c.state && b.structural
            });
            f.cancel.push(function (a, b, d) {
                if (d.structural) return !1;
                a = b.addClass;
                b = b.removeClass;
                var e = d.addClass;
                d = d.removeClass;
                return N(a) && N(b) || N(e) && N(d) ? !1 : c(a, d) || c(b, e)
            });
            this.$get = ["$$rAF", "$rootScope",
                "$rootElement", "$document", "$$HashMap", "$$animation", "$$AnimateRunner", "$templateRequest", "$$jqLite", "$$forceReflow", function (b, c, f, u, l, w, s, M, v, h) {
                    function P() {
                        var a = !1;
                        return function (b) {
                            a ? b() : c.$$postDigest(function () {
                                a = !0;
                                b()
                            })
                        }
                    }

                    function y(a, b, c) {
                        var g = A(b), d = A(a), k = [];
                        (a = G[c]) && q(a, function (a) {
                            t.call(a.node, g) ? k.push(a.callback) : "leave" === c && t.call(a.node, d) && k.push(a.callback)
                        });
                        return k
                    }

                    function k(a, g, k) {
                        function m(c, g, d, k) {
                            F(function () {
                                var c = y(J, a, g);
                                c.length && b(function () {
                                    q(c, function (b) {
                                        b(a,
                                            d, k)
                                    })
                                })
                            });
                            c.progress(g, d, k)
                        }

                        function G(b) {
                            var c = a, g = h;
                            g.preparationClasses && (c.removeClass(g.preparationClasses), g.preparationClasses = null);
                            g.activeClasses && (c.removeClass(g.activeClasses), g.activeClasses = null);
                            Ja(a, h);
                            ha(a, h);
                            h.domOperation();
                            f.complete(!b)
                        }

                        var h = Ha(k), t, J;
                        if (a = Ma(a)) t = A(a), J = a.parent();
                        var h = oa(h), f = new s, F = P();
                        ba(h.addClass) && (h.addClass = h.addClass.join(" "));
                        h.addClass && !I(h.addClass) && (h.addClass = null);
                        ba(h.removeClass) && (h.removeClass = h.removeClass.join(" "));
                        h.removeClass &&
                        !I(h.removeClass) && (h.removeClass = null);
                        h.from && !ca(h.from) && (h.from = null);
                        h.to && !ca(h.to) && (h.to = null);
                        if (!t) return G(), f;
                        k = [t.className, h.addClass, h.removeClass].join(" ");
                        if (!Ua(k)) return G(), f;
                        var v = 0 <= ["enter", "move", "leave"].indexOf(g), l = !K || u[0].hidden || C.get(t);
                        k = !l && z.get(t) || {};
                        var Z = !!k.state;
                        l || Z && 1 == k.state || (l = !n(a, J, g));
                        if (l) return G(), f;
                        v && xa(a);
                        l = {
                            structural: v,
                            element: a,
                            event: g,
                            addClass: h.addClass,
                            removeClass: h.removeClass,
                            close: G,
                            options: h,
                            runner: f
                        };
                        if (Z) {
                            if (d("skip", a, l, k)) {
                                if (2 ===
                                    k.state) return G(), f;
                                T(a, k, l);
                                return k.runner
                            }
                            if (d("cancel", a, l, k)) if (2 === k.state) k.runner.end(); else if (k.structural) k.close(); else return T(a, k, l), k.runner; else if (d("join", a, l, k)) if (2 === k.state) T(a, l, {}); else return Qa(a, v ? g : null, h), g = l.event = k.event, h = T(a, k, l), k.runner
                        } else T(a, l, {});
                        (Z = l.structural) || (Z = "animate" === l.event && 0 < Object.keys(l.options.to || {}).length || e(l));
                        if (!Z) return G(), ka(a), f;
                        var M = (k.counter || 0) + 1;
                        l.counter = M;
                        D(a, 1, l);
                        c.$$postDigest(function () {
                            var b = z.get(t), c = !b, b = b || {}, d =
                                0 < (a.parent() || []).length && ("animate" === b.event || b.structural || e(b));
                            if (c || b.counter !== M || !d) {
                                c && (Ja(a, h), ha(a, h));
                                if (c || v && b.event !== g) h.domOperation(), f.end();
                                d || ka(a)
                            } else g = !b.structural && e(b, !0) ? "setClass" : b.event, D(a, 2), b = w(a, g, b.options), b.done(function (b) {
                                G(!b);
                                (b = z.get(t)) && b.counter === M && ka(A(a));
                                m(f, g, "close", {})
                            }), f.setHost(b), m(f, g, "start", {})
                        });
                        return f
                    }

                    function xa(a) {
                        a = A(a).querySelectorAll("[data-ng-animate]");
                        q(a, function (a) {
                            var b = parseInt(a.getAttribute("data-ng-animate")), c = z.get(a);
                            if (c) switch (b) {
                                case 2:
                                    c.runner.end();
                                case 1:
                                    z.remove(a)
                            }
                        })
                    }

                    function ka(a) {
                        a = A(a);
                        a.removeAttribute("data-ng-animate");
                        z.remove(a)
                    }

                    function J(a, b) {
                        return A(a) === A(b)
                    }

                    function n(a, b, c) {
                        c = H(u[0].body);
                        var g = J(a, c) || "HTML" === a[0].nodeName, d = J(a, f), k = !1, h, m = C.get(A(a));
                        (a = H.data(a[0], "$ngAnimatePin")) && (b = a);
                        for (b = A(b); b;) {
                            d || (d = J(b, f));
                            if (1 !== b.nodeType) break;
                            a = z.get(b) || {};
                            if (!k) {
                                var e = C.get(b);
                                if (!0 === e && !1 !== m) {
                                    m = !0;
                                    break
                                } else !1 === e && (m = !1);
                                k = a.structural
                            }
                            if (N(h) || !0 === h) a = H.data(b, "$$ngAnimateChildren"),
                            Y(a) && (h = a);
                            if (k && !1 === h) break;
                            g || (g = J(b, c));
                            if (g && d) break;
                            if (!d && (a = H.data(b, "$ngAnimatePin"))) {
                                b = A(a);
                                continue
                            }
                            b = b.parentNode
                        }
                        return (!k || h) && !0 !== m && d && g
                    }

                    function D(a, b, c) {
                        c = c || {};
                        c.state = b;
                        a = A(a);
                        a.setAttribute("data-ng-animate", b);
                        c = (b = z.get(a)) ? Ca(b, c) : c;
                        z.put(a, c)
                    }

                    var z = new l, C = new l, K = null, g = c.$watch(function () {
                        return 0 === M.totalPendingRequests
                    }, function (a) {
                        a && (g(), c.$$postDigest(function () {
                            c.$$postDigest(function () {
                                null === K && (K = !0)
                            })
                        }))
                    }), G = {}, m = a.classNameFilter(), Ua = m ? function (a) {
                            return m.test(a)
                        } :
                        function () {
                            return !0
                        }, Ja = Q(v), t = Node.prototype.contains || function (a) {
                        return this === a || !!(this.compareDocumentPosition(a) & 16)
                    }, Z = {
                        on: function (a, b, c) {
                            var g = ga(b);
                            G[a] = G[a] || [];
                            G[a].push({node: g, callback: c});
                            H(b).on("$destroy", function () {
                                Z.off(a, b, c)
                            })
                        }, off: function (a, b, c) {
                            function g(a, b, c) {
                                var d = ga(b);
                                return a.filter(function (a) {
                                    return !(a.node === d && (!c || a.callback === c))
                                })
                            }

                            var d = G[a];
                            d && (G[a] = 1 === arguments.length ? null : g(d, b, c))
                        }, pin: function (a, b) {
                            ya(ta(a), "element", "not an element");
                            ya(ta(b), "parentElement",
                                "not an element");
                            a.data("$ngAnimatePin", b)
                        }, push: function (a, b, c, g) {
                            c = c || {};
                            c.domOperation = g;
                            return k(a, b, c)
                        }, enabled: function (a, b) {
                            var c = arguments.length;
                            if (0 === c) b = !!K; else if (ta(a)) {
                                var g = A(a), d = C.get(g);
                                1 === c ? b = !d : C.put(g, !b)
                            } else b = K = !!a;
                            return b
                        }
                    };
                    return Z
                }]
        }]).provider("$$animation", ["$animateProvider", function (a) {
        function b(a) {
            return a.data("$$animationRunner")
        }

        var c = this.drivers = [];
        this.$get = ["$$jqLite", "$rootScope", "$injector", "$$AnimateRunner", "$$HashMap", "$$rAFScheduler", function (a, e,
                                                                                                                        f, r, x, F) {
            function u(a) {
                function b(a) {
                    if (a.processed) return a;
                    a.processed = !0;
                    var d = a.domNode, h = d.parentNode;
                    e.put(d, a);
                    for (var f; h;) {
                        if (f = e.get(h)) {
                            f.processed || (f = b(f));
                            break
                        }
                        h = h.parentNode
                    }
                    (f || c).children.push(a);
                    return a
                }

                var c = {children: []}, d, e = new x;
                for (d = 0; d < a.length; d++) {
                    var f = a[d];
                    e.put(f.domNode, a[d] = {domNode: f.domNode, fn: f.fn, children: []})
                }
                for (d = 0; d < a.length; d++) b(a[d]);
                return function (a) {
                    var b = [], c = [], d;
                    for (d = 0; d < a.children.length; d++) c.push(a.children[d]);
                    a = c.length;
                    var h = 0, e = [];
                    for (d = 0; d <
                    c.length; d++) {
                        var f = c[d];
                        0 >= a && (a = h, h = 0, b.push(e), e = []);
                        e.push(f.fn);
                        f.children.forEach(function (a) {
                            h++;
                            c.push(a)
                        });
                        a--
                    }
                    e.length && b.push(e);
                    return b
                }(c)
            }

            var l = [], w = Q(a);
            return function (s, x, v) {
                function h(a) {
                    a = a.hasAttribute("ng-animate-ref") ? [a] : a.querySelectorAll("[ng-animate-ref]");
                    var b = [];
                    q(a, function (a) {
                        var c = a.getAttribute("ng-animate-ref");
                        c && c.length && b.push(a)
                    });
                    return b
                }

                function P(a) {
                    var b = [], c = {};
                    q(a, function (a, g) {
                        var d = A(a.element), k = 0 <= ["enter", "move"].indexOf(a.event), d = a.structural ?
                            h(d) : [];
                        if (d.length) {
                            var e = k ? "to" : "from";
                            q(d, function (a) {
                                var b = a.getAttribute("ng-animate-ref");
                                c[b] = c[b] || {};
                                c[b][e] = {animationID: g, element: H(a)}
                            })
                        } else b.push(a)
                    });
                    var d = {}, k = {};
                    q(c, function (c, h) {
                        var e = c.from, f = c.to;
                        if (e && f) {
                            var m = a[e.animationID], C = a[f.animationID], n = e.animationID.toString();
                            if (!k[n]) {
                                var D = k[n] = {
                                    structural: !0, beforeStart: function () {
                                        m.beforeStart();
                                        C.beforeStart()
                                    }, close: function () {
                                        m.close();
                                        C.close()
                                    }, classes: y(m.classes, C.classes), from: m, to: C, anchors: []
                                };
                                D.classes.length ? b.push(D) :
                                    (b.push(m), b.push(C))
                            }
                            k[n].anchors.push({out: e.element, "in": f.element})
                        } else e = e ? e.animationID : f.animationID, f = e.toString(), d[f] || (d[f] = !0, b.push(a[e]))
                    });
                    return b
                }

                function y(a, b) {
                    a = a.split(" ");
                    b = b.split(" ");
                    for (var c = [], d = 0; d < a.length; d++) {
                        var k = a[d];
                        if ("ng-" !== k.substring(0, 3)) for (var e = 0; e < b.length; e++) if (k === b[e]) {
                            c.push(k);
                            break
                        }
                    }
                    return c.join(" ")
                }

                function k(a) {
                    for (var b = c.length - 1; 0 <= b; b--) {
                        var d = c[b];
                        if (f.has(d) && (d = f.get(d)(a))) return d
                    }
                }

                function xa(a, c) {
                    a.from && a.to ? (b(a.from.element).setHost(c),
                        b(a.to.element).setHost(c)) : b(a.element).setHost(c)
                }

                function ka() {
                    var a = b(s);
                    !a || "leave" === x && v.$$domOperationFired || a.end()
                }

                function J(b) {
                    s.off("$destroy", ka);
                    s.removeData("$$animationRunner");
                    w(s, v);
                    ha(s, v);
                    v.domOperation();
                    C && a.removeClass(s, C);
                    s.removeClass("ng-animate");
                    D.complete(!b)
                }

                v = oa(v);
                var n = 0 <= ["enter", "move", "leave"].indexOf(x), D = new r({
                    end: function () {
                        J()
                    }, cancel: function () {
                        J(!0)
                    }
                });
                if (!c.length) return J(), D;
                s.data("$$animationRunner", D);
                var z = za(s.attr("class"), za(v.addClass, v.removeClass)),
                    C = v.tempClasses;
                C && (z += " " + C, v.tempClasses = null);
                var K;
                n && (K = "ng-" + x + "-prepare", a.addClass(s, K));
                l.push({
                    element: s, classes: z, event: x, structural: n, options: v, beforeStart: function () {
                        s.addClass("ng-animate");
                        C && a.addClass(s, C);
                        K && (a.removeClass(s, K), K = null)
                    }, close: J
                });
                s.on("$destroy", ka);
                if (1 < l.length) return D;
                e.$$postDigest(function () {
                    var a = [];
                    q(l, function (c) {
                        b(c.element) ? a.push(c) : c.close()
                    });
                    l.length = 0;
                    var c = P(a), d = [];
                    q(c, function (a) {
                        d.push({
                            domNode: A(a.from ? a.from.element : a.element), fn: function () {
                                a.beforeStart();
                                var c, d = a.close;
                                if (b(a.anchors ? a.from.element || a.to.element : a.element)) {
                                    var g = k(a);
                                    g && (c = g.start)
                                }
                                c ? (c = c(), c.done(function (a) {
                                    d(!a)
                                }), xa(a, c)) : d()
                            }
                        })
                    });
                    F(u(d))
                });
                return D
            }
        }]
    }]).provider("$animateCss", ["$animateProvider", function (a) {
        var b = Fa(), c = Fa();
        this.$get = ["$window", "$$jqLite", "$$AnimateRunner", "$timeout", "$$forceReflow", "$sniffer", "$$rAFScheduler", "$$animateQueue", function (a, e, f, r, x, F, u, l) {
            function w(a, b) {
                var c = a.parentNode;
                return (c.$$ngAnimateParentKey || (c.$$ngAnimateParentKey = ++P)) + "-" + a.getAttribute("class") +
                    "-" + b
            }

            function s(k, h, f, l) {
                var n;
                0 < b.count(f) && (n = c.get(f), n || (h = V(h, "-stagger"), e.addClass(k, h), n = Da(a, k, l), n.animationDuration = Math.max(n.animationDuration, 0), n.transitionDuration = Math.max(n.transitionDuration, 0), e.removeClass(k, h), c.put(f, n)));
                return n || {}
            }

            function M(a) {
                y.push(a);
                u.waitUntilQuiet(function () {
                    b.flush();
                    c.flush();
                    for (var a = x(), d = 0; d < y.length; d++) y[d](a);
                    y.length = 0
                })
            }

            function v(c, h, e) {
                h = b.get(e);
                h || (h = Da(a, c, Sa), "infinite" === h.animationIterationCount && (h.animationIterationCount = 1));
                b.put(e, h);
                c = h;
                e = c.animationDelay;
                h = c.transitionDelay;
                c.maxDelay = e && h ? Math.max(e, h) : e || h;
                c.maxDuration = Math.max(c.animationDuration * c.animationIterationCount, c.transitionDuration);
                return c
            }

            var h = Q(e), P = 0, y = [];
            return function (a, c) {
                function d() {
                    n()
                }

                function u() {
                    n(!0)
                }

                function n(b) {
                    if (!(P || H && da)) {
                        P = !0;
                        da = !1;
                        g.$$skipPreparationClasses || e.removeClass(a, fa);
                        e.removeClass(a, ga);
                        ra(m, !1);
                        pa(m, !1);
                        q(y, function (a) {
                            m.style[a[0]] = ""
                        });
                        h(a, g);
                        ha(a, g);
                        Object.keys(G).length && q(G, function (a, b) {
                            a ? m.style.setProperty(b,
                                a) : m.style.removeProperty(b)
                        });
                        if (g.onDone) g.onDone();
                        ea && ea.length && a.off(ea.join(" "), C);
                        var c = a.data("$$animateCss");
                        c && (r.cancel(c[0].timer), a.removeData("$$animateCss"));
                        E && E.complete(!b)
                    }
                }

                function D(a) {
                    p.blockTransition && pa(m, a);
                    p.blockKeyframeAnimation && ra(m, !!a)
                }

                function z() {
                    E = new f({end: d, cancel: u});
                    M(O);
                    n();
                    return {
                        $$willAnimate: !1, start: function () {
                            return E
                        }, end: d
                    }
                }

                function C(a) {
                    a.stopPropagation();
                    var b = a.originalEvent || a;
                    a = b.$manualTimeStamp || Date.now();
                    b = parseFloat(b.elapsedTime.toFixed(3));
                    Math.max(a - W, 0) >= Q && b >= L && (H = !0, n())
                }

                function K() {
                    function b() {
                        if (!P) {
                            D(!1);
                            q(y, function (a) {
                                m.style[a[0]] = a[1]
                            });
                            h(a, g);
                            e.addClass(a, ga);
                            if (p.recalculateTimingStyles) {
                                na = m.className + " " + fa;
                                ia = w(m, na);
                                B = v(m, na, ia);
                                $ = B.maxDelay;
                                I = Math.max($, 0);
                                L = B.maxDuration;
                                if (0 === L) {
                                    n();
                                    return
                                }
                                p.hasTransitions = 0 < B.transitionDuration;
                                p.hasAnimations = 0 < B.animationDuration
                            }
                            p.applyAnimationDelay && ($ = "boolean" !== typeof g.delay && sa(g.delay) ? parseFloat(g.delay) : $, I = Math.max($, 0), B.animationDelay = $, aa = [qa, $ + "s"], y.push(aa),
                                m.style[aa[0]] = aa[1]);
                            Q = 1E3 * I;
                            T = 1E3 * L;
                            if (g.easing) {
                                var d, f = g.easing;
                                p.hasTransitions && (d = R + "TimingFunction", y.push([d, f]), m.style[d] = f);
                                p.hasAnimations && (d = X + "TimingFunction", y.push([d, f]), m.style[d] = f)
                            }
                            B.transitionDuration && ea.push(ua);
                            B.animationDuration && ea.push(va);
                            W = Date.now();
                            var l = Q + 1.5 * T;
                            d = W + l;
                            var f = a.data("$$animateCss") || [], K = !0;
                            if (f.length) {
                                var z = f[0];
                                (K = d > z.expectedEndTime) ? r.cancel(z.timer) : f.push(n)
                            }
                            K && (l = r(c, l, !1), f[0] = {
                                timer: l,
                                expectedEndTime: d
                            }, f.push(n), a.data("$$animateCss", f));
                            if (ea.length) a.on(ea.join(" "), C);
                            g.to && (g.cleanupStyles && Ga(G, m, Object.keys(g.to)), Ba(a, g))
                        }
                    }

                    function c() {
                        var b = a.data("$$animateCss");
                        if (b) {
                            for (var d = 1; d < b.length; d++) b[d]();
                            a.removeData("$$animateCss")
                        }
                    }

                    if (!P) if (m.parentNode) {
                        var d = function (a) {
                                if (H) da && a && (da = !1, n()); else if (da = !a, B.animationDuration) if (a = ra(m, da), da) y.push(a); else {
                                    var b = y, c = b.indexOf(a);
                                    0 <= a && b.splice(c, 1)
                                }
                            },
                            f = 0 < ca && (B.transitionDuration && 0 === U.transitionDuration || B.animationDuration && 0 === U.animationDuration) && Math.max(U.animationDelay,
                                U.transitionDelay);
                        f ? r(b, Math.floor(f * ca * 1E3), !1) : b();
                        N.resume = function () {
                            d(!0)
                        };
                        N.pause = function () {
                            d(!1)
                        }
                    } else n()
                }

                var g = c || {};
                g.$$prepared || (g = oa(Ha(g)));
                var G = {}, m = A(a);
                if (!m || !m.parentNode || !l.enabled()) return z();
                var y = [], x = a.attr("class"), t = La(g), P, da, H, E, N, I, Q, L, T, W, ea = [];
                if (0 === g.duration || !F.animations && !F.transitions) return z();
                var ja = g.event && ba(g.event) ? g.event.join(" ") : g.event, Y = "", S = "";
                ja && g.structural ? Y = V(ja, "ng-", !0) : ja && (Y = ja);
                g.addClass && (S += V(g.addClass, "-add"));
                g.removeClass &&
                (S.length && (S += " "), S += V(g.removeClass, "-remove"));
                g.applyClassesEarly && S.length && h(a, g);
                var fa = [Y, S].join(" ").trim(), na = x + " " + fa, ga = V(fa, "-active"),
                    x = t.to && 0 < Object.keys(t.to).length;
                if (!(0 < (g.keyframeStyle || "").length || x || fa)) return z();
                var ia, U;
                0 < g.stagger ? (t = parseFloat(g.stagger), U = {
                    transitionDelay: t,
                    animationDelay: t,
                    transitionDuration: 0,
                    animationDuration: 0
                }) : (ia = w(m, na), U = s(m, fa, ia, Ta));
                g.$$skipPreparationClasses || e.addClass(a, fa);
                g.transitionStyle && (t = [R, g.transitionStyle], la(m, t), y.push(t));
                0 <= g.duration && (t = 0 < m.style[R].length, t = Ea(g.duration, t), la(m, t), y.push(t));
                g.keyframeStyle && (t = [X, g.keyframeStyle], la(m, t), y.push(t));
                var ca = U ? 0 <= g.staggerIndex ? g.staggerIndex : b.count(ia) : 0;
                (ja = 0 === ca) && !g.skipBlocking && pa(m, 9999);
                var B = v(m, na, ia), $ = B.maxDelay;
                I = Math.max($, 0);
                L = B.maxDuration;
                var p = {};
                p.hasTransitions = 0 < B.transitionDuration;
                p.hasAnimations = 0 < B.animationDuration;
                p.hasTransitionAll = p.hasTransitions && "all" == B.transitionProperty;
                p.applyTransitionDuration = x && (p.hasTransitions && !p.hasTransitionAll ||
                    p.hasAnimations && !p.hasTransitions);
                p.applyAnimationDuration = g.duration && p.hasAnimations;
                p.applyTransitionDelay = sa(g.delay) && (p.applyTransitionDuration || p.hasTransitions);
                p.applyAnimationDelay = sa(g.delay) && p.hasAnimations;
                p.recalculateTimingStyles = 0 < S.length;
                if (p.applyTransitionDuration || p.applyAnimationDuration) L = g.duration ? parseFloat(g.duration) : L, p.applyTransitionDuration && (p.hasTransitions = !0, B.transitionDuration = L, t = 0 < m.style[R + "Property"].length, y.push(Ea(L, t))), p.applyAnimationDuration && (p.hasAnimations =
                    !0, B.animationDuration = L, y.push([wa, L + "s"]));
                if (0 === L && !p.recalculateTimingStyles) return z();
                if (null != g.delay) {
                    var aa;
                    "boolean" !== typeof g.delay && (aa = parseFloat(g.delay), I = Math.max(aa, 0));
                    p.applyTransitionDelay && y.push([ma, aa + "s"]);
                    p.applyAnimationDelay && y.push([qa, aa + "s"])
                }
                null == g.duration && 0 < B.transitionDuration && (p.recalculateTimingStyles = p.recalculateTimingStyles || ja);
                Q = 1E3 * I;
                T = 1E3 * L;
                g.skipBlocking || (p.blockTransition = 0 < B.transitionDuration, p.blockKeyframeAnimation = 0 < B.animationDuration && 0 < U.animationDelay &&
                    0 === U.animationDuration);
                g.from && (g.cleanupStyles && Ga(G, m, Object.keys(g.from)), Aa(a, g));
                p.blockTransition || p.blockKeyframeAnimation ? D(L) : g.skipBlocking || pa(m, !1);
                return {
                    $$willAnimate: !0, end: d, start: function () {
                        if (!P) return N = {end: d, cancel: u, resume: null, pause: null}, E = new f(N), M(K), E
                    }
                }
            }
        }]
    }]).provider("$$animateCssDriver", ["$$animationProvider", function (a) {
        a.drivers.push("$$animateCssDriver");
        this.$get = ["$animateCss", "$rootScope", "$$AnimateRunner", "$rootElement", "$sniffer", "$$jqLite", "$document", function (a,
                                                                                                                                    c, d, e, f, r, x) {
            function F(a) {
                return a.replace(/\bng-\S+\b/g, "")
            }

            function u(a, b) {
                I(a) && (a = a.split(" "));
                I(b) && (b = b.split(" "));
                return a.filter(function (a) {
                    return -1 === b.indexOf(a)
                }).join(" ")
            }

            function l(c, e, f) {
                function k(a) {
                    var b = {}, c = A(a).getBoundingClientRect();
                    q(["width", "height", "top", "left"], function (a) {
                        var d = c[a];
                        switch (a) {
                            case "top":
                                d += M.scrollTop;
                                break;
                            case "left":
                                d += M.scrollLeft
                        }
                        b[a] = Math.floor(d) + "px"
                    });
                    return b
                }

                function l() {
                    var c = F(f.attr("class") || ""), d = u(c, n), c = u(n, c), d = a(r, {
                        to: k(f), addClass: "ng-anchor-in " +
                            d, removeClass: "ng-anchor-out " + c, delay: !0
                    });
                    return d.$$willAnimate ? d : null
                }

                function x() {
                    r.remove();
                    e.removeClass("ng-animate-shim");
                    f.removeClass("ng-animate-shim")
                }

                var r = H(A(e).cloneNode(!0)), n = F(r.attr("class") || "");
                e.addClass("ng-animate-shim");
                f.addClass("ng-animate-shim");
                r.addClass("ng-anchor");
                v.append(r);
                var D;
                c = function () {
                    var c = a(r, {addClass: "ng-anchor-out", delay: !0, from: k(e)});
                    return c.$$willAnimate ? c : null
                }();
                if (!c && (D = l(), !D)) return x();
                var z = c || D;
                return {
                    start: function () {
                        function a() {
                            c &&
                            c.end()
                        }

                        var b, c = z.start();
                        c.done(function () {
                            c = null;
                            if (!D && (D = l())) return c = D.start(), c.done(function () {
                                c = null;
                                x();
                                b.complete()
                            }), c;
                            x();
                            b.complete()
                        });
                        return b = new d({end: a, cancel: a})
                    }
                }
            }

            function w(a, b, c, e) {
                var f = s(a, O), r = s(b, O), x = [];
                q(e, function (a) {
                    (a = l(c, a.out, a["in"])) && x.push(a)
                });
                if (f || r || 0 !== x.length) return {
                    start: function () {
                        function a() {
                            q(b, function (a) {
                                a.end()
                            })
                        }

                        var b = [];
                        f && b.push(f.start());
                        r && b.push(r.start());
                        q(x, function (a) {
                            b.push(a.start())
                        });
                        var c = new d({end: a, cancel: a});
                        d.all(b, function (a) {
                            c.complete(a)
                        });
                        return c
                    }
                }
            }

            function s(c) {
                var d = c.element, e = c.options || {};
                c.structural && (e.event = c.event, e.structural = !0, e.applyClassesEarly = !0, "leave" === c.event && (e.onDone = e.domOperation));
                e.preparationClasses && (e.event = W(e.event, e.preparationClasses));
                c = a(d, e);
                return c.$$willAnimate ? c : null
            }

            if (!f.animations && !f.transitions) return O;
            var M = x[0].body;
            c = A(e);
            var v = H(c.parentNode && 11 === c.parentNode.nodeType || M.contains(c) ? c : M);
            Q(r);
            return function (a) {
                return a.from && a.to ? w(a.from, a.to, a.classes, a.anchors) : s(a)
            }
        }]
    }]).provider("$$animateJs",
        ["$animateProvider", function (a) {
            this.$get = ["$injector", "$$AnimateRunner", "$$jqLite", function (b, c, d) {
                function e(c) {
                    c = ba(c) ? c : c.split(" ");
                    for (var d = [], e = {}, f = 0; f < c.length; f++) {
                        var l = c[f], q = a.$$registeredAnimations[l];
                        q && !e[l] && (d.push(b.get(q)), e[l] = !0)
                    }
                    return d
                }

                var f = Q(d);
                return function (a, b, d, u) {
                    function l() {
                        u.domOperation();
                        f(a, u)
                    }

                    function w(a, b, d, e, g) {
                        switch (d) {
                            case "animate":
                                b = [b, e.from, e.to, g];
                                break;
                            case "setClass":
                                b = [b, h, H, g];
                                break;
                            case "addClass":
                                b = [b, h, g];
                                break;
                            case "removeClass":
                                b = [b, H, g];
                                break;
                            default:
                                b = [b, g]
                        }
                        b.push(e);
                        if (a = a.apply(a, b)) if (Ia(a.start) && (a = a.start()), a instanceof c) a.done(g); else if (Ia(a)) return a;
                        return O
                    }

                    function s(a, b, d, e, g) {
                        var f = [];
                        q(e, function (e) {
                            var h = e[g];
                            h && f.push(function () {
                                var e, g, f = !1, k = function (a) {
                                    f || (f = !0, (g || O)(a), e.complete(!a))
                                };
                                e = new c({
                                    end: function () {
                                        k()
                                    }, cancel: function () {
                                        k(!0)
                                    }
                                });
                                g = w(h, a, b, d, function (a) {
                                    k(!1 === a)
                                });
                                return e
                            })
                        });
                        return f
                    }

                    function A(a, b, d, e, g) {
                        var f = s(a, b, d, e, g);
                        if (0 === f.length) {
                            var h, k;
                            "beforeSetClass" === g ? (h = s(a, "removeClass",
                                d, e, "beforeRemoveClass"), k = s(a, "addClass", d, e, "beforeAddClass")) : "setClass" === g && (h = s(a, "removeClass", d, e, "removeClass"), k = s(a, "addClass", d, e, "addClass"));
                            h && (f = f.concat(h));
                            k && (f = f.concat(k))
                        }
                        if (0 !== f.length) return function (a) {
                            var b = [];
                            f.length && q(f, function (a) {
                                b.push(a())
                            });
                            b.length ? c.all(b, a) : a();
                            return function (a) {
                                q(b, function (b) {
                                    a ? b.cancel() : b.end()
                                })
                            }
                        }
                    }

                    var v = !1;
                    3 === arguments.length && ca(d) && (u = d, d = null);
                    u = oa(u);
                    d || (d = a.attr("class") || "", u.addClass && (d += " " + u.addClass), u.removeClass && (d += " " +
                        u.removeClass));
                    var h = u.addClass, H = u.removeClass, y = e(d), k, E;
                    if (y.length) {
                        var I, J;
                        "leave" == b ? (J = "leave", I = "afterLeave") : (J = "before" + b.charAt(0).toUpperCase() + b.substr(1), I = b);
                        "enter" !== b && "move" !== b && (k = A(a, b, u, y, J));
                        E = A(a, b, u, y, I)
                    }
                    if (k || E) {
                        var n;
                        return {
                            $$willAnimate: !0, end: function () {
                                n ? n.end() : (v = !0, l(), ha(a, u), n = new c, n.complete(!0));
                                return n
                            }, start: function () {
                                function b(c) {
                                    v = !0;
                                    l();
                                    ha(a, u);
                                    n.complete(c)
                                }

                                if (n) return n;
                                n = new c;
                                var d, e = [];
                                k && e.push(function (a) {
                                    d = k(a)
                                });
                                e.length ? e.push(function (a) {
                                    l();
                                    a(!0)
                                }) : l();
                                E && e.push(function (a) {
                                    d = E(a)
                                });
                                n.setHost({
                                    end: function () {
                                        v || ((d || O)(void 0), b(void 0))
                                    }, cancel: function () {
                                        v || ((d || O)(!0), b(!0))
                                    }
                                });
                                c.chain(e, b);
                                return n
                            }
                        }
                    }
                }
            }]
        }]).provider("$$animateJsDriver", ["$$animationProvider", function (a) {
        a.drivers.push("$$animateJsDriver");
        this.$get = ["$$animateJs", "$$AnimateRunner", function (a, c) {
            function d(c) {
                return a(c.element, c.event, c.classes, c.options)
            }

            return function (a) {
                if (a.from && a.to) {
                    var b = d(a.from), r = d(a.to);
                    if (b || r) return {
                        start: function () {
                            function a() {
                                return function () {
                                    q(d,
                                        function (a) {
                                            a.end()
                                        })
                                }
                            }

                            var d = [];
                            b && d.push(b.start());
                            r && d.push(r.start());
                            c.all(d, function (a) {
                                e.complete(a)
                            });
                            var e = new c({end: a(), cancel: a()});
                            return e
                        }
                    }
                } else return d(a)
            }
        }]
    }])
})(window, window.angular);
//# sourceMappingURL=angular-animate.min.js.map

/*!
 * ionic.bundle.js is a concatenation of:
 * ionic.js, angular.js, angular-animate.js,
 * angular-sanitize.js, angular-ui-router.js,
 * and ionic-angular.js
 */

/*
 AngularJS v1.5.3
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function (A, e, B) {
    'use strict';

    function C(a) {
        var c = [];
        v(c, e.noop).chars(a);
        return c.join("")
    }

    function h(a, c) {
        var b = {}, d = a.split(","), l;
        for (l = 0; l < d.length; l++) b[c ? e.lowercase(d[l]) : d[l]] = !0;
        return b
    }

    function D(a, c) {
        null === a || a === B ? a = "" : "string" !== typeof a && (a = "" + a);
        g.innerHTML = a;
        var b = 5;
        do {
            if (0 === b) throw w("uinput");
            b--;
            11 >= document.documentMode && n(g);
            a = g.innerHTML;
            g.innerHTML = a
        } while (a !== g.innerHTML);
        for (b = g.firstChild; b;) {
            switch (b.nodeType) {
                case 1:
                    c.start(b.nodeName.toLowerCase(), E(b.attributes));
                    break;
                case 3:
                    c.chars(b.textContent)
            }
            var d;
            if (!(d = b.firstChild) && (1 == b.nodeType && c.end(b.nodeName.toLowerCase()), d = b.nextSibling, !d)) for (; null == d;) {
                b = b.parentNode;
                if (b === g) break;
                d = b.nextSibling;
                1 == b.nodeType && c.end(b.nodeName.toLowerCase())
            }
            b = d
        }
        for (; b = g.firstChild;) g.removeChild(b)
    }

    function E(a) {
        for (var c = {}, b = 0, d = a.length; b < d; b++) {
            var l = a[b];
            c[l.name] = l.value
        }
        return c
    }

    function x(a) {
        return a.replace(/&/g, "&amp;").replace(F, function (a) {
            var b = a.charCodeAt(0);
            a = a.charCodeAt(1);
            return "&#" + (1024 * (b - 55296) +
                (a - 56320) + 65536) + ";"
        }).replace(G, function (a) {
            return "&#" + a.charCodeAt(0) + ";"
        }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
    }

    function v(a, c) {
        var b = !1, d = e.bind(a, a.push);
        return {
            start: function (a, f) {
                a = e.lowercase(a);
                !b && H[a] && (b = a);
                b || !0 !== t[a] || (d("<"), d(a), e.forEach(f, function (b, f) {
                    var g = e.lowercase(f), h = "img" === a && "src" === g || "background" === g;
                    !0 !== I[g] || !0 === y[g] && !c(b, h) || (d(" "), d(f), d('="'), d(x(b)), d('"'))
                }), d(">"))
            }, end: function (a) {
                a = e.lowercase(a);
                b || !0 !== t[a] || !0 === z[a] || (d("</"), d(a), d(">"));
                a ==
                b && (b = !1)
            }, chars: function (a) {
                b || d(x(a))
            }
        }
    }

    function n(a) {
        if (a.nodeType === Node.ELEMENT_NODE) for (var c = a.attributes, b = 0, d = c.length; b < d; b++) {
            var e = c[b], f = e.name.toLowerCase();
            if ("xmlns:ns1" === f || 0 === f.indexOf("ns1:")) a.removeAttributeNode(e), b--, d--
        }
        (c = a.firstChild) && n(c);
        (c = a.nextSibling) && n(c)
    }

    var w = e.$$minErr("$sanitize"), F = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g, G = /([^\#-~ |!])/g,
        z = h("area,br,col,hr,img,wbr"), q = h("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"), k = h("rp,rt"),
        u = e.extend({}, k, q), q = e.extend({},
        q, h("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),
        k = e.extend({}, k, h("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
        J = h("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),
        H = h("script,style"), t = e.extend({}, z, q, k, u), y = h("background,cite,href,longdesc,src,xlink:href"),
        u = h("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),
        k = h("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
            !0), I = e.extend({}, y, k, u), g;
    (function (a) {
        if (a.document && a.document.implementation) a = a.document.implementation.createHTMLDocument("inert"); else throw w("noinert");
        var c = (a.documentElement || a.getDocumentElement()).getElementsByTagName("body");
        1 === c.length ? g = c[0] : (c = a.createElement("html"), g = a.createElement("body"), c.appendChild(g), a.appendChild(c))
    })(A);
    e.module("ngSanitize", []).provider("$sanitize", function () {
        var a = !1;
        this.$get = ["$$sanitizeUri", function (c) {
            a && e.extend(t, J);
            return function (a) {
                var d =
                    [];
                D(a, v(d, function (a, b) {
                    return !/^unsafe:/.test(c(a, b))
                }));
                return d.join("")
            }
        }];
        this.enableSvg = function (c) {
            return e.isDefined(c) ? (a = c, this) : a
        }
    });
    e.module("ngSanitize").filter("linky", ["$sanitize", function (a) {
        var c = /((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
            b = /^mailto:/i, d = e.$$minErr("linky"), g = e.isString;
        return function (f, h, m) {
            function k(a) {
                a && p.push(C(a))
            }

            function q(a, b) {
                var c;
                p.push("<a ");
                e.isFunction(m) && (m = m(a));
                if (e.isObject(m)) for (c in m) p.push(c +
                    '="' + m[c] + '" '); else m = {};
                !e.isDefined(h) || "target" in m || p.push('target="', h, '" ');
                p.push('href="', a.replace(/"/g, "&quot;"), '">');
                k(b);
                p.push("</a>")
            }

            if (null == f || "" === f) return f;
            if (!g(f)) throw d("notstring", f);
            for (var r = f, p = [], s, n; f = r.match(c);) s = f[0], f[2] || f[4] || (s = (f[3] ? "http://" : "mailto:") + s), n = f.index, k(r.substr(0, n)), q(s, f[0].replace(b, "")), r = r.substring(n + f[0].length);
            k(r);
            return a(p.join(""))
        }
    }])
})(window, window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

/*!
 * ionic.bundle.js is a concatenation of:
 * ionic.js, angular.js, angular-animate.js,
 * angular-sanitize.js, angular-ui-router.js,
 * and ionic-angular.js
 */

/**
 * State-based routing for AngularJS
 * @version v0.2.13
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined" != typeof module && "undefined" != typeof exports && module.exports === exports && (module.exports = "ui.router"), function (a, b, c) {
    "use strict";

    function d(a, b) {
        return M(new (M(function () {
        }, {prototype: a})), b)
    }

    function e(a) {
        return L(arguments, function (b) {
            b !== a && L(b, function (b, c) {
                a.hasOwnProperty(c) || (a[c] = b)
            })
        }), a
    }

    function f(a, b) {
        var c = [];
        for (var d in a.path) {
            if (a.path[d] !== b.path[d]) break;
            c.push(a.path[d])
        }
        return c
    }

    function g(a) {
        if (Object.keys) return Object.keys(a);
        var c = [];
        return b.forEach(a, function (a, b) {
            c.push(b)
        }), c
    }

    function h(a, b) {
        if (Array.prototype.indexOf) return a.indexOf(b, Number(arguments[2]) || 0);
        var c = a.length >>> 0, d = Number(arguments[2]) || 0;
        for (d = 0 > d ? Math.ceil(d) : Math.floor(d), 0 > d && (d += c); c > d; d++) if (d in a && a[d] === b) return d;
        return -1
    }

    function i(a, b, c, d) {
        var e, i = f(c, d), j = {}, k = [];
        for (var l in i) if (i[l].params && (e = g(i[l].params), e.length)) for (var m in e) h(k, e[m]) >= 0 || (k.push(e[m]), j[e[m]] = a[e[m]]);
        return M({}, j, b)
    }

    function j(a, b, c) {
        if (!c) {
            c = [];
            for (var d in a) c.push(d)
        }
        for (var e = 0; e < c.length; e++) {
            var f = c[e];
            if (a[f] != b[f]) return !1
        }
        return !0
    }

    function k(a, b) {
        var c = {};
        return L(a, function (a) {
            c[a] = b[a]
        }), c
    }

    function l(a) {
        var b = {}, c = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));
        for (var d in a) -1 == h(c, d) && (b[d] = a[d]);
        return b
    }

    function m(a, b) {
        var c = K(a), d = c ? [] : {};
        return L(a, function (a, e) {
            b(a, e) && (d[c ? d.length : e] = a)
        }), d
    }

    function n(a, b) {
        var c = K(a) ? [] : {};
        return L(a, function (a, d) {
            c[d] = b(a, d)
        }), c
    }

    function o(a, b) {
        var d = 1, f = 2, i = {}, j = [], k = i, m = M(a.when(i), {$$promises: i, $$values: i});
        this.study = function (i) {
            function n(a, c) {
                if (s[c] !== f) {
                    if (r.push(c), s[c] === d) throw r.splice(0, h(r, c)), new Error("Cyclic dependency: " + r.join(" -> "));
                    if (s[c] = d, I(a)) q.push(c, [function () {
                        return b.get(a)
                    }], j); else {
                        var e = b.annotate(a);
                        L(e, function (a) {
                            a !== c && i.hasOwnProperty(a) && n(i[a], a)
                        }), q.push(c, a, e)
                    }
                    r.pop(), s[c] = f
                }
            }

            function o(a) {
                return J(a) && a.then && a.$$promises
            }

            if (!J(i)) throw new Error("'invocables' must be an object");
            var p = g(i || {}), q = [], r = [], s = {};
            return L(i, n), i = r = s = null, function (d, f, g) {
                function h() {
                    --u || (v || e(t, f.$$values), r.$$values = t, r.$$promises = r.$$promises || !0, delete r.$$inheritedValues, n.resolve(t))
                }

                function i(a) {
                    r.$$failure = a, n.reject(a)
                }

                function j(c, e, f) {
                    function j(a) {
                        l.reject(a), i(a)
                    }

                    function k() {
                        if (!G(r.$$failure)) try {
                            l.resolve(b.invoke(e, g, t)), l.promise.then(function (a) {
                                t[c] = a, h()
                            }, j)
                        } catch (a) {
                            j(a)
                        }
                    }

                    var l = a.defer(), m = 0;
                    L(f, function (a) {
                        s.hasOwnProperty(a) && !d.hasOwnProperty(a) && (m++, s[a].then(function (b) {
                            t[a] = b, --m || k()
                        }, j))
                    }), m || k(), s[c] = l.promise
                }

                if (o(d) && g === c && (g = f, f = d, d = null), d) {
                    if (!J(d)) throw new Error("'locals' must be an object")
                } else d = k;
                if (f) {
                    if (!o(f)) throw new Error("'parent' must be a promise returned by $resolve.resolve()")
                } else f = m;
                var n = a.defer(), r = n.promise, s = r.$$promises = {}, t = M({}, d), u = 1 + q.length / 3, v = !1;
                if (G(f.$$failure)) return i(f.$$failure), r;
                f.$$inheritedValues && e(t, l(f.$$inheritedValues, p)), M(s, f.$$promises), f.$$values ? (v = e(t, l(f.$$values, p)), r.$$inheritedValues = l(f.$$values, p), h()) : (f.$$inheritedValues && (r.$$inheritedValues = l(f.$$inheritedValues, p)), f.then(h, i));
                for (var w = 0, x = q.length; x > w; w += 3) d.hasOwnProperty(q[w]) ? h() : j(q[w], q[w + 1], q[w + 2]);
                return r
            }
        }, this.resolve = function (a, b, c, d) {
            return this.study(a)(b, c, d)
        }
    }

    function p(a, b, c) {
        this.fromConfig = function (a, b, c) {
            return G(a.template) ? this.fromString(a.template, b) : G(a.templateUrl) ? this.fromUrl(a.templateUrl, b) : G(a.templateProvider) ? this.fromProvider(a.templateProvider, b, c) : null
        }, this.fromString = function (a, b) {
            return H(a) ? a(b) : a
        }, this.fromUrl = function (c, d) {
            return H(c) && (c = c(d)), null == c ? null : a.get(c, {
                cache: b,
                headers: {Accept: "text/html"}
            }).then(function (a) {
                return a.data
            })
        }, this.fromProvider = function (a, b, d) {
            return c.invoke(a, null, d || {params: b})
        }
    }

    function q(a, b, e) {
        function f(b, c, d, e) {
            if (q.push(b), o[b]) return o[b];
            if (!/^\w+(-+\w+)*(?:\[\])?$/.test(b)) throw new Error("Invalid parameter name '" + b + "' in pattern '" + a + "'");
            if (p[b]) throw new Error("Duplicate parameter name '" + b + "' in pattern '" + a + "'");
            return p[b] = new O.Param(b, c, d, e), p[b]
        }

        function g(a, b, c) {
            var d = ["", ""], e = a.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
            if (!b) return e;
            switch (c) {
                case!1:
                    d = ["(", ")"];
                    break;
                case!0:
                    d = ["?(", ")?"];
                    break;
                default:
                    d = ["(" + c + "|", ")?"]
            }
            return e + d[0] + b + d[1]
        }

        function h(c, e) {
            var f, g, h, i, j;
            return f = c[2] || c[3], j = b.params[f], h = a.substring(m, c.index), g = e ? c[4] : c[4] || ("*" == c[1] ? ".*" : null), i = O.type(g || "string") || d(O.type("string"), {pattern: new RegExp(g)}), {
                id: f,
                regexp: g,
                segment: h,
                type: i,
                cfg: j
            }
        }

        b = M({params: {}}, J(b) ? b : {});
        var i, j = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,
            k = /([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, l = "^", m = 0,
            n = this.segments = [], o = e ? e.params : {}, p = this.params = e ? e.params.$$new() : new O.ParamSet,
            q = [];
        this.source = a;
        for (var r, s, t; (i = j.exec(a)) && (r = h(i, !1), !(r.segment.indexOf("?") >= 0));) s = f(r.id, r.type, r.cfg, "path"), l += g(r.segment, s.type.pattern.source, s.squash), n.push(r.segment), m = j.lastIndex;
        t = a.substring(m);
        var u = t.indexOf("?");
        if (u >= 0) {
            var v = this.sourceSearch = t.substring(u);
            if (t = t.substring(0, u), this.sourcePath = a.substring(0, m + u), v.length > 0) for (m = 0; i = k.exec(v);) r = h(i, !0), s = f(r.id, r.type, r.cfg, "search"), m = j.lastIndex
        } else this.sourcePath = a, this.sourceSearch = "";
        l += g(t) + (b.strict === !1 ? "/?" : "") + "$", n.push(t), this.regexp = new RegExp(l, b.caseInsensitive ? "i" : c), this.prefix = n[0], this.$$paramNames = q
    }

    function r(a) {
        M(this, a)
    }

    function s() {
        function a(a) {
            return null != a ? a.toString().replace(/\//g, "%2F") : a
        }

        function e(a) {
            return null != a ? a.toString().replace(/%2F/g, "/") : a
        }

        function f(a) {
            return this.pattern.test(a)
        }

        function i() {
            return {strict: t, caseInsensitive: p}
        }

        function j(a) {
            return H(a) || K(a) && H(a[a.length - 1])
        }

        function k() {
            for (; x.length;) {
                var a = x.shift();
                if (a.pattern) throw new Error("You cannot override a type's .pattern at runtime.");
                b.extend(v[a.name], o.invoke(a.def))
            }
        }

        function l(a) {
            M(this, a || {})
        }

        O = this;
        var o, p = !1, t = !0, u = !1, v = {}, w = !0, x = [], y = {
            string: {encode: a, decode: e, is: f, pattern: /[^/]*/},
            "int": {
                encode: a, decode: function (a) {
                    return parseInt(a, 10)
                }, is: function (a) {
                    return G(a) && this.decode(a.toString()) === a
                }, pattern: /\d+/
            },
            bool: {
                encode: function (a) {
                    return a ? 1 : 0
                }, decode: function (a) {
                    return 0 !== parseInt(a, 10)
                }, is: function (a) {
                    return a === !0 || a === !1
                }, pattern: /0|1/
            },
            date: {
                encode: function (a) {
                    return this.is(a) ? [a.getFullYear(), ("0" + (a.getMonth() + 1)).slice(-2), ("0" + a.getDate()).slice(-2)].join("-") : c
                },
                decode: function (a) {
                    if (this.is(a)) return a;
                    var b = this.capture.exec(a);
                    return b ? new Date(b[1], b[2] - 1, b[3]) : c
                },
                is: function (a) {
                    return a instanceof Date && !isNaN(a.valueOf())
                },
                equals: function (a, b) {
                    return this.is(a) && this.is(b) && a.toISOString() === b.toISOString()
                },
                pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,
                capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/
            },
            json: {encode: b.toJson, decode: b.fromJson, is: b.isObject, equals: b.equals, pattern: /[^/]*/},
            any: {encode: b.identity, decode: b.identity, is: b.identity, equals: b.equals, pattern: /.*/}
        };
        s.$$getDefaultValue = function (a) {
            if (!j(a.value)) return a.value;
            if (!o) throw new Error("Injectable functions cannot be called at configuration time");
            return o.invoke(a.value)
        }, this.caseInsensitive = function (a) {
            return G(a) && (p = a), p
        }, this.strictMode = function (a) {
            return G(a) && (t = a), t
        }, this.defaultSquashPolicy = function (a) {
            if (!G(a)) return u;
            if (a !== !0 && a !== !1 && !I(a)) throw new Error("Invalid squash policy: " + a + ". Valid policies: false, true, arbitrary-string");
            return u = a, a
        }, this.compile = function (a, b) {
            return new q(a, M(i(), b))
        }, this.isMatcher = function (a) {
            if (!J(a)) return !1;
            var b = !0;
            return L(q.prototype, function (c, d) {
                H(c) && (b = b && G(a[d]) && H(a[d]))
            }), b
        }, this.type = function (a, b, c) {
            if (!G(b)) return v[a];
            if (v.hasOwnProperty(a)) throw new Error("A type named '" + a + "' has already been defined.");
            return v[a] = new r(M({name: a}, b)), c && (x.push({name: a, def: c}), w || k()), this
        }, L(y, function (a, b) {
            v[b] = new r(M({name: b}, a))
        }), v = d(v, {}), this.$get = ["$injector", function (a) {
            return o = a, w = !1, k(), L(y, function (a, b) {
                v[b] || (v[b] = new r(a))
            }), this
        }], this.Param = function (a, b, d, e) {
            function f(a) {
                var b = J(a) ? g(a) : [],
                    c = -1 === h(b, "value") && -1 === h(b, "type") && -1 === h(b, "squash") && -1 === h(b, "array");
                return c && (a = {value: a}), a.$$fn = j(a.value) ? a.value : function () {
                    return a.value
                }, a
            }

            function i(b, c, d) {
                if (b.type && c) throw new Error("Param '" + a + "' has two type configurations.");
                return c ? c : b.type ? b.type instanceof r ? b.type : new r(b.type) : "config" === d ? v.any : v.string
            }

            function k() {
                var b = {array: "search" === e ? "auto" : !1}, c = a.match(/\[\]$/) ? {array: !0} : {};
                return M(b, c, d).array
            }

            function l(a, b) {
                var c = a.squash;
                if (!b || c === !1) return !1;
                if (!G(c) || null == c) return u;
                if (c === !0 || I(c)) return c;
                throw new Error("Invalid squash policy: '" + c + "'. Valid policies: false, true, or arbitrary string")
            }

            function p(a, b, d, e) {
                var f, g, i = [{from: "", to: d || b ? c : ""}, {from: null, to: d || b ? c : ""}];
                return f = K(a.replace) ? a.replace : [], I(e) && f.push({from: e, to: c}), g = n(f, function (a) {
                    return a.from
                }), m(i, function (a) {
                    return -1 === h(g, a.from)
                }).concat(f)
            }

            function q() {
                if (!o) throw new Error("Injectable functions cannot be called at configuration time");
                return o.invoke(d.$$fn)
            }

            function s(a) {
                function b(a) {
                    return function (b) {
                        return b.from === a
                    }
                }

                function c(a) {
                    var c = n(m(w.replace, b(a)), function (a) {
                        return a.to
                    });
                    return c.length ? c[0] : a
                }

                return a = c(a), G(a) ? w.type.decode(a) : q()
            }

            function t() {
                return "{Param:" + a + " " + b + " squash: '" + z + "' optional: " + y + "}"
            }

            var w = this;
            d = f(d), b = i(d, b, e);
            var x = k();
            b = x ? b.$asArray(x, "search" === e) : b, "string" !== b.name || x || "path" !== e || d.value !== c || (d.value = "");
            var y = d.value !== c, z = l(d, y), A = p(d, x, y, z);
            M(this, {
                id: a,
                type: b,
                location: e,
                array: x,
                squash: z,
                replace: A,
                isOptional: y,
                value: s,
                dynamic: c,
                config: d,
                toString: t
            })
        }, l.prototype = {
            $$new: function () {
                return d(this, M(new l, {$$parent: this}))
            }, $$keys: function () {
                for (var a = [], b = [], c = this, d = g(l.prototype); c;) b.push(c), c = c.$$parent;
                return b.reverse(), L(b, function (b) {
                    L(g(b), function (b) {
                        -1 === h(a, b) && -1 === h(d, b) && a.push(b)
                    })
                }), a
            }, $$values: function (a) {
                var b = {}, c = this;
                return L(c.$$keys(), function (d) {
                    b[d] = c[d].value(a && a[d])
                }), b
            }, $$equals: function (a, b) {
                var c = !0, d = this;
                return L(d.$$keys(), function (e) {
                    var f = a && a[e], g = b && b[e];
                    d[e].type.equals(f, g) || (c = !1)
                }), c
            }, $$validates: function (a) {
                var b, c, d, e = !0, f = this;
                return L(this.$$keys(), function (g) {
                    d = f[g], c = a[g], b = !c && d.isOptional, e = e && (b || !!d.type.is(c))
                }), e
            }, $$parent: c
        }, this.ParamSet = l
    }

    function t(a, d) {
        function e(a) {
            var b = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);
            return null != b ? b[1].replace(/\\(.)/g, "$1") : ""
        }

        function f(a, b) {
            return a.replace(/\$(\$|\d{1,2})/, function (a, c) {
                return b["$" === c ? 0 : Number(c)]
            })
        }

        function g(a, b, c) {
            if (!c) return !1;
            var d = a.invoke(b, b, {$match: c});
            return G(d) ? d : !0
        }

        function h(d, e, f, g) {
            function h(a, b, c) {
                return "/" === p ? a : b ? p.slice(0, -1) + a : c ? p.slice(1) + a : a
            }

            function m(a) {
                function b(a) {
                    var b = a(f, d);
                    return b ? (I(b) && d.replace().url(b), !0) : !1
                }

                if (!a || !a.defaultPrevented) {
                    var e = o && d.url() === o;
                    if (o = c, e) return !0;
                    var g, h = j.length;
                    for (g = 0; h > g; g++) if (b(j[g])) return;
                    k && b(k)
                }
            }

            function n() {
                return i = i || e.$on("$locationChangeSuccess", m)
            }

            var o, p = g.baseHref(), q = d.url();
            return l || n(), {
                sync: function () {
                    m()
                }, listen: function () {
                    return n()
                }, update: function (a) {
                    return a ? void (q = d.url()) : void (d.url() !== q && (d.url(q), d.replace()))
                }, push: function (a, b, e) {
                    d.url(a.format(b || {})), o = e && e.$$avoidResync ? d.url() : c, e && e.replace && d.replace()
                }, href: function (c, e, f) {
                    if (!c.validates(e)) return null;
                    var g = a.html5Mode();
                    b.isObject(g) && (g = g.enabled);
                    var i = c.format(e);
                    if (f = f || {}, g || null === i || (i = "#" + a.hashPrefix() + i), i = h(i, g, f.absolute), !f.absolute || !i) return i;
                    var j = !g && i ? "/" : "", k = d.port();
                    return k = 80 === k || 443 === k ? "" : ":" + k, [d.protocol(), "://", d.host(), k, j, i].join("")
                }
            }
        }

        var i, j = [], k = null, l = !1;
        this.rule = function (a) {
            if (!H(a)) throw new Error("'rule' must be a function");
            return j.push(a), this
        }, this.otherwise = function (a) {
            if (I(a)) {
                var b = a;
                a = function () {
                    return b
                }
            } else if (!H(a)) throw new Error("'rule' must be a function");
            return k = a, this
        }, this.when = function (a, b) {
            var c, h = I(b);
            if (I(a) && (a = d.compile(a)), !h && !H(b) && !K(b)) throw new Error("invalid 'handler' in when()");
            var i = {
                matcher: function (a, b) {
                    return h && (c = d.compile(b), b = ["$match", function (a) {
                        return c.format(a)
                    }]), M(function (c, d) {
                        return g(c, b, a.exec(d.path(), d.search()))
                    }, {prefix: I(a.prefix) ? a.prefix : ""})
                }, regex: function (a, b) {
                    if (a.global || a.sticky) throw new Error("when() RegExp must not be global or sticky");
                    return h && (c = b, b = ["$match", function (a) {
                        return f(c, a)
                    }]), M(function (c, d) {
                        return g(c, b, a.exec(d.path()))
                    }, {prefix: e(a)})
                }
            }, j = {matcher: d.isMatcher(a), regex: a instanceof RegExp};
            for (var k in j) if (j[k]) return this.rule(i[k](a, b));
            throw new Error("invalid 'what' in when()")
        }, this.deferIntercept = function (a) {
            a === c && (a = !0), l = a
        }, this.$get = h, h.$inject = ["$location", "$rootScope", "$injector", "$browser"]
    }

    function u(a, e) {
        function f(a) {
            return 0 === a.indexOf(".") || 0 === a.indexOf("^")
        }

        function l(a, b) {
            if (!a) return c;
            var d = I(a), e = d ? a : a.name, g = f(e);
            if (g) {
                if (!b) throw new Error("No reference point given for path '" + e + "'");
                b = l(b);
                for (var h = e.split("."), i = 0, j = h.length, k = b; j > i; i++) if ("" !== h[i] || 0 !== i) {
                    if ("^" !== h[i]) break;
                    if (!k.parent) throw new Error("Path '" + e + "' not valid for state '" + b.name + "'");
                    k = k.parent
                } else k = b;
                h = h.slice(i).join("."), e = k.name + (k.name && h ? "." : "") + h
            }
            var m = y[e];
            return !m || !d && (d || m !== a && m.self !== a) ? c : m
        }

        function m(a, b) {
            z[a] || (z[a] = []), z[a].push(b)
        }

        function o(a) {
            for (var b = z[a] || []; b.length;) p(b.shift())
        }

        function p(b) {
            b = d(b, {
                self: b, resolve: b.resolve || {}, toString: function () {
                    return this.name
                }
            });
            var c = b.name;
            if (!I(c) || c.indexOf("@") >= 0) throw new Error("State must have a valid name");
            if (y.hasOwnProperty(c)) throw new Error("State '" + c + "'' is already defined");
            var e = -1 !== c.indexOf(".") ? c.substring(0, c.lastIndexOf(".")) : I(b.parent) ? b.parent : J(b.parent) && I(b.parent.name) ? b.parent.name : "";
            if (e && !y[e]) return m(e, b.self);
            for (var f in B) H(B[f]) && (b[f] = B[f](b, B.$delegates[f]));
            return y[c] = b, !b[A] && b.url && a.when(b.url, ["$match", "$stateParams", function (a, c) {
                x.$current.navigable == b && j(a, c) || x.transitionTo(b, a, {inherit: !0, location: !1})
            }]), o(c), b
        }

        function q(a) {
            return a.indexOf("*") > -1
        }

        function r(a) {
            var b = a.split("."), c = x.$current.name.split(".");
            if ("**" === b[0] && (c = c.slice(h(c, b[1])), c.unshift("**")), "**" === b[b.length - 1] && (c.splice(h(c, b[b.length - 2]) + 1, Number.MAX_VALUE), c.push("**")), b.length != c.length) return !1;
            for (var d = 0, e = b.length; e > d; d++) "*" === b[d] && (c[d] = "*");
            return c.join("") === b.join("")
        }

        function s(a, b) {
            return I(a) && !G(b) ? B[a] : H(b) && I(a) ? (B[a] && !B.$delegates[a] && (B.$delegates[a] = B[a]), B[a] = b, this) : this
        }

        function t(a, b) {
            return J(a) ? b = a : b.name = a, p(b), this
        }

        function u(a, e, f, h, m, o, p) {
            function s(b, c, d, f) {
                var g = a.$broadcast("$stateNotFound", b, c, d);
                if (g.defaultPrevented) return p.update(), B;
                if (!g.retry) return null;
                if (f.$retry) return p.update(), C;
                var h = x.transition = e.when(g.retry);
                return h.then(function () {
                    return h !== x.transition ? u : (b.options.$retry = !0, x.transitionTo(b.to, b.toParams, b.options))
                }, function () {
                    return B
                }), p.update(), h
            }

            function t(a, c, d, g, i, j) {
                var l = d ? c : k(a.params.$$keys(), c), n = {$stateParams: l};
                i.resolve = m.resolve(a.resolve, n, i.resolve, a);
                var o = [i.resolve.then(function (a) {
                    i.globals = a
                })];
                return g && o.push(g), L(a.views, function (c, d) {
                    var e = c.resolve && c.resolve !== a.resolve ? c.resolve : {};
                    e.$template = [function () {
                        return f.load(d, {view: c, locals: n, params: l, notify: j.notify}) || ""
                    }], o.push(m.resolve(e, n, i.resolve, a).then(function (f) {
                        if (H(c.controllerProvider) || K(c.controllerProvider)) {
                            var g = b.extend({}, e, n);
                            f.$$controller = h.invoke(c.controllerProvider, null, g)
                        } else f.$$controller = c.controller;
                        f.$$state = a, f.$$controllerAs = c.controllerAs, i[d] = f
                    }))
                }), e.all(o).then(function () {
                    return i
                })
            }

            var u = e.reject(new Error("transition superseded")), z = e.reject(new Error("transition prevented")),
                B = e.reject(new Error("transition aborted")), C = e.reject(new Error("transition failed"));
            return w.locals = {resolve: null, globals: {$stateParams: {}}}, x = {
                params: {},
                current: w.self,
                $current: w,
                transition: null
            }, x.reload = function () {
                return x.transitionTo(x.current, o, {reload: !0, inherit: !1, notify: !0})
            }, x.go = function (a, b, c) {
                return x.transitionTo(a, b, M({inherit: !0, relative: x.$current}, c))
            }, x.transitionTo = function (b, c, f) {
                c = c || {}, f = M({
                    location: !0,
                    inherit: !1,
                    relative: null,
                    notify: !0,
                    reload: !1,
                    $retry: !1
                }, f || {});
                var g, j = x.$current, m = x.params, n = j.path, q = l(b, f.relative);
                if (!G(q)) {
                    var r = {to: b, toParams: c, options: f}, y = s(r, j.self, m, f);
                    if (y) return y;
                    if (b = r.to, c = r.toParams, f = r.options, q = l(b, f.relative), !G(q)) {
                        if (!f.relative) throw new Error("No such state '" + b + "'");
                        throw new Error("Could not resolve '" + b + "' from state '" + f.relative + "'")
                    }
                }
                if (q[A]) throw new Error("Cannot transition to abstract state '" + b + "'");
                if (f.inherit && (c = i(o, c || {}, x.$current, q)), !q.params.$$validates(c)) return C;
                c = q.params.$$values(c), b = q;
                var B = b.path, D = 0, E = B[D], F = w.locals, H = [];
                if (!f.reload) for (; E && E === n[D] && E.ownParams.$$equals(c, m);) F = H[D] = E.locals, D++, E = B[D];
                if (v(b, j, F, f)) return b.self.reloadOnSearch !== !1 && p.update(), x.transition = null, e.when(x.current);
                if (c = k(b.params.$$keys(), c || {}), f.notify && a.$broadcast("$stateChangeStart", b.self, c, j.self, m).defaultPrevented) return p.update(), z;
                for (var I = e.when(F), J = D; J < B.length; J++, E = B[J]) F = H[J] = d(F), I = t(E, c, E === b, I, F, f);
                var K = x.transition = I.then(function () {
                    var d, e, g;
                    if (x.transition !== K) return u;
                    for (d = n.length - 1; d >= D; d--) g = n[d], g.self.onExit && h.invoke(g.self.onExit, g.self, g.locals.globals), g.locals = null;
                    for (d = D; d < B.length; d++) e = B[d], e.locals = H[d], e.self.onEnter && h.invoke(e.self.onEnter, e.self, e.locals.globals);
                    return x.transition !== K ? u : (x.$current = b, x.current = b.self, x.params = c, N(x.params, o), x.transition = null, f.location && b.navigable && p.push(b.navigable.url, b.navigable.locals.globals.$stateParams, {
                        $$avoidResync: !0,
                        replace: "replace" === f.location
                    }), f.notify && a.$broadcast("$stateChangeSuccess", b.self, c, j.self, m), p.update(!0), x.current)
                }, function (d) {
                    return x.transition !== K ? u : (x.transition = null, g = a.$broadcast("$stateChangeError", b.self, c, j.self, m, d), g.defaultPrevented || p.update(), e.reject(d))
                });
                return K
            }, x.is = function (a, b, d) {
                d = M({relative: x.$current}, d || {});
                var e = l(a, d.relative);
                return G(e) ? x.$current !== e ? !1 : b ? j(e.params.$$values(b), o) : !0 : c
            }, x.includes = function (a, b, d) {
                if (d = M({relative: x.$current}, d || {}), I(a) && q(a)) {
                    if (!r(a)) return !1;
                    a = x.$current.name
                }
                var e = l(a, d.relative);
                return G(e) ? G(x.$current.includes[e.name]) ? b ? j(e.params.$$values(b), o, g(b)) : !0 : !1 : c
            }, x.href = function (a, b, d) {
                d = M({lossy: !0, inherit: !0, absolute: !1, relative: x.$current}, d || {});
                var e = l(a, d.relative);
                if (!G(e)) return null;
                d.inherit && (b = i(o, b || {}, x.$current, e));
                var f = e && d.lossy ? e.navigable : e;
                return f && f.url !== c && null !== f.url ? p.href(f.url, k(e.params.$$keys(), b || {}), {absolute: d.absolute}) : null
            }, x.get = function (a, b) {
                if (0 === arguments.length) return n(g(y), function (a) {
                    return y[a].self
                });
                var c = l(a, b || x.$current);
                return c && c.self ? c.self : null
            }, x
        }

        function v(a, b, c, d) {
            return a !== b || (c !== b.locals || d.reload) && a.self.reloadOnSearch !== !1 ? void 0 : !0
        }

        var w, x, y = {}, z = {}, A = "abstract", B = {
            parent: function (a) {
                if (G(a.parent) && a.parent) return l(a.parent);
                var b = /^(.+)\.[^.]+$/.exec(a.name);
                return b ? l(b[1]) : w
            }, data: function (a) {
                return a.parent && a.parent.data && (a.data = a.self.data = M({}, a.parent.data, a.data)), a.data
            }, url: function (a) {
                var b = a.url, c = {params: a.params || {}};
                if (I(b)) return "^" == b.charAt(0) ? e.compile(b.substring(1), c) : (a.parent.navigable || w).url.concat(b, c);
                if (!b || e.isMatcher(b)) return b;
                throw new Error("Invalid url '" + b + "' in state '" + a + "'")
            }, navigable: function (a) {
                return a.url ? a : a.parent ? a.parent.navigable : null
            }, ownParams: function (a) {
                var b = a.url && a.url.params || new O.ParamSet;
                return L(a.params || {}, function (a, c) {
                    b[c] || (b[c] = new O.Param(c, null, a, "config"))
                }), b
            }, params: function (a) {
                return a.parent && a.parent.params ? M(a.parent.params.$$new(), a.ownParams) : new O.ParamSet
            }, views: function (a) {
                var b = {};
                return L(G(a.views) ? a.views : {"": a}, function (c, d) {
                    d.indexOf("@") < 0 && (d += "@" + a.parent.name), b[d] = c
                }), b
            }, path: function (a) {
                return a.parent ? a.parent.path.concat(a) : []
            }, includes: function (a) {
                var b = a.parent ? M({}, a.parent.includes) : {};
                return b[a.name] = !0, b
            }, $delegates: {}
        };
        w = p({
            name: "",
            url: "^",
            views: null,
            "abstract": !0
        }), w.navigable = null, this.decorator = s, this.state = t, this.$get = u, u.$inject = ["$rootScope", "$q", "$view", "$injector", "$resolve", "$stateParams", "$urlRouter", "$location", "$urlMatcherFactory"]
    }

    function v() {
        function a(a, b) {
            return {
                load: function (c, d) {
                    var e, f = {
                        template: null,
                        controller: null,
                        view: null,
                        locals: null,
                        notify: !0,
                        async: !0,
                        params: {}
                    };
                    return d = M(f, d), d.view && (e = b.fromConfig(d.view, d.params, d.locals)), e && d.notify && a.$broadcast("$viewContentLoading", d), e
                }
            }
        }

        this.$get = a, a.$inject = ["$rootScope", "$templateFactory"]
    }

    function w() {
        var a = !1;
        this.useAnchorScroll = function () {
            a = !0
        }, this.$get = ["$anchorScroll", "$timeout", function (b, c) {
            return a ? b : function (a) {
                c(function () {
                    a[0].scrollIntoView()
                }, 0, !1)
            }
        }]
    }

    function x(a, c, d, e) {
        function f() {
            return c.has ? function (a) {
                return c.has(a) ? c.get(a) : null
            } : function (a) {
                try {
                    return c.get(a)
                } catch (b) {
                    return null
                }
            }
        }

        function g(a, b) {
            var c = function () {
                return {
                    enter: function (a, b, c) {
                        b.after(a), c()
                    }, leave: function (a, b) {
                        a.remove(), b()
                    }
                }
            };
            if (j) return {
                enter: function (a, b, c) {
                    var d = j.enter(a, null, b, c);
                    d && d.then && d.then(c)
                }, leave: function (a, b) {
                    var c = j.leave(a, b);
                    c && c.then && c.then(b)
                }
            };
            if (i) {
                var d = i && i(b, a);
                return {
                    enter: function (a, b, c) {
                        d.enter(a, null, b), c()
                    }, leave: function (a, b) {
                        d.leave(a), b()
                    }
                }
            }
            return c()
        }

        var h = f(), i = h("$animator"), j = h("$animate"), k = {
            restrict: "ECA", terminal: !0, priority: 400, transclude: "element", compile: function (c, f, h) {
                return function (c, f, i) {
                    function j() {
                        l && (l.remove(), l = null), n && (n.$destroy(), n = null), m && (r.leave(m, function () {
                            l = null
                        }), l = m, m = null)
                    }

                    function k(g) {
                        var k, l = z(c, i, f, e), s = l && a.$current && a.$current.locals[l];
                        if (g || s !== o) {
                            k = c.$new(), o = a.$current.locals[l];
                            var t = h(k, function (a) {
                                r.enter(a, f, function () {
                                    n && n.$emit("$viewContentAnimationEnded"), (b.isDefined(q) && !q || c.$eval(q)) && d(a)
                                }), j()
                            });
                            m = t, n = k, n.$emit("$viewContentLoaded"), n.$eval(p)
                        }
                    }

                    var l, m, n, o, p = i.onload || "", q = i.autoscroll, r = g(i, c);
                    c.$on("$stateChangeSuccess", function () {
                        k(!1)
                    }), c.$on("$viewContentLoading", function () {
                        k(!1)
                    }), k(!0)
                }
            }
        };
        return k
    }

    function y(a, b, c, d) {
        return {
            restrict: "ECA", priority: -400, compile: function (e) {
                var f = e.html();
                return function (e, g, h) {
                    var i = c.$current, j = z(e, h, g, d), k = i && i.locals[j];
                    if (k) {
                        g.data("$uiView", {name: j, state: k.$$state}), g.html(k.$template ? k.$template : f);
                        var l = a(g.contents());
                        if (k.$$controller) {
                            k.$scope = e;
                            var m = b(k.$$controller, k);
                            k.$$controllerAs && (e[k.$$controllerAs] = m), g.data("$ngControllerController", m), g.children().data("$ngControllerController", m)
                        }
                        l(e)
                    }
                }
            }
        }
    }

    function z(a, b, c, d) {
        var e = d(b.uiView || b.name || "")(a), f = c.inheritedData("$uiView");
        return e.indexOf("@") >= 0 ? e : e + "@" + (f ? f.state.name : "")
    }

    function A(a, b) {
        var c, d = a.match(/^\s*({[^}]*})\s*$/);
        if (d && (a = b + "(" + d[1] + ")"), c = a.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/), !c || 4 !== c.length) throw new Error("Invalid state ref '" + a + "'");
        return {state: c[1], paramExpr: c[3] || null}
    }

    function B(a) {
        var b = a.parent().inheritedData("$uiView");
        return b && b.state && b.state.name ? b.state : void 0
    }

    function C(a, c) {
        var d = ["location", "inherit", "reload"];
        return {
            restrict: "A", require: ["?^uiSrefActive", "?^uiSrefActiveEq"], link: function (e, f, g, h) {
                var i = A(g.uiSref, a.current.name), j = null, k = B(f) || a.$current, l = null,
                    m = "A" === f.prop("tagName"), n = "FORM" === f[0].nodeName, o = n ? "action" : "href", p = !0,
                    q = {relative: k, inherit: !0}, r = e.$eval(g.uiSrefOpts) || {};
                b.forEach(d, function (a) {
                    a in r && (q[a] = r[a])
                });
                var s = function (c) {
                    if (c && (j = b.copy(c)), p) {
                        l = a.href(i.state, j, q);
                        var d = h[1] || h[0];
                        return d && d.$$setStateInfo(i.state, j), null === l ? (p = !1, !1) : void g.$set(o, l)
                    }
                };
                i.paramExpr && (e.$watch(i.paramExpr, function (a) {
                    a !== j && s(a)
                }, !0), j = b.copy(e.$eval(i.paramExpr))), s(), n || f.bind("click", function (b) {
                    var d = b.which || b.button;
                    if (!(d > 1 || b.ctrlKey || b.metaKey || b.shiftKey || f.attr("target"))) {
                        var e = c(function () {
                            a.go(i.state, j, q)
                        });
                        b.preventDefault();
                        var g = m && !l ? 1 : 0;
                        b.preventDefault = function () {
                            g-- <= 0 && c.cancel(e)
                        }
                    }
                })
            }
        }
    }

    function D(a, b, c) {
        return {
            restrict: "A", controller: ["$scope", "$element", "$attrs", function (b, d, e) {
                function f() {
                    g() ? d.addClass(j) : d.removeClass(j)
                }

                function g() {
                    return "undefined" != typeof e.uiSrefActiveEq ? h && a.is(h.name, i) : h && a.includes(h.name, i)
                }

                var h, i, j;
                j = c(e.uiSrefActiveEq || e.uiSrefActive || "", !1)(b), this.$$setStateInfo = function (b, c) {
                    h = a.get(b, B(d)), i = c, f()
                }, b.$on("$stateChangeSuccess", f)
            }]
        }
    }

    function E(a) {
        var b = function (b) {
            return a.is(b)
        };
        return b.$stateful = !0, b
    }

    function F(a) {
        var b = function (b) {
            return a.includes(b)
        };
        return b.$stateful = !0, b
    }

    var G = b.isDefined, H = b.isFunction, I = b.isString, J = b.isObject, K = b.isArray, L = b.forEach, M = b.extend,
        N = b.copy;
    b.module("ui.router.util", ["ng"]), b.module("ui.router.router", ["ui.router.util"]), b.module("ui.router.state", ["ui.router.router", "ui.router.util"]), b.module("ui.router", ["ui.router.state"]), b.module("ui.router.compat", ["ui.router"]), o.$inject = ["$q", "$injector"], b.module("ui.router.util").service("$resolve", o), p.$inject = ["$http", "$templateCache", "$injector"], b.module("ui.router.util").service("$templateFactory", p);
    var O;
    q.prototype.concat = function (a, b) {
        var c = {caseInsensitive: O.caseInsensitive(), strict: O.strictMode(), squash: O.defaultSquashPolicy()};
        return new q(this.sourcePath + a + this.sourceSearch, M(c, b), this)
    }, q.prototype.toString = function () {
        return this.source
    }, q.prototype.exec = function (a, b) {
        function c(a) {
            function b(a) {
                return a.split("").reverse().join("")
            }

            function c(a) {
                return a.replace(/\\-/, "-")
            }

            var d = b(a).split(/-(?!\\)/), e = n(d, b);
            return n(e, c).reverse()
        }

        var d = this.regexp.exec(a);
        if (!d) return null;
        b = b || {};
        var e, f, g, h = this.parameters(), i = h.length, j = this.segments.length - 1, k = {};
        if (j !== d.length - 1) throw new Error("Unbalanced capture group in route '" + this.source + "'");
        for (e = 0; j > e; e++) {
            g = h[e];
            var l = this.params[g], m = d[e + 1];
            for (f = 0; f < l.replace; f++) l.replace[f].from === m && (m = l.replace[f].to);
            m && l.array === !0 && (m = c(m)), k[g] = l.value(m)
        }
        for (; i > e; e++) g = h[e], k[g] = this.params[g].value(b[g]);
        return k
    }, q.prototype.parameters = function (a) {
        return G(a) ? this.params[a] || null : this.$$paramNames
    }, q.prototype.validates = function (a) {
        return this.params.$$validates(a)
    }, q.prototype.format = function (a) {
        function b(a) {
            return encodeURIComponent(a).replace(/-/g, function (a) {
                return "%5C%" + a.charCodeAt(0).toString(16).toUpperCase()
            })
        }

        a = a || {};
        var c = this.segments, d = this.parameters(), e = this.params;
        if (!this.validates(a)) return null;
        var f, g = !1, h = c.length - 1, i = d.length, j = c[0];
        for (f = 0; i > f; f++) {
            var k = h > f, l = d[f], m = e[l], o = m.value(a[l]), p = m.isOptional && m.type.equals(m.value(), o),
                q = p ? m.squash : !1, r = m.type.encode(o);
            if (k) {
                var s = c[f + 1];
                if (q === !1) null != r && (j += K(r) ? n(r, b).join("-") : encodeURIComponent(r)), j += s; else if (q === !0) {
                    var t = j.match(/\/$/) ? /\/?(.*)/ : /(.*)/;
                    j += s.match(t)[1]
                } else I(q) && (j += q + s)
            } else {
                if (null == r || p && q !== !1) continue;
                K(r) || (r = [r]), r = n(r, encodeURIComponent).join("&" + l + "="), j += (g ? "&" : "?") + (l + "=" + r), g = !0
            }
        }
        return j
    }, r.prototype.is = function () {
        return !0
    }, r.prototype.encode = function (a) {
        return a
    }, r.prototype.decode = function (a) {
        return a
    }, r.prototype.equals = function (a, b) {
        return a == b
    }, r.prototype.$subPattern = function () {
        var a = this.pattern.toString();
        return a.substr(1, a.length - 2)
    }, r.prototype.pattern = /.*/, r.prototype.toString = function () {
        return "{Type:" + this.name + "}"
    }, r.prototype.$asArray = function (a, b) {
        function d(a, b) {
            function d(a, b) {
                return function () {
                    return a[b].apply(a, arguments)
                }
            }

            function e(a) {
                return K(a) ? a : G(a) ? [a] : []
            }

            function f(a) {
                switch (a.length) {
                    case 0:
                        return c;
                    case 1:
                        return "auto" === b ? a[0] : a;
                    default:
                        return a
                }
            }

            function g(a) {
                return !a
            }

            function h(a, b) {
                return function (c) {
                    c = e(c);
                    var d = n(c, a);
                    return b === !0 ? 0 === m(d, g).length : f(d)
                }
            }

            function i(a) {
                return function (b, c) {
                    var d = e(b), f = e(c);
                    if (d.length !== f.length) return !1;
                    for (var g = 0; g < d.length; g++) if (!a(d[g], f[g])) return !1;
                    return !0
                }
            }

            this.encode = h(d(a, "encode")), this.decode = h(d(a, "decode")), this.is = h(d(a, "is"), !0), this.equals = i(d(a, "equals")), this.pattern = a.pattern, this.$arrayMode = b
        }

        if (!a) return this;
        if ("auto" === a && !b) throw new Error("'auto' array mode is for query parameters only");
        return new d(this, a)
    }, b.module("ui.router.util").provider("$urlMatcherFactory", s), b.module("ui.router.util").run(["$urlMatcherFactory", function () {
    }]), t.$inject = ["$locationProvider", "$urlMatcherFactoryProvider"], b.module("ui.router.router").provider("$urlRouter", t), u.$inject = ["$urlRouterProvider", "$urlMatcherFactoryProvider"], b.module("ui.router.state").value("$stateParams", {}).provider("$state", u), v.$inject = [], b.module("ui.router.state").provider("$view", v), b.module("ui.router.state").provider("$uiViewScroll", w), x.$inject = ["$state", "$injector", "$uiViewScroll", "$interpolate"], y.$inject = ["$compile", "$controller", "$state", "$interpolate"], b.module("ui.router.state").directive("uiView", x), b.module("ui.router.state").directive("uiView", y), C.$inject = ["$state", "$timeout"], D.$inject = ["$state", "$stateParams", "$interpolate"], b.module("ui.router.state").directive("uiSref", C).directive("uiSrefActive", D).directive("uiSrefActiveEq", D), E.$inject = ["$state"], F.$inject = ["$state"], b.module("ui.router.state").filter("isState", E).filter("includedByState", F)
}(window, window.angular);
/*!
 * ionic.bundle.js is a concatenation of:
 * ionic.js, angular.js, angular-animate.js,
 * angular-sanitize.js, angular-ui-router.js,
 * and ionic-angular.js
 */

/*!
 * Copyright 2015 Drifty Co.
 * http://drifty.com/
 *
 * Ionic, v1.3.1
 * A powerful HTML5 mobile app framework.
 * http://ionicframework.com/
 *
 * By @maxlynch, @benjsperry, @adamdbradley <3
 *
 * Licensed under the MIT license. Please see LICENSE for more information.
 *
 */

!function () {
    function e(e, t, n, i, o, r) {
        function a(i, a, c, s, u) {
            function d() {
                N.resizeRequiresRefresh(b.__clientWidth, b.__clientHeight) && g()
            }

            function f() {
                var e;
                return e = {
                    dataLength: 0, width: 0, height: 0, resizeRequiresRefresh: function (t, n) {
                        var i = e.dataLength && t && n && (t !== e.width || n !== e.height);
                        return e.width = t, e.height = n, !!i
                    }, dataChangeRequiresRefresh: function (t) {
                        var n = t.length > 0 || t.length < e.dataLength;
                        return e.dataLength = t.length, !!n
                    }
                }
            }

            function h() {
                return T || (T = new e({
                    afterItemsNode: M[0],
                    containerNode: S,
                    heightData: A,
                    widthData: V,
                    forceRefreshImages: !(!l(c.forceRefreshImages) || "false" === c.forceRefreshImages),
                    keyExpression: I,
                    renderBuffer: D,
                    scope: i,
                    scrollView: s.scrollView,
                    transclude: u
                }))
            }

            function p() {
                var e = angular.element(b.__content.querySelector(".collection-repeat-after-container"));
                if (!e.length) {
                    var t = !1, n = [].filter.call(b.__content.childNodes, function (e) {
                        return ionic.DomUtil.contains(e, S) ? (t = !0, !1) : t
                    });
                    e = angular.element('<span class="collection-repeat-after-container">'), b.options.scrollingX && e.addClass("horizontal"), e.append(n), b.__content.appendChild(e[0])
                }
                return e
            }

            function v() {
                L ? m(L, A) : A.computed = !0, R ? m(R, V) : V.computed = !0
            }

            function g() {
                var e = P.length > 0;
                if (e && (A.computed || V.computed) && w(), e && A.computed) {
                    if (A.value = E.height, !A.value) throw new Error('collection-repeat tried to compute the height of repeated elements "' + k + '", but was unable to. Please provide the "item-height" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')
                } else !A.dynamic && A.getValue && (A.value = A.getValue());
                if (e && V.computed) {
                    if (V.value = E.width, !V.value) throw new Error('collection-repeat tried to compute the width of repeated elements "' + k + '", but was unable to. Please provide the "item-width" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')
                } else !V.dynamic && V.getValue && (V.value = V.getValue());
                h().refreshLayout()
            }

            function m(e, n) {
                if (e) {
                    var i;
                    try {
                        i = t(e)
                    } catch (o) {
                        e.trim().match(/\d+(px|%)$/) && (e = '"' + e + '"'), i = t(e)
                    }
                    var r = e.replace(/(\'|\"|px|%)/g, "").trim(), a = r.length && !/([a-zA-Z]|\$|:|\?)/.test(r);
                    if (n.attrValue = e, a) if (e.indexOf("%") > -1) {
                        var c = parseFloat(i()) / 100;
                        n.getValue = n === A ? function () {
                            return Math.floor(c * b.__clientHeight)
                        } : function () {
                            return Math.floor(c * b.__clientWidth)
                        }
                    } else n.value = parseInt(i()); else n.dynamic = !0, n.getValue = n === A ? function (e, t) {
                        var n = i(e, t);
                        return n.charAt && "%" === n.charAt(n.length - 1) ? Math.floor(parseFloat(n) / 100 * b.__clientHeight) : parseInt(n)
                    } : function (e, t) {
                        var n = i(e, t);
                        return n.charAt && "%" === n.charAt(n.length - 1) ? Math.floor(parseFloat(n) / 100 * b.__clientWidth) : parseInt(n)
                    }
                }
            }

            function w() {
                O || u(H = i.$new(), function (e) {
                    e[0].removeAttribute("collection-repeat"), O = e[0]
                }), H[I] = (x(i) || [])[0], o.$$phase || H.$digest(), S.appendChild(O);
                var e = n.getComputedStyle(O);
                E.width = parseInt(e.width), E.height = parseInt(e.height), S.removeChild(O)
            }

            var b = s.scrollView, y = a[0], S = angular.element('<div class="collection-repeat-container">')[0];
            if (y.parentNode.replaceChild(S, y), b.options.scrollingX && b.options.scrollingY) throw new Error("collection-repeat expected a parent x or y scrollView, not an xy scrollView.");
            var k = c.collectionRepeat,
                C = k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
            if (!C) throw new Error("collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '" + c.collectionRepeat + "'.");
            var T, I = C[1], B = C[2], x = t(B), A = {}, V = {}, E = {}, P = [],
                _ = c.itemRenderBuffer || c.collectionBufferSize, D = angular.isDefined(_) ? parseInt(_) : $,
                L = c.itemHeight || c.collectionItemHeight, R = c.itemWidth || c.collectionItemWidth, M = p(), N = f();
            v(), s.$element.on("scroll-resize", g), angular.element(n).on("resize", d);
            var z = o.$on("$ionicExposeAside", ionic.animationFrameThrottle(function () {
                s.scrollView.resize(), d()
            }));
            r(g, 0, !1), i.$watchCollection(x, function (e) {
                if (P = e || (e = []), !angular.isArray(e)) throw new Error("collection-repeat expected an array for '" + B + "', but got a " + typeof value);
                i.$$postDigest(function () {
                    h().setData(P), N.dataChangeRequiresRefresh(P) && g()
                })
            }), i.$on("$destroy", function () {
                angular.element(n).off("resize", d), z(), s.$element && s.$element.off("scroll-resize", g), O && O.parentNode && O.parentNode.removeChild(O), H && H.$destroy(), H = O = null, T && T.destroy(), T = null
            });
            var O, H
        }

        return {restrict: "A", priority: 1e3, transclude: "element", $$tlb: !0, require: "^^$ionicScroll", link: a}
    }

    function t(e, t, n) {
        var i = {primaryPos: 0, secondaryPos: 0, primarySize: 0, secondarySize: 0, rowPrimarySize: 0};
        return function (o) {
            function r() {
                return a(!0)
            }

            function a(t) {
                if (!a.destroyed) {
                    var n, o, r, l, u, d = ee.getScrollValue(), f = d + ee.scrollPrimarySize;
                    ee.updateRenderRange(d, f), F = Math.max(0, F - T), W = Math.min(A.length - 1, W + T);
                    for (n in Z) (F > n || n > W) && (r = Z[n], delete Z[n], G.push(r), r.isShown = !1);
                    for (n = F; W >= n; n++) n >= A.length || Z[n] && !t || (r = Z[n] || (Z[n] = G.length ? G.pop() : j.length ? j.shift() : new s), K.push(r), r.isShown = !0, u = r.scope, u.$index = n, u[C] = A[n], u.$first = 0 === n, u.$last = n === A.length - 1, u.$middle = !(u.$first || u.$last), u.$odd = !(u.$even = 0 === (1 & n)), u.$$disconnected && ionic.Utils.reconnectScope(r.scope), l = ee.getDimensions(n), (r.secondaryPos !== l.secondaryPos || r.primaryPos !== l.primaryPos) && (r.node.style[ionic.CSS.TRANSFORM] = O.replace(N, r.primaryPos = l.primaryPos).replace(z, r.secondaryPos = l.secondaryPos)), (r.secondarySize !== l.secondarySize || r.primarySize !== l.primarySize) && (r.node.style.cssText = r.node.style.cssText.replace(m, H.replace(N, (r.primarySize = l.primarySize) + 1).replace(z, r.secondarySize = l.secondarySize))));
                    for (W === A.length - 1 && (l = ee.getDimensions(A.length - 1) || i, w.style[ionic.CSS.TRANSFORM] = O.replace(N, l.primaryPos + l.primarySize).replace(z, 0)); G.length;) r = G.pop(), r.scope.$broadcast("$collectionRepeatLeave"), ionic.Utils.disconnectScope(r.scope), j.push(r), r.node.style[ionic.CSS.TRANSFORM] = "translate3d(-9999px,-9999px,0)", r.primaryPos = r.secondaryPos = null;
                    if (y) for (n = 0, o = K.length; o > n && (r = K[n]); n++) if (r.images) for (var h, p = 0, v = r.images.length; v > p && (h = r.images[p]); p++) {
                        var $ = h.src;
                        h.src = g, h.src = $
                    }
                    if (t) for (var b = e.$$phase; K.length;) r = K.pop(), b || r.scope.$digest(); else c()
                }
            }

            function c() {
                var t;
                c.running || (c.running = !0, n(function () {
                    for (var n = e.$$phase; K.length;) t = K.pop(), t.isShown && (n || t.scope.$digest());
                    c.running = !1
                }))
            }

            function s() {
                var e = this;
                this.scope = I.$new(), this.id = "item" + J++, x(this.scope, function (t) {
                    e.element = t, e.element.data("$$collectionRepeatItem", e), e.node = t[0], e.node.style[ionic.CSS.TRANSFORM] = "translate3d(-9999px,-9999px,0)", e.node.style.cssText += " height: 0px; width: 0px;", ionic.Utils.disconnectScope(e.scope), b.appendChild(e.node), e.images = t[0].getElementsByTagName("img")
                })
            }

            function l() {
                this.getItemPrimarySize = P, this.getItemSecondarySize = D, this.getScrollValue = function () {
                    return Math.max(0, Math.min(B.__scrollTop - q, B.__maxScrollTop - q - U))
                }, this.refreshDirection = function () {
                    this.scrollPrimarySize = B.__clientHeight, this.scrollSecondarySize = B.__clientWidth, this.estimatedPrimarySize = v, this.estimatedSecondarySize = $, this.estimatedItemsAcross = R && Math.floor(B.__clientWidth / $) || 1
                }
            }

            function u() {
                this.getItemPrimarySize = D, this.getItemSecondarySize = P, this.getScrollValue = function () {
                    return Math.max(0, Math.min(B.__scrollLeft - q, B.__maxScrollLeft - q - U))
                }, this.refreshDirection = function () {
                    this.scrollPrimarySize = B.__clientWidth, this.scrollSecondarySize = B.__clientHeight, this.estimatedPrimarySize = $, this.estimatedSecondarySize = v, this.estimatedItemsAcross = R && Math.floor(B.__clientHeight / v) || 1
                }
            }

            function d() {
                this.getEstimatedSecondaryPos = function (e) {
                    return e % this.estimatedItemsAcross * this.estimatedSecondarySize
                }, this.getEstimatedPrimaryPos = function (e) {
                    return Math.floor(e / this.estimatedItemsAcross) * this.estimatedPrimarySize
                }, this.getEstimatedIndex = function (e) {
                    return Math.floor(e / this.estimatedPrimarySize) * this.estimatedItemsAcross
                }
            }

            function f() {
                this.getEstimatedSecondaryPos = function () {
                    return 0
                }, this.getEstimatedPrimaryPos = function (e) {
                    return e * this.estimatedPrimarySize
                }, this.getEstimatedIndex = function (e) {
                    return Math.floor(e / this.estimatedPrimarySize)
                }
            }

            function h() {
                this.getContentSize = function () {
                    return this.getEstimatedPrimaryPos(A.length - 1) + this.estimatedPrimarySize + q + U
                };
                var e = {};
                this.getDimensions = function (t) {
                    return e.primaryPos = this.getEstimatedPrimaryPos(t), e.secondaryPos = this.getEstimatedSecondaryPos(t), e.primarySize = this.estimatedPrimarySize, e.secondarySize = this.estimatedSecondarySize, e
                }, this.updateRenderRange = function (e, t) {
                    F = Math.max(0, this.getEstimatedIndex(e)), W = Math.min(A.length - 1, this.getEstimatedIndex(t) + this.estimatedItemsAcross - 1), Y = Math.max(0, this.getEstimatedPrimaryPos(F)), X = this.getEstimatedPrimaryPos(W) + this.estimatedPrimarySize
                }
            }

            function p() {
                function e(e) {
                    var t, r, a;
                    for (t = Math.max(0, n); e >= t && (a = c[t]); t++) r = c[t - 1] || i, a.primarySize = o.getItemPrimarySize(t, A[t]), a.secondarySize = o.scrollSecondarySize, a.primaryPos = r.primaryPos + r.primarySize, a.secondaryPos = 0
                }

                function t(e) {
                    var t, r, a;
                    for (t = Math.max(n, 0); e >= t && (a = c[t]); t++) r = c[t - 1] || i, a.secondarySize = Math.min(o.getItemSecondarySize(t, A[t]), o.scrollSecondarySize), a.secondaryPos = r.secondaryPos + r.secondarySize, 0 === t || a.secondaryPos + a.secondarySize > o.scrollSecondarySize ? (a.secondaryPos = 0, a.primarySize = o.getItemPrimarySize(t, A[t]), a.primaryPos = r.primaryPos + r.rowPrimarySize, a.rowStartIndex = t, a.rowPrimarySize = a.primarySize) : (a.primarySize = o.getItemPrimarySize(t, A[t]), a.primaryPos = r.primaryPos, a.rowStartIndex = r.rowStartIndex, c[a.rowStartIndex].rowPrimarySize = a.rowPrimarySize = Math.max(c[a.rowStartIndex].rowPrimarySize, a.primarySize), a.rowPrimarySize = Math.max(a.primarySize, a.rowPrimarySize))
                }

                var n, o = this, r = ionic.debounce(Q, 25, !0), a = R ? t : e, c = [];
                this.getContentSize = function () {
                    var e = c[n] || i;
                    return (e.primaryPos + e.primarySize || 0) + this.getEstimatedPrimaryPos(A.length - n - 1) + q + U
                }, this.onDestroy = function () {
                    c.length = 0
                }, this.onRefreshData = function () {
                    var e, t;
                    for (e = c.length, t = A.length; t > e; e++) c.push({});
                    n = -1
                }, this.onRefreshLayout = function () {
                    n = -1
                }, this.getDimensions = function (e) {
                    return e = Math.min(e, A.length - 1), e > n && (e > .9 * A.length ? (a(A.length - 1), n = A.length - 1, Q()) : (a(e), n = e, r())), c[e]
                };
                var s = -1, l = -1;
                this.updateRenderRange = function (e, t) {
                    var n, i, o;
                    if (this.getDimensions(2 * this.getEstimatedIndex(t)), -1 === s || 0 === e) n = 0; else if (e >= l) for (n = s, i = A.length; i > n && !((o = this.getDimensions(n)) && o.primaryPos + o.rowPrimarySize >= e); n++) ; else for (n = s; n >= 0; n--) if ((o = this.getDimensions(n)) && o.primaryPos <= e) {
                        n = R ? o.rowStartIndex : n;
                        break
                    }
                    F = Math.min(Math.max(0, n), A.length - 1), Y = -1 !== F ? this.getDimensions(F).primaryPos : -1;
                    var r;
                    for (n = F + 1, i = A.length; i > n; n++) if ((o = this.getDimensions(n)) && o.primaryPos + o.rowPrimarySize > t) {
                        if (R) for (r = o; i - 1 > n && (o = this.getDimensions(n + 1)).primaryPos === r.primaryPos;) n++;
                        break
                    }
                    W = Math.min(n, A.length - 1), X = -1 !== W ? (o = this.getDimensions(W)).primaryPos + (o.rowPrimarySize || o.primarySize) : -1, l = e, s = F
                }
            }

            var v, $, w = o.afterItemsNode, b = o.containerNode, y = o.forceRefreshImages, S = o.heightData,
                k = o.widthData, C = o.keyExpression, T = o.renderBuffer, I = o.scope, B = o.scrollView,
                x = o.transclude, A = [], V = {}, E = S.getValue || function () {
                    return S.value
                }, P = function (e, t) {
                    return V[C] = t, V.$index = e, E(I, V)
                }, _ = k.getValue || function () {
                    return k.value
                }, D = function (e, t) {
                    return V[C] = t, V.$index = e, _(I, V)
                }, L = !!B.options.scrollingY,
                R = L ? k.dynamic || k.value !== B.__clientWidth : S.dynamic || S.value !== B.__clientHeight,
                M = !S.dynamic && !k.dynamic, N = "PRIMARY", z = "SECONDARY",
                O = L ? "translate3d(SECONDARYpx,PRIMARYpx,0)" : "translate3d(PRIMARYpx,SECONDARYpx,0)",
                H = L ? "height: PRIMARYpx; width: SECONDARYpx;" : "height: SECONDARYpx; width: PRIMARYpx;", q = 0,
                U = 0, F = -1, W = -1, X = -1, Y = -1, j = [], G = [], K = [], Z = {}, J = 0, Q = L ? function () {
                    B.setDimensions(null, null, null, ee.getContentSize(), !0)
                } : function () {
                    B.setDimensions(null, null, ee.getContentSize(), null, !0)
                }, ee = L ? new l : new u;
            (R ? d : f).call(ee), (M ? h : p).call(ee);
            var te = L ? "getContentHeight" : "getContentWidth", ne = B.options[te];
            B.options[te] = angular.bind(ee, ee.getContentSize), B.__$callback = B.__callback, B.__callback = function (e, t, n, i) {
                var o = ee.getScrollValue();
                (-1 === F || o + ee.scrollPrimarySize > X || Y > o) && a(), B.__$callback(e, t, n, i)
            };
            var ie = !1, oe = !1;
            this.refreshLayout = function () {
                A.length ? (v = P(0, A[0]), $ = D(0, A[0])) : (v = 100, $ = 100);
                var e = getComputedStyle(w) || {},
                    n = w.firstElementChild && getComputedStyle(w.firstElementChild) || {},
                    i = w.lastElementChild && getComputedStyle(w.lastElementChild) || {};
                U = (parseInt(e[L ? "height" : "width"]) || 0) + (n && parseInt(n[L ? "marginTop" : "marginLeft"]) || 0) + (i && parseInt(i[L ? "marginBottom" : "marginRight"]) || 0), q = 0;
                var o = b;
                do q += o[L ? "offsetTop" : "offsetLeft"]; while (ionic.DomUtil.contains(B.__content, o = o.offsetParent));
                var a = b.previousElementSibling, c = a ? t.getComputedStyle(a) : {},
                    l = parseInt(c[L ? "marginBottom" : "marginRight"] || 0);
                if (b.style[ionic.CSS.TRANSFORM] = O.replace(N, -l).replace(z, 0), q -= l, B.__clientHeight && B.__clientWidth || (B.__clientWidth = B.__container.clientWidth, B.__clientHeight = B.__container.clientHeight), (ee.onRefreshLayout || angular.noop)(), ee.refreshDirection(), Q(), !ie) for (var u = Math.max(20, 3 * T), d = 0; u > d; d++) j.push(new s);
                ie = !0, ie && oe && ((B.__scrollLeft > B.__maxScrollLeft || B.__scrollTop > B.__maxScrollTop) && B.resize(), r(!0))
            }, this.setData = function (e) {
                A = e, (ee.onRefreshData || angular.noop)(), oe = !0
            }, this.destroy = function () {
                a.destroyed = !0, j.forEach(function (e) {
                    e.scope.$destroy(), e.scope = e.element = e.node = e.images = null
                }), j.length = K.length = G.length = 0, Z = {}, B.options[te] = ne, B.__callback = B.__$callback, B.resize(), (ee.onDestroy || angular.noop)()
            }
        }
    }

    function n(e) {
        return ["$ionicGesture", "$parse", function (t, n) {
            var i = e.substr(2).toLowerCase();
            return function (o, r, a) {
                var c = n(a[e]), s = function (e) {
                    o.$apply(function () {
                        c(o, {$event: e})
                    })
                }, l = t.on(i, s, r);
                o.$on("$destroy", function () {
                    t.off(l, i, s)
                })
            }
        }]
    }

    function i(e) {
        return ["$document", "$timeout", function (t, n) {
            return {
                restrict: "E", controller: "$ionicHeaderBar", compile: function (i) {
                    function o(t, n, i, o) {
                        e ? (t.$watch(function () {
                            return n[0].className
                        }, function (e) {
                            var n = -1 === e.indexOf("ng-hide"), i = -1 !== e.indexOf("bar-subheader");
                            t.$hasHeader = n && !i, t.$hasSubheader = n && i, t.$emit("$ionicSubheader", t.$hasSubheader)
                        }), t.$on("$destroy", function () {
                            delete t.$hasHeader, delete t.$hasSubheader
                        }), o.align(), t.$on("$ionicHeader.align", function () {
                            ionic.requestAnimationFrame(function () {
                                o.align()
                            })
                        })) : (t.$watch(function () {
                            return n[0].className
                        }, function (e) {
                            var n = -1 === e.indexOf("ng-hide"), i = -1 !== e.indexOf("bar-subfooter");
                            t.$hasFooter = n && !i, t.$hasSubfooter = n && i
                        }), t.$on("$destroy", function () {
                            delete t.$hasFooter, delete t.$hasSubfooter
                        }), t.$watch("$hasTabs", function (e) {
                            n.toggleClass("has-tabs", !!e)
                        }), o.align(), t.$on("$ionicFooter.align", function () {
                            ionic.requestAnimationFrame(function () {
                                o.align()
                            })
                        }))
                    }

                    return i.addClass(e ? "bar bar-header" : "bar bar-footer"), n(function () {
                        e && t[0].getElementsByClassName("tabs-top").length && i.addClass("has-tabs-top")
                    }), {pre: o}
                }
            }
        }]
    }

    function o(e) {
        return e.clientHeight
    }

    function r(e) {
        e.stopPropagation()
    }

    var a = angular.module("ionic", ["ngAnimate", "ngSanitize", "ui.router", "ngIOS9UIWebViewPatch"]),
        c = angular.extend, s = angular.forEach, l = angular.isDefined, u = angular.isNumber, d = angular.isString,
        f = angular.element, h = angular.noop;
    a.factory("$ionicActionSheet", ["$rootScope", "$compile", "$animate", "$timeout", "$ionicTemplateLoader", "$ionicPlatform", "$ionicBody", "IONIC_BACK_PRIORITY", function (e, t, n, i, o, r, a, s) {
        function l(o) {
            function l(e) {
                e && /icon/.test(e) && (u.$actionSheetHasIcon = !0)
            }

            var u = e.$new(!0);
            c(u, {
                cancel: h,
                destructiveButtonClicked: h,
                buttonClicked: h,
                $deregisterBackButton: h,
                buttons: [],
                cancelOnStateChange: !0
            }, o || {});
            for (var d = 0; d < u.buttons.length; d++) l(u.buttons[d].text);
            l(u.cancelText), l(u.destructiveText);
            var p = u.element = t('<ion-action-sheet ng-class="cssClass" buttons="buttons"></ion-action-sheet>')(u),
                v = f(p[0].querySelector(".action-sheet-wrapper")),
                g = u.cancelOnStateChange ? e.$on("$stateChangeSuccess", function () {
                    u.cancel()
                }) : h;
            return u.removeSheet = function (e) {
                u.removed || (u.removed = !0, v.removeClass("action-sheet-up"), i(function () {
                    a.removeClass("action-sheet-open")
                }, 400), u.$deregisterBackButton(), g(), n.removeClass(p, "active").then(function () {
                    u.$destroy(), p.remove(), u.cancel.$scope = v = null, (e || h)(o.buttons)
                }))
            }, u.showSheet = function (e) {
                u.removed || (a.append(p).addClass("action-sheet-open"), n.addClass(p, "active").then(function () {
                    u.removed || (e || h)()
                }), i(function () {
                    u.removed || v.addClass("action-sheet-up")
                }, 20, !1))
            }, u.$deregisterBackButton = r.registerBackButtonAction(function () {
                i(u.cancel)
            }, s.actionSheet), u.cancel = function () {
                u.removeSheet(o.cancel)
            }, u.buttonClicked = function (e) {
                o.buttonClicked(e, o.buttons[e]) === !0 && u.removeSheet()
            }, u.destructiveButtonClicked = function () {
                o.destructiveButtonClicked() === !0 && u.removeSheet()
            }, u.showSheet(), u.cancel.$scope = u, u.cancel
        }

        return {show: l}
    }]), f.prototype.addClass = function (e) {
        var t, n, i, o, r, a;
        if (e && "ng-scope" != e && "ng-isolate-scope" != e) for (t = 0; t < this.length; t++) if (o = this[t], o.setAttribute) if (e.indexOf(" ") < 0 && o.classList.add) o.classList.add(e); else {
            for (a = (" " + (o.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " "), r = e.split(" "), n = 0; n < r.length; n++) i = r[n].trim(), -1 === a.indexOf(" " + i + " ") && (a += i + " ");
            o.setAttribute("class", a.trim())
        }
        return this
    }, f.prototype.removeClass = function (e) {
        var t, n, i, o, r;
        if (e) for (t = 0; t < this.length; t++) if (r = this[t], r.getAttribute) if (e.indexOf(" ") < 0 && r.classList.remove) r.classList.remove(e); else for (i = e.split(" "), n = 0; n < i.length; n++) o = i[n], r.setAttribute("class", (" " + (r.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + o.trim() + " ", " ").trim());
        return this
    }, a.factory("$ionicBackdrop", ["$document", "$timeout", "$$rAF", "$rootScope", function (e, t, n, i) {
        function o() {
            s++, 1 === s && (c.addClass("visible"), i.$broadcast("backdrop.shown"), n(function () {
                s >= 1 && c.addClass("active")
            }))
        }

        function r() {
            1 === s && (c.removeClass("active"), i.$broadcast("backdrop.hidden"), t(function () {
                0 === s && c.removeClass("visible")
            }, 400, !1)), s = Math.max(0, s - 1)
        }

        function a() {
            return c
        }

        var c = f('<div class="backdrop">'), s = 0;
        return e[0].body.appendChild(c[0]), {retain: o, release: r, getElement: a, _element: c}
    }]), a.factory("$ionicBind", ["$parse", "$interpolate", function (e, t) {
        var n = /^\s*([@=&])(\??)\s*(\w*)\s*$/;
        return function (i, o, r) {
            s(r || {}, function (r, a) {
                var c, s, l = r.match(n) || [], u = l[3] || a, d = l[1];
                switch (d) {
                    case"@":
                        if (!o[u]) return;
                        o.$observe(u, function (e) {
                            i[a] = e
                        }), o[u] && (i[a] = t(o[u])(i));
                        break;
                    case"=":
                        if (!o[u]) return;
                        s = i.$watch(o[u], function (e) {
                            i[a] = e
                        }), i.$on("$destroy", s);
                        break;
                    case"&":
                        if (o[u] && o[u].match(RegExp(a + "(.*?)"))) throw new Error('& expression binding "' + a + '" looks like it will recursively call "' + o[u] + '" and cause a stack overflow! Please choose a different scopeName.');
                        c = e(o[u]), i[a] = function (e) {
                            return c(i, e)
                        }
                }
            })
        }
    }]), a.factory("$ionicBody", ["$document", function (e) {
        return {
            addClass: function () {
                for (var t = 0; t < arguments.length; t++) e[0].body.classList.add(arguments[t]);
                return this
            }, removeClass: function () {
                for (var t = 0; t < arguments.length; t++) e[0].body.classList.remove(arguments[t]);
                return this
            }, enableClass: function (e) {
                var t = Array.prototype.slice.call(arguments).slice(1);
                return e ? this.addClass.apply(this, t) : this.removeClass.apply(this, t), this
            }, append: function (t) {
                return e[0].body.appendChild(t.length ? t[0] : t), this
            }, get: function () {
                return e[0].body
            }
        }
    }]), a.factory("$ionicClickBlock", ["$document", "$ionicBody", "$timeout", function (e, t, n) {
        function i(e) {
            e.preventDefault(), e.stopPropagation()
        }

        function o() {
            s && (a ? a.classList.remove(l) : (a = e[0].createElement("div"), a.className = "click-block", t.append(a), a.addEventListener("touchstart", i), a.addEventListener("mousedown", i)), s = !1)
        }

        function r() {
            a && a.classList.add(l)
        }

        var a, c, s, l = "click-block-hide";
        return {
            show: function (e) {
                s = !0, n.cancel(c), c = n(this.hide, e || 310, !1), o()
            }, hide: function () {
                s = !1, n.cancel(c), r()
            }
        }
    }]), a.factory("$ionicGesture", [function () {
        return {
            on: function (e, t, n, i) {
                return window.ionic.onGesture(e, t, n[0], i)
            }, off: function (e, t, n) {
                return window.ionic.offGesture(e, t, n)
            }
        }
    }]), a.factory("$ionicHistory", ["$rootScope", "$state", "$location", "$window", "$timeout", "$ionicViewSwitcher", "$ionicNavViewDelegate", function (e, t, n, i, o, r, a) {
        function s(e) {
            return e ? R.views[e] : null
        }

        function u(e) {
            return e ? s(e.backViewId) : null
        }

        function d(e) {
            return e ? s(e.forwardViewId) : null
        }

        function f(e) {
            return e ? R.histories[e] : null
        }

        function h(e) {
            var t = p(e);
            return R.histories[t.historyId] || (R.histories[t.historyId] = {
                historyId: t.historyId,
                parentHistoryId: p(t.scope.$parent).historyId,
                stack: [],
                cursor: -1
            }), f(t.historyId)
        }

        function p(t) {
            for (var n = t; n;) {
                if (n.hasOwnProperty("$historyId")) return {historyId: n.$historyId, scope: n};
                n = n.$parent
            }
            return {historyId: "root", scope: e}
        }

        function v(e) {
            R.currentView = s(e), R.backView = u(R.currentView), R.forwardView = d(R.currentView)
        }

        function g() {
            var e;
            if (t && t.current && t.current.name) {
                if (e = t.current.name, t.params) for (var n in t.params) t.params.hasOwnProperty(n) && t.params[n] && (e += "_" + n + "=" + t.params[n]);
                return e
            }
            return ionic.Utils.nextUid()
        }

        function m() {
            var e;
            if (t && t.params) for (var n in t.params) t.params.hasOwnProperty(n) && (e = e || {}, e[n] = t.params[n]);
            return e
        }

        function $(e) {
            return e && e.length && /ion-side-menus|ion-tabs/i.test(e[0].tagName)
        }

        function w(e, t) {
            if (t && t.$$state && t.$$state.self.canSwipeBack === !1) return !1;
            if (e && "false" === e.attr("can-swipe-back")) return !1;
            var n = e.find("ion-view");
            return n && "false" === n.attr("can-swipe-back") ? !1 : !0
        }

        var b, y, S, k, C, T = "initialView", I = "newView", B = "moveBack", x = "moveForward", A = "back",
            V = "forward", E = "enter", P = "exit", _ = "swap", D = "none", L = 0, R = {
                histories: {root: {historyId: "root", parentHistoryId: null, stack: [], cursor: -1}},
                views: {},
                backView: null,
                forwardView: null,
                currentView: null
            }, M = function () {
            };
        return M.prototype.initialize = function (e) {
            if (e) {
                for (var t in e) this[t] = e[t];
                return this
            }
            return null
        }, M.prototype.go = function () {
            if (this.stateName) return t.go(this.stateName, this.stateParams);
            if (this.url && this.url !== n.url()) {
                if (R.backView === this) return i.history.go(-1);
                if (R.forwardView === this) return i.history.go(1);
                n.url(this.url)
            }
            return null
        }, M.prototype.destroy = function () {
            this.scope && (this.scope.$destroy && this.scope.$destroy(), this.scope = null)
        }, {
            register: function (e, t) {
                var i, a, c, l = g(), d = h(e), $ = R.currentView, M = R.backView, N = R.forwardView, z = null,
                    O = null, H = D, q = d.historyId, U = n.url();
                if (b !== l && (b = l, L++), C) z = C.viewId, O = C.action, H = C.direction, C = null; else if (M && M.stateId === l) z = M.viewId, q = M.historyId, O = B, M.historyId === $.historyId ? H = A : $ && (H = P, i = f(M.historyId), i && i.parentHistoryId === $.historyId ? H = E : (i = f($.historyId), i && i.parentHistoryId === d.parentHistoryId && (H = _))); else if (N && N.stateId === l) z = N.viewId, q = N.historyId, O = x, N.historyId === $.historyId ? H = V : $ && (H = P, $.historyId === d.parentHistoryId ? H = E : (i = f($.historyId), i && i.parentHistoryId === d.parentHistoryId && (H = _))), i = p(e), N.historyId && i.scope && (i.scope.$historyId = N.historyId, q = N.historyId); else if ($ && $.historyId !== q && d.cursor > -1 && d.stack.length > 0 && d.cursor < d.stack.length && d.stack[d.cursor].stateId === l) {
                    var F = d.stack[d.cursor];
                    if (z = F.viewId, q = F.historyId, O = B, H = _, i = f($.historyId), i && i.parentHistoryId === q ? H = P : (i = f(q), i && i.parentHistoryId === $.historyId && (H = E)), i = s(F.backViewId), i && F.historyId !== i.historyId) {
                        var W = Object.keys(R.views);
                        W.forEach(function (e) {
                            var t = R.views[e];
                            t.backViewId === F.viewId && (t.backViewId = null)
                        }), d.stack[d.cursor].backViewId = $.viewId
                    }
                } else {
                    if (c = r.createViewEle(t), this.isAbstractEle(c, t)) return {
                        action: "abstractView",
                        direction: D,
                        ele: c
                    };
                    if (z = ionic.Utils.nextUid(), $) {
                        if ($.forwardViewId = z, O = I, N && $.stateId !== N.stateId && $.historyId === N.historyId && (i = f(N.historyId))) {
                            for (a = i.stack.length - 1; a >= N.index; a--) {
                                var X = i.stack[a];
                                X && X.destroy && X.destroy(), i.stack.splice(a)
                            }
                            q = N.historyId
                        }
                        d.historyId === $.historyId ? H = V : $.historyId !== d.historyId && (H = E, i = f($.historyId), i && i.parentHistoryId === d.parentHistoryId ? H = _ : (i = f(i.parentHistoryId), i && i.historyId === d.historyId && (H = P)))
                    } else O = T;
                    2 > L && (H = D), R.views[z] = this.createView({
                        viewId: z,
                        index: d.stack.length,
                        historyId: d.historyId,
                        backViewId: $ && $.viewId ? $.viewId : null,
                        forwardViewId: null,
                        stateId: l,
                        stateName: this.currentStateName(),
                        stateParams: m(),
                        url: U,
                        canSwipeBack: w(c, t)
                    }), d.stack.push(R.views[z])
                }
                if (S && S(), o.cancel(k), y) {
                    if (y.disableAnimate && (H = D), y.disableBack && (R.views[z].backViewId = null), y.historyRoot) {
                        for (a = 0; a < d.stack.length; a++) d.stack[a].viewId === z ? (d.stack[a].index = 0, d.stack[a].backViewId = d.stack[a].forwardViewId = null) : delete R.views[d.stack[a].viewId];
                        d.stack = [R.views[z]]
                    }
                    y = null
                }
                if (v(z), R.backView && q == R.backView.historyId && l == R.backView.stateId && U == R.backView.url) for (a = 0; a < d.stack.length; a++) if (d.stack[a].viewId == z) {
                    O = "dupNav", H = D, a > 0 && (d.stack[a - 1].forwardViewId = null), R.forwardView = null, R.currentView.index = R.backView.index, R.currentView.backViewId = R.backView.backViewId, R.backView = u(R.backView), d.stack.splice(a, 1);
                    break
                }
                return d.cursor = R.currentView.index, {
                    viewId: z,
                    action: O,
                    direction: H,
                    historyId: q,
                    enableBack: this.enabledBack(R.currentView),
                    isHistoryRoot: 0 === R.currentView.index,
                    ele: c
                }
            }, registerHistory: function (e) {
                e.$historyId = ionic.Utils.nextUid()
            }, createView: function (e) {
                var t = new M;
                return t.initialize(e)
            }, getViewById: s, viewHistory: function () {
                return R
            }, currentView: function (e) {
                return arguments.length && (R.currentView = e), R.currentView
            }, currentHistoryId: function () {
                return R.currentView ? R.currentView.historyId : null
            }, currentTitle: function (e) {
                return R.currentView ? (arguments.length && (R.currentView.title = e), R.currentView.title) : void 0
            }, backView: function (e) {
                return arguments.length && (R.backView = e), R.backView
            }, backTitle: function (e) {
                var t = e && s(e.backViewId) || R.backView;
                return t && t.title
            }, forwardView: function (e) {
                return arguments.length && (R.forwardView = e), R.forwardView
            }, currentStateName: function () {
                return t && t.current ? t.current.name : null
            }, isCurrentStateNavView: function (e) {
                return !!(t && t.current && t.current.views && t.current.views[e])
            }, goToHistoryRoot: function (e) {
                if (e) {
                    var t = f(e);
                    if (t && t.stack.length) {
                        if (R.currentView && R.currentView.viewId === t.stack[0].viewId) return;
                        C = {viewId: t.stack[0].viewId, action: B, direction: A}, t.stack[0].go()
                    }
                }
            }, goBack: function (e) {
                if (l(e) && -1 !== e) {
                    if (e > -1) return;
                    var t = R.histories[this.currentHistoryId()], n = t.cursor + e + 1;
                    1 > n && (n = 1), t.cursor = n, v(t.stack[n].viewId);
                    for (var i = n - 1, r = [], a = s(t.stack[i].forwardViewId); a && (r.push(a.stateId || a.viewId), i++, !(i >= t.stack.length));) a = s(t.stack[i].forwardViewId);
                    var c = this;
                    r.length && o(function () {
                        c.clearCache(r)
                    }, 300)
                }
                R.backView && R.backView.go()
            }, removeBackView: function () {
                var e = this, t = R.histories[this.currentHistoryId()], n = t.cursor, i = t.stack[n],
                    o = t.stack[n - 1], r = t.stack[n - 2];
                o && r && (t.stack.splice(n - 1, 1), e.clearCache([o.viewId]), i.backViewId = r.viewId, i.index = i.index - 1, r.forwardViewId = i.viewId, R.backView = r, t.currentCursor += -1)
            }, enabledBack: function (e) {
                var t = u(e);
                return !(!t || t.historyId !== e.historyId)
            }, clearHistory: function () {
                var e = R.histories, t = R.currentView;
                if (e) for (var n in e) e[n].stack && (e[n].stack = [], e[n].cursor = -1), t && t.historyId === n ? (t.backViewId = t.forwardViewId = null, e[n].stack.push(t)) : e[n].destroy && e[n].destroy();
                for (var i in R.views) i !== t.viewId && delete R.views[i];
                t && v(t.viewId)
            }, clearCache: function (e) {
                return o(function () {
                    a._instances.forEach(function (t) {
                        t.clearCache(e)
                    })
                })
            }, nextViewOptions: function (t) {
                return S && S(), arguments.length && (o.cancel(k), null === t ? y = t : (y = y || {}, c(y, t), y.expire && (S = e.$on("$stateChangeSuccess", function () {
                    k = o(function () {
                        y = null
                    }, y.expire)
                })))), y
            }, isAbstractEle: function (e, t) {
                return t && t.$$state && t.$$state.self["abstract"] ? !0 : !(!e || !$(e) && !$(e.children()))
            }, isActiveScope: function (e) {
                if (!e) return !1;
                for (var t, n = e, i = this.currentHistoryId(); n;) {
                    if (n.$$disconnected) return !1;
                    if (!t && n.hasOwnProperty("$historyId") && (t = !0), i) {
                        if (n.hasOwnProperty("$historyId") && i == n.$historyId) return !0;
                        if (n.hasOwnProperty("$activeHistoryId") && i == n.$activeHistoryId) {
                            if (n.hasOwnProperty("$historyId")) return !0;
                            if (!t) return !0
                        }
                    }
                    t && n.hasOwnProperty("$activeHistoryId") && (t = !1), n = n.$parent
                }
                return i ? "root" == i : !0
            }
        }
    }]).run(["$rootScope", "$state", "$location", "$document", "$ionicPlatform", "$ionicHistory", "IONIC_BACK_PRIORITY", function (e, t, n, i, o, r, a) {
        function c(e) {
            var t = r.backView();
            return t ? t.go() : ionic.Platform.exitApp(), e.preventDefault(), !1
        }

        e.$on("$ionicView.beforeEnter", function () {
            ionic.keyboard && ionic.keyboard.hide && ionic.keyboard.hide()
        }), e.$on("$ionicHistory.change", function (e, i) {
            if (!i) return null;
            var o = r.viewHistory(), a = i.historyId ? o.histories[i.historyId] : null;
            if (a && a.cursor > -1 && a.cursor < a.stack.length) {
                var c = a.stack[a.cursor];
                return c.go(i)
            }
            !i.url && i.uiSref && (i.url = t.href(i.uiSref)), i.url && (0 === i.url.indexOf("#") && (i.url = i.url.replace("#", "")), i.url !== n.url() && n.url(i.url))
        }), e.$ionicGoBack = function (e) {
            r.goBack(e)
        }, e.$on("$ionicView.afterEnter", function (e, t) {
            t && t.title && (i[0].title = t.title)
        }), o.registerBackButtonAction(c, a.view)
    }]), a.provider("$ionicConfig", function () {
        function e(e, i) {
            a.platform[e] = i, o.platform[e] = {}, t(a, a.platform[e]), n(a.platform[e], o.platform[e], "")
        }

        function t(e, n) {
            for (var i in e) i != r && e.hasOwnProperty(i) && (angular.isObject(e[i]) ? (l(n[i]) || (n[i] = {}), t(e[i], n[i])) : l(n[i]) || (n[i] = null))
        }

        function n(e, t, o) {
            s(e, function (c, s) {
                angular.isObject(e[s]) ? (t[s] = {}, n(e[s], t[s], o + "." + s)) : t[s] = function (n) {
                    if (arguments.length) return e[s] = n, t;
                    if (e[s] == r) {
                        var c = i(a.platform, ionic.Platform.platform() + o + "." + s);
                        return c || c === !1 ? c : i(a.platform, "default" + o + "." + s)
                    }
                    return e[s]
                }
            })
        }

        function i(e, t) {
            t = t.split(".");
            for (var n = 0; n < t.length; n++) {
                if (!e || !l(e[t[n]])) return null;
                e = e[t[n]]
            }
            return e
        }

        var o = this;
        o.platform = {};
        var r = "platform", a = {
            views: {maxCache: r, forwardCache: r, transition: r, swipeBackEnabled: r, swipeBackHitWidth: r},
            navBar: {alignTitle: r, positionPrimaryButtons: r, positionSecondaryButtons: r, transition: r},
            backButton: {icon: r, text: r, previousTitleText: r},
            form: {checkbox: r, toggle: r},
            scrolling: {jsScrolling: r},
            spinner: {icon: r},
            tabs: {style: r, position: r},
            templates: {maxPrefetch: r},
            platform: {}
        };
        n(a, o, ""), e("default", {
            views: {
                maxCache: 10,
                forwardCache: !1,
                transition: "ios",
                swipeBackEnabled: !0,
                swipeBackHitWidth: 45
            },
            navBar: {
                alignTitle: "center",
                positionPrimaryButtons: "left",
                positionSecondaryButtons: "right",
                transition: "view"
            },
            backButton: {icon: "ion-ios-arrow-back", text: "Back", previousTitleText: !0},
            form: {checkbox: "circle", toggle: "large"},
            scrolling: {jsScrolling: !0},
            spinner: {icon: "ios"},
            tabs: {style: "standard", position: "bottom"},
            templates: {maxPrefetch: 30}
        }), e("ios", {}), e("android", {
            views: {transition: "android", swipeBackEnabled: !1},
            navBar: {alignTitle: "left", positionPrimaryButtons: "right", positionSecondaryButtons: "right"},
            backButton: {icon: "ion-android-arrow-back", text: !1, previousTitleText: !1},
            form: {checkbox: "square", toggle: "small"},
            spinner: {icon: "android"},
            tabs: {style: "striped", position: "top"},
            scrolling: {jsScrolling: !1}
        }), e("windowsphone", {spinner: {icon: "android"}}), o.transitions = {
            views: {},
            navBar: {}
        }, o.transitions.views.ios = function (e, t, n, i) {
            function o(e, t, n, i) {
                var o = {};
                o[ionic.CSS.TRANSITION_DURATION] = r.shouldAnimate ? "" : 0, o.opacity = t, i > -1 && (o.boxShadow = "0 0 10px rgba(0,0,0," + (r.shouldAnimate ? .45 * i : .3) + ")"), o[ionic.CSS.TRANSFORM] = "translate3d(" + n + "%,0,0)", ionic.DomUtil.cachedStyles(e, o)
            }

            var r = {
                run: function (i) {
                    "forward" == n ? (o(e, 1, 99 * (1 - i), 1 - i), o(t, 1 - .1 * i, -33 * i, -1)) : "back" == n ? (o(e, 1 - .1 * (1 - i), -33 * (1 - i), -1), o(t, 1, 100 * i, 1 - i)) : (o(e, 1, 0, -1), o(t, 0, 0, -1))
                }, shouldAnimate: i && ("forward" == n || "back" == n)
            };
            return r
        }, o.transitions.navBar.ios = function (e, t, n, i) {
            function o(e, t, n, i) {
                var o = {};
                o[ionic.CSS.TRANSITION_DURATION] = c.shouldAnimate ? "" : "0ms", o.opacity = 1 === t ? "" : t, e.setCss("buttons-left", o), e.setCss("buttons-right", o), e.setCss("back-button", o), o[ionic.CSS.TRANSFORM] = "translate3d(" + i + "px,0,0)", e.setCss("back-text", o), o[ionic.CSS.TRANSFORM] = "translate3d(" + n + "px,0,0)", e.setCss("title", o)
            }

            function r(e, t, n) {
                if (e && t) {
                    var i = (e.titleTextX() + e.titleWidth()) * (1 - n),
                        r = t && (t.titleTextX() - e.backButtonTextLeft()) * (1 - n) || 0;
                    o(e, n, i, r)
                }
            }

            function a(e, t, n) {
                if (e && t) {
                    var i = (-(e.titleTextX() - t.backButtonTextLeft()) - e.titleLeftRight()) * n;
                    o(e, 1 - n, i, 0)
                }
            }

            var c = {
                run: function (n) {
                    var i = e.controller(), o = t && t.controller();
                    "back" == c.direction ? (a(i, o, 1 - n), r(o, i, 1 - n)) : (r(i, o, n), a(o, i, n))
                }, direction: n, shouldAnimate: i && ("forward" == n || "back" == n)
            };
            return c
        }, o.transitions.views.android = function (e, t, n, i) {
            function o(e, t, n) {
                var i = {};
                i[ionic.CSS.TRANSITION_DURATION] = r.shouldAnimate ? "" : 0, i[ionic.CSS.TRANSFORM] = "translate3d(" + t + "%,0,0)", i.opacity = n, ionic.DomUtil.cachedStyles(e, i)
            }

            i = i && ("forward" == n || "back" == n);
            var r = {
                run: function (i) {
                    "forward" == n ? (o(e, 99 * (1 - i), 1), o(t, -100 * i, 1)) : "back" == n ? (o(e, -100 * (1 - i), 1), o(t, 100 * i, 1)) : (o(e, 0, 1), o(t, 0, 0))
                }, shouldAnimate: i
            };
            return r
        }, o.transitions.navBar.android = function (e, t, n, i) {
            function o(e, t) {
                if (e) {
                    var n = {};
                    n.opacity = 1 === t ? "" : t, e.setCss("buttons-left", n), e.setCss("buttons-right", n), e.setCss("back-button", n), e.setCss("back-text", n), e.setCss("title", n)
                }
            }

            return {
                run: function (n) {
                    o(e.controller(), n), o(t && t.controller(), 1 - n)
                }, shouldAnimate: i && ("forward" == n || "back" == n)
            }
        },
            o.transitions.views.none = function (e, t) {
                return {
                    run: function (n) {
                        o.transitions.views.android(e, t, !1, !1).run(n)
                    }, shouldAnimate: !1
                }
            }, o.transitions.navBar.none = function (e, t) {
            return {
                run: function (n) {
                    o.transitions.navBar.ios(e, t, !1, !1).run(n), o.transitions.navBar.android(e, t, !1, !1).run(n)
                }, shouldAnimate: !1
            }
        }, o.setPlatformConfig = e, o.$get = function () {
            return o
        }
    }).config(["$compileProvider", function (e) {
        e.aHrefSanitizationWhitelist(/^\s*(https?|sms|tel|geo|ftp|mailto|file|ghttps?|ms-appx-web|ms-appx|x-wmapp0):/), e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|content|blob|ms-appx|ms-appx-web|x-wmapp0):|data:image\//)
    }]);
    var p = '<div class="loading-container"><div class="loading"></div></div>';
    a.constant("$ionicLoadingConfig", {template: "<ion-spinner></ion-spinner>"}).factory("$ionicLoading", ["$ionicLoadingConfig", "$ionicBody", "$ionicTemplateLoader", "$ionicBackdrop", "$timeout", "$q", "$log", "$compile", "$ionicPlatform", "$rootScope", "IONIC_BACK_PRIORITY", function (e, t, n, i, o, r, a, s, l, u, d) {
        function f() {
            return m || (m = n.compile({template: p, appendTo: t.get()}).then(function (e) {
                return e.show = function (a) {
                    var c = a.templateUrl ? n.load(a.templateUrl) : r.when(a.template || a.content || "");
                    e.scope = a.scope || e.scope, e.isShown || (e.hasBackdrop = !a.noBackdrop && a.showBackdrop !== !1, e.hasBackdrop && (i.retain(), i.getElement().addClass("backdrop-loading"))), a.duration && (o.cancel(e.durationTimeout), e.durationTimeout = o(angular.bind(e, e.hide), +a.duration)), $(), $ = l.registerBackButtonAction(h, d.loading), c.then(function (n) {
                        if (n) {
                            var i = e.element.children();
                            i.html(n), s(i.contents())(e.scope)
                        }
                        e.isShown && (e.element.addClass("visible"), ionic.requestAnimationFrame(function () {
                            e.isShown && (e.element.addClass("active"), t.addClass("loading-active"))
                        }))
                    }), e.isShown = !0
                }, e.hide = function () {
                    $(), e.isShown && (e.hasBackdrop && (i.release(), i.getElement().removeClass("backdrop-loading")), e.element.removeClass("active"), t.removeClass("loading-active"), e.element.removeClass("visible"), ionic.requestAnimationFrame(function () {
                        !e.isShown && e.element.removeClass("visible")
                    })), o.cancel(e.durationTimeout), e.isShown = !1;
                    var n = e.element.children();
                    n.html("")
                }, e
            })), m
        }

        function v(t) {
            t = c({}, e || {}, t || {});
            var n = t.delay || t.showDelay || 0;
            return w(), b(), t.hideOnStateChange && (w = u.$on("$stateChangeSuccess", g), b = u.$on("$stateChangeError", g)), o.cancel(y), y = o(h, n), y.then(f).then(function (e) {
                return e.show(t)
            })
        }

        function g() {
            return w(), b(), o.cancel(y), f().then(function (e) {
                return e.hide()
            })
        }

        var m, $ = h, w = h, b = h, y = r.when();
        return {show: v, hide: g, _getLoader: f}
    }]), a.factory("$ionicModal", ["$rootScope", "$ionicBody", "$compile", "$timeout", "$ionicPlatform", "$ionicTemplateLoader", "$$q", "$log", "$ionicClickBlock", "$window", "IONIC_BACK_PRIORITY", function (e, t, n, i, o, r, a, s, l, u, d) {
        var p = ionic.views.Modal.inherit({
            initialize: function (e) {
                ionic.views.Modal.prototype.initialize.call(this, e), this.animation = e.animation || "slide-in-up"
            }, show: function (e) {
                var n = this;
                if (n.scope.$$destroyed) return s.error("Cannot call " + n.viewType + ".show() after remove(). Please create a new " + n.viewType + " instance."), a.when();
                l.show(600), m.add(n);
                var r = f(n.modalEl);
                n.el.classList.remove("hide"), i(function () {
                    n._isShown && t.addClass(n.viewType + "-open")
                }, 400, !1), n.el.parentElement || (r.addClass(n.animation), t.append(n.el));
                var c = r.data("$$ionicScrollController");
                return c && c.resize(), e && n.positionView && (n.positionView(e, r), n._onWindowResize = function () {
                    n._isShown && n.positionView(e, r)
                }, ionic.on("resize", n._onWindowResize, window)), r.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"), n._isShown = !0, n._deregisterBackButton = o.registerBackButtonAction(n.hardwareBackButtonClose ? angular.bind(n, n.hide) : h, d.modal), ionic.views.Modal.prototype.show.call(n), i(function () {
                    n._isShown && (r.addClass("ng-enter-active"), ionic.trigger("resize"), n.scope.$parent && n.scope.$parent.$broadcast(n.viewType + ".shown", n), n.el.classList.add("active"), n.scope.$broadcast("$ionicHeader.align"), n.scope.$broadcast("$ionicFooter.align"), n.scope.$broadcast("$ionic.modalPresented"))
                }, 20), i(function () {
                    n._isShown && (n.$el.on("touchmove", function (e) {
                        var t = ionic.DomUtil.getParentOrSelfWithClass(e.target, "scroll");
                        t || e.preventDefault()
                    }), n.$el.on("click", function (e) {
                        n.backdropClickToClose && e.target === n.el && m.isHighest(n) && n.hide()
                    }))
                }, 400)
            }, hide: function () {
                var e = this, n = f(e.modalEl);
                return l.show(600), m.remove(e), e.el.classList.remove("active"), n.addClass("ng-leave"), i(function () {
                    e._isShown || (n.addClass("ng-leave-active").removeClass("ng-enter ng-enter-active active"), e.scope.$broadcast("$ionic.modalRemoved"))
                }, 20, !1), e.$el.off("click"), e._isShown = !1, e.scope.$parent && e.scope.$parent.$broadcast(e.viewType + ".hidden", e), e._deregisterBackButton && e._deregisterBackButton(), ionic.views.Modal.prototype.hide.call(e), e.positionView && ionic.off("resize", e._onWindowResize, window), i(function () {
                    t.removeClass(e.viewType + "-open"), e.el.classList.add("hide")
                }, e.hideDelay || 320)
            }, remove: function () {
                var e, t, n = this;
                return n.scope.$parent && n.scope.$parent.$broadcast(n.viewType + ".removed", n), n._isShown ? t = n.hide() : (e = a.defer(), e.resolve(), t = e.promise), t.then(function () {
                    n.scope.$destroy(), n.$el.remove()
                })
            }, isShown: function () {
                return !!this._isShown
            }
        }), v = function (t, i) {
            var o = i.scope && i.scope.$new() || e.$new(!0);
            i.viewType = i.viewType || "modal", c(o, {
                $hasHeader: !1,
                $hasSubheader: !1,
                $hasFooter: !1,
                $hasSubfooter: !1,
                $hasTabs: !1,
                $hasTabsTop: !1
            });
            var r = n("<ion-" + i.viewType + ">" + t + "</ion-" + i.viewType + ">")(o);
            i.$el = r, i.el = r[0], i.modalEl = i.el.querySelector("." + i.viewType);
            var a = new p(i);
            return a.scope = o, i.scope || (o[i.viewType] = a), a
        }, g = [], m = {
            add: function (e) {
                g.push(e)
            }, remove: function (e) {
                var t = g.indexOf(e);
                t > -1 && t < g.length && g.splice(t, 1)
            }, isHighest: function (e) {
                var t = g.indexOf(e);
                return t > -1 && t === g.length - 1
            }
        };
        return {
            fromTemplate: function (e, t) {
                var n = v(e, t || {});
                return n
            }, fromTemplateUrl: function (e, t, n) {
                var i;
                return angular.isFunction(t) && (i = t, t = n), r.load(e).then(function (e) {
                    var n = v(e, t || {});
                    return i && i(n), n
                })
            }, stack: m
        }
    }]), a.service("$ionicNavBarDelegate", ionic.DelegateService(["align", "showBackButton", "showBar", "title", "changeTitle", "setTitle", "getTitle", "back", "getPreviousTitle"])), a.service("$ionicNavViewDelegate", ionic.DelegateService(["clearCache"])), a.constant("IONIC_BACK_PRIORITY", {
        view: 100,
        sideMenu: 150,
        modal: 200,
        actionSheet: 300,
        popup: 400,
        loading: 500
    }).provider("$ionicPlatform", function () {
        return {
            $get: ["$q", "$ionicScrollDelegate", function (e, t) {
                var n = {
                    onHardwareBackButton: function (e) {
                        ionic.Platform.ready(function () {
                            document.addEventListener("backbutton", e, !1)
                        })
                    }, offHardwareBackButton: function (e) {
                        ionic.Platform.ready(function () {
                            document.removeEventListener("backbutton", e)
                        })
                    }, $backButtonActions: {}, registerBackButtonAction: function (e, t, i) {
                        n._hasBackButtonHandler || (n.$backButtonActions = {}, n.onHardwareBackButton(n.hardwareBackButtonClick), n._hasBackButtonHandler = !0);
                        var o = {id: i ? i : ionic.Utils.nextUid(), priority: t ? t : 0, fn: e};
                        return n.$backButtonActions[o.id] = o, function () {
                            delete n.$backButtonActions[o.id]
                        }
                    }, hardwareBackButtonClick: function (e) {
                        var t, i;
                        for (i in n.$backButtonActions) (!t || n.$backButtonActions[i].priority >= t.priority) && (t = n.$backButtonActions[i]);
                        return t ? (t.fn(e), t) : void 0
                    }, is: function (e) {
                        return ionic.Platform.is(e)
                    }, on: function (e, t) {
                        return ionic.Platform.ready(function () {
                            document.addEventListener(e, t, !1)
                        }), function () {
                            ionic.Platform.ready(function () {
                                document.removeEventListener(e, t)
                            })
                        }
                    }, ready: function (n) {
                        var i = e.defer();
                        return ionic.Platform.ready(function () {
                            window.addEventListener("statusTap", function () {
                                t.scrollTop(!0)
                            }), i.resolve(), n && n()
                        }), i.promise
                    }
                };
                return n
            }]
        }
    }), a.factory("$ionicPopover", ["$ionicModal", "$ionicPosition", "$document", "$window", function (e, t, n, i) {
        function o(e, n) {
            var o = f(e.target || e), a = t.offset(o), c = n.prop("offsetWidth"), s = n.prop("offsetHeight"),
                l = i.innerWidth, u = i.innerHeight, d = {left: a.left + a.width / 2 - c / 2},
                h = f(n[0].querySelector(".popover-arrow"));
            d.left < r ? d.left = r : d.left + c + r > l && (d.left = l - c - r), a.top + a.height + s > u && a.top - s > 0 ? (d.top = a.top - s, n.addClass("popover-bottom")) : (d.top = a.top + a.height, n.removeClass("popover-bottom")), h.css({left: a.left + a.width / 2 - h.prop("offsetWidth") / 2 - d.left + "px"}), n.css({
                top: d.top + "px",
                left: d.left + "px",
                marginLeft: "0",
                opacity: "1"
            })
        }

        var r = 6, a = {viewType: "popover", hideDelay: 1, animation: "none", positionView: o};
        return {
            fromTemplate: function (t, n) {
                return e.fromTemplate(t, ionic.Utils.extend({}, a, n))
            }, fromTemplateUrl: function (t, n) {
                return e.fromTemplateUrl(t, ionic.Utils.extend({}, a, n))
            }
        }
    }]);
    var v = '<div class="popup-container" ng-class="cssClass"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3><h5 class="popup-sub-title" ng-bind-html="subTitle" ng-if="subTitle"></h5></div><div class="popup-body"></div><div class="popup-buttons" ng-show="buttons.length"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>';
    a.factory("$ionicPopup", ["$ionicTemplateLoader", "$ionicBackdrop", "$q", "$timeout", "$rootScope", "$ionicBody", "$compile", "$ionicPlatform", "$ionicModal", "IONIC_BACK_PRIORITY", function (e, t, n, i, o, r, a, s, l, u) {
        function d(t) {
            t = c({scope: null, title: "", buttons: []}, t || {});
            var s = {};
            return s.scope = (t.scope || o).$new(), s.element = f(v), s.responseDeferred = n.defer(), r.get().appendChild(s.element[0]), a(s.element)(s.scope), c(s.scope, {
                title: t.title,
                buttons: t.buttons,
                subTitle: t.subTitle,
                cssClass: t.cssClass,
                $buttonTapped: function (e, t) {
                    var n = (e.onTap || h).apply(s, [t]);
                    t = t.originalEvent || t, t.defaultPrevented || s.responseDeferred.resolve(n)
                }
            }), n.when(t.templateUrl ? e.load(t.templateUrl) : t.template || t.content || "").then(function (e) {
                var t = f(s.element[0].querySelector(".popup-body"));
                e ? (t.html(e), a(t.contents())(s.scope)) : t.remove()
            }), s.show = function () {
                s.isShown || s.removed || (l.stack.add(s), s.isShown = !0, ionic.requestAnimationFrame(function () {
                    s.isShown && (s.element.removeClass("popup-hidden"), s.element.addClass("popup-showing active"), m(s.element))
                }))
            }, s.hide = function (e) {
                return e = e || h, s.isShown ? (l.stack.remove(s), s.isShown = !1, s.element.removeClass("active"), s.element.addClass("popup-hidden"), void i(e, 250, !1)) : e()
            }, s.remove = function () {
                s.removed || (s.hide(function () {
                    s.element.remove(), s.scope.$destroy()
                }), s.removed = !0)
            }, s
        }

        function p() {
            var e = S[S.length - 1];
            e && e.responseDeferred.resolve()
        }

        function g(e) {
            function n() {
                S.push(o), i(o.show, a, !1), o.responseDeferred.promise.then(function (e) {
                    var n = S.indexOf(o);
                    return -1 !== n && S.splice(n, 1), o.remove(), S.length > 0 ? S[S.length - 1].show() : (t.release(), i(function () {
                        S.length || r.removeClass("popup-open")
                    }, 400, !1), (k._backButtonActionDone || h)()), e
                })
            }

            var o = k._createPopup(e), a = 0;
            return S.length > 0 ? (a = y.stackPushDelay, i(S[S.length - 1].hide, a, !1)) : (r.addClass("popup-open"), t.retain(), k._backButtonActionDone = s.registerBackButtonAction(p, u.popup)), o.responseDeferred.promise.close = function (e) {
                o.removed || o.responseDeferred.resolve(e)
            }, o.responseDeferred.notify({close: o.responseDeferred.close}), n(), o.responseDeferred.promise
        }

        function m(e) {
            var t = e[0].querySelector("[autofocus]");
            t && t.focus()
        }

        function $(e) {
            return g(c({
                buttons: [{
                    text: e.okText || "OK", type: e.okType || "button-positive", onTap: function () {
                        return !0
                    }
                }]
            }, e || {}))
        }

        function w(e) {
            return g(c({
                buttons: [{
                    text: e.cancelText || "Cancel",
                    type: e.cancelType || "button-default",
                    onTap: function () {
                        return !1
                    }
                }, {
                    text: e.okText || "OK", type: e.okType || "button-positive", onTap: function () {
                        return !0
                    }
                }]
            }, e || {}))
        }

        function b(e) {
            var t = o.$new(!0);
            t.data = {}, t.data.fieldtype = e.inputType ? e.inputType : "text", t.data.response = e.defaultText ? e.defaultText : "", t.data.placeholder = e.inputPlaceholder ? e.inputPlaceholder : "", t.data.maxlength = e.maxLength ? parseInt(e.maxLength) : "";
            var n = "";
            return e.template && /<[a-z][\s\S]*>/i.test(e.template) === !1 && (n = "<span>" + e.template + "</span>", delete e.template), g(c({
                template: n + '<input ng-model="data.response" type="{{ data.fieldtype }}"maxlength="{{ data.maxlength }}"placeholder="{{ data.placeholder }}">',
                scope: t,
                buttons: [{
                    text: e.cancelText || "Cancel", type: e.cancelType || "button-default", onTap: function () {
                    }
                }, {
                    text: e.okText || "OK", type: e.okType || "button-positive", onTap: function () {
                        return t.data.response || ""
                    }
                }]
            }, e || {}))
        }

        var y = {stackPushDelay: 75}, S = [],
            k = {show: g, alert: $, confirm: w, prompt: b, _createPopup: d, _popupStack: S};
        return k
    }]), a.factory("$ionicPosition", ["$document", "$window", function (e, t) {
        function n(e, n) {
            return e.currentStyle ? e.currentStyle[n] : t.getComputedStyle ? t.getComputedStyle(e)[n] : e.style[n]
        }

        function i(e) {
            return "static" === (n(e, "position") || "static")
        }

        var o = function (t) {
            for (var n = e[0], o = t.offsetParent || n; o && o !== n && i(o);) o = o.offsetParent;
            return o || n
        };
        return {
            position: function (t) {
                var n = this.offset(t), i = {top: 0, left: 0}, r = o(t[0]);
                r != e[0] && (i = this.offset(f(r)), i.top += r.clientTop - r.scrollTop, i.left += r.clientLeft - r.scrollLeft);
                var a = t[0].getBoundingClientRect();
                return {
                    width: a.width || t.prop("offsetWidth"),
                    height: a.height || t.prop("offsetHeight"),
                    top: n.top - i.top,
                    left: n.left - i.left
                }
            }, offset: function (n) {
                var i = n[0].getBoundingClientRect();
                return {
                    width: i.width || n.prop("offsetWidth"),
                    height: i.height || n.prop("offsetHeight"),
                    top: i.top + (t.pageYOffset || e[0].documentElement.scrollTop),
                    left: i.left + (t.pageXOffset || e[0].documentElement.scrollLeft)
                }
            }
        }
    }]), a.service("$ionicScrollDelegate", ionic.DelegateService(["resize", "scrollTop", "scrollBottom", "scrollTo", "scrollBy", "zoomTo", "zoomBy", "getScrollPosition", "anchorScroll", "freezeScroll", "freezeAllScrolls", "getScrollView"])), a.service("$ionicSideMenuDelegate", ionic.DelegateService(["toggleLeft", "toggleRight", "getOpenRatio", "isOpen", "isOpenLeft", "isOpenRight", "canDragContent", "edgeDragThreshold"])), a.service("$ionicSlideBoxDelegate", ionic.DelegateService(["update", "slide", "select", "enableSlide", "previous", "next", "stop", "autoPlay", "start", "currentIndex", "selected", "slidesCount", "count", "loop"])), a.service("$ionicTabsDelegate", ionic.DelegateService(["select", "selectedIndex", "showBar"])), function () {
        var e = [];
        a.factory("$ionicTemplateCache", ["$http", "$templateCache", "$timeout", function (t, n, i) {
            function o(e) {
                return "undefined" == typeof e ? r() : (d(e) && (e = [e]), s(e, function (e) {
                    c.push(e)
                }), void (a && r()))
            }

            function r() {
                var e;
                if (o._runCount++, a = !0, 0 !== c.length) {
                    for (var s = 0; 4 > s && (e = c.pop());) d(e) && t.get(e, {cache: n}), s++;
                    c.length && i(r, 1e3)
                }
            }

            var a, c = e;
            return o._runCount = 0, o
        }]).config(["$stateProvider", "$ionicConfigProvider", function (t, n) {
            var i = t.state;
            t.state = function (o, r) {
                if ("object" == typeof r) {
                    var a = r.prefetchTemplate !== !1 && e.length < n.templates.maxPrefetch();
                    if (a && d(r.templateUrl) && e.push(r.templateUrl), angular.isObject(r.views)) for (var c in r.views) a = r.views[c].prefetchTemplate !== !1 && e.length < n.templates.maxPrefetch(), a && d(r.views[c].templateUrl) && e.push(r.views[c].templateUrl)
                }
                return i.call(t, o, r)
            }
        }]).run(["$ionicTemplateCache", function (e) {
            e()
        }])
    }(), a.factory("$ionicTemplateLoader", ["$compile", "$controller", "$http", "$q", "$rootScope", "$templateCache", function (e, t, n, i, o, r) {
        function a(e) {
            return n.get(e, {cache: r}).then(function (e) {
                return e.data && e.data.trim()
            })
        }

        function s(n) {
            n = c({template: "", templateUrl: "", scope: null, controller: null, locals: {}, appendTo: null}, n || {});
            var r = n.templateUrl ? this.load(n.templateUrl) : i.when(n.template);
            return r.then(function (i) {
                var r, a = n.scope || o.$new(), s = f("<div>").html(i).contents();
                return n.controller && (r = t(n.controller, c(n.locals, {$scope: a})), s.children().data("$ngControllerController", r)), n.appendTo && f(n.appendTo).append(s), e(s)(a), {
                    element: s,
                    scope: a
                }
            })
        }

        return {load: a, compile: s}
    }]), a.factory("$ionicViewService", ["$ionicHistory", "$log", function (e, t) {
        function n(e, n) {
            t.warn("$ionicViewService" + e + " is deprecated, please use $ionicHistory" + n + " instead: http://ionicframework.com/docs/nightly/api/service/$ionicHistory/")
        }

        n("", "");
        var i = {
            getCurrentView: "currentView",
            getBackView: "backView",
            getForwardView: "forwardView",
            getCurrentStateName: "currentStateName",
            nextViewOptions: "nextViewOptions",
            clearHistory: "clearHistory"
        };
        return s(i, function (t, o) {
            i[o] = function () {
                return n("." + o, "." + t), e[t].apply(this, arguments)
            }
        }), i
    }]), a.factory("$ionicViewSwitcher", ["$timeout", "$document", "$q", "$ionicClickBlock", "$ionicConfig", "$ionicNavBarDelegate", function (e, t, n, i, o, r) {
        function a(e, t) {
            return u(e)["abstract"] ? u(e).name : t ? t.stateId || t.viewId : ionic.Utils.nextUid()
        }

        function u(e) {
            return e && e.$$state && e.$$state.self || {}
        }

        function d(e, t, n, i) {
            var r = u(e), a = w || D(t, "view-transition") || r.viewTransition || o.views.transition() || "ios",
                s = o.navBar.transition();
            return n = b || D(t, "view-direction") || r.viewDirection || n || "none", c(h(i), {
                transition: a,
                navBarTransition: "view" === s ? a : s,
                direction: n,
                shouldAnimate: "none" !== a && "none" !== n
            })
        }

        function h(e) {
            return e = e || {}, {
                viewId: e.viewId,
                historyId: e.historyId,
                stateId: e.stateId,
                stateName: e.stateName,
                stateParams: e.stateParams
            }
        }

        function p(e, t) {
            return arguments.length > 1 ? void D(e, x, t) : D(e, x)
        }

        function v(e) {
            if (e && e.length) {
                var t = e.scope();
                t && (t.$emit("$ionicView.unloaded", e.data(B)), t.$destroy()), e.remove()
            }
        }

        function g(e, t) {
            var n = e.lastIndexOf("."), i = t.lastIndexOf(".");
            if (0 > n || 0 > i) return !1;
            var o = e.substring(0, n), r = t.substring(0, i);
            return o === r
        }

        function m(e, t) {
            if (!e) return null;
            var n = angular.element(e).attr("abstract"), i = angular.element(e).attr("state");
            if ("true" !== n) return i === t.stateName ? angular.element(e).scope() : null;
            for (var o = $(e), r = 0; r < o.length; r++) {
                var a = angular.element(o[r]).attr("state");
                if (a === t.stateName) return t.abstractView = !0, angular.element(o[r]).scope()
            }
            return null
        }

        function $(e) {
            for (var t = [], n = angular.element(e).find("ion-nav-view"), i = 0; i < n.length; i++) {
                for (var o = angular.element(n[i]).children(), r = [], a = 0; a < o.length; a++) r = r.concat(o[a]);
                t = t.concat(r)
            }
            return t
        }

        var w, b, y = "webkitTransitionEnd transitionend", S = "$noCache", k = "$destroyEle", C = "$eleId",
            T = "$accessed", I = "$fallbackTimer", B = "$viewData", x = "nav-view", A = "active", V = "cached",
            E = "stage", P = 0;
        ionic.transition = ionic.transition || {}, ionic.transition.isActive = !1;
        var _, D = ionic.DomUtil.cachedAttr, L = [], R = 1100, M = {
            create: function (t, s, f, $, x, _) {
                var N, z, O, H = ++P, q = {
                    init: function (e, t) {
                        M.isTransitioning(!0), q.loadViewElements(e), q.render(e, function () {
                            t && t()
                        })
                    }, loadViewElements: function (e) {
                        var n, i, o, r = t.getViewElements(), c = a(s, f), u = t.activeEleId();
                        for (n = 0, i = r.length; i > n && (o = r.eq(n), o.data(C) === c ? o.data(S) ? (o.data(C, c + ionic.Utils.nextUid()), o.data(k, !0)) : N = o : l(u) && o.data(C) === u && (z = o), !N || !z); n++) ;
                        O = !!N, O || (N = e.ele || M.createViewEle(s), N.data(C, c)), _ && t.activeEleId(c), e.ele = null
                    }, render: function (e, n) {
                        if (O) ionic.Utils.reconnectScope(N.scope()); else {
                            p(N, E);
                            var i = d(s, N, e.direction, f),
                                r = o.transitions.views[i.transition] || o.transitions.views.none;
                            r(N, null, i.direction, !0).run(0), N.data(B, {
                                viewId: i.viewId,
                                historyId: i.historyId,
                                stateName: i.stateName,
                                stateParams: i.stateParams
                            }), (u(s).cache === !1 || "false" === u(s).cache || "false" == N.attr("cache-view") || 0 === o.views.maxCache()) && N.data(S, !0);
                            var a = t.appendViewElement(N, s);
                            delete i.direction, delete i.transition, a.$emit("$ionicView.loaded", i)
                        }
                        N.data(T, Date.now()), n && n()
                    }, transition: function (a, l, u) {
                        function v() {
                            p(N, F.shouldAnimate ? "entering" : A), p(z, F.shouldAnimate ? "leaving" : V), F.run(1), r._instances.forEach(function (e) {
                                e.triggerTransitionStart(H)
                            }), F.shouldAnimate || m()
                        }

                        function g(e) {
                            e.target === this && m()
                        }

                        function m() {
                            m.x || (m.x = !0, N.off(y, g), e.cancel(N.data(I)), z && e.cancel(z.data(I)), C && C.resolve(t), H === P && (n.all(L).then(M.transitionEnd), q.emit("after", T, B), q.cleanup(T)), r._instances.forEach(function (e) {
                                e.triggerTransitionEnd()
                            }), w = b = f = $ = N = z = null)
                        }

                        function S(e) {
                            e.target === this && k()
                        }

                        function k() {
                            p(N, V), p(z, A), N.off(y, S), e.cancel(N.data(I)), M.transitionEnd([t])
                        }

                        var C, T = d(s, N, a, f), B = c(c({}, T), h($));
                        T.transitionId = B.transitionId = H, T.fromCache = !!O, T.enableBack = !!l, T.renderStart = x, T.renderEnd = _, D(N.parent(), "nav-view-transition", T.transition), D(N.parent(), "nav-view-direction", T.direction), e.cancel(N.data(I));
                        var U = o.transitions.views[T.transition] || o.transitions.views.none,
                            F = U(N, z, T.direction, T.shouldAnimate && u && _);
                        if (F.shouldAnimate && (N.on(y, g), N.data(I, e(m, R)), i.show(R)), x && (q.emit("before", T, B), p(N, E), F.run(0)), _ && (C = n.defer(), L.push(C.promise)), x && _) e(function () {
                            ionic.requestAnimationFrame(v)
                        }); else {
                            if (!_) return p(N, "entering"), p(z, "leaving"), {
                                run: F.run, cancel: function (t) {
                                    t ? (N.on(y, S), N.data(I, e(k, R)), i.show(R)) : k(), F.shouldAnimate = t, F.run(0), F = null
                                }
                            };
                            _ && v()
                        }
                    }, emit: function (e, t, n) {
                        var i, o = m(N, t), r = m(z, n);
                        !t.viewId || t.abstractView ? r && (r.$emit("$ionicView.beforeLeave", n), r.$emit("$ionicView.leave", n), r.$emit("$ionicView.afterLeave", n), r.$broadcast("$ionicParentView.beforeLeave", n), r.$broadcast("$ionicParentView.leave", n), r.$broadcast("$ionicParentView.afterLeave", n)) : ("after" == e && (o && (o.$emit("$ionicView.enter", t), o.$broadcast("$ionicParentView.enter", t)), r ? (r.$emit("$ionicView.leave", n), r.$broadcast("$ionicParentView.leave", n)) : o && n && n.viewId && t.stateName !== n.stateName && (i = g(t.stateName, n.stateName), i && o.$emit("$ionicNavView.leave", n))), o && (o.$emit("$ionicView." + e + "Enter", t), o.$broadcast("$ionicParentView." + e + "Enter", t)), r ? (r.$emit("$ionicView." + e + "Leave", n), r.$broadcast("$ionicParentView." + e + "Leave", n)) : o && n && n.viewId && t.stateName !== n.stateName && (i = g(t.stateName, n.stateName), i && o.$emit("$ionicNavView." + e + "Leave", n)))
                    }, cleanup: function (e) {
                        z && "back" == e.direction && !o.views.forwardCache() && v(z);
                        var n, i, r, a = t.getViewElements(), c = a.length, s = c - 1 > o.views.maxCache(),
                            l = Date.now();
                        for (n = 0; c > n; n++) i = a.eq(n), s && i.data(T) < l ? (l = i.data(T), r = a.eq(n)) : i.data(k) && p(i) != A && v(i);
                        v(r), N.data(S) && N.data(k, !0)
                    }, enteringEle: function () {
                        return N
                    }, leavingEle: function () {
                        return z
                    }
                };
                return q
            }, transitionEnd: function (e) {
                s(e, function (e) {
                    e.transitionEnd()
                }), M.isTransitioning(!1), i.hide(), L = []
            }, nextTransition: function (e) {
                w = e
            }, nextDirection: function (e) {
                b = e
            }, isTransitioning: function (t) {
                return arguments.length && (ionic.transition.isActive = !!t, e.cancel(_), t && (_ = e(function () {
                    M.isTransitioning(!1)
                }, 999))), ionic.transition.isActive
            }, createViewEle: function (e) {
                var n = t[0].createElement("div");
                return e && e.$template && (n.innerHTML = e.$template, 1 === n.children.length) ? (n.children[0].classList.add("pane"), e.$$state && e.$$state.self && e.$$state.self["abstract"] ? angular.element(n.children[0]).attr("abstract", "true") : e.$$state && e.$$state.self && angular.element(n.children[0]).attr("state", e.$$state.self.name), f(n.children[0])) : (n.className = "pane", f(n))
            }, viewEleIsActive: function (e, t) {
                p(e, t ? A : V)
            }, getTransitionData: d, navViewAttr: p, destroyViewEle: v
        };
        return M
    }]), angular.module("ngIOS9UIWebViewPatch", ["ng"]).config(["$provide", function (e) {
        "use strict";
        e.decorator("$browser", ["$delegate", "$window", function (e, t) {
            function n(e) {
                return /(iPhone|iPad|iPod).* OS 9_\d/.test(e) && !/Version\/9\./.test(e)
            }

            function i(e) {
                function t() {
                    n = null
                }

                var n = null, i = e.url;
                return e.url = function () {
                    return arguments.length ? (n = arguments[0], i.apply(e, arguments)) : n || i.apply(e, arguments)
                }, window.addEventListener("popstate", t, !1), window.addEventListener("hashchange", t, !1), e
            }

            return n(t.navigator.userAgent) ? i(e) : e
        }])
    }]), a.config(["$provide", function (e) {
        e.decorator("$compile", ["$delegate", function (e) {
            return e.$$addScopeInfo = function (e, t, n, i) {
                var o = n ? i ? "$isolateScopeNoTemplate" : "$isolateScope" : "$scope";
                e.data(o, t)
            }, e
        }])
    }]), a.config(["$provide", function (e) {
        function t(e, t) {
            return e.__hash = e.hash, e.hash = function (n) {
                return l(n) && n.length > 0 && t(function () {
                    var e = document.querySelector(".scroll-content");
                    e && (e.scrollTop = 0)
                }, 0, !1), e.__hash(n)
            }, e
        }

        e.decorator("$location", ["$delegate", "$timeout", t])
    }]), a.controller("$ionicHeaderBar", ["$scope", "$element", "$attrs", "$q", "$ionicConfig", "$ionicHistory", function (e, t, n, i, o, r) {
        function a(e) {
            return C[e] || (C[e] = t[0].querySelector("." + e)), C[e]
        }

        var c = "title", s = "back-text", l = "back-button", u = "default-title", d = "previous-title", f = "hide",
            h = this, p = "", v = "", g = 0, m = 0, $ = "", w = !1, b = !0, y = !0, S = !1, k = 0;
        h.beforeEnter = function (t) {
            e.$broadcast("$ionicView.beforeEnter", t)
        }, h.title = function (e) {
            return arguments.length && e !== p && (a(c).innerHTML = e, p = e, k = 0), p
        }, h.enableBack = function (e, t) {
            return arguments.length && (w = e, t || h.updateBackButton()), w
        }, h.showBack = function (e, t) {
            return arguments.length && (b = e, t || h.updateBackButton()), b
        }, h.showNavBack = function (e) {
            y = e, h.updateBackButton()
        }, h.updateBackButton = function () {
            var e;
            (b && y && w) !== S && (S = b && y && w, e = a(l), e && e.classList[S ? "remove" : "add"](f)), w && (e = e || a(l), e && (h.backButtonIcon !== o.backButton.icon() && (e = a(l + " .icon"), e && (h.backButtonIcon = o.backButton.icon(), e.className = "icon " + h.backButtonIcon)), h.backButtonText !== o.backButton.text() && (e = a(l + " .back-text"), e && (e.textContent = h.backButtonText = o.backButton.text()))))
        }, h.titleTextWidth = function () {
            var e = a(c);
            if (e) for (var t = angular.element(e).children(), n = 0; n < t.length; n++) if (angular.element(t[n]).hasClass("nav-bar-title")) {
                e = t[n];
                break
            }
            var i = ionic.DomUtil.getTextBounds(e);
            return k = Math.min(i && i.width || 30)
        }, h.titleWidth = function () {
            var e = h.titleTextWidth(), t = a(c).offsetWidth;
            return e > t && (e = t + (g - m - 5)), e
        }, h.titleTextX = function () {
            return t[0].offsetWidth / 2 - h.titleWidth() / 2
        }, h.titleLeftRight = function () {
            return g - m
        }, h.backButtonTextLeft = function () {
            for (var e = 0, t = a(s); t;) e += t.offsetLeft, t = t.parentElement;
            return e
        }, h.resetBackButton = function (e) {
            if (o.backButton.previousTitleText()) {
                var t = a(d);
                if (t) {
                    t.classList.remove(f);
                    var n = e && r.getViewById(e.viewId), i = r.backTitle(n);
                    i !== v && (v = t.innerHTML = i)
                }
                var c = a(u);
                c && c.classList.remove(f)
            }
        }, h.align = function (e) {
            var i = a(c);
            e = e || n.alignTitle || o.navBar.alignTitle();
            var r = h.calcWidths(e, !1);
            if (b && v && o.backButton.previousTitleText()) {
                var s = h.calcWidths(e, !0), l = t[0].offsetWidth - s.titleLeft - s.titleRight;
                h.titleTextWidth() <= l && (r = s)
            }
            return h.updatePositions(i, r.titleLeft, r.titleRight, r.buttonsLeft, r.buttonsRight, r.css, r.showPrevTitle)
        }, h.calcWidths = function (e, n) {
            var i, o, r, h, p, v, g, m, $, w = a(c), y = a(l), S = t[0].childNodes, k = 0, C = 0, T = 0, I = 0, B = "",
                x = 0;
            for (i = 0; i < S.length; i++) {
                if (p = S[i], g = 0, 1 == p.nodeType) {
                    if (p === w) {
                        $ = !0;
                        continue
                    }
                    if (p.classList.contains(f)) continue;
                    if (b && p === y) {
                        for (o = 0; o < p.childNodes.length; o++) if (h = p.childNodes[o], 1 == h.nodeType) if (h.classList.contains(s)) for (r = 0; r < h.children.length; r++) if (v = h.children[r], n) {
                            if (v.classList.contains(u)) continue;
                            x += v.offsetWidth
                        } else {
                            if (v.classList.contains(d)) continue;
                            x += v.offsetWidth
                        } else x += h.offsetWidth; else 3 == h.nodeType && h.nodeValue.trim() && (m = ionic.DomUtil.getTextBounds(h), x += m && m.width || 0);
                        g = x || p.offsetWidth
                    } else g = p.offsetWidth
                } else 3 == p.nodeType && p.nodeValue.trim() && (m = ionic.DomUtil.getTextBounds(p), g = m && m.width || 0);
                $ ? C += g : k += g
            }
            if ("left" == e) B = "title-left", k && (T = k + 15), C && (I = C + 15); else if ("right" == e) B = "title-right", k && (T = k + 15), C && (I = C + 15); else {
                var A = Math.max(k, C) + 10;
                A > 10 && (T = I = A)
            }
            return {
                backButtonWidth: x,
                buttonsLeft: k,
                buttonsRight: C,
                titleLeft: T,
                titleRight: I,
                showPrevTitle: n,
                css: B
            }
        }, h.updatePositions = function (e, n, r, c, s, l, p) {
            var v = i.defer();
            if (e && (n !== g && (e.style.left = n ? n + "px" : "", g = n), r !== m && (e.style.right = r ? r + "px" : "", m = r), l !== $ && (l && e.classList.add(l), $ && e.classList.remove($), $ = l)), o.backButton.previousTitleText()) {
                var w = a(d), b = a(u);
                w && w.classList[p ? "remove" : "add"](f), b && b.classList[p ? "add" : "remove"](f)
            }
            return ionic.requestAnimationFrame(function () {
                if (e && e.offsetWidth + 10 < e.scrollWidth) {
                    var n = s + 5, i = t[0].offsetWidth - g - h.titleTextWidth() - 20;
                    r = n > i ? n : i, r !== m && (e.style.right = r + "px", m = r)
                }
                v.resolve()
            }), v.promise
        }, h.setCss = function (e, t) {
            ionic.DomUtil.cachedStyles(a(e), t)
        };
        var C = {};
        e.$on("$destroy", function () {
            for (var e in C) C[e] = null
        })
    }]), a.controller("$ionInfiniteScroll", ["$scope", "$attrs", "$element", "$timeout", function (e, t, n, i) {
        function o() {
            ionic.requestAnimationFrame(function () {
                n[0].classList.add("active")
            }), s.isLoading = !0, e.$parent && e.$parent.$apply(t.onInfinite || "")
        }

        function r() {
            ionic.requestAnimationFrame(function () {
                n[0].classList.remove("active")
            }), i(function () {
                s.jsScrolling && s.scrollView.resize(), (s.jsScrolling && s.scrollView.__container && s.scrollView.__container.offsetHeight > 0 || !s.jsScrolling) && s.checkBounds()
            }, 30, !1), s.isLoading = !1
        }

        function a() {
            if (!s.isLoading) {
                var e = {};
                if (s.jsScrolling) {
                    e = s.getJSMaxScroll();
                    var t = s.scrollView.getValues();
                    (-1 !== e.left && t.left >= e.left || -1 !== e.top && t.top >= e.top) && o()
                } else e = s.getNativeMaxScroll(), (-1 !== e.left && s.scrollEl.scrollLeft >= e.left - s.scrollEl.clientWidth || -1 !== e.top && s.scrollEl.scrollTop >= e.top - s.scrollEl.clientHeight) && o()
            }
        }

        function c(e) {
            var n = (t.distance || "2.5%").trim(), i = -1 !== n.indexOf("%");
            return i ? e * (1 - parseFloat(n) / 100) : e - parseFloat(n)
        }

        var s = this;
        s.isLoading = !1, e.icon = function () {
            return l(t.icon) ? t.icon : "ion-load-d"
        }, e.spinner = function () {
            return l(t.spinner) ? t.spinner : ""
        }, e.$on("scroll.infiniteScrollComplete", function () {
            r()
        }), e.$on("$destroy", function () {
            s.scrollCtrl && s.scrollCtrl.$element && s.scrollCtrl.$element.off("scroll", s.checkBounds), s.scrollEl && s.scrollEl.removeEventListener && s.scrollEl.removeEventListener("scroll", s.checkBounds)
        }), s.checkBounds = ionic.Utils.throttle(a, 300), s.getJSMaxScroll = function () {
            var e = s.scrollView.getScrollMax();
            return {
                left: s.scrollView.options.scrollingX ? c(e.left) : -1,
                top: s.scrollView.options.scrollingY ? c(e.top) : -1
            }
        }, s.getNativeMaxScroll = function () {
            var e = {left: s.scrollEl.scrollWidth, top: s.scrollEl.scrollHeight},
                t = window.getComputedStyle(s.scrollEl) || {};
            return {
                left: !e.left || "scroll" !== t.overflowX && "auto" !== t.overflowX && "scroll" !== s.scrollEl.style["overflow-x"] ? -1 : c(e.left),
                top: !e.top || "scroll" !== t.overflowY && "auto" !== t.overflowY && "scroll" !== s.scrollEl.style["overflow-y"] ? -1 : c(e.top)
            }
        }, s.__finishInfiniteScroll = r
    }]), a.service("$ionicListDelegate", ionic.DelegateService(["showReorder", "showDelete", "canSwipeItems", "closeOptionButtons"])).controller("$ionicList", ["$scope", "$attrs", "$ionicListDelegate", "$ionicHistory", function (e, t, n, i) {
        var o = this, r = !0, a = !1, c = !1, s = n._registerInstance(o, t.delegateHandle, function () {
            return i.isActiveScope(e)
        });
        e.$on("$destroy", s), o.showReorder = function (e) {
            return arguments.length && (a = !!e), a
        }, o.showDelete = function (e) {
            return arguments.length && (c = !!e), c
        }, o.canSwipeItems = function (e) {
            return arguments.length && (r = !!e), r
        }, o.closeOptionButtons = function () {
            o.listView && o.listView.clearDragEffects()
        }
    }]), a.controller("$ionicNavBar", ["$scope", "$element", "$attrs", "$compile", "$timeout", "$ionicNavBarDelegate", "$ionicConfig", "$ionicHistory", function (e, t, n, i, o, r, a, c) {
        function u(e, t) {
            var n = console.warn || console.log;
            n && n.call(console, "navBarController." + e + " is deprecated, please use " + t + " instead")
        }

        function d(e) {
            return x[e] ? f(x[e]) : void 0
        }

        function h() {
            for (var e = 0; e < B.length; e++) if (B[e].isActive) return B[e]
        }

        function p() {
            for (var e = 0; e < B.length; e++) if (!B[e].isActive) return B[e]
        }

        function v(e, t) {
            e && ionic.DomUtil.cachedAttr(e.containerEle(), "nav-bar", t)
        }

        function g(e) {
            ionic.DomUtil.cachedAttr(t, "nav-swipe", e)
        }

        var m, $, w, b = "hide", y = "$ionNavBarController", S = "primaryButtons", k = "secondaryButtons",
            C = "backButton", T = "primaryButtons secondaryButtons leftButtons rightButtons title".split(" "), I = this,
            B = [], x = {}, A = !0;
        t.parent().data(y, I);
        var V = n.delegateHandle || "navBar" + ionic.Utils.nextUid(), E = r._registerInstance(I, V);
        I.init = function () {
            t.addClass("nav-bar-container"), ionic.DomUtil.cachedAttr(t, "nav-bar-transition", a.views.transition()), I.createHeaderBar(!1), I.createHeaderBar(!0), e.$emit("ionNavBar.init", V)
        }, I.createHeaderBar = function (o) {
            function r(e, t) {
                e && ("title" === t ? g.append(e) : "rightButtons" == t || t == k && "left" != a.navBar.positionSecondaryButtons() || t == S && "right" == a.navBar.positionPrimaryButtons() ? (v || (v = f('<div class="buttons buttons-right">'), h.append(v)), t == k ? v.append(e) : v.prepend(e)) : (p || (p = f('<div class="buttons buttons-left">'), m[C] ? m[C].after(p) : h.prepend(p)), t == k ? p.append(e) : p.prepend(e)))
            }

            var c = f('<div class="nav-bar-block">');
            ionic.DomUtil.cachedAttr(c, "nav-bar", o ? "active" : "cached");
            var u = n.alignTitle || a.navBar.alignTitle(),
                h = f("<ion-header-bar>").addClass(n["class"]).attr("align-title", u);
            l(n.noTapScroll) && h.attr("no-tap-scroll", n.noTapScroll);
            var p, v, g = f('<div class="title title-' + u + '">'), m = {}, $ = {};
            m[C] = d(C), m[C] && h.append(m[C]), h.append(g), s(T, function (e) {
                m[e] = d(e), r(m[e], e)
            });
            for (var w = 0; w < h[0].children.length; w++) h[0].children[w].classList.add("header-item");
            c.append(h), t.append(i(c)(e.$new()));
            var y = h.data("$ionHeaderBarController");
            y.backButtonIcon = a.backButton.icon(), y.backButtonText = a.backButton.text();
            var I = {
                isActive: o, title: function (e) {
                    y.title(e)
                }, setItem: function (e, t) {
                    I.removeItem(t), e ? ("title" === t && I.title(""), r(e, t), m[t] && m[t].addClass(b), $[t] = e) : m[t] && m[t].removeClass(b)
                }, removeItem: function (e) {
                    $[e] && ($[e].scope().$destroy(), $[e].remove(), $[e] = null)
                }, containerEle: function () {
                    return c
                }, headerBarEle: function () {
                    return h
                }, afterLeave: function () {
                    s(T, function (e) {
                        I.removeItem(e)
                    }), y.resetBackButton()
                }, controller: function () {
                    return y
                }, destroy: function () {
                    s(T, function (e) {
                        I.removeItem(e)
                    }), c.scope().$destroy();
                    for (var e in m) m[e] && (m[e].removeData(), m[e] = null);
                    p && p.removeData(), v && v.removeData(), g.removeData(), h.removeData(), c.remove(), c = h = g = p = v = null
                }
            };
            return B.push(I), I
        }, I.navElement = function (e, t) {
            return l(t) && (x[e] = t), x[e]
        }, I.update = function (e) {
            var t = !e.hasHeaderBar && e.showNavBar;
            e.transition = a.views.transition(), t || (e.direction = "none"), I.enable(t);
            var n = I.isInitialized ? p() : h(), i = I.isInitialized ? h() : null, o = n.controller();
            o.enableBack(e.enableBack, !0), o.showBack(e.showBack, !0), o.updateBackButton(), I.title(e.title, n), I.showBar(t), e.navBarItems && s(T, function (t) {
                n.setItem(e.navBarItems[t], t)
            }), I.transition(n, i, e), I.isInitialized = !0, g("")
        }, I.transition = function (n, i, r) {
            function c() {
                for (var e = 0; e < B.length; e++) B[e].isActive = !1;
                n.isActive = !0, v(n, "active"), v(i, "cached"), I.activeTransition = d = $ = null
            }

            var s = n.controller(), l = a.transitions.navBar[r.navBarTransition] || a.transitions.navBar.none,
                u = r.transitionId;
            s.beforeEnter(r);
            var d = l(n, i, r.direction, r.shouldAnimate && I.isInitialized);
            ionic.DomUtil.cachedAttr(t, "nav-bar-transition", r.navBarTransition), ionic.DomUtil.cachedAttr(t, "nav-bar-direction", r.direction), d.shouldAnimate && r.renderEnd ? v(n, "stage") : (v(n, "entering"), v(i, "leaving")), s.resetBackButton(r), d.run(0), I.activeTransition = {
                run: function (e) {
                    d.shouldAnimate = !1, d.direction = "back", d.run(e)
                }, cancel: function (t, o, r) {
                    g(o), v(i, "active"), v(n, "cached"), d.shouldAnimate = t, d.run(0), I.activeTransition = d = null;
                    var a;
                    r.showBar !== I.showBar() && I.showBar(r.showBar), r.showBackButton !== I.showBackButton() && I.showBackButton(r.showBackButton), a && e.$apply()
                }, complete: function (e, t) {
                    g(t), d.shouldAnimate = e, d.run(1), $ = c
                }
            }, o(s.align, 16), (m = function () {
                w === u && (v(n, "entering"), v(i, "leaving"), d.run(1), $ = function () {
                    w != u && d.shouldAnimate || c()
                }, m = null)
            })()
        }, I.triggerTransitionStart = function (e) {
            w = e, m && m()
        }, I.triggerTransitionEnd = function () {
            $ && $()
        }, I.showBar = function (t) {
            return arguments.length && (I.visibleBar(t), e.$parent.$hasHeader = !!t), !!e.$parent.$hasHeader
        }, I.visibleBar = function (e) {
            e && !A ? (t.removeClass(b), I.align()) : !e && A && t.addClass(b), A = e
        }, I.enable = function (e) {
            I.visibleBar(e);
            for (var t = 0; t < r._instances.length; t++) r._instances[t] !== I && r._instances[t].visibleBar(!1)
        }, I.showBackButton = function (t) {
            if (arguments.length) {
                for (var n = 0; n < B.length; n++) B[n].controller().showNavBack(!!t);
                e.$isBackButtonShown = !!t
            }
            return e.$isBackButtonShown
        }, I.showActiveBackButton = function (e) {
            var t = h();
            return t ? arguments.length ? t.controller().showBack(e) : t.controller().showBack() : void 0
        }, I.title = function (t, n) {
            return l(t) && (t = t || "", n = n || h(), n && n.title(t), e.$title = t, c.currentTitle(t)), e.$title
        }, I.align = function (e, t) {
            t = t || h(), t && t.controller().align(e)
        }, I.hasTabsTop = function (e) {
            t[e ? "addClass" : "removeClass"]("nav-bar-tabs-top")
        }, I.hasBarSubheader = function (e) {
            t[e ? "addClass" : "removeClass"]("nav-bar-has-subheader")
        }, I.changeTitle = function (e) {
            u("changeTitle(val)", "title(val)"), I.title(e)
        }, I.setTitle = function (e) {
            u("setTitle(val)", "title(val)"), I.title(e)
        }, I.getTitle = function () {
            return u("getTitle()", "title()"), I.title()
        }, I.back = function () {
            u("back()", "$ionicHistory.goBack()"), c.goBack()
        }, I.getPreviousTitle = function () {
            u("getPreviousTitle()", "$ionicHistory.backTitle()"), c.goBack()
        }, e.$on("$destroy", function () {
            e.$parent.$hasHeader = !1, t.parent().removeData(y);
            for (var n = 0; n < B.length; n++) B[n].destroy();
            t.remove(), t = B = null, E()
        })
    }]), a.controller("$ionicNavView", ["$scope", "$element", "$attrs", "$compile", "$controller", "$ionicNavBarDelegate", "$ionicNavViewDelegate", "$ionicHistory", "$ionicViewSwitcher", "$ionicConfig", "$ionicScrollDelegate", "$ionicSideMenuDelegate", function (e, t, n, i, o, r, a, s, l, u, d, f) {
        function h(e, n) {
            for (var i, o, r = t.children(), a = 0, c = r.length; c > a; a++) if (i = r.eq(a), V(i) == I) {
                o = i.scope(), o && o.$emit(e.name.replace("Tabs", "View"), n), o && o.$broadcast(e.name.replace("Tabs", "ParentView"), n);
                break
            }
        }

        function p(e) {
            ionic.DomUtil.cachedAttr(t, "nav-swipe", e)
        }

        function v(e, t) {
            var n = m();
            n && n.hasTabsTop(t)
        }

        function g(e, t) {
            var n = m();
            n && n.hasBarSubheader(t)
        }

        function m() {
            if (w) for (var e = 0; e < r._instances.length; e++) if (r._instances[e].$$delegateHandle == w) return r._instances[e];
            return t.inheritedData("$ionNavBarController")
        }

        var $, w, b, y, S, k = "$eleId", C = "$destroyEle", T = "$noCache", I = "active", B = "cached", x = this,
            A = !1, V = l.navViewAttr;
        x.scope = e, x.element = t, x.init = function () {
            var i = n.name || "", o = t.parent().inheritedData("$uiView"), r = o && o.state ? o.state.name : "";
            i.indexOf("@") < 0 && (i = i + "@" + r);
            var c = {name: i, state: null};
            t.data("$uiView", c);
            var s = a._registerInstance(x, n.delegateHandle);
            return e.$on("$destroy", function () {
                s(), x.isSwipeFreeze && d.freezeAllScrolls(!1)
            }), e.$on("$ionicHistory.deselect", x.cacheCleanup), e.$on("$ionicTabs.top", v), e.$on("$ionicSubheader", g), e.$on("$ionicTabs.beforeLeave", h), e.$on("$ionicTabs.afterLeave", h), e.$on("$ionicTabs.leave", h), ionic.Platform.ready(function () {
                ionic.Platform.isWebView() && ionic.Platform.isIOS() && x.initSwipeBack()
            }), c
        }, x.register = function (t) {
            var n = c({}, s.currentView()), i = s.register(e, t);
            x.update(i);
            var o = s.getViewById(i.viewId) || {}, r = y !== i.viewId;
            x.render(i, t, o, n, r, !0)
        }, x.update = function (e) {
            A = !0, $ = e.direction;
            var n = t.parent().inheritedData("$ionNavViewController");
            n && (n.isPrimary(!1), ("enter" === $ || "exit" === $) && (n.direction($), "enter" === $ && ($ = "none")))
        }, x.render = function (e, t, n, i, o, r) {
            var a = l.create(x, t, n, i, o, r);
            a.init(e, function () {
                a.transition(x.direction(), e.enableBack, !S), y = S = null
            })
        }, x.beforeEnter = function (e) {
            if (A) {
                w = e.navBarDelegate;
                var t = m();
                t && t.update(e), p("")
            }
        }, x.activeEleId = function (e) {
            return arguments.length && (b = e), b
        }, x.transitionEnd = function () {
            var e, n, i, o = t.children();
            for (e = 0, n = o.length; n > e; e++) i = o.eq(e), i.data(k) === b ? V(i, I) : ("leaving" === V(i) || V(i) === I || V(i) === B) && (i.data(C) || i.data(T) ? l.destroyViewEle(i) : (V(i, B), ionic.Utils.disconnectScope(i.scope())));
            p(""), x.isSwipeFreeze && d.freezeAllScrolls(!1)
        }, x.cacheCleanup = function () {
            for (var e = t.children(), n = 0, i = e.length; i > n; n++) e.eq(n).data(C) && l.destroyViewEle(e.eq(n))
        }, x.clearCache = function (e) {
            var n, i, o, r, a, c, s = t.children();
            for (o = 0, r = s.length; r > o; o++) if (n = s.eq(o), e) for (c = n.data(k), a = 0; a < e.length; a++) c === e[a] && l.destroyViewEle(n); else V(n) == B ? l.destroyViewEle(n) : V(n) == I && (i = n.scope(), i && i.$broadcast("$ionicView.clearCache"))
        }, x.getViewElements = function () {
            return t.children()
        }, x.appendViewElement = function (n, r) {
            var a = i(n);
            t.append(n);
            var c = e.$new();
            if (r && r.$$controller) {
                r.$scope = c;
                var s = o(r.$$controller, r);
                r.$$controllerAs && (c[r.$$controllerAs] = s), t.children().data("$ngControllerController", s)
            }
            return a(c), c
        }, x.title = function (e) {
            var t = m();
            t && t.title(e)
        }, x.enableBackButton = function (e) {
            var t = m();
            t && t.enableBackButton(e)
        }, x.showBackButton = function (e) {
            var t = m();
            return t ? arguments.length ? t.showActiveBackButton(e) : t.showActiveBackButton() : !0
        }, x.showBar = function (e) {
            var t = m();
            return t ? arguments.length ? t.showBar(e) : t.showBar() : !0
        }, x.isPrimary = function (e) {
            return arguments.length && (A = e), A
        }, x.direction = function (e) {
            return arguments.length && ($ = e), $
        }, x.initSwipeBack = function () {
            function n(e) {
                if (A && u.views.swipeBackEnabled() && !f.isOpenRight() && (k = r(e), !(k > T))) {
                    v = s.backView();
                    var n = s.currentView();
                    if (v && v.historyId === n.historyId && n.canSwipeBack !== !1) {
                        b || (b = window.innerWidth), x.isSwipeFreeze = d.freezeAllScrolls(!0);
                        var a = {direction: "back"};
                        C = [], I = {showBar: x.showBar(), showBackButton: x.showBackButton()};
                        var p = l.create(x, a, v, n, !0, !1);
                        p.loadViewElements(a), p.render(a), c = p.transition("back", s.enabledBack(v), !0), h = m(), $ = ionic.onGesture("drag", i, t[0]), w = ionic.onGesture("release", o, t[0])
                    }
                }
            }

            function i(e) {
                if (A && c) {
                    var t = r(e);
                    if (C.push({t: Date.now(), x: t}), t >= b - 15) o(e); else {
                        var n = Math.min(Math.max(a(t), 0), 1);
                        c.run(n), h && h.activeTransition && h.activeTransition.run(n)
                    }
                }
            }

            function o(e) {
                if (A && c && C && C.length > 1) {
                    for (var t = Date.now(), n = r(e), s = C[C.length - 1], l = C.length - 2; l >= 0 && !(t - s.t > 200); l--) s = C[l];
                    var u = n >= C[C.length - 2].x, f = a(n), g = Math.abs(s.x - n) / (t - s.t);
                    if (y = v.viewId, S = .03 > f || f > .97, u && (f > .5 || g > .1)) {
                        var m = g > .5 || .05 > g || n > b - 45 ? "fast" : "slow";
                        p(S ? "" : m), v.go(), h && h.activeTransition && h.activeTransition.complete(!S, m)
                    } else p(S ? "" : "fast"), y = null, c.cancel(!S), h && h.activeTransition && h.activeTransition.cancel(!S, "fast", I), S = null
                }
                ionic.offGesture($, "drag", i), ionic.offGesture(w, "release", o), b = c = C = null, x.isSwipeFreeze = d.freezeAllScrolls(!1)
            }

            function r(e) {
                return ionic.tap.pointerCoord(e.gesture.srcEvent).x
            }

            function a(e) {
                return (e - k) / b
            }

            var c, h, v, g, $, w, b, k, C, T = u.views.swipeBackHitWidth(), I = {};
            g = ionic.onGesture("dragstart", n, t[0]), e.$on("$destroy", function () {
                ionic.offGesture(g, "dragstart", n), ionic.offGesture($, "drag", i), ionic.offGesture(w, "release", o), x.element = c = h = null
            })
        }
    }]), a.controller("$ionicRefresher", ["$scope", "$attrs", "$element", "$ionicBind", "$timeout", function (e, t, n, i, o) {
        function r(e) {
            e.touches = e.touches || [{screenX: e.screenX, screenY: e.screenY}], P = Math.floor(e.touches[0].screenY)
        }

        function a(e) {
            e.touches = e.touches || [{screenX: e.screenX, screenY: e.screenY}], P = e.touches[0].screenY
        }

        function c() {
            P = null, (D || T) && (T ? (T = !1, B = 0, x > A ? ($(), p(A, E)) : (p(0, E, m), I = !1)) : (B = 0, I = !1, h(!1)))
        }

        function s(e) {
            if (e.touches = e.touches || [{
                screenX: e.screenX,
                screenY: e.screenY
            }], (P || "mousemove" != e.type) && D && !(e.touches.length > 1)) {
                if (null === P && (P = e.touches[0].screenY), _ = e.touches[0].screenY - P, ionic.Platform.isAndroid() && 4.4 === ionic.Platform.version() && !ionic.Platform.isCrosswalk() && 0 === S.scrollTop && _ > 0 && (T = !0, e.preventDefault()), 0 >= _ - B || 0 !== S.scrollTop) return I && (I = !1, h(!1)), T && f(S, _ - -1 * B), void (0 !== x && d(0));
                _ > 0 && 0 === S.scrollTop && !I && (B = _), e.preventDefault(), I || (I = !0, h(!0)), T = !0, d((_ - B) / 3), !V && x > A ? (V = !0, ionic.requestAnimationFrame(g)) : V && A > x && (V = !1, ionic.requestAnimationFrame(m))
            }
        }

        function u(e) {
            D = 0 === e.target.scrollTop || T
        }

        function d(e) {
            k.style[ionic.CSS.TRANSFORM] = "translate3d(0px, " + e + "px, 0px)", x = e
        }

        function f(e, t) {
            e.scrollTop = t;
            var n = document.createEvent("UIEvents");
            n.initUIEvent("scroll", !0, !0, window, 1), e.dispatchEvent(n)
        }

        function h(e) {
            e ? ionic.requestAnimationFrame(function () {
                k.classList.add("overscroll"), w()
            }) : ionic.requestAnimationFrame(function () {
                k.classList.remove("overscroll"), b(), m()
            })
        }

        function p(e, t, n) {
            function i(e) {
                return --e * e * e + 1
            }

            function o() {
                var c = Date.now(), s = Math.min(1, (c - r) / t), l = i(s);
                d(Math.floor(l * (e - a) + a)), 1 > s ? ionic.requestAnimationFrame(o) : (5 > e && e > -5 && (I = !1, h(!1)), n && n())
            }

            var r = Date.now(), a = x;
            return a === e ? void n() : void ionic.requestAnimationFrame(o)
        }

        function v() {
            k && (ionic.off(L, a, k), ionic.off(R, s, k), ionic.off(M, c, k), ionic.off("mousedown", r, k), ionic.off("mousemove", s, k), ionic.off("mouseup", c, k)), S && ionic.off("scroll", u, S), S = null, k = null
        }

        function g() {
            n[0].classList.add("active"), e.$onPulling()
        }

        function m() {
            o(function () {
                n.removeClass("active refreshing refreshing-tail"), V && (V = !1)
            }, 150)
        }

        function $() {
            n[0].classList.add("refreshing");
            var t = e.$onRefresh();
            t && t.then && t["finally"](function () {
                e.$broadcast("scroll.refreshComplete")
            })
        }

        function w() {
            n[0].classList.remove("invisible")
        }

        function b() {
            n[0].classList.add("invisible")
        }

        function y() {
            n[0].classList.add("refreshing-tail")
        }

        var S, k, C = this, T = !1, I = !1, B = 0, x = 0, A = 60, V = !1, E = 500, P = null, _ = null, D = !0;
        l(t.pullingIcon) || t.$set("pullingIcon", "ion-android-arrow-down"), e.showSpinner = !l(t.refreshingIcon) && "none" != t.spinner, e.showIcon = l(t.refreshingIcon), i(e, t, {
            pullingIcon: "@",
            pullingText: "@",
            refreshingIcon: "@",
            refreshingText: "@",
            spinner: "@",
            disablePullingRotation: "@",
            $onRefresh: "&onRefresh",
            $onPulling: "&onPulling"
        }), e.$on("scroll.refreshComplete", function () {
            o(function () {
                ionic.requestAnimationFrame(y), p(0, E, m), o(function () {
                    I && (I = !1, h(!1))
                }, E)
            }, E)
        });
        var L, R, M;
        window.navigator.pointerEnabled ? (L = "pointerdown", R = "pointermove", M = "pointerup") : window.navigator.msPointerEnabled ? (L = "MSPointerDown", R = "MSPointerMove", M = "MSPointerUp") : (L = "touchstart", R = "touchmove", M = "touchend"), C.init = function () {
            if (S = n.parent().parent()[0], k = n.parent()[0], !(S && S.classList.contains("ionic-scroll") && k && k.classList.contains("scroll"))) throw new Error("Refresher must be immediate child of ion-content or ion-scroll");
            ionic.on(L, a, k), ionic.on(R, s, k), ionic.on(M, c, k), ionic.on("mousedown", r, k), ionic.on("mousemove", s, k), ionic.on("mouseup", c, k), ionic.on("scroll", u, S), e.$on("$destroy", v)
        }, C.getRefresherDomMethods = function () {
            return {activate: g, deactivate: m, start: $, show: w, hide: b, tail: y}
        }, C.__handleTouchmove = s, C.__getScrollChild = function () {
            return k
        }, C.__getScrollParent = function () {
            return S
        }
    }]), a.controller("$ionicScroll", ["$scope", "scrollViewOptions", "$timeout", "$window", "$location", "$document", "$ionicScrollDelegate", "$ionicHistory", function (e, t, n, i, o, r, a, c) {
        var s = this;
        s.__timeout = n, s._scrollViewOptions = t, s.isNative = function () {
            return !!t.nativeScrolling
        };
        var u, d = s.element = t.el, h = s.$element = f(d);
        u = s.isNative() ? s.scrollView = new ionic.views.ScrollNative(t) : s.scrollView = new ionic.views.Scroll(t), (h.parent().length ? h.parent() : h).data("$$ionicScrollController", s);
        var p = a._registerInstance(s, t.delegateHandle, function () {
            return c.isActiveScope(e)
        });
        l(t.bouncing) || ionic.Platform.ready(function () {
            u && u.options && (u.options.bouncing = !0, ionic.Platform.isAndroid() && (u.options.bouncing = !1, u.options.deceleration = .95))
        });
        var v = angular.bind(u, u.resize);
        angular.element(i).on("resize", v);
        var g = function (t) {
            var n = (t.originalEvent || t).detail || {};
            e.$onScroll && e.$onScroll({event: t, scrollTop: n.scrollTop || 0, scrollLeft: n.scrollLeft || 0})
        };
        h.on("scroll", g), e.$on("$destroy", function () {
            p(), u && u.__cleanup && u.__cleanup(), angular.element(i).off("resize", v), h && h.off("scroll", g), s._scrollViewOptions && (s._scrollViewOptions.el = null), t && (t.el = null), u = s.scrollView = t = s._scrollViewOptions = d = s.$element = h = null
        }), n(function () {
            u && u.run && u.run()
        }), s.getScrollView = function () {
            return u
        }, s.getScrollPosition = function () {
            return u.getValues()
        }, s.resize = function () {
            return n(v, 0, !1).then(function () {
                h && h.triggerHandler("scroll-resize")
            })
        }, s.scrollTop = function (e) {
            s.resize().then(function () {
                u && u.scrollTo(0, 0, !!e)
            })
        }, s.scrollBottom = function (e) {
            s.resize().then(function () {
                if (u) {
                    var t = u.getScrollMax();
                    u.scrollTo(t.left, t.top, !!e)
                }
            })
        }, s.scrollTo = function (e, t, n) {
            s.resize().then(function () {
                u && u.scrollTo(e, t, !!n)
            })
        }, s.zoomTo = function (e, t, n, i) {
            s.resize().then(function () {
                u && u.zoomTo(e, !!t, n, i)
            })
        }, s.zoomBy = function (e, t, n, i) {
            s.resize().then(function () {
                u && u.zoomBy(e, !!t, n, i)
            })
        }, s.scrollBy = function (e, t, n) {
            s.resize().then(function () {
                u && u.scrollBy(e, t, !!n)
            })
        }, s.anchorScroll = function (e) {
            s.resize().then(function () {
                if (u) {
                    var t = o.hash(), n = t && r[0].getElementById(t);
                    if (!t || !n) return void u.scrollTo(0, 0, !!e);
                    var i = n, a = 0, c = 0;
                    do null !== i && (a += i.offsetLeft), null !== i && (c += i.offsetTop), i = i.offsetParent; while (i.attributes != s.element.attributes && i.offsetParent);
                    u.scrollTo(a, c, !!e)
                }
            })
        }, s.freezeScroll = u.freeze, s.freezeScrollShut = u.freezeShut, s.freezeAllScrolls = function (e) {
            for (var t = 0; t < a._instances.length; t++) a._instances[t].freezeScroll(e)
        }, s._setRefresher = function (e, t, n) {
            s.refresher = t;
            var i = s.refresher.clientHeight || 60;
            u.activatePullToRefresh(i, n)
        }
    }]), a.controller("$ionicSideMenus", ["$scope", "$attrs", "$ionicSideMenuDelegate", "$ionicPlatform", "$ionicBody", "$ionicHistory", "$ionicScrollDelegate", "IONIC_BACK_PRIORITY", "$rootScope", function (e, t, n, i, o, r, a, c, s) {
        var l, d, f, p, v, g, m, $ = this, w = !0;
        $.$scope = e, $.initialize = function (e) {
            $.left = e.left, $.right = e.right, $.setContent(e.content), $.dragThresholdX = e.dragThresholdX || 10, r.registerHistory($.$scope)
        }, $.setContent = function (e) {
            e && ($.content = e, $.content.onDrag = function (e) {
                $._handleDrag(e)
            }, $.content.endDrag = function (e) {
                $._endDrag(e)
            })
        }, $.isOpenLeft = function () {
            return $.getOpenAmount() > 0
        }, $.isOpenRight = function () {
            return $.getOpenAmount() < 0
        }, $.toggleLeft = function (e) {
            if (!m && $.left.isEnabled) {
                var t = $.getOpenAmount();
                0 === arguments.length && (e = 0 >= t), $.content.enableAnimation(), e ? ($.openPercentage(100), s.$emit("$ionicSideMenuOpen", "left")) : ($.openPercentage(0), s.$emit("$ionicSideMenuClose", "left"))
            }
        }, $.toggleRight = function (e) {
            if (!m && $.right.isEnabled) {
                var t = $.getOpenAmount();
                0 === arguments.length && (e = t >= 0), $.content.enableAnimation(), e ? ($.openPercentage(-100), s.$emit("$ionicSideMenuOpen", "right")) : ($.openPercentage(0), s.$emit("$ionicSideMenuClose", "right"))
            }
        }, $.toggle = function (e) {
            "right" == e ? $.toggleRight() : $.toggleLeft()
        }, $.close = function () {
            $.openPercentage(0), s.$emit("$ionicSideMenuClose", "left"), s.$emit("$ionicSideMenuClose", "right")
        }, $.getOpenAmount = function () {
            return $.content && $.content.getTranslateX() || 0
        }, $.getOpenRatio = function () {
            var e = $.getOpenAmount();
            return e >= 0 ? e / $.left.width : e / $.right.width
        }, $.isOpen = function () {
            return 0 !== $.getOpenAmount()
        }, $.getOpenPercentage = function () {
            return 100 * $.getOpenRatio()
        }, $.openPercentage = function (e) {
            var t = e / 100;
            $.left && e >= 0 ? $.openAmount($.left.width * t) : $.right && 0 > e && $.openAmount($.right.width * t), o.enableClass(0 !== e, "menu-open"), $.content.setCanScroll(0 == e)
        }, $.openAmount = function (e) {
            var t = $.left && $.left.width || 0, n = $.right && $.right.width || 0;
            return ($.left && $.left.isEnabled || !(e > 0)) && ($.right && $.right.isEnabled || !(0 > e)) ? d && e > t ? void $.content.setTranslateX(t) : l && -n > e ? void $.content.setTranslateX(-n) : ($.content.setTranslateX(e), void (e >= 0 ? (d = !0, l = !1, e > 0 && ($.right && $.right.pushDown && $.right.pushDown(), $.left && $.left.bringUp && $.left.bringUp())) : (l = !0, d = !1, $.right && $.right.bringUp && $.right.bringUp(), $.left && $.left.pushDown && $.left.pushDown()))) : void $.content.setTranslateX(0)
        }, $.snapToRest = function (e) {
            $.content.enableAnimation(), f = !1;
            var t = $.getOpenRatio();
            if (0 === t) return void $.openPercentage(0);
            var n = .3, i = e.gesture.velocityX, o = e.gesture.direction;
            t > 0 && .5 > t && "right" == o && n > i ? $.openPercentage(0) : t > .5 && "left" == o && n > i ? $.openPercentage(100) : 0 > t && t > -.5 && "left" == o && n > i ? $.openPercentage(0) : .5 > t && "right" == o && n > i ? $.openPercentage(-100) : "right" == o && t >= 0 && (t >= .5 || i > n) ? $.openPercentage(100) : "left" == o && 0 >= t && (-.5 >= t || i > n) ? $.openPercentage(-100) : $.openPercentage(0)
        }, $.enableMenuWithBackViews = function (e) {
            return arguments.length && (w = !!e), w
        }, $.isAsideExposed = function () {
            return !!m
        }, $.exposeAside = function (e) {
            ($.left && $.left.isEnabled || $.right && $.right.isEnabled) && ($.close(), m = e, $.left && $.left.isEnabled && $.right && $.right.isEnabled ? $.content.setMarginLeftAndRight(m ? $.left.width : 0, m ? $.right.width : 0) : $.left && $.left.isEnabled ? $.content.setMarginLeft(m ? $.left.width : 0) : $.right && $.right.isEnabled && $.content.setMarginRight(m ? $.right.width : 0), $.$scope.$emit("$ionicExposeAside", m))
        }, $.activeAsideResizing = function (e) {
            o.enableClass(e, "aside-resizing")
        }, $._endDrag = function (e) {
            m || (f && $.snapToRest(e), p = null, v = null, g = null)
        }, $._handleDrag = function (t) {
            !m && e.dragContent && (p ? v = t.gesture.touches[0].pageX : (p = t.gesture.touches[0].pageX, v = p), !f && Math.abs(v - p) > $.dragThresholdX && (p = v, f = !0, $.content.disableAnimation(), g = $.getOpenAmount()), f && $.openAmount(g + (v - p)))
        }, $.canDragContent = function (t) {
            return arguments.length && (e.dragContent = !!t), e.dragContent
        }, $.edgeThreshold = 25, $.edgeThresholdEnabled = !1, $.edgeDragThreshold = function (e) {
            return arguments.length && (u(e) && e > 0 ? ($.edgeThreshold = e, $.edgeThresholdEnabled = !0) : $.edgeThresholdEnabled = !!e), $.edgeThresholdEnabled
        }, $.isDraggableTarget = function (t) {
            var n = $.edgeThresholdEnabled && !$.isOpen(),
                i = t.gesture.startEvent && t.gesture.startEvent.center && t.gesture.startEvent.center.pageX,
                o = !n || i <= $.edgeThreshold || i >= $.content.element.offsetWidth - $.edgeThreshold,
                a = r.backView(), c = w ? !0 : !a;
            if (!c) {
                var s = r.currentView() || {};
                return o && a.historyId !== s.historyId
            }
            return (e.dragContent || $.isOpen()) && o && !t.gesture.srcEvent.defaultPrevented && c && !t.target.tagName.match(/input|textarea|select|object|embed/i) && !t.target.isContentEditable && !(t.target.dataset ? t.target.dataset.preventScroll : "true" == t.target.getAttribute("data-prevent-scroll"))
        }, e.sideMenuContentTranslateX = 0;
        var b = h, y = angular.bind($, $.close);
        e.$watch(function () {
            return 0 !== $.getOpenAmount()
        }, function (e) {
            b(), e && (b = i.registerBackButtonAction(y, c.sideMenu))
        });
        var S = n._registerInstance($, t.delegateHandle, function () {
            return r.isActiveScope(e)
        });
        e.$on("$destroy", function () {
            S(), b(), $.$scope = null, $.content && ($.content.setCanScroll(!0), $.content.element = null, $.content = null)
        }), $.initialize({left: {width: 275}, right: {width: 275}})
    }]), function (e) {
        function t(e, i, o, r) {
            var a, c, s, l = document.createElement(f[e] || e);
            for (a in i) if (angular.isArray(i[a])) for (c = 0; c < i[a].length; c++) if (i[a][c].fn) for (s = 0; s < i[a][c].t; s++) t(a, i[a][c].fn(s, r), l, r); else t(a, i[a][c], l, r); else n(l, a, i[a]);
            o.appendChild(l)
        }

        function n(e, t, n) {
            e.setAttribute(f[t] || t, n)
        }

        function i(e, t) {
            var n = e.split(";"), i = n.slice(t), o = n.slice(0, n.length - i.length);
            return n = i.concat(o).reverse(), n.join(";") + ";" + n[0]
        }

        function o(e, t) {
            return e /= t / 2, 1 > e ? .5 * e * e * e : (e -= 2, .5 * (e * e * e + 2))
        }

        var r = "translate(32,32)", c = "stroke-opacity", s = "round", l = "indefinite", u = "750ms", d = "none", f = {
            a: "animate",
            an: "attributeName",
            at: "animateTransform",
            c: "circle",
            da: "stroke-dasharray",
            os: "stroke-dashoffset",
            f: "fill",
            lc: "stroke-linecap",
            rc: "repeatCount",
            sw: "stroke-width",
            t: "transform",
            v: "values"
        }, h = {v: "0,32,32;360,32,32", an: "transform", type: "rotate", rc: l, dur: u}, p = {
            sw: 4, lc: s, line: [{
                fn: function (e, t) {
                    return {
                        y1: "ios" == t ? 17 : 12,
                        y2: "ios" == t ? 29 : 20,
                        t: r + " rotate(" + (30 * e + (6 > e ? 180 : -180)) + ")",
                        a: [{
                            fn: function () {
                                return {an: c, dur: u, v: i("0;.1;.15;.25;.35;.45;.55;.65;.7;.85;1", e), rc: l}
                            }, t: 1
                        }]
                    }
                }, t: 12
            }]
        }, v = {
            android: {c: [{sw: 6, da: 128, os: 82, r: 26, cx: 32, cy: 32, f: d}]},
            ios: p,
            "ios-small": p,
            bubbles: {
                sw: 0, c: [{
                    fn: function (e) {
                        return {
                            cx: 24 * Math.cos(2 * Math.PI * e / 8),
                            cy: 24 * Math.sin(2 * Math.PI * e / 8),
                            t: r,
                            a: [{
                                fn: function () {
                                    return {an: "r", dur: u, v: i("1;2;3;4;5;6;7;8", e), rc: l}
                                }, t: 1
                            }]
                        }
                    }, t: 8
                }]
            },
            circles: {
                c: [{
                    fn: function (e) {
                        return {
                            r: 5,
                            cx: 24 * Math.cos(2 * Math.PI * e / 8),
                            cy: 24 * Math.sin(2 * Math.PI * e / 8),
                            t: r,
                            sw: 0,
                            a: [{
                                fn: function () {
                                    return {an: "fill-opacity", dur: u, v: i(".3;.3;.3;.4;.7;.85;.9;1", e), rc: l}
                                }, t: 1
                            }]
                        }
                    }, t: 8
                }]
            },
            crescent: {c: [{sw: 4, da: 128, os: 82, r: 26, cx: 32, cy: 32, f: d, at: [h]}]},
            dots: {
                c: [{
                    fn: function (e) {
                        return {
                            cx: 16 + 16 * e, cy: 32, sw: 0, a: [{
                                fn: function () {
                                    return {an: "fill-opacity", dur: u, v: i(".5;.6;.8;1;.8;.6;.5", e), rc: l}
                                }, t: 1
                            }, {
                                fn: function () {
                                    return {an: "r", dur: u, v: i("4;5;6;5;4;3;3", e), rc: l}
                                }, t: 1
                            }]
                        }
                    }, t: 3
                }]
            },
            lines: {
                sw: 7, lc: s, line: [{
                    fn: function (e) {
                        return {
                            x1: 10 + 14 * e, x2: 10 + 14 * e, a: [{
                                fn: function () {
                                    return {an: "y1", dur: u, v: i("16;18;28;18;16", e), rc: l}
                                }, t: 1
                            }, {
                                fn: function () {
                                    return {an: "y2", dur: u, v: i("48;44;36;46;48", e), rc: l}
                                }, t: 1
                            }, {
                                fn: function () {
                                    return {an: c, dur: u, v: i("1;.8;.5;.4;1", e), rc: l}
                                }, t: 1
                            }]
                        }
                    }, t: 4
                }]
            },
            ripple: {
                f: d, "fill-rule": "evenodd", sw: 3, circle: [{
                    fn: function (e) {
                        return {
                            cx: 32, cy: 32, a: [{
                                fn: function () {
                                    return {
                                        an: "r",
                                        begin: -1 * e + "s",
                                        dur: "2s",
                                        v: "0;24",
                                        keyTimes: "0;1",
                                        keySplines: "0.1,0.2,0.3,1",
                                        calcMode: "spline",
                                        rc: l
                                    }
                                }, t: 1
                            }, {
                                fn: function () {
                                    return {an: c, begin: -1 * e + "s", dur: "2s", v: ".2;1;.2;0", rc: l}
                                }, t: 1
                            }]
                        }
                    }, t: 2
                }]
            },
            spiral: {
                defs: [{
                    linearGradient: [{
                        id: "sGD",
                        gradientUnits: "userSpaceOnUse",
                        x1: 55,
                        y1: 46,
                        x2: 2,
                        y2: 46,
                        stop: [{offset: .1, "class": "stop1"}, {offset: 1, "class": "stop2"}]
                    }]
                }],
                g: [{
                    sw: 4,
                    lc: s,
                    f: d,
                    path: [{
                        stroke: "url(#sGD)",
                        d: "M4,32 c0,15,12,28,28,28c8,0,16-4,21-9"
                    }, {d: "M60,32 C60,16,47.464,4,32,4S4,16,4,32"}],
                    at: [h]
                }]
            }
        }, g = {
            android: function (t) {
                function i() {
                    if (!r.stop) {
                        var t = o(Date.now() - a, 650), d = 1, f = 0, h = 188 - 58 * t, p = 182 - 182 * t;
                        c % 2 && (d = -1, f = -64, h = 128 - -58 * t, p = 182 * t);
                        var v = [0, -101, -90, -11, -180, 79, -270, -191][c];
                        n(u, "da", Math.max(Math.min(h, 188), 128)), n(u, "os", Math.max(Math.min(p, 182), 0)), n(u, "t", "scale(" + d + ",1) translate(" + f + ",0) rotate(" + v + ",32,32)"), s += 4.1, s > 359 && (s = 0), n(l, "t", "rotate(" + s + ",32,32)"), t >= 1 && (c++, c > 7 && (c = 0), a = Date.now()), e.requestAnimationFrame(i)
                    }
                }

                var r = {};
                this.stop = !1;
                var a, c = 0, s = 0, l = t.querySelector("g"), u = t.querySelector("circle");
                return function () {
                    return a = Date.now(), i(), r
                }
            }
        };
        a.controller("$ionicSpinner", ["$element", "$attrs", "$ionicConfig", function (e, n, i) {
            var o, r;
            this.init = function () {
                o = n.icon || i.spinner.icon();
                var r = document.createElement("div");
                return t("svg", {viewBox: "0 0 64 64", g: [v[o]]}, r, o), e.html(r.innerHTML), this.start(), o
            }, this.start = function () {
                g[o] && (r = g[o](e[0])())
            }, this.stop = function () {
                g[o] && (r.stop = !0)
            }
        }])
    }(ionic), a.controller("$ionicTab", ["$scope", "$ionicHistory", "$attrs", "$location", "$state", function (e, t, n, i, o) {
        this.$scope = e, this.hrefMatchesState = function () {
            return n.href && 0 === i.path().indexOf(n.href.replace(/^#/, "").replace(/\/$/, ""))
        }, this.srefMatchesState = function () {
            return n.uiSref && o.includes(n.uiSref.split("(")[0])
        }, this.navNameMatchesState = function () {
            return this.navViewName && t.isCurrentStateNavView(this.navViewName)
        }, this.tabMatchesState = function () {
            return this.hrefMatchesState() || this.srefMatchesState() || this.navNameMatchesState()
        }
    }]), a.controller("$ionicTabs", ["$scope", "$element", "$ionicHistory", function (e, t, n) {
        var i, o = this, r = null, a = null, c = !0;
        o.tabs = [], o.selectedIndex = function () {
            return o.tabs.indexOf(r)
        }, o.selectedTab = function () {
            return r
        }, o.previousSelectedTab = function () {
            return a
        }, o.add = function (e) {
            n.registerHistory(e), o.tabs.push(e)
        }, o.remove = function (e) {
            var t = o.tabs.indexOf(e);
            if (-1 !== t) {
                if (e.$tabSelected) if (o.deselect(e), 1 === o.tabs.length) ; else {
                    var n = t === o.tabs.length - 1 ? t - 1 : t + 1;
                    o.select(o.tabs[n])
                }
                o.tabs.splice(t, 1)
            }
        }, o.deselect = function (e) {
            e.$tabSelected && (a = r, r = i = null, e.$tabSelected = !1, (e.onDeselect || h)(), e.$broadcast && e.$broadcast("$ionicHistory.deselect"))
        }, o.select = function (t, a) {
            var c;
            if (u(t)) {
                if (c = t, c >= o.tabs.length) return;
                t = o.tabs[c]
            } else c = o.tabs.indexOf(t);
            1 === arguments.length && (a = !(!t.navViewName && !t.uiSref)), r && r.$historyId == t.$historyId ? a && n.goToHistoryRoot(t.$historyId) : i !== c && (s(o.tabs, function (e) {
                o.deselect(e)
            }), r = t, i = c, o.$scope && o.$scope.$parent && (o.$scope.$parent.$activeHistoryId = t.$historyId), t.$tabSelected = !0, (t.onSelect || h)(), a && e.$emit("$ionicHistory.change", {
                type: "tab",
                tabIndex: c,
                historyId: t.$historyId,
                navViewName: t.navViewName,
                hasNavView: !!t.navViewName,
                title: t.title,
                url: t.href,
                uiSref: t.uiSref
            }), e.$broadcast("tabSelected", {selectedTab: t, selectedTabIndex: c}))
        }, o.hasActiveScope = function () {
            for (var e = 0; e < o.tabs.length; e++) if (n.isActiveScope(o.tabs[e])) return !0;
            return !1
        }, o.showBar = function (e) {
            return arguments.length && (e ? t.removeClass("tabs-item-hide") : t.addClass("tabs-item-hide"), c = !!e), c
        }
    }]), a.controller("$ionicView", ["$scope", "$element", "$attrs", "$compile", "$rootScope", function (e, t, n, i, o) {
        function r() {
            var t = l(n.viewTitle) && "viewTitle" || l(n.title) && "title";
            t && (a(n[t]), $.push(n.$observe(t, a))), l(n.hideBackButton) && $.push(e.$watch(n.hideBackButton, function (e) {
                f.showBackButton(!e)
            })), l(n.hideNavBar) && $.push(e.$watch(n.hideNavBar, function (e) {
                f.showBar(!e)
            }))
        }

        function a(e) {
            l(e) && e !== v && (v = e, f.title(v))
        }

        function s() {
            for (var e = 0; e < $.length; e++) $[e]();
            $ = []
        }

        function u(t) {
            return t ? i(t)(e.$new()) : void 0
        }

        function d(t) {
            return !!e.$eval(n[t])
        }

        var f, h, p, v, g = this, m = {}, $ = [], w = e.$on("ionNavBar.init", function (e, t) {
            e.stopPropagation(), h = t
        });
        g.init = function () {
            w();
            var n = t.inheritedData("$ionModalController");
            f = t.inheritedData("$ionNavViewController"), f && !n && (e.$on("$ionicView.beforeEnter", g.beforeEnter), e.$on("$ionicView.afterEnter", r), e.$on("$ionicView.beforeLeave", s))
        }, g.beforeEnter = function (t, i) {
            if (i && !i.viewNotified) {
                i.viewNotified = !0, o.$$phase || e.$digest(), v = l(n.viewTitle) ? n.viewTitle : n.title;
                var r = {};
                for (var a in m) r[a] = u(m[a]);
                f.beforeEnter(c(i, {
                    title: v,
                    showBack: !d("hideBackButton"),
                    navBarItems: r,
                    navBarDelegate: h || null,
                    showNavBar: !d("hideNavBar"),
                    hasHeaderBar: !!p
                })), s()
            }
        }, g.navElement = function (e, t) {
            m[e] = t
        }
    }]), a.directive("ionActionSheet", ["$document", function (e) {
        return {
            restrict: "E",
            scope: !0,
            replace: !0,
            link: function (t, n) {
                var i = function (e) {
                    27 == e.which && (t.cancel(), t.$apply())
                }, o = function (e) {
                    e.target == n[0] && (t.cancel(), t.$apply())
                };
                t.$on("$destroy", function () {
                    n.remove(), e.unbind("keyup", i)
                }), e.bind("keyup", i), n.bind("click", o)
            },
            template: '<div class="action-sheet-backdrop"><div class="action-sheet-wrapper"><div class="action-sheet" ng-class="{\'action-sheet-has-icons\': $actionSheetHasIcon}"><div class="action-sheet-group action-sheet-options"><div class="action-sheet-title" ng-if="titleText" ng-bind-html="titleText"></div><button class="button action-sheet-option" ng-click="buttonClicked($index)" ng-class="b.className" ng-repeat="b in buttons" ng-bind-html="b.text"></button><button class="button destructive action-sheet-destructive" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind-html="destructiveText"></button></div><div class="action-sheet-group action-sheet-cancel" ng-if="cancelText"><button class="button" ng-click="cancel()" ng-bind-html="cancelText"></button></div></div></div></div>'
        }
    }]), a.directive("ionCheckbox", ["$ionicConfig", function (e) {
        return {
            restrict: "E",
            replace: !0,
            require: "?ngModel",
            transclude: !0,
            template: '<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox"><i class="checkbox-icon"></i></div><div class="item-content disable-pointer-events" ng-transclude></div></label>',
            compile: function (t, n) {
                var i = t.find("input");
                s({
                    name: n.name,
                    "ng-value": n.ngValue,
                    "ng-model": n.ngModel,
                    "ng-checked": n.ngChecked,
                    "ng-disabled": n.ngDisabled,
                    "ng-true-value": n.ngTrueValue,
                    "ng-false-value": n.ngFalseValue,
                    "ng-change": n.ngChange,
                    "ng-required": n.ngRequired,
                    required: n.required
                }, function (e, t) {
                    l(e) && i.attr(t, e)
                });
                var o = t[0].querySelector(".checkbox");
                o.classList.add("checkbox-" + e.form.checkbox())
            }
        }
    }]), a.directive("collectionRepeat", e).factory("$ionicCollectionManager", t);
    var g = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        m = /height:.*?px;\s*width:.*?px/, $ = 3;
    e.$inject = ["$ionicCollectionManager", "$parse", "$window", "$$rAF", "$rootScope", "$timeout"], t.$inject = ["$rootScope", "$window", "$$rAF"], a.directive("ionContent", ["$timeout", "$controller", "$ionicBind", "$ionicConfig", function (e, t, n, i) {
        return {
            restrict: "E", require: "^?ionNavView", scope: !0, priority: 800, compile: function (e, o) {
                function r(e, i, r) {
                    function u() {
                        e.$onScrollComplete({
                            scrollTop: c.scrollView.__scrollTop,
                            scrollLeft: c.scrollView.__scrollLeft
                        })
                    }

                    var d = e.$parent;
                    if (e.$watch(function () {
                        return (d.$hasHeader ? " has-header" : "") + (d.$hasSubheader ? " has-subheader" : "") + (d.$hasFooter ? " has-footer" : "") + (d.$hasSubfooter ? " has-subfooter" : "") + (d.$hasTabs ? " has-tabs" : "") + (d.$hasTabsTop ? " has-tabs-top" : "")
                    }, function (e, t) {
                        i.removeClass(t), i.addClass(e)
                    }), e.$hasHeader = e.$hasSubheader = e.$hasFooter = e.$hasSubfooter = e.$hasTabs = e.$hasTabsTop = !1, n(e, r, {
                        $onScroll: "&onScroll",
                        $onScrollComplete: "&onScrollComplete",
                        hasBouncing: "@",
                        padding: "@",
                        direction: "@",
                        scrollbarX: "@",
                        scrollbarY: "@",
                        startX: "@",
                        startY: "@",
                        scrollEventInterval: "@"
                    }), e.direction = e.direction || "y", l(r.padding) && e.$watch(r.padding, function (e) {
                        (a || i).toggleClass("padding", !!e)
                    }), "false" === r.scroll) ; else {
                        var f = {};
                        s ? (i.addClass("overflow-scroll"), f = {
                            el: i[0],
                            delegateHandle: o.delegateHandle,
                            startX: e.$eval(e.startX) || 0,
                            startY: e.$eval(e.startY) || 0,
                            nativeScrolling: !0
                        }) : f = {
                            el: i[0],
                            delegateHandle: o.delegateHandle,
                            locking: "true" === (o.locking || "true"),
                            bouncing: e.$eval(e.hasBouncing),
                            startX: e.$eval(e.startX) || 0,
                            startY: e.$eval(e.startY) || 0,
                            scrollbarX: e.$eval(e.scrollbarX) !== !1,
                            scrollbarY: e.$eval(e.scrollbarY) !== !1,
                            scrollingX: e.direction.indexOf("x") >= 0,
                            scrollingY: e.direction.indexOf("y") >= 0,
                            scrollEventInterval: parseInt(e.scrollEventInterval, 10) || 10,
                            scrollingComplete: u
                        }, c = t("$ionicScroll", {
                            $scope: e,
                            scrollViewOptions: f
                        }), e.scrollCtrl = c, e.$on("$destroy", function () {
                            f && (f.scrollingComplete = h, delete f.el), a = null, i = null, o.$$element = null
                        })
                    }
                }

                var a, c;
                e.addClass("scroll-content ionic-scroll"), "false" != o.scroll ? (a = f('<div class="scroll"></div>'), a.append(e.contents()), e.append(a)) : e.addClass("scroll-content-false");
                var s = "false" !== o.overflowScroll && ("true" === o.overflowScroll || !i.scrolling.jsScrolling());
                return s && (s = !e[0].querySelector("[collection-repeat]")), {pre: r}
            }
        }
    }]), a.directive("exposeAsideWhen", ["$window", function (e) {
        return {
            restrict: "A", require: "^ionSideMenus", link: function (t, n, i, o) {
                function r() {
                    var t = "large" == i.exposeAsideWhen ? "(min-width:768px)" : i.exposeAsideWhen;
                    o.exposeAside(e.matchMedia(t).matches), o.activeAsideResizing(!1)
                }

                function a() {
                    o.activeAsideResizing(!0), l()
                }

                var c = e.innerWidth, s = e.innerHeight;
                ionic.on("resize", function () {
                    (c !== e.innerWidth || s !== e.innerHeight) && (c = e.innerWidth, s = e.innerHeight, a())
                }, e);
                var l = ionic.debounce(function () {
                    t.$apply(r)
                }, 300, !1);
                t.$evalAsync(r)
            }
        }
    }]);
    var w = "onHold onTap onDoubleTap onTouch onRelease onDragStart onDrag onDragEnd onDragUp onDragRight onDragDown onDragLeft onSwipe onSwipeUp onSwipeRight onSwipeDown onSwipeLeft".split(" ");
    w.forEach(function (e) {
        a.directive(e, n(e))
    }), a.directive("ionHeaderBar", i(!0)).directive("ionFooterBar", i(!1)), a.directive("ionInfiniteScroll", ["$timeout", function (e) {
        return {
            restrict: "E", require: ["?^$ionicScroll", "ionInfiniteScroll"],
            template: function (e, t) {
                return t.icon ? '<i class="icon {{icon()}} icon-refreshing {{scrollingType}}"></i>' : '<ion-spinner icon="{{spinner()}}"></ion-spinner>'
            }, scope: !0, controller: "$ionInfiniteScroll", link: function (t, n, i, o) {
                var r = o[1], a = r.scrollCtrl = o[0], c = r.jsScrolling = !a.isNative();
                if (c) r.scrollView = a.scrollView, t.scrollingType = "js-scrolling", a.$element.on("scroll", r.checkBounds); else {
                    var s = ionic.DomUtil.getParentOrSelfWithClass(n[0].parentNode, "overflow-scroll");
                    if (r.scrollEl = s, !s) throw"Infinite scroll must be used inside a scrollable div";
                    r.scrollEl.addEventListener("scroll", r.checkBounds)
                }
                var u = l(i.immediateCheck) ? t.$eval(i.immediateCheck) : !0;
                u && e(function () {
                    r.checkBounds()
                })
            }
        }
    }]);
    var b = -1;
    a.directive("ionInput", [function () {
        return {
            restrict: "E", controller: ["$scope", "$element", function (e, t) {
                this.$scope = e, this.$element = t, this.setInputAriaLabeledBy = function (e) {
                    var n = t[0].querySelectorAll("input,textarea");
                    n.length && n[0].setAttribute("aria-labelledby", e)
                }, this.focus = function () {
                    var e = t[0].querySelectorAll("input,textarea");
                    e.length && e[0].focus()
                }
            }]
        }
    }]), a.directive("ionLabel", [function () {
        return {
            restrict: "E", require: "?^ionInput", compile: function () {
                return function (e, t, n, i) {
                    var o = t[0];
                    t.addClass("input-label"), t.attr("aria-label", t.text());
                    var r = o.id || "_label-" + ++b;
                    o.id || t.attr("id", r), i && (i.setInputAriaLabeledBy(r), t.on("click", function () {
                        i.focus()
                    }))
                }
            }
        }
    }]), a.directive("inputLabel", [function () {
        return {
            restrict: "C", require: "?^ionInput", compile: function () {
                return function (e, t, n, i) {
                    var o = t[0];
                    t.attr("aria-label", t.text());
                    var r = o.id || "_label-" + ++b;
                    o.id || t.attr("id", r), i && i.setInputAriaLabeledBy(r)
                }
            }
        }
    }]), a.directive("ionItem", ["$$rAF", function (e) {
        return {
            restrict: "E", controller: ["$scope", "$element", function (e, t) {
                this.$scope = e, this.$element = t
            }], scope: !0, compile: function (t, n) {
                var i = l(n.href) || l(n.ngHref) || l(n.uiSref),
                    o = i || /ion-(delete|option|reorder)-button/i.test(t.html());
                if (o) {
                    var r = f(i ? "<a></a>" : "<div></div>");
                    r.addClass("item-content"), (l(n.href) || l(n.ngHref)) && (r.attr("ng-href", "{{$href()}}"), l(n.target) && r.attr("target", "{{$target()}}")), r.append(t.contents()), t.addClass("item item-complex").append(r)
                } else t.addClass("item");
                return function (t, n, i) {
                    t.$href = function () {
                        return i.href || i.ngHref
                    }, t.$target = function () {
                        return i.target
                    };
                    var o = n[0].querySelector(".item-content");
                    o && t.$on("$collectionRepeatLeave", function () {
                        o && o.$$ionicOptionsOpen && (o.style[ionic.CSS.TRANSFORM] = "", o.style[ionic.CSS.TRANSITION] = "none", e(function () {
                            o.style[ionic.CSS.TRANSITION] = ""
                        }), o.$$ionicOptionsOpen = !1)
                    })
                }
            }
        }
    }]);
    var y = '<div class="item-left-edit item-delete enable-pointer-events"></div>';
    a.directive("ionDeleteButton", function () {
        function e(e) {
            e.stopPropagation()
        }

        return {
            restrict: "E",
            require: ["^^ionItem", "^?ionList"],
            priority: Number.MAX_VALUE,
            compile: function (t, n) {
                return n.$set("class", (n["class"] || "") + " button icon button-icon", !0), function (t, n, i, o) {
                    function r() {
                        c = c || n.controller("ionList"), c && c.showDelete() && s.addClass("visible active")
                    }

                    var a = o[0], c = o[1], s = f(y);
                    s.append(n), a.$element.append(s).addClass("item-left-editable"), n.on("click", e), r(), t.$on("$ionic.reconnectScope", r)
                }
            }
        }
    }), a.directive("itemFloatingLabel", function () {
        return {
            restrict: "C", link: function (e, t) {
                var n = t[0], i = n.querySelector("input, textarea"), o = n.querySelector(".input-label");
                if (i && o) {
                    var r = function () {
                        i.value ? o.classList.add("has-input") : o.classList.remove("has-input")
                    };
                    i.addEventListener("input", r);
                    var a = f(i).controller("ngModel");
                    a && (a.$render = function () {
                        i.value = a.$viewValue || "", r()
                    }), e.$on("$destroy", function () {
                        i.removeEventListener("input", r)
                    })
                }
            }
        }
    });
    var S = '<div class="item-options invisible"></div>';
    a.directive("ionOptionButton", [function () {
        function e(e) {
            e.stopPropagation()
        }

        return {
            restrict: "E", require: "^ionItem", priority: Number.MAX_VALUE, compile: function (t, n) {
                return n.$set("class", (n["class"] || "") + " button", !0), function (t, n, i, o) {
                    o.optionsContainer || (o.optionsContainer = f(S), o.$element.append(o.optionsContainer)), o.optionsContainer.append(n), o.$element.addClass("item-right-editable"), n.on("click", e)
                }
            }
        }
    }]);
    var k = '<div data-prevent-scroll="true" class="item-right-edit item-reorder enable-pointer-events"></div>';
    a.directive("ionReorderButton", ["$parse", function (e) {
        return {
            restrict: "E",
            require: ["^ionItem", "^?ionList"],
            priority: Number.MAX_VALUE,
            compile: function (t, n) {
                return n.$set("class", (n["class"] || "") + " button icon button-icon", !0), t[0].setAttribute("data-prevent-scroll", !0), function (t, n, i, o) {
                    var r = o[0], a = o[1], c = e(i.onReorder);
                    t.$onReorder = function (e, n) {
                        c(t, {$fromIndex: e, $toIndex: n})
                    }, i.ngClick || i.onClick || i.onclick || (n[0].onclick = function (e) {
                        return e.stopPropagation(), !1
                    });
                    var s = f(k);
                    s.append(n), r.$element.append(s).addClass("item-right-editable"), a && a.showReorder() && s.addClass("visible active")
                }
            }
        }
    }]), a.directive("keyboardAttach", function () {
        return function (e, t) {
            function n(e) {
                if (!ionic.Platform.isAndroid() || ionic.Platform.isFullScreen) {
                    var n = e.keyboardHeight || e.detail && e.detail.keyboardHeight;
                    t.css("bottom", n + "px"), r = t.controller("$ionicScroll"), r && (r.scrollView.__container.style.bottom = n + o(t[0]) + "px")
                }
            }

            function i() {
                (!ionic.Platform.isAndroid() || ionic.Platform.isFullScreen) && (t.css("bottom", ""), r && (r.scrollView.__container.style.bottom = ""))
            }

            ionic.on("native.keyboardshow", n, window), ionic.on("native.keyboardhide", i, window), ionic.on("native.showkeyboard", n, window), ionic.on("native.hidekeyboard", i, window);
            var r;
            e.$on("$destroy", function () {
                ionic.off("native.keyboardshow", n, window), ionic.off("native.keyboardhide", i, window), ionic.off("native.showkeyboard", n, window), ionic.off("native.hidekeyboard", i, window)
            })
        }
    }), a.directive("ionList", ["$timeout", function (e) {
        return {
            restrict: "E", require: ["ionList", "^?$ionicScroll"], controller: "$ionicList", compile: function (t, n) {
                var i = f('<div class="list">').append(t.contents()).addClass(n.type);
                return t.append(i), function (t, i, o, r) {
                    function a() {
                        function o(e, t) {
                            t() && e.addClass("visible") || e.removeClass("active"), ionic.requestAnimationFrame(function () {
                                t() && e.addClass("active") || e.removeClass("visible")
                            })
                        }

                        var r = c.listView = new ionic.views.ListView({
                            el: i[0],
                            listEl: i.children()[0],
                            scrollEl: s && s.element,
                            scrollView: s && s.scrollView,
                            onReorder: function (t, n, i) {
                                var o = f(t).scope();
                                o && o.$onReorder && e(function () {
                                    o.$onReorder(n, i)
                                })
                            },
                            canSwipe: function () {
                                return c.canSwipeItems()
                            }
                        });
                        t.$on("$destroy", function () {
                            r && (r.deregister && r.deregister(), r = null)
                        }), l(n.canSwipe) && t.$watch("!!(" + n.canSwipe + ")", function (e) {
                            c.canSwipeItems(e)
                        }), l(n.showDelete) && t.$watch("!!(" + n.showDelete + ")", function (e) {
                            c.showDelete(e)
                        }), l(n.showReorder) && t.$watch("!!(" + n.showReorder + ")", function (e) {
                            c.showReorder(e)
                        }), t.$watch(function () {
                            return c.showDelete()
                        }, function (e, t) {
                            if (e || t) {
                                e && c.closeOptionButtons(), c.canSwipeItems(!e), i.children().toggleClass("list-left-editing", e), i.toggleClass("disable-pointer-events", e);
                                var n = f(i[0].getElementsByClassName("item-delete"));
                                o(n, c.showDelete)
                            }
                        }), t.$watch(function () {
                            return c.showReorder()
                        }, function (e, t) {
                            if (e || t) {
                                e && c.closeOptionButtons(), c.canSwipeItems(!e), i.children().toggleClass("list-right-editing", e), i.toggleClass("disable-pointer-events", e);
                                var n = f(i[0].getElementsByClassName("item-reorder"));
                                o(n, c.showReorder)
                            }
                        })
                    }

                    var c = r[0], s = r[1];
                    e(a)
                }
            }
        }
    }]), a.directive("menuClose", ["$ionicHistory", "$timeout", function (e, t) {
        return {
            restrict: "AC", link: function (n, i) {
                i.bind("click", function () {
                    var n = i.inheritedData("$ionSideMenusController");
                    n && (e.nextViewOptions({historyRoot: !0, disableAnimate: !0, expire: 300}), t(function () {
                        e.nextViewOptions({historyRoot: !1, disableAnimate: !1})
                    }, 300), n.close())
                })
            }
        }
    }]), a.directive("menuToggle", function () {
        return {
            restrict: "AC", link: function (e, t, n) {
                e.$on("$ionicView.beforeEnter", function (e, n) {
                    if (n.enableBack) {
                        var i = t.inheritedData("$ionSideMenusController");
                        i.enableMenuWithBackViews() || t.addClass("hide")
                    } else t.removeClass("hide")
                }), t.bind("click", function () {
                    var e = t.inheritedData("$ionSideMenusController");
                    e && e.toggle(n.menuToggle)
                })
            }
        }
    }), a.directive("ionModal", [function () {
        return {
            restrict: "E",
            transclude: !0,
            replace: !0,
            controller: [function () {
            }],
            template: '<div class="modal-backdrop"><div class="modal-backdrop-bg"></div><div class="modal-wrapper" ng-transclude></div></div>'
        }
    }]), a.directive("ionModalView", function () {
        return {
            restrict: "E", compile: function (e) {
                e.addClass("modal")
            }
        }
    }), a.directive("ionNavBackButton", ["$ionicConfig", "$document", function (e, t) {
        return {
            restrict: "E", require: "^ionNavBar", compile: function (n, i) {
                function o(e) {
                    return /ion-|icon/.test(e.className)
                }

                var r = t[0].createElement("button");
                for (var a in i.$attr) r.setAttribute(i.$attr[a], i[a]);
                i.ngClick || r.setAttribute("ng-click", "$ionicGoBack()"), r.className = "button back-button hide buttons " + (n.attr("class") || ""), r.innerHTML = n.html() || "";
                for (var c, s, l, u, d = o(n[0]), f = 0; f < n[0].childNodes.length; f++) c = n[0].childNodes[f], 1 === c.nodeType ? o(c) ? d = !0 : c.classList.contains("default-title") ? l = !0 : c.classList.contains("previous-title") && (u = !0) : s || 3 !== c.nodeType || (s = !!c.nodeValue.trim());
                var h = e.backButton.icon();
                if (!d && h && "none" !== h && (r.innerHTML = '<i class="icon ' + h + '"></i> ' + r.innerHTML, r.className += " button-clear"), !s) {
                    var p = t[0].createElement("span");
                    p.className = "back-text", !l && e.backButton.text() && (p.innerHTML += '<span class="default-title">' + e.backButton.text() + "</span>"), !u && e.backButton.previousTitleText() && (p.innerHTML += '<span class="previous-title"></span>'), r.appendChild(p)
                }
                return n.attr("class", "hide"), n.empty(), {
                    pre: function (e, t, n, i) {
                        i.navElement("backButton", r.outerHTML), r = null
                    }
                }
            }
        }
    }]), a.directive("ionNavBar", function () {
        return {
            restrict: "E", controller: "$ionicNavBar", scope: !0, link: function (e, t, n, i) {
                i.init()
            }
        }
    }), a.directive("ionNavButtons", ["$document", function (e) {
        return {
            require: "^ionNavBar", restrict: "E", compile: function (t, n) {
                var i = "left";
                /^primary|secondary|right$/i.test(n.side || "") && (i = n.side.toLowerCase());
                var o = e[0].createElement("span");
                o.className = i + "-buttons", o.innerHTML = t.html();
                var r = i + "Buttons";
                return t.attr("class", "hide"), t.empty(), {
                    pre: function (e, t, n, i) {
                        var a = t.parent().data("$ionViewController");
                        a ? a.navElement(r, o.outerHTML) : i.navElement(r, o.outerHTML), o = null
                    }
                }
            }
        }
    }]), a.directive("navDirection", ["$ionicViewSwitcher", function (e) {
        return {
            restrict: "A", priority: 1e3, link: function (t, n, i) {
                n.bind("click", function () {
                    e.nextDirection(i.navDirection)
                })
            }
        }
    }]), a.directive("ionNavTitle", ["$document", function (e) {
        return {
            require: "^ionNavBar", restrict: "E", compile: function (t, n) {
                var i = "title", o = e[0].createElement("span");
                for (var r in n.$attr) o.setAttribute(n.$attr[r], n[r]);
                return o.classList.add("nav-bar-title"), o.innerHTML = t.html(), t.attr("class", "hide"), t.empty(), {
                    pre: function (e, t, n, r) {
                        var a = t.parent().data("$ionViewController");
                        a ? a.navElement(i, o.outerHTML) : r.navElement(i, o.outerHTML), o = null
                    }
                }
            }
        }
    }]), a.directive("navTransition", ["$ionicViewSwitcher", function (e) {
        return {
            restrict: "A", priority: 1e3, link: function (t, n, i) {
                n.bind("click", function () {
                    e.nextTransition(i.navTransition)
                })
            }
        }
    }]), a.directive("ionNavView", ["$state", "$ionicConfig", function (e, t) {
        return {
            restrict: "E",
            terminal: !0,
            priority: 2e3,
            transclude: !0,
            controller: "$ionicNavView",
            compile: function (n, i, o) {
                return n.addClass("view-container"), ionic.DomUtil.cachedAttr(n, "nav-view-transition", t.views.transition()), function (t, n, i, r) {
                    function a(t) {
                        var n = e.$current && e.$current.locals[s.name];
                        n && (t || n !== c) && (c = n, s.state = n.$$state, r.register(n))
                    }

                    var c;
                    o(t, function (e) {
                        n.append(e)
                    });
                    var s = r.init();
                    t.$on("$stateChangeSuccess", function () {
                        a(!1)
                    }), t.$on("$viewContentLoading", function () {
                        a(!1)
                    }), a(!0)
                }
            }
        }
    }]), a.config(["$provide", function (e) {
        e.decorator("ngClickDirective", ["$delegate", function (e) {
            return e.shift(), e
        }])
    }]).factory("$ionicNgClick", ["$parse", function (e) {
        return function (t, n, i) {
            var o = angular.isFunction(i) ? i : e(i);
            n.on("click", function (e) {
                t.$apply(function () {
                    o(t, {$event: e})
                })
            }), n.onclick = h
        }
    }]).directive("ngClick", ["$ionicNgClick", function (e) {
        return function (t, n, i) {
            e(t, n, i.ngClick)
        }
    }]).directive("ionStopEvent", function () {
        return {
            restrict: "A", link: function (e, t, n) {
                t.bind(n.ionStopEvent, r)
            }
        }
    }), a.directive("ionPane", function () {
        return {
            restrict: "E", link: function (e, t) {
                t.addClass("pane")
            }
        }
    }), a.directive("ionPopover", [function () {
        return {
            restrict: "E", transclude: !0, replace: !0, controller: [function () {
            }], template: '<div class="popover-backdrop"><div class="popover-wrapper" ng-transclude></div></div>'
        }
    }]), a.directive("ionPopoverView", function () {
        return {
            restrict: "E", compile: function (e) {
                e.append(f('<div class="popover-arrow">')), e.addClass("popover")
            }
        }
    }), a.directive("ionRadio", function () {
        return {
            restrict: "E",
            replace: !0,
            require: "?ngModel",
            transclude: !0,
            template: '<label class="item item-radio"><input type="radio" name="radio-group"><div class="radio-content"><div class="item-content disable-pointer-events" ng-transclude></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></div></label>',
            compile: function (e, t) {
                if (t.icon) {
                    var n = e.find("i");
                    n.removeClass("ion-checkmark").addClass(t.icon)
                }
                var i = e.find("input");
                return s({
                    name: t.name,
                    value: t.value,
                    disabled: t.disabled,
                    "ng-value": t.ngValue,
                    "ng-model": t.ngModel,
                    "ng-disabled": t.ngDisabled,
                    "ng-change": t.ngChange,
                    "ng-required": t.ngRequired,
                    required: t.required
                }, function (e, t) {
                    l(e) && i.attr(t, e)
                }), function (e, t, n) {
                    e.getValue = function () {
                        return e.ngValue || n.value
                    }
                }
            }
        }
    }), a.directive("ionRefresher", [function () {
        return {
            restrict: "E",
            replace: !0,
            require: ["?^$ionicScroll", "ionRefresher"],
            controller: "$ionicRefresher",
            template: '<div class="scroll-refresher invisible" collection-repeat-ignore><div class="ionic-refresher-content" ng-class="{\'ionic-refresher-with-text\': pullingText || refreshingText}"><div class="icon-pulling" ng-class="{\'pulling-rotation-disabled\':disablePullingRotation}"><i class="icon {{pullingIcon}}"></i></div><div class="text-pulling" ng-bind-html="pullingText"></div><div class="icon-refreshing"><ion-spinner ng-if="showSpinner" icon="{{spinner}}"></ion-spinner><i ng-if="showIcon" class="icon {{refreshingIcon}}"></i></div><div class="text-refreshing" ng-bind-html="refreshingText"></div></div></div>',
            link: function (e, t, n, i) {
                var o = i[0], r = i[1];
                !o || o.isNative() ? r.init() : (t[0].classList.add("js-scrolling"), o._setRefresher(e, t[0], r.getRefresherDomMethods()), e.$on("scroll.refreshComplete", function () {
                    e.$evalAsync(function () {
                        o.scrollView.finishPullToRefresh()
                    })
                }))
            }
        }
    }]), a.directive("ionScroll", ["$timeout", "$controller", "$ionicBind", "$ionicConfig", function (e, t, n, i) {
        return {
            restrict: "E", scope: !0, controller: function () {
            }, compile: function (e, o) {
                function r(e, i, o) {
                    n(e, o, {
                        direction: "@",
                        paging: "@",
                        $onScroll: "&onScroll",
                        scroll: "@",
                        scrollbarX: "@",
                        scrollbarY: "@",
                        zooming: "@",
                        minZoom: "@",
                        maxZoom: "@"
                    }), e.direction = e.direction || "y", l(o.padding) && e.$watch(o.padding, function (e) {
                        a.toggleClass("padding", !!e)
                    }), e.$eval(e.paging) === !0 && a.addClass("scroll-paging"), e.direction || (e.direction = "y");
                    var r = e.$eval(e.paging) === !0;
                    c && i.addClass("overflow-scroll"), i.addClass("scroll-" + e.direction);
                    var s = {
                        el: i[0],
                        delegateHandle: o.delegateHandle,
                        locking: "true" === (o.locking || "true"),
                        bouncing: e.$eval(o.hasBouncing),
                        paging: r,
                        scrollbarX: e.$eval(e.scrollbarX) !== !1,
                        scrollbarY: e.$eval(e.scrollbarY) !== !1,
                        scrollingX: e.direction.indexOf("x") >= 0,
                        scrollingY: e.direction.indexOf("y") >= 0,
                        zooming: e.$eval(e.zooming) === !0,
                        maxZoom: e.$eval(e.maxZoom) || 3,
                        minZoom: e.$eval(e.minZoom) || .5,
                        preventDefault: !0,
                        nativeScrolling: c
                    };
                    r && (s.speedMultiplier = .8, s.bouncing = !1), t("$ionicScroll", {$scope: e, scrollViewOptions: s})
                }

                e.addClass("scroll-view ionic-scroll");
                var a = f('<div class="scroll"></div>');
                a.append(e.contents()), e.append(a);
                var c = "false" !== o.overflowScroll && ("true" === o.overflowScroll || !i.scrolling.jsScrolling());
                return {pre: r}
            }
        }
    }]), a.directive("ionSideMenu", function () {
        return {
            restrict: "E", require: "^ionSideMenus", scope: !0, compile: function (e, t) {
                return angular.isUndefined(t.isEnabled) && t.$set("isEnabled", "true"), angular.isUndefined(t.width) && t.$set("width", "275"), e.addClass("menu menu-" + t.side), function (e, n, i, o) {
                    e.side = i.side || "left";
                    var r = o[e.side] = new ionic.views.SideMenu({width: t.width, el: n[0], isEnabled: !0});
                    e.$watch(i.width, function (e) {
                        var t = +e;
                        t && t == e && r.setWidth(+e)
                    }), e.$watch(i.isEnabled, function (e) {
                        r.setIsEnabled(!!e)
                    })
                }
            }
        }
    }), a.directive("ionSideMenuContent", ["$timeout", "$ionicGesture", "$window", function (e, t, n) {
        return {
            restrict: "EA", require: "^ionSideMenus", scope: !0, compile: function (i, o) {
                function r(r, a, c, s) {
                    function u(e) {
                        0 !== s.getOpenAmount() ? (s.close(), e.gesture.srcEvent.preventDefault(), v = null, g = null) : v || (v = ionic.tap.pointerCoord(e.gesture.srcEvent))
                    }

                    function d(e) {
                        s.isDraggableTarget(e) && "x" == p(e) && (s._handleDrag(e), e.gesture.srcEvent.preventDefault())
                    }

                    function f(e) {
                        "x" == p(e) && e.gesture.srcEvent.preventDefault()
                    }

                    function h(e) {
                        s._endDrag(e), v = null, g = null
                    }

                    function p(e) {
                        if (g) return g;
                        if (e && e.gesture) {
                            if (v) {
                                var t = ionic.tap.pointerCoord(e.gesture.srcEvent), n = Math.abs(t.x - v.x),
                                    i = Math.abs(t.y - v.y), o = i > n ? "y" : "x";
                                return Math.max(n, i) > 30 && (g = o), o
                            }
                            v = ionic.tap.pointerCoord(e.gesture.srcEvent)
                        }
                        return "y"
                    }

                    var v = null, g = null;
                    l(o.dragContent) ? r.$watch(o.dragContent, function (e) {
                        s.canDragContent(e)
                    }) : s.canDragContent(!0), l(o.edgeDragThreshold) && r.$watch(o.edgeDragThreshold, function (e) {
                        s.edgeDragThreshold(e)
                    });
                    var m = {
                        element: i[0], onDrag: function () {
                        }, endDrag: function () {
                        }, setCanScroll: function (e) {
                            var t = a[0].querySelector(".scroll");
                            if (t) {
                                var n = angular.element(t.parentElement);
                                if (n) {
                                    var i = n.scope();
                                    i.scrollCtrl && i.scrollCtrl.freezeScrollShut(!e)
                                }
                            }
                        }, getTranslateX: function () {
                            return r.sideMenuContentTranslateX || 0
                        }, setTranslateX: ionic.animationFrameThrottle(function (t) {
                            var n = m.offsetX + t;
                            a[0].style[ionic.CSS.TRANSFORM] = "translate3d(" + n + "px,0,0)", e(function () {
                                r.sideMenuContentTranslateX = t
                            })
                        }), setMarginLeft: ionic.animationFrameThrottle(function (e) {
                            e ? (e = parseInt(e, 10), a[0].style[ionic.CSS.TRANSFORM] = "translate3d(" + e + "px,0,0)", a[0].style.width = n.innerWidth - e + "px", m.offsetX = e) : (a[0].style[ionic.CSS.TRANSFORM] = "translate3d(0,0,0)", a[0].style.width = "", m.offsetX = 0)
                        }), setMarginRight: ionic.animationFrameThrottle(function (e) {
                            e ? (e = parseInt(e, 10), a[0].style.width = n.innerWidth - e + "px", m.offsetX = e) : (a[0].style.width = "", m.offsetX = 0), a[0].style[ionic.CSS.TRANSFORM] = "translate3d(0,0,0)"
                        }), setMarginLeftAndRight: ionic.animationFrameThrottle(function (e, t) {
                            e = e && parseInt(e, 10) || 0, t = t && parseInt(t, 10) || 0;
                            var i = e + t;
                            i > 0 ? (a[0].style[ionic.CSS.TRANSFORM] = "translate3d(" + e + "px,0,0)", a[0].style.width = n.innerWidth - i + "px", m.offsetX = e) : (a[0].style[ionic.CSS.TRANSFORM] = "translate3d(0,0,0)", a[0].style.width = "", m.offsetX = 0)
                        }), enableAnimation: function () {
                            r.animationEnabled = !0, a[0].classList.add("menu-animated")
                        }, disableAnimation: function () {
                            r.animationEnabled = !1, a[0].classList.remove("menu-animated")
                        }, offsetX: 0
                    };
                    s.setContent(m);
                    var $ = {stop_browser_behavior: !1};
                    $.prevent_default_directions = ["left", "right"];
                    var w = t.on("tap", u, a, $), b = t.on("dragright", d, a, $), y = t.on("dragleft", d, a, $),
                        S = t.on("dragup", f, a, $), k = t.on("dragdown", f, a, $), C = t.on("release", h, a, $);
                    r.$on("$destroy", function () {
                        m && (m.element = null, m = null), t.off(y, "dragleft", d), t.off(b, "dragright", d), t.off(S, "dragup", f), t.off(k, "dragdown", f), t.off(C, "release", h), t.off(w, "tap", u)
                    })
                }

                return i.addClass("menu-content pane"), {pre: r}
            }
        }
    }]), a.directive("ionSideMenus", ["$ionicBody", function (e) {
        return {
            restrict: "ECA", controller: "$ionicSideMenus", compile: function (t, n) {
                function i(t, n, i, o) {
                    o.enableMenuWithBackViews(t.$eval(i.enableMenuWithBackViews)), t.$on("$ionicExposeAside", function (n, i) {
                        t.$exposeAside || (t.$exposeAside = {}), t.$exposeAside.active = i, e.enableClass(i, "aside-open")
                    }), t.$on("$ionicView.beforeEnter", function (e, n) {
                        n.historyId && (t.$activeHistoryId = n.historyId)
                    }), t.$on("$destroy", function () {
                        e.removeClass("menu-open", "aside-open")
                    })
                }

                return n.$set("class", (n["class"] || "") + " view"), {pre: i}
            }
        }
    }]), a.directive("ionSlideBox", ["$animate", "$timeout", "$compile", "$ionicSlideBoxDelegate", "$ionicHistory", "$ionicScrollDelegate", function (e, t, n, i, o, r) {
        return {
            restrict: "E",
            replace: !0,
            transclude: !0,
            scope: {
                autoPlay: "=",
                doesContinue: "@",
                slideInterval: "@",
                showPager: "@",
                pagerClick: "&",
                disableScroll: "@",
                onSlideChanged: "&",
                activeSlide: "=?",
                bounce: "@"
            },
            controller: ["$scope", "$element", "$attrs", function (e, n, a) {
                function c(e) {
                    e && !s.isScrollFreeze ? r.freezeAllScrolls(e) : !e && s.isScrollFreeze && r.freezeAllScrolls(!1), s.isScrollFreeze = e
                }

                var s = this, u = e.$eval(e.doesContinue) === !0, d = e.$eval(e.bounce) !== !1,
                    f = l(a.autoPlay) ? !!e.autoPlay : !1, h = f ? e.$eval(e.slideInterval) || 4e3 : 0,
                    p = new ionic.views.Slider({
                        el: n[0],
                        auto: h,
                        continuous: u,
                        startSlide: e.activeSlide,
                        bouncing: d,
                        slidesChanged: function () {
                            e.currentSlide = p.currentIndex(), t(function () {
                            })
                        },
                        callback: function (n) {
                            e.currentSlide = n, e.onSlideChanged({
                                index: e.currentSlide,
                                $index: e.currentSlide
                            }), e.$parent.$broadcast("slideBox.slideChanged", n), e.activeSlide = n, t(function () {
                            })
                        },
                        onDrag: function () {
                            c(!0)
                        },
                        onDragEnd: function () {
                            c(!1)
                        }
                    });
                p.enableSlide(e.$eval(a.disableScroll) !== !0), e.$watch("activeSlide", function (e) {
                    l(e) && p.slide(e)
                }), e.$on("slideBox.nextSlide", function () {
                    p.next()
                }), e.$on("slideBox.prevSlide", function () {
                    p.prev()
                }), e.$on("slideBox.setSlide", function (e, t) {
                    p.slide(t)
                }), this.__slider = p;
                var v = i._registerInstance(p, a.delegateHandle, function () {
                    return o.isActiveScope(e)
                });
                e.$on("$destroy", function () {
                    v(), p.kill()
                }), this.slidesCount = function () {
                    return p.slidesCount()
                }, this.onPagerClick = function (t) {
                    e.pagerClick({index: t})
                }, t(function () {
                    p.load()
                })
            }],
            template: '<div class="slider"><div class="slider-slides" ng-transclude></div></div>',
            link: function (t, i, o) {
                function r() {
                    if (!a) {
                        var e = t.$new();
                        a = f("<ion-pager></ion-pager>"), i.append(a), a = n(a)(e)
                    }
                    return a
                }

                e.enabled(i, !1), l(o.showPager) || (t.showPager = !0, r().toggleClass("hide", !1)), o.$observe("showPager", function (e) {
                    void 0 !== e && (e = t.$eval(e), r().toggleClass("hide", !e))
                });
                var a
            }
        }
    }]).directive("ionSlide", function () {
        return {
            restrict: "E", require: "?^ionSlideBox", compile: function (e) {
                e.addClass("slider-slide")
            }
        }
    }).directive("ionPager", function () {
        return {
            restrict: "E",
            replace: !0,
            require: "^ionSlideBox",
            template: '<div class="slider-pager"><span class="slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon ion-record"></i></span></div>',
            link: function (e, t, n, i) {
                var o = function (e) {
                    for (var n = t[0].children, i = n.length, o = 0; i > o; o++) o == e ? n[o].classList.add("active") : n[o].classList.remove("active")
                };
                e.pagerClick = function (e) {
                    i.onPagerClick(e)
                }, e.numSlides = function () {
                    return new Array(i.slidesCount())
                }, e.$watch("currentSlide", function (e) {
                    o(e)
                })
            }
        }
    }), a.directive("ionSlides", ["$animate", "$timeout", "$compile", function (e, t, n) {
        return {
            restrict: "E",
            transclude: !0,
            scope: {options: "=", slider: "="},
            template: '<div class="swiper-container"><div class="swiper-wrapper" ng-transclude></div><div ng-hide="!showPager" class="swiper-pagination"></div></div>',
            controller: ["$scope", "$element", function (e, i) {
                var o = this;
                this.update = function () {
                    t(function () {
                        if (o.__slider) {
                            o.__slider.update(), o._options.loop && o.__slider.createLoop();
                            var t = o.__slider.slides.length;
                            t > 10 && (e.showPager = !1), o.__slider.activeIndex > t - 1 && o.__slider.slideTo(t - 1)
                        }
                    })
                }, this.rapidUpdate = ionic.debounce(function () {
                    o.update()
                }, 50), this.getSlider = function () {
                    return o.__slider
                };
                var r = e.options || {}, a = angular.extend({
                    pagination: i.children().children()[1],
                    paginationClickable: !0,
                    lazyLoading: !0,
                    preloadImages: !1
                }, r);
                this._options = a, t(function () {
                    var t = new ionic.views.Swiper(i.children()[0], a, e, n);
                    e.$emit("$ionicSlides.sliderInitialized", {slider: t}), o.__slider = t, e.slider = o.__slider, e.$on("$destroy", function () {
                        t.destroy(), o.__slider = null
                    })
                }), t(function () {
                    o.rapidUpdate()
                }, 200)
            }],
            link: function (e) {
                e.showPager = !0
            }
        }
    }]).directive("ionSlidePage", [function () {
        return {
            restrict: "E",
            require: "?^ionSlides",
            transclude: !0,
            replace: !0,
            template: '<div class="swiper-slide" ng-transclude></div>',
            link: function (e, t, n, i) {
                i.rapidUpdate(), e.$on("$destroy", function () {
                    i.rapidUpdate()
                })
            }
        }
    }]), a.directive("ionSpinner", function () {
        return {
            restrict: "E", controller: "$ionicSpinner", link: function (e, t, n, i) {
                var o = i.init();
                t.addClass("spinner spinner-" + o), t.on("$destroy", function () {
                    i.stop()
                })
            }
        }
    }), a.directive("ionTab", ["$compile", "$ionicConfig", "$ionicBind", "$ionicViewSwitcher", function (e, t, n, i) {
        function o(e, t) {
            return l(t) ? " " + e + '="' + t + '"' : ""
        }

        return {
            restrict: "E",
            require: ["^ionTabs", "ionTab"],
            controller: "$ionicTab",
            scope: !0,
            compile: function (r, a) {
                for (var c = "<ion-tab-nav" + o("ng-click", a.ngClick) + o("title", a.title) + o("icon", a.icon) + o("icon-on", a.iconOn) + o("icon-off", a.iconOff) + o("badge", a.badge) + o("badge-style", a.badgeStyle) + o("hidden", a.hidden) + o("disabled", a.disabled) + o("class", a["class"]) + "></ion-tab-nav>", s = document.createElement("div"), l = 0; l < r[0].children.length; l++) s.appendChild(r[0].children[l].cloneNode(!0));
                var u = s.childElementCount;
                r.empty();
                var d, h;
                return u && ("ION-NAV-VIEW" === s.children[0].tagName && (d = s.children[0].getAttribute("name"), s.children[0].classList.add("view-container"), h = !0), 1 === u && (s = s.children[0]), h || s.classList.add("pane"), s.classList.add("tab-content")), function (o, r, a, l) {
                    function h() {
                        w.tabMatchesState() && $.select(o, !1)
                    }

                    function p(n) {
                        n && u ? (b || (g = o.$new(), m = f(s), i.viewEleIsActive(m, !0), $.$element.append(m), e(m)(g), b = !0), i.viewEleIsActive(m, !0)) : b && m && (t.views.maxCache() > 0 ? i.viewEleIsActive(m, !1) : v())
                    }

                    function v() {
                        g && g.$destroy(), b && m && m.remove(), s.innerHTML = "", b = g = m = null
                    }

                    var g, m, $ = l[0], w = l[1], b = !1;
                    o.$tabSelected = !1, n(o, a, {
                        onSelect: "&",
                        onDeselect: "&",
                        title: "@",
                        uiSref: "@",
                        href: "@"
                    }), $.add(o), o.$on("$destroy", function () {
                        o.$tabsDestroy || $.remove(o), y.isolateScope().$destroy(), y.remove(), y = s = m = null
                    }), r[0].removeAttribute("title"), d && (w.navViewName = o.navViewName = d), o.$on("$stateChangeSuccess", h), h();
                    var y = f(c);
                    y.data("$ionTabsController", $), y.data("$ionTabController", w), $.$tabsElement.append(e(y)(o)), o.$watch("$tabSelected", p), o.$on("$ionicView.afterEnter", function () {
                        i.viewEleIsActive(m, o.$tabSelected)
                    }), o.$on("$ionicView.clearCache", function () {
                        o.$tabSelected || v()
                    })
                }
            }
        }
    }]), a.directive("ionTabNav", [function () {
        return {
            restrict: "E",
            replace: !0,
            require: ["^ionTabs", "^ionTab"],
            template: "<a ng-class=\"{'has-badge':badge, 'tab-hidden':isHidden(), 'tab-item-active': isTabActive()}\" " + ' ng-disabled="disabled()" class="tab-item"><span class="badge {{badgeStyle}}" ng-if="badge">{{badge}}</span><i class="icon {{getIcon()}}" ng-if="getIcon()"></i><span class="tab-title" ng-bind-html="title"></span></a>',
            scope: {
                title: "@",
                icon: "@",
                iconOn: "@",
                iconOff: "@",
                badge: "=",
                hidden: "@",
                disabled: "&",
                badgeStyle: "@",
                "class": "@"
            },
            link: function (e, t, n, i) {
                var o = i[0], r = i[1];
                t[0].removeAttribute("title"), e.selectTab = function (e) {
                    e.preventDefault(), o.select(r.$scope, !0)
                }, n.ngClick || t.on("click", function (t) {
                    e.$apply(function () {
                        e.selectTab(t)
                    })
                }), e.isHidden = function () {
                    return "true" === n.hidden || n.hidden === !0 ? !0 : !1
                }, e.getIconOn = function () {
                    return e.iconOn || e.icon
                }, e.getIconOff = function () {
                    return e.iconOff || e.icon
                }, e.isTabActive = function () {
                    return o.selectedTab() === r.$scope
                }, e.getIcon = function () {
                    return o.selectedTab() === r.$scope ? e.iconOn || e.icon : e.iconOff || e.icon
                }
            }
        }
    }]), a.directive("ionTabs", ["$ionicTabsDelegate", "$ionicConfig", function (e, t) {
        return {
            restrict: "E", scope: !0, controller: "$ionicTabs", compile: function (n) {
                function i(t, n, i, o) {
                    function a(e, t) {
                        e.stopPropagation();
                        var n = o.previousSelectedTab();
                        n && n.$broadcast(e.name.replace("NavView", "Tabs"), t)
                    }

                    var c = e._registerInstance(o, i.delegateHandle, o.hasActiveScope);
                    o.$scope = t, o.$element = n, o.$tabsElement = f(n[0].querySelector(".tabs")), t.$watch(function () {
                        return n[0].className
                    }, function (e) {
                        var n = -1 !== e.indexOf("tabs-top"), i = -1 !== e.indexOf("tabs-item-hide");
                        t.$hasTabs = !n && !i, t.$hasTabsTop = n && !i, t.$emit("$ionicTabs.top", t.$hasTabsTop)
                    }), t.$on("$ionicNavView.beforeLeave", a), t.$on("$ionicNavView.afterLeave", a), t.$on("$ionicNavView.leave", a), t.$on("$destroy", function () {
                        t.$tabsDestroy = !0, c(), o.$tabsElement = o.$element = o.$scope = r = null, delete t.$hasTabs, delete t.$hasTabsTop
                    })
                }

                function o(e, t, n, i) {
                    i.selectedTab() || i.select(0)
                }

                var r = f('<div class="tab-nav tabs">');
                return r.append(n.contents()), n.append(r).addClass("tabs-" + t.tabs.position() + " tabs-" + t.tabs.style()), {
                    pre: i,
                    post: o
                }
            }
        }
    }]), a.directive("ionTitle", [function () {
        return {
            restrict: "E", compile: function (e) {
                e.addClass("title")
            }
        }
    }]), a.directive("ionToggle", ["$timeout", "$ionicConfig", function (e, t) {
        return {
            restrict: "E",
            replace: !0,
            require: "?ngModel",
            transclude: !0,
            template: '<div class="item item-toggle"><div ng-transclude></div><label class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></label></div>',
            compile: function (e, n) {
                var i = e.find("input");
                return s({
                    name: n.name,
                    "ng-value": n.ngValue,
                    "ng-model": n.ngModel,
                    "ng-checked": n.ngChecked,
                    "ng-disabled": n.ngDisabled,
                    "ng-true-value": n.ngTrueValue,
                    "ng-false-value": n.ngFalseValue,
                    "ng-change": n.ngChange,
                    "ng-required": n.ngRequired,
                    required: n.required
                }, function (e, t) {
                    l(e) && i.attr(t, e)
                }), n.toggleClass && e[0].getElementsByTagName("label")[0].classList.add(n.toggleClass), e.addClass("toggle-" + t.form.toggle()), function (e, t) {
                    var n = t[0].getElementsByTagName("label")[0], i = n.children[0], o = n.children[1],
                        r = o.children[0], a = f(i).controller("ngModel");
                    e.toggle = new ionic.views.Toggle({
                        el: n, track: o, checkbox: i, handle: r, onChange: function () {
                            a && (a.$setViewValue(i.checked), e.$apply())
                        }
                    }), e.$on("$destroy", function () {
                        e.toggle.destroy()
                    })
                }
            }
        }
    }]), a.directive("ionView", function () {
        return {
            restrict: "EA", priority: 1e3, controller: "$ionicView", compile: function (e) {
                return e.addClass("pane"), e[0].removeAttribute("title"), function (e, t, n, i) {
                    i.init()
                }
            }
        }
    })
}();
/**
 * State-based routing for AngularJS
 * @version v0.2.13
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined" != typeof module && "undefined" != typeof exports && module.exports === exports && (module.exports = "ui.router"), function (a, b, c) {
    "use strict";

    function d(a, b) {
        return M(new (M(function () {
        }, {prototype: a})), b)
    }

    function e(a) {
        return L(arguments, function (b) {
            b !== a && L(b, function (b, c) {
                a.hasOwnProperty(c) || (a[c] = b)
            })
        }), a
    }

    function f(a, b) {
        var c = [];
        for (var d in a.path) {
            if (a.path[d] !== b.path[d]) break;
            c.push(a.path[d])
        }
        return c
    }

    function g(a) {
        if (Object.keys) return Object.keys(a);
        var c = [];
        return b.forEach(a, function (a, b) {
            c.push(b)
        }), c
    }

    function h(a, b) {
        if (Array.prototype.indexOf) return a.indexOf(b, Number(arguments[2]) || 0);
        var c = a.length >>> 0, d = Number(arguments[2]) || 0;
        for (d = 0 > d ? Math.ceil(d) : Math.floor(d), 0 > d && (d += c); c > d; d++) if (d in a && a[d] === b) return d;
        return -1
    }

    function i(a, b, c, d) {
        var e, i = f(c, d), j = {}, k = [];
        for (var l in i) if (i[l].params && (e = g(i[l].params), e.length)) for (var m in e) h(k, e[m]) >= 0 || (k.push(e[m]), j[e[m]] = a[e[m]]);
        return M({}, j, b)
    }

    function j(a, b, c) {
        if (!c) {
            c = [];
            for (var d in a) c.push(d)
        }
        for (var e = 0; e < c.length; e++) {
            var f = c[e];
            if (a[f] != b[f]) return !1
        }
        return !0
    }

    function k(a, b) {
        var c = {};
        return L(a, function (a) {
            c[a] = b[a]
        }), c
    }

    function l(a) {
        var b = {}, c = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));
        for (var d in a) -1 == h(c, d) && (b[d] = a[d]);
        return b
    }

    function m(a, b) {
        var c = K(a), d = c ? [] : {};
        return L(a, function (a, e) {
            b(a, e) && (d[c ? d.length : e] = a)
        }), d
    }

    function n(a, b) {
        var c = K(a) ? [] : {};
        return L(a, function (a, d) {
            c[d] = b(a, d)
        }), c
    }

    function o(a, b) {
        var d = 1, f = 2, i = {}, j = [], k = i, m = M(a.when(i), {$$promises: i, $$values: i});
        this.study = function (i) {
            function n(a, c) {
                if (s[c] !== f) {
                    if (r.push(c), s[c] === d) throw r.splice(0, h(r, c)), new Error("Cyclic dependency: " + r.join(" -> "));
                    if (s[c] = d, I(a)) q.push(c, [function () {
                        return b.get(a)
                    }], j); else {
                        var e = b.annotate(a);
                        L(e, function (a) {
                            a !== c && i.hasOwnProperty(a) && n(i[a], a)
                        }), q.push(c, a, e)
                    }
                    r.pop(), s[c] = f
                }
            }

            function o(a) {
                return J(a) && a.then && a.$$promises
            }

            if (!J(i)) throw new Error("'invocables' must be an object");
            var p = g(i || {}), q = [], r = [], s = {};
            return L(i, n), i = r = s = null, function (d, f, g) {
                function h() {
                    --u || (v || e(t, f.$$values), r.$$values = t, r.$$promises = r.$$promises || !0, delete r.$$inheritedValues, n.resolve(t))
                }

                function i(a) {
                    r.$$failure = a, n.reject(a)
                }

                function j(c, e, f) {
                    function j(a) {
                        l.reject(a), i(a)
                    }

                    function k() {
                        if (!G(r.$$failure)) try {
                            l.resolve(b.invoke(e, g, t)), l.promise.then(function (a) {
                                t[c] = a, h()
                            }, j)
                        } catch (a) {
                            j(a)
                        }
                    }

                    var l = a.defer(), m = 0;
                    L(f, function (a) {
                        s.hasOwnProperty(a) && !d.hasOwnProperty(a) && (m++, s[a].then(function (b) {
                            t[a] = b, --m || k()
                        }, j))
                    }), m || k(), s[c] = l.promise
                }

                if (o(d) && g === c && (g = f, f = d, d = null), d) {
                    if (!J(d)) throw new Error("'locals' must be an object")
                } else d = k;
                if (f) {
                    if (!o(f)) throw new Error("'parent' must be a promise returned by $resolve.resolve()")
                } else f = m;
                var n = a.defer(), r = n.promise, s = r.$$promises = {}, t = M({}, d), u = 1 + q.length / 3, v = !1;
                if (G(f.$$failure)) return i(f.$$failure), r;
                f.$$inheritedValues && e(t, l(f.$$inheritedValues, p)), M(s, f.$$promises), f.$$values ? (v = e(t, l(f.$$values, p)), r.$$inheritedValues = l(f.$$values, p), h()) : (f.$$inheritedValues && (r.$$inheritedValues = l(f.$$inheritedValues, p)), f.then(h, i));
                for (var w = 0, x = q.length; x > w; w += 3) d.hasOwnProperty(q[w]) ? h() : j(q[w], q[w + 1], q[w + 2]);
                return r
            }
        }, this.resolve = function (a, b, c, d) {
            return this.study(a)(b, c, d)
        }
    }

    function p(a, b, c) {
        this.fromConfig = function (a, b, c) {
            return G(a.template) ? this.fromString(a.template, b) : G(a.templateUrl) ? this.fromUrl(a.templateUrl, b) : G(a.templateProvider) ? this.fromProvider(a.templateProvider, b, c) : null
        }, this.fromString = function (a, b) {
            return H(a) ? a(b) : a
        }, this.fromUrl = function (c, d) {
            return H(c) && (c = c(d)), null == c ? null : a.get(c, {
                cache: b,
                headers: {Accept: "text/html"}
            }).then(function (a) {
                return a.data
            })
        }, this.fromProvider = function (a, b, d) {
            return c.invoke(a, null, d || {params: b})
        }
    }

    function q(a, b, e) {
        function f(b, c, d, e) {
            if (q.push(b), o[b]) return o[b];
            if (!/^\w+(-+\w+)*(?:\[\])?$/.test(b)) throw new Error("Invalid parameter name '" + b + "' in pattern '" + a + "'");
            if (p[b]) throw new Error("Duplicate parameter name '" + b + "' in pattern '" + a + "'");
            return p[b] = new O.Param(b, c, d, e), p[b]
        }

        function g(a, b, c) {
            var d = ["", ""], e = a.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
            if (!b) return e;
            switch (c) {
                case!1:
                    d = ["(", ")"];
                    break;
                case!0:
                    d = ["?(", ")?"];
                    break;
                default:
                    d = ["(" + c + "|", ")?"]
            }
            return e + d[0] + b + d[1]
        }

        function h(c, e) {
            var f, g, h, i, j;
            return f = c[2] || c[3], j = b.params[f], h = a.substring(m, c.index), g = e ? c[4] : c[4] || ("*" == c[1] ? ".*" : null), i = O.type(g || "string") || d(O.type("string"), {pattern: new RegExp(g)}), {
                id: f,
                regexp: g,
                segment: h,
                type: i,
                cfg: j
            }
        }

        b = M({params: {}}, J(b) ? b : {});
        var i, j = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,
            k = /([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, l = "^", m = 0,
            n = this.segments = [], o = e ? e.params : {}, p = this.params = e ? e.params.$$new() : new O.ParamSet,
            q = [];
        this.source = a;
        for (var r, s, t; (i = j.exec(a)) && (r = h(i, !1), !(r.segment.indexOf("?") >= 0));) s = f(r.id, r.type, r.cfg, "path"), l += g(r.segment, s.type.pattern.source, s.squash), n.push(r.segment), m = j.lastIndex;
        t = a.substring(m);
        var u = t.indexOf("?");
        if (u >= 0) {
            var v = this.sourceSearch = t.substring(u);
            if (t = t.substring(0, u), this.sourcePath = a.substring(0, m + u), v.length > 0) for (m = 0; i = k.exec(v);) r = h(i, !0), s = f(r.id, r.type, r.cfg, "search"), m = j.lastIndex
        } else this.sourcePath = a, this.sourceSearch = "";
        l += g(t) + (b.strict === !1 ? "/?" : "") + "$", n.push(t), this.regexp = new RegExp(l, b.caseInsensitive ? "i" : c), this.prefix = n[0], this.$$paramNames = q
    }

    function r(a) {
        M(this, a)
    }

    function s() {
        function a(a) {
            return null != a ? a.toString().replace(/\//g, "%2F") : a
        }

        function e(a) {
            return null != a ? a.toString().replace(/%2F/g, "/") : a
        }

        function f(a) {
            return this.pattern.test(a)
        }

        function i() {
            return {strict: t, caseInsensitive: p}
        }

        function j(a) {
            return H(a) || K(a) && H(a[a.length - 1])
        }

        function k() {
            for (; x.length;) {
                var a = x.shift();
                if (a.pattern) throw new Error("You cannot override a type's .pattern at runtime.");
                b.extend(v[a.name], o.invoke(a.def))
            }
        }

        function l(a) {
            M(this, a || {})
        }

        O = this;
        var o, p = !1, t = !0, u = !1, v = {}, w = !0, x = [], y = {
            string: {encode: a, decode: e, is: f, pattern: /[^/]*/},
            "int": {
                encode: a, decode: function (a) {
                    return parseInt(a, 10)
                }, is: function (a) {
                    return G(a) && this.decode(a.toString()) === a
                }, pattern: /\d+/
            },
            bool: {
                encode: function (a) {
                    return a ? 1 : 0
                }, decode: function (a) {
                    return 0 !== parseInt(a, 10)
                }, is: function (a) {
                    return a === !0 || a === !1
                }, pattern: /0|1/
            },
            date: {
                encode: function (a) {
                    return this.is(a) ? [a.getFullYear(), ("0" + (a.getMonth() + 1)).slice(-2), ("0" + a.getDate()).slice(-2)].join("-") : c
                },
                decode: function (a) {
                    if (this.is(a)) return a;
                    var b = this.capture.exec(a);
                    return b ? new Date(b[1], b[2] - 1, b[3]) : c
                },
                is: function (a) {
                    return a instanceof Date && !isNaN(a.valueOf())
                },
                equals: function (a, b) {
                    return this.is(a) && this.is(b) && a.toISOString() === b.toISOString()
                },
                pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,
                capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/
            },
            json: {encode: b.toJson, decode: b.fromJson, is: b.isObject, equals: b.equals, pattern: /[^/]*/},
            any: {encode: b.identity, decode: b.identity, is: b.identity, equals: b.equals, pattern: /.*/}
        };
        s.$$getDefaultValue = function (a) {
            if (!j(a.value)) return a.value;
            if (!o) throw new Error("Injectable functions cannot be called at configuration time");
            return o.invoke(a.value)
        }, this.caseInsensitive = function (a) {
            return G(a) && (p = a), p
        }, this.strictMode = function (a) {
            return G(a) && (t = a), t
        }, this.defaultSquashPolicy = function (a) {
            if (!G(a)) return u;
            if (a !== !0 && a !== !1 && !I(a)) throw new Error("Invalid squash policy: " + a + ". Valid policies: false, true, arbitrary-string");
            return u = a, a
        }, this.compile = function (a, b) {
            return new q(a, M(i(), b))
        }, this.isMatcher = function (a) {
            if (!J(a)) return !1;
            var b = !0;
            return L(q.prototype, function (c, d) {
                H(c) && (b = b && G(a[d]) && H(a[d]))
            }), b
        }, this.type = function (a, b, c) {
            if (!G(b)) return v[a];
            if (v.hasOwnProperty(a)) throw new Error("A type named '" + a + "' has already been defined.");
            return v[a] = new r(M({name: a}, b)), c && (x.push({name: a, def: c}), w || k()), this
        }, L(y, function (a, b) {
            v[b] = new r(M({name: b}, a))
        }), v = d(v, {}), this.$get = ["$injector", function (a) {
            return o = a, w = !1, k(), L(y, function (a, b) {
                v[b] || (v[b] = new r(a))
            }), this
        }], this.Param = function (a, b, d, e) {
            function f(a) {
                var b = J(a) ? g(a) : [],
                    c = -1 === h(b, "value") && -1 === h(b, "type") && -1 === h(b, "squash") && -1 === h(b, "array");
                return c && (a = {value: a}), a.$$fn = j(a.value) ? a.value : function () {
                    return a.value
                }, a
            }

            function i(b, c, d) {
                if (b.type && c) throw new Error("Param '" + a + "' has two type configurations.");
                return c ? c : b.type ? b.type instanceof r ? b.type : new r(b.type) : "config" === d ? v.any : v.string
            }

            function k() {
                var b = {array: "search" === e ? "auto" : !1}, c = a.match(/\[\]$/) ? {array: !0} : {};
                return M(b, c, d).array
            }

            function l(a, b) {
                var c = a.squash;
                if (!b || c === !1) return !1;
                if (!G(c) || null == c) return u;
                if (c === !0 || I(c)) return c;
                throw new Error("Invalid squash policy: '" + c + "'. Valid policies: false, true, or arbitrary string")
            }

            function p(a, b, d, e) {
                var f, g, i = [{from: "", to: d || b ? c : ""}, {from: null, to: d || b ? c : ""}];
                return f = K(a.replace) ? a.replace : [], I(e) && f.push({from: e, to: c}), g = n(f, function (a) {
                    return a.from
                }), m(i, function (a) {
                    return -1 === h(g, a.from)
                }).concat(f)
            }

            function q() {
                if (!o) throw new Error("Injectable functions cannot be called at configuration time");
                return o.invoke(d.$$fn)
            }

            function s(a) {
                function b(a) {
                    return function (b) {
                        return b.from === a
                    }
                }

                function c(a) {
                    var c = n(m(w.replace, b(a)), function (a) {
                        return a.to
                    });
                    return c.length ? c[0] : a
                }

                return a = c(a), G(a) ? w.type.decode(a) : q()
            }

            function t() {
                return "{Param:" + a + " " + b + " squash: '" + z + "' optional: " + y + "}"
            }

            var w = this;
            d = f(d), b = i(d, b, e);
            var x = k();
            b = x ? b.$asArray(x, "search" === e) : b, "string" !== b.name || x || "path" !== e || d.value !== c || (d.value = "");
            var y = d.value !== c, z = l(d, y), A = p(d, x, y, z);
            M(this, {
                id: a,
                type: b,
                location: e,
                array: x,
                squash: z,
                replace: A,
                isOptional: y,
                value: s,
                dynamic: c,
                config: d,
                toString: t
            })
        }, l.prototype = {
            $$new: function () {
                return d(this, M(new l, {$$parent: this}))
            }, $$keys: function () {
                for (var a = [], b = [], c = this, d = g(l.prototype); c;) b.push(c), c = c.$$parent;
                return b.reverse(), L(b, function (b) {
                    L(g(b), function (b) {
                        -1 === h(a, b) && -1 === h(d, b) && a.push(b)
                    })
                }), a
            }, $$values: function (a) {
                var b = {}, c = this;
                return L(c.$$keys(), function (d) {
                    b[d] = c[d].value(a && a[d])
                }), b
            }, $$equals: function (a, b) {
                var c = !0, d = this;
                return L(d.$$keys(), function (e) {
                    var f = a && a[e], g = b && b[e];
                    d[e].type.equals(f, g) || (c = !1)
                }), c
            }, $$validates: function (a) {
                var b, c, d, e = !0, f = this;
                return L(this.$$keys(), function (g) {
                    d = f[g], c = a[g], b = !c && d.isOptional, e = e && (b || !!d.type.is(c))
                }), e
            }, $$parent: c
        }, this.ParamSet = l
    }

    function t(a, d) {
        function e(a) {
            var b = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);
            return null != b ? b[1].replace(/\\(.)/g, "$1") : ""
        }

        function f(a, b) {
            return a.replace(/\$(\$|\d{1,2})/, function (a, c) {
                return b["$" === c ? 0 : Number(c)]
            })
        }

        function g(a, b, c) {
            if (!c) return !1;
            var d = a.invoke(b, b, {$match: c});
            return G(d) ? d : !0
        }

        function h(d, e, f, g) {
            function h(a, b, c) {
                return "/" === p ? a : b ? p.slice(0, -1) + a : c ? p.slice(1) + a : a
            }

            function m(a) {
                function b(a) {
                    var b = a(f, d);
                    return b ? (I(b) && d.replace().url(b), !0) : !1
                }

                if (!a || !a.defaultPrevented) {
                    var e = o && d.url() === o;
                    if (o = c, e) return !0;
                    var g, h = j.length;
                    for (g = 0; h > g; g++) if (b(j[g])) return;
                    k && b(k)
                }
            }

            function n() {
                return i = i || e.$on("$locationChangeSuccess", m)
            }

            var o, p = g.baseHref(), q = d.url();
            return l || n(), {
                sync: function () {
                    m()
                }, listen: function () {
                    return n()
                }, update: function (a) {
                    return a ? void (q = d.url()) : void (d.url() !== q && (d.url(q), d.replace()))
                }, push: function (a, b, e) {
                    d.url(a.format(b || {})), o = e && e.$$avoidResync ? d.url() : c, e && e.replace && d.replace()
                }, href: function (c, e, f) {
                    if (!c.validates(e)) return null;
                    var g = a.html5Mode();
                    b.isObject(g) && (g = g.enabled);
                    var i = c.format(e);
                    if (f = f || {}, g || null === i || (i = "#" + a.hashPrefix() + i), i = h(i, g, f.absolute), !f.absolute || !i) return i;
                    var j = !g && i ? "/" : "", k = d.port();
                    return k = 80 === k || 443 === k ? "" : ":" + k, [d.protocol(), "://", d.host(), k, j, i].join("")
                }
            }
        }

        var i, j = [], k = null, l = !1;
        this.rule = function (a) {
            if (!H(a)) throw new Error("'rule' must be a function");
            return j.push(a), this
        }, this.otherwise = function (a) {
            if (I(a)) {
                var b = a;
                a = function () {
                    return b
                }
            } else if (!H(a)) throw new Error("'rule' must be a function");
            return k = a, this
        }, this.when = function (a, b) {
            var c, h = I(b);
            if (I(a) && (a = d.compile(a)), !h && !H(b) && !K(b)) throw new Error("invalid 'handler' in when()");
            var i = {
                matcher: function (a, b) {
                    return h && (c = d.compile(b), b = ["$match", function (a) {
                        return c.format(a)
                    }]), M(function (c, d) {
                        return g(c, b, a.exec(d.path(), d.search()))
                    }, {prefix: I(a.prefix) ? a.prefix : ""})
                }, regex: function (a, b) {
                    if (a.global || a.sticky) throw new Error("when() RegExp must not be global or sticky");
                    return h && (c = b, b = ["$match", function (a) {
                        return f(c, a)
                    }]), M(function (c, d) {
                        return g(c, b, a.exec(d.path()))
                    }, {prefix: e(a)})
                }
            }, j = {matcher: d.isMatcher(a), regex: a instanceof RegExp};
            for (var k in j) if (j[k]) return this.rule(i[k](a, b));
            throw new Error("invalid 'what' in when()")
        }, this.deferIntercept = function (a) {
            a === c && (a = !0), l = a
        }, this.$get = h, h.$inject = ["$location", "$rootScope", "$injector", "$browser"]
    }

    function u(a, e) {
        function f(a) {
            return 0 === a.indexOf(".") || 0 === a.indexOf("^")
        }

        function l(a, b) {
            if (!a) return c;
            var d = I(a), e = d ? a : a.name, g = f(e);
            if (g) {
                if (!b) throw new Error("No reference point given for path '" + e + "'");
                b = l(b);
                for (var h = e.split("."), i = 0, j = h.length, k = b; j > i; i++) if ("" !== h[i] || 0 !== i) {
                    if ("^" !== h[i]) break;
                    if (!k.parent) throw new Error("Path '" + e + "' not valid for state '" + b.name + "'");
                    k = k.parent
                } else k = b;
                h = h.slice(i).join("."), e = k.name + (k.name && h ? "." : "") + h
            }
            var m = y[e];
            return !m || !d && (d || m !== a && m.self !== a) ? c : m
        }

        function m(a, b) {
            z[a] || (z[a] = []), z[a].push(b)
        }

        function o(a) {
            for (var b = z[a] || []; b.length;) p(b.shift())
        }

        function p(b) {
            b = d(b, {
                self: b, resolve: b.resolve || {}, toString: function () {
                    return this.name
                }
            });
            var c = b.name;
            if (!I(c) || c.indexOf("@") >= 0) throw new Error("State must have a valid name");
            if (y.hasOwnProperty(c)) throw new Error("State '" + c + "'' is already defined");
            var e = -1 !== c.indexOf(".") ? c.substring(0, c.lastIndexOf(".")) : I(b.parent) ? b.parent : J(b.parent) && I(b.parent.name) ? b.parent.name : "";
            if (e && !y[e]) return m(e, b.self);
            for (var f in B) H(B[f]) && (b[f] = B[f](b, B.$delegates[f]));
            return y[c] = b, !b[A] && b.url && a.when(b.url, ["$match", "$stateParams", function (a, c) {
                x.$current.navigable == b && j(a, c) || x.transitionTo(b, a, {inherit: !0, location: !1})
            }]), o(c), b
        }

        function q(a) {
            return a.indexOf("*") > -1
        }

        function r(a) {
            var b = a.split("."), c = x.$current.name.split(".");
            if ("**" === b[0] && (c = c.slice(h(c, b[1])), c.unshift("**")), "**" === b[b.length - 1] && (c.splice(h(c, b[b.length - 2]) + 1, Number.MAX_VALUE), c.push("**")), b.length != c.length) return !1;
            for (var d = 0, e = b.length; e > d; d++) "*" === b[d] && (c[d] = "*");
            return c.join("") === b.join("")
        }

        function s(a, b) {
            return I(a) && !G(b) ? B[a] : H(b) && I(a) ? (B[a] && !B.$delegates[a] && (B.$delegates[a] = B[a]), B[a] = b, this) : this
        }

        function t(a, b) {
            return J(a) ? b = a : b.name = a, p(b), this
        }

        function u(a, e, f, h, m, o, p) {
            function s(b, c, d, f) {
                var g = a.$broadcast("$stateNotFound", b, c, d);
                if (g.defaultPrevented) return p.update(), B;
                if (!g.retry) return null;
                if (f.$retry) return p.update(), C;
                var h = x.transition = e.when(g.retry);
                return h.then(function () {
                    return h !== x.transition ? u : (b.options.$retry = !0, x.transitionTo(b.to, b.toParams, b.options))
                }, function () {
                    return B
                }), p.update(), h
            }

            function t(a, c, d, g, i, j) {
                var l = d ? c : k(a.params.$$keys(), c), n = {$stateParams: l};
                i.resolve = m.resolve(a.resolve, n, i.resolve, a);
                var o = [i.resolve.then(function (a) {
                    i.globals = a
                })];
                return g && o.push(g), L(a.views, function (c, d) {
                    var e = c.resolve && c.resolve !== a.resolve ? c.resolve : {};
                    e.$template = [function () {
                        return f.load(d, {view: c, locals: n, params: l, notify: j.notify}) || ""
                    }], o.push(m.resolve(e, n, i.resolve, a).then(function (f) {
                        if (H(c.controllerProvider) || K(c.controllerProvider)) {
                            var g = b.extend({}, e, n);
                            f.$$controller = h.invoke(c.controllerProvider, null, g)
                        } else f.$$controller = c.controller;
                        f.$$state = a, f.$$controllerAs = c.controllerAs, i[d] = f
                    }))
                }), e.all(o).then(function () {
                    return i
                })
            }

            var u = e.reject(new Error("transition superseded")), z = e.reject(new Error("transition prevented")),
                B = e.reject(new Error("transition aborted")), C = e.reject(new Error("transition failed"));
            return w.locals = {resolve: null, globals: {$stateParams: {}}}, x = {
                params: {},
                current: w.self,
                $current: w,
                transition: null
            }, x.reload = function () {
                return x.transitionTo(x.current, o, {reload: !0, inherit: !1, notify: !0})
            }, x.go = function (a, b, c) {
                return x.transitionTo(a, b, M({inherit: !0, relative: x.$current}, c))
            }, x.transitionTo = function (b, c, f) {
                c = c || {}, f = M({
                    location: !0,
                    inherit: !1,
                    relative: null,
                    notify: !0,
                    reload: !1,
                    $retry: !1
                }, f || {});
                var g, j = x.$current, m = x.params, n = j.path, q = l(b, f.relative);
                if (!G(q)) {
                    var r = {to: b, toParams: c, options: f}, y = s(r, j.self, m, f);
                    if (y) return y;
                    if (b = r.to, c = r.toParams, f = r.options, q = l(b, f.relative), !G(q)) {
                        if (!f.relative) throw new Error("No such state '" + b + "'");
                        throw new Error("Could not resolve '" + b + "' from state '" + f.relative + "'")
                    }
                }
                if (q[A]) throw new Error("Cannot transition to abstract state '" + b + "'");
                if (f.inherit && (c = i(o, c || {}, x.$current, q)), !q.params.$$validates(c)) return C;
                c = q.params.$$values(c), b = q;
                var B = b.path, D = 0, E = B[D], F = w.locals, H = [];
                if (!f.reload) for (; E && E === n[D] && E.ownParams.$$equals(c, m);) F = H[D] = E.locals, D++, E = B[D];
                if (v(b, j, F, f)) return b.self.reloadOnSearch !== !1 && p.update(), x.transition = null, e.when(x.current);
                if (c = k(b.params.$$keys(), c || {}), f.notify && a.$broadcast("$stateChangeStart", b.self, c, j.self, m).defaultPrevented) return p.update(), z;
                for (var I = e.when(F), J = D; J < B.length; J++, E = B[J]) F = H[J] = d(F), I = t(E, c, E === b, I, F, f);
                var K = x.transition = I.then(function () {
                    var d, e, g;
                    if (x.transition !== K) return u;
                    for (d = n.length - 1; d >= D; d--) g = n[d], g.self.onExit && h.invoke(g.self.onExit, g.self, g.locals.globals), g.locals = null;
                    for (d = D; d < B.length; d++) e = B[d], e.locals = H[d], e.self.onEnter && h.invoke(e.self.onEnter, e.self, e.locals.globals);
                    return x.transition !== K ? u : (x.$current = b, x.current = b.self, x.params = c, N(x.params, o), x.transition = null, f.location && b.navigable && p.push(b.navigable.url, b.navigable.locals.globals.$stateParams, {
                        $$avoidResync: !0,
                        replace: "replace" === f.location
                    }), f.notify && a.$broadcast("$stateChangeSuccess", b.self, c, j.self, m), p.update(!0), x.current)
                }, function (d) {
                    return x.transition !== K ? u : (x.transition = null, g = a.$broadcast("$stateChangeError", b.self, c, j.self, m, d), g.defaultPrevented || p.update(), e.reject(d))
                });
                return K
            }, x.is = function (a, b, d) {
                d = M({relative: x.$current}, d || {});
                var e = l(a, d.relative);
                return G(e) ? x.$current !== e ? !1 : b ? j(e.params.$$values(b), o) : !0 : c
            }, x.includes = function (a, b, d) {
                if (d = M({relative: x.$current}, d || {}), I(a) && q(a)) {
                    if (!r(a)) return !1;
                    a = x.$current.name
                }
                var e = l(a, d.relative);
                return G(e) ? G(x.$current.includes[e.name]) ? b ? j(e.params.$$values(b), o, g(b)) : !0 : !1 : c
            }, x.href = function (a, b, d) {
                d = M({lossy: !0, inherit: !0, absolute: !1, relative: x.$current}, d || {});
                var e = l(a, d.relative);
                if (!G(e)) return null;
                d.inherit && (b = i(o, b || {}, x.$current, e));
                var f = e && d.lossy ? e.navigable : e;
                return f && f.url !== c && null !== f.url ? p.href(f.url, k(e.params.$$keys(), b || {}), {absolute: d.absolute}) : null
            }, x.get = function (a, b) {
                if (0 === arguments.length) return n(g(y), function (a) {
                    return y[a].self
                });
                var c = l(a, b || x.$current);
                return c && c.self ? c.self : null
            }, x
        }

        function v(a, b, c, d) {
            return a !== b || (c !== b.locals || d.reload) && a.self.reloadOnSearch !== !1 ? void 0 : !0
        }

        var w, x, y = {}, z = {}, A = "abstract", B = {
            parent: function (a) {
                if (G(a.parent) && a.parent) return l(a.parent);
                var b = /^(.+)\.[^.]+$/.exec(a.name);
                return b ? l(b[1]) : w
            }, data: function (a) {
                return a.parent && a.parent.data && (a.data = a.self.data = M({}, a.parent.data, a.data)), a.data
            }, url: function (a) {
                var b = a.url, c = {params: a.params || {}};
                if (I(b)) return "^" == b.charAt(0) ? e.compile(b.substring(1), c) : (a.parent.navigable || w).url.concat(b, c);
                if (!b || e.isMatcher(b)) return b;
                throw new Error("Invalid url '" + b + "' in state '" + a + "'")
            }, navigable: function (a) {
                return a.url ? a : a.parent ? a.parent.navigable : null
            }, ownParams: function (a) {
                var b = a.url && a.url.params || new O.ParamSet;
                return L(a.params || {}, function (a, c) {
                    b[c] || (b[c] = new O.Param(c, null, a, "config"))
                }), b
            }, params: function (a) {
                return a.parent && a.parent.params ? M(a.parent.params.$$new(), a.ownParams) : new O.ParamSet
            }, views: function (a) {
                var b = {};
                return L(G(a.views) ? a.views : {"": a}, function (c, d) {
                    d.indexOf("@") < 0 && (d += "@" + a.parent.name), b[d] = c
                }), b
            }, path: function (a) {
                return a.parent ? a.parent.path.concat(a) : []
            }, includes: function (a) {
                var b = a.parent ? M({}, a.parent.includes) : {};
                return b[a.name] = !0, b
            }, $delegates: {}
        };
        w = p({
            name: "",
            url: "^",
            views: null,
            "abstract": !0
        }), w.navigable = null, this.decorator = s, this.state = t, this.$get = u, u.$inject = ["$rootScope", "$q", "$view", "$injector", "$resolve", "$stateParams", "$urlRouter", "$location", "$urlMatcherFactory"]
    }

    function v() {
        function a(a, b) {
            return {
                load: function (c, d) {
                    var e, f = {
                        template: null,
                        controller: null,
                        view: null,
                        locals: null,
                        notify: !0,
                        async: !0,
                        params: {}
                    };
                    return d = M(f, d), d.view && (e = b.fromConfig(d.view, d.params, d.locals)), e && d.notify && a.$broadcast("$viewContentLoading", d), e
                }
            }
        }

        this.$get = a, a.$inject = ["$rootScope", "$templateFactory"]
    }

    function w() {
        var a = !1;
        this.useAnchorScroll = function () {
            a = !0
        }, this.$get = ["$anchorScroll", "$timeout", function (b, c) {
            return a ? b : function (a) {
                c(function () {
                    a[0].scrollIntoView()
                }, 0, !1)
            }
        }]
    }

    function x(a, c, d, e) {
        function f() {
            return c.has ? function (a) {
                return c.has(a) ? c.get(a) : null
            } : function (a) {
                try {
                    return c.get(a)
                } catch (b) {
                    return null
                }
            }
        }

        function g(a, b) {
            var c = function () {
                return {
                    enter: function (a, b, c) {
                        b.after(a), c()
                    }, leave: function (a, b) {
                        a.remove(), b()
                    }
                }
            };
            if (j) return {
                enter: function (a, b, c) {
                    var d = j.enter(a, null, b, c);
                    d && d.then && d.then(c)
                }, leave: function (a, b) {
                    var c = j.leave(a, b);
                    c && c.then && c.then(b)
                }
            };
            if (i) {
                var d = i && i(b, a);
                return {
                    enter: function (a, b, c) {
                        d.enter(a, null, b), c()
                    }, leave: function (a, b) {
                        d.leave(a), b()
                    }
                }
            }
            return c()
        }

        var h = f(), i = h("$animator"), j = h("$animate"), k = {
            restrict: "ECA", terminal: !0, priority: 400, transclude: "element", compile: function (c, f, h) {
                return function (c, f, i) {
                    function j() {
                        l && (l.remove(), l = null), n && (n.$destroy(), n = null), m && (r.leave(m, function () {
                            l = null
                        }), l = m, m = null)
                    }

                    function k(g) {
                        var k, l = z(c, i, f, e), s = l && a.$current && a.$current.locals[l];
                        if (g || s !== o) {
                            k = c.$new(), o = a.$current.locals[l];
                            var t = h(k, function (a) {
                                r.enter(a, f, function () {
                                    n && n.$emit("$viewContentAnimationEnded"), (b.isDefined(q) && !q || c.$eval(q)) && d(a)
                                }), j()
                            });
                            m = t, n = k, n.$emit("$viewContentLoaded"), n.$eval(p)
                        }
                    }

                    var l, m, n, o, p = i.onload || "", q = i.autoscroll, r = g(i, c);
                    c.$on("$stateChangeSuccess", function () {
                        k(!1)
                    }), c.$on("$viewContentLoading", function () {
                        k(!1)
                    }), k(!0)
                }
            }
        };
        return k
    }

    function y(a, b, c, d) {
        return {
            restrict: "ECA", priority: -400, compile: function (e) {
                var f = e.html();
                return function (e, g, h) {
                    var i = c.$current, j = z(e, h, g, d), k = i && i.locals[j];
                    if (k) {
                        g.data("$uiView", {name: j, state: k.$$state}), g.html(k.$template ? k.$template : f);
                        var l = a(g.contents());
                        if (k.$$controller) {
                            k.$scope = e;
                            var m = b(k.$$controller, k);
                            k.$$controllerAs && (e[k.$$controllerAs] = m), g.data("$ngControllerController", m), g.children().data("$ngControllerController", m)
                        }
                        l(e)
                    }
                }
            }
        }
    }

    function z(a, b, c, d) {
        var e = d(b.uiView || b.name || "")(a), f = c.inheritedData("$uiView");
        return e.indexOf("@") >= 0 ? e : e + "@" + (f ? f.state.name : "")
    }

    function A(a, b) {
        var c, d = a.match(/^\s*({[^}]*})\s*$/);
        if (d && (a = b + "(" + d[1] + ")"), c = a.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/), !c || 4 !== c.length) throw new Error("Invalid state ref '" + a + "'");
        return {state: c[1], paramExpr: c[3] || null}
    }

    function B(a) {
        var b = a.parent().inheritedData("$uiView");
        return b && b.state && b.state.name ? b.state : void 0
    }

    function C(a, c) {
        var d = ["location", "inherit", "reload"];
        return {
            restrict: "A", require: ["?^uiSrefActive", "?^uiSrefActiveEq"], link: function (e, f, g, h) {
                var i = A(g.uiSref, a.current.name), j = null, k = B(f) || a.$current, l = null,
                    m = "A" === f.prop("tagName"), n = "FORM" === f[0].nodeName, o = n ? "action" : "href", p = !0,
                    q = {relative: k, inherit: !0}, r = e.$eval(g.uiSrefOpts) || {};
                b.forEach(d, function (a) {
                    a in r && (q[a] = r[a])
                });
                var s = function (c) {
                    if (c && (j = b.copy(c)), p) {
                        l = a.href(i.state, j, q);
                        var d = h[1] || h[0];
                        return d && d.$$setStateInfo(i.state, j), null === l ? (p = !1, !1) : void g.$set(o, l)
                    }
                };
                i.paramExpr && (e.$watch(i.paramExpr, function (a) {
                    a !== j && s(a)
                }, !0), j = b.copy(e.$eval(i.paramExpr))), s(), n || f.bind("click", function (b) {
                    var d = b.which || b.button;
                    if (!(d > 1 || b.ctrlKey || b.metaKey || b.shiftKey || f.attr("target"))) {
                        var e = c(function () {
                            a.go(i.state, j, q)
                        });
                        b.preventDefault();
                        var g = m && !l ? 1 : 0;
                        b.preventDefault = function () {
                            g-- <= 0 && c.cancel(e)
                        }
                    }
                })
            }
        }
    }

    function D(a, b, c) {
        return {
            restrict: "A", controller: ["$scope", "$element", "$attrs", function (b, d, e) {
                function f() {
                    g() ? d.addClass(j) : d.removeClass(j)
                }

                function g() {
                    return "undefined" != typeof e.uiSrefActiveEq ? h && a.is(h.name, i) : h && a.includes(h.name, i)
                }

                var h, i, j;
                j = c(e.uiSrefActiveEq || e.uiSrefActive || "", !1)(b), this.$$setStateInfo = function (b, c) {
                    h = a.get(b, B(d)), i = c, f()
                }, b.$on("$stateChangeSuccess", f)
            }]
        }
    }

    function E(a) {
        var b = function (b) {
            return a.is(b)
        };
        return b.$stateful = !0, b
    }

    function F(a) {
        var b = function (b) {
            return a.includes(b)
        };
        return b.$stateful = !0, b
    }

    var G = b.isDefined, H = b.isFunction, I = b.isString, J = b.isObject, K = b.isArray, L = b.forEach, M = b.extend,
        N = b.copy;
    b.module("ui.router.util", ["ng"]), b.module("ui.router.router", ["ui.router.util"]), b.module("ui.router.state", ["ui.router.router", "ui.router.util"]), b.module("ui.router", ["ui.router.state"]), b.module("ui.router.compat", ["ui.router"]), o.$inject = ["$q", "$injector"], b.module("ui.router.util").service("$resolve", o), p.$inject = ["$http", "$templateCache", "$injector"], b.module("ui.router.util").service("$templateFactory", p);
    var O;
    q.prototype.concat = function (a, b) {
        var c = {caseInsensitive: O.caseInsensitive(), strict: O.strictMode(), squash: O.defaultSquashPolicy()};
        return new q(this.sourcePath + a + this.sourceSearch, M(c, b), this)
    }, q.prototype.toString = function () {
        return this.source
    }, q.prototype.exec = function (a, b) {
        function c(a) {
            function b(a) {
                return a.split("").reverse().join("")
            }

            function c(a) {
                return a.replace(/\\-/, "-")
            }

            var d = b(a).split(/-(?!\\)/), e = n(d, b);
            return n(e, c).reverse()
        }

        var d = this.regexp.exec(a);
        if (!d) return null;
        b = b || {};
        var e, f, g, h = this.parameters(), i = h.length, j = this.segments.length - 1, k = {};
        if (j !== d.length - 1) throw new Error("Unbalanced capture group in route '" + this.source + "'");
        for (e = 0; j > e; e++) {
            g = h[e];
            var l = this.params[g], m = d[e + 1];
            for (f = 0; f < l.replace; f++) l.replace[f].from === m && (m = l.replace[f].to);
            m && l.array === !0 && (m = c(m)), k[g] = l.value(m)
        }
        for (; i > e; e++) g = h[e], k[g] = this.params[g].value(b[g]);
        return k
    }, q.prototype.parameters = function (a) {
        return G(a) ? this.params[a] || null : this.$$paramNames
    }, q.prototype.validates = function (a) {
        return this.params.$$validates(a)
    }, q.prototype.format = function (a) {
        function b(a) {
            return encodeURIComponent(a).replace(/-/g, function (a) {
                return "%5C%" + a.charCodeAt(0).toString(16).toUpperCase()
            })
        }

        a = a || {};
        var c = this.segments, d = this.parameters(), e = this.params;
        if (!this.validates(a)) return null;
        var f, g = !1, h = c.length - 1, i = d.length, j = c[0];
        for (f = 0; i > f; f++) {
            var k = h > f, l = d[f], m = e[l], o = m.value(a[l]), p = m.isOptional && m.type.equals(m.value(), o),
                q = p ? m.squash : !1, r = m.type.encode(o);
            if (k) {
                var s = c[f + 1];
                if (q === !1) null != r && (j += K(r) ? n(r, b).join("-") : encodeURIComponent(r)), j += s; else if (q === !0) {
                    var t = j.match(/\/$/) ? /\/?(.*)/ : /(.*)/;
                    j += s.match(t)[1]
                } else I(q) && (j += q + s)
            } else {
                if (null == r || p && q !== !1) continue;
                K(r) || (r = [r]), r = n(r, encodeURIComponent).join("&" + l + "="), j += (g ? "&" : "?") + (l + "=" + r), g = !0
            }
        }
        return j
    }, r.prototype.is = function () {
        return !0
    }, r.prototype.encode = function (a) {
        return a
    }, r.prototype.decode = function (a) {
        return a
    }, r.prototype.equals = function (a, b) {
        return a == b
    }, r.prototype.$subPattern = function () {
        var a = this.pattern.toString();
        return a.substr(1, a.length - 2)
    }, r.prototype.pattern = /.*/, r.prototype.toString = function () {
        return "{Type:" + this.name + "}"
    }, r.prototype.$asArray = function (a, b) {
        function d(a, b) {
            function d(a, b) {
                return function () {
                    return a[b].apply(a, arguments)
                }
            }

            function e(a) {
                return K(a) ? a : G(a) ? [a] : []
            }

            function f(a) {
                switch (a.length) {
                    case 0:
                        return c;
                    case 1:
                        return "auto" === b ? a[0] : a;
                    default:
                        return a
                }
            }

            function g(a) {
                return !a
            }

            function h(a, b) {
                return function (c) {
                    c = e(c);
                    var d = n(c, a);
                    return b === !0 ? 0 === m(d, g).length : f(d)
                }
            }

            function i(a) {
                return function (b, c) {
                    var d = e(b), f = e(c);
                    if (d.length !== f.length) return !1;
                    for (var g = 0; g < d.length; g++) if (!a(d[g], f[g])) return !1;
                    return !0
                }
            }

            this.encode = h(d(a, "encode")), this.decode = h(d(a, "decode")), this.is = h(d(a, "is"), !0), this.equals = i(d(a, "equals")), this.pattern = a.pattern, this.$arrayMode = b
        }

        if (!a) return this;
        if ("auto" === a && !b) throw new Error("'auto' array mode is for query parameters only");
        return new d(this, a)
    }, b.module("ui.router.util").provider("$urlMatcherFactory", s), b.module("ui.router.util").run(["$urlMatcherFactory", function () {
    }]), t.$inject = ["$locationProvider", "$urlMatcherFactoryProvider"], b.module("ui.router.router").provider("$urlRouter", t), u.$inject = ["$urlRouterProvider", "$urlMatcherFactoryProvider"], b.module("ui.router.state").value("$stateParams", {}).provider("$state", u), v.$inject = [], b.module("ui.router.state").provider("$view", v), b.module("ui.router.state").provider("$uiViewScroll", w), x.$inject = ["$state", "$injector", "$uiViewScroll", "$interpolate"], y.$inject = ["$compile", "$controller", "$state", "$interpolate"], b.module("ui.router.state").directive("uiView", x), b.module("ui.router.state").directive("uiView", y), C.$inject = ["$state", "$timeout"], D.$inject = ["$state", "$stateParams", "$interpolate"], b.module("ui.router.state").directive("uiSref", C).directive("uiSrefActive", D).directive("uiSrefActiveEq", D), E.$inject = ["$state"], F.$inject = ["$state"], b.module("ui.router.state").filter("isState", E).filter("includedByState", F)
}(window, window.angular);
/*
* angular-css-injector v1.0.3
* Written by Gabriel Delépine
* Special thanks to (github users) : @kleiinnn
* License: MIT
* https://github.com/Yappli/angular-css-injector/
*/
angular.module('angular.css.injector', [])
    .provider('cssInjector', function () {
        var singlePageMode = false;

        function CssInjector($compile, $rootScope) {
            // Variables
            var singlePageMode = false,
                head = angular.element(document.getElementsByTagName('head')[0]),
                scope;

            // Capture the event `locationChangeStart` when the url change. If singlePageMode===TRUE, call the function `removeAll`
            $rootScope.$on('$locationChangeStart', function () {
                if (singlePageMode === true)
                    removeAll();
            });

            // Always called by the functions `addStylesheet` and `removeAll` to initialize the variable `scope`
            var _initScope = function () {
                if (scope === undefined) {
                    if ((scope = head.scope()) === undefined) // We initialise head's scope in a separated function because it is not defined at the time of the initialisation of the service.
                        throw("angular.css.injector error : Please initialize your app in the HTML tag and be sure your page has a HEAD tag.");
                }
            };

            // Used to add a CSS files in the head tag of the page
            var addStylesheet = function (href) {
                _initScope();

                if (scope.injectedStylesheets === undefined) {
                    scope.injectedStylesheets = [];
                    head.append($compile("<link data-ng-repeat='stylesheet in injectedStylesheets' data-ng-href='{{stylesheet.href}}' rel='stylesheet' />")(scope)); // Found here : http://stackoverflow.com/a/11913182/1662766
                } else {
                    for (var i in scope.injectedStylesheets) {
                        if (scope.injectedStylesheets[i].href == href) // An url can't be added more than once. I use a loop FOR, not the function indexOf to make the code IE < 9 compatible
                            return;
                    }
                }

                scope.injectedStylesheets.push({href: href});
            };

            // Used to remove all of the CSS files added with the function `addStylesheet`
            var removeAll = function () {
                _initScope();

                if (scope.injectedStylesheets !== undefined)
                    scope.injectedStylesheets = []; // Make it empty
            };

            return {
                add: addStylesheet,
                removeAll: removeAll
            };
        }

        this.$get = function ($compile, $rootScope) {
            return new CssInjector($compile, $rootScope);
        };

        this.setSinglePageMode = function (mode) {
            singlePageMode = mode;
            return this;
        }
    });

/*! angularjs-scorm-wrapper 26-05-2016 */
var scormwrapper = angular.module("scormwrapper", []);
scormwrapper.service("scormWrapper", function () {
    "use strict";
    var a = "Auto", b = !1, c = ["Auto", "1.2", "2004"];
    this.setAPIVersion = function (b) {
        b = b || "Auto";
        var d = c.indexOf(b.toString());
        return d > -1 ? a = c[d] : console.log("Not found, default to Auto"), a
    }, this.getAPIVersion = function () {
        return a
    }, this.isAvailable = function () {
        return !0
    }, this.doLMSInitialize = function () {
        return this.cmiBooleanToJs(this.getAPICall("LMSInitialize", "Initialize")(""))
    }, this.doLMSFinish = function () {
        return this.cmiBooleanToJs(this.getAPICall("LMSFinish", "Terminate")(""))
    }, this.doLMSGetValue = function (a) {
        return this.getAPICall("LMSGetValue", "GetValue")(a)
    }, this.doLMSSetValue = function (a, b) {
        return this.cmiBooleanToJs(this.getAPICall("LMSSetValue", "SetValue")(a, b))
    }, this.doLMSCommit = function () {
        return this.cmiBooleanToJs(this.getAPICall("LMSCommit", "Commit")(""))
    }, this.doLMSGetLastError = function () {
        return this.getAPICall("LMSGetLastError", "GetLastError")()
    }, this.doLMSGetErrorString = function (a) {
        return this.getAPICall("LMSGetErrorString", "GetErrorString")(a.toString())
    }, this.doLMSGetDiagnostic = function (a) {
        return this.getAPICall("LMSGetDiagnostic", "GetDiagnostic")(a.toString())
    }, this.LMSIsInitialized = function () {
        return b
    }, this.ErrorHandler = function () {
        return this.getAPICall("LMSGetLastError", "GetLastError")()
    }, this.cmiBooleanToJs = function (a) {
        return "1" === a || 1 === a || "true" === a || a === !0
    }, this.getAPIHandle = function () {
        var a = window;
        a.parent && a.parent != a && this.findAPI(a.parent), !b && a.top.opener ? this.findAPI(a.top.opener) : b || console.log("Unable to find API adapter")
    }, this.findAPI = function (c) {
        var d = 0, e = 500;
        for (d; e > d; d++) {
            if (c.API && ("1.2" === a || "Auto" === a)) {
                b = c.API, a = "1.2";
                break
            }
            if (c.API_1484_11 && ("2004" === a || "Auto" === a)) {
                b = c.API_1484_11, a = "2004";
                break
            }
            c.parent && c.parent != c && (d++, c = c.parent)
        }
    }, this.getAPICall = function (c, d) {
        if (!b && (this.getAPIHandle(), !b)) return function () {
            console.log("No API found, can't execute: " + c + " or " + d)
        };
        switch (a) {
            case"2004":
                return function () {
                    return b[d].apply(b, arguments)
                };
            case"1.2":
                return function () {
                    return b[c].apply(b, arguments)
                }
        }
    }
});
!function (e) {
    "use strict";
    if (e.URL = e.URL || e.webkitURL, e.Blob && e.URL) try {
        return new Blob
    } catch (e) {
    }
    var a = e.BlobBuilder || e.WebKitBlobBuilder || e.MozBlobBuilder || function (e) {
        function s(e) {
            return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]
        }

        function t() {
            this.data = []
        }

        function l(e, t, n) {
            this.data = e, this.size = e.length, this.type = t, this.encoding = n
        }

        function c(e) {
            this.code = this[this.name = e]
        }

        var n = t.prototype, r = l.prototype, d = e.FileReaderSync,
            i = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
            o = i.length, a = e.URL || e.webkitURL || e, u = a.createObjectURL, h = a.revokeObjectURL, f = a,
            p = e.btoa, g = e.atob, m = e.ArrayBuffer, v = e.Uint8Array, b = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
        for (l.fake = r.fake = !0; o--;) c.prototype[i[o]] = o + 1;
        return a.createObjectURL || (f = e.URL = function (e) {
            var t, n = document.createElementNS("http://www.w3.org/1999/xhtml", "a");
            return n.href = e, "origin" in n || ("data:" === n.protocol.toLowerCase() ? n.origin = null : (t = e.match(b), n.origin = t && t[1])), n
        }), f.createObjectURL = function (e) {
            var t, n = e.type;
            return null === n && (n = "application/octet-stream"), e instanceof l ? (t = "data:" + n, "base64" === e.encoding ? t + ";base64," + e.data : "URI" === e.encoding ? t + "," + decodeURIComponent(e.data) : p ? t + ";base64," + p(e.data) : t + "," + encodeURIComponent(e.data)) : u ? u.call(a, e) : void 0
        }, f.revokeObjectURL = function (e) {
            "data:" !== e.substring(0, 5) && h && h.call(a, e)
        }, n.append = function (e) {
            var t = this.data;
            if (v && (e instanceof m || e instanceof v)) {
                for (var n = "", r = new v(e), i = 0, o = r.length; i < o; i++) n += String.fromCharCode(r[i]);
                t.push(n)
            } else if ("Blob" === s(e) || "File" === s(e)) {
                if (!d) throw new c("NOT_READABLE_ERR");
                var a = new d;
                t.push(a.readAsBinaryString(e))
            } else e instanceof l ? "base64" === e.encoding && g ? t.push(g(e.data)) : "URI" === e.encoding ? t.push(decodeURIComponent(e.data)) : "raw" === e.encoding && t.push(e.data) : ("string" != typeof e && (e += ""), t.push(unescape(encodeURIComponent(e))))
        }, n.getBlob = function (e) {
            return arguments.length || (e = null), new l(this.data.join(""), e, "raw")
        }, n.toString = function () {
            return "[object BlobBuilder]"
        }, r.slice = function (e, t, n) {
            var r = arguments.length;
            return r < 3 && (n = null), new l(this.data.slice(e, 1 < r ? t : this.data.length), n, this.encoding)
        }, r.toString = function () {
            return "[object Blob]"
        }, r.close = function () {
            this.size = 0, delete this.data
        }, t
    }(e);
    e.Blob = function (e, t) {
        var n = t && t.type || "", r = new a;
        if (e) for (var i = 0, o = e.length; i < o; i++) r.append(e[i]);
        return r.getBlob(n)
    }
}(void 0 !== self && self || "undefined" != typeof window && window || this.content || this);
var CryptoJS = CryptoJS || function (s) {
    function n() {
    }

    var e = {}, t = e.lib = {}, r = t.Base = {
        extend: function (e) {
            n.prototype = this;
            var t = new n;
            return e && t.mixIn(e), t.hasOwnProperty("init") || (t.init = function () {
                t.$super.init.apply(this, arguments)
            }), (t.init.prototype = t).$super = this, t
        }, create: function () {
            var e = this.extend();
            return e.init.apply(e, arguments), e
        }, init: function () {
        }, mixIn: function (e) {
            for (var t in e) e.hasOwnProperty(t) && (this[t] = e[t]);
            e.hasOwnProperty("toString") && (this.toString = e.toString)
        }, clone: function () {
            return this.init.prototype.extend(this)
        }
    }, l = t.WordArray = r.extend({
        init: function (e, t) {
            e = this.words = e || [], this.sigBytes = null != t ? t : 4 * e.length
        }, toString: function (e) {
            return (e || o).stringify(this)
        }, concat: function (e) {
            var t = this.words, n = e.words, r = this.sigBytes;
            if (e = e.sigBytes, this.clamp(), r % 4) for (var i = 0; i < e; i++) t[r + i >>> 2] |= (n[i >>> 2] >>> 24 - i % 4 * 8 & 255) << 24 - (r + i) % 4 * 8; else if (65535 < n.length) for (i = 0; i < e; i += 4) t[r + i >>> 2] = n[i >>> 2]; else t.push.apply(t, n);
            return this.sigBytes += e, this
        }, clamp: function () {
            var e = this.words, t = this.sigBytes;
            e[t >>> 2] &= 4294967295 << 32 - t % 4 * 8, e.length = s.ceil(t / 4)
        }, clone: function () {
            var e = r.clone.call(this);
            return e.words = this.words.slice(0), e
        }, random: function (e) {
            for (var t = [], n = 0; n < e; n += 4) t.push(4294967296 * s.random() | 0);
            return new l.init(t, e)
        }
    }), i = e.enc = {}, o = i.Hex = {
        stringify: function (e) {
            var t = e.words;
            e = e.sigBytes;
            for (var n = [], r = 0; r < e; r++) {
                var i = t[r >>> 2] >>> 24 - r % 4 * 8 & 255;
                n.push((i >>> 4).toString(16)), n.push((15 & i).toString(16))
            }
            return n.join("")
        }, parse: function (e) {
            for (var t = e.length, n = [], r = 0; r < t; r += 2) n[r >>> 3] |= parseInt(e.substr(r, 2), 16) << 24 - r % 8 * 4;
            return new l.init(n, t / 2)
        }
    }, a = i.Latin1 = {
        stringify: function (e) {
            var t = e.words;
            e = e.sigBytes;
            for (var n = [], r = 0; r < e; r++) n.push(String.fromCharCode(t[r >>> 2] >>> 24 - r % 4 * 8 & 255));
            return n.join("")
        }, parse: function (e) {
            for (var t = e.length, n = [], r = 0; r < t; r++) n[r >>> 2] |= (255 & e.charCodeAt(r)) << 24 - r % 4 * 8;
            return new l.init(n, t)
        }
    }, c = i.Utf8 = {
        stringify: function (e) {
            try {
                return decodeURIComponent(escape(a.stringify(e)))
            } catch (e) {
                throw Error("Malformed UTF-8 data")
            }
        }, parse: function (e) {
            return a.parse(unescape(encodeURIComponent(e)))
        }
    }, d = t.BufferedBlockAlgorithm = r.extend({
        reset: function () {
            this._data = new l.init, this._nDataBytes = 0
        }, _append: function (e) {
            "string" == typeof e && (e = c.parse(e)), this._data.concat(e), this._nDataBytes += e.sigBytes
        }, _process: function (e) {
            var t = this._data, n = t.words, r = t.sigBytes, i = this.blockSize, o = r / (4 * i);
            if (e = (o = e ? s.ceil(o) : s.max((0 | o) - this._minBufferSize, 0)) * i, r = s.min(4 * e, r), e) {
                for (var a = 0; a < e; a += i) this._doProcessBlock(n, a);
                a = n.splice(0, e), t.sigBytes -= r
            }
            return new l.init(a, r)
        }, clone: function () {
            var e = r.clone.call(this);
            return e._data = this._data.clone(), e
        }, _minBufferSize: 0
    });
    t.Hasher = d.extend({
        cfg: r.extend(), init: function (e) {
            this.cfg = this.cfg.extend(e), this.reset()
        }, reset: function () {
            d.reset.call(this), this._doReset()
        }, update: function (e) {
            return this._append(e), this._process(), this
        }, finalize: function (e) {
            return e && this._append(e), this._doFinalize()
        }, blockSize: 16, _createHelper: function (n) {
            return function (e, t) {
                return new n.init(t).finalize(e)
            }
        }, _createHmacHelper: function (n) {
            return function (e, t) {
                return new u.HMAC.init(n, t).finalize(e)
            }
        }
    });
    var u = e.algo = {};
    return e
}(Math);
!function () {
    var e = CryptoJS, l = e.lib.WordArray;
    e.enc.Base64 = {
        stringify: function (e) {
            var t = e.words, n = e.sigBytes, r = this._map;
            e.clamp(), e = [];
            for (var i = 0; i < n; i += 3) for (var o = (t[i >>> 2] >>> 24 - i % 4 * 8 & 255) << 16 | (t[i + 1 >>> 2] >>> 24 - (i + 1) % 4 * 8 & 255) << 8 | t[i + 2 >>> 2] >>> 24 - (i + 2) % 4 * 8 & 255, a = 0; a < 4 && i + .75 * a < n; a++) e.push(r.charAt(o >>> 6 * (3 - a) & 63));
            if (t = r.charAt(64)) for (; e.length % 4;) e.push(t);
            return e.join("")
        }, parse: function (e) {
            var t = e.length, n = this._map;
            !(r = n.charAt(64)) || -1 != (r = e.indexOf(r)) && (t = r);
            for (var r = [], i = 0, o = 0; o < t; o++) if (o % 4) {
                var a = n.indexOf(e.charAt(o - 1)) << o % 4 * 2, s = n.indexOf(e.charAt(o)) >>> 6 - o % 4 * 2;
                r[i >>> 2] |= (a | s) << 24 - i % 4 * 8, i++
            }
            return l.create(r, i)
        }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
    }
}(), function (o) {
    function C(e, t, n, r, i, o, a) {
        return ((e = e + (t & n | ~t & r) + i + a) << o | e >>> 32 - o) + t
    }

    function S(e, t, n, r, i, o, a) {
        return ((e = e + (t & r | n & ~r) + i + a) << o | e >>> 32 - o) + t
    }

    function A(e, t, n, r, i, o, a) {
        return ((e = e + (t ^ n ^ r) + i + a) << o | e >>> 32 - o) + t
    }

    function L(e, t, n, r, i, o, a) {
        return ((e = e + (n ^ (t | ~r)) + i + a) << o | e >>> 32 - o) + t
    }

    for (var e = CryptoJS, t = (r = e.lib).WordArray, n = r.Hasher, r = e.algo, N = [], i = 0; i < 64; i++) N[i] = 4294967296 * o.abs(o.sin(i + 1)) | 0;
    r = r.MD5 = n.extend({
        _doReset: function () {
            this._hash = new t.init([1732584193, 4023233417, 2562383102, 271733878])
        }, _doProcessBlock: function (e, t) {
            for (var n = 0; n < 16; n++) {
                var r = e[a = t + n];
                e[a] = 16711935 & (r << 8 | r >>> 24) | 4278255360 & (r << 24 | r >>> 8)
            }
            n = this._hash.words;
            var i, o, a = e[t + 0], s = (r = e[t + 1], e[t + 2]), l = e[t + 3], c = e[t + 4], d = e[t + 5],
                u = e[t + 6], h = e[t + 7], f = e[t + 8], p = e[t + 9], g = e[t + 10], m = e[t + 11], v = e[t + 12],
                b = e[t + 13], y = e[t + 14], w = e[t + 15], k = n[0],
                x = L(x = L(x = L(x = L(x = A(x = A(x = A(x = A(x = S(x = S(x = S(x = S(x = C(x = C(x = C(x = C(x = n[1], o = C(o = n[2], i = C(i = n[3], k = C(k, x, o, i, a, 7, N[0]), x, o, r, 12, N[1]), k, x, s, 17, N[2]), i, k, l, 22, N[3]), o = C(o, i = C(i, k = C(k, x, o, i, c, 7, N[4]), x, o, d, 12, N[5]), k, x, u, 17, N[6]), i, k, h, 22, N[7]), o = C(o, i = C(i, k = C(k, x, o, i, f, 7, N[8]), x, o, p, 12, N[9]), k, x, g, 17, N[10]), i, k, m, 22, N[11]), o = C(o, i = C(i, k = C(k, x, o, i, v, 7, N[12]), x, o, b, 12, N[13]), k, x, y, 17, N[14]), i, k, w, 22, N[15]), o = S(o, i = S(i, k = S(k, x, o, i, r, 5, N[16]), x, o, u, 9, N[17]), k, x, m, 14, N[18]), i, k, a, 20, N[19]), o = S(o, i = S(i, k = S(k, x, o, i, d, 5, N[20]), x, o, g, 9, N[21]), k, x, w, 14, N[22]), i, k, c, 20, N[23]), o = S(o, i = S(i, k = S(k, x, o, i, p, 5, N[24]), x, o, y, 9, N[25]), k, x, l, 14, N[26]), i, k, f, 20, N[27]), o = S(o, i = S(i, k = S(k, x, o, i, b, 5, N[28]), x, o, s, 9, N[29]), k, x, h, 14, N[30]), i, k, v, 20, N[31]), o = A(o, i = A(i, k = A(k, x, o, i, d, 4, N[32]), x, o, f, 11, N[33]), k, x, m, 16, N[34]), i, k, y, 23, N[35]), o = A(o, i = A(i, k = A(k, x, o, i, r, 4, N[36]), x, o, c, 11, N[37]), k, x, h, 16, N[38]), i, k, g, 23, N[39]), o = A(o, i = A(i, k = A(k, x, o, i, b, 4, N[40]), x, o, a, 11, N[41]), k, x, l, 16, N[42]), i, k, u, 23, N[43]), o = A(o, i = A(i, k = A(k, x, o, i, p, 4, N[44]), x, o, v, 11, N[45]), k, x, w, 16, N[46]), i, k, s, 23, N[47]), o = L(o, i = L(i, k = L(k, x, o, i, a, 6, N[48]), x, o, h, 10, N[49]), k, x, y, 15, N[50]), i, k, d, 21, N[51]), o = L(o, i = L(i, k = L(k, x, o, i, v, 6, N[52]), x, o, l, 10, N[53]), k, x, g, 15, N[54]), i, k, r, 21, N[55]), o = L(o, i = L(i, k = L(k, x, o, i, f, 6, N[56]), x, o, w, 10, N[57]), k, x, u, 15, N[58]), i, k, b, 21, N[59]), o = L(o, i = L(i, k = L(k, x, o, i, c, 6, N[60]), x, o, m, 10, N[61]), k, x, s, 15, N[62]), i, k, p, 21, N[63]);
            n[0] = n[0] + k | 0, n[1] = n[1] + x | 0, n[2] = n[2] + o | 0, n[3] = n[3] + i | 0
        }, _doFinalize: function () {
            var e = this._data, t = e.words, n = 8 * this._nDataBytes, r = 8 * e.sigBytes;
            t[r >>> 5] |= 128 << 24 - r % 32;
            var i = o.floor(n / 4294967296);
            for (t[15 + (r + 64 >>> 9 << 4)] = 16711935 & (i << 8 | i >>> 24) | 4278255360 & (i << 24 | i >>> 8), t[14 + (r + 64 >>> 9 << 4)] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8), e.sigBytes = 4 * (t.length + 1), this._process(), t = (e = this._hash).words, n = 0; n < 4; n++) r = t[n], t[n] = 16711935 & (r << 8 | r >>> 24) | 4278255360 & (r << 24 | r >>> 8);
            return e
        }, clone: function () {
            var e = n.clone.call(this);
            return e._hash = this._hash.clone(), e
        }
    }), e.MD5 = n._createHelper(r), e.HmacMD5 = n._createHmacHelper(r)
}(Math), function () {
    var e, t = CryptoJS, n = (e = t.lib).Base, c = e.WordArray, r = (e = t.algo).EvpKDF = n.extend({
        cfg: n.extend({keySize: 4, hasher: e.MD5, iterations: 1}),
        init: function (e) {
            this.cfg = this.cfg.extend(e)
        },
        compute: function (e, t) {
            for (var n = (a = this.cfg).hasher.create(), r = c.create(), i = r.words, o = a.keySize, a = a.iterations; i.length < o;) {
                s && n.update(s);
                var s = n.update(e).finalize(t);
                n.reset();
                for (var l = 1; l < a; l++) s = n.finalize(s), n.reset();
                r.concat(s)
            }
            return r.sigBytes = 4 * o, r
        }
    });
    t.EvpKDF = function (e, t, n) {
        return r.create(n).compute(e, t)
    }
}(), CryptoJS.lib.Cipher || function () {
    var e = (h = CryptoJS).lib, t = e.Base, a = e.WordArray, n = e.BufferedBlockAlgorithm, r = h.enc.Base64,
        i = h.algo.EvpKDF, o = e.Cipher = n.extend({
            cfg: t.extend(), createEncryptor: function (e, t) {
                return this.create(this._ENC_XFORM_MODE, e, t)
            }, createDecryptor: function (e, t) {
                return this.create(this._DEC_XFORM_MODE, e, t)
            }, init: function (e, t, n) {
                this.cfg = this.cfg.extend(n), this._xformMode = e, this._key = t, this.reset()
            }, reset: function () {
                n.reset.call(this), this._doReset()
            }, process: function (e) {
                return this._append(e), this._process()
            }, finalize: function (e) {
                return e && this._append(e), this._doFinalize()
            }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function (r) {
                return {
                    encrypt: function (e, t, n) {
                        return ("string" == typeof t ? f : u).encrypt(r, e, t, n)
                    }, decrypt: function (e, t, n) {
                        return ("string" == typeof t ? f : u).decrypt(r, e, t, n)
                    }
                }
            }
        });
    e.StreamCipher = o.extend({
        _doFinalize: function () {
            return this._process(!0)
        }, blockSize: 1
    });

    function s(e, t, n) {
        var r = this._iv;
        r ? this._iv = void 0 : r = this._prevBlock;
        for (var i = 0; i < n; i++) e[t + i] ^= r[i]
    }

    var l = h.mode = {}, c = (e.BlockCipherMode = t.extend({
        createEncryptor: function (e, t) {
            return this.Encryptor.create(e, t)
        }, createDecryptor: function (e, t) {
            return this.Decryptor.create(e, t)
        }, init: function (e, t) {
            this._cipher = e, this._iv = t
        }
    })).extend();
    c.Encryptor = c.extend({
        processBlock: function (e, t) {
            var n = this._cipher, r = n.blockSize;
            s.call(this, e, t, r), n.encryptBlock(e, t), this._prevBlock = e.slice(t, t + r)
        }
    }), c.Decryptor = c.extend({
        processBlock: function (e, t) {
            var n = this._cipher, r = n.blockSize, i = e.slice(t, t + r);
            n.decryptBlock(e, t), s.call(this, e, t, r), this._prevBlock = i
        }
    }), l = l.CBC = c, c = (h.pad = {}).Pkcs7 = {
        pad: function (e, t) {
            for (var n, r = (n = (n = 4 * t) - e.sigBytes % n) << 24 | n << 16 | n << 8 | n, i = [], o = 0; o < n; o += 4) i.push(r);
            n = a.create(i, n), e.concat(n)
        }, unpad: function (e) {
            e.sigBytes -= 255 & e.words[e.sigBytes - 1 >>> 2]
        }
    }, e.BlockCipher = o.extend({
        cfg: o.cfg.extend({mode: l, padding: c}), reset: function () {
            o.reset.call(this);
            var e = (t = this.cfg).iv, t = t.mode;
            if (this._xformMode == this._ENC_XFORM_MODE) var n = t.createEncryptor; else n = t.createDecryptor, this._minBufferSize = 1;
            this._mode = n.call(t, this, e && e.words)
        }, _doProcessBlock: function (e, t) {
            this._mode.processBlock(e, t)
        }, _doFinalize: function () {
            var e = this.cfg.padding;
            if (this._xformMode == this._ENC_XFORM_MODE) {
                e.pad(this._data, this.blockSize);
                var t = this._process(!0)
            } else t = this._process(!0), e.unpad(t);
            return t
        }, blockSize: 4
    });
    var d = e.CipherParams = t.extend({
        init: function (e) {
            this.mixIn(e)
        }, toString: function (e) {
            return (e || this.formatter).stringify(this)
        }
    }), u = (l = (h.format = {}).OpenSSL = {
        stringify: function (e) {
            var t = e.ciphertext;
            return ((e = e.salt) ? a.create([1398893684, 1701076831]).concat(e).concat(t) : t).toString(r)
        }, parse: function (e) {
            var t = (e = r.parse(e)).words;
            if (1398893684 == t[0] && 1701076831 == t[1]) {
                var n = a.create(t.slice(2, 4));
                t.splice(0, 4), e.sigBytes -= 16
            }
            return d.create({ciphertext: e, salt: n})
        }
    }, e.SerializableCipher = t.extend({
        cfg: t.extend({format: l}), encrypt: function (e, t, n, r) {
            r = this.cfg.extend(r);
            var i = e.createEncryptor(n, r);
            return t = i.finalize(t), i = i.cfg, d.create({
                ciphertext: t,
                key: n,
                iv: i.iv,
                algorithm: e,
                mode: i.mode,
                padding: i.padding,
                blockSize: e.blockSize,
                formatter: r.format
            })
        }, decrypt: function (e, t, n, r) {
            return r = this.cfg.extend(r), t = this._parse(t, r.format), e.createDecryptor(n, r).finalize(t.ciphertext)
        }, _parse: function (e, t) {
            return "string" == typeof e ? t.parse(e, this) : e
        }
    })), h = (h.kdf = {}).OpenSSL = {
        execute: function (e, t, n, r) {
            return r = r || a.random(8), e = i.create({keySize: t + n}).compute(e, r), n = a.create(e.words.slice(t), 4 * n), e.sigBytes = 4 * t, d.create({
                key: e,
                iv: n,
                salt: r
            })
        }
    }, f = e.PasswordBasedCipher = u.extend({
        cfg: u.cfg.extend({kdf: h}), encrypt: function (e, t, n, r) {
            return n = (r = this.cfg.extend(r)).kdf.execute(n, e.keySize, e.ivSize), r.iv = n.iv, (e = u.encrypt.call(this, e, t, n.key, r)).mixIn(n), e
        }, decrypt: function (e, t, n, r) {
            return r = this.cfg.extend(r), t = this._parse(t, r.format), n = r.kdf.execute(n, e.keySize, e.ivSize, t.salt), r.iv = n.iv, u.decrypt.call(this, e, t, n.key, r)
        }
    })
}(), function () {
    for (var e = CryptoJS, t = e.lib.BlockCipher, n = e.algo, a = [], r = [], i = [], o = [], s = [], l = [], c = [], d = [], u = [], h = [], f = [], p = 0; p < 256; p++) f[p] = p < 128 ? p << 1 : p << 1 ^ 283;
    var g = 0, m = 0;
    for (p = 0; p < 256; p++) {
        var v = (v = m ^ m << 1 ^ m << 2 ^ m << 3 ^ m << 4) >>> 8 ^ 255 & v ^ 99;
        a[g] = v;
        var b = f[r[v] = g], y = f[b], w = f[y], k = 257 * f[v] ^ 16843008 * v;
        i[g] = k << 24 | k >>> 8, o[g] = k << 16 | k >>> 16, s[g] = k << 8 | k >>> 24, l[g] = k, k = 16843009 * w ^ 65537 * y ^ 257 * b ^ 16843008 * g, c[v] = k << 24 | k >>> 8, d[v] = k << 16 | k >>> 16, u[v] = k << 8 | k >>> 24, h[v] = k, g ? (g = b ^ f[f[f[w ^ b]]], m ^= f[f[m]]) : g = m = 1
    }
    var x = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
    n = n.AES = t.extend({
        _doReset: function () {
            for (var e = (n = this._key).words, t = n.sigBytes / 4, n = 4 * ((this._nRounds = t + 6) + 1), r = this._keySchedule = [], i = 0; i < n; i++) if (i < t) r[i] = e[i]; else {
                var o = r[i - 1];
                i % t ? 6 < t && 4 == i % t && (o = a[o >>> 24] << 24 | a[o >>> 16 & 255] << 16 | a[o >>> 8 & 255] << 8 | a[255 & o]) : (o = a[(o = o << 8 | o >>> 24) >>> 24] << 24 | a[o >>> 16 & 255] << 16 | a[o >>> 8 & 255] << 8 | a[255 & o], o ^= x[i / t | 0] << 24), r[i] = r[i - t] ^ o
            }
            for (e = this._invKeySchedule = [], t = 0; t < n; t++) i = n - t, o = t % 4 ? r[i] : r[i - 4], e[t] = t < 4 || i <= 4 ? o : c[a[o >>> 24]] ^ d[a[o >>> 16 & 255]] ^ u[a[o >>> 8 & 255]] ^ h[a[255 & o]]
        }, encryptBlock: function (e, t) {
            this._doCryptBlock(e, t, this._keySchedule, i, o, s, l, a)
        }, decryptBlock: function (e, t) {
            var n = e[t + 1];
            e[t + 1] = e[t + 3], e[t + 3] = n, this._doCryptBlock(e, t, this._invKeySchedule, c, d, u, h, r), n = e[t + 1], e[t + 1] = e[t + 3], e[t + 3] = n
        }, _doCryptBlock: function (e, t, n, r, i, o, a, s) {
            for (var l = this._nRounds, c = e[t] ^ n[0], d = e[t + 1] ^ n[1], u = e[t + 2] ^ n[2], h = e[t + 3] ^ n[3], f = 4, p = 1; p < l; p++) {
                var g = r[c >>> 24] ^ i[d >>> 16 & 255] ^ o[u >>> 8 & 255] ^ a[255 & h] ^ n[f++],
                    m = r[d >>> 24] ^ i[u >>> 16 & 255] ^ o[h >>> 8 & 255] ^ a[255 & c] ^ n[f++],
                    v = r[u >>> 24] ^ i[h >>> 16 & 255] ^ o[c >>> 8 & 255] ^ a[255 & d] ^ n[f++];
                h = r[h >>> 24] ^ i[c >>> 16 & 255] ^ o[d >>> 8 & 255] ^ a[255 & u] ^ n[f++], c = g, d = m, u = v
            }
            g = (s[c >>> 24] << 24 | s[d >>> 16 & 255] << 16 | s[u >>> 8 & 255] << 8 | s[255 & h]) ^ n[f++], m = (s[d >>> 24] << 24 | s[u >>> 16 & 255] << 16 | s[h >>> 8 & 255] << 8 | s[255 & c]) ^ n[f++], v = (s[u >>> 24] << 24 | s[h >>> 16 & 255] << 16 | s[c >>> 8 & 255] << 8 | s[255 & d]) ^ n[f++], h = (s[h >>> 24] << 24 | s[c >>> 16 & 255] << 16 | s[d >>> 8 & 255] << 8 | s[255 & u]) ^ n[f++], e[t] = g, e[t + 1] = m, e[t + 2] = v, e[t + 3] = h
        }, keySize: 8
    });
    e.AES = t._createHelper(n)
}(), function (e, t) {
    "object" == typeof exports ? module.exports = exports = t(require("./core")) : "function" == typeof define && define.amd ? define(["./core"], t) : t(e.CryptoJS)
}(this, function (l) {
    return function (i) {
        var e = l, t = e.lib, n = t.WordArray, r = t.Hasher, o = e.algo, a = [], y = [];
        !function () {
            function e(e) {
                for (var t = i.sqrt(e), n = 2; n <= t; n++) if (!(e % n)) return !1;
                return !0
            }

            function t(e) {
                return 0 | 4294967296 * (e - (0 | e))
            }

            for (var n = 2, r = 0; r < 64;) e(n) && (r < 8 && (a[r] = t(i.pow(n, .5))), y[r] = t(i.pow(n, 1 / 3)), r++), n++
        }();
        var w = [], s = o.SHA256 = r.extend({
            _doReset: function () {
                this._hash = new n.init(a.slice(0))
            }, _doProcessBlock: function (e, t) {
                for (var n = this._hash.words, r = n[0], i = n[1], o = n[2], a = n[3], s = n[4], l = n[5], c = n[6], d = n[7], u = 0; u < 64; u++) {
                    if (u < 16) w[u] = 0 | e[t + u]; else {
                        var h = w[u - 15], f = (h << 25 | h >>> 7) ^ (h << 14 | h >>> 18) ^ h >>> 3, p = w[u - 2],
                            g = (p << 15 | p >>> 17) ^ (p << 13 | p >>> 19) ^ p >>> 10;
                        w[u] = f + w[u - 7] + g + w[u - 16]
                    }
                    var m = r & i ^ r & o ^ i & o,
                        v = (r << 30 | r >>> 2) ^ (r << 19 | r >>> 13) ^ (r << 10 | r >>> 22),
                        b = d + ((s << 26 | s >>> 6) ^ (s << 21 | s >>> 11) ^ (s << 7 | s >>> 25)) + (s & l ^ ~s & c) + y[u] + w[u];
                    d = c, c = l, l = s, s = 0 | a + b, a = o, o = i, i = r, r = 0 | b + (v + m)
                }
                n[0] = 0 | n[0] + r, n[1] = 0 | n[1] + i, n[2] = 0 | n[2] + o, n[3] = 0 | n[3] + a, n[4] = 0 | n[4] + s, n[5] = 0 | n[5] + l, n[6] = 0 | n[6] + c, n[7] = 0 | n[7] + d
            }, _doFinalize: function () {
                var e = this._data, t = e.words, n = 8 * this._nDataBytes, r = 8 * e.sigBytes;
                return t[r >>> 5] |= 128 << 24 - r % 32, t[14 + (64 + r >>> 9 << 4)] = i.floor(n / 4294967296), t[15 + (64 + r >>> 9 << 4)] = n, e.sigBytes = 4 * t.length, this._process(), this._hash
            }, clone: function () {
                var e = r.clone.call(this);
                return e._hash = this._hash.clone(), e
            }
        });
        e.SHA256 = r._createHelper(s), e.HmacSHA256 = r._createHmacHelper(s)
    }(Math), l.SHA256
}), function (e, t, n) {
    "use strict";
    "undefined" != typeof module && module.exports ? module.exports = n() : "function" == typeof define && define.amd ? define(n) : t.Fingerprint2 = n()
}(0, this, function () {
    "use strict";
    Array.prototype.indexOf || (Array.prototype.indexOf = function (e, t) {
        var n;
        if (null == this) throw new TypeError("'this' is null or undefined");
        var r = Object(this), i = r.length >>> 0;
        if (0 == i) return -1;
        var o = +t || 0;
        if (Math.abs(o) === 1 / 0 && (o = 0), i <= o) return -1;
        for (n = Math.max(0 <= o ? o : i - Math.abs(o), 0); n < i;) {
            if (n in r && r[n] === e) return n;
            n++
        }
        return -1
    });

    function e(e) {
        this.options = this.extend(e, {
            swfContainerId: "fingerprintjs2",
            swfPath: "flash/compiled/FontList.swf",
            detectScreenOrientation: !0,
            sortPluginsFor: [/palemoon/i]
        }), this.nativeForEach = Array.prototype.forEach, this.nativeMap = Array.prototype.map
    }

    return e.prototype = {
        extend: function (e, t) {
            if (null == e) return t;
            for (var n in e) null != e[n] && t[n] !== e[n] && (t[n] = e[n]);
            return t
        }, log: function (e) {
            window.console
        }, get: function (r) {
            var e = [];
            e = this.userAgentKey(e), e = this.languageKey(e), e = this.colorDepthKey(e), e = this.screenResolutionKey(e), e = this.availableScreenResolutionKey(e), e = this.timezoneOffsetKey(e), e = this.sessionStorageKey(e), e = this.localStorageKey(e), e = this.indexedDbKey(e), e = this.addBehaviorKey(e), e = this.openDatabaseKey(e), e = this.cpuClassKey(e), e = this.platformKey(e), e = this.doNotTrackKey(e), e = this.pluginsKey(e), e = this.canvasKey(e), e = this.webglKey(e), e = this.adBlockKey(e), e = this.hasLiedLanguagesKey(e), e = this.hasLiedResolutionKey(e), e = this.hasLiedOsKey(e), e = this.hasLiedBrowserKey(e), e = this.touchSupportKey(e);
            var i = this;
            this.fontsKey(e, function (e) {
                var n = [];
                i.each(e, function (e) {
                    var t = e.value;
                    e.value && (void 0 !== e.value.join && (t = e.value.join(";")), n.push(t))
                });
                var t = i.x64hash128(n.join("~~~"), 31);
                return r(t, e)
            })
        }, userAgentKey: function (e) {
            return this.options.excludeUserAgent || e.push({key: "user_agent", value: this.getUserAgent()}), e
        }, getUserAgent: function () {
            return navigator.userAgent
        }, languageKey: function (e) {
            return this.options.excludeLanguage || e.push({
                key: "language",
                value: navigator.language || navigator.userLanguage || navigator.browserLanguage || navigator.systemLanguage
            }), e
        }, colorDepthKey: function (e) {
            return this.options.excludeColorDepth || e.push({key: "color_depth", value: screen.colorDepth}), e
        }, screenResolutionKey: function (e) {
            return this.options.excludeScreenResolution ? e : this.getScreenResolution(e)
        }, getScreenResolution: function (e) {
            var t;
            return void 0 !== (t = this.options.detectScreenOrientation && screen.height > screen.width ? [screen.height, screen.width] : [screen.width, screen.height]) && e.push({
                key: "resolution",
                value: t
            }), e
        }, availableScreenResolutionKey: function (e) {
            return this.options.excludeAvailableScreenResolution ? e : this.getAvailableScreenResolution(e)
        }, getAvailableScreenResolution: function (e) {
            var t;
            return screen.availWidth && screen.availHeight && (t = this.options.detectScreenOrientation ? screen.availHeight > screen.availWidth ? [screen.availHeight, screen.availWidth] : [screen.availWidth, screen.availHeight] : [screen.availHeight, screen.availWidth]), void 0 !== t && e.push({
                key: "available_resolution",
                value: t
            }), e
        }, timezoneOffsetKey: function (e) {
            return this.options.excludeTimezoneOffset || e.push({
                key: "timezone_offset",
                value: (new Date).getTimezoneOffset()
            }), e
        }, sessionStorageKey: function (e) {
            return !this.options.excludeSessionStorage && this.hasSessionStorage() && e.push({
                key: "session_storage",
                value: 1
            }), e
        }, localStorageKey: function (e) {
            return !this.options.excludeSessionStorage && this.hasLocalStorage() && e.push({
                key: "local_storage",
                value: 1
            }), e
        }, indexedDbKey: function (e) {
            return !this.options.excludeIndexedDB && this.hasIndexedDB() && e.push({key: "indexed_db", value: 1}), e
        }, addBehaviorKey: function (e) {
            return document.body && !this.options.excludeAddBehavior && document.body.addBehavior && e.push({
                key: "add_behavior",
                value: 1
            }), e
        }, openDatabaseKey: function (e) {
            return !this.options.excludeOpenDatabase && window.openDatabase && e.push({
                key: "open_database",
                value: 1
            }), e
        }, cpuClassKey: function (e) {
            return this.options.excludeCpuClass || e.push({key: "cpu_class", value: this.getNavigatorCpuClass()}), e
        }, platformKey: function (e) {
            return this.options.excludePlatform || e.push({
                key: "navigator_platform",
                value: this.getNavigatorPlatform()
            }), e
        }, doNotTrackKey: function (e) {
            return this.options.excludeDoNotTrack || e.push({key: "do_not_track", value: this.getDoNotTrack()}), e
        }, canvasKey: function (e) {
            return !this.options.excludeCanvas && this.isCanvasSupported() && e.push({
                key: "canvas",
                value: this.getCanvasFp()
            }), e
        }, webglKey: function (e) {
            return this.options.excludeWebGL ? "undefined" == typeof NODEBUG && this.log("Skipping WebGL fingerprinting per excludeWebGL configuration option") : this.isWebGlSupported() ? e.push({
                key: "webgl",
                value: this.getWebglFp()
            }) : "undefined" == typeof NODEBUG && this.log("Skipping WebGL fingerprinting because it is not supported in this browser"), e
        }, adBlockKey: function (e) {
            return this.options.excludeAdBlock || e.push({key: "adblock", value: this.getAdBlock()}), e
        }, hasLiedLanguagesKey: function (e) {
            return this.options.excludeHasLiedLanguages || e.push({
                key: "has_lied_languages",
                value: this.getHasLiedLanguages()
            }), e
        }, hasLiedResolutionKey: function (e) {
            return this.options.excludeHasLiedResolution || e.push({
                key: "has_lied_resolution",
                value: this.getHasLiedResolution()
            }), e
        }, hasLiedOsKey: function (e) {
            return this.options.excludeHasLiedOs || e.push({key: "has_lied_os", value: this.getHasLiedOs()}), e
        }, hasLiedBrowserKey: function (e) {
            return this.options.excludeHasLiedBrowser || e.push({
                key: "has_lied_browser",
                value: this.getHasLiedBrowser()
            }), e
        }, fontsKey: function (e, t) {
            return this.options.excludeJsFonts ? this.flashFontsKey(e, t) : this.jsFontsKey(e, t)
        }, flashFontsKey: function (t, n) {
            return this.options.excludeFlashFonts ? ("undefined" == typeof NODEBUG && this.log("Skipping flash fonts detection per excludeFlashFonts configuration option"), n(t)) : this.hasSwfObjectLoaded() ? this.hasMinFlashInstalled() ? void 0 === this.options.swfPath ? ("undefined" == typeof NODEBUG && this.log("To use Flash fonts detection, you must pass a valid swfPath option, skipping Flash fonts enumeration"), n(t)) : void this.loadSwfAndDetectFonts(function (e) {
                t.push({key: "swf_fonts", value: e.join(";")}), n(t)
            }) : ("undefined" == typeof NODEBUG && this.log("Flash is not installed, skipping Flash fonts enumeration"), n(t)) : ("undefined" == typeof NODEBUG && this.log("Swfobject is not detected, Flash fonts enumeration is skipped"), n(t))
        }, jsFontsKey: function (h, f) {
            var p = this;
            return setTimeout(function () {
                var o = ["monospace", "sans-serif", "serif"], a = document.getElementsByTagName("body")[0],
                    s = document.createElement("span");
                s.style.fontSize = "72px", s.innerHTML = "mmmmmmmmmmlli";
                for (var l = {}, c = {}, e = 0, t = o.length; e < t; e++) s.style.fontFamily = o[e], a.appendChild(s), l[o[e]] = s.offsetWidth, c[o[e]] = s.offsetHeight, a.removeChild(s);

                function n(e) {
                    for (var t = !1, n = 0, r = o.length; n < r; n++) {
                        s.style.fontFamily = e + "," + o[n], a.appendChild(s);
                        var i = s.offsetWidth !== l[o[n]] || s.offsetHeight !== c[o[n]];
                        a.removeChild(s), t = t || i
                    }
                    return t
                }

                var r = ["Andale Mono", "Arial", "Arial Black", "Arial Hebrew", "Arial MT", "Arial Narrow", "Arial Rounded MT Bold", "Arial Unicode MS", "Bitstream Vera Sans Mono", "Book Antiqua", "Bookman Old Style", "Calibri", "Cambria", "Cambria Math", "Century", "Century Gothic", "Century Schoolbook", "Comic Sans", "Comic Sans MS", "Consolas", "Courier", "Courier New", "Garamond", "Geneva", "Georgia", "Helvetica", "Helvetica Neue", "Impact", "Lucida Bright", "Lucida Calligraphy", "Lucida Console", "Lucida Fax", "LUCIDA GRANDE", "Lucida Handwriting", "Lucida Sans", "Lucida Sans Typewriter", "Lucida Sans Unicode", "Microsoft Sans Serif", "Monaco", "Monotype Corsiva", "MS Gothic", "MS Outlook", "MS PGothic", "MS Reference Sans Serif", "MS Sans Serif", "MS Serif", "MYRIAD", "MYRIAD PRO", "Palatino", "Palatino Linotype", "Segoe Print", "Segoe Script", "Segoe UI", "Segoe UI Light", "Segoe UI Semibold", "Segoe UI Symbol", "Tahoma", "Times", "Times New Roman", "Times New Roman PS", "Trebuchet MS", "Verdana", "Wingdings", "Wingdings 2", "Wingdings 3"];
                p.options.extendedJsFonts && (r = r.concat(["Abadi MT Condensed Light", "Academy Engraved LET", "ADOBE CASLON PRO", "Adobe Garamond", "ADOBE GARAMOND PRO", "Agency FB", "Aharoni", "Albertus Extra Bold", "Albertus Medium", "Algerian", "Amazone BT", "American Typewriter", "American Typewriter Condensed", "AmerType Md BT", "Andalus", "Angsana New", "AngsanaUPC", "Antique Olive", "Aparajita", "Apple Chancery", "Apple Color Emoji", "Apple SD Gothic Neo", "Arabic Typesetting", "ARCHER", "ARNO PRO", "Arrus BT", "Aurora Cn BT", "AvantGarde Bk BT", "AvantGarde Md BT", "AVENIR", "Ayuthaya", "Bandy", "Bangla Sangam MN", "Bank Gothic", "BankGothic Md BT", "Baskerville", "Baskerville Old Face", "Batang", "BatangChe", "Bauer Bodoni", "Bauhaus 93", "Bazooka", "Bell MT", "Bembo", "Benguiat Bk BT", "Berlin Sans FB", "Berlin Sans FB Demi", "Bernard MT Condensed", "BernhardFashion BT", "BernhardMod BT", "Big Caslon", "BinnerD", "Blackadder ITC", "BlairMdITC TT", "Bodoni 72", "Bodoni 72 Oldstyle", "Bodoni 72 Smallcaps", "Bodoni MT", "Bodoni MT Black", "Bodoni MT Condensed", "Bodoni MT Poster Compressed", "Bookshelf Symbol 7", "Boulder", "Bradley Hand", "Bradley Hand ITC", "Bremen Bd BT", "Britannic Bold", "Broadway", "Browallia New", "BrowalliaUPC", "Brush Script MT", "Californian FB", "Calisto MT", "Calligrapher", "Candara", "CaslonOpnface BT", "Castellar", "Centaur", "Cezanne", "CG Omega", "CG Times", "Chalkboard", "Chalkboard SE", "Chalkduster", "Charlesworth", "Charter Bd BT", "Charter BT", "Chaucer", "ChelthmITC Bk BT", "Chiller", "Clarendon", "Clarendon Condensed", "CloisterBlack BT", "Cochin", "Colonna MT", "Constantia", "Cooper Black", "Copperplate", "Copperplate Gothic", "Copperplate Gothic Bold", "Copperplate Gothic Light", "CopperplGoth Bd BT", "Corbel", "Cordia New", "CordiaUPC", "Cornerstone", "Coronet", "Cuckoo", "Curlz MT", "DaunPenh", "Dauphin", "David", "DB LCD Temp", "DELICIOUS", "Denmark", "DFKai-SB", "Didot", "DilleniaUPC", "DIN", "DokChampa", "Dotum", "DotumChe", "Ebrima", "Edwardian Script ITC", "Elephant", "English 111 Vivace BT", "Engravers MT", "EngraversGothic BT", "Eras Bold ITC", "Eras Demi ITC", "Eras Light ITC", "Eras Medium ITC", "EucrosiaUPC", "Euphemia", "Euphemia UCAS", "EUROSTILE", "Exotc350 Bd BT", "FangSong", "Felix Titling", "Fixedsys", "FONTIN", "Footlight MT Light", "Forte", "FrankRuehl", "Fransiscan", "Freefrm721 Blk BT", "FreesiaUPC", "Freestyle Script", "French Script MT", "FrnkGothITC Bk BT", "Fruitger", "FRUTIGER", "Futura", "Futura Bk BT", "Futura Lt BT", "Futura Md BT", "Futura ZBlk BT", "FuturaBlack BT", "Gabriola", "Galliard BT", "Gautami", "Geeza Pro", "Geometr231 BT", "Geometr231 Hv BT", "Geometr231 Lt BT", "GeoSlab 703 Lt BT", "GeoSlab 703 XBd BT", "Gigi", "Gill Sans", "Gill Sans MT", "Gill Sans MT Condensed", "Gill Sans MT Ext Condensed Bold", "Gill Sans Ultra Bold", "Gill Sans Ultra Bold Condensed", "Gisha", "Gloucester MT Extra Condensed", "GOTHAM", "GOTHAM BOLD", "Goudy Old Style", "Goudy Stout", "GoudyHandtooled BT", "GoudyOLSt BT", "Gujarati Sangam MN", "Gulim", "GulimChe", "Gungsuh", "GungsuhChe", "Gurmukhi MN", "Haettenschweiler", "Harlow Solid Italic", "Harrington", "Heather", "Heiti SC", "Heiti TC", "HELV", "Herald", "High Tower Text", "Hiragino Kaku Gothic ProN", "Hiragino Mincho ProN", "Hoefler Text", "Humanst 521 Cn BT", "Humanst521 BT", "Humanst521 Lt BT", "Imprint MT Shadow", "Incised901 Bd BT", "Incised901 BT", "Incised901 Lt BT", "INCONSOLATA", "Informal Roman", "Informal011 BT", "INTERSTATE", "IrisUPC", "Iskoola Pota", "JasmineUPC", "Jazz LET", "Jenson", "Jester", "Jokerman", "Juice ITC", "Kabel Bk BT", "Kabel Ult BT", "Kailasa", "KaiTi", "Kalinga", "Kannada Sangam MN", "Kartika", "Kaufmann Bd BT", "Kaufmann BT", "Khmer UI", "KodchiangUPC", "Kokila", "Korinna BT", "Kristen ITC", "Krungthep", "Kunstler Script", "Lao UI", "Latha", "Leelawadee", "Letter Gothic", "Levenim MT", "LilyUPC", "Lithograph", "Lithograph Light", "Long Island", "Lydian BT", "Magneto", "Maiandra GD", "Malayalam Sangam MN", "Malgun Gothic", "Mangal", "Marigold", "Marion", "Marker Felt", "Market", "Marlett", "Matisse ITC", "Matura MT Script Capitals", "Meiryo", "Meiryo UI", "Microsoft Himalaya", "Microsoft JhengHei", "Microsoft New Tai Lue", "Microsoft PhagsPa", "Microsoft Tai Le", "Microsoft Uighur", "Microsoft YaHei", "Microsoft Yi Baiti", "MingLiU", "MingLiU_HKSCS", "MingLiU_HKSCS-ExtB", "MingLiU-ExtB", "Minion", "Minion Pro", "Miriam", "Miriam Fixed", "Mistral", "Modern", "Modern No. 20", "Mona Lisa Solid ITC TT", "Mongolian Baiti", "MONO", "MoolBoran", "Mrs Eaves", "MS LineDraw", "MS Mincho", "MS PMincho", "MS Reference Specialty", "MS UI Gothic", "MT Extra", "MUSEO", "MV Boli", "Nadeem", "Narkisim", "NEVIS", "News Gothic", "News GothicMT", "NewsGoth BT", "Niagara Engraved", "Niagara Solid", "Noteworthy", "NSimSun", "Nyala", "OCR A Extended", "Old Century", "Old English Text MT", "Onyx", "Onyx BT", "OPTIMA", "Oriya Sangam MN", "OSAKA", "OzHandicraft BT", "Palace Script MT", "Papyrus", "Parchment", "Party LET", "Pegasus", "Perpetua", "Perpetua Titling MT", "PetitaBold", "Pickwick", "Plantagenet Cherokee", "Playbill", "PMingLiU", "PMingLiU-ExtB", "Poor Richard", "Poster", "PosterBodoni BT", "PRINCETOWN LET", "Pristina", "PTBarnum BT", "Pythagoras", "Raavi", "Rage Italic", "Ravie", "Ribbon131 Bd BT", "Rockwell", "Rockwell Condensed", "Rockwell Extra Bold", "Rod", "Roman", "Sakkal Majalla", "Santa Fe LET", "Savoye LET", "Sceptre", "Script", "Script MT Bold", "SCRIPTINA", "Serifa", "Serifa BT", "Serifa Th BT", "ShelleyVolante BT", "Sherwood", "Shonar Bangla", "Showcard Gothic", "Shruti", "Signboard", "SILKSCREEN", "SimHei", "Simplified Arabic", "Simplified Arabic Fixed", "SimSun", "SimSun-ExtB", "Sinhala Sangam MN", "Sketch Rockwell", "Skia", "Small Fonts", "Snap ITC", "Snell Roundhand", "Socket", "Souvenir Lt BT", "Staccato222 BT", "Steamer", "Stencil", "Storybook", "Styllo", "Subway", "Swis721 BlkEx BT", "Swiss911 XCm BT", "Sylfaen", "Synchro LET", "System", "Tamil Sangam MN", "Technical", "Teletype", "Telugu Sangam MN", "Tempus Sans ITC", "Terminal", "Thonburi", "Traditional Arabic", "Trajan", "TRAJAN PRO", "Tristan", "Tubular", "Tunga", "Tw Cen MT", "Tw Cen MT Condensed", "Tw Cen MT Condensed Extra Bold", "TypoUpright BT", "Unicorn", "Univers", "Univers CE 55 Medium", "Univers Condensed", "Utsaah", "Vagabond", "Vani", "Vijaya", "Viner Hand ITC", "VisualUI", "Vivaldi", "Vladimir Script", "Vrinda", "Westminster", "WHITNEY", "Wide Latin", "ZapfEllipt BT", "ZapfHumnst BT", "ZapfHumnst Dm BT", "Zapfino", "Zurich BlkEx BT", "Zurich Ex BT", "ZWAdobeF"]));
                for (var i = [], d = 0, u = r.length; d < u; d++) n(r[d]) && i.push(r[d]);
                h.push({key: "js_fonts", value: i}), f(h)
            }, 1)
        }, pluginsKey: function (e) {
            return this.options.excludePlugins || (this.isIE() ? e.push({
                key: "ie_plugins",
                value: this.getIEPlugins()
            }) : e.push({key: "regular_plugins", value: this.getRegularPlugins()})), e
        }, getRegularPlugins: function () {
            for (var e = [], t = 0, n = navigator.plugins.length; t < n; t++) e.push(navigator.plugins[t]);
            return this.pluginsShouldBeSorted() && (e = e.sort(function (e, t) {
                return e.name > t.name ? 1 : e.name < t.name ? -1 : 0
            })), this.map(e, function (e) {
                var t = this.map(e, function (e) {
                    return [e.type, e.suffixes].join("~")
                }).join(",");
                return [e.name, e.description, t].join("::")
            }, this)
        }, getIEPlugins: function () {
            var e = [];
            if (Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(window, "ActiveXObject") || "ActiveXObject" in window) {
                e = this.map(["AcroPDF.PDF", "Adodb.Stream", "AgControl.AgControl", "DevalVRXCtrl.DevalVRXCtrl.1", "MacromediaFlashPaper.MacromediaFlashPaper", "Msxml2.DOMDocument", "Msxml2.XMLHTTP", "PDF.PdfCtrl", "QuickTime.QuickTime", "QuickTimeCheckObject.QuickTimeCheck.1", "RealPlayer", "RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)", "RealVideo.RealVideo(tm) ActiveX Control (32-bit)", "Scripting.Dictionary", "SWCtl.SWCtl", "Shell.UIHelper", "ShockwaveFlash.ShockwaveFlash", "Skype.Detection", "TDCCtl.TDCCtl", "WMPlayer.OCX", "rmocx.RealPlayer G2 Control", "rmocx.RealPlayer G2 Control.1"], function (e) {
                    try {
                        return new ActiveXObject(e), e
                    } catch (e) {
                        return null
                    }
                })
            }
            return navigator.plugins && (e = e.concat(this.getRegularPlugins())), e
        }, pluginsShouldBeSorted: function () {
            for (var e = !1, t = 0, n = this.options.sortPluginsFor.length; t < n; t++) {
                var r = this.options.sortPluginsFor[t];
                if (navigator.userAgent.match(r)) {
                    e = !0;
                    break
                }
            }
            return e
        }, touchSupportKey: function (e) {
            return this.options.excludeTouchSupport || e.push({key: "touch_support", value: this.getTouchSupport()}), e
        }, hasSessionStorage: function () {
            try {
                return !!window.sessionStorage
            } catch (e) {
                return !0
            }
        }, hasLocalStorage: function () {
            try {
                return !!window.localStorage
            } catch (e) {
                return !0
            }
        }, hasIndexedDB: function () {
            return !!window.indexedDB
        }, getNavigatorCpuClass: function () {
            return navigator.cpuClass ? navigator.cpuClass : "unknown"
        }, getNavigatorPlatform: function () {
            return navigator.platform ? navigator.platform : "unknown"
        }, getDoNotTrack: function () {
            return navigator.doNotTrack ? navigator.doNotTrack : "unknown"
        }, getTouchSupport: function () {
            var e = 0, t = !1;
            void 0 !== navigator.maxTouchPoints ? e = navigator.maxTouchPoints : void 0 !== navigator.msMaxTouchPoints && (e = navigator.msMaxTouchPoints);
            try {
                document.createEvent("TouchEvent"), t = !0
            } catch (e) {
            }
            return [e, t, "ontouchstart" in window]
        }, getCanvasFp: function () {
            var e = [], t = document.createElement("canvas");
            t.width = 2e3, t.height = 200, t.style.display = "inline";
            var n = t.getContext("2d");
            return n.rect(0, 0, 10, 10), n.rect(2, 2, 6, 6), e.push("canvas winding:" + (!1 === n.isPointInPath(5, 5, "evenodd") ? "yes" : "no")), n.textBaseline = "alphabetic", n.fillStyle = "#f60", n.fillRect(125, 1, 62, 20), n.fillStyle = "#069", this.options.dontUseFakeFontInCanvas ? n.font = "11pt Arial" : n.font = "11pt no-real-font-123", n.fillText("Cwm fjordbank glyphs vext quiz, 😃", 2, 15), n.fillStyle = "rgba(102, 204, 0, 0.7)", n.font = "18pt Arial", n.fillText("Cwm fjordbank glyphs vext quiz, 😃", 4, 45), n.globalCompositeOperation = "multiply", n.fillStyle = "rgb(255,0,255)", n.beginPath(), n.arc(50, 50, 50, 0, 2 * Math.PI, !0), n.closePath(), n.fill(), n.fillStyle = "rgb(0,255,255)", n.beginPath(), n.arc(100, 50, 50, 0, 2 * Math.PI, !0), n.closePath(), n.fill(), n.fillStyle = "rgb(255,255,0)", n.beginPath(), n.arc(75, 100, 50, 0, 2 * Math.PI, !0), n.closePath(), n.fill(), n.fillStyle = "rgb(255,0,255)", n.arc(75, 75, 75, 0, 2 * Math.PI, !0), n.arc(75, 75, 25, 0, 2 * Math.PI, !0), n.fill("evenodd"), e.push("canvas fp:" + t.toDataURL()), e.join("~")
        }, getWebglFp: function () {
            function e(e) {
                return t.clearColor(0, 0, 0, 1), t.enable(t.DEPTH_TEST), t.depthFunc(t.LEQUAL), t.clear(t.COLOR_BUFFER_BIT | t.DEPTH_BUFFER_BIT), "[" + e[0] + ", " + e[1] + "]"
            }

            var t;
            if (!(t = this.getWebglCanvas())) return null;
            var n = [], r = t.createBuffer();
            t.bindBuffer(t.ARRAY_BUFFER, r);
            var i = new Float32Array([-.2, -.9, 0, .4, -.26, 0, 0, .732134444, 0]);
            t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW), r.itemSize = 3, r.numItems = 3;
            var o = t.createProgram(), a = t.createShader(t.VERTEX_SHADER);
            t.shaderSource(a, "attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"), t.compileShader(a);
            var s, l, c, d = t.createShader(t.FRAGMENT_SHADER);
            return t.shaderSource(d, "precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"), t.compileShader(d), t.attachShader(o, a), t.attachShader(o, d), t.linkProgram(o), t.useProgram(o), o.vertexPosAttrib = t.getAttribLocation(o, "attrVertex"), o.offsetUniform = t.getUniformLocation(o, "uniformOffset"), t.enableVertexAttribArray(o.vertexPosArray), t.vertexAttribPointer(o.vertexPosAttrib, r.itemSize, t.FLOAT, !1, 0, 0), t.uniform2f(o.offsetUniform, 1, 1), t.drawArrays(t.TRIANGLE_STRIP, 0, r.numItems), null != t.canvas && n.push(t.canvas.toDataURL()), n.push("extensions:" + t.getSupportedExtensions().join(";")), n.push("webgl aliased line width range:" + e(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))), n.push("webgl aliased point size range:" + e(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))), n.push("webgl alpha bits:" + t.getParameter(t.ALPHA_BITS)), n.push("webgl antialiasing:" + (t.getContextAttributes().antialias ? "yes" : "no")), n.push("webgl blue bits:" + t.getParameter(t.BLUE_BITS)), n.push("webgl depth bits:" + t.getParameter(t.DEPTH_BITS)), n.push("webgl green bits:" + t.getParameter(t.GREEN_BITS)), n.push("webgl max anisotropy:" + ((c = (s = t).getExtension("EXT_texture_filter_anisotropic") || s.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || s.getExtension("MOZ_EXT_texture_filter_anisotropic")) ? (0 === (l = s.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT)) && (l = 2), l) : null)), n.push("webgl max combined texture image units:" + t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)), n.push("webgl max cube map texture size:" + t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)), n.push("webgl max fragment uniform vectors:" + t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)), n.push("webgl max render buffer size:" + t.getParameter(t.MAX_RENDERBUFFER_SIZE)), n.push("webgl max texture image units:" + t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)), n.push("webgl max texture size:" + t.getParameter(t.MAX_TEXTURE_SIZE)), n.push("webgl max varying vectors:" + t.getParameter(t.MAX_VARYING_VECTORS)), n.push("webgl max vertex attribs:" + t.getParameter(t.MAX_VERTEX_ATTRIBS)), n.push("webgl max vertex texture image units:" + t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)), n.push("webgl max vertex uniform vectors:" + t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)), n.push("webgl max viewport dims:" + e(t.getParameter(t.MAX_VIEWPORT_DIMS))), n.push("webgl red bits:" + t.getParameter(t.RED_BITS)), n.push("webgl renderer:" + t.getParameter(t.RENDERER)), n.push("webgl shading language version:" + t.getParameter(t.SHADING_LANGUAGE_VERSION)), n.push("webgl stencil bits:" + t.getParameter(t.STENCIL_BITS)), n.push("webgl vendor:" + t.getParameter(t.VENDOR)), n.push("webgl version:" + t.getParameter(t.VERSION)), t.getShaderPrecisionFormat ? (n.push("webgl vertex shader high float precision:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT).precision), n.push("webgl vertex shader high float precision rangeMin:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT).rangeMin), n.push("webgl vertex shader high float precision rangeMax:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT).rangeMax), n.push("webgl vertex shader medium float precision:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT).precision), n.push("webgl vertex shader medium float precision rangeMin:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT).rangeMin), n.push("webgl vertex shader medium float precision rangeMax:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT).rangeMax), n.push("webgl vertex shader low float precision:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.LOW_FLOAT).precision), n.push("webgl vertex shader low float precision rangeMin:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.LOW_FLOAT).rangeMin), n.push("webgl vertex shader low float precision rangeMax:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.LOW_FLOAT).rangeMax), n.push("webgl fragment shader high float precision:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT).precision), n.push("webgl fragment shader high float precision rangeMin:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT).rangeMin), n.push("webgl fragment shader high float precision rangeMax:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT).rangeMax), n.push("webgl fragment shader medium float precision:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT).precision), n.push("webgl fragment shader medium float precision rangeMin:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT).rangeMin), n.push("webgl fragment shader medium float precision rangeMax:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT).rangeMax), n.push("webgl fragment shader low float precision:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.LOW_FLOAT).precision), n.push("webgl fragment shader low float precision rangeMin:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.LOW_FLOAT).rangeMin), n.push("webgl fragment shader low float precision rangeMax:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.LOW_FLOAT).rangeMax), n.push("webgl vertex shader high int precision:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_INT).precision), n.push("webgl vertex shader high int precision rangeMin:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_INT).rangeMin), n.push("webgl vertex shader high int precision rangeMax:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_INT).rangeMax), n.push("webgl vertex shader medium int precision:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_INT).precision), n.push("webgl vertex shader medium int precision rangeMin:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_INT).rangeMin), n.push("webgl vertex shader medium int precision rangeMax:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_INT).rangeMax), n.push("webgl vertex shader low int precision:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.LOW_INT).precision), n.push("webgl vertex shader low int precision rangeMin:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.LOW_INT).rangeMin), n.push("webgl vertex shader low int precision rangeMax:" + t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.LOW_INT).rangeMax), n.push("webgl fragment shader high int precision:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_INT).precision), n.push("webgl fragment shader high int precision rangeMin:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_INT).rangeMin), n.push("webgl fragment shader high int precision rangeMax:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_INT).rangeMax), n.push("webgl fragment shader medium int precision:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_INT).precision), n.push("webgl fragment shader medium int precision rangeMin:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_INT).rangeMin), n.push("webgl fragment shader medium int precision rangeMax:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_INT).rangeMax), n.push("webgl fragment shader low int precision:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.LOW_INT).precision), n.push("webgl fragment shader low int precision rangeMin:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.LOW_INT).rangeMin), n.push("webgl fragment shader low int precision rangeMax:" + t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.LOW_INT).rangeMax)) : "undefined" == typeof NODEBUG && this.log("WebGL fingerprinting is incomplete, because your browser does not support getShaderPrecisionFormat"), n.join("~")
        }, getAdBlock: function () {
            var e = document.createElement("div");
            e.setAttribute("id", "ads");
            try {
                return document.body.appendChild(e), !document.getElementById("ads")
            } catch (e) {
                return !1
            }
        }, getHasLiedLanguages: function () {
            if (void 0 !== navigator.languages) try {
                if (navigator.languages[0].substr(0, 2) !== navigator.language.substr(0, 2)) return !0
            } catch (e) {
                return !0
            }
            return !1
        }, getHasLiedResolution: function () {
            return screen.width < screen.availWidth || screen.height < screen.availHeight
        }, getHasLiedOs: function () {
            var e, t = navigator.userAgent.toLowerCase(), n = navigator.oscpu, r = navigator.platform.toLowerCase();
            if (e = 0 <= t.indexOf("windows phone") ? "Windows Phone" : 0 <= t.indexOf("win") ? "Windows" : 0 <= t.indexOf("android") ? "Android" : 0 <= t.indexOf("linux") ? "Linux" : 0 <= t.indexOf("iphone") || 0 <= t.indexOf("ipad") ? "iOS" : 0 <= t.indexOf("mac") ? "Mac" : "Other", ("ontouchstart" in window || 0 < navigator.maxTouchPoints || 0 < navigator.msMaxTouchPoints) && "Windows Phone" !== e && "Android" !== e && "iOS" !== e && "Other" !== e) return !0;
            if (void 0 !== n) {
                if (0 <= (n = n.toLowerCase()).indexOf("win") && "Windows" !== e && "Windows Phone" !== e) return !0;
                if (0 <= n.indexOf("linux") && "Linux" !== e && "Android" !== e) return !0;
                if (0 <= n.indexOf("mac") && "Mac" !== e && "iOS" !== e) return !0;
                if (0 === n.indexOf("win") && 0 === n.indexOf("linux") && 0 <= n.indexOf("mac") && "other" !== e) return !0
            }
            return 0 <= r.indexOf("win") && "Windows" !== e && "Windows Phone" !== e || ((0 <= r.indexOf("linux") || 0 <= r.indexOf("android") || 0 <= r.indexOf("pike")) && "Linux" !== e && "Android" !== e || ((0 <= r.indexOf("mac") || 0 <= r.indexOf("ipad") || 0 <= r.indexOf("ipod") || 0 <= r.indexOf("iphone")) && "Mac" !== e && "iOS" !== e || (0 === r.indexOf("win") && 0 === r.indexOf("linux") && 0 <= r.indexOf("mac") && "other" !== e || void 0 === navigator.plugins && "Windows" !== e && "Windows Phone" !== e)))
        }, getHasLiedBrowser: function () {
            var e, t = navigator.userAgent.toLowerCase(), n = navigator.productSub;
            if (("Chrome" === (e = 0 <= t.indexOf("firefox") ? "Firefox" : 0 <= t.indexOf("opera") || 0 <= t.indexOf("opr") ? "Opera" : 0 <= t.indexOf("chrome") ? "Chrome" : 0 <= t.indexOf("safari") ? "Safari" : 0 <= t.indexOf("trident") ? "Internet Explorer" : "Other") || "Safari" === e || "Opera" === e) && "20030107" !== n) return !0;
            var r, i = eval.toString().length;
            if (37 === i && "Safari" !== e && "Firefox" !== e && "Other" !== e) return !0;
            if (39 === i && "Internet Explorer" !== e && "Other" !== e) return !0;
            if (33 === i && "Chrome" !== e && "Opera" !== e && "Other" !== e) return !0;
            try {
                throw"a"
            } catch (e) {
                try {
                    e.toSource(), r = !0
                } catch (e) {
                    r = !1
                }
            }
            return !(!r || "Firefox" === e || "Other" === e)
        }, isCanvasSupported: function () {
            var e = document.createElement("canvas");
            return !(!e.getContext || !e.getContext("2d"))
        }, isWebGlSupported: function () {
            if (!this.isCanvasSupported()) return !1;
            var t, e = document.createElement("canvas");
            try {
                t = e.getContext && (e.getContext("webgl") || e.getContext("experimental-webgl"))
            } catch (e) {
                t = !1
            }
            return !!window.WebGLRenderingContext && !!t
        }, isIE: function () {
            return "Microsoft Internet Explorer" === navigator.appName || !("Netscape" !== navigator.appName || !/Trident/.test(navigator.userAgent))
        }, hasSwfObjectLoaded: function () {
            return void 0 !== window.swfobject
        }, hasMinFlashInstalled: function () {
            return swfobject.hasFlashPlayerVersion("9.0.0")
        }, addFlashDivNode: function () {
            var e = document.createElement("div");
            e.setAttribute("id", this.options.swfContainerId), document.body.appendChild(e)
        }, loadSwfAndDetectFonts: function (t) {
            var e = "___fp_swf_loaded";
            window[e] = function (e) {
                t(e)
            };
            var n = this.options.swfContainerId;
            this.addFlashDivNode();
            var r = {onReady: e};
            swfobject.embedSWF(this.options.swfPath, n, "1", "1", "9.0.0", !1, r, {
                allowScriptAccess: "always",
                menu: "false"
            }, {})
        }, getWebglCanvas: function () {
            var e = document.createElement("canvas"), t = null;
            try {
                t = e.getContext("webgl") || e.getContext("experimental-webgl")
            } catch (e) {
            }
            return t = t || null
        }, each: function (e, t, n) {
            if (null !== e) if (this.nativeForEach && e.forEach === this.nativeForEach) e.forEach(t, n); else if (e.length === +e.length) {
                for (var r = 0, i = e.length; r < i; r++) if (t.call(n, e[r], r, e) === {}) return
            } else for (var o in e) if (e.hasOwnProperty(o) && t.call(n, e[o], o, e) === {}) return
        }, map: function (e, r, i) {
            var o = [];
            return null == e ? o : this.nativeMap && e.map === this.nativeMap ? e.map(r, i) : (this.each(e, function (e, t, n) {
                o[o.length] = r.call(i, e, t, n)
            }), o)
        }, x64Add: function (e, t) {
            e = [e[0] >>> 16, 65535 & e[0], e[1] >>> 16, 65535 & e[1]], t = [t[0] >>> 16, 65535 & t[0], t[1] >>> 16, 65535 & t[1]];
            var n = [0, 0, 0, 0];
            return n[3] += e[3] + t[3], n[2] += n[3] >>> 16, n[3] &= 65535, n[2] += e[2] + t[2], n[1] += n[2] >>> 16, n[2] &= 65535, n[1] += e[1] + t[1], n[0] += n[1] >>> 16, n[1] &= 65535, n[0] += e[0] + t[0], n[0] &= 65535, [n[0] << 16 | n[1], n[2] << 16 | n[3]]
        }, x64Multiply: function (e, t) {
            e = [e[0] >>> 16, 65535 & e[0], e[1] >>> 16, 65535 & e[1]], t = [t[0] >>> 16, 65535 & t[0], t[1] >>> 16, 65535 & t[1]];
            var n = [0, 0, 0, 0];
            return n[3] += e[3] * t[3], n[2] += n[3] >>> 16, n[3] &= 65535, n[2] += e[2] * t[3], n[1] += n[2] >>> 16, n[2] &= 65535, n[2] += e[3] * t[2], n[1] += n[2] >>> 16, n[2] &= 65535, n[1] += e[1] * t[3], n[0] += n[1] >>> 16, n[1] &= 65535, n[1] += e[2] * t[2], n[0] += n[1] >>> 16, n[1] &= 65535, n[1] += e[3] * t[1], n[0] += n[1] >>> 16, n[1] &= 65535, n[0] += e[0] * t[3] + e[1] * t[2] + e[2] * t[1] + e[3] * t[0], n[0] &= 65535, [n[0] << 16 | n[1], n[2] << 16 | n[3]]
        }, x64Rotl: function (e, t) {
            return 32 === (t %= 64) ? [e[1], e[0]] : t < 32 ? [e[0] << t | e[1] >>> 32 - t, e[1] << t | e[0] >>> 32 - t] : (t -= 32, [e[1] << t | e[0] >>> 32 - t, e[0] << t | e[1] >>> 32 - t])
        }, x64LeftShift: function (e, t) {
            return 0 === (t %= 64) ? e : t < 32 ? [e[0] << t | e[1] >>> 32 - t, e[1] << t] : [e[1] << t - 32, 0]
        }, x64Xor: function (e, t) {
            return [e[0] ^ t[0], e[1] ^ t[1]]
        }, x64Fmix: function (e) {
            return e = this.x64Xor(e, [0, e[0] >>> 1]), e = this.x64Multiply(e, [4283543511, 3981806797]), e = this.x64Xor(e, [0, e[0] >>> 1]), e = this.x64Multiply(e, [3301882366, 444984403]), e = this.x64Xor(e, [0, e[0] >>> 1])
        }, x64hash128: function (e, t) {
            t = t || 0;
            for (var n = (e = e || "").length % 16, r = e.length - n, i = [0, t], o = [0, t], a = [0, 0], s = [0, 0], l = [2277735313, 289559509], c = [1291169091, 658871167], d = 0; d < r; d += 16) a = [255 & e.charCodeAt(d + 4) | (255 & e.charCodeAt(d + 5)) << 8 | (255 & e.charCodeAt(d + 6)) << 16 | (255 & e.charCodeAt(d + 7)) << 24, 255 & e.charCodeAt(d) | (255 & e.charCodeAt(d + 1)) << 8 | (255 & e.charCodeAt(d + 2)) << 16 | (255 & e.charCodeAt(d + 3)) << 24], s = [255 & e.charCodeAt(d + 12) | (255 & e.charCodeAt(d + 13)) << 8 | (255 & e.charCodeAt(d + 14)) << 16 | (255 & e.charCodeAt(d + 15)) << 24, 255 & e.charCodeAt(d + 8) | (255 & e.charCodeAt(d + 9)) << 8 | (255 & e.charCodeAt(d + 10)) << 16 | (255 & e.charCodeAt(d + 11)) << 24], a = this.x64Multiply(a, l), a = this.x64Rotl(a, 31), a = this.x64Multiply(a, c), i = this.x64Xor(i, a), i = this.x64Rotl(i, 27), i = this.x64Add(i, o), i = this.x64Add(this.x64Multiply(i, [0, 5]), [0, 1390208809]), s = this.x64Multiply(s, c), s = this.x64Rotl(s, 33), s = this.x64Multiply(s, l), o = this.x64Xor(o, s), o = this.x64Rotl(o, 31), o = this.x64Add(o, i), o = this.x64Add(this.x64Multiply(o, [0, 5]), [0, 944331445]);
            switch (a = [0, 0], s = [0, 0], n) {
                case 15:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(d + 14)], 48));
                case 14:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(d + 13)], 40));
                case 13:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(d + 12)], 32));
                case 12:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(d + 11)], 24));
                case 11:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(d + 10)], 16));
                case 10:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(d + 9)], 8));
                case 9:
                    s = this.x64Xor(s, [0, e.charCodeAt(d + 8)]), s = this.x64Multiply(s, c), s = this.x64Rotl(s, 33), s = this.x64Multiply(s, l), o = this.x64Xor(o, s);
                case 8:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 7)], 56));
                case 7:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 6)], 48));
                case 6:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 5)], 40));
                case 5:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 4)], 32));
                case 4:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 3)], 24));
                case 3:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 2)], 16));
                case 2:
                    a = this.x64Xor(a, this.x64LeftShift([0, e.charCodeAt(d + 1)], 8));
                case 1:
                    a = this.x64Xor(a, [0, e.charCodeAt(d)]), a = this.x64Multiply(a, l), a = this.x64Rotl(a, 31), a = this.x64Multiply(a, c), i = this.x64Xor(i, a)
            }
            return i = this.x64Xor(i, [0, e.length]), o = this.x64Xor(o, [0, e.length]), i = this.x64Add(i, o), o = this.x64Add(o, i), i = this.x64Fmix(i), o = this.x64Fmix(o), i = this.x64Add(i, o), o = this.x64Add(o, i), ("00000000" + (i[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (i[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (o[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (o[1] >>> 0).toString(16)).slice(-8)
        }
    }, e.VERSION = "1.1.1", e
}), function (e) {
    "function" == typeof define && define.amd ? define(e) : e()
}(function () {
    "use strict";

    function rt(e) {
        return (rt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
            return typeof e
        } : function (e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        })(e)
    }

    !function (e) {
        if ("object" !== rt(e.console)) {
            e.console = {};
            for (var t, n, r = e.console, i = function () {
            }, o = ["memory"], a = "assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(","); t = o.pop();) r[t] || (r[t] = {});
            for (; n = a.pop();) r[n] || (r[n] = i)
        }
        var s, l, c, d, u = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        void 0 === e.btoa && (e.btoa = function (e) {
            var t, n, r, i, o, a = 0, s = 0, l = "", c = [];
            if (!e) return e;
            for (; t = (o = e.charCodeAt(a++) << 16 | e.charCodeAt(a++) << 8 | e.charCodeAt(a++)) >> 18 & 63, n = o >> 12 & 63, r = o >> 6 & 63, i = 63 & o, c[s++] = u.charAt(t) + u.charAt(n) + u.charAt(r) + u.charAt(i), a < e.length;) ;
            l = c.join("");
            var d = e.length % 3;
            return (d ? l.slice(0, d - 3) : l) + "===".slice(d || 3)
        }), void 0 === e.atob && (e.atob = function (e) {
            var t, n, r, i, o, a, s = 0, l = 0, c = [];
            if (!e) return e;
            for (e += ""; t = (a = u.indexOf(e.charAt(s++)) << 18 | u.indexOf(e.charAt(s++)) << 12 | (i = u.indexOf(e.charAt(s++))) << 6 | (o = u.indexOf(e.charAt(s++)))) >> 16 & 255, n = a >> 8 & 255, r = 255 & a, c[l++] = 64 == i ? String.fromCharCode(t) : 64 == o ? String.fromCharCode(t, n) : String.fromCharCode(t, n, r), s < e.length;) ;
            return c.join("")
        }), Array.prototype.map || (Array.prototype.map = function (e) {
            if (null == this || "function" != typeof e) throw new TypeError;
            for (var t = Object(this), n = t.length >>> 0, r = new Array(n), i = 1 < arguments.length ? arguments[1] : void 0, o = 0; o < n; o++) o in t && (r[o] = e.call(i, t[o], o, t));
            return r
        }), Array.isArray || (Array.isArray = function (e) {
            return "[object Array]" === Object.prototype.toString.call(e)
        }), Array.prototype.forEach || (Array.prototype.forEach = function (e, t) {
            if (null == this || "function" != typeof e) throw new TypeError;
            for (var n = Object(this), r = n.length >>> 0, i = 0; i < r; i++) i in n && e.call(t, n[i], i, n)
        }), Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
            value: function (e) {
                if (null == this) throw new TypeError('"this" is null or not defined');
                var t = Object(this), n = t.length >>> 0;
                if ("function" != typeof e) throw new TypeError("predicate must be a function");
                for (var r = arguments[1], i = 0; i < n;) {
                    var o = t[i];
                    if (e.call(r, o, i, t)) return o;
                    i++
                }
            }, configurable: !0, writable: !0
        }), Object.keys || (Object.keys = (s = Object.prototype.hasOwnProperty, l = !{toString: null}.propertyIsEnumerable("toString"), d = (c = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"]).length, function (e) {
            if ("object" !== rt(e) && ("function" != typeof e || null === e)) throw new TypeError;
            var t, n, r = [];
            for (t in e) s.call(e, t) && r.push(t);
            if (l) for (n = 0; n < d; n++) s.call(e, c[n]) && r.push(c[n]);
            return r
        })), "function" != typeof Object.assign && (Object.assign = function (e) {
            if (null == e) throw new TypeError("Cannot convert undefined or null to object");
            e = Object(e);
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                if (null != n) for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
            }
            return e
        }), String.prototype.trim || (String.prototype.trim = function () {
            return this.replace(/^\s+|\s+$/g, "")
        }), String.prototype.trimLeft || (String.prototype.trimLeft = function () {
            return this.replace(/^\s+/g, "")
        }), String.prototype.trimRight || (String.prototype.trimRight = function () {
            return this.replace(/\s+$/g, "")
        }), Number.isInteger = Number.isInteger || function (e) {
            return "number" == typeof e && isFinite(e) && Math.floor(e) === e
        }
    }(void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")());
    var e, t, n, L, l, N, I, f, p, E, a, o, s, c, d, u, r, i, h, g, m, v, b, y, w, k, T, B, O, x, C, S, A, P, M, _, F,
        R, D, j, H, q, U, z, $, V, W, G, K, X, J, Y, Z, Q, ee, te, ne, re, ie, oe, ae, se, it,
        le = (it = void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")(), at.API = {events: []}, at.version = "1.5.3", "function" == typeof define && define.amd ? define("jsPDF", function () {
            return at
        }) : "undefined" != typeof module && module.exports ? (module.exports = at, module.exports.jsPDF = at) : it.jsPDF = at, at);

    function ot(o) {
        if ("object" !== rt(o)) throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");
        var a = {};
        this.subscribe = function (e, t, n) {
            if (n = n || !1, "string" != typeof e || "function" != typeof t || "boolean" != typeof n) throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");
            a.hasOwnProperty(e) || (a[e] = {});
            var r = Math.random().toString(35);
            return a[e][r] = [t, !!n], r
        }, this.unsubscribe = function (e) {
            for (var t in a) if (a[t][e]) return delete a[t][e], 0 === Object.keys(a[t]).length && delete a[t], !0;
            return !1
        }, this.publish = function (e) {
            if (a.hasOwnProperty(e)) {
                var t = Array.prototype.slice.call(arguments, 1), n = [];
                for (var r in a[e]) {
                    var i = a[e][r];
                    try {
                        i[0].apply(o, t)
                    } catch (e) {
                        it.console
                    }
                    i[1] && n.push(r)
                }
                n.length && n.forEach(this.unsubscribe)
            }
        }, this.getTopics = function () {
            return a
        }
    }

    function at(e, t, i, n) {
        var r = {}, o = [], a = 1;
        "object" === rt(e) && (e = (r = e).orientation, t = r.unit || t, i = r.format || i, n = r.compress || r.compressPdf || n, o = r.filters || (!0 === n ? ["FlateEncode"] : o), a = "number" == typeof r.userUnit ? Math.abs(r.userUnit) : 1), t = t || "mm", e = ("" + (e || "P")).toLowerCase();
        var s = r.putOnlyUsedFonts || !0, X = {}, l = {internal: {}, __private__: {}};
        l.__private__.PubSub = ot;
        var c = "1.3", d = l.__private__.getPdfVersion = function () {
            return c
        }, u = (l.__private__.setPdfVersion = function (e) {
            c = e
        }, {
            a0: [2383.94, 3370.39],
            a1: [1683.78, 2383.94],
            a2: [1190.55, 1683.78],
            a3: [841.89, 1190.55],
            a4: [595.28, 841.89],
            a5: [419.53, 595.28],
            a6: [297.64, 419.53],
            a7: [209.76, 297.64],
            a8: [147.4, 209.76],
            a9: [104.88, 147.4],
            a10: [73.7, 104.88],
            b0: [2834.65, 4008.19],
            b1: [2004.09, 2834.65],
            b2: [1417.32, 2004.09],
            b3: [1000.63, 1417.32],
            b4: [708.66, 1000.63],
            b5: [498.9, 708.66],
            b6: [354.33, 498.9],
            b7: [249.45, 354.33],
            b8: [175.75, 249.45],
            b9: [124.72, 175.75],
            b10: [87.87, 124.72],
            c0: [2599.37, 3676.54],
            c1: [1836.85, 2599.37],
            c2: [1298.27, 1836.85],
            c3: [918.43, 1298.27],
            c4: [649.13, 918.43],
            c5: [459.21, 649.13],
            c6: [323.15, 459.21],
            c7: [229.61, 323.15],
            c8: [161.57, 229.61],
            c9: [113.39, 161.57],
            c10: [79.37, 113.39],
            dl: [311.81, 623.62],
            letter: [612, 792],
            "government-letter": [576, 756],
            legal: [612, 1008],
            "junior-legal": [576, 360],
            ledger: [1224, 792],
            tabloid: [792, 1224],
            "credit-card": [153, 243]
        }), h = (l.__private__.getPageFormats = function () {
            return u
        }, l.__private__.getPageFormat = function (e) {
            return u[e]
        });
        "string" == typeof i && (i = h(i)), i = i || h("a4");
        var f, J = l.f2 = l.__private__.f2 = function (e) {
            if (isNaN(e)) throw new Error("Invalid argument passed to jsPDF.f2");
            return e.toFixed(2)
        }, Y = l.__private__.f3 = function (e) {
            if (isNaN(e)) throw new Error("Invalid argument passed to jsPDF.f3");
            return e.toFixed(3)
        }, p = "00000000000000000000000000000000", g = l.__private__.getFileId = function () {
            return p
        }, m = l.__private__.setFileId = function (e) {
            return e = e || "12345678901234567890123456789012".split("").map(function () {
                return "ABCDEF0123456789".charAt(Math.floor(16 * Math.random()))
            }).join(""), p = e
        };
        l.setFileId = function (e) {
            return m(e), this
        }, l.getFileId = function () {
            return g()
        };
        var v = l.__private__.convertDateToPDFDate = function (e) {
            var t = e.getTimezoneOffset(), n = t < 0 ? "+" : "-", r = Math.floor(Math.abs(t / 60)),
                i = Math.abs(t % 60), o = [n, P(r), "'", P(i), "'"].join("");
            return ["D:", e.getFullYear(), P(e.getMonth() + 1), P(e.getDate()), P(e.getHours()), P(e.getMinutes()), P(e.getSeconds()), o].join("")
        }, b = l.__private__.convertPDFDateToDate = function (e) {
            var t = parseInt(e.substr(2, 4), 10), n = parseInt(e.substr(6, 2), 10) - 1,
                r = parseInt(e.substr(8, 2), 10), i = parseInt(e.substr(10, 2), 10), o = parseInt(e.substr(12, 2), 10),
                a = parseInt(e.substr(14, 2), 10);
            return parseInt(e.substr(16, 2), 10), parseInt(e.substr(20, 2), 10), new Date(t, n, r, i, o, a, 0)
        }, y = l.__private__.setCreationDate = function (e) {
            var t;
            if (void 0 === e && (e = new Date), "object" === rt(e) && "[object Date]" === Object.prototype.toString.call(e)) t = v(e); else {
                if (!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|\-0[0-9]|\-1[0-1])\'(0[0-9]|[1-5][0-9])\'?$/.test(e)) throw new Error("Invalid argument passed to jsPDF.setCreationDate");
                t = e
            }
            return f = t
        }, w = l.__private__.getCreationDate = function (e) {
            var t = f;
            return "jsDate" === e && (t = b(f)), t
        };
        l.setCreationDate = function (e) {
            return y(e), this
        }, l.getCreationDate = function (e) {
            return w(e)
        };

        function k(e, t, n) {
            K.hasOwnProperty(t) || (K[t] = {}), K[t][n] = e
        }

        function x(e, t, n, r, i) {
            i = i || !1;
            var o = "F" + (Object.keys(ne).length + 1).toString(10),
                a = {id: o, postScriptName: e, fontName: t, fontStyle: n, encoding: r, isStandardFont: i, metadata: {}};
            return ae.publish("addFont", {font: a, instance: this}), ne[o] = a, k(o, t, n), o
        }

        function C() {
            ke.apply(this, arguments), je(De), Q(Ge), 0 !== Qe && Q(Qe + " J"), 0 !== tt && Q(tt + " j"), ae.publish("addPage", {pageNumber: re})
        }

        function S(e, t, n) {
            var r, i = void 0;
            return n = n || {}, e = void 0 !== e ? e : ne[Z].fontName, t = void 0 !== t ? t : ne[Z].fontStyle, r = e.toLowerCase(), void 0 !== K[r] && void 0 !== K[r][t] ? i = K[r][t] : void 0 !== K[e] && void 0 !== K[e][t] ? i = K[e][t] : n.disableWarning, i || n.noFallback || null == (i = K.times[t]) && (i = K.times.normal), i
        }

        function A(e) {
            return !0 === Array.isArray(se) && -1 < se.indexOf(e)
        }

        var L, N, I, E, T, Z, B, O, P = l.__private__.padd2 = function (e) {
                return ("0" + parseInt(e)).slice(-2)
            }, M = !1, _ = [], F = [], R = 0, Q = (l.__private__.setCustomOutputDestination = function (e) {
                N = e
            }, l.__private__.resetCustomOutputDestination = function (e) {
                N = void 0
            }, l.__private__.out = function (e) {
                var t;
                return e = "string" == typeof e ? e : e.toString(), (t = void 0 === N ? M ? _[L] : F : N).push(e), M || (R += e.length + 1), t
            }), D = l.__private__.write = function (e) {
                return Q(1 === arguments.length ? e.toString() : Array.prototype.join.call(arguments, " "))
            }, j = l.__private__.getArrayBuffer = function (e) {
                for (var t = e.length, n = new ArrayBuffer(t), r = new Uint8Array(n); t--;) r[t] = e.charCodeAt(t);
                return n
            },
            H = [["Helvetica", "helvetica", "normal", "WinAnsiEncoding"], ["Helvetica-Bold", "helvetica", "bold", "WinAnsiEncoding"], ["Helvetica-Oblique", "helvetica", "italic", "WinAnsiEncoding"], ["Helvetica-BoldOblique", "helvetica", "bolditalic", "WinAnsiEncoding"], ["Courier", "courier", "normal", "WinAnsiEncoding"], ["Courier-Bold", "courier", "bold", "WinAnsiEncoding"], ["Courier-Oblique", "courier", "italic", "WinAnsiEncoding"], ["Courier-BoldOblique", "courier", "bolditalic", "WinAnsiEncoding"], ["Times-Roman", "times", "normal", "WinAnsiEncoding"], ["Times-Bold", "times", "bold", "WinAnsiEncoding"], ["Times-Italic", "times", "italic", "WinAnsiEncoding"], ["Times-BoldItalic", "times", "bolditalic", "WinAnsiEncoding"], ["ZapfDingbats", "zapfdingbats", "normal", null], ["Symbol", "symbol", "normal", null]],
            ee = (l.__private__.getStandardFonts = function (e) {
                return H
            }, r.fontSize || 16), q = (l.__private__.setFontSize = l.setFontSize = function (e) {
                return ee = e, this
            }, l.__private__.getFontSize = l.getFontSize = function () {
                return ee
            }), te = r.R2L || !1, U = (l.__private__.setR2L = l.setR2L = function (e) {
                return te = e, this
            }, l.__private__.getR2L = l.getR2L = function (e) {
                return te
            }, l.__private__.setZoomMode = function (e) {
                if (/^\d*\.?\d*\%$/.test(e)) I = e; else if (isNaN(e)) {
                    if (-1 === [void 0, null, "fullwidth", "fullheight", "fullpage", "original"].indexOf(e)) throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "' + e + '" is not recognized.');
                    I = e
                } else I = parseInt(e, 10)
            }), z = (l.__private__.getZoomMode = function () {
                return I
            }, l.__private__.setPageMode = function (e) {
                if (-1 == [void 0, null, "UseNone", "UseOutlines", "UseThumbs", "FullScreen"].indexOf(e)) throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "' + e + '" is not recognized.');
                E = e
            }), $ = (l.__private__.getPageMode = function () {
                return E
            }, l.__private__.setLayoutMode = function (e) {
                if (-1 == [void 0, null, "continuous", "single", "twoleft", "tworight", "two"].indexOf(e)) throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "' + e + '" is not recognized.');
                T = e
            }), V = (l.__private__.getLayoutMode = function () {
                return T
            }, l.__private__.setDisplayMode = l.setDisplayMode = function (e, t, n) {
                return U(e), $(t), z(n), this
            }, {title: "", subject: "", author: "", keywords: "", creator: ""}),
            W = (l.__private__.getDocumentProperty = function (e) {
                if (-1 === Object.keys(V).indexOf(e)) throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");
                return V[e]
            }, l.__private__.getDocumentProperties = function (e) {
                return V
            }, l.__private__.setDocumentProperties = l.setProperties = l.setDocumentProperties = function (e) {
                for (var t in V) V.hasOwnProperty(t) && e[t] && (V[t] = e[t]);
                return this
            }, l.__private__.setDocumentProperty = function (e, t) {
                if (-1 === Object.keys(V).indexOf(e)) throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");
                return V[e] = t
            }, 0), G = [], ne = {}, K = {}, re = 0, ie = [], oe = [], ae = new ot(l), se = r.hotfixes || [],
            le = l.__private__.newObject = function () {
                var e = ce();
                return de(e, !0), e
            }, ce = l.__private__.newObjectDeferred = function () {
                return G[++W] = function () {
                    return R
                }, W
            }, de = function (e, t) {
                return t = "boolean" == typeof t && t, G[e] = R, t && Q(e + " 0 obj"), e
            }, ue = l.__private__.newAdditionalObject = function () {
                var e = {objId: ce(), content: ""};
                return oe.push(e), e
            }, he = ce(), fe = ce(), pe = l.__private__.decodeColorString = function (e) {
                var t = e.split(" ");
                if (2 === t.length && ("g" === t[1] || "G" === t[1])) {
                    var n = parseFloat(t[0]);
                    t = [n, n, n, "r"]
                }
                for (var r = "#", i = 0; i < 3; i++) r += ("0" + Math.floor(255 * parseFloat(t[i])).toString(16)).slice(-2);
                return r
            }, ge = l.__private__.encodeColorString = function (e) {
                var t;
                "string" == typeof e && (e = {ch1: e});
                var n = e.ch1, r = e.ch2, i = e.ch3, o = e.ch4,
                    a = (e.precision, "draw" === e.pdfColorType ? ["G", "RG", "K"] : ["g", "rg", "k"]);
                if ("string" == typeof n && "#" !== n.charAt(0)) {
                    var s = new RGBColor(n);
                    if (s.ok) n = s.toHex(); else if (!/^\d*\.?\d*$/.test(n)) throw new Error('Invalid color "' + n + '" passed to jsPDF.encodeColorString.')
                }
                if ("string" == typeof n && /^#[0-9A-Fa-f]{3}$/.test(n) && (n = "#" + n[1] + n[1] + n[2] + n[2] + n[3] + n[3]), "string" == typeof n && /^#[0-9A-Fa-f]{6}$/.test(n)) {
                    var l = parseInt(n.substr(1), 16);
                    n = l >> 16 & 255, r = l >> 8 & 255, i = 255 & l
                }
                if (void 0 === r || void 0 === o && n === r && r === i) if ("string" == typeof n) t = n + " " + a[0]; else switch (e.precision) {
                    case 2:
                        t = J(n / 255) + " " + a[0];
                        break;
                    case 3:
                    default:
                        t = Y(n / 255) + " " + a[0]
                } else if (void 0 === o || "object" === rt(o)) {
                    if (o && !isNaN(o.a) && 0 === o.a) return ["1.000", "1.000", "1.000", a[1]].join(" ");
                    if ("string" == typeof n) t = [n, r, i, a[1]].join(" "); else switch (e.precision) {
                        case 2:
                            t = [J(n / 255), J(r / 255), J(i / 255), a[1]].join(" ");
                            break;
                        default:
                        case 3:
                            t = [Y(n / 255), Y(r / 255), Y(i / 255), a[1]].join(" ")
                    }
                } else if ("string" == typeof n) t = [n, r, i, o, a[2]].join(" "); else switch (e.precision) {
                    case 2:
                        t = [J(n / 255), J(r / 255), J(i / 255), J(o / 255), a[2]].join(" ");
                        break;
                    case 3:
                    default:
                        t = [Y(n / 255), Y(r / 255), Y(i / 255), Y(o / 255), a[2]].join(" ")
                }
                return t
            }, me = l.__private__.getFilters = function () {
                return o
            }, ve = l.__private__.putStream = function (e) {
                var t, n = (e = e || {}).data || "", r = e.filters || me(), i = e.alreadyAppliedFilters || [],
                    o = e.addLength1 || !1, a = n.length;
                !0 === r && (r = ["FlateEncode"]);
                var s = e.additionalKeyValues || [],
                    l = (t = void 0 !== at.API.processDataByFilters ? at.API.processDataByFilters(n, r) : {
                        data: n,
                        reverseChain: []
                    }).reverseChain + (Array.isArray(i) ? i.join(" ") : i.toString());
                0 !== t.data.length && (s.push({key: "Length", value: t.data.length}), !0 === o && s.push({
                    key: "Length1",
                    value: a
                })), 0 != l.length && (l.split("/").length - 1 == 1 ? s.push({
                    key: "Filter",
                    value: l
                }) : s.push({key: "Filter", value: "[" + l + "]"})), Q("<<");
                for (var c = 0; c < s.length; c++) Q("/" + s[c].key + " " + s[c].value);
                Q(">>"), 0 !== t.data.length && (Q("stream"), Q(t.data), Q("endstream"))
            }, be = l.__private__.putPage = function (e) {
                e.mediaBox;
                var t = e.number, n = e.data, r = e.objId, i = e.contentsObjId;
                de(r, !0), ie[L].mediaBox.topRightX, ie[L].mediaBox.bottomLeftX, ie[L].mediaBox.topRightY, ie[L].mediaBox.bottomLeftY, Q("<</Type /Page"), Q("/Parent " + e.rootDictionaryObjId + " 0 R"), Q("/Resources " + e.resourceDictionaryObjId + " 0 R"), Q("/MediaBox [" + parseFloat(J(e.mediaBox.bottomLeftX)) + " " + parseFloat(J(e.mediaBox.bottomLeftY)) + " " + J(e.mediaBox.topRightX) + " " + J(e.mediaBox.topRightY) + "]"), null !== e.cropBox && Q("/CropBox [" + J(e.cropBox.bottomLeftX) + " " + J(e.cropBox.bottomLeftY) + " " + J(e.cropBox.topRightX) + " " + J(e.cropBox.topRightY) + "]"), null !== e.bleedBox && Q("/BleedBox [" + J(e.bleedBox.bottomLeftX) + " " + J(e.bleedBox.bottomLeftY) + " " + J(e.bleedBox.topRightX) + " " + J(e.bleedBox.topRightY) + "]"), null !== e.trimBox && Q("/TrimBox [" + J(e.trimBox.bottomLeftX) + " " + J(e.trimBox.bottomLeftY) + " " + J(e.trimBox.topRightX) + " " + J(e.trimBox.topRightY) + "]"), null !== e.artBox && Q("/ArtBox [" + J(e.artBox.bottomLeftX) + " " + J(e.artBox.bottomLeftY) + " " + J(e.artBox.topRightX) + " " + J(e.artBox.topRightY) + "]"), "number" == typeof e.userUnit && 1 !== e.userUnit && Q("/UserUnit " + e.userUnit), ae.publish("putPage", {
                    objId: r,
                    pageContext: ie[t],
                    pageNumber: t,
                    page: n
                }), Q("/Contents " + i + " 0 R"), Q(">>"), Q("endobj");
                var o = n.join("\n");
                return de(i, !0), ve({data: o, filters: me()}), Q("endobj"), r
            }, ye = l.__private__.putPages = function () {
                var e, t, n = [];
                for (e = 1; e <= re; e++) ie[e].objId = ce(), ie[e].contentsObjId = ce();
                for (e = 1; e <= re; e++) n.push(be({
                    number: e,
                    data: _[e],
                    objId: ie[e].objId,
                    contentsObjId: ie[e].contentsObjId,
                    mediaBox: ie[e].mediaBox,
                    cropBox: ie[e].cropBox,
                    bleedBox: ie[e].bleedBox,
                    trimBox: ie[e].trimBox,
                    artBox: ie[e].artBox,
                    userUnit: ie[e].userUnit,
                    rootDictionaryObjId: he,
                    resourceDictionaryObjId: fe
                }));
                de(he, !0), Q("<</Type /Pages");
                var r = "/Kids [";
                for (t = 0; t < re; t++) r += n[t] + " 0 R ";
                Q(r + "]"), Q("/Count " + re), Q(">>"), Q("endobj"), ae.publish("postPutPages")
            }, we = l.__private__.pdfEscape = l.pdfEscape = function (e, t) {
                return function (e, t) {
                    var n, r, i, o, a, s, l, c, d;
                    if (i = (t = t || {}).sourceEncoding || "Unicode", a = t.outputEncoding, (t.autoencode || a) && ne[Z].metadata && ne[Z].metadata[i] && ne[Z].metadata[i].encoding && (o = ne[Z].metadata[i].encoding, !a && ne[Z].encoding && (a = ne[Z].encoding), !a && o.codePages && (a = o.codePages[0]), "string" == typeof a && (a = o[a]), a)) {
                        for (l = !1, s = [], n = 0, r = e.length; n < r; n++) (c = a[e.charCodeAt(n)]) ? s.push(String.fromCharCode(c)) : s.push(e[n]), s[n].charCodeAt(0) >> 8 && (l = !0);
                        e = s.join("")
                    }
                    for (n = e.length; void 0 === l && 0 !== n;) e.charCodeAt(n - 1) >> 8 && (l = !0), n--;
                    if (!l) return e;
                    for (s = t.noBOM ? [] : [254, 255], n = 0, r = e.length; n < r; n++) {
                        if ((d = (c = e.charCodeAt(n)) >> 8) >> 8) throw new Error("Character at position " + n + " of string '" + e + "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
                        s.push(d), s.push(c - (d << 8))
                    }
                    return String.fromCharCode.apply(void 0, s)
                }(e, t).replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)")
            }, ke = l.__private__.beginPage = function (e, t) {
                var n, r = "string" == typeof t && t.toLowerCase();
                if ("string" == typeof e && (n = h(e.toLowerCase())) && (e = n[0], t = n[1]), Array.isArray(e) && (t = e[1], e = e[0]), (isNaN(e) || isNaN(t)) && (e = i[0], t = i[1]), r) {
                    switch (r.substr(0, 1)) {
                        case"l":
                            e < t && (r = "s");
                            break;
                        case"p":
                            t < e && (r = "s")
                    }
                    "s" === r && (n = e, e = t, t = n)
                }
                (14400 < e || 14400 < t) && (e = Math.min(14400, e), t = Math.min(14400, t)), i = [e, t], M = !0, _[++re] = [], ie[re] = {
                    objId: 0,
                    contentsObjId: 0,
                    userUnit: Number(a),
                    artBox: null,
                    bleedBox: null,
                    cropBox: null,
                    trimBox: null,
                    mediaBox: {bottomLeftX: 0, bottomLeftY: 0, topRightX: Number(e), topRightY: Number(t)}
                }, xe(re)
            }, xe = function (e) {
                0 < e && e <= re && (L = e)
            }, Ce = l.__private__.getNumberOfPages = l.getNumberOfPages = function () {
                return _.length - 1
            }, Se = l.__private__.putInfo = function () {
                for (var e in le(), Q("<<"), Q("/Producer (jsPDF " + at.version + ")"), V) V.hasOwnProperty(e) && V[e] && Q("/" + e.substr(0, 1).toUpperCase() + e.substr(1) + " (" + we(V[e]) + ")");
                Q("/CreationDate (" + f + ")"), Q(">>"), Q("endobj")
            }, Ae = l.__private__.putCatalog = function (e) {
                var t = (e = e || {}).rootDictionaryObjId || he;
                switch (le(), Q("<<"), Q("/Type /Catalog"), Q("/Pages " + t + " 0 R"), I = I || "fullwidth") {
                    case"fullwidth":
                        Q("/OpenAction [3 0 R /FitH null]");
                        break;
                    case"fullheight":
                        Q("/OpenAction [3 0 R /FitV null]");
                        break;
                    case"fullpage":
                        Q("/OpenAction [3 0 R /Fit]");
                        break;
                    case"original":
                        Q("/OpenAction [3 0 R /XYZ null null 1]");
                        break;
                    default:
                        var n = "" + I;
                        "%" === n.substr(n.length - 1) && (I = parseInt(I) / 100), "number" == typeof I && Q("/OpenAction [3 0 R /XYZ null null " + J(I) + "]")
                }
                switch (T = T || "continuous") {
                    case"continuous":
                        Q("/PageLayout /OneColumn");
                        break;
                    case"single":
                        Q("/PageLayout /SinglePage");
                        break;
                    case"two":
                    case"twoleft":
                        Q("/PageLayout /TwoColumnLeft");
                        break;
                    case"tworight":
                        Q("/PageLayout /TwoColumnRight")
                }
                E && Q("/PageMode /" + E), ae.publish("putCatalog"), Q(">>"), Q("endobj")
            }, Le = l.__private__.putTrailer = function () {
                Q("trailer"), Q("<<"), Q("/Size " + (W + 1)), Q("/Root " + W + " 0 R"), Q("/Info " + (W - 1) + " 0 R"), Q("/ID [ <" + p + "> <" + p + "> ]"), Q(">>")
            }, Ne = l.__private__.putHeader = function () {
                Q("%PDF-" + c), Q("%ºß¬à")
            }, Ie = l.__private__.putXRef = function () {
                var e = 1, t = "0000000000";
                for (Q("xref"), Q("0 " + (W + 1)), Q("0000000000 65535 f "), e = 1; e <= W; e++) "function" == typeof G[e] ? Q((t + G[e]()).slice(-10) + " 00000 n ") : void 0 !== G[e] ? Q((t + G[e]).slice(-10) + " 00000 n ") : Q("0000000000 00000 n ")
            }, Ee = l.__private__.buildDocument = function () {
                M = !1, R = W = 0, F = [], G = [], oe = [], he = ce(), fe = ce(), ae.publish("buildDocument"), Ne(), ye(), function () {
                    ae.publish("putAdditionalObjects");
                    for (var e = 0; e < oe.length; e++) {
                        var t = oe[e];
                        de(t.objId, !0), Q(t.content), Q("endobj")
                    }
                    ae.publish("postPutAdditionalObjects")
                }(), function () {
                    for (var e in ne) ne.hasOwnProperty(e) && (!1 === s || !0 === s && X.hasOwnProperty(e)) && (t = ne[e], ae.publish("putFont", {
                        font: t,
                        out: Q,
                        newObject: le,
                        putStream: ve
                    }), !0 !== t.isAlreadyPutted && (t.objectNumber = le(), Q("<<"), Q("/Type /Font"), Q("/BaseFont /" + t.postScriptName), Q("/Subtype /Type1"), "string" == typeof t.encoding && Q("/Encoding /" + t.encoding), Q("/FirstChar 32"), Q("/LastChar 255"), Q(">>"), Q("endobj")));
                    var t
                }(), ae.publish("putResources"), de(fe, !0), Q("<<"), function () {
                    for (var e in Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"), Q("/Font <<"), ne) ne.hasOwnProperty(e) && (!1 === s || !0 === s && X.hasOwnProperty(e)) && Q("/" + e + " " + ne[e].objectNumber + " 0 R");
                    Q(">>"), Q("/XObject <<"), ae.publish("putXobjectDict"), Q(">>")
                }(), Q(">>"), Q("endobj"), ae.publish("postPutResources"), Se(), Ae();
                var e = R;
                return Ie(), Le(), Q("startxref"), Q("" + e), Q("%%EOF"), M = !0, F.join("\n")
            }, Te = l.__private__.getBlob = function (e) {
                return new Blob([j(e)], {type: "application/pdf"})
            }, Be = l.output = l.__private__.output = ((O = function (e, t) {
                t = t || {};
                var n = Ee();
                switch ("string" == typeof t ? t = {filename: t} : t.filename = t.filename || "generated.pdf", e) {
                    case void 0:
                        return n;
                    case"save":
                        l.save(t.filename);
                        break;
                    case"arraybuffer":
                        return j(n);
                    case"blob":
                        return Te(n);
                    case"bloburi":
                    case"bloburl":
                        if (void 0 !== it.URL && "function" == typeof it.URL.createObjectURL) return it.URL && it.URL.createObjectURL(Te(n)) || void 0;
                        break;
                    case"datauristring":
                    case"dataurlstring":
                        return "data:application/pdf;filename=" + t.filename + ";base64," + btoa(n);
                    case"dataurlnewwindow":
                        var r = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="' + this.output("datauristring") + '"></iframe></body></html>',
                            i = it.open();
                        if (null !== i && i.document.write(r), i || "undefined" == typeof safari) return i;
                    case"datauri":
                    case"dataurl":
                        return it.document.location.href = "data:application/pdf;filename=" + t.filename + ";base64," + btoa(n);
                    default:
                        return null
                }
            }).foo = function () {
                try {
                    return O.apply(this, arguments)
                } catch (e) {
                    var t = e.stack || "";
                    ~t.indexOf(" at ") && (t = t.split(" at ")[1]);
                    var n = "Error in function " + t.split("\n")[0].split("<")[0] + ": " + e.message;
                    if (!it.console) throw new Error(n);
                    it.console.error(n, e), it.alert
                }
            }, (O.foo.bar = O).foo);
        switch (t) {
            case"pt":
                B = 1;
                break;
            case"mm":
                B = 72 / 25.4;
                break;
            case"cm":
                B = 72 / 2.54;
                break;
            case"in":
                B = 72;
                break;
            case"px":
                B = 1 == A("px_scaling") ? .75 : 96 / 72;
                break;
            case"pc":
            case"em":
                B = 12;
                break;
            case"ex":
                B = 6;
                break;
            default:
                throw new Error("Invalid unit: " + t)
        }
        y(), m();
        var Oe = l.__private__.getPageInfo = function (e) {
            if (isNaN(e) || e % 1 != 0) throw new Error("Invalid argument passed to jsPDF.getPageInfo");
            return {objId: ie[e].objId, pageNumber: e, pageContext: ie[e]}
        }, Pe = l.__private__.getPageInfoByObjId = function (e) {
            for (var t in ie) if (ie[t].objId === e) break;
            if (isNaN(e) || e % 1 != 0) throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");
            return Oe(t)
        }, Me = l.__private__.getCurrentPageInfo = function () {
            return {objId: ie[L].objId, pageNumber: L, pageContext: ie[L]}
        };
        l.addPage = function () {
            return C.apply(this, arguments), this
        }, l.setPage = function () {
            return xe.apply(this, arguments), this
        }, l.insertPage = function (e) {
            return this.addPage(), this.movePage(L, e), this
        }, l.movePage = function (e, t) {
            if (t < e) {
                for (var n = _[e], r = ie[e], i = e; t < i; i--) _[i] = _[i - 1], ie[i] = ie[i - 1];
                _[t] = n, ie[t] = r, this.setPage(t)
            } else if (e < t) {
                for (n = _[e], r = ie[e], i = e; i < t; i++) _[i] = _[i + 1], ie[i] = ie[i + 1];
                _[t] = n, ie[t] = r, this.setPage(t)
            }
            return this
        }, l.deletePage = function () {
            return function (e) {
                0 < e && e <= re && (_.splice(e, 1), --re < L && (L = re), this.setPage(L))
            }.apply(this, arguments), this
        }, l.__private__.text = l.text = function (e, t, n, i) {
            var r;
            "number" != typeof e || "number" != typeof t || "string" != typeof n && !Array.isArray(n) || (r = n, n = t, t = e, e = r);
            var o = arguments[3], a = arguments[4], s = arguments[5];
            if ("object" === rt(o) && null !== o || ("string" == typeof a && (s = a, a = null), "string" == typeof o && (s = o, o = null), "number" == typeof o && (a = o, o = null), i = {
                flags: o,
                angle: a,
                align: s
            }), (o = o || {}).noBOM = o.noBOM || !0, o.autoencode = o.autoencode || !0, isNaN(t) || isNaN(n) || null == e) throw new Error("Invalid arguments passed to jsPDF.text");
            if (0 === e.length) return u;
            var l, c = "", d = "number" == typeof i.lineHeightFactor ? i.lineHeightFactor : Re, u = i.scope || this;

            function h(e) {
                for (var t, n = e.concat(), r = [], i = n.length; i--;) "string" == typeof (t = n.shift()) ? r.push(t) : Array.isArray(e) && 1 === t.length ? r.push(t[0]) : r.push([t[0], t[1], t[2]]);
                return r
            }

            function f(e, t) {
                var n;
                if ("string" == typeof e) n = t(e)[0]; else if (Array.isArray(e)) {
                    for (var r, i, o = e.concat(), a = [], s = o.length; s--;) "string" == typeof (r = o.shift()) ? a.push(t(r)[0]) : Array.isArray(r) && "string" === r[0] && (i = t(r[0], r[1], r[2]), a.push([i[0], i[1], i[2]]));
                    n = a
                }
                return n
            }

            var p = !1, g = !0;
            if ("string" == typeof e) p = !0; else if (Array.isArray(e)) {
                for (var m, v = e.concat(), b = [], y = v.length; y--;) ("string" != typeof (m = v.shift()) || Array.isArray(m) && "string" != typeof m[0]) && (g = !1);
                p = g
            }
            if (!1 === p) throw new Error('Type of text must be string or Array. "' + e + '" is not recognized.');
            var w = ne[Z].encoding;
            "WinAnsiEncoding" !== w && "StandardEncoding" !== w || (e = f(e, function (e, t, n) {
                return [(r = e, r = r.split("\t").join(Array(i.TabLen || 9).join(" ")), we(r, o)), t, n];
                var r
            })), "string" == typeof e && (e = e.match(/[\r?\n]/) ? e.split(/\r\n|\r|\n/g) : [e]);
            var k = ee / u.internal.scaleFactor, x = k * (Re - 1);
            switch (i.baseline) {
                case"bottom":
                    n -= x;
                    break;
                case"top":
                    n += k - x;
                    break;
                case"hanging":
                    n += k - 2 * x;
                    break;
                case"middle":
                    n += k / 2 - x
            }
            0 < (F = i.maxWidth || 0) && ("string" == typeof e ? e = u.splitTextToSize(e, F) : "[object Array]" === Object.prototype.toString.call(e) && (e = u.splitTextToSize(e.join(" "), F)));
            var C = {
                text: e,
                x: t,
                y: n,
                options: i,
                mutex: {pdfEscape: we, activeFontKey: Z, fonts: ne, activeFontSize: ee}
            };
            ae.publish("preProcessText", C), e = C.text, a = (i = C.options).angle;
            var S = u.internal.scaleFactor, A = [];
            if (a) {
                a *= Math.PI / 180;
                var L = Math.cos(a), N = Math.sin(a);
                A = [J(L), J(N), J(-1 * N), J(L)]
            }
            void 0 !== (_ = i.charSpace) && (c += Y(_ * S) + " Tc\n"), i.lang;
            var I = -1, E = void 0 !== i.renderingMode ? i.renderingMode : i.stroke,
                T = u.internal.getCurrentPageInfo().pageContext;
            switch (E) {
                case 0:
                case!1:
                case"fill":
                    I = 0;
                    break;
                case 1:
                case!0:
                case"stroke":
                    I = 1;
                    break;
                case 2:
                case"fillThenStroke":
                    I = 2;
                    break;
                case 3:
                case"invisible":
                    I = 3;
                    break;
                case 4:
                case"fillAndAddForClipping":
                    I = 4;
                    break;
                case 5:
                case"strokeAndAddPathForClipping":
                    I = 5;
                    break;
                case 6:
                case"fillThenStrokeAndAddToPathForClipping":
                    I = 6;
                    break;
                case 7:
                case"addToPathForClipping":
                    I = 7
            }
            var B = void 0 !== T.usedRenderingMode ? T.usedRenderingMode : -1;
            -1 !== I ? c += I + " Tr\n" : -1 !== B && (c += "0 Tr\n"), -1 !== I && (T.usedRenderingMode = I), s = i.align || "left";
            var O = ee * d, P = u.internal.pageSize.getWidth(), M = (S = u.internal.scaleFactor, ne[Z]),
                _ = i.charSpace || Ye, F = i.maxWidth || 0, R = (o = {}, []);
            if ("[object Array]" === Object.prototype.toString.call(e)) {
                var D, j;
                b = h(e), "left" !== s && (j = b.map(function (e) {
                    return u.getStringUnitWidth(e, {font: M, charSpace: _, fontSize: ee}) * ee / S
                }));
                Math.max.apply(Math, j);
                var H, q = 0;
                if ("right" === s) {
                    t -= j[0], e = [];
                    var U = 0;
                    for (y = b.length; U < y; U++) j[U], D = 0 === U ? (H = ze(t), $e(n)) : (H = (q - j[U]) * S, -O), e.push([b[U], H, D]), q = j[U]
                } else if ("center" === s) for (t -= j[0] / 2, e = [], U = 0, y = b.length; U < y; U++) j[U], D = 0 === U ? (H = ze(t), $e(n)) : (H = (q - j[U]) / 2 * S, -O), e.push([b[U], H, D]), q = j[U]; else if ("left" === s) for (e = [], U = 0, y = b.length; U < y; U++) D = 0 === U ? $e(n) : -O, H = 0 === U ? ze(t) : 0, e.push(b[U]); else {
                    if ("justify" !== s) throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');
                    for (e = [], F = 0 !== F ? F : P, U = 0, y = b.length; U < y; U++) D = 0 === U ? $e(n) : -O, H = 0 === U ? ze(t) : 0, U < y - 1 && R.push(((F - j[U]) / (b[U].split(" ").length - 1) * S).toFixed(2)), e.push([b[U], H, D])
                }
            }
            !0 === ("boolean" == typeof i.R2L ? i.R2L : te) && (e = f(e, function (e, t, n) {
                return [e.split("").reverse().join(""), t, n]
            })), C = {
                text: e,
                x: t,
                y: n,
                options: i,
                mutex: {pdfEscape: we, activeFontKey: Z, fonts: ne, activeFontSize: ee}
            }, ae.publish("postProcessText", C), e = C.text, l = C.mutex.isHex, b = h(e), e = [];
            var z, $, V, W = 0, G = (y = b.length, "");
            for (U = 0; U < y; U++) G = "", Array.isArray(b[U]) ? (z = parseFloat(b[U][1]), $ = parseFloat(b[U][2]), V = (l ? "<" : "(") + b[U][0] + (l ? ">" : ")"), W = 1) : (z = ze(t), $ = $e(n), V = (l ? "<" : "(") + b[U] + (l ? ">" : ")")), void 0 !== R && void 0 !== R[U] && (G = R[U] + " Tw\n"), 0 !== A.length && 0 === U ? e.push(G + A.join(" ") + " " + z.toFixed(2) + " " + $.toFixed(2) + " Tm\n" + V) : 1 === W || 0 === W && 0 === U ? e.push(G + z.toFixed(2) + " " + $.toFixed(2) + " Td\n" + V) : e.push(G + V);
            e = 0 === W ? e.join(" Tj\nT* ") : e.join(" Tj\n"), e += " Tj\n";
            var K = "BT\n/" + Z + " " + ee + " Tf\n" + (ee * d).toFixed(2) + " TL\n" + Xe + "\n";
            return K += c, K += e, Q(K += "ET"), X[Z] = !0, u
        }, l.__private__.lstext = l.lstext = function (e, t, n, r) {
            return this.text(e, t, n, {charSpace: r})
        }, l.__private__.clip = l.clip = function (e) {
            Q("evenodd" === e ? "W*" : "W"), Q("n")
        }, l.__private__.clip_fixed = l.clip_fixed = function (e) {
            l.clip(e)
        };
        var _e = l.__private__.isValidStyle = function (e) {
            var t = !1;
            return -1 !== [void 0, null, "S", "F", "DF", "FD", "f", "f*", "B", "B*"].indexOf(e) && (t = !0), t
        }, Fe = l.__private__.getStyle = function (e) {
            var t = "S";
            return "F" === e ? t = "f" : "FD" === e || "DF" === e ? t = "B" : "f" !== e && "f*" !== e && "B" !== e && "B*" !== e || (t = e), t
        };
        l.__private__.line = l.line = function (e, t, n, r) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r)) throw new Error("Invalid arguments passed to jsPDF.line");
            return this.lines([[n - e, r - t]], e, t)
        }, l.__private__.lines = l.lines = function (e, t, n, r, i, o) {
            var a, s, l, c, d, u, h, f, p, g, m, v;
            if ("number" == typeof e && (v = n, n = t, t = e, e = v), r = r || [1, 1], o = o || !1, isNaN(t) || isNaN(n) || !Array.isArray(e) || !Array.isArray(r) || !_e(i) || "boolean" != typeof o) throw new Error("Invalid arguments passed to jsPDF.lines");
            for (Q(Y(ze(t)) + " " + Y($e(n)) + " m "), a = r[0], s = r[1], c = e.length, g = t, m = n, l = 0; l < c; l++) 2 === (d = e[l]).length ? (g = d[0] * a + g, m = d[1] * s + m, Q(Y(ze(g)) + " " + Y($e(m)) + " l")) : (u = d[0] * a + g, h = d[1] * s + m, f = d[2] * a + g, p = d[3] * s + m, g = d[4] * a + g, m = d[5] * s + m, Q(Y(ze(u)) + " " + Y($e(h)) + " " + Y(ze(f)) + " " + Y($e(p)) + " " + Y(ze(g)) + " " + Y($e(m)) + " c"));
            return o && Q(" h"), null !== i && Q(Fe(i)), this
        }, l.__private__.rect = l.rect = function (e, t, n, r, i) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r) || !_e(i)) throw new Error("Invalid arguments passed to jsPDF.rect");
            return Q([J(ze(e)), J($e(t)), J(n * B), J(-r * B), "re"].join(" ")), null !== i && Q(Fe(i)), this
        }, l.__private__.triangle = l.triangle = function (e, t, n, r, i, o, a) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r) || isNaN(i) || isNaN(o) || !_e(a)) throw new Error("Invalid arguments passed to jsPDF.triangle");
            return this.lines([[n - e, r - t], [i - n, o - r], [e - i, t - o]], e, t, [1, 1], a, !0), this
        }, l.__private__.roundedRect = l.roundedRect = function (e, t, n, r, i, o, a) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r) || isNaN(i) || isNaN(o) || !_e(a)) throw new Error("Invalid arguments passed to jsPDF.roundedRect");
            var s = 4 / 3 * (Math.SQRT2 - 1);
            return this.lines([[n - 2 * i, 0], [i * s, 0, i, o - o * s, i, o], [0, r - 2 * o], [0, o * s, -i * s, o, -i, o], [2 * i - n, 0], [-i * s, 0, -i, -o * s, -i, -o], [0, 2 * o - r], [0, -o * s, i * s, -o, i, -o]], e + i, t, [1, 1], a), this
        }, l.__private__.ellipse = l.ellipse = function (e, t, n, r, i) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r) || !_e(i)) throw new Error("Invalid arguments passed to jsPDF.ellipse");
            var o = 4 / 3 * (Math.SQRT2 - 1) * n, a = 4 / 3 * (Math.SQRT2 - 1) * r;
            return Q([J(ze(e + n)), J($e(t)), "m", J(ze(e + n)), J($e(t - a)), J(ze(e + o)), J($e(t - r)), J(ze(e)), J($e(t - r)), "c"].join(" ")), Q([J(ze(e - o)), J($e(t - r)), J(ze(e - n)), J($e(t - a)), J(ze(e - n)), J($e(t)), "c"].join(" ")), Q([J(ze(e - n)), J($e(t + a)), J(ze(e - o)), J($e(t + r)), J(ze(e)), J($e(t + r)), "c"].join(" ")), Q([J(ze(e + o)), J($e(t + r)), J(ze(e + n)), J($e(t + a)), J(ze(e + n)), J($e(t)), "c"].join(" ")), null !== i && Q(Fe(i)), this
        }, l.__private__.circle = l.circle = function (e, t, n, r) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || !_e(r)) throw new Error("Invalid arguments passed to jsPDF.circle");
            return this.ellipse(e, t, n, n, r)
        }, l.setFont = function (e, t) {
            return Z = S(e, t, {disableWarning: !1}), this
        }, l.setFontStyle = l.setFontType = function (e) {
            return Z = S(void 0, e), this
        }, l.__private__.getFontList = l.getFontList = function () {
            var e, t, n, r = {};
            for (e in K) if (K.hasOwnProperty(e)) for (t in r[e] = n = [], K[e]) K[e].hasOwnProperty(t) && n.push(t);
            return r
        }, l.addFont = function (e, t, n, r) {
            x.call(this, e, t, n, r = r || "Identity-H")
        };
        var Re, De = r.lineWidth || .200025, je = l.__private__.setLineWidth = l.setLineWidth = function (e) {
            return Q((e * B).toFixed(2) + " w"), this
        }, He = (l.__private__.setLineDash = at.API.setLineDash = function (e, t) {
            if (e = e || [], t = t || 0, isNaN(t) || !Array.isArray(e)) throw new Error("Invalid arguments passed to jsPDF.setLineDash");
            return e = e.map(function (e) {
                return (e * B).toFixed(3)
            }).join(" "), t = parseFloat((t * B).toFixed(3)), Q("[" + e + "] " + t + " d"), this
        }, l.__private__.getLineHeight = l.getLineHeight = function () {
            return ee * Re
        }), qe = (He = l.__private__.getLineHeight = l.getLineHeight = function () {
            return ee * Re
        }, l.__private__.setLineHeightFactor = l.setLineHeightFactor = function (e) {
            return "number" == typeof (e = e || 1.15) && (Re = e), this
        }), Ue = l.__private__.getLineHeightFactor = l.getLineHeightFactor = function () {
            return Re
        };
        qe(r.lineHeight);
        var ze = l.__private__.getHorizontalCoordinate = function (e) {
            return e * B
        }, $e = l.__private__.getVerticalCoordinate = function (e) {
            return ie[L].mediaBox.topRightY - ie[L].mediaBox.bottomLeftY - e * B
        }, Ve = l.__private__.getHorizontalCoordinateString = function (e) {
            return J(e * B)
        }, We = l.__private__.getVerticalCoordinateString = function (e) {
            return J(ie[L].mediaBox.topRightY - ie[L].mediaBox.bottomLeftY - e * B)
        }, Ge = r.strokeColor || "0 G", Ke = (l.__private__.getStrokeColor = l.getDrawColor = function () {
            return pe(Ge)
        }, l.__private__.setStrokeColor = l.setDrawColor = function (e, t, n, r) {
            return Ge = ge({ch1: e, ch2: t, ch3: n, ch4: r, pdfColorType: "draw", precision: 2}), Q(Ge), this
        }, r.fillColor || "0 g"), Xe = (l.__private__.getFillColor = l.getFillColor = function () {
            return pe(Ke)
        }, l.__private__.setFillColor = l.setFillColor = function (e, t, n, r) {
            return Ke = ge({ch1: e, ch2: t, ch3: n, ch4: r, pdfColorType: "fill", precision: 2}), Q(Ke), this
        }, r.textColor || "0 g"), Je = l.__private__.getTextColor = l.getTextColor = function () {
            return pe(Xe)
        }, Ye = (l.__private__.setTextColor = l.setTextColor = function (e, t, n, r) {
            return Xe = ge({ch1: e, ch2: t, ch3: n, ch4: r, pdfColorType: "text", precision: 3}), this
        }, r.charSpace || 0), Ze = l.__private__.getCharSpace = l.getCharSpace = function () {
            return Ye
        }, Qe = (l.__private__.setCharSpace = l.setCharSpace = function (e) {
            if (isNaN(e)) throw new Error("Invalid argument passed to jsPDF.setCharSpace");
            return Ye = e, this
        }, 0);
        l.CapJoinStyles = {
            0: 0,
            butt: 0,
            but: 0,
            miter: 0,
            1: 1,
            round: 1,
            rounded: 1,
            circle: 1,
            2: 2,
            projecting: 2,
            project: 2,
            square: 2,
            bevel: 2
        }, l.__private__.setLineCap = l.setLineCap = function (e) {
            var t = l.CapJoinStyles[e];
            if (void 0 === t) throw new Error("Line cap style of '" + e + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
            return Q((Qe = t) + " J"), this
        };
        var et, tt = 0;
        for (var nt in l.__private__.setLineJoin = l.setLineJoin = function (e) {
            var t = l.CapJoinStyles[e];
            if (void 0 === t) throw new Error("Line join style of '" + e + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
            return Q((tt = t) + " j"), this
        }, l.__private__.setMiterLimit = l.setMiterLimit = function (e) {
            if (e = e || 0, isNaN(e)) throw new Error("Invalid argument passed to jsPDF.setMiterLimit");
            return et = parseFloat(J(e * B)), Q(et + " M"), this
        }, l.save = function (r, e) {
            if (r = r || "generated.pdf", (e = e || {}).returnPromise = e.returnPromise || !1, !1 !== e.returnPromise) return new Promise(function (e, t) {
                try {
                    var n = st(Te(Ee()), r);
                    "function" == typeof st.unload && it.setTimeout && setTimeout(st.unload, 911), e(n)
                } catch (e) {
                    t(e.message)
                }
            });
            st(Te(Ee()), r), "function" == typeof st.unload && it.setTimeout && setTimeout(st.unload, 911)
        }, at.API) at.API.hasOwnProperty(nt) && ("events" === nt && at.API.events.length ? function (e, t) {
            var n, r, i;
            for (i = t.length - 1; -1 !== i; i--) n = t[i][0], r = t[i][1], e.subscribe.apply(e, [n].concat("function" == typeof r ? [r] : r))
        }(ae, at.API.events) : l[nt] = at.API[nt]);
        return l.internal = {
            pdfEscape: we,
            getStyle: Fe,
            getFont: function () {
                return ne[S.apply(l, arguments)]
            },
            getFontSize: q,
            getCharSpace: Ze,
            getTextColor: Je,
            getLineHeight: He,
            getLineHeightFactor: Ue,
            write: D,
            getHorizontalCoordinate: ze,
            getVerticalCoordinate: $e,
            getCoordinateString: Ve,
            getVerticalCoordinateString: We,
            collections: {},
            newObject: le,
            newAdditionalObject: ue,
            newObjectDeferred: ce,
            newObjectDeferredBegin: de,
            getFilters: me,
            putStream: ve,
            events: ae,
            scaleFactor: B,
            pageSize: {
                getWidth: function () {
                    return (ie[L].mediaBox.topRightX - ie[L].mediaBox.bottomLeftX) / B
                }, setWidth: function (e) {
                    ie[L].mediaBox.topRightX = e * B + ie[L].mediaBox.bottomLeftX
                }, getHeight: function () {
                    return (ie[L].mediaBox.topRightY - ie[L].mediaBox.bottomLeftY) / B
                }, setHeight: function (e) {
                    ie[L].mediaBox.topRightY = e * B + ie[L].mediaBox.bottomLeftY
                }
            },
            output: Be,
            getNumberOfPages: Ce,
            pages: _,
            out: Q,
            f2: J,
            f3: Y,
            getPageInfo: Oe,
            getPageInfoByObjId: Pe,
            getCurrentPageInfo: Me,
            getPDFVersion: d,
            hasHotfix: A
        }, Object.defineProperty(l.internal.pageSize, "width", {
            get: function () {
                return (ie[L].mediaBox.topRightX - ie[L].mediaBox.bottomLeftX) / B
            }, set: function (e) {
                ie[L].mediaBox.topRightX = e * B + ie[L].mediaBox.bottomLeftX
            }, enumerable: !0, configurable: !0
        }), Object.defineProperty(l.internal.pageSize, "height", {
            get: function () {
                return (ie[L].mediaBox.topRightY - ie[L].mediaBox.bottomLeftY) / B
            }, set: function (e) {
                ie[L].mediaBox.topRightY = e * B + ie[L].mediaBox.bottomLeftY
            }, enumerable: !0, configurable: !0
        }), function (e) {
            for (var t = 0, n = H.length; t < n; t++) {
                var r = x(e[t][0], e[t][1], e[t][2], H[t][3], !0);
                X[r] = !0;
                var i = e[t][0].split("-");
                k(r, i[0], i[1] || "")
            }
            ae.publish("addFonts", {fonts: ne, dictionary: K})
        }(H), Z = "F1", C(i, e), ae.publish("initialized"), l
    }

    (function (e, t) {
        function S(e) {
            return e.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)")
        }

        function v(e) {
            return e.replace(/\\\\/g, "\\").replace(/\\\(/g, "(").replace(/\\\)/g, ")")
        }

        function A(e) {
            if (isNaN(e)) throw new Error("Invalid argument passed to jsPDF.f2");
            return e.toFixed(2)
        }

        function s(e) {
            if (isNaN(e)) throw new Error("Invalid argument passed to jsPDF.f2");
            return e.toFixed(5)
        }

        var L, n = 1;
        e.__acroform__ = {};

        function r(e, t) {
            e.prototype = Object.create(t.prototype), e.prototype.constructor = e
        }

        function b(e) {
            return e * n
        }

        function y(e) {
            return e / n
        }

        function l(e) {
            var t = new P, n = G.internal.getHeight(e) || 0, r = G.internal.getWidth(e) || 0;
            return t.BBox = [0, 0, Number(A(r)), Number(A(n))], t
        }

        function u(e) {
            if (e.appearanceStreamContent) return e.appearanceStreamContent;
            if (e.V || e.DV) {
                var t = [], n = e.V || e.DV, r = m(e, n), i = L.internal.getFont(e.fontName, e.fontStyle).id;
                t.push("/Tx BMC"), t.push("q"), t.push("BT"), t.push(L.__private__.encodeColorString(e.color)), t.push("/" + i + " " + A(r.fontSize) + " Tf"), t.push("1 0 0 1 0 0 Tm"), t.push(r.text), t.push("ET"), t.push("Q"), t.push("EMC");
                var o = new l(e);
                return o.stream = t.join("\n"), o
            }
        }

        function i() {
            L.internal.acroformPlugin.acroFormDictionaryRoot.objId = void 0;
            var e = L.internal.acroformPlugin.acroFormDictionaryRoot.Fields;
            for (var t in e) if (e.hasOwnProperty(t)) {
                var n = e[t];
                n.objId = void 0, n.hasAnnotation && T.call(L, n)
            }
        }

        function o() {
            if (void 0 === L.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error("putCatalogCallback: Root missing.");
            L.internal.write("/AcroForm " + L.internal.acroformPlugin.acroFormDictionaryRoot.objId + " 0 R")
        }

        function a() {
            L.internal.events.unsubscribe(L.internal.acroformPlugin.acroFormDictionaryRoot._eventID), delete L.internal.acroformPlugin.acroFormDictionaryRoot._eventID, L.internal.acroformPlugin.printedOut = !0
        }

        function c(e) {
            var t = !e;
            for (var n in e || (L.internal.newObjectDeferredBegin(L.internal.acroformPlugin.acroFormDictionaryRoot.objId, !0), L.internal.acroformPlugin.acroFormDictionaryRoot.putStream()), e = e || L.internal.acroformPlugin.acroFormDictionaryRoot.Kids) if (e.hasOwnProperty(n)) {
                var r = e[n], i = [], o = r.Rect;
                if (r.Rect && (r.Rect = g.call(this, r.Rect)), L.internal.newObjectDeferredBegin(r.objId, !0), r.DA = G.createDefaultAppearanceStream(r), "object" === rt(r) && "function" == typeof r.getKeyValueListForStream && (i = r.getKeyValueListForStream()), r.Rect = o, r.hasAppearanceStream && !r.appearanceStreamContent) {
                    var a = u.call(this, r);
                    i.push({key: "AP", value: "<</N " + a + ">>"}), L.internal.acroformPlugin.xForms.push(a)
                }
                if (r.appearanceStreamContent) {
                    var s = "";
                    for (var l in r.appearanceStreamContent) if (r.appearanceStreamContent.hasOwnProperty(l)) {
                        var c = r.appearanceStreamContent[l];
                        if (s += "/" + l + " ", s += "<<", 1 <= Object.keys(c).length || Array.isArray(c)) for (var n in c) {
                            var d;
                            c.hasOwnProperty(n) && ("function" == typeof (d = c[n]) && (d = d.call(this, r)), s += "/" + n + " " + d + " ", 0 <= L.internal.acroformPlugin.xForms.indexOf(d) || L.internal.acroformPlugin.xForms.push(d))
                        } else "function" == typeof (d = c) && (d = d.call(this, r)), s += "/" + n + " " + d, 0 <= L.internal.acroformPlugin.xForms.indexOf(d) || L.internal.acroformPlugin.xForms.push(d);
                        s += ">>"
                    }
                    i.push({key: "AP", value: "<<\n" + s + ">>"})
                }
                L.internal.putStream({additionalKeyValues: i}), L.internal.out("endobj")
            }
            t && B.call(this, L.internal.acroformPlugin.xForms)
        }

        function d() {
            if (void 0 !== this.internal && (void 0 === this.internal.acroformPlugin || !1 === this.internal.acroformPlugin.isInitialized)) {
                if (L = this, _.FieldNum = 0, this.internal.acroformPlugin = JSON.parse(JSON.stringify(E)), this.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error("Exception while creating AcroformDictionary");
                n = L.internal.scaleFactor, L.internal.acroformPlugin.acroFormDictionaryRoot = new M, L.internal.acroformPlugin.acroFormDictionaryRoot._eventID = L.internal.events.subscribe("postPutResources", a), L.internal.events.subscribe("buildDocument", i), L.internal.events.subscribe("putCatalog", o), L.internal.events.subscribe("postPutPages", c), L.internal.acroformPlugin.isInitialized = !0
            }
        }

        function w(e) {
            return (e = e || "").toString(), "(" + S(e) + ")"
        }

        function k() {
            var t;
            Object.defineProperty(this, "objId", {
                configurable: !0, get: function () {
                    if (!(t = t || L.internal.newObjectDeferred())) throw new Error("AcroFormPDFObject: Couldn't create Object ID");
                    return t
                }, set: function (e) {
                    t = e
                }
            })
        }

        var h = e.__acroform__.setBit = function (e, t) {
            if (e = e || 0, t = t || 0, isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");
            return e | 1 << t
        }, f = e.__acroform__.clearBit = function (e, t) {
            if (e = e || 0, t = t || 0, isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");
            return e & ~(1 << t)
        }, p = e.__acroform__.getBit = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");
            return 0 == (e & 1 << t) ? 0 : 1
        }, x = e.__acroform__.getBitForPdf = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");
            return p(e, t - 1)
        }, C = e.__acroform__.setBitForPdf = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");
            return h(e, t - 1)
        }, N = e.__acroform__.clearBitForPdf = function (e, t, n) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");
            return f(e, t - 1)
        }, g = e.__acroform__.calculateCoordinates = function (e) {
            var t = this.internal.getHorizontalCoordinate, n = this.internal.getVerticalCoordinate, r = e[0], i = e[1],
                o = e[2], a = e[3], s = {};
            return s.lowerLeft_X = t(r) || 0, s.lowerLeft_Y = n(i + a) || 0, s.upperRight_X = t(r + o) || 0, s.upperRight_Y = n(i) || 0, [Number(A(s.lowerLeft_X)), Number(A(s.lowerLeft_Y)), Number(A(s.upperRight_X)), Number(A(s.upperRight_Y))]
        }, m = function (i, e) {
            var t = i.maxFontSize || 12, n = (i.fontName, {text: "", fontSize: ""}),
                o = (e = ")" == (e = "(" == e.substr(0, 1) ? e.substr(1) : e).substr(e.length - 1) ? e.substr(0, e.length - 1) : e).split(" "),
                r = (L.__private__.encodeColorString(i.color), t), a = G.internal.getHeight(i) || 0;
            a = a < 0 ? -a : a;
            var s = G.internal.getWidth(i) || 0;
            s = s < 0 ? -s : s;

            function l(e, t, n) {
                if (e + 1 < o.length) {
                    var r = t + " " + o[e + 1];
                    return I(r, i, n).width <= s - 4
                }
                return !1
            }

            r++;
            e:for (; ;) {
                e = "";
                var c = I("3", i, --r).height, d = i.multiline ? a - r : (a - c) / 2, u = -2, h = d += 2, f = 0, p = 0,
                    g = 0;
                if (r <= 0) {
                    e = "(...) Tj\n", e += "% Width of Text: " + I(e, i, r = 12).width + ", FieldWidth:" + s + "\n";
                    break
                }
                g = I(o[0] + " ", i, r).width;
                var m = "", v = 0;
                for (var b in o) if (o.hasOwnProperty(b)) {
                    m = " " == (m += o[b] + " ").substr(m.length - 1) ? m.substr(0, m.length - 1) : m;
                    var y = parseInt(b);
                    g = I(m + " ", i, r).width;
                    var w = l(y, m, r), k = b >= o.length - 1;
                    if (w && !k) {
                        m += " ";
                        continue
                    }
                    if (w || k) {
                        if (k) p = y; else if (i.multiline && a < (c + 2) * (v + 2) + 2) continue e
                    } else {
                        if (!i.multiline) continue e;
                        if (a < (c + 2) * (v + 2) + 2) continue e;
                        p = y
                    }
                    for (var x = "", C = f; C <= p; C++) x += o[C] + " ";
                    switch (x = " " == x.substr(x.length - 1) ? x.substr(0, x.length - 1) : x, g = I(x, i, r).width, i.textAlign) {
                        case"right":
                            u = s - g - 2;
                            break;
                        case"center":
                            u = (s - g) / 2;
                            break;
                        case"left":
                        default:
                            u = 2
                    }
                    e += A(u) + " " + A(h) + " Td\n", e += "(" + S(x) + ") Tj\n", e += -A(u) + " 0 Td\n", h = -(r + 2), g = 0, f = p + 1, v++, m = ""
                }
                break
            }
            return n.text = e, n.fontSize = r, n
        }, I = function (e, t, n) {
            var r = L.internal.getFont(t.fontName, t.fontStyle),
                i = L.getStringUnitWidth(e, {font: r, fontSize: parseFloat(n), charSpace: 0}) * parseFloat(n);
            return {
                height: L.getStringUnitWidth("3", {
                    font: r,
                    fontSize: parseFloat(n),
                    charSpace: 0
                }) * parseFloat(n) * 1.5, width: i
            }
        }, E = {
            fields: [],
            xForms: [],
            acroFormDictionaryRoot: null,
            printedOut: !1,
            internal: null,
            isInitialized: !1
        }, T = function (e) {
            var t = {type: "reference", object: e};
            void 0 === L.internal.getPageInfo(e.page).pageContext.annotations.find(function (e) {
                return e.type === t.type && e.object === t.object
            }) && L.internal.getPageInfo(e.page).pageContext.annotations.push(t)
        }, B = function (e) {
            for (var t in e) if (e.hasOwnProperty(t)) {
                var n = t, r = e[t];
                L.internal.newObjectDeferredBegin(r && r.objId, !0), "object" === rt(r) && "function" == typeof r.putStream && r.putStream(), delete e[n]
            }
        }, O = e.__acroform__.arrayToPdfArray = function (e) {
            if (Array.isArray(e)) {
                for (var t = "[", n = 0; n < e.length; n++) switch (0 !== n && (t += " "), rt(e[n])) {
                    case"boolean":
                    case"number":
                    case"object":
                        t += e[n].toString();
                        break;
                    case"string":
                        "/" !== e[n].substr(0, 1) ? t += "(" + S(e[n].toString()) + ")" : t += e[n].toString()
                }
                return t + "]"
            }
            throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")
        };
        k.prototype.toString = function () {
            return this.objId + " 0 R"
        }, k.prototype.putStream = function () {
            var e = this.getKeyValueListForStream();
            L.internal.putStream({data: this.stream, additionalKeyValues: e}), L.internal.out("endobj")
        }, k.prototype.getKeyValueListForStream = function () {
            return function (e) {
                var t = [], n = Object.getOwnPropertyNames(e).filter(function (e) {
                    return "content" != e && "appearanceStreamContent" != e && "_" != e.substring(0, 1)
                });
                for (var r in n) if (!1 === Object.getOwnPropertyDescriptor(e, n[r]).configurable) {
                    var i = n[r], o = e[i];
                    o && (Array.isArray(o) ? t.push({key: i, value: O(o)}) : o instanceof k ? t.push({
                        key: i,
                        value: o.objId + " 0 R"
                    }) : "function" != typeof o && t.push({key: i, value: o}))
                }
                return t
            }(this)
        };
        var P = function () {
            k.call(this), Object.defineProperty(this, "Type", {
                value: "/XObject",
                configurable: !1,
                writeable: !0
            }), Object.defineProperty(this, "Subtype", {
                value: "/Form",
                configurable: !1,
                writeable: !0
            }), Object.defineProperty(this, "FormType", {value: 1, configurable: !1, writeable: !0});
            var t, n = [];
            Object.defineProperty(this, "BBox", {
                configurable: !1, writeable: !0, get: function () {
                    return n
                }, set: function (e) {
                    n = e
                }
            }), Object.defineProperty(this, "Resources", {
                value: "2 0 R",
                configurable: !1,
                writeable: !0
            }), Object.defineProperty(this, "stream", {
                enumerable: !1, configurable: !0, set: function (e) {
                    t = e.trim()
                }, get: function () {
                    return t || null
                }
            })
        };
        r(P, k);
        var M = function () {
            k.call(this);
            var t, e = [];
            Object.defineProperty(this, "Kids", {
                enumerable: !1, configurable: !0, get: function () {
                    return 0 < e.length ? e : void 0
                }
            }), Object.defineProperty(this, "Fields", {
                enumerable: !1, configurable: !1, get: function () {
                    return e
                }
            }), Object.defineProperty(this, "DA", {
                enumerable: !1, configurable: !1, get: function () {
                    if (t) return "(" + t + ")"
                }, set: function (e) {
                    t = e
                }
            })
        };
        r(M, k);
        var _ = function e() {
            k.call(this);
            var t = 4;
            Object.defineProperty(this, "F", {
                enumerable: !1, configurable: !1, get: function () {
                    return t
                }, set: function (e) {
                    if (isNaN(e)) throw new Error('Invalid value "' + e + '" for attribute F supplied.');
                    t = e
                }
            }), Object.defineProperty(this, "showWhenPrinted", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(t, 3))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.F = C(t, 3) : this.F = N(t, 3)
                }
            });
            var n = 0;
            Object.defineProperty(this, "Ff", {
                enumerable: !1, configurable: !1, get: function () {
                    return n
                }, set: function (e) {
                    if (isNaN(e)) throw new Error('Invalid value "' + e + '" for attribute Ff supplied.');
                    n = e
                }
            });
            var r = [];
            Object.defineProperty(this, "Rect", {
                enumerable: !1, configurable: !1, get: function () {
                    if (0 !== r.length) return r
                }, set: function (e) {
                    r = void 0 !== e ? e : []
                }
            }), Object.defineProperty(this, "x", {
                enumerable: !0, configurable: !0, get: function () {
                    return !r || isNaN(r[0]) ? 0 : y(r[0])
                }, set: function (e) {
                    r[0] = b(e)
                }
            }), Object.defineProperty(this, "y", {
                enumerable: !0, configurable: !0, get: function () {
                    return !r || isNaN(r[1]) ? 0 : y(r[1])
                }, set: function (e) {
                    r[1] = b(e)
                }
            }), Object.defineProperty(this, "width", {
                enumerable: !0, configurable: !0, get: function () {
                    return !r || isNaN(r[2]) ? 0 : y(r[2])
                }, set: function (e) {
                    r[2] = b(e)
                }
            }), Object.defineProperty(this, "height", {
                enumerable: !0, configurable: !0, get: function () {
                    return !r || isNaN(r[3]) ? 0 : y(r[3])
                }, set: function (e) {
                    r[3] = b(e)
                }
            });
            var i = "";
            Object.defineProperty(this, "FT", {
                enumerable: !0, configurable: !1, get: function () {
                    return i
                }, set: function (e) {
                    switch (e) {
                        case"/Btn":
                        case"/Tx":
                        case"/Ch":
                        case"/Sig":
                            i = e;
                            break;
                        default:
                            throw new Error('Invalid value "' + e + '" for attribute FT supplied.')
                    }
                }
            });
            var o = null;
            Object.defineProperty(this, "T", {
                enumerable: !0, configurable: !1, get: function () {
                    if (!o || o.length < 1) {
                        if (this instanceof z) return;
                        o = "FieldObject" + e.FieldNum++
                    }
                    return "(" + S(o) + ")"
                }, set: function (e) {
                    o = e.toString()
                }
            }), Object.defineProperty(this, "fieldName", {
                configurable: !0, enumerable: !0, get: function () {
                    return o
                }, set: function (e) {
                    o = e
                }
            });
            var a = "helvetica";
            Object.defineProperty(this, "fontName", {
                enumerable: !0, configurable: !0, get: function () {
                    return a
                }, set: function (e) {
                    a = e
                }
            });
            var s = "normal";
            Object.defineProperty(this, "fontStyle", {
                enumerable: !0, configurable: !0, get: function () {
                    return s
                }, set: function (e) {
                    s = e
                }
            });
            var l = 0;
            Object.defineProperty(this, "fontSize", {
                enumerable: !0, configurable: !0, get: function () {
                    return y(l)
                }, set: function (e) {
                    l = b(e)
                }
            });
            var c = 50;
            Object.defineProperty(this, "maxFontSize", {
                enumerable: !0, configurable: !0, get: function () {
                    return y(c)
                }, set: function (e) {
                    c = b(e)
                }
            });
            var d = "black";
            Object.defineProperty(this, "color", {
                enumerable: !0, configurable: !0, get: function () {
                    return d
                }, set: function (e) {
                    d = e
                }
            });
            var u = "/F1 0 Tf 0 g";
            Object.defineProperty(this, "DA", {
                enumerable: !0, configurable: !1, get: function () {
                    if (!(!u || this instanceof z || this instanceof V)) return w(u)
                }, set: function (e) {
                    e = e.toString(), u = e
                }
            });
            var h = null;
            Object.defineProperty(this, "DV", {
                enumerable: !1, configurable: !1, get: function () {
                    if (h) return this instanceof H == 0 ? w(h) : h
                }, set: function (e) {
                    e = e.toString(), h = this instanceof H == 0 ? "(" === e.substr(0, 1) ? v(e.substr(1, e.length - 2)) : v(e) : e
                }
            }), Object.defineProperty(this, "defaultValue", {
                enumerable: !0, configurable: !0, get: function () {
                    return this instanceof H == 1 ? v(h.substr(1, h.length - 1)) : h
                }, set: function (e) {
                    e = e.toString(), h = this instanceof H == 1 ? "/" + e : e
                }
            });
            var f = null;
            Object.defineProperty(this, "V", {
                enumerable: !1, configurable: !1, get: function () {
                    if (f) return this instanceof H == 0 ? w(f) : f
                }, set: function (e) {
                    e = e.toString(), f = this instanceof H == 0 ? "(" === e.substr(0, 1) ? v(e.substr(1, e.length - 2)) : v(e) : e
                }
            }), Object.defineProperty(this, "value", {
                enumerable: !0, configurable: !0, get: function () {
                    return this instanceof H == 1 ? v(f.substr(1, f.length - 1)) : f
                }, set: function (e) {
                    e = e.toString(), f = this instanceof H == 1 ? "/" + e : e
                }
            }), Object.defineProperty(this, "hasAnnotation", {
                enumerable: !0, configurable: !0, get: function () {
                    return this.Rect
                }
            }), Object.defineProperty(this, "Type", {
                enumerable: !0, configurable: !1, get: function () {
                    return this.hasAnnotation ? "/Annot" : null
                }
            }), Object.defineProperty(this, "Subtype", {
                enumerable: !0, configurable: !1, get: function () {
                    return this.hasAnnotation ? "/Widget" : null
                }
            });
            var p, g = !1;
            Object.defineProperty(this, "hasAppearanceStream", {
                enumerable: !0,
                configurable: !0,
                writeable: !0,
                get: function () {
                    return g
                },
                set: function (e) {
                    e = Boolean(e), g = e
                }
            }), Object.defineProperty(this, "page", {
                enumerable: !0, configurable: !0, writeable: !0, get: function () {
                    if (p) return p
                }, set: function (e) {
                    p = e
                }
            }), Object.defineProperty(this, "readOnly", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 1))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 1) : this.Ff = N(this.Ff, 1)
                }
            }), Object.defineProperty(this, "required", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 2))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 2) : this.Ff = N(this.Ff, 2)
                }
            }), Object.defineProperty(this, "noExport", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 3))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 3) : this.Ff = N(this.Ff, 3)
                }
            });
            var m = null;
            Object.defineProperty(this, "Q", {
                enumerable: !0, configurable: !1, get: function () {
                    if (null !== m) return m
                }, set: function (e) {
                    if (-1 === [0, 1, 2].indexOf(e)) throw new Error('Invalid value "' + e + '" for attribute Q supplied.');
                    m = e
                }
            }), Object.defineProperty(this, "textAlign", {
                get: function () {
                    var e = "left";
                    switch (m) {
                        case 0:
                        default:
                            e = "left";
                            break;
                        case 1:
                            e = "center";
                            break;
                        case 2:
                            e = "right"
                    }
                    return e
                }, configurable: !0, enumerable: !0, set: function (e) {
                    switch (e) {
                        case"right":
                        case 2:
                            m = 2;
                            break;
                        case"center":
                        case 1:
                            m = 1;
                            break;
                        case"left":
                        case 0:
                        default:
                            m = 0
                    }
                }
            })
        };
        r(_, k);

        function F() {
            _.call(this), this.FT = "/Ch", this.V = "()", this.fontName = "zapfdingbats";
            var t = 0;
            Object.defineProperty(this, "TI", {
                enumerable: !0, configurable: !1, get: function () {
                    return t
                }, set: function (e) {
                    t = e
                }
            }), Object.defineProperty(this, "topIndex", {
                enumerable: !0, configurable: !0, get: function () {
                    return t
                }, set: function (e) {
                    t = e
                }
            });
            var r = [];
            Object.defineProperty(this, "Opt", {
                enumerable: !0, configurable: !1, get: function () {
                    return O(r)
                }, set: function (e) {
                    var t, n;
                    n = [], "string" == typeof (t = e) && (n = function (e, t, n) {
                        n = n || 1;
                        for (var r, i = []; r = t.exec(e);) i.push(r[n]);
                        return i
                    }(t, /\((.*?)\)/g)), r = n
                }
            }), this.getOptions = function () {
                return r
            }, this.setOptions = function (e) {
                r = e, this.sort && r.sort()
            }, this.addOption = function (e) {
                e = (e = e || "").toString(), r.push(e), this.sort && r.sort()
            }, this.removeOption = function (e, t) {
                for (t = t || !1, e = (e = e || "").toString(); -1 !== r.indexOf(e) && (r.splice(r.indexOf(e), 1), !1 !== t);) ;
            }, Object.defineProperty(this, "combo", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 18))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 18) : this.Ff = N(this.Ff, 18)
                }
            }), Object.defineProperty(this, "edit", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 19))
                }, set: function (e) {
                    !0 === this.combo && (!0 === Boolean(e) ? this.Ff = C(this.Ff, 19) : this.Ff = N(this.Ff, 19))
                }
            }), Object.defineProperty(this, "sort", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 20))
                }, set: function (e) {
                    !0 === Boolean(e) ? (this.Ff = C(this.Ff, 20), r.sort()) : this.Ff = N(this.Ff, 20)
                }
            }), Object.defineProperty(this, "multiSelect", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 22))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 22) : this.Ff = N(this.Ff, 22)
                }
            }), Object.defineProperty(this, "doNotSpellCheck", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 23))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 23) : this.Ff = N(this.Ff, 23)
                }
            }), Object.defineProperty(this, "commitOnSelChange", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 27))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 27) : this.Ff = N(this.Ff, 27)
                }
            }), this.hasAppearanceStream = !1
        }

        r(F, _);

        function R() {
            F.call(this), this.fontName = "helvetica", this.combo = !1
        }

        r(R, F);

        function D() {
            R.call(this), this.combo = !0
        }

        r(D, R);

        function j() {
            D.call(this), this.edit = !0
        }

        r(j, D);
        var H = function () {
            _.call(this), this.FT = "/Btn", Object.defineProperty(this, "noToggleToOff", {
                enumerable: !0,
                configurable: !0,
                get: function () {
                    return Boolean(x(this.Ff, 15))
                },
                set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 15) : this.Ff = N(this.Ff, 15)
                }
            }), Object.defineProperty(this, "radio", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 16))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 16) : this.Ff = N(this.Ff, 16)
                }
            }), Object.defineProperty(this, "pushButton", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 17))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 17) : this.Ff = N(this.Ff, 17)
                }
            }), Object.defineProperty(this, "radioIsUnison", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 26))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 26) : this.Ff = N(this.Ff, 26)
                }
            });
            var t, n = {};
            Object.defineProperty(this, "MK", {
                enumerable: !1, configurable: !1, get: function () {
                    if (0 !== Object.keys(n).length) {
                        var e, t = [];
                        for (e in t.push("<<"), n) t.push("/" + e + " (" + n[e] + ")");
                        return t.push(">>"), t.join("\n")
                    }
                }, set: function (e) {
                    "object" === rt(e) && (n = e)
                }
            }), Object.defineProperty(this, "caption", {
                enumerable: !0, configurable: !0, get: function () {
                    return n.CA || ""
                }, set: function (e) {
                    "string" == typeof e && (n.CA = e)
                }
            }), Object.defineProperty(this, "AS", {
                enumerable: !1, configurable: !1, get: function () {
                    return t
                }, set: function (e) {
                    t = e
                }
            }), Object.defineProperty(this, "appearanceState", {
                enumerable: !0, configurable: !0, get: function () {
                    return t.substr(1, t.length - 1)
                }, set: function (e) {
                    t = "/" + e
                }
            })
        };
        r(H, _);

        function q() {
            H.call(this), this.pushButton = !0
        }

        r(q, H);

        function U() {
            H.call(this), this.radio = !0, this.pushButton = !1;
            var t = [];
            Object.defineProperty(this, "Kids", {
                enumerable: !0, configurable: !1, get: function () {
                    return t
                }, set: function (e) {
                    t = void 0 !== e ? e : []
                }
            })
        }

        r(U, H);
        var z = function () {
            var t, n;
            _.call(this), Object.defineProperty(this, "Parent", {
                enumerable: !1, configurable: !1, get: function () {
                    return t
                }, set: function (e) {
                    t = e
                }
            }), Object.defineProperty(this, "optionName", {
                enumerable: !1, configurable: !0, get: function () {
                    return n
                }, set: function (e) {
                    n = e
                }
            });
            var r, i = {};
            Object.defineProperty(this, "MK", {
                enumerable: !1, configurable: !1, get: function () {
                    var e, t = [];
                    for (e in t.push("<<"), i) t.push("/" + e + " (" + i[e] + ")");
                    return t.push(">>"), t.join("\n")
                }, set: function (e) {
                    "object" === rt(e) && (i = e)
                }
            }), Object.defineProperty(this, "caption", {
                enumerable: !0, configurable: !0, get: function () {
                    return i.CA || ""
                }, set: function (e) {
                    "string" == typeof e && (i.CA = e)
                }
            }), Object.defineProperty(this, "AS", {
                enumerable: !1, configurable: !1, get: function () {
                    return r
                }, set: function (e) {
                    r = e
                }
            }), Object.defineProperty(this, "appearanceState", {
                enumerable: !0, configurable: !0, get: function () {
                    return r.substr(1, r.length - 1)
                }, set: function (e) {
                    r = "/" + e
                }
            }), this.optionName = name, this.caption = "l", this.appearanceState = "Off", this._AppearanceType = G.RadioButton.Circle, this.appearanceStreamContent = this._AppearanceType.createAppearanceStream(name)
        };
        r(z, _), U.prototype.setAppearance = function (e) {
            if (!("createAppearanceStream" in e && "getCA" in e)) throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");
            for (var t in this.Kids) if (this.Kids.hasOwnProperty(t)) {
                var n = this.Kids[t];
                n.appearanceStreamContent = e.createAppearanceStream(n.optionName), n.caption = e.getCA()
            }
        }, U.prototype.createOption = function (e) {
            this.Kids.length;
            var t = new z;
            return t.Parent = this, t.optionName = e, this.Kids.push(t), K.call(this, t), t
        };

        function $() {
            H.call(this), this.fontName = "zapfdingbats", this.caption = "3", this.appearanceState = "On", this.value = "On", this.textAlign = "center", this.appearanceStreamContent = G.CheckBox.createAppearanceStream()
        }

        r($, H);
        var V = function () {
            _.call(this), this.FT = "/Tx", Object.defineProperty(this, "multiline", {
                enumerable: !0,
                configurable: !0,
                get: function () {
                    return Boolean(x(this.Ff, 13))
                },
                set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 13) : this.Ff = N(this.Ff, 13)
                }
            }), Object.defineProperty(this, "fileSelect", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 21))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 21) : this.Ff = N(this.Ff, 21)
                }
            }), Object.defineProperty(this, "doNotSpellCheck", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 23))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 23) : this.Ff = N(this.Ff, 23)
                }
            }), Object.defineProperty(this, "doNotScroll", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 24))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 24) : this.Ff = N(this.Ff, 24)
                }
            }), Object.defineProperty(this, "comb", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 25))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 25) : this.Ff = N(this.Ff, 25)
                }
            }), Object.defineProperty(this, "richText", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 26))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 26) : this.Ff = N(this.Ff, 26)
                }
            });
            var t = null;
            Object.defineProperty(this, "MaxLen", {
                enumerable: !0, configurable: !1, get: function () {
                    return t
                }, set: function (e) {
                    t = e
                }
            }), Object.defineProperty(this, "maxLength", {
                enumerable: !0, configurable: !0, get: function () {
                    return t
                }, set: function (e) {
                    Number.isInteger(e) && (t = e)
                }
            }), Object.defineProperty(this, "hasAppearanceStream", {
                enumerable: !0, configurable: !0, get: function () {
                    return this.V || this.DV
                }
            })
        };
        r(V, _);

        function W() {
            V.call(this), Object.defineProperty(this, "password", {
                enumerable: !0, configurable: !0, get: function () {
                    return Boolean(x(this.Ff, 14))
                }, set: function (e) {
                    !0 === Boolean(e) ? this.Ff = C(this.Ff, 14) : this.Ff = N(this.Ff, 14)
                }
            }), this.password = !0
        }

        r(W, V);
        var G = {
            CheckBox: {
                createAppearanceStream: function () {
                    return {N: {On: G.CheckBox.YesNormal}, D: {On: G.CheckBox.YesPushDown, Off: G.CheckBox.OffPushDown}}
                }, YesPushDown: function (e) {
                    var t = l(e), n = [], r = L.internal.getFont(e.fontName, e.fontStyle).id,
                        i = L.__private__.encodeColorString(e.color), o = m(e, e.caption);
                    return n.push("0.749023 g"), n.push("0 0 " + A(G.internal.getWidth(e)) + " " + A(G.internal.getHeight(e)) + " re"), n.push("f"), n.push("BMC"), n.push("q"), n.push("0 0 1 rg"), n.push("/" + r + " " + A(o.fontSize) + " Tf " + i), n.push("BT"), n.push(o.text), n.push("ET"), n.push("Q"), n.push("EMC"), t.stream = n.join("\n"), t
                }, YesNormal: function (e) {
                    var t = l(e), n = L.internal.getFont(e.fontName, e.fontStyle).id,
                        r = L.__private__.encodeColorString(e.color), i = [], o = G.internal.getHeight(e),
                        a = G.internal.getWidth(e), s = m(e, e.caption);
                    return i.push("1 g"), i.push("0 0 " + A(a) + " " + A(o) + " re"), i.push("f"), i.push("q"), i.push("0 0 1 rg"), i.push("0 0 " + A(a - 1) + " " + A(o - 1) + " re"), i.push("W"), i.push("n"), i.push("0 g"), i.push("BT"), i.push("/" + n + " " + A(s.fontSize) + " Tf " + r), i.push(s.text), i.push("ET"), i.push("Q"), t.stream = i.join("\n"), t
                }, OffPushDown: function (e) {
                    var t = l(e), n = [];
                    return n.push("0.749023 g"), n.push("0 0 " + A(G.internal.getWidth(e)) + " " + A(G.internal.getHeight(e)) + " re"), n.push("f"), t.stream = n.join("\n"), t
                }
            }, RadioButton: {
                Circle: {
                    createAppearanceStream: function (e) {
                        var t = {D: {Off: G.RadioButton.Circle.OffPushDown}, N: {}};
                        return t.N[e] = G.RadioButton.Circle.YesNormal, t.D[e] = G.RadioButton.Circle.YesPushDown, t
                    }, getCA: function () {
                        return "l"
                    }, YesNormal: function (e) {
                        var t = l(e), n = [],
                            r = G.internal.getWidth(e) <= G.internal.getHeight(e) ? G.internal.getWidth(e) / 4 : G.internal.getHeight(e) / 4;
                        r = Number((.9 * r).toFixed(5));
                        var i = G.internal.Bezier_C, o = Number((r * i).toFixed(5));
                        return n.push("q"), n.push("1 0 0 1 " + s(G.internal.getWidth(e) / 2) + " " + s(G.internal.getHeight(e) / 2) + " cm"), n.push(r + " 0 m"), n.push(r + " " + o + " " + o + " " + r + " 0 " + r + " c"), n.push("-" + o + " " + r + " -" + r + " " + o + " -" + r + " 0 c"), n.push("-" + r + " -" + o + " -" + o + " -" + r + " 0 -" + r + " c"), n.push(o + " -" + r + " " + r + " -" + o + " " + r + " 0 c"), n.push("f"), n.push("Q"), t.stream = n.join("\n"), t
                    }, YesPushDown: function (e) {
                        var t = l(e), n = [],
                            r = G.internal.getWidth(e) <= G.internal.getHeight(e) ? G.internal.getWidth(e) / 4 : G.internal.getHeight(e) / 4,
                            i = (r = Number((.9 * r).toFixed(5)), Number((2 * r).toFixed(5))),
                            o = Number((i * G.internal.Bezier_C).toFixed(5)),
                            a = Number((r * G.internal.Bezier_C).toFixed(5));
                        return n.push("0.749023 g"), n.push("q"), n.push("1 0 0 1 " + s(G.internal.getWidth(e) / 2) + " " + s(G.internal.getHeight(e) / 2) + " cm"), n.push(i + " 0 m"), n.push(i + " " + o + " " + o + " " + i + " 0 " + i + " c"), n.push("-" + o + " " + i + " -" + i + " " + o + " -" + i + " 0 c"), n.push("-" + i + " -" + o + " -" + o + " -" + i + " 0 -" + i + " c"), n.push(o + " -" + i + " " + i + " -" + o + " " + i + " 0 c"), n.push("f"), n.push("Q"), n.push("0 g"), n.push("q"), n.push("1 0 0 1 " + s(G.internal.getWidth(e) / 2) + " " + s(G.internal.getHeight(e) / 2) + " cm"), n.push(r + " 0 m"), n.push(r + " " + a + " " + a + " " + r + " 0 " + r + " c"), n.push("-" + a + " " + r + " -" + r + " " + a + " -" + r + " 0 c"), n.push("-" + r + " -" + a + " -" + a + " -" + r + " 0 -" + r + " c"), n.push(a + " -" + r + " " + r + " -" + a + " " + r + " 0 c"), n.push("f"), n.push("Q"), t.stream = n.join("\n"), t
                    }, OffPushDown: function (e) {
                        var t = l(e), n = [],
                            r = G.internal.getWidth(e) <= G.internal.getHeight(e) ? G.internal.getWidth(e) / 4 : G.internal.getHeight(e) / 4,
                            i = (r = Number((.9 * r).toFixed(5)), Number((2 * r).toFixed(5))),
                            o = Number((i * G.internal.Bezier_C).toFixed(5));
                        return n.push("0.749023 g"), n.push("q"), n.push("1 0 0 1 " + s(G.internal.getWidth(e) / 2) + " " + s(G.internal.getHeight(e) / 2) + " cm"), n.push(i + " 0 m"), n.push(i + " " + o + " " + o + " " + i + " 0 " + i + " c"), n.push("-" + o + " " + i + " -" + i + " " + o + " -" + i + " 0 c"), n.push("-" + i + " -" + o + " -" + o + " -" + i + " 0 -" + i + " c"), n.push(o + " -" + i + " " + i + " -" + o + " " + i + " 0 c"), n.push("f"), n.push("Q"), t.stream = n.join("\n"), t
                    }
                }, Cross: {
                    createAppearanceStream: function (e) {
                        var t = {D: {Off: G.RadioButton.Cross.OffPushDown}, N: {}};
                        return t.N[e] = G.RadioButton.Cross.YesNormal, t.D[e] = G.RadioButton.Cross.YesPushDown, t
                    }, getCA: function () {
                        return "8"
                    }, YesNormal: function (e) {
                        var t = l(e), n = [], r = G.internal.calculateCross(e);
                        return n.push("q"), n.push("1 1 " + A(G.internal.getWidth(e) - 2) + " " + A(G.internal.getHeight(e) - 2) + " re"), n.push("W"), n.push("n"), n.push(A(r.x1.x) + " " + A(r.x1.y) + " m"), n.push(A(r.x2.x) + " " + A(r.x2.y) + " l"), n.push(A(r.x4.x) + " " + A(r.x4.y) + " m"), n.push(A(r.x3.x) + " " + A(r.x3.y) + " l"), n.push("s"), n.push("Q"), t.stream = n.join("\n"), t
                    }, YesPushDown: function (e) {
                        var t = l(e), n = G.internal.calculateCross(e), r = [];
                        return r.push("0.749023 g"), r.push("0 0 " + A(G.internal.getWidth(e)) + " " + A(G.internal.getHeight(e)) + " re"), r.push("f"), r.push("q"), r.push("1 1 " + A(G.internal.getWidth(e) - 2) + " " + A(G.internal.getHeight(e) - 2) + " re"), r.push("W"), r.push("n"), r.push(A(n.x1.x) + " " + A(n.x1.y) + " m"), r.push(A(n.x2.x) + " " + A(n.x2.y) + " l"), r.push(A(n.x4.x) + " " + A(n.x4.y) + " m"), r.push(A(n.x3.x) + " " + A(n.x3.y) + " l"), r.push("s"), r.push("Q"), t.stream = r.join("\n"), t
                    }, OffPushDown: function (e) {
                        var t = l(e), n = [];
                        return n.push("0.749023 g"), n.push("0 0 " + A(G.internal.getWidth(e)) + " " + A(G.internal.getHeight(e)) + " re"), n.push("f"), t.stream = n.join("\n"), t
                    }
                }
            }, createDefaultAppearanceStream: function (e) {
                var t = L.internal.getFont(e.fontName, e.fontStyle).id, n = L.__private__.encodeColorString(e.color);
                return "/" + t + " " + e.fontSize + " Tf " + n
            }
        };
        G.internal = {
            Bezier_C: .551915024494, calculateCross: function (e) {
                var t = G.internal.getWidth(e), n = G.internal.getHeight(e), r = Math.min(t, n);
                return {
                    x1: {x: (t - r) / 2, y: (n - r) / 2 + r},
                    x2: {x: (t - r) / 2 + r, y: (n - r) / 2},
                    x3: {x: (t - r) / 2, y: (n - r) / 2},
                    x4: {x: (t - r) / 2 + r, y: (n - r) / 2 + r}
                }
            }
        }, G.internal.getWidth = function (e) {
            var t = 0;
            return "object" === rt(e) && (t = b(e.Rect[2])), t
        }, G.internal.getHeight = function (e) {
            var t = 0;
            return "object" === rt(e) && (t = b(e.Rect[3])), t
        };
        var K = e.addField = function (e) {
            if (d.call(this), !(e instanceof _)) throw new Error("Invalid argument passed to jsPDF.addField.");
            return function (e) {
                L.internal.acroformPlugin.printedOut && (L.internal.acroformPlugin.printedOut = !1, L.internal.acroformPlugin.acroFormDictionaryRoot = null), L.internal.acroformPlugin.acroFormDictionaryRoot || d.call(L), L.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e)
            }.call(this, e), e.page = L.internal.getCurrentPageInfo().pageNumber, this
        };
        e.addButton = function (e) {
            if (e instanceof H == 0) throw new Error("Invalid argument passed to jsPDF.addButton.");
            return K.call(this, e)
        }, e.addTextField = function (e) {
            if (e instanceof V == 0) throw new Error("Invalid argument passed to jsPDF.addTextField.");
            return K.call(this, e)
        }, e.addChoiceField = function (e) {
            if (e instanceof F == 0) throw new Error("Invalid argument passed to jsPDF.addChoiceField.");
            return K.call(this, e)
        }, "object" == rt(t) && void 0 === t.ChoiceField && void 0 === t.ListBox && void 0 === t.ComboBox && void 0 === t.EditBox && void 0 === t.Button && void 0 === t.PushButton && void 0 === t.RadioButton && void 0 === t.CheckBox && void 0 === t.TextField && void 0 === t.PasswordField && (t.ChoiceField = F, t.ListBox = R, t.ComboBox = D, t.EditBox = j, t.Button = H, t.PushButton = q, t.RadioButton = U, t.CheckBox = $, t.TextField = V, t.PasswordField = W, t.AcroForm = {Appearance: G}), e.AcroFormChoiceField = F, e.AcroFormListBox = R, e.AcroFormComboBox = D, e.AcroFormEditBox = j, e.AcroFormButton = H, e.AcroFormPushButton = q, e.AcroFormRadioButton = U, e.AcroFormCheckBox = $, e.AcroFormTextField = V, e.AcroFormPasswordField = W, e.AcroFormAppearance = G, e.AcroForm = {
            ChoiceField: F,
            ListBox: R,
            ComboBox: D,
            EditBox: j,
            Button: H,
            PushButton: q,
            RadioButton: U,
            CheckBox: $,
            TextField: V,
            PasswordField: W,
            Appearance: G
        }
    })((window.tmp = le).API, "undefined" != typeof window && window || "undefined" != typeof global && global), function (k) {
        function h(e) {
            for (var t = this.internal.newObject(), n = this.internal.write, r = this.internal.putStream, i = (0, this.internal.getFilters)(); -1 !== i.indexOf("FlateEncode");) i.splice(i.indexOf("FlateEncode"), 1);
            e.n = t;
            var o = [];
            if (o.push({key: "Type", value: "/XObject"}), o.push({
                key: "Subtype",
                value: "/Image"
            }), o.push({key: "Width", value: e.w}), o.push({
                key: "Height",
                value: e.h
            }), e.cs === this.color_spaces.INDEXED ? o.push({
                key: "ColorSpace",
                value: "[/Indexed /DeviceRGB " + (e.pal.length / 3 - 1) + " " + ("smask" in e ? t + 2 : t + 1) + " 0 R]"
            }) : (o.push({
                key: "ColorSpace",
                value: "/" + e.cs
            }), e.cs === this.color_spaces.DEVICE_CMYK && o.push({
                key: "Decode",
                value: "[1 0 1 0 1 0 1 0]"
            })), o.push({key: "BitsPerComponent", value: e.bpc}), "dp" in e && o.push({
                key: "DecodeParms",
                value: "<<" + e.dp + ">>"
            }), "trns" in e && e.trns.constructor == Array) {
                for (var a = "", s = 0, l = e.trns.length; s < l; s++) a += e.trns[s] + " " + e.trns[s] + " ";
                o.push({key: "Mask", value: "[" + a + "]"})
            }
            "smask" in e && o.push({key: "SMask", value: t + 1 + " 0 R"});
            var c = void 0 !== e.f ? ["/" + e.f] : void 0;
            if (r({data: e.data, additionalKeyValues: o, alreadyAppliedFilters: c}), n("endobj"), "smask" in e) {
                var d = "/Predictor " + e.p + " /Colors 1 /BitsPerComponent " + e.bpc + " /Columns " + e.w,
                    u = {w: e.w, h: e.h, cs: "DeviceGray", bpc: e.bpc, dp: d, data: e.smask};
                "f" in e && (u.f = e.f), h.call(this, u)
            }
            e.cs === this.color_spaces.INDEXED && (this.internal.newObject(), r({data: this.arrayBufferToBinaryString(new Uint8Array(e.pal))}), n("endobj"))
        }

        function x() {
            var e = this.internal.collections[I + "images"];
            for (var t in e) h.call(this, e[t])
        }

        function C() {
            var e, t = this.internal.collections[I + "images"], n = this.internal.write;
            for (var r in t) n("/I" + (e = t[r]).i, e.n, "0", "R")
        }

        function S(e) {
            return "function" == typeof k["process" + e.toUpperCase()]
        }

        function A(e) {
            return "object" === rt(e) && 1 === e.nodeType
        }

        function L(e, t) {
            if ("IMG" === e.nodeName && e.hasAttribute("src")) {
                var n = "" + e.getAttribute("src");
                if (0 === n.indexOf("data:image/")) return unescape(n);
                var r = k.loadFile(n);
                if (void 0 !== r) return btoa(r)
            }
            if ("CANVAS" === e.nodeName) {
                var i = e;
                return e.toDataURL("image/jpeg", 1)
            }
            (i = document.createElement("canvas")).width = e.clientWidth || e.width, i.height = e.clientHeight || e.height;
            var o = i.getContext("2d");
            if (!o) throw"addImage requires canvas to be supported by browser.";
            return o.drawImage(e, 0, 0, i.width, i.height), i.toDataURL("png" == ("" + t).toLowerCase() ? "image/png" : "image/jpeg")
        }

        function N(e, t) {
            var n;
            if (t) for (var r in t) if (e === t[r].alias) {
                n = t[r];
                break
            }
            return n
        }

        var I = "addImage_", l = {
            PNG: [[137, 80, 78, 71]],
            TIFF: [[77, 77, 0, 42], [73, 73, 42, 0]],
            JPEG: [[255, 216, 255, 224, void 0, void 0, 74, 70, 73, 70, 0], [255, 216, 255, 225, void 0, void 0, 69, 120, 105, 102, 0, 0]],
            JPEG2000: [[0, 0, 0, 12, 106, 80, 32, 32]],
            GIF87a: [[71, 73, 70, 56, 55, 97]],
            GIF89a: [[71, 73, 70, 56, 57, 97]],
            BMP: [[66, 77], [66, 65], [67, 73], [67, 80], [73, 67], [80, 84]]
        }, c = k.getImageFileTypeByImageData = function (e, t) {
            var n, r;
            t = t || "UNKNOWN";
            var i, o, a, s = "UNKNOWN";
            for (a in k.isArrayBufferView(e) && (e = k.arrayBufferToBinaryString(e)), l) for (i = l[a], n = 0; n < i.length; n += 1) {
                for (o = !0, r = 0; r < i[n].length; r += 1) if (void 0 !== i[n][r] && i[n][r] !== e.charCodeAt(r)) {
                    o = !1;
                    break
                }
                if (!0 === o) {
                    s = a;
                    break
                }
            }
            return "UNKNOWN" === s && "UNKNOWN" !== t && (s = t), s
        };
        k.color_spaces = {
            DEVICE_RGB: "DeviceRGB",
            DEVICE_GRAY: "DeviceGray",
            DEVICE_CMYK: "DeviceCMYK",
            CAL_GREY: "CalGray",
            CAL_RGB: "CalRGB",
            LAB: "Lab",
            ICC_BASED: "ICCBased",
            INDEXED: "Indexed",
            PATTERN: "Pattern",
            SEPARATION: "Separation",
            DEVICE_N: "DeviceN"
        }, k.decode = {
            DCT_DECODE: "DCTDecode",
            FLATE_DECODE: "FlateDecode",
            LZW_DECODE: "LZWDecode",
            JPX_DECODE: "JPXDecode",
            JBIG2_DECODE: "JBIG2Decode",
            ASCII85_DECODE: "ASCII85Decode",
            ASCII_HEX_DECODE: "ASCIIHexDecode",
            RUN_LENGTH_DECODE: "RunLengthDecode",
            CCITT_FAX_DECODE: "CCITTFaxDecode"
        }, k.image_compression = {
            NONE: "NONE",
            FAST: "FAST",
            MEDIUM: "MEDIUM",
            SLOW: "SLOW"
        }, k.sHashCode = function (e) {
            var t, n = 0;
            if (0 === (e = e || "").length) return n;
            for (t = 0; t < e.length; t++) n = (n << 5) - n + e.charCodeAt(t), n |= 0;
            return n
        }, k.isString = function (e) {
            return "string" == typeof e
        }, k.validateStringAsBase64 = function (e) {
            (e = e || "").toString().trim();
            var t = !0;
            return 0 === e.length && (t = !1), e.length % 4 != 0 && (t = !1), !1 === /^[A-Za-z0-9+\/]+$/.test(e.substr(0, e.length - 2)) && (t = !1), !1 === /^[A-Za-z0-9\/][A-Za-z0-9+\/]|[A-Za-z0-9+\/]=|==$/.test(e.substr(-2)) && (t = !1), t
        }, k.extractInfoFromBase64DataURI = function (e) {
            return /^data:([\w]+?\/([\w]+?));\S*;*base64,(.+)$/g.exec(e)
        }, k.extractImageFromDataUrl = function (e) {
            var t = (e = e || "").split("base64,"), n = null;
            if (2 === t.length) {
                var r = /^data:(\w*\/\w*);*(charset=[\w=-]*)*;*$/.exec(t[0]);
                Array.isArray(r) && (n = {mimeType: r[1], charset: r[2], data: t[1]})
            }
            return n
        }, k.supportsArrayBuffer = function () {
            return "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array
        }, k.isArrayBuffer = function (e) {
            return !!this.supportsArrayBuffer() && e instanceof ArrayBuffer
        }, k.isArrayBufferView = function (e) {
            return !!this.supportsArrayBuffer() && "undefined" != typeof Uint32Array && (e instanceof Int8Array || e instanceof Uint8Array || "undefined" != typeof Uint8ClampedArray && e instanceof Uint8ClampedArray || e instanceof Int16Array || e instanceof Uint16Array || e instanceof Int32Array || e instanceof Uint32Array || e instanceof Float32Array || e instanceof Float64Array)
        }, k.binaryStringToUint8Array = function (e) {
            for (var t = e.length, n = new Uint8Array(t), r = 0; r < t; r++) n[r] = e.charCodeAt(r);
            return n
        }, k.arrayBufferToBinaryString = function (e) {
            if ("function" == typeof atob) return atob(this.arrayBufferToBase64(e))
        }, k.arrayBufferToBase64 = function (e) {
            for (var t, n = "", r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", i = new Uint8Array(e), o = i.byteLength, a = o % 3, s = o - a, l = 0; l < s; l += 3) n += r[(16515072 & (t = i[l] << 16 | i[l + 1] << 8 | i[l + 2])) >> 18] + r[(258048 & t) >> 12] + r[(4032 & t) >> 6] + r[63 & t];
            return 1 == a ? n += r[(252 & (t = i[s])) >> 2] + r[(3 & t) << 4] + "==" : 2 == a && (n += r[(64512 & (t = i[s] << 8 | i[1 + s])) >> 10] + r[(1008 & t) >> 4] + r[(15 & t) << 2] + "="), n
        }, k.createImageInfo = function (e, t, n, r, i, o, a, s, l, c, d, u, h) {
            var f = {alias: s, w: t, h: n, cs: r, bpc: i, i: a, data: e};
            return o && (f.f = o), l && (f.dp = l), c && (f.trns = c), d && (f.pal = d), u && (f.smask = u), h && (f.p = h), f
        }, k.addImage = function (e, t, n, r, i, o, a, s, l) {
            var c = "";
            if ("string" != typeof t) {
                var d = o;
                o = i, i = r, r = n, n = t, t = d
            }
            if ("object" === rt(e) && !A(e) && "imageData" in e) {
                var u = e;
                e = u.imageData, t = u.format || t || "UNKNOWN", n = u.x || n || 0, r = u.y || r || 0, i = u.w || i, o = u.h || o, a = u.alias || a, s = u.compression || s, l = u.rotation || u.angle || l
            }
            var h = this.internal.getFilters();
            if (void 0 === s && -1 !== h.indexOf("FlateEncode") && (s = "SLOW"), "string" == typeof e && (e = unescape(e)), isNaN(n) || isNaN(r)) throw new Error("Invalid coordinates passed to jsPDF.addImage");
            var f, p, g, m, v, b, y, w = function () {
                var e = this.internal.collections[I + "images"];
                return e || (this.internal.collections[I + "images"] = e = {}, this.internal.events.subscribe("putResources", x), this.internal.events.subscribe("putXobjectDict", C)), e
            }.call(this);
            if (!((f = N(e, w)) || (A(e) && (e = L(e, t)), null != (y = a) && 0 !== y.length || (a = "string" == typeof (b = e) ? k.sHashCode(b) : k.isArrayBufferView(b) ? k.sHashCode(k.arrayBufferToBinaryString(b)) : null), f = N(a, w)))) {
                if (this.isString(e) && ("" !== (c = this.convertStringToImageData(e)) ? e = c : void 0 !== (c = k.loadFile(e)) && (e = c)), t = this.getImageFileTypeByImageData(e, t), !S(t)) throw new Error("addImage does not support files of type '" + t + "', please ensure that a plugin for '" + t + "' support is added.");
                if (this.supportsArrayBuffer() && (e instanceof Uint8Array || (p = e, e = this.binaryStringToUint8Array(e))), !(f = this["process" + t.toUpperCase()](e, (v = 0, (m = w) && (v = Object.keys ? Object.keys(m).length : function (e) {
                    var t = 0;
                    for (var n in e) e.hasOwnProperty(n) && t++;
                    return t
                }(m)), v), a, ((g = s) && "string" == typeof g && (g = g.toUpperCase()), g in k.image_compression ? g : k.image_compression.NONE), p))) throw new Error("An unknown error occurred whilst processing the image")
            }
            return function (e, t, n, r, i, o, a, s) {
                var l = function (e, t, n) {
                        return e || t || (t = e = -96), e < 0 && (e = -1 * n.w * 72 / e / this.internal.scaleFactor), t < 0 && (t = -1 * n.h * 72 / t / this.internal.scaleFactor), 0 === e && (e = t * n.w / n.h), 0 === t && (t = e * n.h / n.w), [e, t]
                    }.call(this, n, r, i), c = this.internal.getCoordinateString,
                    d = this.internal.getVerticalCoordinateString;
                if (n = l[0], r = l[1], a[o] = i, s) {
                    s *= Math.PI / 180;
                    var u = Math.cos(s), h = Math.sin(s), f = function (e) {
                        return e.toFixed(4)
                    }, p = [f(u), f(h), f(-1 * h), f(u), 0, 0, "cm"]
                }
                this.internal.write("q"), s ? (this.internal.write([1, "0", "0", 1, c(e), d(t + r), "cm"].join(" ")), this.internal.write(p.join(" ")), this.internal.write([c(n), "0", "0", c(r), "0", "0", "cm"].join(" "))) : this.internal.write([c(n), "0", "0", c(r), c(e), d(t + r), "cm"].join(" ")), this.internal.write("/I" + i.i + " Do"), this.internal.write("Q")
            }.call(this, n, r, i, o, f, f.i, w, l), this
        }, k.convertStringToImageData = function (e) {
            var t, n = "";
            if (this.isString(e)) {
                var r;
                t = null !== (r = this.extractImageFromDataUrl(e)) ? r.data : e;
                try {
                    n = atob(t)
                } catch (e) {
                    throw k.validateStringAsBase64(t) ? new Error("atob-Error in jsPDF.convertStringToImageData " + e.message) : new Error("Supplied Data is not a valid base64-String jsPDF.convertStringToImageData ")
                }
            }
            return n
        };

        function d(e, t) {
            return e.subarray(t, t + 5)
        }

        k.processJPEG = function (e, t, n, r, i, o) {
            var a, s = this.decode.DCT_DECODE;
            if (!this.isString(e) && !this.isArrayBuffer(e) && !this.isArrayBufferView(e)) return null;
            if (this.isString(e) && (a = function (e) {
                var t;
                if ("JPEG" !== c(e)) throw new Error("getJpegSize requires a binary string jpeg file");
                for (var n = 256 * e.charCodeAt(4) + e.charCodeAt(5), r = 4, i = e.length; r < i;) {
                    if (r += n, 255 !== e.charCodeAt(r)) throw new Error("getJpegSize could not find the size of the image");
                    if (192 === e.charCodeAt(r + 1) || 193 === e.charCodeAt(r + 1) || 194 === e.charCodeAt(r + 1) || 195 === e.charCodeAt(r + 1) || 196 === e.charCodeAt(r + 1) || 197 === e.charCodeAt(r + 1) || 198 === e.charCodeAt(r + 1) || 199 === e.charCodeAt(r + 1)) return t = 256 * e.charCodeAt(r + 5) + e.charCodeAt(r + 6), [256 * e.charCodeAt(r + 7) + e.charCodeAt(r + 8), t, e.charCodeAt(r + 9)];
                    r += 2, n = 256 * e.charCodeAt(r) + e.charCodeAt(r + 1)
                }
            }(e)), this.isArrayBuffer(e) && (e = new Uint8Array(e)), this.isArrayBufferView(e) && (a = function (e) {
                if (65496 != (e[0] << 8 | e[1])) throw new Error("Supplied data is not a JPEG");
                for (var t, n = e.length, r = (e[4] << 8) + e[5], i = 4; i < n;) {
                    if (r = ((t = d(e, i += r))[2] << 8) + t[3], (192 === t[1] || 194 === t[1]) && 255 === t[0] && 7 < r) return {
                        width: ((t = d(e, i + 5))[2] << 8) + t[3],
                        height: (t[0] << 8) + t[1],
                        numcomponents: t[4]
                    };
                    i += 2
                }
                throw new Error("getJpegSizeFromBytes could not find the size of the image")
            }(e), e = i || this.arrayBufferToBinaryString(e)), void 0 === o) switch (a.numcomponents) {
                case 1:
                    o = this.color_spaces.DEVICE_GRAY;
                    break;
                case 4:
                    o = this.color_spaces.DEVICE_CMYK;
                    break;
                default:
                case 3:
                    o = this.color_spaces.DEVICE_RGB
            }
            return this.createImageInfo(e, a.width, a.height, o, 8, s, t, n)
        }, k.processJPG = function () {
            return this.processJPEG.apply(this, arguments)
        }, k.getImageProperties = function (e) {
            var t, n, r = "";
            if (A(e) && (e = L(e)), this.isString(e) && ("" !== (r = this.convertStringToImageData(e)) ? e = r : void 0 !== (r = k.loadFile(e)) && (e = r)), n = this.getImageFileTypeByImageData(e), !S(n)) throw new Error("addImage does not support files of type '" + n + "', please ensure that a plugin for '" + n + "' support is added.");
            if (this.supportsArrayBuffer() && (e instanceof Uint8Array || (e = this.binaryStringToUint8Array(e))), !(t = this["process" + n.toUpperCase()](e))) throw new Error("An unknown error occurred whilst processing the image");
            return {
                fileType: n,
                width: t.w,
                height: t.h,
                colorSpace: t.cs,
                compressionMode: t.f,
                bitsPerComponent: t.bpc
            }
        }
    }(le.API), e = le.API, le.API.events.push(["addPage", function (e) {
        this.internal.getPageInfo(e.pageNumber).pageContext.annotations = []
    }]), e.events.push(["putPage", function (e) {
        for (var t = this.internal.getPageInfoByObjId(e.objId), n = e.pageContext.annotations, r = function (e) {
            if (void 0 !== e && "" != e) return !0
        }, i = !1, o = 0; o < n.length && !i; o++) switch ((l = n[o]).type) {
            case"link":
                if (r(l.options.url) || r(l.options.pageNumber)) {
                    i = !0;
                    break
                }
            case"reference":
            case"text":
            case"freetext":
                i = !0
        }
        if (0 != i) {
            this.internal.write("/Annots ["), this.internal.pageSize.height;
            var a = this.internal.getCoordinateString, s = this.internal.getVerticalCoordinateString;
            for (o = 0; o < n.length; o++) {
                var l;
                switch ((l = n[o]).type) {
                    case"reference":
                        this.internal.write(" " + l.object.objId + " 0 R ");
                        break;
                    case"text":
                        var c = this.internal.newAdditionalObject(), d = this.internal.newAdditionalObject(),
                            u = l.title || "Note";
                        m = "<</Type /Annot /Subtype /Text " + (f = "/Rect [" + a(l.bounds.x) + " " + s(l.bounds.y + l.bounds.h) + " " + a(l.bounds.x + l.bounds.w) + " " + s(l.bounds.y) + "] ") + "/Contents (" + l.contents + ")", m += " /Popup " + d.objId + " 0 R", m += " /P " + t.objId + " 0 R", m += " /T (" + u + ") >>", c.content = m;
                        var h = c.objId + " 0 R";
                        m = "<</Type /Annot /Subtype /Popup " + (f = "/Rect [" + a(l.bounds.x + 30) + " " + s(l.bounds.y + l.bounds.h) + " " + a(l.bounds.x + l.bounds.w + 30) + " " + s(l.bounds.y) + "] ") + " /Parent " + h, l.open && (m += " /Open true"), m += " >>", d.content = m, this.internal.write(c.objId, "0 R", d.objId, "0 R");
                        break;
                    case"freetext":
                        var f = "/Rect [" + a(l.bounds.x) + " " + s(l.bounds.y) + " " + a(l.bounds.x + l.bounds.w) + " " + s(l.bounds.y + l.bounds.h) + "] ",
                            p = l.color || "#000000";
                        m = "<</Type /Annot /Subtype /FreeText " + f + "/Contents (" + l.contents + ")", m += " /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#" + p + ")", m += " /Border [0 0 0]", m += " >>", this.internal.write(m);
                        break;
                    case"link":
                        if (l.options.name) {
                            var g = this.annotations._nameMap[l.options.name];
                            l.options.pageNumber = g.page, l.options.top = g.y
                        } else l.options.top || (l.options.top = 0);
                        f = "/Rect [" + a(l.x) + " " + s(l.y) + " " + a(l.x + l.w) + " " + s(l.y + l.h) + "] ";
                        var m = "";
                        if (l.options.url) m = "<</Type /Annot /Subtype /Link " + f + "/Border [0 0 0] /A <</S /URI /URI (" + l.options.url + ") >>"; else if (l.options.pageNumber) switch (m = "<</Type /Annot /Subtype /Link " + f + "/Border [0 0 0] /Dest [" + this.internal.getPageInfo(l.options.pageNumber).objId + " 0 R", l.options.magFactor = l.options.magFactor || "XYZ", l.options.magFactor) {
                            case"Fit":
                                m += " /Fit]";
                                break;
                            case"FitH":
                                m += " /FitH " + l.options.top + "]";
                                break;
                            case"FitV":
                                l.options.left = l.options.left || 0, m += " /FitV " + l.options.left + "]";
                                break;
                            case"XYZ":
                            default:
                                var v = s(l.options.top);
                                l.options.left = l.options.left || 0, void 0 === l.options.zoom && (l.options.zoom = 0), m += " /XYZ " + l.options.left + " " + v + " " + l.options.zoom + "]"
                        }
                        "" != m && (m += " >>", this.internal.write(m))
                }
            }
            this.internal.write("]")
        }
    }]), e.createAnnotation = function (e) {
        var t = this.internal.getCurrentPageInfo();
        switch (e.type) {
            case"link":
                this.link(e.bounds.x, e.bounds.y, e.bounds.w, e.bounds.h, e);
                break;
            case"text":
            case"freetext":
                t.pageContext.annotations.push(e)
        }
    }, e.link = function (e, t, n, r, i) {
        this.internal.getCurrentPageInfo().pageContext.annotations.push({
            x: e,
            y: t,
            w: n,
            h: r,
            options: i,
            type: "link"
        })
    }, e.textWithLink = function (e, t, n, r) {
        var i = this.getTextWidth(e), o = this.internal.getLineHeight() / this.internal.scaleFactor;
        return this.text(e, t, n), n += .2 * o, this.link(t, n - o, i, o, r), i
    }, e.getTextWidth = function (e) {
        var t = this.internal.getFontSize();
        return this.getStringUnitWidth(e) * t / this.internal.scaleFactor
    }, function (e) {
        var c = {
            1569: [65152],
            1570: [65153, 65154],
            1571: [65155, 65156],
            1572: [65157, 65158],
            1573: [65159, 65160],
            1574: [65161, 65162, 65163, 65164],
            1575: [65165, 65166],
            1576: [65167, 65168, 65169, 65170],
            1577: [65171, 65172],
            1578: [65173, 65174, 65175, 65176],
            1579: [65177, 65178, 65179, 65180],
            1580: [65181, 65182, 65183, 65184],
            1581: [65185, 65186, 65187, 65188],
            1582: [65189, 65190, 65191, 65192],
            1583: [65193, 65194],
            1584: [65195, 65196],
            1585: [65197, 65198],
            1586: [65199, 65200],
            1587: [65201, 65202, 65203, 65204],
            1588: [65205, 65206, 65207, 65208],
            1589: [65209, 65210, 65211, 65212],
            1590: [65213, 65214, 65215, 65216],
            1591: [65217, 65218, 65219, 65220],
            1592: [65221, 65222, 65223, 65224],
            1593: [65225, 65226, 65227, 65228],
            1594: [65229, 65230, 65231, 65232],
            1601: [65233, 65234, 65235, 65236],
            1602: [65237, 65238, 65239, 65240],
            1603: [65241, 65242, 65243, 65244],
            1604: [65245, 65246, 65247, 65248],
            1605: [65249, 65250, 65251, 65252],
            1606: [65253, 65254, 65255, 65256],
            1607: [65257, 65258, 65259, 65260],
            1608: [65261, 65262],
            1609: [65263, 65264, 64488, 64489],
            1610: [65265, 65266, 65267, 65268],
            1649: [64336, 64337],
            1655: [64477],
            1657: [64358, 64359, 64360, 64361],
            1658: [64350, 64351, 64352, 64353],
            1659: [64338, 64339, 64340, 64341],
            1662: [64342, 64343, 64344, 64345],
            1663: [64354, 64355, 64356, 64357],
            1664: [64346, 64347, 64348, 64349],
            1667: [64374, 64375, 64376, 64377],
            1668: [64370, 64371, 64372, 64373],
            1670: [64378, 64379, 64380, 64381],
            1671: [64382, 64383, 64384, 64385],
            1672: [64392, 64393],
            1676: [64388, 64389],
            1677: [64386, 64387],
            1678: [64390, 64391],
            1681: [64396, 64397],
            1688: [64394, 64395],
            1700: [64362, 64363, 64364, 64365],
            1702: [64366, 64367, 64368, 64369],
            1705: [64398, 64399, 64400, 64401],
            1709: [64467, 64468, 64469, 64470],
            1711: [64402, 64403, 64404, 64405],
            1713: [64410, 64411, 64412, 64413],
            1715: [64406, 64407, 64408, 64409],
            1722: [64414, 64415],
            1723: [64416, 64417, 64418, 64419],
            1726: [64426, 64427, 64428, 64429],
            1728: [64420, 64421],
            1729: [64422, 64423, 64424, 64425],
            1733: [64480, 64481],
            1734: [64473, 64474],
            1735: [64471, 64472],
            1736: [64475, 64476],
            1737: [64482, 64483],
            1739: [64478, 64479],
            1740: [64508, 64509, 64510, 64511],
            1744: [64484, 64485, 64486, 64487],
            1746: [64430, 64431],
            1747: [64432, 64433]
        }, a = {
            65247: {65154: 65269, 65156: 65271, 65160: 65273, 65166: 65275},
            65248: {65154: 65270, 65156: 65272, 65160: 65274, 65166: 65276},
            65165: {65247: {65248: {65258: 65010}}},
            1617: {1612: 64606, 1613: 64607, 1614: 64608, 1615: 64609, 1616: 64610}
        }, t = {1612: 64606, 1613: 64607, 1614: 64608, 1615: 64609, 1616: 64610}, n = [1570, 1571, 1573, 1575];
        e.__arabicParser__ = {};
        var r = e.__arabicParser__.isInArabicSubstitutionA = function (e) {
            return void 0 !== c[e.charCodeAt(0)]
        }, d = e.__arabicParser__.isArabicLetter = function (e) {
            return "string" == typeof e && /^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)
        }, i = e.__arabicParser__.isArabicEndLetter = function (e) {
            return d(e) && r(e) && c[e.charCodeAt(0)].length <= 2
        }, o = e.__arabicParser__.isArabicAlfLetter = function (e) {
            return d(e) && 0 <= n.indexOf(e.charCodeAt(0))
        }, s = (e.__arabicParser__.arabicLetterHasIsolatedForm = function (e) {
            return d(e) && r(e) && 1 <= c[e.charCodeAt(0)].length
        }, e.__arabicParser__.arabicLetterHasFinalForm = function (e) {
            return d(e) && r(e) && 2 <= c[e.charCodeAt(0)].length
        }), l = (e.__arabicParser__.arabicLetterHasInitialForm = function (e) {
            return d(e) && r(e) && 3 <= c[e.charCodeAt(0)].length
        }, e.__arabicParser__.arabicLetterHasMedialForm = function (e) {
            return d(e) && r(e) && 4 == c[e.charCodeAt(0)].length
        }), u = e.__arabicParser__.resolveLigatures = function (e) {
            var t = 0, n = a, r = 0, i = "", o = 0;
            for (t = 0; t < e.length; t += 1) void 0 !== n[e.charCodeAt(t)] ? (o++, "number" == typeof (n = n[e.charCodeAt(t)]) && (r = -1 !== (r = h(e.charAt(t), e.charAt(t - o), e.charAt(t + 1))) ? r : 0, i += String.fromCharCode(n), n = a, o = 0), t === e.length - 1 && (n = a, i += e.charAt(t - (o - 1)), t -= o - 1, o = 0)) : (n = a, i += e.charAt(t - o), t -= o, o = 0);
            return i
        }, h = (e.__arabicParser__.isArabicDiacritic = function (e) {
            return void 0 !== e && void 0 !== t[e.charCodeAt(0)]
        }, e.__arabicParser__.getCorrectForm = function (e, t, n) {
            return d(e) ? !1 === r(e) ? -1 : !s(e) || !d(t) && !d(n) || !d(n) && i(t) || i(e) && !d(t) || i(e) && o(t) || i(e) && i(t) ? 0 : l(e) && d(t) && !i(t) && d(n) && s(n) ? 3 : i(e) || !d(n) ? 1 : 2 : -1
        }), f = e.__arabicParser__.processArabic = e.processArabic = function (e) {
            var t = 0, n = 0, r = 0, i = "", o = "", a = "", s = (e = e || "").split("\\s+"), l = [];
            for (t = 0; t < s.length; t += 1) {
                for (l.push(""), n = 0; n < s[t].length; n += 1) i = s[t][n], o = s[t][n - 1], a = s[t][n + 1], d(i) ? (r = h(i, o, a), l[t] += -1 !== r ? String.fromCharCode(c[i.charCodeAt(0)][r]) : i) : l[t] += i;
                l[t] = u(l[t])
            }
            return l.join(" ")
        };
        e.events.push(["preProcessText", function (e) {
            var t = e.text, n = (e.x, e.y, e.options || {}), r = (e.mutex, n.lang, []);
            if ("[object Array]" === Object.prototype.toString.call(t)) {
                var i = 0;
                for (r = [], i = 0; i < t.length; i += 1) "[object Array]" === Object.prototype.toString.call(t[i]) ? r.push([f(t[i][0]), t[i][1], t[i][2]]) : r.push([f(t[i])]);
                e.text = r
            } else e.text = f(t)
        }])
    }(le.API), le.API.autoPrint = function (e) {
        var t;
        switch ((e = e || {}).variant = e.variant || "non-conform", e.variant) {
            case"javascript":
                this.addJS("print({});");
                break;
            case"non-conform":
            default:
                this.internal.events.subscribe("postPutResources", function () {
                    t = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/S /Named"), this.internal.out("/Type /Action"), this.internal.out("/N /Print"), this.internal.out(">>"), this.internal.out("endobj")
                }), this.internal.events.subscribe("putCatalog", function () {
                    this.internal.out("/OpenAction " + t + " 0 R")
                })
        }
        return this
    }, t = le.API, (n = function () {
        var t = void 0;
        Object.defineProperty(this, "pdf", {
            get: function () {
                return t
            }, set: function (e) {
                t = e
            }
        });
        var n = 150;
        Object.defineProperty(this, "width", {
            get: function () {
                return n
            }, set: function (e) {
                n = isNaN(e) || !1 === Number.isInteger(e) || e < 0 ? 150 : e, this.getContext("2d").pageWrapXEnabled && (this.getContext("2d").pageWrapX = n + 1)
            }
        });
        var r = 300;
        Object.defineProperty(this, "height", {
            get: function () {
                return r
            }, set: function (e) {
                r = isNaN(e) || !1 === Number.isInteger(e) || e < 0 ? 300 : e, this.getContext("2d").pageWrapYEnabled && (this.getContext("2d").pageWrapY = r + 1)
            }
        });
        var i = [];
        Object.defineProperty(this, "childNodes", {
            get: function () {
                return i
            }, set: function (e) {
                i = e
            }
        });
        var o = {};
        Object.defineProperty(this, "style", {
            get: function () {
                return o
            }, set: function (e) {
                o = e
            }
        }), Object.defineProperty(this, "parentNode", {
            get: function () {
                return !1
            }
        })
    }).prototype.getContext = function (e, t) {
        var n;
        if ("2d" !== (e = e || "2d")) return null;
        for (n in t) this.pdf.context2d.hasOwnProperty(n) && (this.pdf.context2d[n] = t[n]);
        return (this.pdf.context2d._canvas = this).pdf.context2d
    }, n.prototype.toDataURL = function () {
        throw new Error("toDataURL is not implemented.")
    }, t.events.push(["initialized", function () {
        this.canvas = new n, this.canvas.pdf = this
    }]), L = le.API, N = {x: void 0, y: void 0, w: void 0, h: void 0, ln: void 0}, I = 1, f = function (e, t, n, r, i) {
        N = {x: e, y: t, w: n, h: r, ln: i}
    }, p = function () {
        return N
    }, E = {left: 0, top: 0, bottom: 0}, L.setHeaderFunction = function (e) {
        l = e
    }, L.getTextDimensions = function (e, t) {
        var n = this.table_font_size || this.internal.getFontSize(),
            r = (this.internal.getFont().fontStyle, (t = t || {}).scaleFactor || this.internal.scaleFactor), i = 0,
            o = 0, a = 0;
        if ("string" == typeof e) 0 != (i = this.getStringUnitWidth(e) * n) && (o = 1); else {
            if ("[object Array]" !== Object.prototype.toString.call(e)) throw new Error("getTextDimensions expects text-parameter to be of type String or an Array of Strings.");
            for (var s = 0; s < e.length; s++) i < (a = this.getStringUnitWidth(e[s]) * n) && (i = a);
            0 !== i && (o = e.length)
        }
        return {
            w: i /= r,
            h: Math.max((o * n * this.getLineHeightFactor() - n * (this.getLineHeightFactor() - 1)) / r, 0)
        }
    }, L.cellAddPage = function () {
        var e = this.margins || E;
        this.addPage(), f(e.left, e.top, void 0, void 0), I += 1
    }, L.cellInitialize = function () {
        N = {x: void 0, y: void 0, w: void 0, h: void 0, ln: void 0}, I = 1
    }, L.cell = function (e, t, n, r, i, o, a) {
        var s = p(), l = !1;
        if (void 0 !== s.ln) if (s.ln === o) e = s.x + s.w, t = s.y; else {
            var c = this.margins || E;
            s.y + s.h + r + 13 >= this.internal.pageSize.getHeight() - c.bottom && (this.cellAddPage(), l = !0, this.printHeaders && this.tableHeaderRow && this.printHeaderRow(o, !0)), t = p().y + p().h, l && (t = 23)
        }
        if (void 0 !== i[0]) if (this.printingHeaderRow ? this.rect(e, t, n, r, "FD") : this.rect(e, t, n, r), "right" === a) {
            i instanceof Array || (i = [i]);
            for (var d = 0; d < i.length; d++) {
                var u = i[d], h = this.getStringUnitWidth(u) * this.internal.getFontSize() / this.internal.scaleFactor;
                this.text(u, e + n - h - 3, t + this.internal.getLineHeight() * (d + 1))
            }
        } else this.text(i, e + 3, t + this.internal.getLineHeight());
        return f(e, t, n, r, o), this
    }, L.arrayMax = function (e, t) {
        var n, r, i, o = e[0];
        for (n = 0, r = e.length; n < r; n += 1) i = e[n], t ? -1 === t(o, i) && (o = i) : o < i && (o = i);
        return o
    }, L.table = function (e, t, n, r, i) {
        if (!n) throw"No data for PDF table";
        var o, a, s, l, c, d, u, h, f, p, g = [], m = [], v = {}, b = {}, y = [], w = [], k = !1, x = !0, C = 12, S = E;
        if (S.width = this.internal.pageSize.getWidth(), i && (!0 === i.autoSize && (k = !0), !1 === i.printHeaders && (x = !1), i.fontSize && (C = i.fontSize), i.css && void 0 !== i.css["font-size"] && (C = 16 * i.css["font-size"]), i.margins && (S = i.margins)), this.lnMod = 0, N = {
            x: void 0,
            y: void 0,
            w: void 0,
            h: void 0,
            ln: void 0
        }, I = 1, this.printHeaders = x, this.margins = S, this.setFontSize(C), this.table_font_size = C, null == r) g = Object.keys(n[0]); else if (r[0] && "string" != typeof r[0]) for (a = 0, s = r.length; a < s; a += 1) o = r[a], g.push(o.name), m.push(o.prompt), b[o.name] = o.width * (19.049976 / 25.4); else g = r;
        if (k) for (p = function (e) {
            return e[o]
        }, a = 0, s = g.length; a < s; a += 1) {
            for (v[o = g[a]] = n.map(p), y.push(this.getTextDimensions(m[a] || o, {scaleFactor: 1}).w), u = 0, l = (d = v[o]).length; u < l; u += 1) c = d[u], y.push(this.getTextDimensions(c, {scaleFactor: 1}).w);
            b[o] = L.arrayMax(y), y = []
        }
        if (x) {
            var A = this.calculateLineHeight(g, b, m.length ? m : g);
            for (a = 0, s = g.length; a < s; a += 1) o = g[a], w.push([e, t, b[o], A, String(m.length ? m[a] : o)]);
            this.setTableHeaderRow(w), this.printHeaderRow(1, !1)
        }
        for (a = 0, s = n.length; a < s; a += 1) for (h = n[a], A = this.calculateLineHeight(g, b, h), u = 0, f = g.length; u < f; u += 1) o = g[u], this.cell(e, t, b[o], A, h[o], a + 2, o.align);
        return this.lastCellPos = N, this.table_x = e, this.table_y = t, this
    }, L.calculateLineHeight = function (e, t, n) {
        for (var r, i = 0, o = 0; o < e.length; o++) {
            n[r = e[o]] = this.splitTextToSize(String(n[r]), t[r] - 3);
            var a = this.internal.getLineHeight() * n[r].length + 3;
            i < a && (i = a)
        }
        return i
    }, L.setTableHeaderRow = function (e) {
        this.tableHeaderRow = e
    }, L.printHeaderRow = function (e, t) {
        if (!this.tableHeaderRow) throw"Property tableHeaderRow does not exist.";
        var n, r, i, o;
        if (this.printingHeaderRow = !0, void 0 !== l) {
            var a = l(this, I);
            f(a[0], a[1], a[2], a[3], -1)
        }
        this.setFontStyle("bold");
        var s = [];
        for (i = 0, o = this.tableHeaderRow.length; i < o; i += 1) this.setFillColor(200, 200, 200), n = this.tableHeaderRow[i], t && (this.margins.top = 13, n[1] = this.margins && this.margins.top || 0, s.push(n)), r = [].concat(n), this.cell.apply(this, r.concat(e));
        0 < s.length && this.setTableHeaderRow(s), this.setFontStyle("normal"), this.printingHeaderRow = !1
    }, function (e) {
        function d(e) {
            return e = e || {}, this.isStrokeTransparent = e.isStrokeTransparent || !1, this.strokeOpacity = e.strokeOpacity || 1, this.strokeStyle = e.strokeStyle || "#000000", this.fillStyle = e.fillStyle || "#000000", this.isFillTransparent = e.isFillTransparent || !1, this.fillOpacity = e.fillOpacity || 1, this.font = e.font || "10px sans-serif", this.textBaseline = e.textBaseline || "alphabetic", this.textAlign = e.textAlign || "left", this.lineWidth = e.lineWidth || 1, this.lineJoin = e.lineJoin || "miter", this.lineCap = e.lineCap || "butt", this.path = e.path || [], this.transform = void 0 !== e.transform ? e.transform.clone() : new _, this.globalCompositeOperation = e.globalCompositeOperation || "normal", this.globalAlpha = e.globalAlpha || 1, this.clip_path = e.clip_path || [], this.currentPoint = e.currentPoint || new P, this.miterLimit = e.miterLimit || 10, this.lastPoint = e.lastPoint || new P, this.ignoreClearRect = "boolean" != typeof e.ignoreClearRect || e.ignoreClearRect, this
        }

        var l, i, o, c, u;
        e.events.push(["initialized", function () {
            this.context2d = new t(this), l = this.internal.f2, this.internal.f3, i = this.internal.getCoordinateString, o = this.internal.getVerticalCoordinateString, c = this.internal.getHorizontalCoordinate, u = this.internal.getVerticalCoordinate
        }]);
        var t = function (e) {
            Object.defineProperty(this, "canvas", {
                get: function () {
                    return {parentNode: !1, style: !1}
                }
            }), Object.defineProperty(this, "pdf", {
                get: function () {
                    return e
                }
            });
            var t = !1;
            Object.defineProperty(this, "pageWrapXEnabled", {
                get: function () {
                    return t
                }, set: function (e) {
                    t = Boolean(e)
                }
            });
            var n = !1;
            Object.defineProperty(this, "pageWrapYEnabled", {
                get: function () {
                    return n
                }, set: function (e) {
                    n = Boolean(e)
                }
            });
            var r = 0;
            Object.defineProperty(this, "posX", {
                get: function () {
                    return r
                }, set: function (e) {
                    isNaN(e) || (r = e)
                }
            });
            var i = 0;
            Object.defineProperty(this, "posY", {
                get: function () {
                    return i
                }, set: function (e) {
                    isNaN(e) || (i = e)
                }
            });
            var o = !1;
            Object.defineProperty(this, "autoPaging", {
                get: function () {
                    return o
                }, set: function (e) {
                    o = Boolean(e)
                }
            });
            var a = 0;
            Object.defineProperty(this, "lastBreak", {
                get: function () {
                    return a
                }, set: function (e) {
                    a = e
                }
            });
            var s = [];
            Object.defineProperty(this, "pageBreaks", {
                get: function () {
                    return s
                }, set: function (e) {
                    s = e
                }
            });
            var l = new d;
            Object.defineProperty(this, "ctx", {
                get: function () {
                    return l
                }, set: function (e) {
                    e instanceof d && (l = e)
                }
            }), Object.defineProperty(this, "path", {
                get: function () {
                    return l.path
                }, set: function (e) {
                    l.path = e
                }
            });
            var c = [];
            Object.defineProperty(this, "ctxStack", {
                get: function () {
                    return c
                }, set: function (e) {
                    c = e
                }
            }), Object.defineProperty(this, "fillStyle", {
                get: function () {
                    return this.ctx.fillStyle
                }, set: function (e) {
                    var t;
                    t = h(e), this.ctx.fillStyle = t.style, this.ctx.isFillTransparent = 0 === t.a, this.ctx.fillOpacity = t.a, this.pdf.setFillColor(t.r, t.g, t.b, {a: t.a}), this.pdf.setTextColor(t.r, t.g, t.b, {a: t.a})
                }
            }), Object.defineProperty(this, "strokeStyle", {
                get: function () {
                    return this.ctx.strokeStyle
                }, set: function (e) {
                    var t = h(e);
                    this.ctx.strokeStyle = t.style, this.ctx.isStrokeTransparent = 0 === t.a, this.ctx.strokeOpacity = t.a, 0 === t.a ? this.pdf.setDrawColor(255, 255, 255) : (t.a, this.pdf.setDrawColor(t.r, t.g, t.b))
                }
            }), Object.defineProperty(this, "lineCap", {
                get: function () {
                    return this.ctx.lineCap
                }, set: function (e) {
                    -1 !== ["butt", "round", "square"].indexOf(e) && (this.ctx.lineCap = e, this.pdf.setLineCap(e))
                }
            }), Object.defineProperty(this, "lineWidth", {
                get: function () {
                    return this.ctx.lineWidth
                }, set: function (e) {
                    isNaN(e) || (this.ctx.lineWidth = e, this.pdf.setLineWidth(e))
                }
            }), Object.defineProperty(this, "lineJoin", {
                get: function () {
                    return this.ctx.lineJoin
                }, set: function (e) {
                    -1 !== ["bevel", "round", "miter"].indexOf(e) && (this.ctx.lineJoin = e, this.pdf.setLineJoin(e))
                }
            }), Object.defineProperty(this, "miterLimit", {
                get: function () {
                    return this.ctx.miterLimit
                }, set: function (e) {
                    isNaN(e) || (this.ctx.miterLimit = e, this.pdf.setMiterLimit(e))
                }
            }), Object.defineProperty(this, "textBaseline", {
                get: function () {
                    return this.ctx.textBaseline
                }, set: function (e) {
                    this.ctx.textBaseline = e
                }
            }), Object.defineProperty(this, "textAlign", {
                get: function () {
                    return this.ctx.textAlign
                }, set: function (e) {
                    -1 !== ["right", "end", "center", "left", "start"].indexOf(e) && (this.ctx.textAlign = e)
                }
            }), Object.defineProperty(this, "font", {
                get: function () {
                    return this.ctx.font
                }, set: function (e) {
                    var t;
                    if (this.ctx.font = e, null !== (t = /^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))) {
                        var n = t[1], r = (t[2], t[3]), i = t[4], o = t[5], a = t[6];
                        i = "px" === o ? Math.floor(parseFloat(i)) : "em" === o ? Math.floor(parseFloat(i) * this.pdf.getFontSize()) : Math.floor(parseFloat(i)), this.pdf.setFontSize(i);
                        var s = "";
                        ("bold" === r || 700 <= parseInt(r, 10) || "bold" === n) && (s = "bold"), "italic" === n && (s += "italic"), 0 === s.length && (s = "normal");
                        for (var l = "", c = a.toLowerCase().replace(/"|'/g, "").split(/\s*,\s*/), d = {
                            arial: "Helvetica",
                            verdana: "Helvetica",
                            helvetica: "Helvetica",
                            "sans-serif": "Helvetica",
                            fixed: "Courier",
                            monospace: "Courier",
                            terminal: "Courier",
                            courier: "Courier",
                            times: "Times",
                            cursive: "Times",
                            fantasy: "Times",
                            serif: "Times"
                        }, u = 0; u < c.length; u++) {
                            if (void 0 !== this.pdf.internal.getFont(c[u], s, {noFallback: !0, disableWarning: !0})) {
                                l = c[u];
                                break
                            }
                            if ("bolditalic" === s && void 0 !== this.pdf.internal.getFont(c[u], "bold", {
                                noFallback: !0,
                                disableWarning: !0
                            })) l = c[u], s = "bold"; else if (void 0 !== this.pdf.internal.getFont(c[u], "normal", {
                                noFallback: !0,
                                disableWarning: !0
                            })) {
                                l = c[u], s = "normal";
                                break
                            }
                        }
                        if ("" === l) for (u = 0; u < c.length; u++) if (d[c[u]]) {
                            l = d[c[u]];
                            break
                        }
                        l = "" === l ? "Times" : l, this.pdf.setFont(l, s)
                    }
                }
            }), Object.defineProperty(this, "globalCompositeOperation", {
                get: function () {
                    return this.ctx.globalCompositeOperation
                }, set: function (e) {
                    this.ctx.globalCompositeOperation = e
                }
            }), Object.defineProperty(this, "globalAlpha", {
                get: function () {
                    return this.ctx.globalAlpha
                }, set: function (e) {
                    this.ctx.globalAlpha = e
                }
            }), Object.defineProperty(this, "ignoreClearRect", {
                get: function () {
                    return this.ctx.ignoreClearRect
                }, set: function (e) {
                    this.ctx.ignoreClearRect = Boolean(e)
                }
            })
        };
        t.prototype.fill = function () {
            n.call(this, "fill", !1)
        }, t.prototype.stroke = function () {
            n.call(this, "stroke", !1)
        }, t.prototype.beginPath = function () {
            this.path = [{type: "begin"}]
        }, t.prototype.moveTo = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.context2d.moveTo");
            var n = this.ctx.transform.applyToPoint(new P(e, t));
            this.path.push({type: "mt", x: n.x, y: n.y}), this.ctx.lastPoint = new P(e, t)
        }, t.prototype.closePath = function () {
            var e = new P(0, 0), t = 0;
            for (t = this.path.length - 1; -1 !== t; t--) if ("begin" === this.path[t].type && "object" === rt(this.path[t + 1]) && "number" == typeof this.path[t + 1].x) {
                e = new P(this.path[t + 1].x, this.path[t + 1].y), this.path.push({type: "lt", x: e.x, y: e.y});
                break
            }
            "object" === rt(this.path[t + 2]) && "number" == typeof this.path[t + 2].x && this.path.push(JSON.parse(JSON.stringify(this.path[t + 2]))), this.path.push({type: "close"}), this.ctx.lastPoint = new P(e.x, e.y)
        }, t.prototype.lineTo = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.context2d.lineTo");
            var n = this.ctx.transform.applyToPoint(new P(e, t));
            this.path.push({type: "lt", x: n.x, y: n.y}), this.ctx.lastPoint = new P(n.x, n.y)
        }, t.prototype.clip = function () {
            this.ctx.clip_path = JSON.parse(JSON.stringify(this.path)), n.call(this, null, !0)
        }, t.prototype.quadraticCurveTo = function (e, t, n, r) {
            if (isNaN(n) || isNaN(r) || isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");
            var i = this.ctx.transform.applyToPoint(new P(n, r)), o = this.ctx.transform.applyToPoint(new P(e, t));
            this.path.push({type: "qct", x1: o.x, y1: o.y, x: i.x, y: i.y}), this.ctx.lastPoint = new P(i.x, i.y)
        }, t.prototype.bezierCurveTo = function (e, t, n, r, i, o) {
            if (isNaN(i) || isNaN(o) || isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r)) throw new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");
            var a = this.ctx.transform.applyToPoint(new P(i, o)), s = this.ctx.transform.applyToPoint(new P(e, t)),
                l = this.ctx.transform.applyToPoint(new P(n, r));
            this.path.push({
                type: "bct",
                x1: s.x,
                y1: s.y,
                x2: l.x,
                y2: l.y,
                x: a.x,
                y: a.y
            }), this.ctx.lastPoint = new P(a.x, a.y)
        }, t.prototype.arc = function (e, t, n, r, i, o) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r) || isNaN(i)) throw new Error("Invalid arguments passed to jsPDF.context2d.arc");
            if (o = Boolean(o), !this.ctx.transform.isIdentity) {
                var a = this.ctx.transform.applyToPoint(new P(e, t));
                e = a.x, t = a.y;
                var s = this.ctx.transform.applyToPoint(new P(0, n)), l = this.ctx.transform.applyToPoint(new P(0, 0));
                n = Math.sqrt(Math.pow(s.x - l.x, 2) + Math.pow(s.y - l.y, 2))
            }
            Math.abs(i - r) >= 2 * Math.PI && (r = 0, i = 2 * Math.PI), this.path.push({
                type: "arc",
                x: e,
                y: t,
                radius: n,
                startAngle: r,
                endAngle: i,
                counterclockwise: o
            })
        }, t.prototype.arcTo = function (e, t, n, r, i) {
            throw new Error("arcTo not implemented.")
        }, t.prototype.rect = function (e, t, n, r) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r)) throw new Error("Invalid arguments passed to jsPDF.context2d.rect");
            this.moveTo(e, t), this.lineTo(e + n, t), this.lineTo(e + n, t + r), this.lineTo(e, t + r), this.lineTo(e, t), this.lineTo(e + n, t), this.lineTo(e, t)
        }, t.prototype.fillRect = function (e, t, n, r) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r)) throw new Error("Invalid arguments passed to jsPDF.context2d.fillRect");
            if (!x.call(this)) {
                var i = {};
                "butt" !== this.lineCap && (i.lineCap = this.lineCap, this.lineCap = "butt"), "miter" !== this.lineJoin && (i.lineJoin = this.lineJoin, this.lineJoin = "miter"), this.beginPath(), this.rect(e, t, n, r), this.fill(), i.hasOwnProperty("lineCap") && (this.lineCap = i.lineCap), i.hasOwnProperty("lineJoin") && (this.lineJoin = i.lineJoin)
            }
        }, t.prototype.strokeRect = function (e, t, n, r) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r)) throw new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");
            C.call(this) || (this.beginPath(), this.rect(e, t, n, r), this.stroke())
        }, t.prototype.clearRect = function (e, t, n, r) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r)) throw new Error("Invalid arguments passed to jsPDF.context2d.clearRect");
            this.ignoreClearRect || (this.fillStyle = "#ffffff", this.fillRect(e, t, n, r))
        }, t.prototype.save = function (e) {
            e = "boolean" != typeof e || e;
            for (var t = this.pdf.internal.getCurrentPageInfo().pageNumber, n = 0; n < this.pdf.internal.getNumberOfPages(); n++) this.pdf.setPage(n + 1), this.pdf.internal.out("q");
            if (this.pdf.setPage(t), e) {
                this.ctx.fontSize = this.pdf.internal.getFontSize();
                var r = new d(this.ctx);
                this.ctxStack.push(this.ctx), this.ctx = r
            }
        }, t.prototype.restore = function (e) {
            e = "boolean" != typeof e || e;
            for (var t = this.pdf.internal.getCurrentPageInfo().pageNumber, n = 0; n < this.pdf.internal.getNumberOfPages(); n++) this.pdf.setPage(n + 1), this.pdf.internal.out("Q");
            this.pdf.setPage(t), e && 0 !== this.ctxStack.length && (this.ctx = this.ctxStack.pop(), this.fillStyle = this.ctx.fillStyle, this.strokeStyle = this.ctx.strokeStyle, this.font = this.ctx.font, this.lineCap = this.ctx.lineCap, this.lineWidth = this.ctx.lineWidth, this.lineJoin = this.ctx.lineJoin)
        }, t.prototype.toDataURL = function () {
            throw new Error("toDataUrl not implemented.")
        };
        var h = function (e) {
            var t, n, r, i;
            if (!0 === e.isCanvasGradient && (e = e.getColor()), !e) return {r: 0, g: 0, b: 0, a: 0, style: e};
            if (/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e)) i = r = n = t = 0; else {
                var o = /rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);
                if (null !== o) t = parseInt(o[1]), n = parseInt(o[2]), r = parseInt(o[3]), i = 1; else if (null !== (o = /rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/.exec(e))) t = parseInt(o[1]), n = parseInt(o[2]), r = parseInt(o[3]), i = parseFloat(o[4]); else {
                    if (i = 1, "string" == typeof e && "#" !== e.charAt(0)) {
                        var a = new RGBColor(e);
                        e = a.ok ? a.toHex() : "#000000"
                    }
                    4 === e.length ? (t = e.substring(1, 2), t += t, n = e.substring(2, 3), n += n, r = e.substring(3, 4), r += r) : (t = e.substring(1, 3), n = e.substring(3, 5), r = e.substring(5, 7)), t = parseInt(t, 16), n = parseInt(n, 16), r = parseInt(r, 16)
                }
            }
            return {r: t, g: n, b: r, a: i, style: e}
        }, x = function () {
            return this.ctx.isFillTransparent || 0 == this.globalAlpha
        }, C = function () {
            return Boolean(this.ctx.isStrokeTransparent || 0 == this.globalAlpha)
        };
        t.prototype.fillText = function (e, t, n, r) {
            if (isNaN(t) || isNaN(n) || "string" != typeof e) throw new Error("Invalid arguments passed to jsPDF.context2d.fillText");
            if (r = isNaN(r) ? void 0 : r, !x.call(this)) {
                n = a.call(this, n);
                var i = O(this.ctx.transform.rotation), o = this.ctx.transform.scaleX;
                s.call(this, {text: e, x: t, y: n, scale: o, angle: i, align: this.textAlign, maxWidth: r})
            }
        }, t.prototype.strokeText = function (e, t, n, r) {
            if (isNaN(t) || isNaN(n) || "string" != typeof e) throw new Error("Invalid arguments passed to jsPDF.context2d.strokeText");
            if (!C.call(this)) {
                r = isNaN(r) ? void 0 : r, n = a.call(this, n);
                var i = O(this.ctx.transform.rotation), o = this.ctx.transform.scaleX;
                s.call(this, {
                    text: e,
                    x: t,
                    y: n,
                    scale: o,
                    renderingMode: "stroke",
                    angle: i,
                    align: this.textAlign,
                    maxWidth: r
                })
            }
        }, t.prototype.measureText = function (e) {
            if ("string" != typeof e) throw new Error("Invalid arguments passed to jsPDF.context2d.measureText");
            var t = this.pdf, n = this.pdf.internal.scaleFactor, r = t.internal.getFontSize(),
                i = t.getStringUnitWidth(e) * r / t.internal.scaleFactor;
            return new function (e) {
                var t = (e = e || {}).width || 0;
                return Object.defineProperty(this, "width", {
                    get: function () {
                        return t
                    }
                }), this
            }({width: i *= Math.round(96 * n / 72 * 1e4) / 1e4})
        }, t.prototype.scale = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.context2d.scale");
            var n = new _(e, 0, 0, t, 0, 0);
            this.ctx.transform = this.ctx.transform.multiply(n)
        }, t.prototype.rotate = function (e) {
            if (isNaN(e)) throw new Error("Invalid arguments passed to jsPDF.context2d.rotate");
            var t = new _(Math.cos(e), Math.sin(e), -Math.sin(e), Math.cos(e), 0, 0);
            this.ctx.transform = this.ctx.transform.multiply(t)
        }, t.prototype.translate = function (e, t) {
            if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.context2d.translate");
            var n = new _(1, 0, 0, 1, e, t);
            this.ctx.transform = this.ctx.transform.multiply(n)
        }, t.prototype.transform = function (e, t, n, r, i, o) {
            if (isNaN(e) || isNaN(t) || isNaN(n) || isNaN(r) || isNaN(i) || isNaN(o)) throw new Error("Invalid arguments passed to jsPDF.context2d.transform");
            var a = new _(e, t, n, r, i, o);
            this.ctx.transform = this.ctx.transform.multiply(a)
        }, t.prototype.setTransform = function (e, t, n, r, i, o) {
            e = isNaN(e) ? 1 : e, t = isNaN(t) ? 0 : t, n = isNaN(n) ? 0 : n, r = isNaN(r) ? 1 : r, i = isNaN(i) ? 0 : i, o = isNaN(o) ? 0 : o, this.ctx.transform = new _(e, t, n, r, i, o)
        }, t.prototype.drawImage = function (e, t, n, r, i, o, a, s, l) {
            var c = this.pdf.getImageProperties(e), d = 1, u = 1, h = 1, f = 1;
            void 0 !== r && void 0 !== s && (h = s / r, f = l / i, d = c.width / r * s / r, u = c.height / i * l / i), void 0 === o && (o = t, a = n, n = t = 0), void 0 !== r && void 0 === s && (s = r, l = i), void 0 === r && void 0 === s && (s = c.width, l = c.height);
            var p = this.ctx.transform.decompose(), g = O(p.rotate.shx);
            p.scale.sx, p.scale.sy;
            for (var m, v = new _, b = ((v = (v = (v = v.multiply(p.translate)).multiply(p.skew)).multiply(p.scale)).applyToPoint(new P(s, l)), v.applyToRectangle(new M(o - t * h, a - n * f, r * d, i * u))), y = N.call(this, b), w = [], k = 0; k < y.length; k += 1) -1 === w.indexOf(y[k]) && w.push(y[k]);
            if (w.sort(), this.autoPaging) for (var x = w[0], C = w[w.length - 1], S = x; S < C + 1; S++) {
                if (this.pdf.setPage(S), 0 !== this.ctx.clip_path.length) {
                    var A = this.path;
                    m = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = I(m, this.posX, -1 * this.pdf.internal.pageSize.height * (S - 1) + this.posY), E.call(this, "fill", !0), this.path = A
                }
                var L = JSON.parse(JSON.stringify(b));
                L = I([L], this.posX, -1 * this.pdf.internal.pageSize.height * (S - 1) + this.posY)[0], this.pdf.addImage(e, "jpg", L.x, L.y, L.w, L.h, null, null, g)
            } else this.pdf.addImage(e, "jpg", b.x, b.y, b.w, b.h, null, null, g)
        };
        var N = function (e, t, n) {
            var r = [];
            switch (t = t || this.pdf.internal.pageSize.width, n = n || this.pdf.internal.pageSize.height, e.type) {
                default:
                case"mt":
                case"lt":
                    r.push(Math.floor((e.y + this.posY) / n) + 1);
                    break;
                case"arc":
                    r.push(Math.floor((e.y + this.posY - e.radius) / n) + 1), r.push(Math.floor((e.y + this.posY + e.radius) / n) + 1);
                    break;
                case"qct":
                    var i = y(this.ctx.lastPoint.x, this.ctx.lastPoint.y, e.x1, e.y1, e.x, e.y);
                    r.push(Math.floor(i.y / n) + 1), r.push(Math.floor((i.y + i.h) / n) + 1);
                    break;
                case"bct":
                    var o = w(this.ctx.lastPoint.x, this.ctx.lastPoint.y, e.x1, e.y1, e.x2, e.y2, e.x, e.y);
                    r.push(Math.floor(o.y / n) + 1), r.push(Math.floor((o.y + o.h) / n) + 1);
                    break;
                case"rect":
                    r.push(Math.floor((e.y + this.posY) / n) + 1), r.push(Math.floor((e.y + e.h + this.posY) / n) + 1)
            }
            for (var a = 0; a < r.length; a += 1) for (; this.pdf.internal.getNumberOfPages() < r[a];) b.call(this);
            return r
        }, b = function () {
            var e = this.fillStyle, t = this.strokeStyle, n = this.font, r = this.lineCap, i = this.lineWidth,
                o = this.lineJoin;
            this.pdf.addPage(), this.fillStyle = e, this.strokeStyle = t, this.font = n, this.lineCap = r, this.lineWidth = i, this.lineJoin = o
        }, I = function (e, t, n) {
            for (var r = 0; r < e.length; r++) switch (e[r].type) {
                case"bct":
                    e[r].x2 += t, e[r].y2 += n;
                case"qct":
                    e[r].x1 += t, e[r].y1 += n;
                case"mt":
                case"lt":
                case"arc":
                default:
                    e[r].x += t, e[r].y += n
            }
            return e
        }, n = function (e, t) {
            for (var n, r, i = this.fillStyle, o = this.strokeStyle, a = (this.font, this.lineCap), s = this.lineWidth, l = this.lineJoin, c = JSON.parse(JSON.stringify(this.path)), d = JSON.parse(JSON.stringify(this.path)), u = [], h = 0; h < d.length; h++) if (void 0 !== d[h].x) for (var f = N.call(this, d[h]), p = 0; p < f.length; p += 1) -1 === u.indexOf(f[p]) && u.push(f[p]);
            for (h = 0; h < u.length; h++) for (; this.pdf.internal.getNumberOfPages() < u[h];) b.call(this);
            if (u.sort(), this.autoPaging) {
                var g = u[0], m = u[u.length - 1];
                for (h = g; h < m + 1; h++) {
                    if (this.pdf.setPage(h), this.fillStyle = i, this.strokeStyle = o, this.lineCap = a, this.lineWidth = s, this.lineJoin = l, 0 !== this.ctx.clip_path.length) {
                        var v = this.path;
                        n = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = I(n, this.posX, -1 * this.pdf.internal.pageSize.height * (h - 1) + this.posY), E.call(this, e, !0), this.path = v
                    }
                    r = JSON.parse(JSON.stringify(c)), this.path = I(r, this.posX, -1 * this.pdf.internal.pageSize.height * (h - 1) + this.posY), !1 !== t && 0 !== h || E.call(this, e, t)
                }
            } else E.call(this, e, t);
            this.path = c
        }, E = function (e, t) {
            if (("stroke" !== e || t || !C.call(this)) && ("stroke" === e || t || !x.call(this))) {
                var n = [];
                this.ctx.globalAlpha, this.ctx.fillOpacity < 1 && this.ctx.fillOpacity;
                for (var r, i = this.path, o = 0; o < i.length; o++) {
                    var a = i[o];
                    switch (a.type) {
                        case"begin":
                            n.push({begin: !0});
                            break;
                        case"close":
                            n.push({close: !0});
                            break;
                        case"mt":
                            n.push({start: a, deltas: [], abs: []});
                            break;
                        case"lt":
                            var s = n.length;
                            if (!isNaN(i[o - 1].x)) {
                                var l = [a.x - i[o - 1].x, a.y - i[o - 1].y];
                                if (0 < s) for (; 0 <= s; s--) if (!0 !== n[s - 1].close && !0 !== n[s - 1].begin) {
                                    n[s - 1].deltas.push(l), n[s - 1].abs.push(a);
                                    break
                                }
                            }
                            break;
                        case"bct":
                            l = [a.x1 - i[o - 1].x, a.y1 - i[o - 1].y, a.x2 - i[o - 1].x, a.y2 - i[o - 1].y, a.x - i[o - 1].x, a.y - i[o - 1].y], n[n.length - 1].deltas.push(l);
                            break;
                        case"qct":
                            var c = i[o - 1].x + 2 / 3 * (a.x1 - i[o - 1].x),
                                d = i[o - 1].y + 2 / 3 * (a.y1 - i[o - 1].y), u = a.x + 2 / 3 * (a.x1 - a.x),
                                h = a.y + 2 / 3 * (a.y1 - a.y), f = a.x, p = a.y;
                            l = [c - i[o - 1].x, d - i[o - 1].y, u - i[o - 1].x, h - i[o - 1].y, f - i[o - 1].x, p - i[o - 1].y], n[n.length - 1].deltas.push(l);
                            break;
                        case"arc":
                            n.push({
                                deltas: [],
                                abs: [],
                                arc: !0
                            }), Array.isArray(n[n.length - 1].abs) && n[n.length - 1].abs.push(a)
                    }
                }
                for (r = t ? null : "stroke" === e ? "stroke" : "fill", o = 0; o < n.length; o++) {
                    if (n[o].arc) for (var g = n[o].abs, m = 0; m < g.length; m++) {
                        var v = g[m];
                        if (void 0 !== v.startAngle) {
                            var b = O(v.startAngle), y = O(v.endAngle), w = v.x, k = v.y;
                            S.call(this, w, k, v.radius, b, y, v.counterclockwise, r, t)
                        } else T.call(this, v.x, v.y)
                    }
                    n[o].arc || !0 === n[o].close || !0 === n[o].begin || (w = n[o].start.x, k = n[o].start.y, B.call(this, n[o].deltas, w, k, null, null))
                }
                r && A.call(this, r), t && L.call(this)
            }
        }, a = function (e) {
            var t = this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor,
                n = t * (this.pdf.internal.getLineHeightFactor() - 1);
            switch (this.ctx.textBaseline) {
                case"bottom":
                    return e - n;
                case"top":
                    return e + t - n;
                case"hanging":
                    return e + t - 2 * n;
                case"middle":
                    return e + t / 2 - n;
                case"ideographic":
                    return e;
                case"alphabetic":
                default:
                    return e
            }
        };
        t.prototype.createLinearGradient = function () {
            function e() {
            }

            return e.colorStops = [], e.addColorStop = function (e, t) {
                this.colorStops.push([e, t])
            }, e.getColor = function () {
                return 0 === this.colorStops.length ? "#000000" : this.colorStops[0][1]
            }, e.isCanvasGradient = !0, e
        }, t.prototype.createPattern = function () {
            return this.createLinearGradient()
        }, t.prototype.createRadialGradient = function () {
            return this.createLinearGradient()
        };
        var S = function (e, t, n, r, i, o, a, s) {
            this.pdf.internal.scaleFactor;
            for (var l = v(r), c = v(i), d = g.call(this, n, l, c, o), u = 0; u < d.length; u++) {
                var h = d[u];
                0 === u && f.call(this, h.x1 + e, h.y1 + t), p.call(this, e, t, h.x2, h.y2, h.x3, h.y3, h.x4, h.y4)
            }
            s ? L.call(this) : A.call(this, a)
        }, A = function (e) {
            switch (e) {
                case"stroke":
                    this.pdf.internal.out("S");
                    break;
                case"fill":
                    this.pdf.internal.out("f")
            }
        }, L = function () {
            this.pdf.clip()
        }, f = function (e, t) {
            this.pdf.internal.out(i(e) + " " + o(t) + " m")
        }, s = function (e) {
            var t;
            switch (e.align) {
                case"right":
                case"end":
                    t = "right";
                    break;
                case"center":
                    t = "center";
                    break;
                case"left":
                case"start":
                default:
                    t = "left"
            }
            var n = this.ctx.transform.applyToPoint(new P(e.x, e.y)), r = this.ctx.transform.decompose(), i = new _;
            i = (i = (i = i.multiply(r.translate)).multiply(r.skew)).multiply(r.scale);
            for (var o, a = this.pdf.getTextDimensions(e.text), s = this.ctx.transform.applyToRectangle(new M(e.x, e.y, a.w, a.h)), l = i.applyToRectangle(new M(e.x, e.y - a.h, a.w, a.h)), c = N.call(this, l), d = [], u = 0; u < c.length; u += 1) -1 === d.indexOf(c[u]) && d.push(c[u]);
            if (d.sort(), !0 === this.autoPaging) for (var h = d[0], f = d[d.length - 1], p = h; p < f + 1; p++) {
                if (this.pdf.setPage(p), 0 !== this.ctx.clip_path.length) {
                    var g = this.path;
                    o = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = I(o, this.posX, -1 * this.pdf.internal.pageSize.height * (p - 1) + this.posY), E.call(this, "fill", !0), this.path = g
                }
                var m = JSON.parse(JSON.stringify(s));
                if (m = I([m], this.posX, -1 * this.pdf.internal.pageSize.height * (p - 1) + this.posY)[0], .01 <= e.scale) {
                    var v = this.pdf.internal.getFontSize();
                    this.pdf.setFontSize(v * e.scale)
                }
                this.pdf.text(e.text, m.x, m.y, {
                    angle: e.angle,
                    align: t,
                    renderingMode: e.renderingMode,
                    maxWidth: e.maxWidth
                }), .01 <= e.scale && this.pdf.setFontSize(v)
            } else .01 <= e.scale && (v = this.pdf.internal.getFontSize(), this.pdf.setFontSize(v * e.scale)), this.pdf.text(e.text, n.x + this.posX, n.y + this.posY, {
                angle: e.angle,
                align: t,
                renderingMode: e.renderingMode,
                maxWidth: e.maxWidth
            }), .01 <= e.scale && this.pdf.setFontSize(v)
        }, T = function (e, t, n, r) {
            n = n || 0, r = r || 0, this.pdf.internal.out(i(e + n) + " " + o(t + r) + " l")
        }, B = function (e, t, n) {
            return this.pdf.lines(e, t, n, null, null)
        }, p = function (e, t, n, r, i, o, a, s) {
            this.pdf.internal.out([l(c(n + e)), l(u(r + t)), l(c(i + e)), l(u(o + t)), l(c(a + e)), l(u(s + t)), "c"].join(" "))
        }, g = function (e, t, n, r) {
            var i = 2 * Math.PI, o = t;
            (o < i || i < o) && (o %= i);
            var a = n;
            (a < i || i < a) && (a %= i);
            for (var s = [], l = Math.PI / 2, c = r ? -1 : 1, d = t, u = Math.min(i, Math.abs(a - o)); 1e-5 < u;) {
                var h = d + c * Math.min(u, l);
                s.push(m.call(this, e, d, h)), u -= Math.abs(h - d), d = h
            }
            return s
        }, m = function (e, t, n) {
            var r = (n - t) / 2, i = e * Math.cos(r), o = e * Math.sin(r), a = i, s = -o, l = a * a + s * s,
                c = l + a * i + s * o, d = 4 / 3 * (Math.sqrt(2 * l * c) - c) / (a * o - s * i), u = a - d * s,
                h = s + d * a, f = u, p = -h, g = r + t, m = Math.cos(g), v = Math.sin(g);
            return {
                x1: e * Math.cos(t),
                y1: e * Math.sin(t),
                x2: u * m - h * v,
                y2: u * v + h * m,
                x3: f * m - p * v,
                y3: f * v + p * m,
                x4: e * Math.cos(n),
                y4: e * Math.sin(n)
            }
        }, O = function (e) {
            return 180 * e / Math.PI
        }, v = function (e) {
            return e * Math.PI / 180
        }, y = function (e, t, n, r, i, o) {
            var a = e + .5 * (n - e), s = t + .5 * (r - t), l = i + .5 * (n - i), c = o + .5 * (r - o),
                d = Math.min(e, i, a, l), u = Math.max(e, i, a, l), h = Math.min(t, o, s, c), f = Math.max(t, o, s, c);
            return new M(d, h, u - d, f - h)
        }, w = function (e, t, n, r, i, o, a, s) {
            for (var l, c, d, u, h, f, p, g, m, v, b, y, w, k = n - e, x = r - t, C = i - n, S = o - r, A = a - i, L = s - o, N = 0; N < 41; N++) g = (f = (c = e + (l = N / 40) * k) + l * ((u = n + l * C) - c)) + l * (u + l * (i + l * A - u) - f), m = (p = (d = t + l * x) + l * ((h = r + l * S) - d)) + l * (h + l * (o + l * L - h) - p), w = 0 == N ? (y = v = g, b = m) : (v = Math.min(v, g), b = Math.min(b, m), y = Math.max(y, g), Math.max(w, m));
            return new M(Math.round(v), Math.round(b), Math.round(y - v), Math.round(w - b))
        }, P = function (e, t) {
            var n = e || 0;
            Object.defineProperty(this, "x", {
                enumerable: !0, get: function () {
                    return n
                }, set: function (e) {
                    isNaN(e) || (n = parseFloat(e))
                }
            });
            var r = t || 0;
            Object.defineProperty(this, "y", {
                enumerable: !0, get: function () {
                    return r
                }, set: function (e) {
                    isNaN(e) || (r = parseFloat(e))
                }
            });
            var i = "pt";
            return Object.defineProperty(this, "type", {
                enumerable: !0, get: function () {
                    return i
                }, set: function (e) {
                    i = e.toString()
                }
            }), this
        }, M = function (e, t, n, r) {
            P.call(this, e, t), this.type = "rect";
            var i = n || 0;
            Object.defineProperty(this, "w", {
                enumerable: !0, get: function () {
                    return i
                }, set: function (e) {
                    isNaN(e) || (i = parseFloat(e))
                }
            });
            var o = r || 0;
            return Object.defineProperty(this, "h", {
                enumerable: !0, get: function () {
                    return o
                }, set: function (e) {
                    isNaN(e) || (o = parseFloat(e))
                }
            }), this
        }, _ = function (e, t, n, r, i, o) {
            var a = [];
            return Object.defineProperty(this, "sx", {
                get: function () {
                    return a[0]
                }, set: function (e) {
                    a[0] = Math.round(1e5 * e) / 1e5
                }
            }), Object.defineProperty(this, "shy", {
                get: function () {
                    return a[1]
                }, set: function (e) {
                    a[1] = Math.round(1e5 * e) / 1e5
                }
            }), Object.defineProperty(this, "shx", {
                get: function () {
                    return a[2]
                }, set: function (e) {
                    a[2] = Math.round(1e5 * e) / 1e5
                }
            }), Object.defineProperty(this, "sy", {
                get: function () {
                    return a[3]
                }, set: function (e) {
                    a[3] = Math.round(1e5 * e) / 1e5
                }
            }), Object.defineProperty(this, "tx", {
                get: function () {
                    return a[4]
                }, set: function (e) {
                    a[4] = Math.round(1e5 * e) / 1e5
                }
            }), Object.defineProperty(this, "ty", {
                get: function () {
                    return a[5]
                }, set: function (e) {
                    a[5] = Math.round(1e5 * e) / 1e5
                }
            }), Object.defineProperty(this, "rotation", {
                get: function () {
                    return Math.atan2(this.shx, this.sx)
                }
            }), Object.defineProperty(this, "scaleX", {
                get: function () {
                    return this.decompose().scale.sx
                }
            }), Object.defineProperty(this, "scaleY", {
                get: function () {
                    return this.decompose().scale.sy
                }
            }), Object.defineProperty(this, "isIdentity", {
                get: function () {
                    return 1 === this.sx && 0 === this.shy && 0 === this.shx && 1 === this.sy && 0 === this.tx && 0 === this.ty
                }
            }), this.sx = isNaN(e) ? 1 : e, this.shy = isNaN(t) ? 0 : t, this.shx = isNaN(n) ? 0 : n, this.sy = isNaN(r) ? 1 : r, this.tx = isNaN(i) ? 0 : i, this.ty = isNaN(o) ? 0 : o, this
        };
        _.prototype.multiply = function (e) {
            var t = e.sx * this.sx + e.shy * this.shx, n = e.sx * this.shy + e.shy * this.sy,
                r = e.shx * this.sx + e.sy * this.shx, i = e.shx * this.shy + e.sy * this.sy,
                o = e.tx * this.sx + e.ty * this.shx + this.tx, a = e.tx * this.shy + e.ty * this.sy + this.ty;
            return new _(t, n, r, i, o, a)
        }, _.prototype.decompose = function () {
            var e = this.sx, t = this.shy, n = this.shx, r = this.sy, i = this.tx, o = this.ty,
                a = Math.sqrt(e * e + t * t), s = (e /= a) * n + (t /= a) * r;
            n -= e * s, r -= t * s;
            var l = Math.sqrt(n * n + r * r);
            return s /= l, e * (r /= l) < t * (n /= l) && (e = -e, t = -t, s = -s, a = -a), {
                scale: new _(a, 0, 0, l, 0, 0),
                translate: new _(1, 0, 0, 1, i, o),
                rotate: new _(e, t, -t, e, 0, 0),
                skew: new _(1, 0, s, 1, 0, 0)
            }
        }, _.prototype.applyToPoint = function (e) {
            var t = e.x * this.sx + e.y * this.shx + this.tx, n = e.x * this.shy + e.y * this.sy + this.ty;
            return new P(t, n)
        }, _.prototype.applyToRectangle = function (e) {
            var t = this.applyToPoint(e), n = this.applyToPoint(new P(e.x + e.w, e.y + e.h));
            return new M(t.x, t.y, n.x - t.x, n.y - t.y)
        }, _.prototype.clone = function () {
            var e = this.sx, t = this.shy, n = this.shx, r = this.sy, i = this.tx, o = this.ty;
            return new _(e, t, n, r, i, o)
        }
    }(le.API, void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")()), a = le.API, o = function (e) {
        var n, t, r, i, o, a, s, l, c, d;
        for (/[^\x00-\xFF]/.test(e), t = [], r = 0, i = (e += n = "\0\0\0\0".slice(e.length % 4 || 4)).length; r < i; r += 4) 0 !== (o = (e.charCodeAt(r) << 24) + (e.charCodeAt(r + 1) << 16) + (e.charCodeAt(r + 2) << 8) + e.charCodeAt(r + 3)) ? (a = (o = ((o = ((o = ((o = (o - (d = o % 85)) / 85) - (c = o % 85)) / 85) - (l = o % 85)) / 85) - (s = o % 85)) / 85) % 85, t.push(33 + a, 33 + s, 33 + l, 33 + c, 33 + d)) : t.push(122);
        return function (e) {
            for (var t = n.length; 0 < t; t--) e.pop()
        }(t), String.fromCharCode.apply(String, t) + "~>"
    }, s = function (e) {
        var n, t, r, i, o, a = String, s = "length", l = "charCodeAt", c = "slice", d = "replace";
        for (e[c](-2), e = e[c](0, -2)[d](/\s/g, "")[d]("z", "!!!!!"), r = [], i = 0, o = (e += n = "uuuuu"[c](e[s] % 5 || 5))[s]; i < o; i += 5) t = 52200625 * (e[l](i) - 33) + 614125 * (e[l](i + 1) - 33) + 7225 * (e[l](i + 2) - 33) + 85 * (e[l](i + 3) - 33) + (e[l](i + 4) - 33), r.push(255 & t >> 24, 255 & t >> 16, 255 & t >> 8, 255 & t);
        return function (e) {
            for (var t = n[s]; 0 < t; t--) e.pop()
        }(r), a.fromCharCode.apply(a, r)
    }, c = function (e) {
        for (var t = "", n = 0; n < e.length; n += 1) t += ("0" + e.charCodeAt(n).toString(16)).slice(-2);
        return t + ">"
    }, d = function (e) {
        var t = new RegExp(/^([0-9A-Fa-f]{2})+$/);
        if (-1 !== (e = e.replace(/\s/g, "")).indexOf(">") && (e = e.substr(0, e.indexOf(">"))), e.length % 2 && (e += "0"), !1 === t.test(e)) return "";
        for (var n = "", r = 0; r < e.length; r += 2) n += String.fromCharCode("0x" + (e[r] + e[r + 1]));
        return n
    }, u = function (e, t) {
        t = Object.assign({predictor: 1, colors: 1, bitsPerComponent: 8, columns: 1}, t);
        for (var n, r, i = [], o = e.length; o--;) i[o] = e.charCodeAt(o);
        return n = a.adler32cs.from(e), (r = new Deflater(6)).append(new Uint8Array(i)), e = r.flush(), (i = new Uint8Array(e.length + 6)).set(new Uint8Array([120, 156])), i.set(e, 2), i.set(new Uint8Array([255 & n, n >> 8 & 255, n >> 16 & 255, n >> 24 & 255]), e.length + 2), String.fromCharCode.apply(null, i)
    }, a.processDataByFilters = function (e, t) {
        var n = 0, r = e || "", i = [];
        for ("string" == typeof (t = t || []) && (t = [t]), n = 0; n < t.length; n += 1) switch (t[n]) {
            case"ASCII85Decode":
            case"/ASCII85Decode":
                r = s(r), i.push("/ASCII85Encode");
                break;
            case"ASCII85Encode":
            case"/ASCII85Encode":
                r = o(r), i.push("/ASCII85Decode");
                break;
            case"ASCIIHexDecode":
            case"/ASCIIHexDecode":
                r = d(r), i.push("/ASCIIHexEncode");
                break;
            case"ASCIIHexEncode":
            case"/ASCIIHexEncode":
                r = c(r), i.push("/ASCIIHexDecode");
                break;
            case"FlateEncode":
            case"/FlateEncode":
                r = u(r), i.push("/FlateDecode");
                break;
            default:
                throw'The filter: "' + t[n] + '" is not implemented'
        }
        return {data: r, reverseChain: i.reverse().join(" ")}
    }, (r = le.API).loadFile = function (e, t, n) {
        var r;
        t = t || !0;
        try {
            r = function (e, t) {
                function n(e) {
                    var t = e.length, n = String.fromCharCode;
                    for (o = 0; o < t; o += 1) i.push(n(255 & e.charCodeAt(o)));
                    return i.join("")
                }

                var r = new XMLHttpRequest, i = [], o = 0;
                if (r.open("GET", e, !t), r.overrideMimeType("text/plain; charset=x-user-defined"), !1 === t && (r.onload = function () {
                    return n(this.responseText)
                }), r.send(null), 200 === r.status) return t ? n(r.responseText) : void 0
            }(e, t)
        } catch (e) {
            r = void 0
        }
        return r
    }, r.loadImageFile = r.loadFile, i = le.API, h = "undefined" != typeof window && window || "undefined" != typeof global && global, g = function (e) {
        var t = rt(e);
        return "undefined" === t ? "undefined" : "string" === t || e instanceof String ? "string" : "number" === t || e instanceof Number ? "number" : "function" === t || e instanceof Function ? "function" : e && e.constructor === Array ? "array" : e && 1 === e.nodeType ? "element" : "object" === t ? "object" : "unknown"
    }, m = function (e, t) {
        var n = document.createElement(e);
        if (t.className && (n.className = t.className), t.innerHTML) {
            n.innerHTML = t.innerHTML;
            for (var r = n.getElementsByTagName("script"), i = r.length; 0 < i--;) r[i].parentNode.removeChild(r[i])
        }
        for (var o in t.style) n.style[o] = t.style[o];
        return n
    }, (((v = function e(t) {
        var n = Object.assign(e.convert(Promise.resolve()), JSON.parse(JSON.stringify(e.template))),
            r = e.convert(Promise.resolve(), n);
        return (r = r.setProgress(1, e, 1, [e])).set(t)
    }).prototype = Object.create(Promise.prototype)).constructor = v).convert = function (e, t) {
        return e.__proto__ = t || v.prototype, e
    }, v.template = {
        prop: {
            src: null,
            container: null,
            overlay: null,
            canvas: null,
            img: null,
            pdf: null,
            pageSize: null,
            callback: function () {
            }
        },
        progress: {val: 0, state: null, n: 0, stack: []},
        opt: {filename: "file.pdf", margin: [0, 0, 0, 0], enableLinks: !0, x: 0, y: 0, html2canvas: {}, jsPDF: {}}
    }, v.prototype.from = function (e, t) {
        return this.then(function () {
            switch (t = t || function (e) {
                switch (g(e)) {
                    case"string":
                        return "string";
                    case"element":
                        return "canvas" === e.nodeName.toLowerCase ? "canvas" : "element";
                    default:
                        return "unknown"
                }
            }(e)) {
                case"string":
                    return this.set({src: m("div", {innerHTML: e})});
                case"element":
                    return this.set({src: e});
                case"canvas":
                    return this.set({canvas: e});
                case"img":
                    return this.set({img: e});
                default:
                    return this.error("Unknown source type.")
            }
        })
    }, v.prototype.to = function (e) {
        switch (e) {
            case"container":
                return this.toContainer();
            case"canvas":
                return this.toCanvas();
            case"img":
                return this.toImg();
            case"pdf":
                return this.toPdf();
            default:
                return this.error("Invalid target.")
        }
    }, v.prototype.toContainer = function () {
        return this.thenList([function () {
            return this.prop.src || this.error("Cannot duplicate - no source HTML.")
        }, function () {
            return this.prop.pageSize || this.setPageSize()
        }]).then(function () {
            var e = {
                position: "relative",
                display: "inline-block",
                width: Math.max(this.prop.src.clientWidth, this.prop.src.scrollWidth, this.prop.src.offsetWidth) + "px",
                left: 0,
                right: 0,
                top: 0,
                margin: "auto",
                backgroundColor: "white"
            }, t = function e(t, n) {
                for (var r = 3 === t.nodeType ? document.createTextNode(t.nodeValue) : t.cloneNode(!1), i = t.firstChild; i; i = i.nextSibling) !0 !== n && 1 === i.nodeType && "SCRIPT" === i.nodeName || r.appendChild(e(i, n));
                return 1 === t.nodeType && ("CANVAS" === t.nodeName ? (r.width = t.width, r.height = t.height, r.getContext("2d").drawImage(t, 0, 0)) : "TEXTAREA" !== t.nodeName && "SELECT" !== t.nodeName || (r.value = t.value), r.addEventListener("load", function () {
                    r.scrollTop = t.scrollTop, r.scrollLeft = t.scrollLeft
                }, !0)), r
            }(this.prop.src, this.opt.html2canvas.javascriptEnabled);
            "BODY" === t.tagName && (e.height = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) + "px"), this.prop.overlay = m("div", {
                className: "html2pdf__overlay",
                style: {
                    position: "fixed",
                    overflow: "hidden",
                    zIndex: 1e3,
                    left: "-100000px",
                    right: 0,
                    bottom: 0,
                    top: 0
                }
            }), this.prop.container = m("div", {
                className: "html2pdf__container",
                style: e
            }), this.prop.container.appendChild(t), this.prop.container.firstChild.appendChild(m("div", {
                style: {
                    clear: "both",
                    border: "0 none transparent",
                    margin: 0,
                    padding: 0,
                    height: 0
                }
            })), this.prop.container.style.float = "none", this.prop.overlay.appendChild(this.prop.container), document.body.appendChild(this.prop.overlay), this.prop.container.firstChild.style.position = "relative", this.prop.container.height = Math.max(this.prop.container.firstChild.clientHeight, this.prop.container.firstChild.scrollHeight, this.prop.container.firstChild.offsetHeight) + "px"
        })
    }, v.prototype.toCanvas = function () {
        var e = [function () {
            return document.body.contains(this.prop.container) || this.toContainer()
        }];
        return this.thenList(e).then(function () {
            var e = Object.assign({}, this.opt.html2canvas);
            if (delete e.onrendered, this.isHtml2CanvasLoaded()) return html2canvas(this.prop.container, e)
        }).then(function (e) {
            (this.opt.html2canvas.onrendered || function () {
            })(e), this.prop.canvas = e, document.body.removeChild(this.prop.overlay)
        })
    }, v.prototype.toContext2d = function () {
        var e = [function () {
            return document.body.contains(this.prop.container) || this.toContainer()
        }];
        return this.thenList(e).then(function () {
            var e = this.opt.jsPDF, t = Object.assign({
                async: !0,
                allowTaint: !0,
                backgroundColor: "#ffffff",
                imageTimeout: 15e3,
                logging: !0,
                proxy: null,
                removeContainer: !0,
                foreignObjectRendering: !1,
                useCORS: !1
            }, this.opt.html2canvas);
            if (delete t.onrendered, e.context2d.autoPaging = !0, e.context2d.posX = this.opt.x, e.context2d.posY = this.opt.y, t.windowHeight = t.windowHeight || 0, t.windowHeight = 0 == t.windowHeight ? Math.max(this.prop.container.clientHeight, this.prop.container.scrollHeight, this.prop.container.offsetHeight) : t.windowHeight, this.isHtml2CanvasLoaded()) return html2canvas(this.prop.container, t)
        }).then(function (e) {
            (this.opt.html2canvas.onrendered || function () {
            })(e), this.prop.canvas = e, document.body.removeChild(this.prop.overlay)
        })
    }, v.prototype.toImg = function () {
        return this.thenList([function () {
            return this.prop.canvas || this.toCanvas()
        }]).then(function () {
            var e = this.prop.canvas.toDataURL("image/" + this.opt.image.type, this.opt.image.quality);
            this.prop.img = document.createElement("img"), this.prop.img.src = e
        })
    }, v.prototype.toPdf = function () {
        return this.thenList([function () {
            return this.toContext2d()
        }]).then(function () {
            this.prop.pdf = this.prop.pdf || this.opt.jsPDF
        })
    }, v.prototype.output = function (e, t, n) {
        return "img" === (n = n || "pdf").toLowerCase() || "image" === n.toLowerCase() ? this.outputImg(e, t) : this.outputPdf(e, t)
    }, v.prototype.outputPdf = function (e, t) {
        return this.thenList([function () {
            return this.prop.pdf || this.toPdf()
        }]).then(function () {
            return this.prop.pdf.output(e, t)
        })
    }, v.prototype.outputImg = function (e, t) {
        return this.thenList([function () {
            return this.prop.img || this.toImg()
        }]).then(function () {
            switch (e) {
                case void 0:
                case"img":
                    return this.prop.img;
                case"datauristring":
                case"dataurlstring":
                    return this.prop.img.src;
                case"datauri":
                case"dataurl":
                    return document.location.href = this.prop.img.src;
                default:
                    throw'Image output type "' + e + '" is not supported.'
            }
        })
    }, v.prototype.isHtml2CanvasLoaded = function () {
        return void 0 !== h.html2canvas
    }, v.prototype.save = function (e) {
        if (this.isHtml2CanvasLoaded()) return this.thenList([function () {
            return this.prop.pdf || this.toPdf()
        }]).set(e ? {filename: e} : null).then(function () {
            this.prop.pdf.save(this.opt.filename)
        })
    }, v.prototype.doCallback = function (e) {
        if (this.isHtml2CanvasLoaded()) return this.thenList([function () {
            return this.prop.pdf || this.toPdf()
        }]).then(function () {
            this.prop.callback(this.prop.pdf)
        })
    }, v.prototype.set = function (t) {
        if ("object" !== g(t)) return this;
        var e = Object.keys(t || {}).map(function (e) {
            if (e in v.template.prop) return function () {
                this.prop[e] = t[e]
            };
            switch (e) {
                case"margin":
                    return this.setMargin.bind(this, t.margin);
                case"jsPDF":
                    return function () {
                        return this.opt.jsPDF = t.jsPDF, this.setPageSize()
                    };
                case"pageSize":
                    return this.setPageSize.bind(this, t.pageSize);
                default:
                    return function () {
                        this.opt[e] = t[e]
                    }
            }
        }, this);
        return this.then(function () {
            return this.thenList(e)
        })
    }, v.prototype.get = function (t, n) {
        return this.then(function () {
            var e = t in v.template.prop ? this.prop[t] : this.opt[t];
            return n ? n(e) : e
        })
    }, v.prototype.setMargin = function (e) {
        return this.then(function () {
            switch (g(e)) {
                case"number":
                    e = [e, e, e, e];
                case"array":
                    if (2 === e.length && (e = [e[0], e[1], e[0], e[1]]), 4 === e.length) break;
                default:
                    return this.error("Invalid margin array.")
            }
            this.opt.margin = e
        }).then(this.setPageSize)
    }, v.prototype.setPageSize = function (e) {
        function t(e, t) {
            return Math.floor(e * t / 72 * 96)
        }

        return this.then(function () {
            (e = e || le.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner") || (e.inner = {
                width: e.width - this.opt.margin[1] - this.opt.margin[3],
                height: e.height - this.opt.margin[0] - this.opt.margin[2]
            }, e.inner.px = {
                width: t(e.inner.width, e.k),
                height: t(e.inner.height, e.k)
            }, e.inner.ratio = e.inner.height / e.inner.width), this.prop.pageSize = e
        })
    }, v.prototype.setProgress = function (e, t, n, r) {
        return null != e && (this.progress.val = e), null != t && (this.progress.state = t), null != n && (this.progress.n = n), null != r && (this.progress.stack = r), this.progress.ratio = this.progress.val / this.progress.state, this
    }, v.prototype.updateProgress = function (e, t, n, r) {
        return this.setProgress(e ? this.progress.val + e : null, t || null, n ? this.progress.n + n : null, r ? this.progress.stack.concat(r) : null)
    }, v.prototype.then = function (e, t) {
        var n = this;
        return this.thenCore(e, t, function (t, e) {
            return n.updateProgress(null, null, 1, [t]), Promise.prototype.then.call(this, function (e) {
                return n.updateProgress(null, t), e
            }).then(t, e).then(function (e) {
                return n.updateProgress(1), e
            })
        })
    }, v.prototype.thenCore = function (e, t, n) {
        n = n || Promise.prototype.then;
        var r = this;
        e = e && e.bind(r), t = t && t.bind(r);
        var i = -1 !== Promise.toString().indexOf("[native code]") && "Promise" === Promise.name ? r : v.convert(Object.assign({}, r), Promise.prototype),
            o = n.call(i, e, t);
        return v.convert(o, r.__proto__)
    }, v.prototype.thenExternal = function (e, t) {
        return Promise.prototype.then.call(this, e, t)
    }, v.prototype.thenList = function (e) {
        var t = this;
        return e.forEach(function (e) {
            t = t.thenCore(e)
        }), t
    }, v.prototype.catch = function (e) {
        e = e && e.bind(this);
        var t = Promise.prototype.catch.call(this, e);
        return v.convert(t, this)
    }, v.prototype.catchExternal = function (e) {
        return Promise.prototype.catch.call(this, e)
    }, v.prototype.error = function (e) {
        return this.then(function () {
            throw new Error(e)
        })
    }, v.prototype.using = v.prototype.set, v.prototype.saveAs = v.prototype.save, v.prototype.export = v.prototype.output, v.prototype.run = v.prototype.then, le.getPageSize = function (e, t, n) {
        if ("object" === rt(e)) {
            var r = e;
            e = r.orientation, t = r.unit || t, n = r.format || n
        }
        t = t || "mm", n = n || "a4", e = ("" + (e || "P")).toLowerCase();
        var i = ("" + n).toLowerCase(), o = {
            a0: [2383.94, 3370.39],
            a1: [1683.78, 2383.94],
            a2: [1190.55, 1683.78],
            a3: [841.89, 1190.55],
            a4: [595.28, 841.89],
            a5: [419.53, 595.28],
            a6: [297.64, 419.53],
            a7: [209.76, 297.64],
            a8: [147.4, 209.76],
            a9: [104.88, 147.4],
            a10: [73.7, 104.88],
            b0: [2834.65, 4008.19],
            b1: [2004.09, 2834.65],
            b2: [1417.32, 2004.09],
            b3: [1000.63, 1417.32],
            b4: [708.66, 1000.63],
            b5: [498.9, 708.66],
            b6: [354.33, 498.9],
            b7: [249.45, 354.33],
            b8: [175.75, 249.45],
            b9: [124.72, 175.75],
            b10: [87.87, 124.72],
            c0: [2599.37, 3676.54],
            c1: [1836.85, 2599.37],
            c2: [1298.27, 1836.85],
            c3: [918.43, 1298.27],
            c4: [649.13, 918.43],
            c5: [459.21, 649.13],
            c6: [323.15, 459.21],
            c7: [229.61, 323.15],
            c8: [161.57, 229.61],
            c9: [113.39, 161.57],
            c10: [79.37, 113.39],
            dl: [311.81, 623.62],
            letter: [612, 792],
            "government-letter": [576, 756],
            legal: [612, 1008],
            "junior-legal": [576, 360],
            ledger: [1224, 792],
            tabloid: [792, 1224],
            "credit-card": [153, 243]
        };
        switch (t) {
            case"pt":
                var a = 1;
                break;
            case"mm":
                a = 72 / 25.4;
                break;
            case"cm":
                a = 72 / 2.54;
                break;
            case"in":
                a = 72;
                break;
            case"px":
                a = .75;
                break;
            case"pc":
            case"em":
                a = 12;
                break;
            case"ex":
                a = 6;
                break;
            default:
                throw"Invalid unit: " + t
        }
        if (o.hasOwnProperty(i)) var s = o[i][1] / a, l = o[i][0] / a; else try {
            s = n[1], l = n[0]
        } catch (e) {
            throw new Error("Invalid format: " + n)
        }
        if ("p" === e || "portrait" === e) {
            if (e = "p", s < l) {
                var c = l;
                l = s, s = c
            }
        } else {
            if ("l" !== e && "landscape" !== e) throw"Invalid orientation: " + e;
            e = "l", l < s && (c = l, l = s, s = c)
        }
        return {width: l, height: s, unit: t, k: a}
    }, i.html = function (e, t) {
        (t = t || {}).callback = t.callback || function () {
        }, t.html2canvas = t.html2canvas || {}, t.html2canvas.canvas = t.html2canvas.canvas || this.canvas, t.jsPDF = t.jsPDF || this, t.jsPDF;
        var n = new v(t);
        return t.worker ? n : n.from(e).doCallback()
    }, le.API.addJS = function (e) {
        return w = e, this.internal.events.subscribe("postPutResources", function (e) {
            b = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/Names [(EmbeddedJS) " + (b + 1) + " 0 R]"), this.internal.out(">>"), this.internal.out("endobj"), y = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/S /JavaScript"), this.internal.out("/JS (" + w + ")"), this.internal.out(">>"), this.internal.out("endobj")
        }), this.internal.events.subscribe("putCatalog", function () {
            void 0 !== b && void 0 !== y && this.internal.out("/Names <</JavaScript " + b + " 0 R>>")
        }), this
    }, (k = le.API).events.push(["postPutResources", function () {
        var e = this, t = /^(\d+) 0 obj$/;
        if (0 < this.outline.root.children.length) for (var n = e.outline.render().split(/\r\n/), r = 0; r < n.length; r++) {
            var i = n[r], o = t.exec(i);
            if (null != o) {
                var a = o[1];
                e.internal.newObjectDeferredBegin(a, !1)
            }
            e.internal.write(i)
        }
        if (this.outline.createNamedDestinations) {
            var s = this.internal.pages.length, l = [];
            for (r = 0; r < s; r++) {
                var c = e.internal.newObject();
                l.push(c);
                var d = e.internal.getPageInfo(r + 1);
                e.internal.write("<< /D[" + d.objId + " 0 R /XYZ null null null]>> endobj")
            }
            var u = e.internal.newObject();
            for (e.internal.write("<< /Names [ "), r = 0; r < l.length; r++) e.internal.write("(page_" + (r + 1) + ")" + l[r] + " 0 R");
            e.internal.write(" ] >>", "endobj"), e.internal.newObject(), e.internal.write("<< /Dests " + u + " 0 R"), e.internal.write(">>", "endobj")
        }
    }]), k.events.push(["putCatalog", function () {
        0 < this.outline.root.children.length && (this.internal.write("/Outlines", this.outline.makeRef(this.outline.root)), this.outline.createNamedDestinations && this.internal.write("/Names " + namesOid + " 0 R"))
    }]), k.events.push(["initialized", function () {
        var a = this;
        a.outline = {createNamedDestinations: !1, root: {children: []}}, a.outline.add = function (e, t, n) {
            var r = {title: t, options: n, children: []};
            return null == e && (e = this.root), e.children.push(r), r
        }, a.outline.render = function () {
            return this.ctx = {}, this.ctx.val = "", this.ctx.pdf = a, this.genIds_r(this.root), this.renderRoot(this.root), this.renderItems(this.root), this.ctx.val
        }, a.outline.genIds_r = function (e) {
            e.id = a.internal.newObjectDeferred();
            for (var t = 0; t < e.children.length; t++) this.genIds_r(e.children[t])
        }, a.outline.renderRoot = function (e) {
            this.objStart(e), this.line("/Type /Outlines"), 0 < e.children.length && (this.line("/First " + this.makeRef(e.children[0])), this.line("/Last " + this.makeRef(e.children[e.children.length - 1]))), this.line("/Count " + this.count_r({count: 0}, e)), this.objEnd()
        }, a.outline.renderItems = function (e) {
            this.ctx.pdf.internal.getCoordinateString;
            for (var t = this.ctx.pdf.internal.getVerticalCoordinateString, n = 0; n < e.children.length; n++) {
                var r = e.children[n];
                this.objStart(r), this.line("/Title " + this.makeString(r.title)), this.line("/Parent " + this.makeRef(e)), 0 < n && this.line("/Prev " + this.makeRef(e.children[n - 1])), n < e.children.length - 1 && this.line("/Next " + this.makeRef(e.children[n + 1])), 0 < r.children.length && (this.line("/First " + this.makeRef(r.children[0])), this.line("/Last " + this.makeRef(r.children[r.children.length - 1])));
                var i = this.count = this.count_r({count: 0}, r);
                if (0 < i && this.line("/Count " + i), r.options && r.options.pageNumber) {
                    var o = a.internal.getPageInfo(r.options.pageNumber);
                    this.line("/Dest [" + o.objId + " 0 R /XYZ 0 " + t(0) + " 0]")
                }
                this.objEnd()
            }
            for (n = 0; n < e.children.length; n++) r = e.children[n], this.renderItems(r)
        }, a.outline.line = function (e) {
            this.ctx.val += e + "\r\n"
        }, a.outline.makeRef = function (e) {
            return e.id + " 0 R"
        }, a.outline.makeString = function (e) {
            return "(" + a.internal.pdfEscape(e) + ")"
        }, a.outline.objStart = function (e) {
            this.ctx.val += "\r\n" + e.id + " 0 obj\r\n<<\r\n"
        }, a.outline.objEnd = function (e) {
            this.ctx.val += ">> \r\nendobj\r\n"
        }, a.outline.count_r = function (e, t) {
            for (var n = 0; n < t.children.length; n++) e.count++, this.count_r(e, t.children[n]);
            return e.count
        }
    }]), T = le.API, B = function () {
        var e = "function" == typeof Deflater;
        if (!e) throw new Error("requires deflate.js for compression");
        return e
    }, O = function (e, t, n, r) {
        var i = 5, o = M;
        switch (r) {
            case T.image_compression.FAST:
                i = 3, o = P;
                break;
            case T.image_compression.MEDIUM:
                i = 6, o = _;
                break;
            case T.image_compression.SLOW:
                i = 9, o = F
        }
        e = S(e, t, n, o);
        var a = new Uint8Array(x(i)), s = C(e), l = new Deflater(i), c = l.append(e), d = l.flush(),
            u = a.length + c.length + d.length, h = new Uint8Array(u + 4);
        return h.set(a), h.set(c, a.length), h.set(d, a.length + c.length), h[u++] = s >>> 24 & 255, h[u++] = s >>> 16 & 255, h[u++] = s >>> 8 & 255, h[u++] = 255 & s, T.arrayBufferToBinaryString(h)
    }, x = function (e, t) {
        var n = Math.LOG2E * Math.log(32768) - 8 << 4 | 8, r = n << 8;
        return r |= Math.min(3, (t - 1 & 255) >> 1) << 6, r |= 0, [n, 255 & (r += 31 - r % 31)]
    }, C = function (e, t) {
        for (var n, r = 1, i = 0, o = e.length, a = 0; 0 < o;) {
            for (o -= n = t < o ? t : o; i += r += e[a++], --n;) ;
            r %= 65521, i %= 65521
        }
        return (i << 16 | r) >>> 0
    }, S = function (e, t, n, r) {
        for (var i, o, a, s = e.length / t, l = new Uint8Array(e.length + s), c = D(), d = 0; d < s; d++) {
            if (a = d * t, i = e.subarray(a, a + t), r) l.set(r(i, n, o), a + d); else {
                for (var u = 0, h = c.length, f = []; u < h; u++) f[u] = c[u](i, n, o);
                var p = j(f.concat());
                l.set(f[p], a + d)
            }
            o = i
        }
        return l
    }, A = function (e, t, n) {
        var r = Array.apply([], e);
        return r.unshift(0), r
    }, P = function (e, t, n) {
        var r, i = [], o = 0, a = e.length;
        for (i[0] = 1; o < a; o++) r = e[o - t] || 0, i[o + 1] = e[o] - r + 256 & 255;
        return i
    }, M = function (e, t, n) {
        var r, i = [], o = 0, a = e.length;
        for (i[0] = 2; o < a; o++) r = n && n[o] || 0, i[o + 1] = e[o] - r + 256 & 255;
        return i
    }, _ = function (e, t, n) {
        var r, i, o = [], a = 0, s = e.length;
        for (o[0] = 3; a < s; a++) r = e[a - t] || 0, i = n && n[a] || 0, o[a + 1] = e[a] + 256 - (r + i >>> 1) & 255;
        return o
    }, F = function (e, t, n) {
        var r, i, o, a, s = [], l = 0, c = e.length;
        for (s[0] = 4; l < c; l++) r = e[l - t] || 0, i = n && n[l] || 0, o = n && n[l - t] || 0, a = R(r, i, o), s[l + 1] = e[l] - a + 256 & 255;
        return s
    }, R = function (e, t, n) {
        var r = e + t - n, i = Math.abs(r - e), o = Math.abs(r - t), a = Math.abs(r - n);
        return i <= o && i <= a ? e : o <= a ? t : n
    }, D = function () {
        return [A, P, M, _, F]
    }, j = function (e) {
        for (var t, n, r, i = 0, o = e.length; i < o;) ((t = H(e[i].slice(1))) < n || !n) && (n = t, r = i), i++;
        return r
    }, H = function (e) {
        for (var t = 0, n = e.length, r = 0; t < n;) r += Math.abs(e[t++]);
        return r
    }, T.processPNG = function (e, t, n, r, i) {
        var o, a, s, l, c, d, u = this.color_spaces.DEVICE_RGB, h = this.decode.FLATE_DECODE, f = 8;
        if (this.isArrayBuffer(e) && (e = new Uint8Array(e)), this.isArrayBufferView(e)) {
            if ("function" != typeof PNG || "function" != typeof Ee) throw new Error("PNG support requires png.js and zlib.js");
            if (e = (o = new PNG(e)).imgData, f = o.bits, u = o.colorSpace, l = o.colors, -1 !== [4, 6].indexOf(o.colorType)) {
                if (8 === o.bits) for (var p, g = (L = 32 == o.pixelBitlength ? new Uint32Array(o.decodePixels().buffer) : 16 == o.pixelBitlength ? new Uint16Array(o.decodePixels().buffer) : new Uint8Array(o.decodePixels().buffer)).length, m = new Uint8Array(g * o.colors), v = new Uint8Array(g), b = o.pixelBitlength - o.bits, y = 0, w = 0; y < g; y++) {
                    for (k = L[y], p = 0; p < b;) m[w++] = k >>> p & 255, p += o.bits;
                    v[y] = k >>> p & 255
                }
                if (16 === o.bits) {
                    g = (L = new Uint32Array(o.decodePixels().buffer)).length, m = new Uint8Array(g * (32 / o.pixelBitlength) * o.colors), v = new Uint8Array(g * (32 / o.pixelBitlength));
                    for (var k, x = 1 < o.colors, C = w = y = 0; y < g;) k = L[y++], m[w++] = k >>> 0 & 255, x && (m[w++] = k >>> 16 & 255, k = L[y++], m[w++] = k >>> 0 & 255), v[C++] = k >>> 16 & 255;
                    f = 8
                }
                r !== T.image_compression.NONE && B() ? (e = O(m, o.width * o.colors, o.colors, r), d = O(v, o.width, 1, r)) : (e = m, d = v, h = null)
            }
            if (3 === o.colorType && (u = this.color_spaces.INDEXED, c = o.palette, o.transparency.indexed)) {
                var S = o.transparency.indexed, A = 0;
                for (y = 0, g = S.length; y < g; ++y) A += S[y];
                if ((A /= 255) == g - 1 && -1 !== S.indexOf(0)) s = [S.indexOf(0)]; else if (A !== g) {
                    var L = o.decodePixels();
                    for (v = new Uint8Array(L.length), y = 0, g = L.length; y < g; y++) v[y] = S[L[y]];
                    d = O(v, o.width, 1)
                }
            }
            var N = function () {
                var e;
                switch (r) {
                    case T.image_compression.FAST:
                        e = 11;
                        break;
                    case T.image_compression.MEDIUM:
                        e = 13;
                        break;
                    case T.image_compression.SLOW:
                        e = 14;
                        break;
                    default:
                        e = 12
                }
                return e
            }();
            return a = h === this.decode.FLATE_DECODE ? "/Predictor " + N + " /Colors " + l + " /BitsPerComponent " + f + " /Columns " + o.width : "/Colors " + l + " /BitsPerComponent " + f + " /Columns " + o.width, (this.isArrayBuffer(e) || this.isArrayBufferView(e)) && (e = this.arrayBufferToBinaryString(e)), (d && this.isArrayBuffer(d) || this.isArrayBufferView(d)) && (d = this.arrayBufferToBinaryString(d)), this.createImageInfo(e, o.width, o.height, u, f, h, t, n, a, s, c, d, N)
        }
        throw new Error("Unsupported PNG image data, try using JPEG instead.")
    }, (q = le.API).processGIF89A = function (e, t, n, r, i) {
        var o = new Se(e), a = o.width, s = o.height, l = [];
        o.decodeAndBlitFrameRGBA(0, l);
        var c = {data: l, width: a, height: s}, d = new Le(100).encode(c, 100);
        return q.processJPEG.call(this, d, t, n, r)
    }, q.processGIF87A = q.processGIF89A,(U = le.API).processBMP = function (e, t, n, r, i) {
        var o = new Ne(e, !1), a = o.width, s = o.height, l = {data: o.getData(), width: a, height: s},
            c = new Le(100).encode(l, 100);
        return U.processJPEG.call(this, c, t, n, r)
    },le.API.setLanguage = function (e) {
        return void 0 === this.internal.languageSettings && (this.internal.languageSettings = {}, this.internal.languageSettings.isSubscribed = !1), void 0 !== {
            af: "Afrikaans",
            sq: "Albanian",
            ar: "Arabic (Standard)",
            "ar-DZ": "Arabic (Algeria)",
            "ar-BH": "Arabic (Bahrain)",
            "ar-EG": "Arabic (Egypt)",
            "ar-IQ": "Arabic (Iraq)",
            "ar-JO": "Arabic (Jordan)",
            "ar-KW": "Arabic (Kuwait)",
            "ar-LB": "Arabic (Lebanon)",
            "ar-LY": "Arabic (Libya)",
            "ar-MA": "Arabic (Morocco)",
            "ar-OM": "Arabic (Oman)",
            "ar-QA": "Arabic (Qatar)",
            "ar-SA": "Arabic (Saudi Arabia)",
            "ar-SY": "Arabic (Syria)",
            "ar-TN": "Arabic (Tunisia)",
            "ar-AE": "Arabic (U.A.E.)",
            "ar-YE": "Arabic (Yemen)",
            an: "Aragonese",
            hy: "Armenian",
            as: "Assamese",
            ast: "Asturian",
            az: "Azerbaijani",
            eu: "Basque",
            be: "Belarusian",
            bn: "Bengali",
            bs: "Bosnian",
            br: "Breton",
            bg: "Bulgarian",
            my: "Burmese",
            ca: "Catalan",
            ch: "Chamorro",
            ce: "Chechen",
            zh: "Chinese",
            "zh-HK": "Chinese (Hong Kong)",
            "zh-CN": "Chinese (PRC)",
            "zh-SG": "Chinese (Singapore)",
            "zh-TW": "Chinese (Taiwan)",
            cv: "Chuvash",
            co: "Corsican",
            cr: "Cree",
            hr: "Croatian",
            cs: "Czech",
            da: "Danish",
            nl: "Dutch (Standard)",
            "nl-BE": "Dutch (Belgian)",
            en: "English",
            "en-AU": "English (Australia)",
            "en-BZ": "English (Belize)",
            "en-CA": "English (Canada)",
            "en-IE": "English (Ireland)",
            "en-JM": "English (Jamaica)",
            "en-NZ": "English (New Zealand)",
            "en-PH": "English (Philippines)",
            "en-ZA": "English (South Africa)",
            "en-TT": "English (Trinidad & Tobago)",
            "en-GB": "English (United Kingdom)",
            "en-US": "English (United States)",
            "en-ZW": "English (Zimbabwe)",
            eo: "Esperanto",
            et: "Estonian",
            fo: "Faeroese",
            fj: "Fijian",
            fi: "Finnish",
            fr: "French (Standard)",
            "fr-BE": "French (Belgium)",
            "fr-CA": "French (Canada)",
            "fr-FR": "French (France)",
            "fr-LU": "French (Luxembourg)",
            "fr-MC": "French (Monaco)",
            "fr-CH": "French (Switzerland)",
            fy: "Frisian",
            fur: "Friulian",
            gd: "Gaelic (Scots)",
            "gd-IE": "Gaelic (Irish)",
            gl: "Galacian",
            ka: "Georgian",
            de: "German (Standard)",
            "de-AT": "German (Austria)",
            "de-DE": "German (Germany)",
            "de-LI": "German (Liechtenstein)",
            "de-LU": "German (Luxembourg)",
            "de-CH": "German (Switzerland)",
            el: "Greek",
            gu: "Gujurati",
            ht: "Haitian",
            he: "Hebrew",
            hi: "Hindi",
            hu: "Hungarian",
            is: "Icelandic",
            id: "Indonesian",
            iu: "Inuktitut",
            ga: "Irish",
            it: "Italian (Standard)",
            "it-CH": "Italian (Switzerland)",
            ja: "Japanese",
            kn: "Kannada",
            ks: "Kashmiri",
            kk: "Kazakh",
            km: "Khmer",
            ky: "Kirghiz",
            tlh: "Klingon",
            ko: "Korean",
            "ko-KP": "Korean (North Korea)",
            "ko-KR": "Korean (South Korea)",
            la: "Latin",
            lv: "Latvian",
            lt: "Lithuanian",
            lb: "Luxembourgish",
            mk: "FYRO Macedonian",
            ms: "Malay",
            ml: "Malayalam",
            mt: "Maltese",
            mi: "Maori",
            mr: "Marathi",
            mo: "Moldavian",
            nv: "Navajo",
            ng: "Ndonga",
            ne: "Nepali",
            no: "Norwegian",
            nb: "Norwegian (Bokmal)",
            nn: "Norwegian (Nynorsk)",
            oc: "Occitan",
            or: "Oriya",
            om: "Oromo",
            fa: "Persian",
            "fa-IR": "Persian/Iran",
            pl: "Polish",
            pt: "Portuguese",
            "pt-BR": "Portuguese (Brazil)",
            pa: "Punjabi",
            "pa-IN": "Punjabi (India)",
            "pa-PK": "Punjabi (Pakistan)",
            qu: "Quechua",
            rm: "Rhaeto-Romanic",
            ro: "Romanian",
            "ro-MO": "Romanian (Moldavia)",
            ru: "Russian",
            "ru-MO": "Russian (Moldavia)",
            sz: "Sami (Lappish)",
            sg: "Sango",
            sa: "Sanskrit",
            sc: "Sardinian",
            sd: "Sindhi",
            si: "Singhalese",
            sr: "Serbian",
            sk: "Slovak",
            sl: "Slovenian",
            so: "Somani",
            sb: "Sorbian",
            es: "Spanish",
            "es-AR": "Spanish (Argentina)",
            "es-BO": "Spanish (Bolivia)",
            "es-CL": "Spanish (Chile)",
            "es-CO": "Spanish (Colombia)",
            "es-CR": "Spanish (Costa Rica)",
            "es-DO": "Spanish (Dominican Republic)",
            "es-EC": "Spanish (Ecuador)",
            "es-SV": "Spanish (El Salvador)",
            "es-GT": "Spanish (Guatemala)",
            "es-HN": "Spanish (Honduras)",
            "es-MX": "Spanish (Mexico)",
            "es-NI": "Spanish (Nicaragua)",
            "es-PA": "Spanish (Panama)",
            "es-PY": "Spanish (Paraguay)",
            "es-PE": "Spanish (Peru)",
            "es-PR": "Spanish (Puerto Rico)",
            "es-ES": "Spanish (Spain)",
            "es-UY": "Spanish (Uruguay)",
            "es-VE": "Spanish (Venezuela)",
            sx: "Sutu",
            sw: "Swahili",
            sv: "Swedish",
            "sv-FI": "Swedish (Finland)",
            "sv-SV": "Swedish (Sweden)",
            ta: "Tamil",
            tt: "Tatar",
            te: "Teluga",
            th: "Thai",
            tig: "Tigre",
            ts: "Tsonga",
            tn: "Tswana",
            tr: "Turkish",
            tk: "Turkmen",
            uk: "Ukrainian",
            hsb: "Upper Sorbian",
            ur: "Urdu",
            ve: "Venda",
            vi: "Vietnamese",
            vo: "Volapuk",
            wa: "Walloon",
            cy: "Welsh",
            xh: "Xhosa",
            ji: "Yiddish",
            zu: "Zulu"
        }[e] && (this.internal.languageSettings.languageCode = e, !1 === this.internal.languageSettings.isSubscribed && (this.internal.events.subscribe("putCatalog", function () {
            this.internal.write("/Lang (" + this.internal.languageSettings.languageCode + ")")
        }), this.internal.languageSettings.isSubscribed = !0)), this
    },z = le.API,$ = z.getCharWidthsArray = function (e, t) {
        var n, r, i, o = (t = t || {}).font || this.internal.getFont(), a = t.fontSize || this.internal.getFontSize(),
            s = t.charSpace || this.internal.getCharSpace(), l = t.widths ? t.widths : o.metadata.Unicode.widths,
            c = l.fof ? l.fof : 1, d = t.kerning ? t.kerning : o.metadata.Unicode.kerning, u = d.fof ? d.fof : 1, h = 0,
            f = l[0] || c, p = [];
        for (n = 0, r = e.length; n < r; n++) i = e.charCodeAt(n), "function" == typeof o.metadata.widthOfString ? p.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i)) + s * (1e3 / a) || 0) / 1e3) : p.push((l[i] || f) / c + (d[i] && d[i][h] || 0) / u), h = i;
        return p
    },V = z.getArraySum = function (e) {
        for (var t = e.length, n = 0; t;) n += e[--t];
        return n
    },W = z.getStringUnitWidth = function (e, t) {
        var n = (t = t || {}).fontSize || this.internal.getFontSize(), r = t.font || this.internal.getFont(),
            i = t.charSpace || this.internal.getCharSpace();
        return "function" == typeof r.metadata.widthOfString ? r.metadata.widthOfString(e, n, i) / n : V($.apply(this, arguments))
    },G = function (e, t, n, r) {
        for (var i = [], o = 0, a = e.length, s = 0; o !== a && s + t[o] < n;) s += t[o], o++;
        i.push(e.slice(0, o));
        var l = o;
        for (s = 0; o !== a;) s + t[o] > r && (i.push(e.slice(l, o)), s = 0, l = o), s += t[o], o++;
        return l !== o && i.push(e.slice(l, o)), i
    },K = function (e, t, n) {
        var r, i, o, a, s, l, c = [], d = [c], u = (n = n || {}).textIndent || 0, h = 0, f = 0, p = e.split(" "),
            g = $.apply(this, [" ", n])[0];
        if (l = -1 === n.lineIndent ? p[0].length + 2 : n.lineIndent || 0) {
            var m = Array(l).join(" "), v = [];
            p.map(function (e) {
                1 < (e = e.split(/\s*\n/)).length ? v = v.concat(e.map(function (e, t) {
                    return (t && e.length ? "\n" : "") + e
                })) : v.push(e[0])
            }), p = v, l = W.apply(this, [m, n])
        }
        for (o = 0, a = p.length; o < a; o++) {
            var b = 0;
            if (r = p[o], l && "\n" == r[0] && (r = r.substr(1), b = 1), i = $.apply(this, [r, n]), t < u + h + (f = V(i)) || b) {
                if (t < f) {
                    for (s = G.apply(this, [r, i, t - (u + h), t]), c.push(s.shift()), c = [s.pop()]; s.length;) d.push([s.shift()]);
                    f = V(i.slice(r.length - (c[0] ? c[0].length : 0)))
                } else c = [r];
                d.push(c), u = f + l, h = g
            } else c.push(r), u += h + f, h = g
        }
        if (l) var y = function (e, t) {
            return (t ? m : "") + e.join(" ")
        }; else y = function (e) {
            return e.join(" ")
        };
        return d.map(y)
    },z.splitTextToSize = function (e, t, n) {
        var r, i = (n = n || {}).fontSize || this.internal.getFontSize(), o = function (e) {
            if (e.widths && e.kerning) return {widths: e.widths, kerning: e.kerning};
            var t = this.internal.getFont(e.fontName, e.fontStyle), n = "Unicode";
            return t.metadata[n] ? {
                widths: t.metadata[n].widths || {0: 1},
                kerning: t.metadata[n].kerning || {}
            } : {font: t.metadata, fontSize: this.internal.getFontSize(), charSpace: this.internal.getCharSpace()}
        }.call(this, n);
        r = Array.isArray(e) ? e : e.split(/\r?\n/);
        var a = 1 * this.internal.scaleFactor * t / i;
        o.textIndent = n.textIndent ? 1 * n.textIndent * this.internal.scaleFactor / i : 0, o.lineIndent = n.lineIndent;
        var s, l, c = [];
        for (s = 0, l = r.length; s < l; s++) c = c.concat(K.apply(this, [r[s], a, o]));
        return c
    },X = le.API,Y = {
        codePages: ["WinAnsiEncoding"], WinAnsiEncoding: (J = function (e) {
            for (var t = "klmnopqrstuvwxyz", n = {}, r = 0; r < t.length; r++) n[t[r]] = "0123456789abcdef"[r];
            var i, o, a, s, l, c = {}, d = 1, u = c, h = [], f = "", p = "", g = e.length - 1;
            for (r = 1; r != g;) l = e[r], r += 1, "'" == l ? o = o ? (s = o.join(""), i) : [] : o ? o.push(l) : "{" == l ? (h.push([u, s]), u = {}, s = i) : "}" == l ? ((a = h.pop())[0][a[1]] = u, s = i, u = a[0]) : "-" == l ? d = -1 : s === i ? n.hasOwnProperty(l) ? (f += n[l], s = parseInt(f, 16) * d, d = 1, f = "") : f += l : n.hasOwnProperty(l) ? (p += n[l], u[s] = parseInt(p, 16) * d, d = 1, s = i, p = "") : p += l;
            return c
        })("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")
    },Z = {
        Unicode: {
            Courier: Y,
            "Courier-Bold": Y,
            "Courier-BoldOblique": Y,
            "Courier-Oblique": Y,
            Helvetica: Y,
            "Helvetica-Bold": Y,
            "Helvetica-BoldOblique": Y,
            "Helvetica-Oblique": Y,
            "Times-Roman": Y,
            "Times-Bold": Y,
            "Times-BoldItalic": Y,
            "Times-Italic": Y
        }
    },Q = {
        Unicode: {
            "Courier-Oblique": J("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Times-BoldItalic": J("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
            "Helvetica-Bold": J("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
            Courier: J("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Courier-BoldOblique": J("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Times-Bold": J("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
            Symbol: J("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),
            Helvetica: J("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
            "Helvetica-BoldOblique": J("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
            ZapfDingbats: J("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),
            "Courier-Bold": J("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Times-Italic": J("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
            "Times-Roman": J("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
            "Helvetica-Oblique": J("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")
        }
    },X.events.push(["addFont", function (e) {
        var t, n, r, i = e.font, o = "Unicode";
        (t = Q[o][i.postScriptName]) && ((n = i.metadata[o] ? i.metadata[o] : i.metadata[o] = {}).widths = t.widths, n.kerning = t.kerning), (r = Z[o][i.postScriptName]) && ((n = i.metadata[o] ? i.metadata[o] : i.metadata[o] = {}).encoding = r).codePages && r.codePages.length && (i.encoding = r.codePages[0])
    }]),ee = le,void 0 !== self && self || "undefined" != typeof global && global || "undefined" != typeof window && window || Function("return this")(),ee.API.events.push(["addFont", function (e) {
        var t = e.font, n = e.instance;
        if (void 0 !== n && n.existsFileInVFS(t.postScriptName)) {
            var r = n.getFileFromVFS(t.postScriptName);
            if ("string" != typeof r) throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('" + t.postScriptName + "').");
            t.metadata = ee.API.TTFFont.open(t.postScriptName, t.fontName, r, t.encoding), t.metadata.Unicode = t.metadata.Unicode || {
                encoding: {},
                kerning: {},
                widths: []
            }, t.metadata.glyIdsUsed = [0]
        } else if (!1 === t.isStandardFont) throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('" + t.postScriptName + "').")
    }]),(te = le.API).addSvg = function (e, t, n, r, i) {
        if (void 0 === t || void 0 === n) throw new Error("addSVG needs values for 'x' and 'y'");

        function o(e) {
            for (var t = parseFloat(e[1]), n = parseFloat(e[2]), r = [], i = 3, o = e.length; i < o;) "c" === e[i] ? (r.push([parseFloat(e[i + 1]), parseFloat(e[i + 2]), parseFloat(e[i + 3]), parseFloat(e[i + 4]), parseFloat(e[i + 5]), parseFloat(e[i + 6])]), i += 7) : "l" === e[i] ? (r.push([parseFloat(e[i + 1]), parseFloat(e[i + 2])]), i += 3) : i += 1;
            return [t, n, r]
        }

        var a, s, l, c, d, u, h, f,
            p = (a = e, (l = ((s = (f = (c = document).createElement("iframe"), d = ".jsPDF_sillysvg_iframe {display:none;position:absolute;}", (h = (u = c).createElement("style")).type = "text/css", h.styleSheet ? h.styleSheet.cssText = d : h.appendChild(u.createTextNode(d)), u.getElementsByTagName("head")[0].appendChild(h), f.name = "childframe", f.setAttribute("width", 0), f.setAttribute("height", 0), f.setAttribute("frameborder", "0"), f.setAttribute("scrolling", "no"), f.setAttribute("seamless", "seamless"), f.setAttribute("class", "jsPDF_sillysvg_iframe"), c.body.appendChild(f), f)).contentWindow || s.contentDocument).document).write(a), l.close(), l.getElementsByTagName("svg")[0]),
            g = [1, 1], m = parseFloat(p.getAttribute("width")), v = parseFloat(p.getAttribute("height"));
        m && v && (r && i ? g = [r / m, i / v] : r ? g = [r / m, r / m] : i && (g = [i / v, i / v]));
        var b, y, w, k, x = p.childNodes;
        for (b = 0, y = x.length; b < y; b++) (w = x[b]).tagName && "PATH" === w.tagName.toUpperCase() && ((k = o(w.getAttribute("d").split(" ")))[0] = k[0] * g[0] + t, k[1] = k[1] * g[1] + n, this.lines.call(this, k[2], k[0], k[1], g));
        return this
    },te.addSVG = te.addSvg,te.addSvgAsImage = function (e, t, n, r, i, o, a, s) {
        if (isNaN(t) || isNaN(n)) throw new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");
        if (isNaN(r) || isNaN(i)) throw new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");
        var l = document.createElement("canvas");
        l.width = r, l.height = i;
        var c = l.getContext("2d");
        return c.fillStyle = "#fff", c.fillRect(0, 0, l.width, l.height), canvg(l, e, {
            ignoreMouse: !0,
            ignoreAnimation: !0,
            ignoreDimensions: !0,
            ignoreClear: !0
        }), this.addImage(l.toDataURL("image/jpeg", 1), t, n, r, i, a, s), this
    },le.API.putTotalPages = function (e) {
        var t, n;
        n = parseInt(this.internal.getFont().id.substr(1), 10) < 15 ? (t = new RegExp(e, "g"), this.internal.getNumberOfPages()) : (t = new RegExp(this.pdfEscape16(e, this.internal.getFont()), "g"), this.pdfEscape16(this.internal.getNumberOfPages() + "", this.internal.getFont()));
        for (var r = 1; r <= this.internal.getNumberOfPages(); r++) for (var i = 0; i < this.internal.pages[r].length; i++) this.internal.pages[r][i] = this.internal.pages[r][i].replace(t, n);
        return this
    },le.API.viewerPreferences = function (e, t) {
        var n;
        e = e || {}, t = t || !1;
        var r, i, o = {
            HideToolbar: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.3
            },
            HideMenubar: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.3
            },
            HideWindowUI: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.3
            },
            FitWindow: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.3
            },
            CenterWindow: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.3
            },
            DisplayDocTitle: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.4
            },
            NonFullScreenPageMode: {
                defaultValue: "UseNone",
                value: "UseNone",
                type: "name",
                explicitSet: !1,
                valueSet: ["UseNone", "UseOutlines", "UseThumbs", "UseOC"],
                pdfVersion: 1.3
            },
            Direction: {
                defaultValue: "L2R",
                value: "L2R",
                type: "name",
                explicitSet: !1,
                valueSet: ["L2R", "R2L"],
                pdfVersion: 1.3
            },
            ViewArea: {
                defaultValue: "CropBox",
                value: "CropBox",
                type: "name",
                explicitSet: !1,
                valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"],
                pdfVersion: 1.4
            },
            ViewClip: {
                defaultValue: "CropBox",
                value: "CropBox",
                type: "name",
                explicitSet: !1,
                valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"],
                pdfVersion: 1.4
            },
            PrintArea: {
                defaultValue: "CropBox",
                value: "CropBox",
                type: "name",
                explicitSet: !1,
                valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"],
                pdfVersion: 1.4
            },
            PrintClip: {
                defaultValue: "CropBox",
                value: "CropBox",
                type: "name",
                explicitSet: !1,
                valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"],
                pdfVersion: 1.4
            },
            PrintScaling: {
                defaultValue: "AppDefault",
                value: "AppDefault",
                type: "name",
                explicitSet: !1,
                valueSet: ["AppDefault", "None"],
                pdfVersion: 1.6
            },
            Duplex: {
                defaultValue: "",
                value: "none",
                type: "name",
                explicitSet: !1,
                valueSet: ["Simplex", "DuplexFlipShortEdge", "DuplexFlipLongEdge", "none"],
                pdfVersion: 1.7
            },
            PickTrayByPDFSize: {
                defaultValue: !1,
                value: !1,
                type: "boolean",
                explicitSet: !1,
                valueSet: [!0, !1],
                pdfVersion: 1.7
            },
            PrintPageRange: {
                defaultValue: "",
                value: "",
                type: "array",
                explicitSet: !1,
                valueSet: null,
                pdfVersion: 1.7
            },
            NumCopies: {defaultValue: 1, value: 1, type: "integer", explicitSet: !1, valueSet: null, pdfVersion: 1.7}
        }, a = Object.keys(o), s = [], l = 0, c = 0, d = 0, u = !0;

        function h(e, t) {
            var n, r = !1;
            for (n = 0; n < e.length; n += 1) e[n] === t && (r = !0);
            return r
        }

        if (void 0 === this.internal.viewerpreferences && (this.internal.viewerpreferences = {}, this.internal.viewerpreferences.configuration = JSON.parse(JSON.stringify(o)), this.internal.viewerpreferences.isSubscribed = !1), n = this.internal.viewerpreferences.configuration, "reset" === e || !0 === t) {
            var f = a.length;
            for (d = 0; d < f; d += 1) n[a[d]].value = n[a[d]].defaultValue, n[a[d]].explicitSet = !1
        }
        if ("object" === rt(e)) for (r in e) if (i = e[r], h(a, r) && void 0 !== i) {
            if ("boolean" === n[r].type && "boolean" == typeof i) n[r].value = i; else if ("name" === n[r].type && h(n[r].valueSet, i)) n[r].value = i; else if ("integer" === n[r].type && Number.isInteger(i)) n[r].value = i; else if ("array" === n[r].type) {
                for (l = 0; l < i.length; l += 1) if (u = !0, 1 === i[l].length && "number" == typeof i[l][0]) s.push(String(i[l] - 1)); else if (1 < i[l].length) {
                    for (c = 0; c < i[l].length; c += 1) "number" != typeof i[l][c] && (u = !1);
                    !0 === u && s.push([i[l][0] - 1, i[l][1] - 1].join(" "))
                }
                n[r].value = "[" + s.join(" ") + "]"
            } else n[r].value = n[r].defaultValue;
            n[r].explicitSet = !0
        }
        return !1 === this.internal.viewerpreferences.isSubscribed && (this.internal.events.subscribe("putCatalog", function () {
            var e, t = [];
            for (e in n) !0 === n[e].explicitSet && ("name" === n[e].type ? t.push("/" + e + " /" + n[e].value) : t.push("/" + e + " " + n[e].value));
            0 !== t.length && this.internal.write("/ViewerPreferences\n<<\n" + t.join("\n") + "\n>>")
        }), this.internal.viewerpreferences.isSubscribed = !0), this.internal.viewerpreferences.configuration = n, this
    },ne = le.API,oe = ie = re = "",ne.addMetadata = function (e, t) {
        return ie = t || "http://jspdf.default.namespaceuri/", re = e, this.internal.events.subscribe("postPutResources", function () {
            if (re) {
                var e = '<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="' + ie + '"><jspdf:metadata>',
                    t = unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),
                    n = unescape(encodeURIComponent(e)), r = unescape(encodeURIComponent(re)),
                    i = unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),
                    o = unescape(encodeURIComponent("</x:xmpmeta>")),
                    a = n.length + r.length + i.length + t.length + o.length;
                oe = this.internal.newObject(), this.internal.write("<< /Type /Metadata /Subtype /XML /Length " + a + " >>"), this.internal.write("stream"), this.internal.write(t + n + r + i + o), this.internal.write("endstream"), this.internal.write("endobj")
            } else oe = ""
        }), this.internal.events.subscribe("putCatalog", function () {
            oe && this.internal.write("/Metadata " + oe + " 0 R")
        }), this
    },function (h) {
        function f(e) {
            var t, n, r, i, o, a, s;
            for (o = "/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange", r = [], a = 0, s = (n = Object.keys(e).sort(function (e, t) {
                return e - t
            })).length; a < s; a++) t = n[a], 100 <= r.length && (o += "\n" + r.length + " beginbfchar\n" + r.join("\n") + "\nendbfchar", r = []), i = ("0000" + e[t].toString(16)).slice(-4), t = ("0000" + (+t).toString(16)).slice(-4), r.push("<" + t + "><" + i + ">");
            return r.length && (o += "\n" + r.length + " beginbfchar\n" + r.join("\n") + "\nendbfchar\n"), o + "endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"
        }

        var e = h.API, m = e.pdfEscape16 = function (e, t) {
            for (var n, r = t.metadata.Unicode.widths, i = ["", "0", "00", "000", "0000"], o = [""], a = 0, s = e.length; a < s; ++a) {
                if (n = t.metadata.characterToGlyph(e.charCodeAt(a)), t.metadata.glyIdsUsed.push(n), t.metadata.toUnicode[n] = e.charCodeAt(a), -1 == r.indexOf(n) && (r.push(n), r.push([parseInt(t.metadata.widthOfGlyph(n), 10)])), "0" == n) return o.join("");
                n = n.toString(16), o.push(i[4 - n.length], n)
            }
            return o.join("")
        };
        e.events.push(["putFont", function (e) {
            !function (e, t, n, r) {
                if (e.metadata instanceof h.API.TTFFont && "Identity-H" === e.encoding) {
                    for (var i = e.metadata.Unicode.widths, o = e.metadata.subset.encode(e.metadata.glyIdsUsed, 1), a = "", s = 0; s < o.length; s++) a += String.fromCharCode(o[s]);
                    var l = n();
                    r({data: a, addLength1: !0}), t("endobj");
                    var c = n();
                    r({data: f(e.metadata.toUnicode), addLength1: !0}), t("endobj");
                    var d = n();
                    t("<<"), t("/Type /FontDescriptor"), t("/FontName /" + e.fontName), t("/FontFile2 " + l + " 0 R"), t("/FontBBox " + h.API.PDFObject.convert(e.metadata.bbox)), t("/Flags " + e.metadata.flags), t("/StemV " + e.metadata.stemV), t("/ItalicAngle " + e.metadata.italicAngle), t("/Ascent " + e.metadata.ascender), t("/Descent " + e.metadata.decender), t("/CapHeight " + e.metadata.capHeight), t(">>"), t("endobj");
                    var u = n();
                    t("<<"), t("/Type /Font"), t("/BaseFont /" + e.fontName), t("/FontDescriptor " + d + " 0 R"), t("/W " + h.API.PDFObject.convert(i)), t("/CIDToGIDMap /Identity"), t("/DW 1000"), t("/Subtype /CIDFontType2"), t("/CIDSystemInfo"), t("<<"), t("/Supplement 0"), t("/Registry (Adobe)"), t("/Ordering (" + e.encoding + ")"), t(">>"), t(">>"), t("endobj"), e.objectNumber = n(), t("<<"), t("/Type /Font"), t("/Subtype /Type0"), t("/ToUnicode " + c + " 0 R"), t("/BaseFont /" + e.fontName), t("/Encoding /" + e.encoding), t("/DescendantFonts [" + u + " 0 R]"), t(">>"), t("endobj"), e.isAlreadyPutted = !0
                }
            }(e.font, e.out, e.newObject, e.putStream)
        }]), e.events.push(["putFont", function (e) {
            !function (e, t, n, r) {
                if (e.metadata instanceof h.API.TTFFont && "WinAnsiEncoding" === e.encoding) {
                    e.metadata.Unicode.widths;
                    for (var i = e.metadata.rawData, o = "", a = 0; a < i.length; a++) o += String.fromCharCode(i[a]);
                    var s = n();
                    r({data: o, addLength1: !0}), t("endobj");
                    var l = n();
                    r({data: f(e.metadata.toUnicode), addLength1: !0}), t("endobj");
                    var c = n();
                    for (t("<<"), t("/Descent " + e.metadata.decender), t("/CapHeight " + e.metadata.capHeight), t("/StemV " + e.metadata.stemV), t("/Type /FontDescriptor"), t("/FontFile2 " + s + " 0 R"), t("/Flags 96"), t("/FontBBox " + h.API.PDFObject.convert(e.metadata.bbox)), t("/FontName /" + e.fontName), t("/ItalicAngle " + e.metadata.italicAngle), t("/Ascent " + e.metadata.ascender), t(">>"), t("endobj"), e.objectNumber = n(), a = 0; a < e.metadata.hmtx.widths.length; a++) e.metadata.hmtx.widths[a] = parseInt(e.metadata.hmtx.widths[a] * (1e3 / e.metadata.head.unitsPerEm));
                    t("<</Subtype/TrueType/Type/Font/ToUnicode " + l + " 0 R/BaseFont/" + e.fontName + "/FontDescriptor " + c + " 0 R/Encoding/" + e.encoding + " /FirstChar 29 /LastChar 255 /Widths " + h.API.PDFObject.convert(e.metadata.hmtx.widths) + ">>"), t("endobj"), e.isAlreadyPutted = !0
                }
            }(e.font, e.out, e.newObject, e.putStream)
        }]);

        function c(e) {
            var t, n, r = e.text || "", i = e.x, o = e.y, a = e.options || {}, s = e.mutex || {}, l = s.pdfEscape,
                c = s.activeFontKey, d = s.fonts, u = (s.activeFontSize, ""), h = 0, f = "", p = d[n = c].encoding;
            if ("Identity-H" !== d[n].encoding) return {text: r, x: i, y: o, options: a, mutex: s};
            for (f = r, n = c, "[object Array]" === Object.prototype.toString.call(r) && (f = r[0]), h = 0; h < f.length; h += 1) d[n].metadata.hasOwnProperty("cmap") && (t = d[n].metadata.cmap.unicode.codeMap[f[h].charCodeAt(0)]), t ? u += f[h] : f[h].charCodeAt(0) < 256 && d[n].metadata.hasOwnProperty("Unicode") ? u += f[h] : u += "";
            var g = "";
            return parseInt(n.slice(1)) < 14 || "WinAnsiEncoding" === p ? g = function (e) {
                for (var t = "", n = 0; n < e.length; n++) t += "" + e.charCodeAt(n).toString(16);
                return t
            }(l(u, n)) : "Identity-H" === p && (g = m(u, d[n])), s.isHex = !0, {
                text: g,
                x: i,
                y: o,
                options: a,
                mutex: s
            }
        }

        e.events.push(["postProcessText", function (e) {
            var t = e.text || "", n = e.x, r = e.y, i = e.options, o = e.mutex, a = (i.lang, []),
                s = {text: t, x: n, y: r, options: i, mutex: o};
            if ("[object Array]" === Object.prototype.toString.call(t)) {
                var l = 0;
                for (l = 0; l < t.length; l += 1) "[object Array]" === Object.prototype.toString.call(t[l]) && 3 === t[l].length ? a.push([c(Object.assign({}, s, {text: t[l][0]})).text, t[l][1], t[l][2]]) : a.push(c(Object.assign({}, s, {text: t[l]})).text);
                e.text = a
            } else e.text = c(Object.assign({}, s, {text: t})).text
        }])
    }(le, void 0 !== self && self || "undefined" != typeof global && global || "undefined" != typeof window && window || Function("return this")()),ae = le.API,se = function (e) {
        return void 0 !== e && (void 0 === e.vFS && (e.vFS = {}), !0)
    },ae.existsFileInVFS = function (e) {
        return !!se(this.internal) && void 0 !== this.internal.vFS[e]
    },ae.addFileToVFS = function (e, t) {
        return se(this.internal), this.internal.vFS[e] = t, this
    },ae.getFileFromVFS = function (e) {
        return se(this.internal), void 0 !== this.internal.vFS[e] ? this.internal.vFS[e] : null
    },le.API.addHTML = function (e, p, g, s, m) {
        if ("undefined" == typeof html2canvas && "undefined" == typeof rasterizeHTML) throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");
        "number" != typeof p && (s = p, m = g), "function" == typeof s && (m = s, s = null), "function" != typeof m && (m = function () {
        });
        var t = this.internal, v = t.scaleFactor, b = t.pageSize.getWidth(), y = t.pageSize.getHeight();
        if ((s = s || {}).onrendered = function (l) {
            p = parseInt(p) || 0, g = parseInt(g) || 0;
            var e = s.dim || {}, c = Object.assign({top: 0, right: 0, bottom: 0, left: 0, useFor: "content"}, s.margin),
                t = e.h || Math.min(y, l.height / v), d = e.w || Math.min(b, l.width / v) - p, u = s.format || "JPEG",
                h = s.imageCompression || "SLOW";
            if (l.height > y - c.top - c.bottom && s.pagesplit) {
                var f = function (e, t, n, r, i) {
                    var o = document.createElement("canvas");
                    o.height = i, o.width = r;
                    var a = o.getContext("2d");
                    return a.mozImageSmoothingEnabled = !1, a.webkitImageSmoothingEnabled = !1, a.msImageSmoothingEnabled = !1, a.imageSmoothingEnabled = !1, a.fillStyle = s.backgroundColor || "#ffffff", a.fillRect(0, 0, r, i), a.drawImage(e, t, n, r, i, 0, 0, r, i), o
                }, n = function () {
                    for (var e, t, n = 0, r = 0, i = {}, o = !1; ;) {
                        var a;
                        if (r = 0, i.top = 0 !== n ? c.top : g, i.left = 0 !== n ? c.left : p, o = (b - c.left - c.right) * v < l.width, "content" === c.useFor ? 0 === n ? (e = Math.min((b - c.left) * v, l.width), t = Math.min((y - c.top) * v, l.height - n)) : (e = Math.min(b * v, l.width), t = Math.min(y * v, l.height - n), i.top = 0) : (e = Math.min((b - c.left - c.right) * v, l.width), t = Math.min((y - c.bottom - c.top) * v, l.height - n)), o) for (; ;) {
                            "content" === c.useFor && (0 === r ? e = Math.min((b - c.left) * v, l.width) : (e = Math.min(b * v, l.width - r), i.left = 0));
                            var s = [a = f(l, r, n, e, t), i.left, i.top, a.width / v, a.height / v, u, null, h];
                            if (this.addImage.apply(this, s), (r += e) >= l.width) break;
                            this.addPage()
                        } else s = [a = f(l, 0, n, e, t), i.left, i.top, a.width / v, a.height / v, u, null, h], this.addImage.apply(this, s);
                        if ((n += t) >= l.height) break;
                        this.addPage()
                    }
                    m(d, n, null, s)
                }.bind(this);
                if ("CANVAS" === l.nodeName) {
                    var r = new Image;
                    r.onload = n, r.src = l.toDataURL("image/png"), l = r
                } else n()
            } else {
                var i = Math.random().toString(35), o = [l, p, g, d, t, u, i, h];
                this.addImage.apply(this, o), m(d, t, i, o)
            }
        }.bind(this), "undefined" != typeof html2canvas && !s.rstz) return html2canvas(e, s);
        if ("undefined" == typeof rasterizeHTML) return null;
        var n = "drawDocument";
        return "string" == typeof e && (n = /^http/.test(e) ? "drawURL" : "drawHTML"), s.width = s.width || b * v, rasterizeHTML[n](e, void 0, s).then(function (e) {
            s.onrendered(e.image)
        }, function (e) {
            m(null, e)
        })
    },function (e) {
        var I, E, i, a, s, l, c, d, T, y, h, u, f, n, B, O, p, g, m, P;

        function t() {
        }

        I = function (e) {
            return t.prototype = e, new t
        }, y = function (e) {
            var t, n, r, i, o, a, s;
            for (n = 0, r = e.length, t = void 0, a = i = !1; !i && n !== r;) (t = e[n] = e[n].trimLeft()) && (i = !0), n++;
            for (n = r - 1; r && !a && -1 !== n;) (t = e[n] = e[n].trimRight()) && (a = !0), n--;
            for (o = /\s+$/g, s = !0, n = 0; n !== r;) "\u2028" != e[n] && (t = e[n].replace(/\s+/g, " "), s && (t = t.trimLeft()), t && (s = o.test(t)), e[n] = t), n++;
            return e
        }, u = function (e) {
            var t, n, r;
            for (t = void 0, n = (r = e.split(",")).shift(); !t && n;) t = i[n.trim().toLowerCase()], n = r.shift();
            return t
        }, f = function (e) {
            var t;
            return -1 < (e = "auto" === e ? "0px" : e).indexOf("em") && !isNaN(Number(e.replace("em", ""))) && (e = 18.719 * Number(e.replace("em", "")) + "px"), -1 < e.indexOf("pt") && !isNaN(Number(e.replace("pt", ""))) && (e = 1.333 * Number(e.replace("pt", "")) + "px"), (t = n[e]) ? t : void 0 !== (t = {
                "xx-small": 9,
                "x-small": 11,
                small: 13,
                medium: 16,
                large: 19,
                "x-large": 23,
                "xx-large": 28,
                auto: 0
            }[e]) ? n[e] = t / 16 : (t = parseFloat(e)) ? n[e] = t / 16 : (t = e.match(/([\d\.]+)(px)/), Array.isArray(t) && 3 === t.length ? n[e] = parseFloat(t[1]) / 16 : n[e] = 1)
        }, T = function (e) {
            var t, n, r, i, o;
            return o = e, i = document.defaultView && document.defaultView.getComputedStyle ? document.defaultView.getComputedStyle(o, null) : o.currentStyle ? o.currentStyle : o.style, n = void 0, (t = {})["font-family"] = u((r = function (e) {
                return e = e.replace(/-\D/g, function (e) {
                    return e.charAt(1).toUpperCase()
                }), i[e]
            })("font-family")) || "times", t["font-style"] = a[r("font-style")] || "normal", t["text-align"] = s[r("text-align")] || "left", "bold" === (n = l[r("font-weight")] || "normal") && ("normal" === t["font-style"] ? t["font-style"] = n : t["font-style"] = n + t["font-style"]), t["font-size"] = f(r("font-size")) || 1, t["line-height"] = f(r("line-height")) || 1, t.display = "inline" === r("display") ? "inline" : "block", n = "block" === t.display, t["margin-top"] = n && f(r("margin-top")) || 0, t["margin-bottom"] = n && f(r("margin-bottom")) || 0, t["padding-top"] = n && f(r("padding-top")) || 0, t["padding-bottom"] = n && f(r("padding-bottom")) || 0, t["margin-left"] = n && f(r("margin-left")) || 0, t["margin-right"] = n && f(r("margin-right")) || 0, t["padding-left"] = n && f(r("padding-left")) || 0, t["padding-right"] = n && f(r("padding-right")) || 0, t["page-break-before"] = r("page-break-before") || "auto", t.float = c[r("cssFloat")] || "none", t.clear = d[r("clear")] || "none", t.color = r("color"), t
        }, B = function (e, t, n) {
            var r, i, o, a, s;
            if (o = !1, a = i = void 0, r = n["#" + e.id]) if ("function" == typeof r) o = r(e, t); else for (i = 0, a = r.length; !o && i !== a;) o = r[i](e, t), i++;
            if (r = n[e.nodeName], !o && r) if ("function" == typeof r) o = r(e, t); else for (i = 0, a = r.length; !o && i !== a;) o = r[i](e, t), i++;
            for (s = "string" == typeof e.className ? e.className.split(" ") : [], i = 0; i < s.length; i++) if (r = n["." + s[i]], !o && r) if ("function" == typeof r) o = r(e, t); else for (i = 0, a = r.length; !o && i !== a;) o = r[i](e, t), i++;
            return o
        }, P = function (e, t) {
            var n, r, i, o, a, s, l, c, d;
            for (n = [], r = [], i = 0, d = e.rows[0].cells.length, l = e.clientWidth; i < d;) c = e.rows[0].cells[i], r[i] = {
                name: c.textContent.toLowerCase().replace(/\s+/g, ""),
                prompt: c.textContent.replace(/\r?\n/g, ""),
                width: c.clientWidth / l * t.pdf.internal.pageSize.getWidth()
            }, i++;
            for (i = 1; i < e.rows.length;) {
                for (s = e.rows[i], a = {}, o = 0; o < s.cells.length;) a[r[o].name] = s.cells[o].textContent.replace(/\r?\n/g, ""), o++;
                n.push(a), i++
            }
            return {rows: n, headers: r}
        };
        var M = {SCRIPT: 1, STYLE: 1, NOSCRIPT: 1, OBJECT: 1, EMBED: 1, SELECT: 1}, _ = 1;
        E = function (e, i, t) {
            var n, r, o, a, s, l, c, d;
            for (r = e.childNodes, n = void 0, (s = "block" === (o = T(e)).display) && (i.setBlockBoundary(), i.setBlockStyle(o)), a = 0, l = r.length; a < l;) {
                if ("object" === rt(n = r[a])) {
                    if (i.executeWatchFunctions(n), 1 === n.nodeType && "HEADER" === n.nodeName) {
                        var u = n, h = i.pdf.margins_doc.top;
                        i.pdf.internal.events.subscribe("addPage", function (e) {
                            i.y = h, E(u, i, t), i.pdf.margins_doc.top = i.y + 10, i.y += 10
                        }, !1)
                    }
                    if (8 === n.nodeType && "#comment" === n.nodeName) ~n.textContent.indexOf("ADD_PAGE") && (i.pdf.addPage(), i.y = i.pdf.margins_doc.top); else if (1 !== n.nodeType || M[n.nodeName]) if (3 === n.nodeType) {
                        var f = n.nodeValue;
                        if (n.nodeValue && "LI" === n.parentNode.nodeName) if ("OL" === n.parentNode.parentNode.nodeName) f = _++ + ". " + f; else {
                            var p = o["font-size"], g = (3 - .75 * p) * i.pdf.internal.scaleFactor,
                                m = .75 * p * i.pdf.internal.scaleFactor, v = 1.74 * p / i.pdf.internal.scaleFactor;
                            d = function (e, t) {
                                this.pdf.circle(e + g, t + m, v, "FD")
                            }
                        }
                        16 & n.ownerDocument.body.compareDocumentPosition(n) && i.addText(f, o)
                    } else "string" == typeof n && i.addText(n, o); else {
                        var b;
                        if ("IMG" === n.nodeName) {
                            var y = n.getAttribute("src");
                            b = O[i.pdf.sHashCode(y) || y]
                        }
                        if (b) {
                            i.pdf.internal.pageSize.getHeight() - i.pdf.margins_doc.bottom < i.y + n.height && i.y > i.pdf.margins_doc.top && (i.pdf.addPage(), i.y = i.pdf.margins_doc.top, i.executeWatchFunctions(n));
                            var w = T(n), k = i.x, x = 12 / i.pdf.internal.scaleFactor,
                                C = (w["margin-left"] + w["padding-left"]) * x,
                                S = (w["margin-right"] + w["padding-right"]) * x,
                                A = (w["margin-top"] + w["padding-top"]) * x,
                                L = (w["margin-bottom"] + w["padding-bottom"]) * x;
                            void 0 !== w.float && "right" === w.float ? k += i.settings.width - n.width - S : k += C, i.pdf.addImage(b, k, i.y + A, n.width, n.height), b = void 0, "right" === w.float || "left" === w.float ? (i.watchFunctions.push(function (e, t, n, r) {
                                return i.y >= t ? (i.x += e, i.settings.width += n, !0) : !!(r && 1 === r.nodeType && !M[r.nodeName] && i.x + r.width > i.pdf.margins_doc.left + i.pdf.margins_doc.width) && (i.x += e, i.y = t, i.settings.width += n, !0)
                            }.bind(this, "left" === w.float ? -n.width - C - S : 0, i.y + n.height + A + L, n.width)), i.watchFunctions.push(function (e, t, n) {
                                return !(i.y < e && t === i.pdf.internal.getNumberOfPages()) || 1 === n.nodeType && "both" === T(n).clear && (i.y = e, !0)
                            }.bind(this, i.y + n.height, i.pdf.internal.getNumberOfPages())), i.settings.width -= n.width + C + S, "left" === w.float && (i.x += n.width + C + S)) : i.y += n.height + A + L
                        } else if ("TABLE" === n.nodeName) c = P(n, i), i.y += 10, i.pdf.table(i.x, i.y, c.rows, c.headers, {
                            autoSize: !1,
                            printHeaders: t.printHeaders,
                            margins: i.pdf.margins_doc,
                            css: T(n)
                        }), i.y = i.pdf.lastCellPos.y + i.pdf.lastCellPos.h + 20; else if ("OL" === n.nodeName || "UL" === n.nodeName) _ = 1, B(n, i, t) || E(n, i, t), i.y += 10; else if ("LI" === n.nodeName) {
                            var N = i.x;
                            i.x += 20 / i.pdf.internal.scaleFactor, i.y += 3, B(n, i, t) || E(n, i, t), i.x = N
                        } else "BR" === n.nodeName ? (i.y += o["font-size"] * i.pdf.internal.scaleFactor, i.addText("\u2028", I(o))) : B(n, i, t) || E(n, i, t)
                    }
                }
                a++
            }
            if (t.outY = i.y, s) return i.setBlockBoundary(d)
        }, O = {}, p = function (e, o, t, n) {
            var a, r = e.getElementsByTagName("img"), i = r.length, s = 0;

            function l() {
                o.pdf.internal.events.publish("imagesLoaded"), n(a)
            }

            function c(t, n, r) {
                if (t) {
                    var i = new Image;
                    a = ++s, i.crossOrigin = "", i.onerror = i.onload = function () {
                        if (i.complete && (0 === i.src.indexOf("data:image/") && (i.width = n || i.width || 0, i.height = r || i.height || 0), i.width + i.height)) {
                            var e = o.pdf.sHashCode(t) || t;
                            O[e] = O[e] || i
                        }
                        --s || l()
                    }, i.src = t
                }
            }

            for (; i--;) c(r[i].getAttribute("src"), r[i].width, r[i].height);
            return s || l()
        }, g = function (e, o, a) {
            var s = e.getElementsByTagName("footer");
            if (0 < s.length) {
                s = s[0];
                var t = o.pdf.internal.write, n = o.y;
                o.pdf.internal.write = function () {
                }, E(s, o, a);
                var l = Math.ceil(o.y - n) + 5;
                o.y = n, o.pdf.internal.write = t, o.pdf.margins_doc.bottom += l;
                for (var r = function (e) {
                    var t = void 0 !== e ? e.pageNumber : 1, n = o.y;
                    o.y = o.pdf.internal.pageSize.getHeight() - o.pdf.margins_doc.bottom, o.pdf.margins_doc.bottom -= l;
                    for (var r = s.getElementsByTagName("span"), i = 0; i < r.length; ++i) -1 < (" " + r[i].className + " ").replace(/[\n\t]/g, " ").indexOf(" pageCounter ") && (r[i].innerHTML = t), -1 < (" " + r[i].className + " ").replace(/[\n\t]/g, " ").indexOf(" totalPages ") && (r[i].innerHTML = "###jsPDFVarTotalPages###");
                    E(s, o, a), o.pdf.margins_doc.bottom += l, o.y = n
                }, i = s.getElementsByTagName("span"), c = 0; c < i.length; ++c) -1 < (" " + i[c].className + " ").replace(/[\n\t]/g, " ").indexOf(" totalPages ") && o.pdf.internal.events.subscribe("htmlRenderingFinished", o.pdf.putTotalPages.bind(o.pdf, "###jsPDFVarTotalPages###"), !0);
                o.pdf.internal.events.subscribe("addPage", r, !1), r(), M.FOOTER = 1
            }
        }, m = function (e, t, n, r, i, o) {
            if (!t) return !1;
            var a, s, l, c;
            "string" == typeof t || t.parentNode || (t = "" + t.innerHTML), "string" == typeof t && (a = t.replace(/<\/?script[^>]*?>/gi, ""), c = "jsPDFhtmlText" + Date.now().toString() + (1e3 * Math.random()).toFixed(0), (l = document.createElement("div")).style.cssText = "position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;", l.innerHTML = '<iframe style="height:1px;width:1px" name="' + c + '" />', document.body.appendChild(l), (s = window.frames[c]).document.open(), s.document.writeln(a), s.document.close(), t = s.document.body);
            var d, u = new h(e, n, r, i);
            return p.call(this, t, u, i.elementHandlers, function (e) {
                g(t, u, i.elementHandlers), E(t, u, i.elementHandlers), u.pdf.internal.events.publish("htmlRenderingFinished"), d = u.dispose(), "function" == typeof o && o(d)
            }), d || {x: u.x, y: u.y}
        }, (h = function (e, t, n, r) {
            return this.pdf = e, this.x = t, this.y = n, this.settings = r, this.watchFunctions = [], this.init(), this
        }).prototype.init = function () {
            return this.paragraph = {text: [], style: []}, this.pdf.internal.write("q")
        }, h.prototype.dispose = function () {
            return this.pdf.internal.write("Q"), {x: this.x, y: this.y, ready: !0}
        }, h.prototype.executeWatchFunctions = function (e) {
            var t = !1, n = [];
            if (0 < this.watchFunctions.length) {
                for (var r = 0; r < this.watchFunctions.length; ++r) !0 === this.watchFunctions[r](e) ? t = !0 : n.push(this.watchFunctions[r]);
                this.watchFunctions = n
            }
            return t
        }, h.prototype.splitFragmentsIntoLines = function (e, t) {
            var n, r, i, o, a, s, l, c, d, u, h, f, p, g;
            for (u = this.pdf.internal.scaleFactor, o = {}, s = l = c = g = a = i = d = r = void 0, f = [h = []], n = 0, p = this.settings.width; e.length;) if (a = e.shift(), g = t.shift(), a) if ((i = o[(r = g["font-family"]) + (d = g["font-style"])]) || (i = this.pdf.internal.getFont(r, d).metadata.Unicode, o[r + d] = i), c = {
                widths: i.widths,
                kerning: i.kerning,
                fontSize: 12 * g["font-size"],
                textIndent: n
            }, l = this.pdf.getStringUnitWidth(a, c) * c.fontSize / u, "\u2028" == a) h = [], f.push(h); else if (p < n + l) {
                for (s = this.pdf.splitTextToSize(a, p, c), h.push([s.shift(), g]); s.length;) h = [[s.shift(), g]], f.push(h);
                n = this.pdf.getStringUnitWidth(h[0][0], c) * c.fontSize / u
            } else h.push([a, g]), n += l;
            if (void 0 !== g["text-align"] && ("center" === g["text-align"] || "right" === g["text-align"] || "justify" === g["text-align"])) for (var m = 0; m < f.length; ++m) {
                var v = this.pdf.getStringUnitWidth(f[m][0][0], c) * c.fontSize / u;
                0 < m && (f[m][0][1] = I(f[m][0][1]));
                var b = p - v;
                if ("right" === g["text-align"]) f[m][0][1]["margin-left"] = b; else if ("center" === g["text-align"]) f[m][0][1]["margin-left"] = b / 2; else if ("justify" === g["text-align"]) {
                    var y = f[m][0][0].split(" ").length - 1;
                    f[m][0][1]["word-spacing"] = b / y, m === f.length - 1 && (f[m][0][1]["word-spacing"] = 0)
                }
            }
            return f
        }, h.prototype.RenderTextFragment = function (e, t) {
            var n, r;
            r = 0, this.pdf.internal.pageSize.getHeight() - this.pdf.margins_doc.bottom < this.y + this.pdf.internal.getFontSize() && (this.pdf.internal.write("ET", "Q"), this.pdf.addPage(), this.y = this.pdf.margins_doc.top, this.pdf.internal.write("q", "BT", this.getPdfColor(t.color), this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td"), r = Math.max(r, t["line-height"], t["font-size"]), this.pdf.internal.write(0, (-12 * r).toFixed(2), "Td")), n = this.pdf.internal.getFont(t["font-family"], t["font-style"]);
            var i = this.getPdfColor(t.color);
            i !== this.lastTextColor && (this.pdf.internal.write(i), this.lastTextColor = i), void 0 !== t["word-spacing"] && 0 < t["word-spacing"] && this.pdf.internal.write(t["word-spacing"].toFixed(2), "Tw"), this.pdf.internal.write("/" + n.id, (12 * t["font-size"]).toFixed(2), "Tf", "(" + this.pdf.internal.pdfEscape(e) + ") Tj"), void 0 !== t["word-spacing"] && this.pdf.internal.write(0, "Tw")
        }, h.prototype.getPdfColor = function (e) {
            var t, n, r, i = /rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(e);
            if (null != i) t = parseInt(i[1]), n = parseInt(i[2]), r = parseInt(i[3]); else {
                if ("string" == typeof e && "#" != e.charAt(0)) {
                    var o = new RGBColor(e);
                    e = o.ok ? o.toHex() : "#000000"
                }
                t = e.substring(1, 3), t = parseInt(t, 16), n = e.substring(3, 5), n = parseInt(n, 16), r = e.substring(5, 7), r = parseInt(r, 16)
            }
            if ("string" == typeof t && /^#[0-9A-Fa-f]{6}$/.test(t)) {
                var a = parseInt(t.substr(1), 16);
                t = a >> 16 & 255, n = a >> 8 & 255, r = 255 & a
            }
            var s = this.f3;
            return 0 === t && 0 === n && 0 === r || void 0 === n ? s(t / 255) + " g" : [s(t / 255), s(n / 255), s(r / 255), "rg"].join(" ")
        }, h.prototype.f3 = function (e) {
            return e.toFixed(3)
        }, h.prototype.renderParagraph = function (e) {
            var t, n, r, i, o, a, s, l, c, d, u, h, f;
            if (r = y(this.paragraph.text), h = this.paragraph.style, t = this.paragraph.blockstyle, this.paragraph.priorblockstyle, this.paragraph = {
                text: [],
                style: [],
                blockstyle: {},
                priorblockstyle: t
            }, r.join("").trim()) {
                s = this.splitFragmentsIntoLines(r, h), l = a = void 0, n = 12 / this.pdf.internal.scaleFactor, this.priorMarginBottom = this.priorMarginBottom || 0, u = (Math.max((t["margin-top"] || 0) - this.priorMarginBottom, 0) + (t["padding-top"] || 0)) * n, d = ((t["margin-bottom"] || 0) + (t["padding-bottom"] || 0)) * n, this.priorMarginBottom = t["margin-bottom"] || 0, "always" === t["page-break-before"] && (this.pdf.addPage(), this.y = 0, u = ((t["margin-top"] || 0) + (t["padding-top"] || 0)) * n), c = this.pdf.internal.write, o = i = void 0, this.y += u, c("q", "BT 0 g", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td");
                for (var p = 0; s.length;) {
                    for (i = l = 0, o = (a = s.shift()).length; i !== o;) a[i][0].trim() && (l = Math.max(l, a[i][1]["line-height"], a[i][1]["font-size"]), f = 7 * a[i][1]["font-size"]), i++;
                    var g = 0, m = 0;
                    for (void 0 !== a[0][1]["margin-left"] && 0 < a[0][1]["margin-left"] && (g = (m = this.pdf.internal.getCoordinateString(a[0][1]["margin-left"])) - p, p = m), c(g + Math.max(t["margin-left"] || 0, 0) * n, (-12 * l).toFixed(2), "Td"), i = 0, o = a.length; i !== o;) a[i][0] && this.RenderTextFragment(a[i][0], a[i][1]), i++;
                    if (this.y += l * n, this.executeWatchFunctions(a[0][1]) && 0 < s.length) {
                        var v = [], b = [];
                        s.forEach(function (e) {
                            for (var t = 0, n = e.length; t !== n;) e[t][0] && (v.push(e[t][0] + " "), b.push(e[t][1])), ++t
                        }), s = this.splitFragmentsIntoLines(y(v), b), c("ET", "Q"), c("q", "BT 0 g", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td")
                    }
                }
                return e && "function" == typeof e && e.call(this, this.x - 9, this.y - f / 2), c("ET", "Q"), this.y += d
            }
        }, h.prototype.setBlockBoundary = function (e) {
            return this.renderParagraph(e)
        }, h.prototype.setBlockStyle = function (e) {
            return this.paragraph.blockstyle = e
        }, h.prototype.addText = function (e, t) {
            return this.paragraph.text.push(e), this.paragraph.style.push(t)
        }, i = {
            helvetica: "helvetica",
            "sans-serif": "helvetica",
            "times new roman": "times",
            serif: "times",
            times: "times",
            monospace: "courier",
            courier: "courier"
        }, l = {
            100: "normal",
            200: "normal",
            300: "normal",
            400: "normal",
            500: "bold",
            600: "bold",
            700: "bold",
            800: "bold",
            900: "bold",
            normal: "normal",
            bold: "bold",
            bolder: "bold",
            lighter: "normal"
        }, a = {normal: "normal", italic: "italic", oblique: "italic"}, s = {
            left: "left",
            right: "right",
            center: "center",
            justify: "justify"
        }, c = {none: "none", right: "right", left: "left"}, d = {
            none: "none",
            both: "both"
        }, n = {normal: 1}, e.fromHTML = function (e, t, n, r, i, o) {
            return this.margins_doc = o || {
                top: 0,
                bottom: 0
            }, (r = r || {}).elementHandlers || (r.elementHandlers = {}), m(this, e, isNaN(t) ? 4 : t, isNaN(n) ? 4 : n, r, i)
        }
    }(le.API),le.API,("undefined" != typeof window && window || "undefined" != typeof global && global).html2pdf = function (e, a, t) {
        var n = a.canvas;
        if (n) {
            var r, i;
            if ((n.pdf = a).annotations = {
                _nameMap: [], createAnnotation: function (e, t) {
                    var n, r = a.context2d._wrapX(t.left), i = a.context2d._wrapY(t.top),
                        o = (a.context2d._page(t.top), e.indexOf("#"));
                    n = 0 <= o ? {name: e.substring(o + 1)} : {url: e}, a.link(r, i, t.right - t.left, t.bottom - t.top, n)
                }, setName: function (e, t) {
                    var n = a.context2d._wrapX(t.left), r = a.context2d._wrapY(t.top), i = a.context2d._page(t.top);
                    this._nameMap[e] = {page: i, x: n, y: r}
                }
            }, n.annotations = a.annotations, a.context2d._pageBreakAt = function (e) {
                this.pageBreaks.push(e)
            }, a.context2d._gotoPage = function (e) {
                for (; a.internal.getNumberOfPages() < e;) a.addPage();
                a.setPage(e)
            }, "string" == typeof e) {
                e = e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, "");
                var o, s, l = document.createElement("iframe");
                document.body.appendChild(l), null != (o = l.contentDocument) && null != o || (o = l.contentWindow.document), o.open(), o.write(e), o.close(), r = o.body, s = o.body || {}, e = o.documentElement || {}, i = Math.max(s.scrollHeight, s.offsetHeight, e.clientHeight, e.scrollHeight, e.offsetHeight)
            } else s = (r = e).body || {}, i = Math.max(s.scrollHeight, s.offsetHeight, e.clientHeight, e.scrollHeight, e.offsetHeight);
            var c = {
                async: !0,
                allowTaint: !0,
                backgroundColor: "#ffffff",
                canvas: n,
                imageTimeout: 15e3,
                logging: !0,
                proxy: null,
                removeContainer: !0,
                foreignObjectRendering: !1,
                useCORS: !1,
                windowHeight: i = a.internal.pageSize.getHeight(),
                scrollY: i
            };
            a.context2d.pageWrapYEnabled = !0, a.context2d.pageWrapY = a.internal.pageSize.getHeight(), html2canvas(r, c).then(function (e) {
                t && (l && l.parentElement.removeChild(l), t(a))
            })
        }
    },window.tmp = html2pdf,function (h) {
        var r = h.BlobBuilder || h.WebKitBlobBuilder || h.MSBlobBuilder || h.MozBlobBuilder;
        h.URL = h.URL || h.webkitURL || function (e, t) {
            return (t = document.createElement("a")).href = e, t
        };
        var n = h.Blob, f = URL.createObjectURL, p = URL.revokeObjectURL, o = h.Symbol && h.Symbol.toStringTag, e = !1,
            t = !1, g = !!h.ArrayBuffer, i = r && r.prototype.append && r.prototype.getBlob;
        try {
            e = 2 === new Blob(["ä"]).size, t = 2 === new Blob([new Uint8Array([1, 2])]).size
        } catch (e) {
        }

        function a(e) {
            return e.map(function (e) {
                if (e.buffer instanceof ArrayBuffer) {
                    var t = e.buffer;
                    if (e.byteLength !== t.byteLength) {
                        var n = new Uint8Array(e.byteLength);
                        n.set(new Uint8Array(t, e.byteOffset, e.byteLength)), t = n.buffer
                    }
                    return t
                }
                return e
            })
        }

        function s(e, t) {
            t = t || {};
            var n = new r;
            return a(e).forEach(function (e) {
                n.append(e)
            }), t.type ? n.getBlob(t.type) : n.getBlob()
        }

        function l(e, t) {
            return new n(a(e), t || {})
        }

        if (h.Blob && (s.prototype = Blob.prototype, l.prototype = Blob.prototype), o) try {
            File.prototype[o] = "File", Blob.prototype[o] = "Blob", FileReader.prototype[o] = "FileReader"
        } catch (e) {
        }

        function c() {
            var e = !!h.ActiveXObject || "-ms-scroll-limit" in document.documentElement.style && "-ms-ime-align" in document.documentElement.style,
                t = h.XMLHttpRequest && h.XMLHttpRequest.prototype.send;
            e && t && (XMLHttpRequest.prototype.send = function (e) {
                e instanceof Blob && this.setRequestHeader("Content-Type", e.type), t.call(this, e)
            });
            try {
                new File([], "")
            } catch (e) {
                try {
                    var n = new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name;this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date;this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')();
                    h.File = n
                } catch (e) {
                    n = function (e, t, n) {
                        var r = new Blob(e, n),
                            i = n && void 0 !== n.lastModified ? new Date(n.lastModified) : new Date;
                        return r.name = t, r.lastModifiedDate = i, r.lastModified = +i, r.toString = function () {
                            return "[object File]"
                        }, o && (r[o] = "File"), r
                    }, h.File = n
                }
            }
        }

        e ? (c(), h.Blob = t ? h.Blob : l) : i ? (c(), h.Blob = s) : function () {
            function a(e) {
                for (var t = [], n = 0; n < e.length; n++) {
                    var r = e.charCodeAt(n);
                    r < 128 ? t.push(r) : r < 2048 ? t.push(192 | r >> 6, 128 | 63 & r) : r < 55296 || 57344 <= r ? t.push(224 | r >> 12, 128 | r >> 6 & 63, 128 | 63 & r) : (n++, r = 65536 + ((1023 & r) << 10 | 1023 & e.charCodeAt(n)), t.push(240 | r >> 18, 128 | r >> 12 & 63, 128 | r >> 6 & 63, 128 | 63 & r))
                }
                return t
            }

            function t(e) {
                var t, n, r, i, o, a;
                for (t = "", r = e.length, n = 0; n < r;) switch ((i = e[n++]) >> 4) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                        t += String.fromCharCode(i);
                        break;
                    case 12:
                    case 13:
                        o = e[n++], t += String.fromCharCode((31 & i) << 6 | 63 & o);
                        break;
                    case 14:
                        o = e[n++], a = e[n++], t += String.fromCharCode((15 & i) << 12 | (63 & o) << 6 | (63 & a) << 0)
                }
                return t
            }

            function s(e) {
                for (var t = new Array(e.byteLength), n = new Uint8Array(e), r = t.length; r--;) t[r] = n[r];
                return t
            }

            function n(e) {
                for (var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = [], r = 0; r < e.length; r += 3) {
                    var i = e[r], o = r + 1 < e.length, a = o ? e[r + 1] : 0, s = r + 2 < e.length,
                        l = s ? e[r + 2] : 0, c = i >> 2, d = (3 & i) << 4 | a >> 4, u = (15 & a) << 2 | l >> 6,
                        h = 63 & l;
                    s || (h = 64, o || (u = 64)), n.push(t[c], t[d], t[u], t[h])
                }
                return n.join("")
            }

            var e = Object.create || function (e) {
                function t() {
                }

                return t.prototype = e, new t
            };
            if (g) var r = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"],
                l = ArrayBuffer.isView || function (e) {
                    return e && -1 < r.indexOf(Object.prototype.toString.call(e))
                };

            function c(e, t) {
                for (var n = 0, r = (e = e || []).length; n < r; n++) {
                    var i = e[n];
                    i instanceof c ? e[n] = i._buffer : "string" == typeof i ? e[n] = a(i) : g && (ArrayBuffer.prototype.isPrototypeOf(i) || l(i)) ? e[n] = s(i) : g && (o = i) && DataView.prototype.isPrototypeOf(o) ? e[n] = s(i.buffer) : e[n] = a(String(i))
                }
                var o;
                this._buffer = [].concat.apply([], e), this.size = this._buffer.length, this.type = t && t.type || ""
            }

            function i(e, t, n) {
                var r = c.call(this, e, n = n || {}) || this;
                return r.name = t, r.lastModifiedDate = n.lastModified ? new Date(n.lastModified) : new Date, r.lastModified = +r.lastModifiedDate, r
            }

            if (c.prototype.slice = function (e, t, n) {
                return new c([this._buffer.slice(e || 0, t || this._buffer.length)], {type: n})
            }, c.prototype.toString = function () {
                return "[object Blob]"
            }, (i.prototype = e(c.prototype)).constructor = i, Object.setPrototypeOf) Object.setPrototypeOf(i, c); else try {
                i.__proto__ = c
            } catch (e) {
            }

            function o() {
                if (!(this instanceof o)) throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");
                var n = document.createDocumentFragment();
                this.addEventListener = n.addEventListener, this.dispatchEvent = function (e) {
                    var t = this["on" + e.type];
                    "function" == typeof t && t(e), n.dispatchEvent(e)
                }, this.removeEventListener = n.removeEventListener
            }

            function d(e, t, n) {
                if (!(t instanceof c)) throw new TypeError("Failed to execute '" + n + "' on 'FileReader': parameter 1 is not of type 'Blob'.");
                e.result = "", setTimeout(function () {
                    this.readyState = o.LOADING, e.dispatchEvent(new Event("load")), e.dispatchEvent(new Event("loadend"))
                })
            }

            i.prototype.toString = function () {
                return "[object File]"
            }, o.EMPTY = 0, o.LOADING = 1, o.DONE = 2, o.prototype.error = null, o.prototype.onabort = null, o.prototype.onerror = null, o.prototype.onload = null, o.prototype.onloadend = null, o.prototype.onloadstart = null, o.prototype.onprogress = null, o.prototype.readAsDataURL = function (e) {
                d(this, e, "readAsDataURL"), this.result = "data:" + e.type + ";base64," + n(e._buffer)
            }, o.prototype.readAsText = function (e) {
                d(this, e, "readAsText"), this.result = t(e._buffer)
            }, o.prototype.readAsArrayBuffer = function (e) {
                d(this, e, "readAsText"), this.result = e._buffer.slice()
            }, o.prototype.abort = function () {
            }, URL.createObjectURL = function (e) {
                return e instanceof c ? "data:" + e.type + ";base64," + n(e._buffer) : f.call(URL, e)
            }, URL.revokeObjectURL = function (e) {
                p && p.call(URL, e)
            };
            var u = h.XMLHttpRequest && h.XMLHttpRequest.prototype.send;
            u && (XMLHttpRequest.prototype.send = function (e) {
                e instanceof c ? (this.setRequestHeader("Content-Type", e.type), u.call(this, t(e._buffer))) : u.call(this, e)
            }), h.FileReader = o, h.File = i, h.Blob = c
        }()
    }(void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")());
    var ce, de, ue, he, fe, pe, ge, me, ve, be, ye, we, ke, xe, Ce, st = st || function (s) {
        if (!(void 0 === s || "undefined" != typeof navigator && /MSIE [1-9]\./.test(navigator.userAgent))) {
            var e = s.document, l = function () {
                    return s.URL || s.webkitURL || s
                }, c = e.createElementNS("http://www.w3.org/1999/xhtml", "a"), d = "download" in c,
                u = /constructor/i.test(s.HTMLElement) || s.safari, h = /CriOS\/[\d]+/.test(navigator.userAgent),
                f = s.setImmediate || s.setTimeout, p = function (e) {
                    f(function () {
                        throw e
                    }, 0)
                }, g = function (e) {
                    setTimeout(function () {
                        "string" == typeof e ? l().revokeObjectURL(e) : e.remove()
                    }, 4e4)
                }, m = function (e) {
                    return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type) ? new Blob([String.fromCharCode(65279), e], {type: e.type}) : e
                }, r = function (e, n, t) {
                    t || (e = m(e));

                    function r() {
                        !function (e, t) {
                            for (var n = (t = [].concat(t)).length; n--;) {
                                var r = e["on" + t[n]];
                                if ("function" == typeof r) try {
                                    r.call(e, e)
                                } catch (e) {
                                    p(e)
                                }
                            }
                        }(o, "writestart progress write writeend".split(" "))
                    }

                    var i, o = this, a = "application/octet-stream" === e.type;
                    if (o.readyState = o.INIT, d) return i = l().createObjectURL(e), void f(function () {
                        var e, t;
                        c.href = i, c.download = n, e = c, t = new MouseEvent("click"), e.dispatchEvent(t), r(), g(i), o.readyState = o.DONE
                    }, 0);
                    !function () {
                        if ((h || a && u) && s.FileReader) {
                            var t = new FileReader;
                            return t.onloadend = function () {
                                var e = h ? t.result : t.result.replace(/^data:[^;]*;/, "data:attachment/file;");
                                s.open(e, "_blank") || (s.location.href = e), e = void 0, o.readyState = o.DONE, r()
                            }, t.readAsDataURL(e), o.readyState = o.INIT
                        }
                        i = i || l().createObjectURL(e), a ? s.location.href = i : s.open(i, "_blank") || (s.location.href = i), o.readyState = o.DONE, r(), g(i)
                    }()
                }, t = r.prototype;
            return "undefined" != typeof navigator && navigator.msSaveOrOpenBlob ? function (e, t, n) {
                return t = t || e.name || "download", n || (e = m(e)), navigator.msSaveOrOpenBlob(e, t)
            } : (t.abort = function () {
            }, t.readyState = t.INIT = 0, t.WRITING = 1, t.DONE = 2, t.error = t.onwritestart = t.onprogress = t.onwrite = t.onabort = t.onerror = t.onwriteend = null, function (e, t, n) {
                return new r(e, t || e.name || "download", n)
            })
        }
    }(void 0 !== self && self || "undefined" != typeof window && window || void 0);

    function Se(k) {
        var e = 0;
        if (71 !== k[e++] || 73 !== k[e++] || 70 !== k[e++] || 56 !== k[e++] || 56 != (k[e++] + 1 & 253) || 97 !== k[e++]) throw"Invalid GIF 87a/89a header.";
        var x = k[e++] | k[e++] << 8, t = k[e++] | k[e++] << 8, n = k[e++], r = n >> 7, i = 1 << 1 + (7 & n);
        k[e++], k[e++];
        var o = null;
        r && (o = e, e += 3 * i);
        var a = !0, s = [], l = 0, c = null, d = 0, u = null;
        for (this.width = x, this.height = t; a && e < k.length;) switch (k[e++]) {
            case 33:
                switch (k[e++]) {
                    case 255:
                        if (11 !== k[e] || 78 == k[e + 1] && 69 == k[e + 2] && 84 == k[e + 3] && 83 == k[e + 4] && 67 == k[e + 5] && 65 == k[e + 6] && 80 == k[e + 7] && 69 == k[e + 8] && 50 == k[e + 9] && 46 == k[e + 10] && 48 == k[e + 11] && 3 == k[e + 12] && 1 == k[e + 13] && 0 == k[e + 16]) e += 14, u = k[e++] | k[e++] << 8, e++; else for (e += 12; 0 !== (S = k[e++]);) e += S;
                        break;
                    case 249:
                        if (4 !== k[e++] || 0 !== k[e + 4]) throw"Invalid graphics extension block.";
                        var h = k[e++];
                        l = k[e++] | k[e++] << 8, c = k[e++], 0 == (1 & h) && (c = null), d = h >> 2 & 7, e++;
                        break;
                    case 254:
                        for (; 0 !== (S = k[e++]);) e += S;
                        break;
                    default:
                        throw"Unknown graphic control label: 0x" + k[e - 1].toString(16)
                }
                break;
            case 44:
                var f = k[e++] | k[e++] << 8, p = k[e++] | k[e++] << 8, g = k[e++] | k[e++] << 8,
                    m = k[e++] | k[e++] << 8, v = k[e++], b = v >> 6 & 1, y = o, w = !1;
                v >> 7 && (w = !0, y = e, e += 3 * (1 << 1 + (7 & v)));
                var C = e;
                for (e++; ;) {
                    var S;
                    if (0 === (S = k[e++])) break;
                    e += S
                }
                s.push({
                    x: f,
                    y: p,
                    width: g,
                    height: m,
                    has_local_palette: w,
                    palette_offset: y,
                    data_offset: C,
                    data_length: e - C,
                    transparent_index: c,
                    interlaced: !!b,
                    delay: l,
                    disposal: d
                });
                break;
            case 59:
                a = !1;
                break;
            default:
                throw"Unknown gif block: 0x" + k[e - 1].toString(16)
        }
        this.numFrames = function () {
            return s.length
        }, this.loopCount = function () {
            return u
        }, this.frameInfo = function (e) {
            if (e < 0 || e >= s.length) throw"Frame index out of range.";
            return s[e]
        }, this.decodeAndBlitFrameBGRA = function (e, t) {
            var n = this.frameInfo(e), r = n.width * n.height, i = new Uint8Array(r);
            Ae(k, n.data_offset, i, r);
            var o = n.palette_offset, a = n.transparent_index;
            null === a && (a = 256);
            var s = n.width, l = x - s, c = s, d = 4 * (n.y * x + n.x), u = 4 * ((n.y + n.height) * x + n.x), h = d,
                f = 4 * l;
            !0 === n.interlaced && (f += 4 * (s + l) * 7);
            for (var p = 8, g = 0, m = i.length; g < m; ++g) {
                var v = i[g];
                if (0 === c && (c = s, u <= (h += f) && (f = l + 4 * (s + l) * (p - 1), h = d + (s + l) * (p << 1), p >>= 1)), v === a) h += 4; else {
                    var b = k[o + 3 * v], y = k[o + 3 * v + 1], w = k[o + 3 * v + 2];
                    t[h++] = w, t[h++] = y, t[h++] = b, t[h++] = 255
                }
                --c
            }
        }, this.decodeAndBlitFrameRGBA = function (e, t) {
            var n = this.frameInfo(e), r = n.width * n.height, i = new Uint8Array(r);
            Ae(k, n.data_offset, i, r);
            var o = n.palette_offset, a = n.transparent_index;
            null === a && (a = 256);
            var s = n.width, l = x - s, c = s, d = 4 * (n.y * x + n.x), u = 4 * ((n.y + n.height) * x + n.x), h = d,
                f = 4 * l;
            !0 === n.interlaced && (f += 4 * (s + l) * 7);
            for (var p = 8, g = 0, m = i.length; g < m; ++g) {
                var v = i[g];
                if (0 === c && (c = s, u <= (h += f) && (f = l + 4 * (s + l) * (p - 1), h = d + (s + l) * (p << 1), p >>= 1)), v === a) h += 4; else {
                    var b = k[o + 3 * v], y = k[o + 3 * v + 1], w = k[o + 3 * v + 2];
                    t[h++] = b, t[h++] = y, t[h++] = w, t[h++] = 255
                }
                --c
            }
        }
    }

    function Ae(e, t, n, r) {
        for (var i = e[t++], o = 1 << i, a = 1 + o, s = 1 + a, l = i + 1, c = (1 << l) - 1, d = 0, u = 0, h = 0, f = e[t++], p = new Int32Array(4096), g = null; ;) {
            for (; d < 16 && 0 !== f;) u |= e[t++] << d, d += 8, 1 === f ? f = e[t++] : --f;
            if (d < l) break;
            var m = u & c;
            if (u >>= l, d -= l, m != o) {
                if (m == a) break;
                for (var v = m < s ? m : g, b = 0, y = v; o < y;) y = p[y] >> 8, ++b;
                var w = y;
                if (r < h + b + (v !== m ? 1 : 0)) return;
                n[h++] = w;
                var k = h += b;
                for (v !== m && (n[h++] = w), y = v; b--;) y = p[y], n[--k] = 255 & y, y >>= 8;
                null !== g && s < 4096 && (p[s++] = g << 8 | w, c + 1 <= s && l < 12 && (++l, c = c << 1 | 1)), g = m
            } else s = 1 + a, c = (1 << (l = i + 1)) - 1, g = null
        }
        return n
    }

    try {
        exports.GifWriter = function (v, e, t, n) {
            var b = 0, r = void 0 === (n = void 0 === n ? {} : n).loop ? null : n.loop,
                y = void 0 === n.palette ? null : n.palette;
            if (e <= 0 || t <= 0 || 65535 < e || 65535 < t) throw"Width/Height invalid.";

            function w(e) {
                var t = e.length;
                if (t < 2 || 256 < t || t & t - 1) throw"Invalid code/color length, must be power of 2 and 2 .. 256.";
                return t
            }

            v[b++] = 71, v[b++] = 73, v[b++] = 70, v[b++] = 56, v[b++] = 57, v[b++] = 97;
            var i = 0, o = 0;
            if (null !== y) {
                for (var a = w(y); a >>= 1;) ++i;
                if (a = 1 << i, --i, void 0 !== n.background) {
                    if (a <= (o = n.background)) throw"Background index out of range.";
                    if (0 === o) throw"Background index explicitly passed as 0."
                }
            }
            if (v[b++] = 255 & e, v[b++] = e >> 8 & 255, v[b++] = 255 & t, v[b++] = t >> 8 & 255, v[b++] = (null !== y ? 128 : 0) | i, v[b++] = o, v[b++] = 0, null !== y) for (var s = 0, l = y.length; s < l; ++s) {
                var c = y[s];
                v[b++] = c >> 16 & 255, v[b++] = c >> 8 & 255, v[b++] = 255 & c
            }
            if (null !== r) {
                if (r < 0 || 65535 < r) throw"Loop count invalid.";
                v[b++] = 33, v[b++] = 255, v[b++] = 11, v[b++] = 78, v[b++] = 69, v[b++] = 84, v[b++] = 83, v[b++] = 67, v[b++] = 65, v[b++] = 80, v[b++] = 69, v[b++] = 50, v[b++] = 46, v[b++] = 48, v[b++] = 3, v[b++] = 1, v[b++] = 255 & r, v[b++] = r >> 8 & 255, v[b++] = 0
            }
            var k = !1;
            this.addFrame = function (e, t, n, r, i, o) {
                if (!0 === k && (--b, k = !1), o = void 0 === o ? {} : o, e < 0 || t < 0 || 65535 < e || 65535 < t) throw"x/y invalid.";
                if (n <= 0 || r <= 0 || 65535 < n || 65535 < r) throw"Width/Height invalid.";
                if (i.length < n * r) throw"Not enough pixels for the frame size.";
                var a = !0, s = o.palette;
                if (null == s && (a = !1, s = y), null == s) throw"Must supply either a local or global palette.";
                for (var l = w(s), c = 0; l >>= 1;) ++c;
                l = 1 << c;
                var d = void 0 === o.delay ? 0 : o.delay, u = void 0 === o.disposal ? 0 : o.disposal;
                if (u < 0 || 3 < u) throw"Disposal out of range.";
                var h = !1, f = 0;
                if (void 0 !== o.transparent && null !== o.transparent && (h = !0, (f = o.transparent) < 0 || l <= f)) throw"Transparent color index.";
                if (0 === u && !h && 0 === d || (v[b++] = 33, v[b++] = 249, v[b++] = 4, v[b++] = u << 2 | (!0 === h ? 1 : 0), v[b++] = 255 & d, v[b++] = d >> 8 & 255, v[b++] = f, v[b++] = 0), v[b++] = 44, v[b++] = 255 & e, v[b++] = e >> 8 & 255, v[b++] = 255 & t, v[b++] = t >> 8 & 255, v[b++] = 255 & n, v[b++] = n >> 8 & 255, v[b++] = 255 & r, v[b++] = r >> 8 & 255, v[b++] = !0 === a ? 128 | c - 1 : 0, !0 === a) for (var p = 0, g = s.length; p < g; ++p) {
                    var m = s[p];
                    v[b++] = m >> 16 & 255, v[b++] = m >> 8 & 255, v[b++] = 255 & m
                }
                b = function (t, n, e, r) {
                    t[n++] = e;
                    var i = n++, o = 1 << e, a = o - 1, s = 1 + o, l = 1 + s, c = e + 1, d = 0, u = 0;

                    function h(e) {
                        for (; e <= d;) t[n++] = 255 & u, u >>= 8, d -= 8, n === i + 256 && (t[i] = 255, i = n++)
                    }

                    function f(e) {
                        u |= e << d, d += c, h(8)
                    }

                    var p = r[0] & a, g = {};
                    f(o);
                    for (var m = 1, v = r.length; m < v; ++m) {
                        var b = r[m] & a, y = p << 8 | b, w = g[y];
                        if (void 0 === w) {
                            for (u |= p << d, d += c; 8 <= d;) t[n++] = 255 & u, u >>= 8, d -= 8, n === i + 256 && (t[i] = 255, i = n++);
                            4096 === l ? (f(o), l = 1 + s, c = e + 1, g = {}) : (1 << c <= l && ++c, g[y] = l++), p = b
                        } else p = w
                    }
                    return f(p), f(s), h(1), i + 1 === n ? t[i] = 0 : (t[i] = n - i - 1, t[n++] = 0), n
                }(v, b, c < 2 ? 2 : c, i)
            }, this.end = function () {
                return !1 === k && (v[b++] = 59, k = !0), b
            }
        }, exports.GifReader = Se
    } catch (e) {
    }

    function Le(e) {
        var x, C, S, A, t, u = Math.floor, L = new Array(64), N = new Array(64), I = new Array(64), E = new Array(64),
            v = new Array(65535), b = new Array(65535), Y = new Array(64), y = new Array(64), T = [], B = 0, O = 7,
            P = new Array(64), M = new Array(64), _ = new Array(64), n = new Array(256), F = new Array(2048),
            w = [0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12, 17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53, 10, 19, 23, 32, 39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50, 56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63],
            R = [0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0], D = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
            j = [0, 0, 2, 1, 3, 3, 2, 4, 3, 5, 5, 4, 4, 0, 0, 1, 125],
            H = [1, 2, 3, 0, 4, 17, 5, 18, 33, 49, 65, 6, 19, 81, 97, 7, 34, 113, 20, 50, 129, 145, 161, 8, 35, 66, 177, 193, 21, 82, 209, 240, 36, 51, 98, 114, 130, 9, 10, 22, 23, 24, 25, 26, 37, 38, 39, 40, 41, 42, 52, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250],
            q = [0, 0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0], U = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
            z = [0, 0, 2, 1, 2, 4, 4, 3, 4, 7, 5, 4, 4, 0, 1, 2, 119],
            $ = [0, 1, 2, 3, 17, 4, 5, 33, 49, 6, 18, 65, 81, 7, 97, 113, 19, 34, 50, 129, 8, 20, 66, 145, 161, 177, 193, 9, 35, 51, 82, 240, 21, 98, 114, 209, 10, 22, 36, 52, 225, 37, 241, 23, 24, 25, 26, 38, 39, 40, 41, 42, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 130, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 226, 227, 228, 229, 230, 231, 232, 233, 234, 242, 243, 244, 245, 246, 247, 248, 249, 250];

        function r(e, t) {
            for (var n = 0, r = 0, i = new Array, o = 1; o <= 16; o++) {
                for (var a = 1; a <= e[o]; a++) i[t[r]] = [], i[t[r]][0] = n, i[t[r]][1] = o, r++, n++;
                n *= 2
            }
            return i
        }

        function V(e) {
            for (var t = e[0], n = e[1] - 1; 0 <= n;) t & 1 << n && (B |= 1 << O), n--, --O < 0 && (255 == B ? (W(255), W(0)) : W(B), O = 7, B = 0)
        }

        function W(e) {
            T.push(e)
        }

        function G(e) {
            W(e >> 8 & 255), W(255 & e)
        }

        function K(e, t, n, r, i) {
            for (var o, a = i[0], s = i[240], l = function (e, t) {
                var n, r, i, o, a, s, l, c, d, u, h = 0;
                for (d = 0; d < 8; ++d) {
                    n = e[h], r = e[h + 1], i = e[h + 2], o = e[h + 3], a = e[h + 4], s = e[h + 5], l = e[h + 6];
                    var f = n + (c = e[h + 7]), p = n - c, g = r + l, m = r - l, v = i + s, b = i - s, y = o + a,
                        w = o - a, k = f + y, x = f - y, C = g + v, S = g - v;
                    e[h] = k + C, e[h + 4] = k - C;
                    var A = .707106781 * (S + x);
                    e[h + 2] = x + A, e[h + 6] = x - A;
                    var L = .382683433 * ((k = w + b) - (S = m + p)), N = .5411961 * k + L, I = 1.306562965 * S + L,
                        E = .707106781 * (C = b + m), T = p + E, B = p - E;
                    e[h + 5] = B + N, e[h + 3] = B - N, e[h + 1] = T + I, e[h + 7] = T - I, h += 8
                }
                for (d = h = 0; d < 8; ++d) {
                    n = e[h], r = e[h + 8], i = e[h + 16], o = e[h + 24], a = e[h + 32], s = e[h + 40], l = e[h + 48];
                    var O = n + (c = e[h + 56]), P = n - c, M = r + l, _ = r - l, F = i + s, R = i - s, D = o + a,
                        j = o - a, H = O + D, q = O - D, U = M + F, z = M - F;
                    e[h] = H + U, e[h + 32] = H - U;
                    var $ = .707106781 * (z + q);
                    e[h + 16] = q + $, e[h + 48] = q - $;
                    var V = .382683433 * ((H = j + R) - (z = _ + P)), W = .5411961 * H + V, G = 1.306562965 * z + V,
                        K = .707106781 * (U = R + _), X = P + K, J = P - K;
                    e[h + 40] = J + W, e[h + 24] = J - W, e[h + 8] = X + G, e[h + 56] = X - G, h++
                }
                for (d = 0; d < 64; ++d) u = e[d] * t[d], Y[d] = 0 < u ? .5 + u | 0 : u - .5 | 0;
                return Y
            }(e, t), c = 0; c < 64; ++c) y[w[c]] = l[c];
            var d = y[0] - n;
            n = y[0], 0 == d ? V(r[0]) : (V(r[b[o = 32767 + d]]), V(v[o]));
            for (var u = 63; 0 < u && 0 == y[u]; u--) ;
            if (0 == u) return V(a), n;
            for (var h, f = 1; f <= u;) {
                for (var p = f; 0 == y[f] && f <= u; ++f) ;
                var g = f - p;
                if (16 <= g) {
                    h = g >> 4;
                    for (var m = 1; m <= h; ++m) V(s);
                    g &= 15
                }
                o = 32767 + y[f], V(i[(g << 4) + b[o]]), V(v[o]), f++
            }
            return 63 != u && V(a), n
        }

        function X(e) {
            e <= 0 && (e = 1), 100 < e && (e = 100), t != e && (function (e) {
                for (var t = [16, 11, 10, 16, 24, 40, 51, 61, 12, 12, 14, 19, 26, 58, 60, 55, 14, 13, 16, 24, 40, 57, 69, 56, 14, 17, 22, 29, 51, 87, 80, 62, 18, 22, 37, 56, 68, 109, 103, 77, 24, 35, 55, 64, 81, 104, 113, 92, 49, 64, 78, 87, 103, 121, 120, 101, 72, 92, 95, 98, 112, 100, 103, 99], n = 0; n < 64; n++) {
                    var r = u((t[n] * e + 50) / 100);
                    r < 1 ? r = 1 : 255 < r && (r = 255), L[w[n]] = r
                }
                for (var i = [17, 18, 24, 47, 99, 99, 99, 99, 18, 21, 26, 66, 99, 99, 99, 99, 24, 26, 56, 99, 99, 99, 99, 99, 47, 66, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99], o = 0; o < 64; o++) {
                    var a = u((i[o] * e + 50) / 100);
                    a < 1 ? a = 1 : 255 < a && (a = 255), N[w[o]] = a
                }
                for (var s = [1, 1.387039845, 1.306562965, 1.175875602, 1, .785694958, .5411961, .275899379], l = 0, c = 0; c < 8; c++) for (var d = 0; d < 8; d++) I[l] = 1 / (L[w[l]] * s[c] * s[d] * 8), E[l] = 1 / (N[w[l]] * s[c] * s[d] * 8), l++
            }(e < 50 ? Math.floor(5e3 / e) : Math.floor(200 - 2 * e)), t = e)
        }

        this.encode = function (e, t) {
            var n, r;
            (new Date).getTime(), t && X(t), T = new Array, B = 0, O = 7, G(65496), G(65504), G(16), W(74), W(70), W(73), W(70), W(0), W(1), W(1), W(0), G(1), G(1), W(0), W(0), function () {
                G(65499), G(132), W(0);
                for (var e = 0; e < 64; e++) W(L[e]);
                W(1);
                for (var t = 0; t < 64; t++) W(N[t])
            }(), n = e.width, r = e.height, G(65472), G(17), W(8), G(r), G(n), W(3), W(1), W(17), W(0), W(2), W(17), W(1), W(3), W(17), W(1), function () {
                G(65476), G(418), W(0);
                for (var e = 0; e < 16; e++) W(R[e + 1]);
                for (var t = 0; t <= 11; t++) W(D[t]);
                W(16);
                for (var n = 0; n < 16; n++) W(j[n + 1]);
                for (var r = 0; r <= 161; r++) W(H[r]);
                W(1);
                for (var i = 0; i < 16; i++) W(q[i + 1]);
                for (var o = 0; o <= 11; o++) W(U[o]);
                W(17);
                for (var a = 0; a < 16; a++) W(z[a + 1]);
                for (var s = 0; s <= 161; s++) W($[s])
            }(), G(65498), G(12), W(3), W(1), W(0), W(2), W(17), W(3), W(17), W(0), W(63), W(0);
            var i = 0, o = 0, a = 0;
            B = 0, O = 7, this.encode.displayName = "_encode_";
            for (var s, l, c, d, u, h, f, p, g, m = e.data, v = e.width, b = e.height, y = 4 * v, w = 0; w < b;) {
                for (s = 0; s < y;) {
                    for (h = u = y * w + s, f = -1, g = p = 0; g < 64; g++) h = u + (p = g >> 3) * y + (f = 4 * (7 & g)), b <= w + p && (h -= y * (w + 1 + p - b)), y <= s + f && (h -= s + f - y + 4), l = m[h++], c = m[h++], d = m[h++], P[g] = (F[l] + F[c + 256 >> 0] + F[d + 512 >> 0] >> 16) - 128, M[g] = (F[l + 768 >> 0] + F[c + 1024 >> 0] + F[d + 1280 >> 0] >> 16) - 128, _[g] = (F[l + 1280 >> 0] + F[c + 1536 >> 0] + F[d + 1792 >> 0] >> 16) - 128;
                    i = K(P, I, i, x, S), o = K(M, E, o, C, A), a = K(_, E, a, C, A), s += 32
                }
                w += 8
            }
            if (0 <= O) {
                var k = [];
                k[1] = O + 1, k[0] = (1 << O + 1) - 1, V(k)
            }
            return G(65497), new Uint8Array(T)
        }, (new Date).getTime(), e = e || 50, function () {
            for (var e = String.fromCharCode, t = 0; t < 256; t++) n[t] = e(t)
        }(), x = r(R, D), C = r(q, U), S = r(j, H), A = r(z, $), function () {
            for (var e = 1, t = 2, n = 1; n <= 15; n++) {
                for (var r = e; r < t; r++) b[32767 + r] = n, v[32767 + r] = [], v[32767 + r][1] = n, v[32767 + r][0] = r;
                for (var i = -(t - 1); i <= -e; i++) b[32767 + i] = n, v[32767 + i] = [], v[32767 + i][1] = n, v[32767 + i][0] = t - 1 + i;
                e <<= 1, t <<= 1
            }
        }(), function () {
            for (var e = 0; e < 256; e++) F[e] = 19595 * e, F[e + 256 >> 0] = 38470 * e, F[e + 512 >> 0] = 7471 * e + 32768, F[e + 768 >> 0] = -11059 * e, F[e + 1024 >> 0] = -21709 * e, F[e + 1280 >> 0] = 32768 * e + 8421375, F[e + 1536 >> 0] = -27439 * e, F[e + 1792 >> 0] = -5329 * e
        }(), X(e), (new Date).getTime()
    }

    function Ne(e, t) {
        if (this.pos = 0, this.buffer = e, this.datav = new DataView(e.buffer), this.is_with_alpha = !!t, this.bottom_up = !0, this.flag = String.fromCharCode(this.buffer[0]) + String.fromCharCode(this.buffer[1]), this.pos += 2, -1 === ["BM", "BA", "CI", "CP", "IC", "PT"].indexOf(this.flag)) throw new Error("Invalid BMP File");
        this.parseHeader(), this.parseBGR()
    }

    window.tmp = Se, le.API.adler32cs = (pe = "function" == typeof ArrayBuffer && "function" == typeof Uint8Array, ge = null, me = function () {
        if (!pe) return function () {
            return !1
        };
        try {
            var e = {};
            "function" == typeof e.Buffer && (ge = e.Buffer)
        } catch (e) {
        }
        return function (e) {
            return e instanceof ArrayBuffer || null !== ge && e instanceof ge
        }
    }(), ve = null !== ge ? function (e) {
        return new ge(e, "utf8").toString("binary")
    } : function (e) {
        return unescape(encodeURIComponent(e))
    }, be = function (e, t) {
        for (var n = 65535 & e, r = e >>> 16, i = 0, o = t.length; i < o; i++) r = (r + (n = (n + (255 & t.charCodeAt(i))) % 65521)) % 65521;
        return (r << 16 | n) >>> 0
    }, ye = function (e, t) {
        for (var n = 65535 & e, r = e >>> 16, i = 0, o = t.length; i < o; i++) r = (r + (n = (n + t[i]) % 65521)) % 65521;
        return (r << 16 | n) >>> 0
    }, ke = (we = {}).Adler32 = (((fe = (he = function (e) {
        if (!(this instanceof he)) throw new TypeError("Constructor cannot called be as a function.");
        if (!isFinite(e = null == e ? 1 : +e)) throw new Error("First arguments needs to be a finite number.");
        this.checksum = e >>> 0
    }).prototype = {}).constructor = he).from = ((ce = function (e) {
        if (!(this instanceof he)) throw new TypeError("Constructor cannot called be as a function.");
        if (null == e) throw new Error("First argument needs to be a string.");
        this.checksum = be(1, e.toString())
    }).prototype = fe, ce), he.fromUtf8 = ((de = function (e) {
        if (!(this instanceof he)) throw new TypeError("Constructor cannot called be as a function.");
        if (null == e) throw new Error("First argument needs to be a string.");
        var t = ve(e.toString());
        this.checksum = be(1, t)
    }).prototype = fe, de), pe && (he.fromBuffer = ((ue = function (e) {
        if (!(this instanceof he)) throw new TypeError("Constructor cannot called be as a function.");
        if (!me(e)) throw new Error("First argument needs to be ArrayBuffer.");
        var t = new Uint8Array(e);
        return this.checksum = ye(1, t)
    }).prototype = fe, ue)), fe.update = function (e) {
        if (null == e) throw new Error("First argument needs to be a string.");
        return e = e.toString(), this.checksum = be(this.checksum, e)
    }, fe.updateUtf8 = function (e) {
        if (null == e) throw new Error("First argument needs to be a string.");
        var t = ve(e.toString());
        return this.checksum = be(this.checksum, t)
    }, pe && (fe.updateBuffer = function (e) {
        if (!me(e)) throw new Error("First argument needs to be ArrayBuffer.");
        var t = new Uint8Array(e);
        return this.checksum = ye(this.checksum, t)
    }), fe.clone = function () {
        return new ke(this.checksum)
    }, he), we.from = function (e) {
        if (null == e) throw new Error("First argument needs to be a string.");
        return be(1, e.toString())
    }, we.fromUtf8 = function (e) {
        if (null == e) throw new Error("First argument needs to be a string.");
        var t = ve(e.toString());
        return be(1, t)
    }, pe && (we.fromBuffer = function (e) {
        if (!me(e)) throw new Error("First argument need to be ArrayBuffer.");
        var t = new Uint8Array(e);
        return ye(1, t)
    }), we), function (e) {
        e.__bidiEngine__ = e.prototype.__bidiEngine__ = function (e) {
            var p, g, u, h, i, o, a, s = t,
                m = [[0, 3, 0, 1, 0, 0, 0], [0, 3, 0, 1, 2, 2, 0], [0, 3, 0, 17, 2, 0, 1], [0, 3, 5, 5, 4, 1, 0], [0, 3, 21, 21, 4, 0, 1], [0, 3, 5, 5, 4, 2, 0]],
                v = [[2, 0, 1, 1, 0, 1, 0], [2, 0, 1, 1, 0, 2, 0], [2, 0, 2, 1, 3, 2, 0], [2, 0, 2, 33, 3, 1, 1]],
                b = {L: 0, R: 1, EN: 2, AN: 3, N: 4, B: 5, S: 6},
                l = {0: 0, 5: 1, 6: 2, 7: 3, 32: 4, 251: 5, 254: 6, 255: 7},
                c = ["(", ")", "(", "<", ">", "<", "[", "]", "[", "{", "}", "{", "«", "»", "«", "‹", "›", "‹", "⁅", "⁆", "⁅", "⁽", "⁾", "⁽", "₍", "₎", "₍", "≤", "≥", "≤", "〈", "〉", "〈", "﹙", "﹚", "﹙", "﹛", "﹜", "﹛", "﹝", "﹞", "﹝", "﹤", "﹥", "﹤"],
                d = new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),
                y = !1, w = 0;
            this.__bidiEngine__ = {};

            function k(e) {
                var t = e.charCodeAt(), n = t >> 8, r = l[n];
                return void 0 !== r ? s[256 * r + (255 & t)] : 252 == n || 253 == n ? "AL" : d.test(n) ? "L" : 8 == n ? "R" : "N"
            }

            function f(e) {
                for (var t, n = 0; n < e.length; n++) {
                    if ("L" === (t = k(e.charAt(n)))) return !1;
                    if ("R" === t) return !0
                }
                return !1
            }

            function x(e, t, n, r) {
                var i, o, a, s, l = t[r];
                switch (l) {
                    case"L":
                    case"R":
                        y = !1;
                        break;
                    case"N":
                    case"AN":
                        break;
                    case"EN":
                        y && (l = "AN");
                        break;
                    case"AL":
                        y = !0, l = "R";
                        break;
                    case"WS":
                        l = "N";
                        break;
                    case"CS":
                        r < 1 || r + 1 >= t.length || "EN" !== (i = n[r - 1]) && "AN" !== i || "EN" !== (o = t[r + 1]) && "AN" !== o ? l = "N" : y && (o = "AN"), l = o === i ? o : "N";
                        break;
                    case"ES":
                        l = "EN" === (i = 0 < r ? n[r - 1] : "B") && r + 1 < t.length && "EN" === t[r + 1] ? "EN" : "N";
                        break;
                    case"ET":
                        if (0 < r && "EN" === n[r - 1]) {
                            l = "EN";
                            break
                        }
                        if (y) {
                            l = "N";
                            break
                        }
                        for (a = r + 1, s = t.length; a < s && "ET" === t[a];) a++;
                        l = a < s && "EN" === t[a] ? "EN" : "N";
                        break;
                    case"NSM":
                        if (u && !h) {
                            for (s = t.length, a = r + 1; a < s && "NSM" === t[a];) a++;
                            if (a < s) {
                                var c = e[r], d = 1425 <= c && c <= 2303 || 64286 === c;
                                if (i = t[a], d && ("R" === i || "AL" === i)) {
                                    l = "R";
                                    break
                                }
                            }
                        }
                        l = r < 1 || "B" === (i = t[r - 1]) ? "N" : n[r - 1];
                        break;
                    case"B":
                        p = !(y = !1), l = w;
                        break;
                    case"S":
                        g = !0, l = "N";
                        break;
                    case"LRE":
                    case"RLE":
                    case"LRO":
                    case"RLO":
                    case"PDF":
                        y = !1;
                        break;
                    case"BN":
                        l = "N"
                }
                return l
            }

            function C(e, t, n) {
                var r = e.split("");
                return n && L(r, n, {hiLevel: w}), r.reverse(), t && t.reverse(), r.join("")
            }

            function S(e, t, n, r, i) {
                if (!(i.hiLevel < e)) {
                    if (1 === e && 1 === w && !p) return t.reverse(), void (n && n.reverse());
                    for (var o, a, s, l, c = t.length, d = 0; d < c;) {
                        if (r[d] >= e) {
                            for (s = d + 1; s < c && r[s] >= e;) s++;
                            for (l = d, a = s - 1; l < a; l++, a--) o = t[l], t[l] = t[a], t[a] = o, n && (o = n[l], n[l] = n[a], n[a] = o);
                            d = s
                        }
                        d++
                    }
                }
            }

            function A(e, t, n) {
                var r = e.split(""), i = {hiLevel: w};
                return L(r, n = n || [], i), function (e, t) {
                    if (0 !== i.hiLevel && a) for (var n, r = 0; r < e.length; r++) 1 === t[r] && 0 <= (n = c.indexOf(e[r])) && (e[r] = c[n + 1])
                }(r, n), S(2, r, t, n, i), S(1, r, t, n, i), r.join("")
            }

            var L = function (e, t, n) {
                var r, i, o, a, s, l = -1, c = e.length, d = 0, u = [], h = w ? v : m, f = [];
                for (g = p = y = !1, i = 0; i < c; i++) f[i] = k(e[i]);
                for (o = 0; o < c; o++) {
                    if (s = d, u[o] = x(e, f, u, o), r = 240 & (d = h[s][b[u[o]]]), d &= 15, t[o] = a = h[d][5], 0 < r) if (16 == r) {
                        for (i = l; i < o; i++) t[i] = 1;
                        l = -1
                    } else l = -1;
                    if (h[d][6]) -1 === l && (l = o); else if (-1 < l) {
                        for (i = l; i < o; i++) t[i] = a;
                        l = -1
                    }
                    "B" === f[o] && (t[o] = 0), n.hiLevel |= a
                }
                g && function (e, t, n) {
                    for (var r = 0; r < n; r++) if ("S" === e[r]) {
                        t[r] = w;
                        for (var i = r - 1; 0 <= i && "WS" === e[i]; i--) t[i] = w
                    }
                }(f, t, c)
            };
            return this.__bidiEngine__.doBidiReorder = function (e, t, n) {
                if (function (e, t) {
                    if (t) for (var n = 0; n < e.length; n++) t[n] = n;
                    void 0 === h && (h = f(e)), void 0 === o && (o = f(e))
                }(e, t), u || !i || o) if (u && i && h ^ o) w = h ? 1 : 0, e = C(e, t, n); else if (!u && i && o) w = h ? 1 : 0, e = A(e, t, n), e = C(e, t); else if (!u || h || i || o) {
                    if (u && !i && h ^ o) e = C(e, t), e = h ? (w = 0, A(e, t, n)) : (w = 1, e = A(e, t, n), C(e, t)); else if (u && h && !i && o) w = 1, e = A(e, t, n), e = C(e, t); else if (!u && !i && h ^ o) {
                        var r = a;
                        h ? (w = 1, e = A(e, t, n), w = 0, a = !1, e = A(e, t, n), a = r) : (w = 0, e = A(e, t, n), e = C(e, t), a = !(w = 1), e = A(e, t, n), a = r, e = C(e, t))
                    }
                } else w = 0, e = A(e, t, n); else w = h ? 1 : 0, e = A(e, t, n);
                return e
            }, this.__bidiEngine__.setOptions = function (e) {
                e && (u = e.isInputVisual, i = e.isOutputVisual, h = e.isInputRtl, o = e.isOutputRtl, a = e.isSymmetricSwapping)
            }, this.__bidiEngine__.setOptions(e), this.__bidiEngine__
        };
        var t = ["BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "S", "B", "S", "WS", "B", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "B", "B", "B", "S", "WS", "N", "N", "ET", "ET", "ET", "N", "N", "N", "N", "N", "ES", "CS", "ES", "CS", "CS", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "CS", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "BN", "BN", "BN", "BN", "BN", "BN", "B", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "CS", "N", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "L", "N", "N", "BN", "N", "N", "ET", "ET", "EN", "EN", "N", "L", "N", "N", "N", "EN", "L", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "N", "N", "N", "N", "N", "ET", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "R", "NSM", "R", "NSM", "NSM", "R", "NSM", "NSM", "R", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "AN", "AN", "AN", "AN", "AN", "AN", "N", "N", "AL", "ET", "ET", "AL", "CS", "AL", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "ET", "AN", "AN", "AL", "AL", "AL", "NSM", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AN", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "NSM", "NSM", "N", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "AL", "AL", "NSM", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "R", "R", "N", "N", "N", "N", "R", "N", "N", "N", "N", "N", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "BN", "BN", "BN", "L", "R", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "WS", "B", "LRE", "RLE", "PDF", "LRO", "RLO", "CS", "ET", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "CS", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "WS", "BN", "BN", "BN", "BN", "BN", "N", "LRI", "RLI", "FSI", "PDI", "BN", "BN", "BN", "BN", "BN", "BN", "EN", "L", "N", "N", "EN", "EN", "EN", "EN", "EN", "EN", "ES", "ES", "N", "N", "N", "L", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "ES", "ES", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "R", "NSM", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "ES", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "N", "R", "R", "R", "R", "R", "N", "R", "N", "R", "R", "N", "R", "R", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "CS", "N", "CS", "N", "N", "CS", "N", "N", "N", "N", "N", "N", "N", "N", "N", "ET", "N", "N", "ES", "ES", "N", "N", "N", "N", "N", "ET", "ET", "N", "N", "N", "N", "N", "AL", "AL", "AL", "AL", "AL", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "N", "BN", "N", "N", "N", "ET", "ET", "ET", "N", "N", "N", "N", "N", "ES", "CS", "ES", "CS", "CS", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "CS", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "N", "N", "N", "ET", "ET", "N", "N", "N", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N"],
            o = new e.__bidiEngine__({isInputVisual: !0});
        e.API.events.push(["postProcessText", function (e) {
            var t = e.text, n = (e.x, e.y, e.options || {}), r = (e.mutex, n.lang, []);
            if ("[object Array]" === Object.prototype.toString.call(t)) {
                var i = 0;
                for (r = [], i = 0; i < t.length; i += 1) "[object Array]" === Object.prototype.toString.call(t[i]) ? r.push([o.doBidiReorder(t[i][0]), t[i][1], t[i][2]]) : r.push([o.doBidiReorder(t[i])]);
                e.text = r
            } else e.text = o.doBidiReorder(t)
        }])
    }(le), window.tmp = Le, Ne.prototype.parseHeader = function () {
        if (this.fileSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.reserved = this.datav.getUint32(this.pos, !0), this.pos += 4, this.offset = this.datav.getUint32(this.pos, !0), this.pos += 4, this.headerSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.width = this.datav.getUint32(this.pos, !0), this.pos += 4, this.height = this.datav.getInt32(this.pos, !0), this.pos += 4, this.planes = this.datav.getUint16(this.pos, !0), this.pos += 2, this.bitPP = this.datav.getUint16(this.pos, !0), this.pos += 2, this.compress = this.datav.getUint32(this.pos, !0), this.pos += 4, this.rawSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.hr = this.datav.getUint32(this.pos, !0), this.pos += 4, this.vr = this.datav.getUint32(this.pos, !0), this.pos += 4, this.colors = this.datav.getUint32(this.pos, !0), this.pos += 4, this.importantColors = this.datav.getUint32(this.pos, !0), this.pos += 4, 16 === this.bitPP && this.is_with_alpha && (this.bitPP = 15), this.bitPP < 15) {
            var e = 0 === this.colors ? 1 << this.bitPP : this.colors;
            this.palette = new Array(e);
            for (var t = 0; t < e; t++) {
                var n = this.datav.getUint8(this.pos++, !0), r = this.datav.getUint8(this.pos++, !0),
                    i = this.datav.getUint8(this.pos++, !0), o = this.datav.getUint8(this.pos++, !0);
                this.palette[t] = {red: i, green: r, blue: n, quad: o}
            }
        }
        this.height < 0 && (this.height *= -1, this.bottom_up = !1)
    }, Ne.prototype.parseBGR = function () {
        this.pos = this.offset;
        try {
            var e = "bit" + this.bitPP, t = this.width * this.height * 4;
            this.data = new Uint8Array(t), this[e]()
        } catch (e) {
        }
    }, Ne.prototype.bit1 = function () {
        var e = Math.ceil(this.width / 8), t = e % 4, n = 0 <= this.height ? this.height - 1 : -this.height;
        for (n = this.height - 1; 0 <= n; n--) {
            for (var r = this.bottom_up ? n : this.height - 1 - n, i = 0; i < e; i++) for (var o = this.datav.getUint8(this.pos++, !0), a = r * this.width * 4 + 8 * i * 4, s = 0; s < 8 && 8 * i + s < this.width; s++) {
                var l = this.palette[o >> 7 - s & 1];
                this.data[a + 4 * s] = l.blue, this.data[a + 4 * s + 1] = l.green, this.data[a + 4 * s + 2] = l.red, this.data[a + 4 * s + 3] = 255
            }
            0 != t && (this.pos += 4 - t)
        }
    }, Ne.prototype.bit4 = function () {
        for (var e = Math.ceil(this.width / 2), t = e % 4, n = this.height - 1; 0 <= n; n--) {
            for (var r = this.bottom_up ? n : this.height - 1 - n, i = 0; i < e; i++) {
                var o = this.datav.getUint8(this.pos++, !0), a = r * this.width * 4 + 2 * i * 4, s = o >> 4, l = 15 & o,
                    c = this.palette[s];
                if (this.data[a] = c.blue, this.data[1 + a] = c.green, this.data[2 + a] = c.red, this.data[3 + a] = 255, 2 * i + 1 >= this.width) break;
                c = this.palette[l], this.data[4 + a] = c.blue, this.data[4 + a + 1] = c.green, this.data[4 + a + 2] = c.red, this.data[4 + a + 3] = 255
            }
            0 != t && (this.pos += 4 - t)
        }
    }, Ne.prototype.bit8 = function () {
        for (var e = this.width % 4, t = this.height - 1; 0 <= t; t--) {
            for (var n = this.bottom_up ? t : this.height - 1 - t, r = 0; r < this.width; r++) {
                var i = this.datav.getUint8(this.pos++, !0), o = n * this.width * 4 + 4 * r;
                if (i < this.palette.length) {
                    var a = this.palette[i];
                    this.data[o] = a.red, this.data[1 + o] = a.green, this.data[2 + o] = a.blue, this.data[3 + o] = 255
                } else this.data[o] = 255, this.data[1 + o] = 255, this.data[2 + o] = 255, this.data[3 + o] = 255
            }
            0 != e && (this.pos += 4 - e)
        }
    }, Ne.prototype.bit15 = function () {
        for (var e = this.width % 3, t = parseInt("11111", 2), n = this.height - 1; 0 <= n; n--) {
            for (var r = this.bottom_up ? n : this.height - 1 - n, i = 0; i < this.width; i++) {
                var o = this.datav.getUint16(this.pos, !0);
                this.pos += 2;
                var a = (o & t) / t * 255 | 0, s = (o >> 5 & t) / t * 255 | 0, l = (o >> 10 & t) / t * 255 | 0,
                    c = o >> 15 ? 255 : 0, d = r * this.width * 4 + 4 * i;
                this.data[d] = l, this.data[1 + d] = s, this.data[2 + d] = a, this.data[3 + d] = c
            }
            this.pos += e
        }
    }, Ne.prototype.bit16 = function () {
        for (var e = this.width % 3, t = parseInt("11111", 2), n = parseInt("111111", 2), r = this.height - 1; 0 <= r; r--) {
            for (var i = this.bottom_up ? r : this.height - 1 - r, o = 0; o < this.width; o++) {
                var a = this.datav.getUint16(this.pos, !0);
                this.pos += 2;
                var s = (a & t) / t * 255 | 0, l = (a >> 5 & n) / n * 255 | 0, c = (a >> 11) / t * 255 | 0,
                    d = i * this.width * 4 + 4 * o;
                this.data[d] = c, this.data[1 + d] = l, this.data[2 + d] = s, this.data[3 + d] = 255
            }
            this.pos += e
        }
    }, Ne.prototype.bit24 = function () {
        for (var e = this.height - 1; 0 <= e; e--) {
            for (var t = this.bottom_up ? e : this.height - 1 - e, n = 0; n < this.width; n++) {
                var r = this.datav.getUint8(this.pos++, !0), i = this.datav.getUint8(this.pos++, !0),
                    o = this.datav.getUint8(this.pos++, !0), a = t * this.width * 4 + 4 * n;
                this.data[a] = o, this.data[1 + a] = i, this.data[2 + a] = r, this.data[3 + a] = 255
            }
            this.pos += this.width % 4
        }
    }, Ne.prototype.bit32 = function () {
        for (var e = this.height - 1; 0 <= e; e--) for (var t = this.bottom_up ? e : this.height - 1 - e, n = 0; n < this.width; n++) {
            var r = this.datav.getUint8(this.pos++, !0), i = this.datav.getUint8(this.pos++, !0),
                o = this.datav.getUint8(this.pos++, !0), a = this.datav.getUint8(this.pos++, !0),
                s = t * this.width * 4 + 4 * n;
            this.data[s] = o, this.data[1 + s] = i, this.data[2 + s] = r, this.data[3 + s] = a
        }
    }, Ne.prototype.getData = function () {
        return this.data
    }, window.tmp = Ne, function (e) {
        var p = 15, g = 573,
            t = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];

        function ue() {
            var f = this;

            function l(e, t) {
                for (var n = 0; n |= 1 & e, e >>>= 1, n <<= 1, 0 < --t;) ;
                return n >>> 1
            }

            f.build_tree = function (e) {
                var t, n, r, i = f.dyn_tree, o = f.stat_desc.static_tree, a = f.stat_desc.elems, s = -1;
                for (e.heap_len = 0, e.heap_max = g, t = 0; t < a; t++) 0 !== i[2 * t] ? (e.heap[++e.heap_len] = s = t, e.depth[t] = 0) : i[2 * t + 1] = 0;
                for (; e.heap_len < 2;) i[2 * (r = e.heap[++e.heap_len] = s < 2 ? ++s : 0)] = 1, e.depth[r] = 0, e.opt_len--, o && (e.static_len -= o[2 * r + 1]);
                for (f.max_code = s, t = Math.floor(e.heap_len / 2); 1 <= t; t--) e.pqdownheap(i, t);
                for (r = a; t = e.heap[1], e.heap[1] = e.heap[e.heap_len--], e.pqdownheap(i, 1), n = e.heap[1], e.heap[--e.heap_max] = t, e.heap[--e.heap_max] = n, i[2 * r] = i[2 * t] + i[2 * n], e.depth[r] = Math.max(e.depth[t], e.depth[n]) + 1, i[2 * t + 1] = i[2 * n + 1] = r, e.heap[1] = r++, e.pqdownheap(i, 1), 2 <= e.heap_len;) ;
                e.heap[--e.heap_max] = e.heap[1], function (e) {
                    var t, n, r, i, o, a, s = f.dyn_tree, l = f.stat_desc.static_tree, c = f.stat_desc.extra_bits,
                        d = f.stat_desc.extra_base, u = f.stat_desc.max_length, h = 0;
                    for (i = 0; i <= p; i++) e.bl_count[i] = 0;
                    for (s[2 * e.heap[e.heap_max] + 1] = 0, t = e.heap_max + 1; t < g; t++) u < (i = s[2 * s[2 * (n = e.heap[t]) + 1] + 1] + 1) && (i = u, h++), s[2 * n + 1] = i, n > f.max_code || (e.bl_count[i]++, o = 0, d <= n && (o = c[n - d]), a = s[2 * n], e.opt_len += a * (i + o), l && (e.static_len += a * (l[2 * n + 1] + o)));
                    if (0 !== h) {
                        do {
                            for (i = u - 1; 0 === e.bl_count[i];) i--;
                            e.bl_count[i]--, e.bl_count[i + 1] += 2, e.bl_count[u]--, h -= 2
                        } while (0 < h);
                        for (i = u; 0 !== i; i--) for (n = e.bl_count[i]; 0 !== n;) (r = e.heap[--t]) > f.max_code || (s[2 * r + 1] != i && (e.opt_len += (i - s[2 * r + 1]) * s[2 * r], s[2 * r + 1] = i), n--)
                    }
                }(e), function (e, t, n) {
                    var r, i, o, a = [], s = 0;
                    for (r = 1; r <= p; r++) a[r] = s = s + n[r - 1] << 1;
                    for (i = 0; i <= t; i++) 0 !== (o = e[2 * i + 1]) && (e[2 * i] = l(a[o]++, o))
                }(i, f.max_code, e.bl_count)
            }
        }

        function he(e, t, n, r, i) {
            this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = r, this.max_length = i
        }

        function n(e, t, n, r, i) {
            this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = r, this.func = i
        }

        ue._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28], ue.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0], ue.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576], ue.d_code = function (e) {
            return e < 256 ? t[e] : t[256 + (e >>> 7)]
        }, ue.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], ue.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], ue.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], ue.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], he.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8], he.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5], he.static_l_desc = new he(he.static_ltree, ue.extra_lbits, 257, 286, p), he.static_d_desc = new he(he.static_dtree, ue.extra_dbits, 0, 30, p), he.static_bl_desc = new he(null, ue.extra_blbits, 0, 19, 7);
        var fe = [new n(0, 0, 0, 0, 0), new n(4, 4, 8, 4, 1), new n(4, 5, 16, 8, 1), new n(4, 6, 32, 32, 1), new n(4, 4, 16, 16, 2), new n(8, 16, 32, 32, 2), new n(8, 16, 128, 128, 2), new n(8, 32, 128, 256, 2), new n(32, 128, 258, 1024, 2), new n(32, 258, 258, 4096, 2)],
            pe = ["need dictionary", "stream end", "", "", "stream error", "data error", "", "buffer error", "", ""];

        function ge(e, t, n, r) {
            var i = e[2 * t], o = e[2 * n];
            return i < o || i == o && r[t] <= r[n]
        }

        function r() {
            var l, c, d, u, h, f, p, g, a, m, v, b, y, s, w, k, x, C, S, A, L, N, I, E, T, B, O, P, M, _, F, R, D, j, H,
                q, U, o, z, $, V, W = this, G = new ue, K = new ue, X = new ue;

            function J() {
                var e;
                for (e = 0; e < 286; e++) F[2 * e] = 0;
                for (e = 0; e < 30; e++) R[2 * e] = 0;
                for (e = 0; e < 19; e++) D[2 * e] = 0;
                F[512] = 1, W.opt_len = W.static_len = 0, q = o = 0
            }

            function Y(e, t) {
                var n, r, i = -1, o = e[1], a = 0, s = 7, l = 4;
                for (0 === o && (s = 138, l = 3), e[2 * (t + 1) + 1] = 65535, n = 0; n <= t; n++) r = o, o = e[2 * (n + 1) + 1], ++a < s && r == o || (a < l ? D[2 * r] += a : 0 !== r ? (r != i && D[2 * r]++, D[32]++) : a <= 10 ? D[34]++ : D[36]++, i = r, l = (a = 0) === o ? (s = 138, 3) : r == o ? (s = 6, 3) : (s = 7, 4))
            }

            function Z(e) {
                W.pending_buf[W.pending++] = e
            }

            function Q(e) {
                Z(255 & e), Z(e >>> 8 & 255)
            }

            function ee(e, t) {
                var n, r = t;
                16 - r < V ? (Q($ |= (n = e) << V & 65535), $ = n >>> 16 - V, V += r - 16) : ($ |= e << V & 65535, V += r)
            }

            function te(e, t) {
                var n = 2 * e;
                ee(65535 & t[n], 65535 & t[1 + n])
            }

            function ne(e, t) {
                var n, r, i = -1, o = e[1], a = 0, s = 7, l = 4;
                for (0 === o && (s = 138, l = 3), n = 0; n <= t; n++) if (r = o, o = e[2 * (n + 1) + 1], !(++a < s && r == o)) {
                    if (a < l) for (; te(r, D), 0 != --a;) ; else 0 !== r ? (r != i && (te(r, D), a--), te(16, D), ee(a - 3, 2)) : a <= 10 ? (te(17, D), ee(a - 3, 3)) : (te(18, D), ee(a - 11, 7));
                    i = r, l = (a = 0) === o ? (s = 138, 3) : r == o ? (s = 6, 3) : (s = 7, 4)
                }
            }

            function re() {
                16 == V ? (Q($), V = $ = 0) : 8 <= V && (Z(255 & $), $ >>>= 8, V -= 8)
            }

            function ie(e, t) {
                var n, r, i;
                if (W.pending_buf[U + 2 * q] = e >>> 8 & 255, W.pending_buf[U + 2 * q + 1] = 255 & e, W.pending_buf[j + q] = 255 & t, q++, 0 === e ? F[2 * t]++ : (o++, e--, F[2 * (ue._length_code[t] + 256 + 1)]++, R[2 * ue.d_code(e)]++), 0 == (8191 & q) && 2 < O) {
                    for (n = 8 * q, r = L - x, i = 0; i < 30; i++) n += R[2 * i] * (5 + ue.extra_dbits[i]);
                    if (n >>>= 3, o < Math.floor(q / 2) && n < Math.floor(r / 2)) return !0
                }
                return q == H - 1
            }

            function oe(e, t) {
                var n, r, i, o, a = 0;
                if (0 !== q) for (; n = W.pending_buf[U + 2 * a] << 8 & 65280 | 255 & W.pending_buf[U + 2 * a + 1], r = 255 & W.pending_buf[j + a], a++, 0 === n ? te(r, e) : (te((i = ue._length_code[r]) + 256 + 1, e), 0 !== (o = ue.extra_lbits[i]) && ee(r -= ue.base_length[i], o), te(i = ue.d_code(--n), t), 0 !== (o = ue.extra_dbits[i]) && ee(n -= ue.base_dist[i], o)), a < q;) ;
                te(256, e), z = e[513]
            }

            function ae() {
                8 < V ? Q($) : 0 < V && Z(255 & $), V = $ = 0
            }

            function se(e, t, n) {
                var r, i;
                ee(0 + (n ? 1 : 0), 3), r = e, i = t, ae(), z = 8, Q(i), Q(~i), W.pending_buf.set(g.subarray(r, r + i), W.pending), W.pending += i
            }

            function le(e) {
                (function (e, t, n) {
                    var r, i, o = 0;
                    0 < O ? (G.build_tree(W), K.build_tree(W), o = function () {
                        var e;
                        for (Y(F, G.max_code), Y(R, K.max_code), X.build_tree(W), e = 18; 3 <= e && 0 === D[2 * ue.bl_order[e] + 1]; e--) ;
                        return W.opt_len += 3 * (e + 1) + 5 + 5 + 4, e
                    }(), r = W.opt_len + 3 + 7 >>> 3, (i = W.static_len + 3 + 7 >>> 3) <= r && (r = i)) : r = i = t + 5, t + 4 <= r && -1 != e ? se(e, t, n) : i == r ? (ee(2 + (n ? 1 : 0), 3), oe(he.static_ltree, he.static_dtree)) : (ee(4 + (n ? 1 : 0), 3), function (e, t, n) {
                        var r;
                        for (ee(e - 257, 5), ee(t - 1, 5), ee(n - 4, 4), r = 0; r < n; r++) ee(D[2 * ue.bl_order[r] + 1], 3);
                        ne(F, e - 1), ne(R, t - 1)
                    }(G.max_code + 1, K.max_code + 1, o + 1), oe(F, R)), J(), n && ae()
                })(0 <= x ? x : -1, L - x, e), x = L, l.flush_pending()
            }

            function ce() {
                var e, t, n, r;
                do {
                    if (0 == (r = a - I - L) && 0 === L && 0 === I) r = h; else if (-1 == r) r--; else if (h + h - 262 <= L) {
                        for (g.set(g.subarray(h, h + h), 0), N -= h, L -= h, x -= h, n = e = y; t = 65535 & v[--n], v[n] = h <= t ? t - h : 0, 0 != --e;) ;
                        for (n = e = h; t = 65535 & m[--n], m[n] = h <= t ? t - h : 0, 0 != --e;) ;
                        r += h
                    }
                    if (0 === l.avail_in) return;
                    e = l.read_buf(g, L + I, r), 3 <= (I += e) && (b = ((b = 255 & g[L]) << k ^ 255 & g[L + 1]) & w)
                } while (I < 262 && 0 !== l.avail_in)
            }

            function de(e) {
                var t, n, r = T, i = L, o = E, a = h - 262 < L ? L - (h - 262) : 0, s = _, l = p, c = L + 258,
                    d = g[i + o - 1], u = g[i + o];
                M <= E && (r >>= 2), I < s && (s = I);
                do {
                    if (g[(t = e) + o] == u && g[t + o - 1] == d && g[t] == g[i] && g[++t] == g[i + 1]) {
                        i += 2, t++;
                        do {
                        } while (g[++i] == g[++t] && g[++i] == g[++t] && g[++i] == g[++t] && g[++i] == g[++t] && g[++i] == g[++t] && g[++i] == g[++t] && g[++i] == g[++t] && g[++i] == g[++t] && i < c);
                        if (n = 258 - (c - i), i = c - 258, o < n) {
                            if (N = e, s <= (o = n)) break;
                            d = g[i + o - 1], u = g[i + o]
                        }
                    }
                } while ((e = 65535 & m[e & l]) > a && 0 != --r);
                return o <= I ? o : I
            }

            W.depth = [], W.bl_count = [], W.heap = [], F = [], R = [], D = [], W.pqdownheap = function (e, t) {
                for (var n = W.heap, r = n[t], i = t << 1; i <= W.heap_len && (i < W.heap_len && ge(e, n[i + 1], n[i], W.depth) && i++, !ge(e, r, n[i], W.depth));) n[t] = n[i], t = i, i <<= 1;
                n[t] = r
            }, W.deflateInit = function (e, t, n, r, i, o) {
                return r = r || 8, i = i || 8, o = o || 0, e.msg = null, -1 == t && (t = 6), i < 1 || 9 < i || 8 != r || n < 9 || 15 < n || t < 0 || 9 < t || o < 0 || 2 < o ? -2 : (e.dstate = W, p = (h = 1 << (f = n)) - 1, w = (y = 1 << (s = i + 7)) - 1, k = Math.floor((s + 3 - 1) / 3), g = new Uint8Array(2 * h), m = [], v = [], H = 1 << i + 6, W.pending_buf = new Uint8Array(4 * H), d = 4 * H, U = Math.floor(H / 2), j = 3 * H, O = t, P = o, function (e) {
                    return e.total_in = e.total_out = 0, e.msg = null, W.pending = 0, W.pending_out = 0, c = 113, u = 0, G.dyn_tree = F, G.stat_desc = he.static_l_desc, K.dyn_tree = R, K.stat_desc = he.static_d_desc, X.dyn_tree = D, X.stat_desc = he.static_bl_desc, V = $ = 0, z = 8, J(), function () {
                        var e;
                        for (a = 2 * h, e = v[y - 1] = 0; e < y - 1; e++) v[e] = 0;
                        B = fe[O].max_lazy, M = fe[O].good_length, _ = fe[O].nice_length, T = fe[O].max_chain, C = E = 2, b = A = I = x = L = 0
                    }(), 0
                }(e))
            }, W.deflateEnd = function () {
                return 42 != c && 113 != c && 666 != c ? -2 : (W.pending_buf = null, g = m = v = null, W.dstate = null, 113 == c ? -3 : 0)
            }, W.deflateParams = function (e, t, n) {
                var r = 0;
                return -1 == t && (t = 6), t < 0 || 9 < t || n < 0 || 2 < n ? -2 : (fe[O].func != fe[t].func && 0 !== e.total_in && (r = e.deflate(1)), O != t && (B = fe[O = t].max_lazy, M = fe[O].good_length, _ = fe[O].nice_length, T = fe[O].max_chain), P = n, r)
            }, W.deflateSetDictionary = function (e, t, n) {
                var r, i = n, o = 0;
                if (!t || 42 != c) return -2;
                if (i < 3) return 0;
                for (h - 262 < i && (o = n - (i = h - 262)), g.set(t.subarray(o, o + i), 0), x = L = i, b = ((b = 255 & g[0]) << k ^ 255 & g[1]) & w, r = 0; r <= i - 3; r++) b = (b << k ^ 255 & g[r + 2]) & w, m[r & p] = v[b], v[b] = r;
                return 0
            }, W.deflate = function (e, t) {
                var n, r, i, o, a, s;
                if (4 < t || t < 0) return -2;
                if (!e.next_out || !e.next_in && 0 !== e.avail_in || 666 == c && 4 != t) return e.msg = pe[4], -2;
                if (0 === e.avail_out) return e.msg = pe[7], -5;
                if (l = e, o = u, u = t, 42 == c && (r = 8 + (f - 8 << 4) << 8, 3 < (i = (O - 1 & 255) >> 1) && (i = 3), r |= i << 6, 0 !== L && (r |= 32), c = 113, Z((s = r += 31 - r % 31) >> 8 & 255), Z(255 & s)), 0 !== W.pending) {
                    if (l.flush_pending(), 0 === l.avail_out) return u = -1, 0
                } else if (0 === l.avail_in && t <= o && 4 != t) return l.msg = pe[7], -5;
                if (666 == c && 0 !== l.avail_in) return e.msg = pe[7], -5;
                if (0 !== l.avail_in || 0 !== I || 0 != t && 666 != c) {
                    switch (a = -1, fe[O].func) {
                        case 0:
                            a = function (e) {
                                var t, n = 65535;
                                for (d - 5 < n && (n = d - 5); ;) {
                                    if (I <= 1) {
                                        if (ce(), 0 === I && 0 == e) return 0;
                                        if (0 === I) break
                                    }
                                    if (L += I, t = x + n, ((I = 0) === L || t <= L) && (I = L - t, L = t, le(!1), 0 === l.avail_out)) return 0;
                                    if (h - 262 <= L - x && (le(!1), 0 === l.avail_out)) return 0
                                }
                                return le(4 == e), 0 === l.avail_out ? 4 == e ? 2 : 0 : 4 == e ? 3 : 1
                            }(t);
                            break;
                        case 1:
                            a = function (e) {
                                for (var t, n = 0; ;) {
                                    if (I < 262) {
                                        if (ce(), I < 262 && 0 == e) return 0;
                                        if (0 === I) break
                                    }
                                    if (3 <= I && (b = (b << k ^ 255 & g[L + 2]) & w, n = 65535 & v[b], m[L & p] = v[b], v[b] = L), 0 !== n && (L - n & 65535) <= h - 262 && 2 != P && (C = de(n)), 3 <= C) if (t = ie(L - N, C - 3), I -= C, C <= B && 3 <= I) {
                                        for (C--; b = (b << k ^ 255 & g[++L + 2]) & w, n = 65535 & v[b], m[L & p] = v[b], v[b] = L, 0 != --C;) ;
                                        L++
                                    } else L += C, C = 0, b = ((b = 255 & g[L]) << k ^ 255 & g[L + 1]) & w; else t = ie(0, 255 & g[L]), I--, L++;
                                    if (t && (le(!1), 0 === l.avail_out)) return 0
                                }
                                return le(4 == e), 0 === l.avail_out ? 4 == e ? 2 : 0 : 4 == e ? 3 : 1
                            }(t);
                            break;
                        case 2:
                            a = function (e) {
                                for (var t, n, r = 0; ;) {
                                    if (I < 262) {
                                        if (ce(), I < 262 && 0 == e) return 0;
                                        if (0 === I) break
                                    }
                                    if (3 <= I && (b = (b << k ^ 255 & g[L + 2]) & w, r = 65535 & v[b], m[L & p] = v[b], v[b] = L), E = C, S = N, C = 2, 0 !== r && E < B && (L - r & 65535) <= h - 262 && (2 != P && (C = de(r)), C <= 5 && (1 == P || 3 == C && 4096 < L - N) && (C = 2)), 3 <= E && C <= E) {
                                        for (n = L + I - 3, t = ie(L - 1 - S, E - 3), I -= E - 1, E -= 2; ++L <= n && (b = (b << k ^ 255 & g[L + 2]) & w, r = 65535 & v[b], m[L & p] = v[b], v[b] = L), 0 != --E;) ;
                                        if (A = 0, C = 2, L++, t && (le(!1), 0 === l.avail_out)) return 0
                                    } else if (0 !== A) {
                                        if ((t = ie(0, 255 & g[L - 1])) && le(!1), L++, I--, 0 === l.avail_out) return 0
                                    } else A = 1, L++, I--
                                }
                                return 0 !== A && (t = ie(0, 255 & g[L - 1]), A = 0), le(4 == e), 0 === l.avail_out ? 4 == e ? 2 : 0 : 4 == e ? 3 : 1
                            }(t)
                    }
                    if (2 != a && 3 != a || (c = 666), 0 == a || 2 == a) return 0 === l.avail_out && (u = -1), 0;
                    if (1 == a) {
                        if (1 == t) ee(2, 3), te(256, he.static_ltree), re(), 1 + z + 10 - V < 9 && (ee(2, 3), te(256, he.static_ltree), re()), z = 7; else if (se(0, 0, !1), 3 == t) for (n = 0; n < y; n++) v[n] = 0;
                        if (l.flush_pending(), 0 === l.avail_out) return u = -1, 0
                    }
                }
                return 4 != t ? 0 : 1
            }
        }

        function i() {
            this.next_in_index = 0, this.next_out_index = 0, this.avail_in = 0, this.total_in = 0, this.avail_out = 0, this.total_out = 0
        }

        i.prototype = {
            deflateInit: function (e, t) {
                return this.dstate = new r, t = t || p, this.dstate.deflateInit(this, e, t)
            }, deflate: function (e) {
                return this.dstate ? this.dstate.deflate(this, e) : -2
            }, deflateEnd: function () {
                if (!this.dstate) return -2;
                var e = this.dstate.deflateEnd();
                return this.dstate = null, e
            }, deflateParams: function (e, t) {
                return this.dstate ? this.dstate.deflateParams(this, e, t) : -2
            }, deflateSetDictionary: function (e, t) {
                return this.dstate ? this.dstate.deflateSetDictionary(this, e, t) : -2
            }, read_buf: function (e, t, n) {
                var r = this.avail_in;
                return n < r && (r = n), 0 === r ? 0 : (this.avail_in -= r, e.set(this.next_in.subarray(this.next_in_index, this.next_in_index + r), t), this.next_in_index += r, this.total_in += r, r)
            }, flush_pending: function () {
                var e = this, t = e.dstate.pending;
                t > e.avail_out && (t = e.avail_out), 0 !== t && (e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out, e.dstate.pending_out + t), e.next_out_index), e.next_out_index += t, e.dstate.pending_out += t, e.total_out += t, e.avail_out -= t, e.dstate.pending -= t, 0 === e.dstate.pending && (e.dstate.pending_out = 0))
            }
        };
        var o = e.zip || e;
        o.Deflater = o._jzlib_Deflater = function (e) {
            var s = new i, l = new Uint8Array(512), t = e ? e.level : -1;
            void 0 === t && (t = -1), s.deflateInit(t), s.next_out = l, this.append = function (e, t) {
                var n, r = [], i = 0, o = 0, a = 0;
                if (e.length) {
                    s.next_in_index = 0, s.next_in = e, s.avail_in = e.length;
                    do {
                        if (s.next_out_index = 0, s.avail_out = 512, 0 != s.deflate(0)) throw new Error("deflating: " + s.msg);
                        s.next_out_index && (512 == s.next_out_index ? r.push(new Uint8Array(l)) : r.push(new Uint8Array(l.subarray(0, s.next_out_index)))), a += s.next_out_index, t && 0 < s.next_in_index && s.next_in_index != i && (t(s.next_in_index), i = s.next_in_index)
                    } while (0 < s.avail_in || 0 === s.avail_out);
                    return n = new Uint8Array(a), r.forEach(function (e) {
                        n.set(e, o), o += e.length
                    }), n
                }
            }, this.flush = function () {
                var e, t, n = [], r = 0, i = 0;
                do {
                    if (s.next_out_index = 0, s.avail_out = 512, 1 != (e = s.deflate(4)) && 0 != e) throw new Error("deflating: " + s.msg);
                    0 < 512 - s.avail_out && n.push(new Uint8Array(l.subarray(0, s.next_out_index))), i += s.next_out_index
                } while (0 < s.avail_in || 0 === s.avail_out);
                return s.deflateEnd(), t = new Uint8Array(i), n.forEach(function (e) {
                    t.set(e, r), r += e.length
                }), t
            }
        }
    }(void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")()), (void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")()).RGBColor = function (e) {
        var t;
        e = e || "", this.ok = !1, "#" == e.charAt(0) && (e = e.substr(1, 6)), e = (e = e.replace(/ /g, "")).toLowerCase();
        var n = {
            aliceblue: "f0f8ff",
            antiquewhite: "faebd7",
            aqua: "00ffff",
            aquamarine: "7fffd4",
            azure: "f0ffff",
            beige: "f5f5dc",
            bisque: "ffe4c4",
            black: "000000",
            blanchedalmond: "ffebcd",
            blue: "0000ff",
            blueviolet: "8a2be2",
            brown: "a52a2a",
            burlywood: "deb887",
            cadetblue: "5f9ea0",
            chartreuse: "7fff00",
            chocolate: "d2691e",
            coral: "ff7f50",
            cornflowerblue: "6495ed",
            cornsilk: "fff8dc",
            crimson: "dc143c",
            cyan: "00ffff",
            darkblue: "00008b",
            darkcyan: "008b8b",
            darkgoldenrod: "b8860b",
            darkgray: "a9a9a9",
            darkgreen: "006400",
            darkkhaki: "bdb76b",
            darkmagenta: "8b008b",
            darkolivegreen: "556b2f",
            darkorange: "ff8c00",
            darkorchid: "9932cc",
            darkred: "8b0000",
            darksalmon: "e9967a",
            darkseagreen: "8fbc8f",
            darkslateblue: "483d8b",
            darkslategray: "2f4f4f",
            darkturquoise: "00ced1",
            darkviolet: "9400d3",
            deeppink: "ff1493",
            deepskyblue: "00bfff",
            dimgray: "696969",
            dodgerblue: "1e90ff",
            feldspar: "d19275",
            firebrick: "b22222",
            floralwhite: "fffaf0",
            forestgreen: "228b22",
            fuchsia: "ff00ff",
            gainsboro: "dcdcdc",
            ghostwhite: "f8f8ff",
            gold: "ffd700",
            goldenrod: "daa520",
            gray: "808080",
            green: "008000",
            greenyellow: "adff2f",
            honeydew: "f0fff0",
            hotpink: "ff69b4",
            indianred: "cd5c5c",
            indigo: "4b0082",
            ivory: "fffff0",
            khaki: "f0e68c",
            lavender: "e6e6fa",
            lavenderblush: "fff0f5",
            lawngreen: "7cfc00",
            lemonchiffon: "fffacd",
            lightblue: "add8e6",
            lightcoral: "f08080",
            lightcyan: "e0ffff",
            lightgoldenrodyellow: "fafad2",
            lightgrey: "d3d3d3",
            lightgreen: "90ee90",
            lightpink: "ffb6c1",
            lightsalmon: "ffa07a",
            lightseagreen: "20b2aa",
            lightskyblue: "87cefa",
            lightslateblue: "8470ff",
            lightslategray: "778899",
            lightsteelblue: "b0c4de",
            lightyellow: "ffffe0",
            lime: "00ff00",
            limegreen: "32cd32",
            linen: "faf0e6",
            magenta: "ff00ff",
            maroon: "800000",
            mediumaquamarine: "66cdaa",
            mediumblue: "0000cd",
            mediumorchid: "ba55d3",
            mediumpurple: "9370d8",
            mediumseagreen: "3cb371",
            mediumslateblue: "7b68ee",
            mediumspringgreen: "00fa9a",
            mediumturquoise: "48d1cc",
            mediumvioletred: "c71585",
            midnightblue: "191970",
            mintcream: "f5fffa",
            mistyrose: "ffe4e1",
            moccasin: "ffe4b5",
            navajowhite: "ffdead",
            navy: "000080",
            oldlace: "fdf5e6",
            olive: "808000",
            olivedrab: "6b8e23",
            orange: "ffa500",
            orangered: "ff4500",
            orchid: "da70d6",
            palegoldenrod: "eee8aa",
            palegreen: "98fb98",
            paleturquoise: "afeeee",
            palevioletred: "d87093",
            papayawhip: "ffefd5",
            peachpuff: "ffdab9",
            peru: "cd853f",
            pink: "ffc0cb",
            plum: "dda0dd",
            powderblue: "b0e0e6",
            purple: "800080",
            red: "ff0000",
            rosybrown: "bc8f8f",
            royalblue: "4169e1",
            saddlebrown: "8b4513",
            salmon: "fa8072",
            sandybrown: "f4a460",
            seagreen: "2e8b57",
            seashell: "fff5ee",
            sienna: "a0522d",
            silver: "c0c0c0",
            skyblue: "87ceeb",
            slateblue: "6a5acd",
            slategray: "708090",
            snow: "fffafa",
            springgreen: "00ff7f",
            steelblue: "4682b4",
            tan: "d2b48c",
            teal: "008080",
            thistle: "d8bfd8",
            tomato: "ff6347",
            turquoise: "40e0d0",
            violet: "ee82ee",
            violetred: "d02090",
            wheat: "f5deb3",
            white: "ffffff",
            whitesmoke: "f5f5f5",
            yellow: "ffff00",
            yellowgreen: "9acd32"
        };
        for (var r in n) e == r && (e = n[r]);
        for (var i = [{
            re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,
            example: ["rgb(123, 234, 45)", "rgb(255,234,245)"],
            process: function (e) {
                return [parseInt(e[1]), parseInt(e[2]), parseInt(e[3])]
            }
        }, {
            re: /^(\w{2})(\w{2})(\w{2})$/, example: ["#00ff00", "336699"], process: function (e) {
                return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
            }
        }, {
            re: /^(\w{1})(\w{1})(\w{1})$/, example: ["#fb0", "f0f"], process: function (e) {
                return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
            }
        }], o = 0; o < i.length; o++) {
            var a = i[o].re, s = i[o].process, l = a.exec(e);
            l && (t = s(l), this.r = t[0], this.g = t[1], this.b = t[2], this.ok = !0)
        }
        this.r = this.r < 0 || isNaN(this.r) ? 0 : 255 < this.r ? 255 : this.r, this.g = this.g < 0 || isNaN(this.g) ? 0 : 255 < this.g ? 255 : this.g, this.b = this.b < 0 || isNaN(this.b) ? 0 : 255 < this.b ? 255 : this.b, this.toRGB = function () {
            return "rgb(" + this.r + ", " + this.g + ", " + this.b + ")"
        }, this.toHex = function () {
            var e = this.r.toString(16), t = this.g.toString(16), n = this.b.toString(16);
            return 1 == e.length && (e = "0" + e), 1 == t.length && (t = "0" + t), 1 == n.length && (n = "0" + n), "#" + e + t + n
        }
    }, function (e) {
        function c(e) {
            var t = e.charCodeAt(0);
            return t === n || t === s ? 62 : t === r || t === l ? 63 : t < i ? -1 : t < i + 10 ? t - i + 26 + 26 : t < a + 26 ? t - a : t < o + 26 ? t - o + 26 : void 0
        }

        var n = "+".charCodeAt(0), r = "/".charCodeAt(0), i = "0".charCodeAt(0), o = "a".charCodeAt(0),
            a = "A".charCodeAt(0), s = "-".charCodeAt(0), l = "_".charCodeAt(0);

        function d(e, t, n) {
            var r;
            if (this.rawData = e, r = this.contents = new K(e), this.contents.pos = 4, "ttcf" === r.readString(4)) {
                if (!t) throw new Error("Must specify a font name for TTC files.");
                throw new Error("Font " + t + " not found in TTC file.")
            }
            r.pos = 0, this.parse(), this.subset = new M(this), this.registerTTF()
        }

        e.API.TTFFont = (d.open = function (e, t, n, r) {
            if ("string" != typeof n) throw new Error("Invalid argument supplied in TTFFont.open");
            return new d(function (e) {
                var t, n, r, i, o;
                if (0 < e.length % 4) throw new Error("Invalid string. Length must be a multiple of 4");
                var a = e.length;
                i = "=" === e.charAt(a - 2) ? 2 : "=" === e.charAt(a - 1) ? 1 : 0, o = new Uint8Array(3 * e.length / 4 - i), n = 0 < i ? e.length - 4 : e.length;
                var s = 0;

                function l(e) {
                    o[s++] = e
                }

                for (t = 0; t < n; t += 4) l((16711680 & (r = c(e.charAt(t)) << 18 | c(e.charAt(t + 1)) << 12 | c(e.charAt(t + 2)) << 6 | c(e.charAt(t + 3)))) >> 16), l((65280 & r) >> 8), l(255 & r);
                return 2 == i ? l(255 & (r = c(e.charAt(t)) << 2 | c(e.charAt(t + 1)) >> 4)) : 1 == i && (l((r = c(e.charAt(t)) << 10 | c(e.charAt(t + 1)) << 4 | c(e.charAt(t + 2)) >> 2) >> 8 & 255), l(255 & r)), o
            }(n), t, r)
        }, d.prototype.parse = function () {
            return this.directory = new h(this.contents), this.head = new w(this), this.name = new L(this), this.cmap = new x(this), this.toUnicode = new Map, this.hhea = new C(this), this.maxp = new N(this), this.hmtx = new I(this), this.post = new A(this), this.os2 = new S(this), this.loca = new P(this), this.glyf = new T(this), this.ascender = this.os2.exists && this.os2.ascender || this.hhea.ascender, this.decender = this.os2.exists && this.os2.decender || this.hhea.decender, this.lineGap = this.os2.exists && this.os2.lineGap || this.hhea.lineGap, this.bbox = [this.head.xMin, this.head.yMin, this.head.xMax, this.head.yMax]
        }, d.prototype.registerTTF = function () {
            var i, e, t, n, r;
            if (this.scaleFactor = 1e3 / this.head.unitsPerEm, this.bbox = function () {
                var e, t, n, r;
                for (r = [], e = 0, t = (n = this.bbox).length; e < t; e++) i = n[e], r.push(Math.round(i * this.scaleFactor));
                return r
            }.call(this), this.stemV = 0, this.post.exists ? (t = 255 & (n = this.post.italic_angle), !0 & (e = n >> 16) && (e = -(1 + (65535 ^ e))), this.italicAngle = +(e + "." + t)) : this.italicAngle = 0, this.ascender = Math.round(this.ascender * this.scaleFactor), this.decender = Math.round(this.decender * this.scaleFactor), this.lineGap = Math.round(this.lineGap * this.scaleFactor), this.capHeight = this.os2.exists && this.os2.capHeight || this.ascender, this.xHeight = this.os2.exists && this.os2.xHeight || 0, this.familyClass = (this.os2.exists && this.os2.familyClass || 0) >> 8, this.isSerif = 1 === (r = this.familyClass) || 2 === r || 3 === r || 4 === r || 5 === r || 7 === r, this.isScript = 10 === this.familyClass, this.flags = 0, this.post.isFixedPitch && (this.flags |= 1), this.isSerif && (this.flags |= 2), this.isScript && (this.flags |= 8), 0 !== this.italicAngle && (this.flags |= 64), this.flags |= 32, !this.cmap.unicode) throw new Error("No unicode cmap for font")
        }, d.prototype.characterToGlyph = function (e) {
            var t;
            return (null != (t = this.cmap.unicode) ? t.codeMap[e] : void 0) || 0
        }, d.prototype.widthOfGlyph = function (e) {
            var t;
            return t = 1e3 / this.head.unitsPerEm, this.hmtx.forGlyph(e).advance * t
        }, d.prototype.widthOfString = function (e, t, n) {
            var r, i, o, a, s;
            for (i = a = o = 0, s = (e = "" + e).length; 0 <= s ? a < s : s < a; i = 0 <= s ? ++a : --a) r = e.charCodeAt(i), o += this.widthOfGlyph(this.characterToGlyph(r)) + n * (1e3 / t) || 0;
            return o * (t / 1e3)
        }, d.prototype.lineHeight = function (e, t) {
            var n;
            return null == t && (t = !1), n = t ? this.lineGap : 0, (this.ascender + n - this.decender) / 1e3 * e
        }, d);

        function t(e, t) {
            for (var n in t) f.call(t, n) && (e[n] = t[n]);

            function r() {
                this.constructor = e
            }

            return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
        }

        var u, p, K = (m.prototype.readByte = function () {
            return this.data[this.pos++]
        }, m.prototype.writeByte = function (e) {
            return this.data[this.pos++] = e
        }, m.prototype.readUInt32 = function () {
            return 16777216 * this.readByte() + (this.readByte() << 16) + (this.readByte() << 8) + this.readByte()
        }, m.prototype.writeUInt32 = function (e) {
            return this.writeByte(e >>> 24 & 255), this.writeByte(e >> 16 & 255), this.writeByte(e >> 8 & 255), this.writeByte(255 & e)
        }, m.prototype.readInt32 = function () {
            var e;
            return 2147483648 <= (e = this.readUInt32()) ? e - 4294967296 : e
        }, m.prototype.writeInt32 = function (e) {
            return e < 0 && (e += 4294967296), this.writeUInt32(e)
        }, m.prototype.readUInt16 = function () {
            return this.readByte() << 8 | this.readByte()
        }, m.prototype.writeUInt16 = function (e) {
            return this.writeByte(e >> 8 & 255), this.writeByte(255 & e)
        }, m.prototype.readInt16 = function () {
            var e;
            return 32768 <= (e = this.readUInt16()) ? e - 65536 : e
        }, m.prototype.writeInt16 = function (e) {
            return e < 0 && (e += 65536), this.writeUInt16(e)
        }, m.prototype.readString = function (e) {
            var t, n, r;
            for (n = [], t = r = 0; 0 <= e ? r < e : e < r; t = 0 <= e ? ++r : --r) n[t] = String.fromCharCode(this.readByte());
            return n.join("")
        }, m.prototype.writeString = function (e) {
            var t, n, r, i;
            for (i = [], t = n = 0, r = e.length; 0 <= r ? n < r : r < n; t = 0 <= r ? ++n : --n) i.push(this.writeByte(e.charCodeAt(t)));
            return i
        }, m.prototype.readShort = function () {
            return this.readInt16()
        }, m.prototype.writeShort = function (e) {
            return this.writeInt16(e)
        }, m.prototype.readLongLong = function () {
            var e, t, n, r, i, o, a, s;
            return e = this.readByte(), t = this.readByte(), n = this.readByte(), r = this.readByte(), i = this.readByte(), o = this.readByte(), a = this.readByte(), s = this.readByte(), 128 & e ? -1 * (72057594037927940 * (255 ^ e) + 281474976710656 * (255 ^ t) + 1099511627776 * (255 ^ n) + 4294967296 * (255 ^ r) + 16777216 * (255 ^ i) + 65536 * (255 ^ o) + 256 * (255 ^ a) + (255 ^ s) + 1) : 72057594037927940 * e + 281474976710656 * t + 1099511627776 * n + 4294967296 * r + 16777216 * i + 65536 * o + 256 * a + s
        }, m.prototype.writeLongLong = function (e) {
            var t, n;
            return t = Math.floor(e / 4294967296), n = 4294967295 & e, this.writeByte(t >> 24 & 255), this.writeByte(t >> 16 & 255), this.writeByte(t >> 8 & 255), this.writeByte(255 & t), this.writeByte(n >> 24 & 255), this.writeByte(n >> 16 & 255), this.writeByte(n >> 8 & 255), this.writeByte(255 & n)
        }, m.prototype.readInt = function () {
            return this.readInt32()
        }, m.prototype.writeInt = function (e) {
            return this.writeInt32(e)
        }, m.prototype.read = function (e) {
            var t, n;
            for (t = [], n = 0; 0 <= e ? n < e : e < n; 0 <= e ? ++n : --n) t.push(this.readByte());
            return t
        }, m.prototype.write = function (e) {
            var t, n, r, i;
            for (i = [], n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.writeByte(t));
            return i
        }, m), h = (g.prototype.encode = function (e) {
            var t, n, r, i, o, a, s, l, c, d, u, h, f;
            for (f in u = Object.keys(e).length, a = Math.log(2), c = 16 * Math.floor(Math.log(u) / a), i = Math.floor(c / a), l = 16 * u - c, (n = new K).writeInt(this.scalarType), n.writeShort(u), n.writeShort(c), n.writeShort(i), n.writeShort(l), r = 16 * u, s = n.pos + r, o = null, h = [], e) for (d = e[f], n.writeString(f), n.writeInt(p(d)), n.writeInt(s), n.writeInt(d.length), h = h.concat(d), "head" === f && (o = s), s += d.length; s % 4;) h.push(0), s++;
            return n.write(h), t = 2981146554 - p(n.data), n.pos = o + 8, n.writeUInt32(t), n.data
        }, p = function (e) {
            var t, n, r, i;
            for (e = E.call(e); e.length % 4;) e.push(0);
            for (n = new K(e), r = t = 0, i = e.length; r < i; r += 4) t += n.readUInt32();
            return 4294967295 & t
        }, g), f = {}.hasOwnProperty;

        function g(e) {
            var t, n, r;
            for (this.scalarType = e.readInt(), this.tableCount = e.readShort(), this.searchRange = e.readShort(), this.entrySelector = e.readShort(), this.rangeShift = e.readShort(), this.tables = {}, n = 0, r = this.tableCount; 0 <= r ? n < r : r < n; 0 <= r ? ++n : --n) t = {
                tag: e.readString(4),
                checksum: e.readInt(),
                offset: e.readInt(),
                length: e.readInt()
            }, this.tables[t.tag] = t
        }

        function m(e) {
            this.data = null != e ? e : [], this.pos = 0, this.length = this.data.length
        }

        function v(e) {
            var t;
            this.file = e, t = this.file.directory.tables[this.tag], this.exists = !!t, t && (this.offset = t.offset, this.length = t.length, this.parse(this.file.contents))
        }

        v.prototype.parse = function () {
        }, v.prototype.encode = function () {
        }, v.prototype.raw = function () {
            return this.exists ? (this.file.contents.pos = this.offset, this.file.contents.read(this.length)) : null
        };

        function b(e, t) {
            this.raw = e, this.length = e.length, this.platformID = t.platformID, this.encodingID = t.encodingID, this.languageID = t.languageID
        }

        var y, w = (t(X, u = v), X.prototype.tag = "head", X.prototype.parse = function (e) {
            return e.pos = this.offset, this.version = e.readInt(), this.revision = e.readInt(), this.checkSumAdjustment = e.readInt(), this.magicNumber = e.readInt(), this.flags = e.readShort(), this.unitsPerEm = e.readShort(), this.created = e.readLongLong(), this.modified = e.readLongLong(), this.xMin = e.readShort(), this.yMin = e.readShort(), this.xMax = e.readShort(), this.yMax = e.readShort(), this.macStyle = e.readShort(), this.lowestRecPPEM = e.readShort(), this.fontDirectionHint = e.readShort(), this.indexToLocFormat = e.readShort(), this.glyphDataFormat = e.readShort()
        }, X.prototype.encode = function (e) {
            var t;
            return (t = new K).writeInt(this.version), t.writeInt(this.revision), t.writeInt(this.checkSumAdjustment), t.writeInt(this.magicNumber), t.writeShort(this.flags), t.writeShort(this.unitsPerEm), t.writeLongLong(this.created), t.writeLongLong(this.modified), t.writeShort(this.xMin), t.writeShort(this.yMin), t.writeShort(this.xMax), t.writeShort(this.yMax), t.writeShort(this.macStyle), t.writeShort(this.lowestRecPPEM), t.writeShort(this.fontDirectionHint), t.writeShort(e), t.writeShort(this.glyphDataFormat), t.data
        }, X), k = (G.encode = function (e, t) {
            var n, r, i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w, k, x, C, S, A, L, N, I, E, T, B, O, P, M, _, F,
                R, D, j, H, q, U, z, $, V, W, G;
            switch (E = new K, o = Object.keys(e).sort(function (e, t) {
                return e - t
            }), t) {
                case"macroman":
                    for (p = 0, g = function () {
                        var e, t;
                        for (t = [], f = e = 0; e < 256; f = ++e) t.push(0);
                        return t
                    }(), v = {0: 0}, i = {}, T = 0, M = o.length; T < M; T++) null == v[$ = e[r = o[T]]] && (v[$] = ++p), i[r] = {
                        old: e[r],
                        new: v[e[r]]
                    }, g[r] = v[e[r]];
                    return E.writeUInt16(1), E.writeUInt16(0), E.writeUInt32(12), E.writeUInt16(0), E.writeUInt16(262), E.writeUInt16(0), E.write(g), {
                        charMap: i,
                        subtable: E.data,
                        maxGlyphID: p + 1
                    };
                case"unicode":
                    for (N = [], d = [], v = {}, n = {}, m = l = null, B = b = 0, _ = o.length; B < _; B++) null == v[w = e[r = o[B]]] && (v[w] = ++b), n[r] = {
                        old: w,
                        new: v[w]
                    }, a = v[w] - r, null != m && a === l || (m && d.push(m), N.push(r), l = a), m = r;
                    for (m && d.push(m), d.push(65535), N.push(65535), A = 2 * (S = N.length), C = 2 * Math.pow(Math.log(S) / Math.LN2, 2), u = Math.log(C / 2) / Math.LN2, x = 2 * S - C, s = [], k = [], h = [], f = O = 0, F = N.length; O < F; f = ++O) {
                        if (L = N[f], c = d[f], 65535 === L) {
                            s.push(0), k.push(0);
                            break
                        }
                        if (32768 <= L - (I = n[L].new)) for (s.push(0), k.push(2 * (h.length + S - f)), r = P = L; L <= c ? P <= c : c <= P; r = L <= c ? ++P : --P) h.push(n[r].new); else s.push(I - L), k.push(0)
                    }
                    for (E.writeUInt16(3), E.writeUInt16(1), E.writeUInt32(12), E.writeUInt16(4), E.writeUInt16(16 + 8 * S + 2 * h.length), E.writeUInt16(0), E.writeUInt16(A), E.writeUInt16(C), E.writeUInt16(u), E.writeUInt16(x), U = 0, R = d.length; U < R; U++) r = d[U], E.writeUInt16(r);
                    for (E.writeUInt16(0), z = 0, D = N.length; z < D; z++) r = N[z], E.writeUInt16(r);
                    for (V = 0, j = s.length; V < j; V++) a = s[V], E.writeUInt16(a);
                    for (W = 0, H = k.length; W < H; W++) y = k[W], E.writeUInt16(y);
                    for (G = 0, q = h.length; G < q; G++) p = h[G], E.writeUInt16(p);
                    return {charMap: n, subtable: E.data, maxGlyphID: b + 1}
            }
        }, G), x = (t(W, u), W.prototype.tag = "cmap", W.prototype.parse = function (e) {
            var t, n, r;
            for (e.pos = this.offset, this.version = e.readUInt16(), n = e.readUInt16(), this.tables = [], this.unicode = null, r = 0; 0 <= n ? r < n : n < r; 0 <= n ? ++r : --r) t = new k(e, this.offset), this.tables.push(t), t.isUnicode && null == this.unicode && (this.unicode = t);
            return !0
        }, W.encode = function (e, t) {
            var n, r;
            return null == t && (t = "macroman"), n = k.encode(e, t), (r = new K).writeUInt16(0), r.writeUInt16(1), n.table = r.data.concat(n.subtable), n
        }, W), C = (t(V, u), V.prototype.tag = "hhea", V.prototype.parse = function (e) {
            return e.pos = this.offset, this.version = e.readInt(), this.ascender = e.readShort(), this.decender = e.readShort(), this.lineGap = e.readShort(), this.advanceWidthMax = e.readShort(), this.minLeftSideBearing = e.readShort(), this.minRightSideBearing = e.readShort(), this.xMaxExtent = e.readShort(), this.caretSlopeRise = e.readShort(), this.caretSlopeRun = e.readShort(), this.caretOffset = e.readShort(), e.pos += 8, this.metricDataFormat = e.readShort(), this.numberOfMetrics = e.readUInt16()
        }, V), S = (t($, u), $.prototype.tag = "OS/2", $.prototype.parse = function (n) {
            if (n.pos = this.offset, this.version = n.readUInt16(), this.averageCharWidth = n.readShort(), this.weightClass = n.readUInt16(), this.widthClass = n.readUInt16(), this.type = n.readShort(), this.ySubscriptXSize = n.readShort(), this.ySubscriptYSize = n.readShort(), this.ySubscriptXOffset = n.readShort(), this.ySubscriptYOffset = n.readShort(), this.ySuperscriptXSize = n.readShort(), this.ySuperscriptYSize = n.readShort(), this.ySuperscriptXOffset = n.readShort(), this.ySuperscriptYOffset = n.readShort(), this.yStrikeoutSize = n.readShort(), this.yStrikeoutPosition = n.readShort(), this.familyClass = n.readShort(), this.panose = function () {
                var e, t;
                for (t = [], e = 0; e < 10; ++e) t.push(n.readByte());
                return t
            }(), this.charRange = function () {
                var e, t;
                for (t = [], e = 0; e < 4; ++e) t.push(n.readInt());
                return t
            }(), this.vendorID = n.readString(4), this.selection = n.readShort(), this.firstCharIndex = n.readShort(), this.lastCharIndex = n.readShort(), 0 < this.version && (this.ascent = n.readShort(), this.descent = n.readShort(), this.lineGap = n.readShort(), this.winAscent = n.readShort(), this.winDescent = n.readShort(), this.codePageRange = function () {
                var e, t;
                for (t = [], e = 0; e < 2; ++e) t.push(n.readInt());
                return t
            }(), 1 < this.version)) return this.xHeight = n.readShort(), this.capHeight = n.readShort(), this.defaultChar = n.readShort(), this.breakChar = n.readShort(), this.maxContext = n.readShort()
        }, $), A = (t(z, u), z.prototype.tag = "post", z.prototype.parse = function (r) {
            var e, t, n, i;
            switch (r.pos = this.offset, this.format = r.readInt(), this.italicAngle = r.readInt(), this.underlinePosition = r.readShort(), this.underlineThickness = r.readShort(), this.isFixedPitch = r.readInt(), this.minMemType42 = r.readInt(), this.maxMemType42 = r.readInt(), this.minMemType1 = r.readInt(), this.maxMemType1 = r.readInt(), this.format) {
                case 65536:
                    break;
                case 131072:
                    for (t = r.readUInt16(), this.glyphNameIndex = [], n = 0; 0 <= t ? n < t : t < n; 0 <= t ? ++n : --n) this.glyphNameIndex.push(r.readUInt16());
                    for (this.names = [], i = []; r.pos < this.offset + this.length;) e = r.readByte(), i.push(this.names.push(r.readString(e)));
                    return i;
                case 151552:
                    return t = r.readUInt16(), this.offsets = r.read(t);
                case 196608:
                    break;
                case 262144:
                    return this.map = function () {
                        var e, t, n;
                        for (n = [], e = 0, t = this.file.maxp.numGlyphs; 0 <= t ? e < t : t < e; 0 <= t ? ++e : --e) n.push(r.readUInt32());
                        return n
                    }.call(this)
            }
        }, z), L = (t(U, u), U.prototype.tag = "name", U.prototype.parse = function (e) {
            var t, n, r, i, o, a, s, l, c, d, u, h;
            for (e.pos = this.offset, e.readShort(), t = e.readShort(), a = e.readShort(), n = [], i = c = 0; 0 <= t ? c < t : t < c; i = 0 <= t ? ++c : --c) n.push({
                platformID: e.readShort(),
                encodingID: e.readShort(),
                languageID: e.readShort(),
                nameID: e.readShort(),
                length: e.readShort(),
                offset: this.offset + a + e.readShort()
            });
            for (s = {}, i = d = 0, u = n.length; d < u; i = ++d) r = n[i], e.pos = r.offset, l = e.readString(r.length), o = new b(l, r), null == s[h = r.nameID] && (s[h] = []), s[r.nameID].push(o);
            this.strings = s, this.copyright = s[0], this.fontFamily = s[1], this.fontSubfamily = s[2], this.uniqueSubfamily = s[3], this.fontName = s[4], this.version = s[5];
            try {
                this.postscriptName = s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g, "")
            } catch (e) {
                this.postscriptName = s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g, "")
            }
            return this.trademark = s[7], this.manufacturer = s[8], this.designer = s[9], this.description = s[10], this.vendorUrl = s[11], this.designerUrl = s[12], this.license = s[13], this.licenseUrl = s[14], this.preferredFamily = s[15], this.preferredSubfamily = s[17], this.compatibleFull = s[18], this.sampleText = s[19]
        }, U), N = (t(q, u), q.prototype.tag = "maxp", q.prototype.parse = function (e) {
            return e.pos = this.offset, this.version = e.readInt(), this.numGlyphs = e.readUInt16(), this.maxPoints = e.readUInt16(), this.maxContours = e.readUInt16(), this.maxCompositePoints = e.readUInt16(), this.maxComponentContours = e.readUInt16(), this.maxZones = e.readUInt16(), this.maxTwilightPoints = e.readUInt16(), this.maxStorage = e.readUInt16(), this.maxFunctionDefs = e.readUInt16(), this.maxInstructionDefs = e.readUInt16(), this.maxStackElements = e.readUInt16(), this.maxSizeOfInstructions = e.readUInt16(), this.maxComponentElements = e.readUInt16(), this.maxComponentDepth = e.readUInt16()
        }, q), I = (t(H, u), H.prototype.tag = "hmtx", H.prototype.parse = function (n) {
            var e, r, i, t, o, a, s;
            for (n.pos = this.offset, this.metrics = [], t = 0, a = this.file.hhea.numberOfMetrics; 0 <= a ? t < a : a < t; 0 <= a ? ++t : --t) this.metrics.push({
                advance: n.readUInt16(),
                lsb: n.readInt16()
            });
            for (r = this.file.maxp.numGlyphs - this.file.hhea.numberOfMetrics, this.leftSideBearings = function () {
                var e, t;
                for (t = [], e = 0; 0 <= r ? e < r : r < e; 0 <= r ? ++e : --e) t.push(n.readInt16());
                return t
            }(), this.widths = function () {
                var e, t, n, r;
                for (r = [], e = 0, t = (n = this.metrics).length; e < t; e++) i = n[e], r.push(i.advance);
                return r
            }.call(this), e = this.widths[this.widths.length - 1], s = [], o = 0; 0 <= r ? o < r : r < o; 0 <= r ? ++o : --o) s.push(this.widths.push(e));
            return s
        }, H.prototype.forGlyph = function (e) {
            return e in this.metrics ? this.metrics[e] : {
                advance: this.metrics[this.metrics.length - 1].advance,
                lsb: this.leftSideBearings[e - this.metrics.length]
            }
        }, H), E = [].slice, T = (t(j, u), j.prototype.tag = "glyf", j.prototype.parse = function (e) {
            return this.cache = {}
        }, j.prototype.glyphFor = function (e) {
            var t, n, r, i, o, a, s, l, c, d;
            return (e = e) in this.cache ? this.cache[e] : (i = this.file.loca, t = this.file.contents, n = i.indexOf(e), 0 === (r = i.lengthOf(e)) ? this.cache[e] = null : (t.pos = this.offset + n, o = (a = new K(t.read(r))).readShort(), l = a.readShort(), d = a.readShort(), s = a.readShort(), c = a.readShort(), this.cache[e] = -1 === o ? new O(a, l, d, s, c) : new B(a, o, l, d, s, c), this.cache[e]))
        }, j.prototype.encode = function (e, t, n) {
            var r, i, o, a, s;
            for (o = [], i = [], a = 0, s = t.length; a < s; a++) r = e[t[a]], i.push(o.length), r && (o = o.concat(r.encode(n)));
            return i.push(o.length), {table: o, offsets: i}
        }, j), B = (D.prototype.encode = function () {
            return this.raw.data
        }, D), O = (R.prototype.encode = function (e) {
            var t, n, r, i, o;
            for (n = new K(E.call(this.raw.data)), t = r = 0, i = (o = this.glyphIDs).length; r < i; t = ++r) o[t], n.pos = this.glyphOffsets[t];
            return n.data
        }, R), P = (t(F, u), F.prototype.tag = "loca", F.prototype.parse = function (r) {
            var e;
            return r.pos = this.offset, e = this.file.head.indexToLocFormat, this.offsets = 0 === e ? function () {
                var e, t, n;
                for (n = [], e = 0, t = this.length; e < t; e += 2) n.push(2 * r.readUInt16());
                return n
            }.call(this) : function () {
                var e, t, n;
                for (n = [], e = 0, t = this.length; e < t; e += 4) n.push(r.readUInt32());
                return n
            }.call(this)
        }, F.prototype.indexOf = function (e) {
            return this.offsets[e]
        }, F.prototype.lengthOf = function (e) {
            return this.offsets[e + 1] - this.offsets[e]
        }, F.prototype.encode = function (e, t) {
            for (var n = new Uint32Array(this.offsets.length), r = 0, i = 0, o = 0; o < n.length; ++o) if (n[o] = r, i < t.length && t[i] == o) {
                ++i, n[o] = r;
                var a = this.offsets[o], s = this.offsets[o + 1] - a;
                0 < s && (r += s)
            }
            for (var l = new Array(4 * n.length), c = 0; c < n.length; ++c) l[4 * c + 3] = 255 & n[c], l[4 * c + 2] = (65280 & n[c]) >> 8, l[4 * c + 1] = (16711680 & n[c]) >> 16, l[4 * c] = (4278190080 & n[c]) >> 24;
            return l
        }, F), M = (_.prototype.generateCmap = function () {
            var e, t, n, r, i;
            for (t in r = this.font.cmap.tables[0].codeMap, e = {}, i = this.subset) n = i[t], e[t] = r[n];
            return e
        }, _.prototype.glyphsFor = function (e) {
            var t, n, r, i, o, a, s;
            for (r = {}, o = 0, a = e.length; o < a; o++) r[i = e[o]] = this.font.glyf.glyphFor(i);
            for (i in t = [], r) (null != (n = r[i]) ? n.compound : void 0) && t.push.apply(t, n.glyphIDs);
            if (0 < t.length) for (i in s = this.glyphsFor(t)) n = s[i], r[i] = n;
            return r
        }, _.prototype.encode = function (e, t) {
            var n, r, i, o, a, s, l, c, d, u, h, f, p, g, m;
            for (r in n = x.encode(this.generateCmap(), "unicode"), o = this.glyphsFor(e), h = {0: 0}, m = n.charMap) h[(s = m[r]).old] = s.new;
            for (f in u = n.maxGlyphID, o) f in h || (h[f] = u++);
            return c = function (e) {
                var t, n;
                for (t in n = {}, e) n[e[t]] = t;
                return n
            }(h), d = Object.keys(c).sort(function (e, t) {
                return e - t
            }), p = function () {
                var e, t, n;
                for (n = [], e = 0, t = d.length; e < t; e++) a = d[e], n.push(c[a]);
                return n
            }(), i = this.font.glyf.encode(o, p, h), l = this.font.loca.encode(i.offsets, p), g = {
                cmap: this.font.cmap.raw(),
                glyf: i.table,
                loca: l,
                hmtx: this.font.hmtx.raw(),
                hhea: this.font.hhea.raw(),
                maxp: this.font.maxp.raw(),
                post: this.font.post.raw(),
                name: this.font.name.raw(),
                head: this.font.head.encode(t)
            }, this.font.os2.exists && (g["OS/2"] = this.font.os2.raw()), this.font.directory.encode(g)
        }, _);

        function _(e) {
            this.font = e, this.subset = {}, this.unicodes = {}, this.next = 33
        }

        function F() {
            return F.__super__.constructor.apply(this, arguments)
        }

        function R(e, t, n, r, i) {
            var o, a;
            for (this.raw = e, this.xMin = t, this.yMin = n, this.xMax = r, this.yMax = i, this.compound = !0, this.glyphIDs = [], this.glyphOffsets = [], o = this.raw; a = o.readShort(), this.glyphOffsets.push(o.pos), this.glyphIDs.push(o.readShort()), 32 & a;) o.pos += 1 & a ? 4 : 2, 128 & a ? o.pos += 8 : 64 & a ? o.pos += 4 : 8 & a && (o.pos += 2)
        }

        function D(e, t, n, r, i, o) {
            this.raw = e, this.numberOfContours = t, this.xMin = n, this.yMin = r, this.xMax = i, this.yMax = o, this.compound = !1
        }

        function j() {
            return j.__super__.constructor.apply(this, arguments)
        }

        function H() {
            return H.__super__.constructor.apply(this, arguments)
        }

        function q() {
            return q.__super__.constructor.apply(this, arguments)
        }

        function U() {
            return U.__super__.constructor.apply(this, arguments)
        }

        function z() {
            return z.__super__.constructor.apply(this, arguments)
        }

        function $() {
            return $.__super__.constructor.apply(this, arguments)
        }

        function V() {
            return V.__super__.constructor.apply(this, arguments)
        }

        function W() {
            return W.__super__.constructor.apply(this, arguments)
        }

        function G(n, e) {
            var t, r, i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y;
            switch (this.platformID = n.readUInt16(), this.encodingID = n.readShort(), this.offset = e + n.readInt(), d = n.pos, n.pos = this.offset, this.format = n.readUInt16(), this.length = n.readUInt16(), this.language = n.readUInt16(), this.isUnicode = 3 === this.platformID && 1 === this.encodingID && 4 === this.format || 0 === this.platformID && 4 === this.format, this.codeMap = {}, this.format) {
                case 0:
                    for (s = m = 0; m < 256; s = ++m) this.codeMap[s] = n.readByte();
                    break;
                case 4:
                    for (h = n.readUInt16(), u = h / 2, n.pos += 6, i = function () {
                        var e, t;
                        for (t = [], s = e = 0; 0 <= u ? e < u : u < e; s = 0 <= u ? ++e : --e) t.push(n.readUInt16());
                        return t
                    }(), n.pos += 2, p = function () {
                        var e, t;
                        for (t = [], s = e = 0; 0 <= u ? e < u : u < e; s = 0 <= u ? ++e : --e) t.push(n.readUInt16());
                        return t
                    }(), l = function () {
                        var e, t;
                        for (t = [], s = e = 0; 0 <= u ? e < u : u < e; s = 0 <= u ? ++e : --e) t.push(n.readUInt16());
                        return t
                    }(), c = function () {
                        var e, t;
                        for (t = [], s = e = 0; 0 <= u ? e < u : u < e; s = 0 <= u ? ++e : --e) t.push(n.readUInt16());
                        return t
                    }(), r = (this.length - n.pos + this.offset) / 2, a = function () {
                        var e, t;
                        for (t = [], s = e = 0; 0 <= r ? e < r : r < e; s = 0 <= r ? ++e : --e) t.push(n.readUInt16());
                        return t
                    }(), s = v = 0, y = i.length; v < y; s = ++v) for (g = i[s], t = b = f = p[s]; f <= g ? b <= g : g <= b; t = f <= g ? ++b : --b) 0 === c[s] ? o = t + l[s] : 0 !== (o = a[c[s] / 2 + (t - f) - (u - s)] || 0) && (o += l[s]), this.codeMap[t] = 65535 & o
            }
            n.pos = d
        }

        function X() {
            return X.__super__.constructor.apply(this, arguments)
        }

        function J() {
        }

        e.API.PDFObject = (y = function (e, t) {
            return (Array(t + 1).join("0") + e).slice(-t)
        }, J.convert = function (r) {
            var i, e, t, n;
            if (Array.isArray(r)) return "[" + function () {
                var e, t, n;
                for (n = [], e = 0, t = r.length; e < t; e++) i = r[e], n.push(J.convert(i));
                return n
            }().join(" ") + "]";
            if ("string" == typeof r) return "/" + r;
            if (null != r ? r.isString : void 0) return "(" + r + ")";
            if (r instanceof Date) return "(D:" + y(r.getUTCFullYear(), 4) + y(r.getUTCMonth(), 2) + y(r.getUTCDate(), 2) + y(r.getUTCHours(), 2) + y(r.getUTCMinutes(), 2) + y(r.getUTCSeconds(), 2) + "Z)";
            if ("[object Object]" !== {}.toString.call(r)) return "" + r;
            for (e in t = ["<<"], r) n = r[e], t.push("/" + e + " " + J.convert(n));
            return t.push(">>"), t.join("\n")
        }, J)
    }(le), xe = void 0 !== self && self || "undefined" != typeof window && window || "undefined" != typeof global && global || Function('return typeof this === "object" && this.content')() || Function("return this")(), Ce = function () {
        var c, n, r;

        function i(e) {
            var t, n, r, i, o, a, s, l, c, d, u, h, f, p;
            for (this.data = e, this.pos = 8, this.palette = [], this.imgData = [], this.transparency = {}, this.animation = null, this.text = {}, a = null; ;) {
                switch (t = this.readUInt32(), c = function () {
                    var e, t;
                    for (t = [], e = 0; e < 4; ++e) t.push(String.fromCharCode(this.data[this.pos++]));
                    return t
                }.call(this).join("")) {
                    case"IHDR":
                        this.width = this.readUInt32(), this.height = this.readUInt32(), this.bits = this.data[this.pos++], this.colorType = this.data[this.pos++], this.compressionMethod = this.data[this.pos++], this.filterMethod = this.data[this.pos++], this.interlaceMethod = this.data[this.pos++];
                        break;
                    case"acTL":
                        this.animation = {
                            numFrames: this.readUInt32(),
                            numPlays: this.readUInt32() || 1 / 0,
                            frames: []
                        };
                        break;
                    case"PLTE":
                        this.palette = this.read(t);
                        break;
                    case"fcTL":
                        a && this.animation.frames.push(a), this.pos += 4, a = {
                            width: this.readUInt32(),
                            height: this.readUInt32(),
                            xOffset: this.readUInt32(),
                            yOffset: this.readUInt32()
                        }, o = this.readUInt16(), i = this.readUInt16() || 100, a.delay = 1e3 * o / i, a.disposeOp = this.data[this.pos++], a.blendOp = this.data[this.pos++], a.data = [];
                        break;
                    case"IDAT":
                    case"fdAT":
                        for ("fdAT" === c && (this.pos += 4, t -= 4), e = (null != a ? a.data : void 0) || this.imgData, h = 0; 0 <= t ? h < t : t < h; 0 <= t ? ++h : --h) e.push(this.data[this.pos++]);
                        break;
                    case"tRNS":
                        switch (this.transparency = {}, this.colorType) {
                            case 3:
                                if (r = this.palette.length / 3, this.transparency.indexed = this.read(t), this.transparency.indexed.length > r) throw new Error("More transparent colors than palette size");
                                if (0 < (d = r - this.transparency.indexed.length)) for (f = 0; 0 <= d ? f < d : d < f; 0 <= d ? ++f : --f) this.transparency.indexed.push(255);
                                break;
                            case 0:
                                this.transparency.grayscale = this.read(t)[0];
                                break;
                            case 2:
                                this.transparency.rgb = this.read(t)
                        }
                        break;
                    case"tEXt":
                        s = (u = this.read(t)).indexOf(0), l = String.fromCharCode.apply(String, u.slice(0, s)), this.text[l] = String.fromCharCode.apply(String, u.slice(s + 1));
                        break;
                    case"IEND":
                        return a && this.animation.frames.push(a), this.colors = function () {
                            switch (this.colorType) {
                                case 0:
                                case 3:
                                case 4:
                                    return 1;
                                case 2:
                                case 6:
                                    return 3
                            }
                        }.call(this), this.hasAlphaChannel = 4 === (p = this.colorType) || 6 === p, n = this.colors + (this.hasAlphaChannel ? 1 : 0), this.pixelBitlength = this.bits * n, this.colorSpace = function () {
                            switch (this.colors) {
                                case 1:
                                    return "DeviceGray";
                                case 3:
                                    return "DeviceRGB"
                            }
                        }.call(this), void (this.imgData = new Uint8Array(this.imgData));
                    default:
                        this.pos += t
                }
                if (this.pos += 4, this.pos > this.data.length) throw new Error("Incomplete or corrupt PNG file")
            }
        }

        i.load = function (e, t, n) {
            var r;
            return "function" == typeof t && (n = t), (r = new XMLHttpRequest).open("GET", e, !0), r.responseType = "arraybuffer", r.onload = function () {
                var e;
                return e = new i(new Uint8Array(r.response || r.mozResponseArrayBuffer)), "function" == typeof (null != t ? t.getContext : void 0) && e.render(t), "function" == typeof n ? n(e) : void 0
            }, r.send(null)
        }, i.prototype.read = function (e) {
            var t, n;
            for (n = [], t = 0; 0 <= e ? t < e : e < t; 0 <= e ? ++t : --t) n.push(this.data[this.pos++]);
            return n
        }, i.prototype.readUInt32 = function () {
            return this.data[this.pos++] << 24 | this.data[this.pos++] << 16 | this.data[this.pos++] << 8 | this.data[this.pos++]
        }, i.prototype.readUInt16 = function () {
            return this.data[this.pos++] << 8 | this.data[this.pos++]
        }, i.prototype.decodePixels = function (B) {
            var O = this.pixelBitlength / 8, P = new Uint8Array(this.width * this.height * O), M = 0, _ = this;
            if (null == B && (B = this.imgData), 0 === B.length) return new Uint8Array(0);

            function e(e, t, n, r) {
                var i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w, k, x, C, S, A = Math.ceil((_.width - e) / n),
                    L = Math.ceil((_.height - t) / r), N = _.width == A && _.height == L;
                for (v = O * A, g = N ? P : new Uint8Array(v * L), c = B.length, o = m = 0; m < L && M < c;) {
                    switch (B[M++]) {
                        case 0:
                            for (s = w = 0; w < v; s = w += 1) g[o++] = B[M++];
                            break;
                        case 1:
                            for (s = k = 0; k < v; s = k += 1) i = B[M++], l = s < O ? 0 : g[o - O], g[o++] = (i + l) % 256;
                            break;
                        case 2:
                            for (s = x = 0; x < v; s = x += 1) i = B[M++], a = (s - s % O) / O, b = m && g[(m - 1) * v + a * O + s % O], g[o++] = (b + i) % 256;
                            break;
                        case 3:
                            for (s = C = 0; C < v; s = C += 1) i = B[M++], a = (s - s % O) / O, l = s < O ? 0 : g[o - O], b = m && g[(m - 1) * v + a * O + s % O], g[o++] = (i + Math.floor((l + b) / 2)) % 256;
                            break;
                        case 4:
                            for (s = S = 0; S < v; s = S += 1) i = B[M++], a = (s - s % O) / O, l = s < O ? 0 : g[o - O], 0 === m ? b = y = 0 : (b = g[(m - 1) * v + a * O + s % O], y = a && g[(m - 1) * v + (a - 1) * O + s % O]), d = l + b - y, u = Math.abs(d - l), f = Math.abs(d - b), p = Math.abs(d - y), h = u <= f && u <= p ? l : f <= p ? b : y, g[o++] = (i + h) % 256;
                            break;
                        default:
                            throw new Error("Invalid filter algorithm: " + B[M - 1])
                    }
                    if (!N) {
                        var I = ((t + m * r) * _.width + e) * O, E = m * v;
                        for (s = 0; s < A; s += 1) {
                            for (var T = 0; T < O; T += 1) P[I++] = g[E++];
                            I += (n - 1) * O
                        }
                    }
                    m++
                }
            }

            return B = (B = new Ee(B)).getBytes(), 1 == _.interlaceMethod ? (e(0, 0, 8, 8), e(4, 0, 8, 8), e(0, 4, 4, 8), e(2, 0, 4, 4), e(0, 2, 2, 4), e(1, 0, 2, 2), e(0, 1, 1, 2)) : e(0, 0, 1, 1), P
        }, i.prototype.decodePalette = function () {
            var e, t, n, r, i, o, a, s, l;
            for (n = this.palette, o = this.transparency.indexed || [], i = new Uint8Array((o.length || 0) + n.length), r = 0, n.length, t = a = e = 0, s = n.length; a < s; t = a += 3) i[r++] = n[t], i[r++] = n[t + 1], i[r++] = n[t + 2], i[r++] = null != (l = o[e++]) ? l : 255;
            return i
        }, i.prototype.copyToImageData = function (e, t) {
            var n, r, i, o, a, s, l, c, d, u, h;
            if (r = this.colors, d = null, n = this.hasAlphaChannel, this.palette.length && (d = null != (h = this._decodedPalette) ? h : this._decodedPalette = this.decodePalette(), r = 4, n = !0), c = (i = e.data || e).length, a = d || t, o = s = 0, 1 === r) for (; o < c;) l = d ? 4 * t[o / 4] : s, u = a[l++], i[o++] = u, i[o++] = u, i[o++] = u, i[o++] = n ? a[l++] : 255, s = l; else for (; o < c;) l = d ? 4 * t[o / 4] : s, i[o++] = a[l++], i[o++] = a[l++], i[o++] = a[l++], i[o++] = n ? a[l++] : 255, s = l
        }, i.prototype.decode = function () {
            var e;
            return e = new Uint8Array(this.width * this.height * 4), this.copyToImageData(e, this.decodePixels()), e
        };
        try {
            n = xe.document.createElement("canvas"), r = n.getContext("2d")
        } catch (e) {
            return -1
        }
        return c = function (e) {
            var t;
            return r.width = e.width, r.height = e.height, r.clearRect(0, 0, e.width, e.height), r.putImageData(e, 0, 0), (t = new Image).src = n.toDataURL(), t
        }, i.prototype.decodeFrames = function (e) {
            var t, n, r, i, o, a, s, l;
            if (this.animation) {
                for (l = [], n = o = 0, a = (s = this.animation.frames).length; o < a; n = ++o) t = s[n], r = e.createImageData(t.width, t.height), i = this.decodePixels(new Uint8Array(t.data)), this.copyToImageData(r, i), t.imageData = r, l.push(t.image = c(r));
                return l
            }
        }, i.prototype.renderFrame = function (e, t) {
            var n, r, i;
            return n = (r = this.animation.frames)[t], i = r[t - 1], 0 === t && e.clearRect(0, 0, this.width, this.height), 1 === (null != i ? i.disposeOp : void 0) ? e.clearRect(i.xOffset, i.yOffset, i.width, i.height) : 2 === (null != i ? i.disposeOp : void 0) && e.putImageData(i.imageData, i.xOffset, i.yOffset), 0 === n.blendOp && e.clearRect(n.xOffset, n.yOffset, n.width, n.height), e.drawImage(n.image, n.xOffset, n.yOffset)
        }, i.prototype.animate = function (n) {
            var r, i, o, a, s, e, l = this;
            return i = 0, e = this.animation, a = e.numFrames, o = e.frames, s = e.numPlays, (r = function () {
                var e, t;
                if (e = i++ % a, t = o[e], l.renderFrame(n, e), 1 < a && i / a < s) return l.animation._timeout = setTimeout(r, t.delay)
            })()
        }, i.prototype.stopAnimation = function () {
            var e;
            return clearTimeout(null != (e = this.animation) ? e._timeout : void 0)
        }, i.prototype.render = function (e) {
            var t, n;
            return e._png && e._png.stopAnimation(), e._png = this, e.width = this.width, e.height = this.height, t = e.getContext("2d"), this.animation ? (this.decodeFrames(t), this.animate(t)) : (n = t.createImageData(this.width, this.height), this.copyToImageData(n, this.decodePixels()), t.putImageData(n, 0, 0))
        }, i
    }(), xe.PNG = Ce;
    var Ie = (Te.prototype = {
        ensureBuffer: function (e) {
            var t = this.buffer, n = t ? t.byteLength : 0;
            if (e < n) return t;
            for (var r = 512; r < e;) r <<= 1;
            for (var i = new Uint8Array(r), o = 0; o < n; ++o) i[o] = t[o];
            return this.buffer = i
        }, getByte: function () {
            for (var e = this.pos; this.bufferLength <= e;) {
                if (this.eof) return null;
                this.readBlock()
            }
            return this.buffer[this.pos++]
        }, getBytes: function (e) {
            var t = this.pos;
            if (e) {
                this.ensureBuffer(t + e);
                for (var n = t + e; !this.eof && this.bufferLength < n;) this.readBlock();
                var r = this.bufferLength;
                r < n && (n = r)
            } else {
                for (; !this.eof;) this.readBlock();
                n = this.bufferLength
            }
            return this.pos = n, this.buffer.subarray(t, n)
        }, lookChar: function () {
            for (var e = this.pos; this.bufferLength <= e;) {
                if (this.eof) return null;
                this.readBlock()
            }
            return String.fromCharCode(this.buffer[this.pos])
        }, getChar: function () {
            for (var e = this.pos; this.bufferLength <= e;) {
                if (this.eof) return null;
                this.readBlock()
            }
            return String.fromCharCode(this.buffer[this.pos++])
        }, makeSubStream: function (e, t, n) {
            for (var r = e + t; this.bufferLength <= r && !this.eof;) this.readBlock();
            return new Stream(this.buffer, e, t, n)
        }, skip: function (e) {
            e = e || 1, this.pos += e
        }, reset: function () {
            this.pos = 0
        }
    }, Te), Ee = function () {
        if ("undefined" != typeof Uint32Array) {
            var E = new Uint32Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),
                T = new Uint32Array([3, 4, 5, 6, 7, 8, 9, 10, 65547, 65549, 65551, 65553, 131091, 131095, 131099, 131103, 196643, 196651, 196659, 196667, 262211, 262227, 262243, 262259, 327811, 327843, 327875, 327907, 258, 258, 258]),
                B = new Uint32Array([1, 2, 3, 4, 65541, 65543, 131081, 131085, 196625, 196633, 262177, 262193, 327745, 327777, 393345, 393409, 459009, 459137, 524801, 525057, 590849, 591361, 657409, 658433, 724993, 727041, 794625, 798721, 868353, 876545]),
                O = [new Uint32Array([459008, 524368, 524304, 524568, 459024, 524400, 524336, 590016, 459016, 524384, 524320, 589984, 524288, 524416, 524352, 590048, 459012, 524376, 524312, 589968, 459028, 524408, 524344, 590032, 459020, 524392, 524328, 59e4, 524296, 524424, 524360, 590064, 459010, 524372, 524308, 524572, 459026, 524404, 524340, 590024, 459018, 524388, 524324, 589992, 524292, 524420, 524356, 590056, 459014, 524380, 524316, 589976, 459030, 524412, 524348, 590040, 459022, 524396, 524332, 590008, 524300, 524428, 524364, 590072, 459009, 524370, 524306, 524570, 459025, 524402, 524338, 590020, 459017, 524386, 524322, 589988, 524290, 524418, 524354, 590052, 459013, 524378, 524314, 589972, 459029, 524410, 524346, 590036, 459021, 524394, 524330, 590004, 524298, 524426, 524362, 590068, 459011, 524374, 524310, 524574, 459027, 524406, 524342, 590028, 459019, 524390, 524326, 589996, 524294, 524422, 524358, 590060, 459015, 524382, 524318, 589980, 459031, 524414, 524350, 590044, 459023, 524398, 524334, 590012, 524302, 524430, 524366, 590076, 459008, 524369, 524305, 524569, 459024, 524401, 524337, 590018, 459016, 524385, 524321, 589986, 524289, 524417, 524353, 590050, 459012, 524377, 524313, 589970, 459028, 524409, 524345, 590034, 459020, 524393, 524329, 590002, 524297, 524425, 524361, 590066, 459010, 524373, 524309, 524573, 459026, 524405, 524341, 590026, 459018, 524389, 524325, 589994, 524293, 524421, 524357, 590058, 459014, 524381, 524317, 589978, 459030, 524413, 524349, 590042, 459022, 524397, 524333, 590010, 524301, 524429, 524365, 590074, 459009, 524371, 524307, 524571, 459025, 524403, 524339, 590022, 459017, 524387, 524323, 589990, 524291, 524419, 524355, 590054, 459013, 524379, 524315, 589974, 459029, 524411, 524347, 590038, 459021, 524395, 524331, 590006, 524299, 524427, 524363, 590070, 459011, 524375, 524311, 524575, 459027, 524407, 524343, 590030, 459019, 524391, 524327, 589998, 524295, 524423, 524359, 590062, 459015, 524383, 524319, 589982, 459031, 524415, 524351, 590046, 459023, 524399, 524335, 590014, 524303, 524431, 524367, 590078, 459008, 524368, 524304, 524568, 459024, 524400, 524336, 590017, 459016, 524384, 524320, 589985, 524288, 524416, 524352, 590049, 459012, 524376, 524312, 589969, 459028, 524408, 524344, 590033, 459020, 524392, 524328, 590001, 524296, 524424, 524360, 590065, 459010, 524372, 524308, 524572, 459026, 524404, 524340, 590025, 459018, 524388, 524324, 589993, 524292, 524420, 524356, 590057, 459014, 524380, 524316, 589977, 459030, 524412, 524348, 590041, 459022, 524396, 524332, 590009, 524300, 524428, 524364, 590073, 459009, 524370, 524306, 524570, 459025, 524402, 524338, 590021, 459017, 524386, 524322, 589989, 524290, 524418, 524354, 590053, 459013, 524378, 524314, 589973, 459029, 524410, 524346, 590037, 459021, 524394, 524330, 590005, 524298, 524426, 524362, 590069, 459011, 524374, 524310, 524574, 459027, 524406, 524342, 590029, 459019, 524390, 524326, 589997, 524294, 524422, 524358, 590061, 459015, 524382, 524318, 589981, 459031, 524414, 524350, 590045, 459023, 524398, 524334, 590013, 524302, 524430, 524366, 590077, 459008, 524369, 524305, 524569, 459024, 524401, 524337, 590019, 459016, 524385, 524321, 589987, 524289, 524417, 524353, 590051, 459012, 524377, 524313, 589971, 459028, 524409, 524345, 590035, 459020, 524393, 524329, 590003, 524297, 524425, 524361, 590067, 459010, 524373, 524309, 524573, 459026, 524405, 524341, 590027, 459018, 524389, 524325, 589995, 524293, 524421, 524357, 590059, 459014, 524381, 524317, 589979, 459030, 524413, 524349, 590043, 459022, 524397, 524333, 590011, 524301, 524429, 524365, 590075, 459009, 524371, 524307, 524571, 459025, 524403, 524339, 590023, 459017, 524387, 524323, 589991, 524291, 524419, 524355, 590055, 459013, 524379, 524315, 589975, 459029, 524411, 524347, 590039, 459021, 524395, 524331, 590007, 524299, 524427, 524363, 590071, 459011, 524375, 524311, 524575, 459027, 524407, 524343, 590031, 459019, 524391, 524327, 589999, 524295, 524423, 524359, 590063, 459015, 524383, 524319, 589983, 459031, 524415, 524351, 590047, 459023, 524399, 524335, 590015, 524303, 524431, 524367, 590079]), 9],
                P = [new Uint32Array([327680, 327696, 327688, 327704, 327684, 327700, 327692, 327708, 327682, 327698, 327690, 327706, 327686, 327702, 327694, 0, 327681, 327697, 327689, 327705, 327685, 327701, 327693, 327709, 327683, 327699, 327691, 327707, 327687, 327703, 327695, 0]), 5];
            return (e.prototype = Object.create(Ie.prototype)).getBits = function (e) {
                for (var t, n = this.codeSize, r = this.codeBuf, i = this.bytes, o = this.bytesPos; n < e;) void 0 === (t = i[o++]) && M("Bad encoding in flate stream"), r |= t << n, n += 8;
                return t = r & (1 << e) - 1, this.codeBuf = r >> e, this.codeSize = n -= e, this.bytesPos = o, t
            }, e.prototype.getCode = function (e) {
                for (var t = e[0], n = e[1], r = this.codeSize, i = this.codeBuf, o = this.bytes, a = this.bytesPos; r < n;) {
                    var s;
                    void 0 === (s = o[a++]) && M("Bad encoding in flate stream"), i |= s << r, r += 8
                }
                var l = t[i & (1 << n) - 1], c = l >> 16, d = 65535 & l;
                return (0 == r || r < c || 0 == c) && M("Bad encoding in flate stream"), this.codeBuf = i >> c, this.codeSize = r - c, this.bytesPos = a, d
            }, e.prototype.generateHuffmanTable = function (e) {
                for (var t = e.length, n = 0, r = 0; r < t; ++r) e[r] > n && (n = e[r]);
                for (var i = 1 << n, o = new Uint32Array(i), a = 1, s = 0, l = 2; a <= n; ++a, s <<= 1, l <<= 1) for (var c = 0; c < t; ++c) if (e[c] == a) {
                    var d = 0, u = s;
                    for (r = 0; r < a; ++r) d = d << 1 | 1 & u, u >>= 1;
                    for (r = d; r < i; r += l) o[r] = a << 16 | c;
                    ++s
                }
                return [o, n]
            }, e.prototype.readBlock = function () {
                function e(e, t, n, r, i) {
                    for (var o = e.getBits(n) + r; 0 < o--;) t[l++] = i
                }

                var t = this.getBits(3);
                if (1 & t && (this.eof = !0), 0 != (t >>= 1)) {
                    var n, r;
                    if (1 == t) n = O, r = P; else if (2 == t) {
                        for (var i = this.getBits(5) + 257, o = this.getBits(5) + 1, a = this.getBits(4) + 4, s = Array(E.length), l = 0; l < a;) s[E[l++]] = this.getBits(3);
                        for (var c = this.generateHuffmanTable(s), d = 0, u = (l = 0, i + o), h = new Array(u); l < u;) {
                            var f = this.getCode(c);
                            16 == f ? e(this, h, 2, 3, d) : 17 == f ? e(this, h, 3, 3, d = 0) : 18 == f ? e(this, h, 7, 11, d = 0) : h[l++] = d = f
                        }
                        n = this.generateHuffmanTable(h.slice(0, i)), r = this.generateHuffmanTable(h.slice(i, u))
                    } else M("Unknown block type in flate stream");
                    for (var p = (L = this.buffer) ? L.length : 0, g = this.bufferLength; ;) {
                        var m = this.getCode(n);
                        if (m < 256) p <= g + 1 && (p = (L = this.ensureBuffer(g + 1)).length), L[g++] = m; else {
                            if (256 == m) return void (this.bufferLength = g);
                            var v = (m = T[m -= 257]) >> 16;
                            0 < v && (v = this.getBits(v)), d = (65535 & m) + v, m = this.getCode(r), 0 < (v = (m = B[m]) >> 16) && (v = this.getBits(v));
                            var b = (65535 & m) + v;
                            p <= g + d && (p = (L = this.ensureBuffer(g + d)).length);
                            for (var y = 0; y < d; ++y, ++g) L[g] = L[g - b]
                        }
                    }
                } else {
                    var w, k = this.bytes, x = this.bytesPos;
                    void 0 === (w = k[x++]) && M("Bad block header in flate stream");
                    var C = w;
                    void 0 === (w = k[x++]) && M("Bad block header in flate stream"), C |= w << 8, void 0 === (w = k[x++]) && M("Bad block header in flate stream");
                    var S = w;
                    void 0 === (w = k[x++]) && M("Bad block header in flate stream"), (S |= w << 8) != (65535 & ~C) && M("Bad uncompressed block length in flate stream"), this.codeBuf = 0, this.codeSize = 0;
                    var A = this.bufferLength, L = this.ensureBuffer(A + C), N = A + C;
                    this.bufferLength = N;
                    for (var I = A; I < N; ++I) {
                        if (void 0 === (w = k[x++])) {
                            this.eof = !0;
                            break
                        }
                        L[I] = w
                    }
                    this.bytesPos = x
                }
            }, e
        }

        function M(e) {
            throw new Error(e)
        }

        function e(e) {
            var t = 0, n = e[t++], r = e[t++];
            -1 != n && -1 != r || M("Invalid header in flate stream"), 8 != (15 & n) && M("Unknown compression method in flate stream"), ((n << 8) + r) % 31 != 0 && M("Bad FCHECK in flate stream"), 32 & r && M("FDICT bit set in flate stream"), this.bytes = e, this.bytesPos = 2, this.codeSize = 0, this.codeBuf = 0, Ie.call(this)
        }
    }();

    function Te() {
        this.pos = 0, this.bufferLength = 0, this.eof = !1, this.buffer = null
    }

    window.tmp = Ee
});
try {
    module.exports = jsPDF
} catch (e) {
}
window.Modernizr = function (e, n, o) {
    function r(e) {
        p.cssText = e
    }

    function a(e, t) {
        return typeof e === t
    }

    function i(e, t) {
        return !!~("" + e).indexOf(t)
    }

    function s(e, t) {
        for (var n in e) {
            var r = e[n];
            if (!i(r, "-") && p[r] !== o) return "pfx" != t || r
        }
        return !1
    }

    function t(e, t, n) {
        var r = e.charAt(0).toUpperCase() + e.slice(1), i = (e + " " + v.join(r + " ") + r).split(" ");
        return a(t, "string") || a(t, "undefined") ? s(i, t) : function (e, t, n) {
            for (var r in e) {
                var i = t[e[r]];
                if (i !== o) return !1 === n ? e[r] : a(i, "function") ? i.bind(n || t) : i
            }
            return !1
        }(i = (e + " " + b.join(r + " ") + r).split(" "), t, n)
    }

    var l, c, d = {}, u = n.documentElement, h = "modernizr", f = n.createElement(h), p = f.style,
        g = " -webkit- -moz- -o- -ms- ".split(" "), m = "Webkit Moz O ms", v = m.split(" "),
        b = m.toLowerCase().split(" "), y = {}, w = [], k = w.slice, x = {}.hasOwnProperty;
    for (var C in c = a(x, "undefined") || a(x.call, "undefined") ? function (e, t) {
        return t in e && a(e.constructor.prototype[t], "undefined")
    } : function (e, t) {
        return x.call(e, t)
    }, Function.prototype.bind || (Function.prototype.bind = function (r) {
        var i = this;
        if ("function" != typeof i) throw new TypeError;
        var o = k.call(arguments, 1), a = function () {
            if (this instanceof a) {
                function e() {
                }

                e.prototype = i.prototype;
                var t = new e, n = i.apply(t, o.concat(k.call(arguments)));
                return Object(n) === n ? n : t
            }
            return i.apply(r, o.concat(k.call(arguments)))
        };
        return a
    }), y.canvas = function () {
        var e = n.createElement("canvas");
        return !!e.getContext && !!e.getContext("2d")
    }, y.rgba = function () {
        return r("background-color:rgba(150,255,150,.5)"), i(p.backgroundColor, "rgba")
    }, y.backgroundsize = function () {
        return t("backgroundSize")
    }, y.borderradius = function () {
        return t("borderRadius")
    }, y.opacity = function () {
        return function (e, t) {
            r(g.join(e + ";") + (t || ""))
        }("opacity:.55"), /^0.55$/.test(p.opacity)
    }, y.video = function () {
        var e = n.createElement("video"), t = !1;
        try {
            (t = !!e.canPlayType) && ((t = new Boolean(t)).ogg = e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), t.h264 = e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), t.webm = e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""))
        } catch (e) {
        }
        return t
    }, y.audio = function () {
        var e = n.createElement("audio"), t = !1;
        try {
            (t = !!e.canPlayType) && ((t = new Boolean(t)).ogg = e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), t.mp3 = e.canPlayType("audio/mpeg;").replace(/^no$/, ""), t.wav = e.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), t.m4a = (e.canPlayType("audio/x-m4a;") || e.canPlayType("audio/aac;")).replace(/^no$/, ""))
        } catch (e) {
        }
        return t
    }, y.localstorage = function () {
        try {
            return localStorage.setItem(h, h), localStorage.removeItem(h), !0
        } catch (e) {
            return !1
        }
    }, y) c(y, C) && (l = C.toLowerCase(), d[l] = y[C](), w.push((d[l] ? "" : "no-") + l));
    return d.addTest = function (e, t) {
        if ("object" == typeof e) for (var n in e) c(e, n) && d.addTest(n, e[n]); else {
            if (e = e.toLowerCase(), d[e] !== o) return d;
            t = "function" == typeof t ? t() : t, u.className += " " + (t ? "" : "no-") + e, d[e] = t
        }
        return d
    }, r(""), f = null, function (e, a) {
        function s() {
            var e = p.elements;
            return "string" == typeof e ? e.split(" ") : e
        }

        function l(e) {
            var t = f[e[u]];
            return t || (t = {}, h++, e[u] = h, f[h] = t), t
        }

        function r(e, t, n) {
            return t = t || a, c ? t.createElement(e) : !(r = (n = n || l(t)).cache[e] ? n.cache[e].cloneNode() : d.test(e) ? (n.cache[e] = n.createElem(e)).cloneNode() : n.createElem(e)).canHaveChildren || o.test(e) || r.tagUrn ? r : n.frag.appendChild(r);
            var r
        }

        function t(e) {
            var t = l(e = e || a);
            return !p.shivCSS || n || t.hasCSS || (t.hasCSS = !!function (e, t) {
                var n = e.createElement("p"), r = e.getElementsByTagName("head")[0] || e.documentElement;
                return n.innerHTML = "x<style>" + t + "</style>", r.insertBefore(n.lastChild, r.firstChild)
            }(e, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")), c || function (t, n) {
                n.cache || (n.cache = {}, n.createElem = t.createElement, n.createFrag = t.createDocumentFragment, n.frag = n.createFrag()), t.createElement = function (e) {
                    return p.shivMethods ? r(e, t, n) : n.createElem(e)
                }, t.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + s().join().replace(/[\w\-]+/g, function (e) {
                    return n.createElem(e), n.frag.createElement(e), 'c("' + e + '")'
                }) + ");return n}")(p, n.frag)
            }(e, t), e
        }

        var n, c, i = e.html5 || {}, o = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
            d = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
            u = "_html5shiv", h = 0, f = {};
        !function () {
            try {
                var e = a.createElement("a");
                e.innerHTML = "<xyz></xyz>", n = "hidden" in e, c = 1 == e.childNodes.length || function () {
                    a.createElement("a");
                    var e = a.createDocumentFragment();
                    return void 0 === e.cloneNode || void 0 === e.createDocumentFragment || void 0 === e.createElement
                }()
            } catch (e) {
                c = n = !0
            }
        }();
        var p = {
            elements: i.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
            version: "3.7.0",
            shivCSS: !1 !== i.shivCSS,
            supportsUnknownElements: c,
            shivMethods: !1 !== i.shivMethods,
            type: "default",
            shivDocument: t,
            createElement: r,
            createDocumentFragment: function (e, t) {
                if (e = e || a, c) return e.createDocumentFragment();
                for (var n = (t = t || l(e)).frag.cloneNode(), r = 0, i = s(), o = i.length; r < o; r++) n.createElement(i[r]);
                return n
            }
        };
        e.html5 = p, t(a)
    }(this, n), d._version = "2.8.3", d._prefixes = g, d._domPrefixes = b, d._cssomPrefixes = v, d.testProp = function (e) {
        return s([e])
    }, d.testAllProps = t, u.className = u.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + " js " + w.join(" "), d
}(0, this.document), function (e, h) {
    function u(e) {
        return "[object Function]" == i.call(e)
    }

    function f(e) {
        return "string" == typeof e
    }

    function p() {
    }

    function g(e) {
        return !e || "loaded" == e || "complete" == e || "uninitialized" == e
    }

    function m() {
        var e = w.shift();
        k = 1, e ? e.t ? b(function () {
            ("c" == e.t ? v.injectCss : v.injectJs)(e.s, 0, e.a, e.x, e.e, 1)
        }, 0) : (e(), m()) : k = 0
    }

    function t(e, t, n, r, i) {
        return k = 0, t = t || "j", f(e) ? function (n, r, e, t, i, o, a) {
            function s(e) {
                if (!c && g(l.readyState) && (u.r = c = 1, k || m(), l.onload = l.onreadystatechange = null, e)) for (var t in "img" != n && b(function () {
                    C.removeChild(l)
                }, 50), A[r]) A[r].hasOwnProperty(t) && A[r][t].onload()
            }

            a = a || v.errorTimeout;
            var l = h.createElement(n), c = 0, d = 0, u = {t: e, s: r, e: i, a: o, x: a};
            1 === A[r] && (d = 1, A[r] = []), "object" == n ? l.data = r : (l.src = r, l.type = n), l.width = l.height = "0", l.onerror = l.onload = l.onreadystatechange = function () {
                s.call(this, d)
            }, w.splice(t, 0, u), "img" != n && (d || 2 === A[r] ? (C.insertBefore(l, x ? null : y), b(s, a)) : A[r].push(l))
        }("c" == t ? l : a, e, t, this.i++, n, r, i) : (w.splice(this.i++, 0, e), 1 == w.length && m()), this
    }

    function s() {
        var e = v;
        return e.loader = {load: t, i: 0}, e
    }

    var n, v, r = h.documentElement, b = e.setTimeout, y = h.getElementsByTagName("script")[0], i = {}.toString, w = [],
        k = 0, o = "MozAppearance" in r.style, x = o && !!h.createRange().compareNode, C = x ? r : y.parentNode,
        a = (r = e.opera && "[object Opera]" == i.call(e.opera), r = !!h.attachEvent && !r, o ? "object" : r ? "script" : "img"),
        l = r ? "script" : a, c = Array.isArray || function (e) {
            return "[object Array]" == i.call(e)
        }, S = [], A = {}, L = {
            timeout: function (e, t) {
                return t.length && (e.timeout = t[0]), e
            }
        };
    (v = function (e) {
        function d(e, t, n, r, i) {
            var o = function (e) {
                e = e.split("!");
                var t, n, r, i = S.length, o = e.pop(), a = e.length;
                for (o = {
                    url: o,
                    origUrl: o,
                    prefixes: e
                }, n = 0; n < a; n++) r = e[n].split("="), (t = L[r.shift()]) && (o = t(o, r));
                for (n = 0; n < i; n++) o = S[n](o);
                return o
            }(e), a = o.autoCallback;
            o.url.split(".").pop().split("?").shift(), o.bypass || (t = t && (u(t) ? t : t[e] || t[r] || t[e.split("/").pop().split("?")[0]]), o.instead ? o.instead(e, t, n, r, i) : (A[o.url] ? o.noexec = !0 : A[o.url] = 1, n.load(o.url, o.forceCSS || !o.forceJS && "css" == o.url.split(".").pop().split("?").shift() ? "c" : void 0, o.noexec, o.attrs, o.timeout), (u(t) || u(a)) && n.load(function () {
                s(), t && t(o.origUrl, i, r), a && a(o.origUrl, i, r), A[o.url] = 2
            })))
        }

        function t(e, t) {
            function n(n, e) {
                if (n) {
                    if (f(n)) e || (s = function () {
                        var e = [].slice.call(arguments);
                        l.apply(this, e), c()
                    }), d(n, s, t, 0, o); else if (Object(n) === n) for (i in r = function () {
                        var e, t = 0;
                        for (e in n) n.hasOwnProperty(e) && t++;
                        return t
                    }(), n) n.hasOwnProperty(i) && (e || --r || (u(s) ? s = function () {
                        var e = [].slice.call(arguments);
                        l.apply(this, e), c()
                    } : s[i] = function (t) {
                        return function () {
                            var e = [].slice.call(arguments);
                            t && t.apply(this, e), c()
                        }
                    }(l[i])), d(n[i], s, t, i, o))
                } else e || c()
            }

            var r, i, o = !!e.test, a = e.load || e.both, s = e.callback || p, l = s, c = e.complete || p;
            n(o ? e.yep : e.nope, !!a), a && n(a)
        }

        var n, r, i = this.yepnope.loader;
        if (f(e)) d(e, 0, i, 0); else if (c(e)) for (n = 0; n < e.length; n++) f(r = e[n]) ? d(r, 0, i, 0) : c(r) ? v(r) : Object(r) === r && t(r, i); else Object(e) === e && t(e, i)
    }).addPrefix = function (e, t) {
        L[e] = t
    }, v.addFilter = function (e) {
        S.push(e)
    }, v.errorTimeout = 1e4, null == h.readyState && h.addEventListener && (h.readyState = "loading", h.addEventListener("DOMContentLoaded", n = function () {
        h.removeEventListener("DOMContentLoaded", n, 0), h.readyState = "complete"
    }, 0)), e.yepnope = s(), e.yepnope.executeStack = m, e.yepnope.injectJs = function (e, t, n, r, i, o) {
        var a, s, l = h.createElement("script");
        r = r || v.errorTimeout;
        for (s in l.src = e, n) l.setAttribute(s, n[s]);
        t = o ? m : t || p, l.onreadystatechange = l.onload = function () {
            !a && g(l.readyState) && (a = 1, t(), l.onload = l.onreadystatechange = null)
        }, b(function () {
            a || t(a = 1)
        }, r), i ? l.onload() : y.parentNode.insertBefore(l, y)
    }, e.yepnope.injectCss = function (e, t, n, r, i, o) {
        var a;
        r = h.createElement("link"), t = o ? m : t || p;
        for (a in r.href = e, r.rel = "stylesheet", r.type = "text/css", n) r.setAttribute(a, n[a]);
        i || (y.parentNode.insertBefore(r, y), b(t, 0))
    }
}(this, document), Modernizr.load = function () {
    yepnope.apply(window, [].slice.call(arguments, 0))
};
var self = this || {};
try {
    !function (e) {
        if ("+" !== new e("q=%2B").get("q") || "+" !== new e({q: "+"}).get("q") || "+" !== new e([["q", "+"]]).get("q") || "q=%0A" !== new e("q=\n").toString() || "q=+%26" !== new e({q: " &"}).toString() || "q=%25zx" !== new e({q: "%zx"}).toString()) throw e;
        self.URLSearchParams = e
    }(URLSearchParams)
} catch (e) {
    !function (e, o, l) {
        "use strict";
        var c = e.create, d = e.defineProperty, t = /[!'\(\)~]|%20|%00/g, n = /%(?![0-9a-fA-F]{2})/g, r = /\+/g,
            i = {"!": "%21", "'": "%27", "(": "%28", ")": "%29", "~": "%7E", "%20": "+", "%00": "\0"}, a = {
                append: function (e, t) {
                    f(this._ungap, e, t)
                }, delete: function (e) {
                    delete this._ungap[e]
                }, get: function (e) {
                    return this.has(e) ? this._ungap[e][0] : null
                }, getAll: function (e) {
                    return this.has(e) ? this._ungap[e].slice(0) : []
                }, has: function (e) {
                    return e in this._ungap
                }, set: function (e, t) {
                    this._ungap[e] = [o(t)]
                }, forEach: function (t, n) {
                    var r = this;
                    for (var i in r._ungap) r._ungap[i].forEach(e, i);

                    function e(e) {
                        t.call(n, e, o(i), r)
                    }
                }, toJSON: function () {
                    return {}
                }, toString: function () {
                    var e = [];
                    for (var t in this._ungap) for (var n = g(t), r = 0, i = this._ungap[t]; r < i.length; r++) e.push(n + "=" + g(i[r]));
                    return e.join("&")
                }
            };
        for (var s in a) d(u.prototype, s, {configurable: !0, writable: !0, value: a[s]});

        function u(e) {
            var t = c(null);
            switch (d(this, "_ungap", {value: t}), !0) {
                case!e:
                    break;
                case"string" == typeof e:
                    "?" === e.charAt(0) && (e = e.slice(1));
                    for (var n = e.split("&"), r = 0, i = n.length; r < i; r++) {
                        var o = (a = n[r]).indexOf("=");
                        -1 < o ? f(t, p(a.slice(0, o)), p(a.slice(o + 1))) : a.length && f(t, p(a), "")
                    }
                    break;
                case l(e):
                    for (r = 0, i = e.length; r < i; r++) {
                        var a;
                        f(t, (a = e[r])[0], a[1])
                    }
                    break;
                case"forEach" in e:
                    e.forEach(h, t);
                    break;
                default:
                    for (var s in e) f(t, s, e[s])
            }
        }

        function h(e, t) {
            f(this, t, e)
        }

        function f(e, t, n) {
            var r = l(n) ? n.join(",") : n;
            t in e ? e[t].push(r) : e[t] = [r]
        }

        function p(e) {
            return decodeURIComponent(e.replace(n, "%25").replace(r, " "))
        }

        function g(e) {
            return encodeURIComponent(e).replace(t, m)
        }

        function m(e) {
            return i[e]
        }

        self.URLSearchParams = u
    }(Object, String, Array.isArray)
}

function getElementsByAttribute(e, t, n, r) {
    for (var i, o, a = "*" == t && e.all ? e.all : e.getElementsByTagName(t), s = new Array, l = void 0 !== r ? new RegExp("(^|\\s)" + r + "(\\s|$)", "i") : null, c = 0; c < a.length; c++) "string" == typeof (o = (i = a[c]).getAttribute && i.getAttribute(n)) && 0 < o.length && (void 0 === r || l && l.test(o)) && s.push(i);
    return s
}

function toggleClass(e, t) {
    strHasClass(e.className, t) ? removeClass(e, t) : addClass(e, t)
}

function addRemoveClass(e, t, n) {
    var r = e.className, i = !0;
    if (t) for (var o = 0; o < t.length; o++) strHasClass(r, t[o]) || (i = !1, r += ("" == r ? "" : " ") + t[o]);
    if (n) for (o = 0; o < n.length; o++) strHasClass(r, n[o]) && (i = !1, r = strRemoveClass(r, n[o]));
    i || (e.className = r.trim())
}

function addClass(e, t) {
    var n = e.className.trim();
    if (t instanceof Array) {
        for (var r = !0, i = 0; i < t.length; i++) strHasClass(n, t[i]) || (r = !1, n += ("" == n ? "" : " ") + t[i]);
        if (r) return
    } else {
        if (strHasClass(n, t)) return;
        n += ("" == n ? "" : " ") + t
    }
    e.className = n
}

function removeClass(e, t) {
    var n = e.className;
    if (t instanceof Array) {
        for (var r = !0, i = 0; i < t.length; i++) strHasClass(n, t[i]) && (r = !1, n = strRemoveClass(n, t[i]));
        if (r) return
    } else {
        if (!strHasClass(n, t)) return;
        n = strRemoveClass(n, t)
    }
    "" == (n = n.trim()) ? e.removeAttribute("class") : e.className = n
}

function getClassThatStartsWith(e, t) {
    for (var n = e.className.trim().split(" "), r = 0; r < n.length; r++) if (-1 < n[r].indexOf(t)) return n[r]
}

function hasClass(e, t) {
    return strHasClass(e.className, t)
}

function strHasClass(e, t) {
    for (var n = (e = e || "").trim().split(" "), r = 0; r < n.length; r++) if (n[r] == t) return !0;
    return !1
}

function strRemoveClass(e, t) {
    for (var n = (e = e || "").trim().split(" "), r = 0; r < n.length; r++) n[r] == t && (n[r] = null);
    return n.join(" ")
}

function shouldParse(e) {
    if (!e.match(/^http[s]?:/g) && 0 != e.indexOf("/") && 0 != e.indexOf("#dontparse")) return !0
}

function removeElement(e) {
    e && e.parentNode && e.parentNode.removeChild(e)
}

!function (m) {
    var r = !1;
    try {
        r = !!Symbol.iterator
    } catch (e) {
    }

    function e(e, t) {
        var n = [];
        return e.forEach(t, n), r ? n[Symbol.iterator]() : {
            next: function () {
                var e = n.shift();
                return {done: void 0 === e, value: e}
            }
        }
    }

    "forEach" in m || (m.forEach = function (n, r) {
        var i = this, e = Object.create(null);
        this.toString().replace(/=[\s\S]*?(?:&|$)/g, "=").split("=").forEach(function (t) {
            !t.length || t in e || (e[t] = i.getAll(t)).forEach(function (e) {
                n.call(r, e, t, i)
            })
        })
    }), "keys" in m || (m.keys = function () {
        return e(this, function (e, t) {
            this.push(t)
        })
    }), "values" in m || (m.values = function () {
        return e(this, function (e, t) {
            this.push(e)
        })
    }), "entries" in m || (m.entries = function () {
        return e(this, function (e, t) {
            this.push([t, e])
        })
    }), !r || Symbol.iterator in m || (m[Symbol.iterator] = m.entries), "sort" in m || (m.sort = function () {
        for (var e, t, n, r = this.entries(), i = r.next(), o = i.done, a = [], s = Object.create(null); !o;) t = (n = i.value)[0], a.push(t), t in s || (s[t] = []), s[t].push(n[1]), o = (i = r.next()).done;
        for (a.sort(), e = 0; e < a.length; e++) this.delete(a[e]);
        for (e = 0; e < a.length; e++) t = a[e], this.append(t, s[t].shift())
    }), function (u) {
        function h(e) {
            var t = e.append;
            e.append = m.append, URLSearchParams.call(e, e._usp.search.slice(1)), e.append = t
        }

        function f(e, t) {
            if (!(e instanceof t)) throw new TypeError("'searchParams' accessed on an object that does not implement interface " + t.name)
        }

        function e(t) {
            var n, r, i, e = t.prototype, o = g(e, "searchParams"), a = g(e, "href"), s = g(e, "search");

            function l(e, t) {
                m.append.call(this, e, t), e = this.toString(), i.set.call(this._usp, e ? "?" + e : "")
            }

            function c(e) {
                m.delete.call(this, e), e = this.toString(), i.set.call(this._usp, e ? "?" + e : "")
            }

            function d(e, t) {
                m.set.call(this, e, t), e = this.toString(), i.set.call(this._usp, e ? "?" + e : "")
            }

            !o && s && s.set && (i = s, r = function (e, t) {
                return e.append = l, e.delete = c, e.set = d, p(e, "_usp", {configurable: !0, writable: !0, value: t})
            }, n = function (e, t) {
                return p(e, "_searchParams", {configurable: !0, writable: !0, value: r(t, e)}), t
            }, u.defineProperties(e, {
                href: {
                    get: function () {
                        return a.get.call(this)
                    }, set: function (e) {
                        var t = this._searchParams;
                        a.set.call(this, e), t && h(t)
                    }
                }, search: {
                    get: function () {
                        return s.get.call(this)
                    }, set: function (e) {
                        var t = this._searchParams;
                        s.set.call(this, e), t && h(t)
                    }
                }, searchParams: {
                    get: function () {
                        return f(this, t), this._searchParams || n(this, new URLSearchParams(this.search.slice(1)))
                    }, set: function (e) {
                        f(this, t), n(this, e)
                    }
                }
            }))
        }

        var p = u.defineProperty, g = u.getOwnPropertyDescriptor;
        try {
            e(HTMLAnchorElement), /^function|object$/.test(typeof URL) && URL.prototype && e(URL)
        } catch (e) {
        }
    }(Object)
}(self.URLSearchParams.prototype, Object), function (e) {
    "use strict";
    var t = e.prototype, o = t.parseFromString;
    try {
        if ((new e).parseFromString("", "text/html")) return
    } catch (e) {
    }
    t.parseFromString = function (e, t) {
        if (/^\s*text\/html\s*(?:;|$)/i.test(t)) {
            var n, r = document.implementation.createHTMLDocument(""), i = r.documentElement;
            return i.innerHTML = e, n = i.firstElementChild, 1 === i.childElementCount && "html" === n.localName.toLowerCase() && r.replaceChild(n, i), r
        }
        return o.apply(this, arguments)
    }
}(DOMParser), ph = {
    removeHash: function (e) {
        return -1 == e.indexOf("#") ? e : e.substring(0, e.lastIndexOf("#"))
    }, getHash: function (e) {
        if (0 <= e.indexOf("#")) return e.substr(e.lastIndexOf("#") + 1)
    }, normalize: function (e) {
        var t = ph.normalizedArray(e).join("/");
        return arguments.length && "/" == e.substr(0, 1) && (t = "file:///" + t), t
    }, normalizedArray: function (e) {
        for (var t = (e = e.replace(/\\/g, "/")).split("/"), n = t.length; n--;) t[n] ? ".." == t[n] && 0 < n && ".." != t[n - 1] && (t.splice(n, 1), t.splice(n - 1, 1)) : t.splice(n, 1);
        return t[0].match(/http[s]?:$/g) && (t[0] += "//" + t[1], t.splice(1, 1)), t[0].match(/kotobee:$/g) && (t[0] += "//" + t[1], t.splice(1, 1)), "file:" == t[0] && (t[0] += "///" + t[1], t.splice(1, 1)), t
    }, basename: function (e) {
        if (-1 == e.indexOf("/")) return e;
        var t = ph.normalizedArray(e);
        return t[t.length - 1]
    }, removeFilename: function (e) {
        var t = ph.normalizedArray(e);
        return -1 == t[t.length - 1].indexOf(".") ? e : (t.splice(t.length - 1, 1), t.join("/"))
    }, removeExtension: function (e) {
        if (-1 == e.indexOf(".")) return e;
        var t = e.split(".");
        return t.splice(t.length - 1, 1), t.join(".")
    }, getExtension: function (e) {
        if (-1 == e.indexOf(".")) return "";
        var t = e.split(".");
        return t[t.length - 1]
    }, dirname: function (e) {
        if (-1 == e.indexOf("/")) return e;
        var t = ph.normalizedArray(e);
        return 0 <= t[t.length - 1].indexOf(".") && t.splice(t.length - 1, 1), 1 == t.length ? t[0] : t[t.length - 1]
    }, relative: function (e, t) {
        var n, r, i = ph.normalizedArray(e), o = ph.normalizedArray(t), a = new Array;
        for (0 <= i[i.length - 1].indexOf(".") && i.splice(i.length - 1, 1), n = 0; n < i.length && i[n] == o[n]; n++) ;
        for (r = n; r < i.length; r++) a.push("..");
        for (r = n; r < o.length; r++) a.push(o[r]);
        return a.join("/")
    }, join: function () {
        for (var e = new Array, t = 0; t < arguments.length; t++) {
            var n = ph.normalizedArray(arguments[t]);
            t < arguments.length - 1 && !isAbsoluteURLPath(n[n.length - 1]) && 0 <= n[n.length - 1].indexOf(".") && n.splice(n.length - 1, 1), e = e.concat(n)
        }
        var r = ph.normalize(e.join("/"));
        return "/" == arguments[0].substr(0, 1) && (r = desktop ? "file:////" + r : "/" + r), r
    }, parent: function (e) {
        e = ph.removeFilename(e);
        var t = ph.normalizedArray(e);
        t.splice(t.length - 1, 1);
        var n = t.join("/");
        return arguments.length && "/" == e.substr(0, 1) && (n = "/" + n), n
    }
};
var LoggerWorker, startDate = Date.now();
try {
    (loggerWorker = new Worker(rootDir + "js/app/workers/logger.js")).addEventListener("error", function () {
        loggerWorker = null
    }, !1)
} catch (e) {
}
var kLog = function (e) {
    if (debug) {
        null == e && (e = "null"), debugDuration && (e = Date.now() - startDate + " " + e);
        try {
            if (loggerWorker) return void loggerWorker.postMessage({func: "log", params: arguments})
        } catch (e) {
        }
        try {
            console.log.apply(this, arguments)
        } catch (e) {
        }
    }
}, log = kLog;

function guid() {
    function e() {
        return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
    }

    return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e()
}

function randStr(e, t) {
    return null == t && (t = "s"), t + Math.random().toString(36).substring(5).substr(0, e)
}

function getDateTime() {
    var e = new Date, t = e.getFullYear(), n = e.getMonth() + 1, r = e.getDate(), i = e.getHours(), o = e.getMinutes(),
        a = e.getSeconds();
    if (1 == n.toString().length) n = "0" + n;
    if (1 == r.toString().length) r = "0" + r;
    if (1 == i.toString().length) i = "0" + i;
    if (1 == o.toString().length) o = "0" + o;
    if (1 == a.toString().length) a = "0" + a;
    return t + "/" + n + "/" + r + " " + i + ":" + o + ":" + a
}

function getFormData(e) {
    e = e || {};
    var t = new FormData;
    for (var n in e) e[n] && t.append(n, e[n]);
    return t
}

function newBlob(t, n) {
    try {
        return new Blob([t], {type: n})
    } catch (e) {
        if (window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, "TypeError" == e.name && window.BlobBuilder) {
            var r = new BlobBuilder;
            return r.append(t.buffer), r.getBlob(n)
        }
        if ("InvalidStateError" == e.name) return new Blob([t.buffer], {type: n})
    }
}

var currentIndex, currentVIndex, Base64Binary = {
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    decodeArrayBuffer: function (e) {
        var t = e.length / 4 * 3, n = new ArrayBuffer(t);
        return this.decode(e, n), n
    },
    decode: function (e, t) {
        var n, r, i, o, a, s, l, c = this._keyStr.indexOf(e.charAt(e.length - 1)),
            d = this._keyStr.indexOf(e.charAt(e.length - 2)), u = e.length / 4 * 3;
        64 == c && u--, 64 == d && u--;
        var h = 0, f = 0;
        for (n = t ? new Uint8Array(t) : new Uint8Array(u), e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""), h = 0; h < u; h += 3) r = this._keyStr.indexOf(e.charAt(f++)) << 2 | (a = this._keyStr.indexOf(e.charAt(f++))) >> 4, i = (15 & a) << 4 | (s = this._keyStr.indexOf(e.charAt(f++))) >> 2, o = (3 & s) << 6 | (l = this._keyStr.indexOf(e.charAt(f++))), n[h] = r, 64 != s && (n[h + 1] = i), 64 != l && (n[h + 2] = o);
        return n
    }
};

function clone(e) {
    if (null == e || "object" != typeof e) return e;
    var t = e.constructor();
    for (var n in e) e.hasOwnProperty(n) && (t[n] = clone(e[n]));
    return t
}

function rgb2hex(e) {
    if (/^#[0-9A-F]{6}$/i.test(e)) return e;

    function t(e) {
        return ("0" + parseInt(e).toString(16)).slice(-2)
    }

    return (e = e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)) ? "#" + t(e[1]) + t(e[2]) + t(e[3]) : void 0
}

function timeOut(e, t) {
    var n = setInterval(function () {
        clearInterval(n), e()
    }, t);
    return n
}

function wrapNode(e, t) {
    var n = document.createRange();
    n.selectNode(e), n.surroundContents(document.createElement(t))
}

function wrapNodeFromTo(e, t, n, r) {
    var i = document.createRange();
    i.setStart(e, n), i.setEnd(e, r), i.surroundContents(document.createElement(t))
}

function XMLEscape(e, t) {
    for (var n = "", r = 0; r < e.length; r++) {
        var i = e.charAt(r);
        n += "&" == i ? "&amp;" : "'" == i ? t ? "&apos;" : "&#39;" : i
    }
    return n
}

function replaceHTML(e, t) {
    var n = "string" == typeof e ? document.getElementById(e) : e, r = n.cloneNode(!1);
    return r.innerHTML = t, n.parentNode.replaceChild(r, n), r
}

function kTemplate(e) {
    return mobile ? (config.overflowScroll ? "templates/mobileOverflow/" : "templates/mobile/") + e : "templates/web/" + e
}

function arrayContainsProperty(e, t, n) {
    for (var r = 0; r < e.length; r++) if (e[r][t] == n) return !0;
    return !1
}

function cacheBust(e) {
    if (desktop && (0 == e.indexOf("/") || 0 == e.indexOf("file://") || 0 == e.indexOf("chrome-extension://"))) return e;
    var t = "?";
    return 0 <= e.indexOf("?") && (t = "&"), e + t + Math.floor(9999 * Math.random())
}

function addPrefixedEvent(e, t, n) {
    for (var r = ["webkit", "moz", "MS", "o", ""], i = 0; i < r.length; i++) r[i] || (t = t.toLowerCase()), e.addEventListener(r[i] + t, n, !1)
}

function removePrefixedEvent(e, t, n) {
    for (var r = ["webkit", "moz", "MS", "o", ""], i = 0; i < r.length; i++) r[i] || (t = t.toLowerCase()), e.removeEventListener(r[i] + t, n, !1)
}

function redrawForChrome(e) {
    -1 != navigator.userAgent.toLowerCase().indexOf("chrome") && (e.style.display = "inline-block", e.offsetHeight, e.style.display = "")
}

function pauseVideoAndAudio(e) {
    for (var t = (e = e || document).getElementsByTagName("audio"), n = t.length; n--;) try {
        t[n].pause()
    } catch (e) {
    }
    var r = e.getElementsByTagName("video");
    for (n = r.length; n--;) try {
        r[n].pause()
    } catch (e) {
    }
}

function isEmpty(e) {
    for (var t in e) if (e.hasOwnProperty(t)) return !1;
    return JSON.stringify(e) === JSON.stringify({})
}

function asyncCheck(e, t, n, r) {
    return e ? r() : (n.push(r), t.apply(this, n))
}

function autoprefixTransform(e, t) {
    t = t || "", e.style.transform = e.style.msTransform = e.style.webkitTransform = e.style.mozTransform = t
}

function deleteTransform(e) {
    e && (e.style.transform = e.style.msTransform = e.style.webkitTransform = e.style.mozTransform = null)
}

function deleteTransformOrigin(e) {
    e && (e.style.transformOrigin = e.style.msTransformOrigin = e.style.webkitTransformOrigin = e.style.mozTransformOrigin = null)
}

function getChildIndex(e) {
    for (var t = 0; null != (e = e.previousSibling);) t++;
    return t
}

function getFilteredChildIndex(e) {
    for (var t = 0; e = e.previousSibling;) "#text" != e.nodeName && 8 != e.nodeType && t++;
    return t
}

function autoprefixTransformOrigin(e, t) {
    t = t || "", e.style.transformOrigin = e.style.msTransformOrigin = e.style.webkitTransformOrigin = e.style.mozTransformOrigin = t
}

function detectIE() {
    var e = window.navigator.userAgent, t = e.indexOf("MSIE ");
    if (0 < t) return !0;
    if (0 < e.indexOf("Trident/")) return !0;
    e.indexOf("Edge/");
    return !1
}

function getImgDataSrc(e, t) {
    var n = new XMLHttpRequest;
    n.open("GET", e), n.responseType = "blob", n.onload = function () {
        var e = new FileReader;
        e.onloadend = function () {
            t && t(e.result)
        }, e.readAsDataURL(n.response)
    }, n.send()
}

function isAbsoluteURLPath(e) {
    return 0 == e.trim().indexOf("http://") || (0 == e.trim().indexOf("https://") || (0 == e.trim().indexOf("//") || (0 == e.trim().indexOf("data:") || (!!e.trim().match(/^[A-Z]:\//g) || void 0))))
}

function isAbsoluteURLAndNotDataPath(e) {
    return 0 == e.trim().indexOf("http://") || (0 == e.trim().indexOf("https://") || (0 == e.trim().indexOf("//") || void 0))
}

function isKotobeeHosted(e) {
    var t = (e = e || window.location.href).split("://");
    if (!(t.length <= 1)) {
        for (var n = t[1], r = ["kotobee.com"], i = 0; i < r.length; i++) {
            if (0 <= n.indexOf(r[i] + "/ebook")) return !0;
            if (0 <= n.indexOf(r[i] + "/library")) return !0;
            if (0 <= n.indexOf(r[i] + "/lti")) return !0
        }
        var o = "kotobee.com";
        hostingDomain && 0 == (o = hostingDomain.replace(/https?:\/\//g, "")).indexOf("www.") && (o = o.substr(4));
        var a = "folder" == hostUrlMode ? "" : ".";
        if (0 <= e.indexOf(a + o)) {
            if ("folder" == hostUrlMode) return !0;
            var s = o.replace(".", "\\."), l = new RegExp("https?:\\/\\/(.*?\\.)" + s + ".*", "g"),
                c = e.replace(l, "$1");
            if (c) {
                var d = c.replace(/(.*?)\./g, "$1");
                if (0 <= o.indexOf("kotobee.com")) {
                    if ("www" == d) return !1;
                    if ("dev" == d) return !1;
                    if ("test" == d) return !1;
                    if ("qa" == d) return !1
                } else if ("www" == d) return !1;
                return !0
            }
        }
    }
}

function decodeHTMLEntities(e) {
    for (var t = [["amp", "&"], ["apos", "'"], ["#x27", "'"], ["#x2F", "/"], ["#39", "'"], ["#47", "/"], ["lt", "<"], ["gt", ">"], ["nbsp", " "], ["quot", '"']], n = 0, r = t.length; n < r; ++n) e = e.replace(new RegExp("&" + t[n][0] + ";", "g"), t[n][1]);
    return e
}

function addFormHiddenInput(e, t, n) {
    var r = document.createElement("input");
    r.setAttribute("name", e), r.setAttribute("type", "hidden"), r.setAttribute("value", t), n.appendChild(r)
}

function getElemMargin(e, t) {
    return getElemDim(e, "margin", t)
}

function getElemPadding(e, t) {
    return getElemDim(e, "padding", t)
}

function getElemDim(e, t, n) {
    var r = {}, i = (n = n || {}).computed ? getComputedStyle(e) : e.style;
    return r.left = i[t + "Left"].split("px")[0], r.right = i[t + "Right"].split("px")[0], "auto" == r.left ? r.x = "auto" : "auto" == r.left ? r.x = "auto" : r.x = Math.round(r.left) + Math.round(r.right), r.top = i[t + "Top"].split("px")[0], r.bottom = i[t + "Bottom"].split("px")[0], "auto" == r.top ? r.y = "auto" : "auto" == r.bottom ? r.y = "auto" : r.y = Math.round(r.top) + Math.round(r.bottom), r
}

function makeArrayUnique(e) {
    for (var t = 0; t < e.length; t++) for (var n = e[t], r = e.length; r--;) t != r && e[r].length + "  " + n.length && e[r] == n && e.splice(r, 1)
}

function cloneNodeAttributes(e) {
    var t = document.createElement(e.nodeName);
    return copyAttributes(e, t), t
}

function copyAttributes(e, t) {
    for (var n = 0; n < e.attributes.length; n++) t.setAttribute(e.attributes[n].name, e.attributes[n].value)
}

function getBoundingBox(e) {
    if (3 != e.nodeType) return e.getBoundingClientRect();
    var t = document.createRange();
    t.selectNode(e);
    var n = t.getBoundingClientRect();
    return t.detach(), n
}

function parents(e, t) {
    t = t || {};
    for (var n = []; e && e && (!t.stopAtId || e.id != t.stopAtId); e = e.parentNode) {
        if (t.stopAtIds) {
            for (var r, i = 0; i < t.stopAtIds.length; i++) if (e.id == t.stopAtIds[i]) {
                r = !0;
                break
            }
            if (r) break
        }
        t.filterByClass && !e.classList.contains(t.filterByClass) || n.unshift(e)
    }
    return n
}

function getCurrentTime() {
    return Math.floor(Date.now() / 1e3)
}

function getQueryStringValue(e) {
    var t = window.location.href.split("?");
    if (!(t.length <= 1)) for (var n = t[1].split("&"), r = 0; r < n.length; r++) {
        var i = n[r].split("=");
        if (i[0] == e) return i[1]
    }
}

function copyObjToObj(e, t, n) {
    for (var r in n = n || {}, e) n.onlyIfNotExists && null != t[r] || (t[r] = e[r])
}

function traverseToBottom(e, t) {
    for (; e && e.children.length;) {
        if (t && e.id == t) return e;
        e = e.children[0]
    }
    return e
}

function traverseToTop(e, t) {
    for (; e && e.parentNode;) {
        if (t && e.id == t) return e;
        e = e.parentNode
    }
    return !e || e.parentNode ? null : e.id != t ? null : e
}

function getDomainFromURL(e) {
    var t = new URL(e);
    return t.protocol + "//" + t.hostname
}

function hasParent(e, t, n, r) {
    n = n || 3;
    for (var i = 0; i < n; i++) {
        if ("body" == (e = e.parentNode).nodeName.toLowerCase()) return;
        if (hasClass(e, t)) return !0
    }
}

function hasParentWithId(e, t, n, r) {
    n = n || 3;
    for (var i = 0; i < n; i++) {
        if ("body" == (e = e.parentNode).nodeName.toLowerCase()) return;
        if (e.id == t) return !0
    }
}

function hasParentNode(e, t, n) {
    n = n || 3;
    for (var r = 0; r < n; r++) {
        var i = (e = e.parentNode).nodeName.toLowerCase();
        if ("body" == i) return;
        if (i == t) return !0
    }
}

function XORCipher() {
    var u = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    return {
        encode: function (e, t) {
            return function (e) {
                var t, n, r, i, o, a, s, l, c = 0, d = "";
                if (!e) return e;
                for (; t = e[c++], n = e[c++], r = e[c++], i = (s = t << 16 | n << 8 | r) >> 12 & 63, o = s >> 6 & 63, a = 63 & s, d += u.charAt(s >> 18 & 63) + u.charAt(i) + u.charAt(o) + u.charAt(a), c < e.length;) ;
                return ((l = e.length % 3) ? d.slice(0, l - 3) : d) + "===".slice(l || 3)
            }(t = function (n, e) {
                return i(e, function (e, t) {
                    return e.charCodeAt(0) ^ r(n, t)
                })
            }(e, t))
        }, decode: function (e, t) {
            return function (n, e) {
                return i(e, function (e, t) {
                    return String.fromCharCode(e ^ r(n, t))
                }).join("")
            }(e, t = function (e) {
                var t, n, r, i, o, a, s, l, c = 0, d = [];
                if (!e) return e;
                e += "";
                for (; i = u.indexOf(e.charAt(c++)), o = u.indexOf(e.charAt(c++)), a = u.indexOf(e.charAt(c++)), s = u.indexOf(e.charAt(c++)), t = (l = i << 18 | o << 12 | a << 6 | s) >> 16 & 255, n = l >> 8 & 255, r = 255 & l, d.push(t), 64 !== a && (d.push(n), 64 !== s && d.push(r)), c < e.length;) ;
                return d
            }(t))
        }
    };

    function r(e, t) {
        return e.charCodeAt(Math.floor(t % e.length))
    }

    function i(e, t) {
        for (var n = [], r = 0; r < e.length; r++) n[r] = t(e[r], r);
        return n
    }
}

function isFunction(e) {
    return e && "[object Function]" === {}.toString.call(e)
}

function digits(e, t) {
    return 1 == t ? e : e < Math.pow(10, t - 1) ? "0" + digits(e, t - 1) : e
}

function cleanURL(e) {
    if (native && mobile) try {
        e = window.Ionic.WebView.convertFileSrc(e)
    } catch (e) {
    }
    return e
}

function parseHtml(e) {
    var t = parser.parseFromString(e, "text/html");
    return t && t.documentElement || (t = parser.parseFromString(e, "text/xml")), t
}

function parseXml(e) {
    var t = parser.parseFromString(e, "text/xml");
    return t && t.documentElement || (t = parser.parseFromString(e, "text/html")), t
}

function getTopOffsetRelativeTo(e, t) {
    for (var n = 0; e && e != t;) n += e.offsetTop, e = e.offsetParent;
    return n
}

function existsInArray(e, t) {
    for (var n = t.length; n--;) if (t[n] == e) return !0
}

function removeFromArray(e, t) {
    for (var n = t.length; n--;) t.splice(n, 1)
}

function serializeObject(e, t, n) {
    var r = Object.prototype.toString.call(e);
    if (void 0 === n) if ("[object Object]" === r) n = {}; else {
        if ("[object Array]" !== r) return;
        n = []
    }
    for (var i in e) if (Object.prototype.hasOwnProperty.call(e, i)) {
        var o = e[i];
        if (null != o) switch (Object.prototype.toString.call(o)) {
            case"[object Array]":
            case"[object Object]":
                serializeObject(o, a(t, i), n);
                break;
            default:
                n[a(t, i)] = "boolean" == typeof o ? Number(o) : encodeURIComponent(o)
        }
    }

    function a(e, t) {
        return null != e ? e + "[" + t + "]" : t
    }

    return n
}

function getBaseSuffix() {
    var e = "";
    if (-1 != window.location.href.indexOf("/ebook/")) {
        e += "/ebook";
        var t = window.location.href.split("/ebook/");
        1 < t.length && (e += "/" + t[1].replace(/(\w+)#?(.*)/g, "$1"))
    }
    return e
}

function sendRequest(e) {
    var i = e.method || "GET";
    i = i.toUpperCase();
    var o = e.url, a = e.type || "", s = e.headers, l = e.data;
    if (!e.redirect) return new Promise(function (e, t) {
        if (o || t("missing url"), void 0 !== l && 0 < Object.keys(l).length && l.constructor == Object) var n = Object.entries(l).map(function (e) {
            var t = e[1];
            return Array.isArray(t) ? (t = serializeObject(t, e[0]), Object.entries(t).map(function (e) {
                return e[0] + "=" + encodeURIComponent(e[1])
            }).join("&")) : e[0] + "=" + encodeURIComponent(t)
        }).join("&");
        o += n ? "?" + n : "";
        var r = new XMLHttpRequest;
        r.open(i, o, !0), r.responseType = a || "", s && Object.keys(s).forEach(function (e) {
            r.setRequestHeader(e, s[e])
        }), "GET" != i && (s && -1 == Object.keys(s).indexOf("Content-Type") || !s) && r.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8"), r.onerror = function () {
            t("network error!")
        }, r.onreadystatechange = function () {
            4 != r.readyState && 0 != r.readyState || (200 == r.status ? e(r.response) : r.onerror())
        }, n ? r.send(n) : r.send()
    });
    if (o) {
        var n = document.createElement("form");
        n.setAttribute("method", i), n.setAttribute("action", o), l && Object.keys(l).forEach(function (e) {
            var t = document.createElement("input");
            t.setAttribute("type", "hidden"), t.setAttribute("name", e), t.setAttribute("value", l[e]), n.appendChild(t)
        }), document.body.appendChild(n), n.submit()
    } else ;
}

function base64URL(e) {
    return e.toString(CryptoJS.enc.Base64).replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_")
}

String.prototype.includes = function (e) {
    return -1 !== this.indexOf(e)
}, String.prototype.toCamelCase = function () {
    return this.toLowerCase().replace(/(?:(^.)|(\s+.))/g, function (e) {
        return e.charAt(e.length - 1).toUpperCase()
    })
};
var preview, previewParams, app, parser = new DOMParser,
    mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
    mobileDebug = !1, ios = /iPhone|iPad|iPod/i.test(navigator.userAgent);
isIpad() && (mobile = 1, ios = !0);
var native, bookPath, noFlash, isReaderApp, desktop, chromeApp, os, uuid, loggerWorker, readerV = 1.5, debug = !1,
    isRelease = !0, kotobee = {}, partitionEnabled = "Android" == mobile && config.kotobee.segregate, isKotobee = !0,
    debugDuration = !1, overflowScroll = !mobile | config.overflowScroll;
if ("undefined" == typeof rootDir && (rootDir = ""), "undefined" == typeof hostingDomain && (hostingDomain = ""), "undefined" == typeof hostUrlMode && (hostUrlMode = ""), "null" == hostingDomain && (hostingDomain = ""), "null" == hostUrlMode && (hostUrlMode = ""), null == config.mediaTab && (config.mediaTab = !0), null == config.settingsTab && (config.settingsTab = !0), null == config.notebookTab && (config.notebookTab = !0), null == config.textSizeControls && (config.textSizeControls = !0), null == config.chaptersTab && (config.chaptersTab = !0), null == config.showCategories && (config.showCategories = !0), null == config.styleControls && (config.styleControls = !1), null == config.imagesInMediaTab && (config.imagesInMediaTab = !0), debug) {
    var sdkProfilesEnabled = localStorage.sdkProfilesEnabled, sdkProfile = localStorage.sdkProfile;
    sdkProfilesEnabled && JSON.parse(sdkProfilesEnabled) && sdkProfile && JSON.parse(sdkProfile) && (config.kotobee = JSON.parse(sdkProfile), delete config.kotobee.name, delete config.kotobee.locked, sdkProfile = null)
}

function isIpad() {
    var e = window.navigator.userAgent;
    if (-1 < e.indexOf("iPad")) return !0;
    if (-1 < e.indexOf("Macintosh")) try {
        return document.createEvent("TouchEvent"), !0
    } catch (e) {
    }
    return !1
}

function stopAllAudio() {
    for (var e = document.getElementsByTagName("audio"), t = 0; t < e.length; t++) e[t].pause(), e[t].src = "";
    try {
        document.bgAudio && (document.bgAudio.pause(), document.bgAudio.src = "")
    } catch (e) {
    }
}

function applyPreview(e) {
    var t = angular.element(document.body).scope();
    t.config = config = e, t.$apply(), angular.element(document.body).scope().injectUserCSS(e)
}

function previewPage(e, t) {
    var n = angular.element(document.body).scope();
    n.previewPage && n.previewPage(e, t)
}

function getCookie(e) {
    var t = ("; " + document.cookie).split("; " + e + "=");
    if (2 == t.length) return t.pop().split(";").shift()
}

function getVar(e) {
    return Modernizr.localstorage ? localStorage[e] : getCookie("continueWithoutHTML5")
}

function setVar(e, t) {
    Modernizr.localstorage ? localStorage[e] = t : document.cookie = e + "=" + t
}

function getGlobal() {
    return angular.element(document.body).scope()
}

function closePrintIframe() {
    var e = document.getElementById("printContainer");
    e && e.parentNode.removeChild(e)
}

function putTest(e) {
}

function continueLocally() {
    setVar("continueLocally", "true"), location.reload()
}

function continueWithoutHTML5() {
    setVar("continueWithoutHTML5", "true"), location.reload()
}

window.location.origin && config.kotobee.liburl && 0 == window.location.origin.indexOf("https://") && -1 != window.location.origin.indexOf(".kotobee.com") && (config.kotobee.liburl = window.location.origin + "/"), function () {
    function e() {
        for (var e, t = document.getElementsByTagName("head")[0], n = t.innerHTML, r = [], i = document.getElementsByTagName("script"), o = 0; o < i.length; o++) if (i[o].getAttribute("src") && 0 <= i[o].getAttribute("src").indexOf("lib/ionic/release/js")) {
            var a = i[o].getAttribute("src").split("lib/ionic/release/js");
            rootDir = a[0];
            break
        }
        try {
            (loggerWorker = new Worker(rootDir + "js/workers/logger.js")).addEventListener("error", function () {
                loggerWorker = null
            }, !1)
        } catch (e) {
        }
        e = [rootDir + "lib/ionic/release/css/ionic.min.css"];
        for (o = 0; o < r.length; o++) n += '<script src="' + r[o] + '" type="text/javascript"><\/script>';
        for (o = 0; o < e.length; o++) n = '<link rel="stylesheet" href="' + e[o] + '">' + n;
        t.innerHTML = n
    }

    if (detectIE() || ios) {
        !function e() {
            var t = document.getElementsByTagName("body");
            if (!t.length) return timeOut(e, 100);
            ios ? (addClass(t[0], "ios"), addClass(t[0], "fullscreen")) : addClass(t[0], "ie")
        }()
    }
    var t = document.getElementsByTagName("head");
    if (0 < window.location.href.indexOf("?preview")) {
        mobileDebug = preview = !0;
        var n = window.location.href.split("?");
        n = n[1].split("&"), previewParams = {};
        for (var r = 0; r < n.length; r++) {
            var i = n[r].split("=");
            previewParams[i[0]] = i[1]
        }
        mobile = previewParams.mobile
    } else {
        if (config.gAnalyticsID) {
            var o = "";
            isKotobeeHosted() && (o = "/bundles/vijualib/templates/reader/public/");
            var a = "";
            (native || desktop) && (a = "ga('set','checkProtocolTask',null);ga('set','anonymizeIp',true);ga('set','forceSSL',true)");
            var s = "'auto'";
            native ? s = "{'storage':'none','clientId':device.uuid}" : desktop && (s = "{'storage':'none'}");
            var l = document.createElement("script");
            l.innerHTML = "(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','" + o + "lib/gAnalytics/analytics.js','ga');ga('create', '" + config.gAnalyticsID + "', " + s + ");" + a, t.length && t[0].appendChild(l)
        }
        if ("file:" == window.location.protocol || "kotobee:" == window.location.protocol || "undefined" != typeof require) {
            if (mobile) native = !0; else if ("undefined" != typeof require) {
                desktop = !0, os = "mac", process.env.OS && 0 <= process.env.OS.toLowerCase().indexOf("windows") && (os = 0 <= process.env.PROCESSOR_ARCHITECTURE.indexOf("64") ? "win64" : "win32"), 0 <= String(require("nw.gui").App.argv).indexOf("--mobile") && (mobile = 1)
            } else if (window.chrome && chrome.app && chrome.app.runtime && chrome.storage) {
                try {
                    if (!chromeEnabled) return
                } catch (e) {
                    return
                }
                chromeApp = !0
            } else if ("true" != getVar("continueLocally")) return timeOut(function () {
                document.getElementById("localFallback").style.display = "block", document.getElementById("kotobeeLink").style.display = "none", document.getElementsByTagName("body")[0].style.cssText = "overflow-y: scroll;"
            }, 100), e()
        } else "chrome-extension:" == window.location.protocol && (chromeApp = !0)
    }
    if (!chromeApp) {
        if ("true" != getVar("continueWithoutHTML5") && !(Modernizr.audio && Modernizr.video && Modernizr.backgroundsize && Modernizr.borderradius && Modernizr.canvas && Modernizr.opacity && Modernizr.localstorage && Modernizr.rgba)) return timeOut(function () {
            document.getElementById("html5Fallback").style.display = "block", document.getElementById("kotobeeLink").style.display = "none", document.getElementsByTagName("body")[0].style.cssText = "overflow-y: scroll;"
        }, 100), e();
        setVar("continueLocally", "false"), setVar("continueWithoutHTML5", "false")
    }
    e(), angular.module("ngIOS9UIWebViewPatch", ["ng"]).config(["$provide", function (e) {
        "use strict";
        e.decorator("$browser", ["$delegate", "$window", function (e, t) {
            if (a = t.navigator.userAgent, /(iPhone|iPad|iPod).* OS 9_\d/.test(a) && !/Version\/9\./.test(a)) return i = null, o = (r = e).url, r.url = function () {
                return arguments.length ? (i = arguments[0], o.apply(r, arguments)) : i || o.apply(r, arguments)
            }, window.addEventListener("popstate", n, !1), window.addEventListener("hashchange", n, !1), r;

            function n() {
                i = null
            }

            var r, i, o, a;
            return e
        }])
    }]);
    var c = ["ionic", "angular.css.injector", "ngIOS9UIWebViewPatch", "templates"];
    "undefined" != typeof scormEnabled && scormEnabled && c.push("scormwrapper");
    try {
        angular.module("templates")
    } catch (e) {
        angular.module("templates", []).run(["$templateCache", function (e) {
        }])
    }
    app = angular.module("reader.Kotobee", c), ionic.Platform.isFullScreen = !1, app.config(["$stateProvider", "$urlRouterProvider", "$ionicConfigProvider", "$compileProvider", function (e, t, n, r) {
        (chromeApp || desktop || native) && (r.imgSrcSanitizationWhitelist(/^\s*((https?|ftp|file|kotobee|blob|chrome-extension):|data:image\/)/), r.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|kotobee|chrome-extension):/)), n.views.swipeBackEnabled(!1), e.state("loading", {
            url: "/loading",
            templateUrl: kTemplate("views/blank.html")
        }).state("oauth", {
            url: "/oauth/:provider/:idToken/:accessToken",
            templateUrl: kTemplate("views/oauth.html")
        }).state("login", {
            url: "/login",
            templateUrl: kTemplate("views/login.html")
        }).state("register", {
            url: "/register",
            templateUrl: kTemplate("views/register.html")
        }).state("forgotPwd", {
            url: "/forgotpwd",
            templateUrl: kTemplate("views/forgotPwd.html")
        }).state("redeemCode", {
            url: "/redeemcode",
            templateUrl: kTemplate("views/redeemCode.html")
        }).state("library", {
            url: "/library",
            templateUrl: kTemplate("views/library.html")
        }).state("library_tab", {
            url: "/library/tab/:tab",
            templateUrl: kTemplate("views/library.html")
        }).state("reader", {
            url: "/reader",
            templateUrl: kTemplate("views/reader.html")
        }).state("reader.chapter", {
            url: "/chapter/:ch",
            templateUrl: kTemplate("views/reader.html")
        }).state("reader.chapterhash", {
            url: "/chapter/:ch/:hash",
            templateUrl: kTemplate("views/reader.html")
        }).state("libraryreader", {
            url: "/book/:book/reader",
            templateUrl: kTemplate("views/reader.html")
        }).state("libraryreader.chapter", {
            url: "/chapter/:ch",
            templateUrl: kTemplate("views/reader.html")
        }).state("libraryreader.chapterhash", {
            url: "/chapter/:ch/:hash",
            templateUrl: kTemplate("views/reader.html")
        }).state("app", {url: "/app", templateUrl: kTemplate("views/app.html")})
    }]), putTest("prerun timeout start"), window.setTimeout(function () {
        putTest("prerun timeout found!!")
    }, 300), app.run(["$ionicPlatform", "$location", "chapters", "library", "$injector", "initializer", "sso", function (e, t, n, r, i, o, a) {
        var s, l = t.path();
        0 == l.indexOf("/book/") && 0 < (s = l.split("/book/")[1].split("/")).length && (r.startBook = Number(s[0]));
        0 <= l.indexOf("/reader/chapter/") && (0 < (s = l.split("/reader/chapter/")[1].split("/")).length && (n.startChapter = Number(s[0])), 1 < s.length && (n.startHash = s[1]));
        setTimeout(function () {
            "undefined" != typeof kTemplates && kTemplates(i)
        }, 1e3);
        var c = o.handleRedirect(l);
        -1 != l.indexOf("/oauth/") || c || o.initialize()
    }])
}(), app.controller("BookInfoCtrl", ["$scope", "np", "$timeout", "bookinfo", "$element", "$rootScope", "translit", "crdv", "sync", "status", "stg", "book", "modals", "chapters", "$location", "backend", function (t, n, e, r, i, o, a, s, l, c, d, u, h, f, p, g) {
    t.init = function () {
    }, t.open = function (e) {
        e, u.open(e)
    }, t.download = function (e) {
        r.download(e)
    }, t.actionBtnClicked = function (e) {
        e.redirect ? desktop ? n.openLink(e.redirect) : native && s.openInNativeBrowser(e.redirect) : r.action(e)
    }, t.delete = function (e) {
        r.delete(e)
    }, t.update = function (e) {
        r.update(e)
    }, t.addToFav = function (e) {
        r.addToFav(e)
    }, t.toggleFav = function (e) {
        r.toggleFav(e)
    }, t.removeFav = function (e) {
        r.removeFav(e)
    }, t.categoryClicked = function (e) {
        h.hide(), t.modal.bookInfoOptions.categoryClicked(e)
    }, t.redeemCodeClicked = function () {
        r.redeemCode()
    }
}]), app.controller("BookSettingsCtrl", ["$scope", "stg", "crdv", "spread", "$element", "nav", "backend", "$location", "$ionicSideMenuDelegate", "cssParser", "modals", "sync", "markers", "settings", "$timeout", function (e, t, n, r, i, o, a, s, l, c, d, u, h, f, p) {
    e.init = function () {
        e.navAnims = [{label: "flip", val: "navBookBlock"}, {label: "card", val: "navFlip"}, {
            label: "slide",
            val: "navSlide"
        }, {label: "stack", val: "navStack"}, {label: "fade", val: "navFade"}], e.navModes = [{
            label: "vertical",
            val: "vertical"
        }, {label: "horizontal", val: "horizontal"}], e.viewModes = [{label: "auto", val: "auto"}, {
            label: "singlePage",
            val: "single"
        }, {label: "doublePage", val: "double"}]
    }, e.stylingChanged = function () {
        p(f.stylingChanged, 300)
    }, e.navAnimChanged = function () {
        f.saveSettings()
    }, e.viewModeChanged = function () {
        p(f.viewModeChanged, 300), t.writeSlot("settings" + t.getBookId(!0), t.data.settings)
    }, e.navModeChanged = function () {
        f.saveSettings()
    }, e.lineAdjustChanged = function () {
        p(f.lineAdjustChanged, 300)
    }, e.singlePageScrollChanged = function () {
        p(f.viewModeChanged, 300)
    }, e.editFontSize = function () {
        e.header.mode = "textSize", l.toggleRight(!1), l.toggleLeft(!1)
    }, e.langChanged = function () {
        l.toggleLeft(!1), l.toggleRight(!1), p(f.langChanged, 500)
    }, e.sync = function () {
        l.toggleRight(!1), l.toggleLeft(!1), f.sync()
    }, e.fullscreen = function () {
        l.toggleRight(!1), l.toggleLeft(!1), o.fullscreen()
    }, e.logout = function () {
        l.toggleRight(!1), l.toggleLeft(!1), a.logout()
    }, e.about = function () {
        e.openAuthorWebsite()
    }, e.exit = function () {
        d.show({
            mode: "exit", backdropClickToClose: !1, exitOptions: {
                exit: function () {
                    n.exit()
                }
            }
        })
    }
}]), app.controller("CatMenuCtrl", ["$scope", "backend", "translit", "$ionicScrollDelegate", "$ionicModal", "$timeout", "stg", function (e, t, n, r, i, o, a) {
}]), app.controller("ChaptersCtrl", ["$scope", "initializer", "$stateParams", "status", "stg", "nav", "modals", "backend", "events", "$ionicHistory", "crdv", "virt", "chapters", "$ionicGesture", "cache", "$q", "book", "$timeout", "$ionicPopup", "$ionicSideMenuDelegate", "$location", "$ionicScrollDelegate", "selection", "$filter", function (e, t, n, r, i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w, k, x, C) {
    var S;

    function A(e, t) {
        if (S && clearTimeout(), currentIndex == t.currentChapterIndex) return S = setTimeout(function () {
            A(e, t)
        }, 1e3);
        var n = {
            neighbor: t.currentChapterIndex + ("next" == e ? 1 : -1),
            ch: t.currentChapterTitle,
            chIndex: t.currentChapterIndex,
            dir: e,
            targetIndex: currentIndex,
            targetCh: i.data.book.chapter.title
        };
        l.add({action: "navBtnClicked", param: JSON.stringify(n)})
    }

    e.init = function () {
        putTest("ChaptersCtrl init"), e.$on("$stateChangeStart", function (e, t, n) {
            if (0 == t.name.indexOf("reader") || 0 == t.name.indexOf("libraryreader")) {
                var r = n.ch ? n.ch : 0, i = n.hash ? n.hash : null, o = getQueryStringValue("vi");
                h.loadChapterByIndex(Number(r), {hash: i, vIndex: o})
            }
        }), e.native || e.desktop || e.$on("$ionicView.beforeEnter", function () {
            if (!t.initialized || !config.kotobee.public && !s.userLoggedIn()) {
                var e = "loading";
                c.forwardView() ? e = c.forwardView().stateId : c.backView() && (e = c.backView().stateId), c.nextViewOptions({disableAnimate: !0}), w.path("/" + e)
            }
        })
    }, e.nextChapter = function () {
        var t = {};
        return t.currentChapterTitle = i.data.book.chapter.title, t.currentChapterIndex = currentIndex, h.nextChapter({}, function (e) {
            A("next", t)
        })
    }, e.prevChapter = function () {
        var t = {};
        return t.currentChapterTitle = i.data.book.chapter.title, t.currentChapterIndex = currentIndex, h.prevChapter({}, function (e) {
            A("previous", t)
        })
    }, e.pinched = function (e) {
    }, e.showBookInfo = function () {
        native && d.vibrate();
        var e = i.data.book;
        e.coverImg = i.data.epub.bookThumb, e.coverStyle = {"background-image": "url('" + e.coverImg + "')"}, e.name = e.meta.dc.title;
        var t = {};
        t.book = e, config.kotobee.cloudid && "book" == config.kotobee.mode && (t.book.stats = config.kotobee.stats), t.noAction = !0, a.show({
            mode: "bookInfo",
            dynamic: !0,
            animation: "slide-in-up",
            bookInfoOptions: t
        })
    }
}]), app.controller("ContentCtrl", ["$location", "nav", "virt", "$sce", "$filter", "$attrs", "stg", "crdv", "$controller", "$rootScope", "$element", "cache", "$scope", "settings", "$ionicSideMenuDelegate", "$http", "chapters", "$timeout", "selection", "book", "$ionicScrollDelegate", function (e, t, r, n, i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w) {
    h.init = function () {
    }, h.mouseDown = function () {
        mobile && t.resize(), r.enable()
    }, h.mouseUp = function () {
        r.disableAfter(2e3)
    };
    var k;
    h.scroll = function () {
        if (a.data.book) {
            try {
                var e = w.$getByHandle("content"), t = new Event("kotobeeScrolled");
                if (e) {
                    var n = e.getScrollPosition();
                    t.left = n.left, t.top = n.top, t.zoom = n.zoom
                }
                document.dispatchEvent(t)
            } catch (e) {
            }
            kotobee && kotobee.dispatchEvent("scrolled", n), config.preserveLoc && "app" != config.kotobee.mode && (k && clearTimeout(k), k = setTimeout(function () {
                if ("app" != config.kotobee.mode) {
                    var e = w.$getByHandle("content");
                    if (e) {
                        var t = e.getScrollPosition();
                        t && a.writeSlot("lastLocY" + a.getBookId(), t.top)
                    }
                }
            }, 2e3)), mobile || (r.enable(), r.disableAfter(2e3))
        }
    }
}]), app.controller("ForgotPwdCtrl", ["$scope", "initializer", "popovers", "crdv", "design", "stg", "$location", "modals", "$ionicHistory", "error", "backend", "auth", "cache", "translit", "$window", function (e, t, n, r, i, o, a, s, l, c, d, u, h, f, p) {
    e.init = function () {
        mobile || (i.stylize("forgotPwd", i.getBgStyle()), d.addListener("pathsChanged", function () {
            i.stylize("forgotPwd", i.getBgStyle())
        })), e.$on("$ionicView.afterEnter", function () {
            h.setOb("title", replaceHTML(h.getOb("title"), f.get("forgotPwd")))
        }), e.native || e.desktop || e.$on("$ionicView.beforeEnter", function () {
            if (!t.initialized || d.cloudParam("public") || o.data.user && d.userLoggedIn()) {
                var e = "loading";
                l.forwardView() ? e = l.forwardView().stateId : l.backView() && (e = l.backView().stateId), l.nextViewOptions({disableAnimate: !0}), a.path("/" + e)
            }
        })
    }, e.showMenu = function () {
        var e = [{
            name: f.get("exit"), func: function () {
                n.hide(), s.show({
                    mode: "exit", backdropClickToClose: !1, exitOptions: {
                        exit: function () {
                            r.exit()
                        }
                    }
                })
            }
        }];
        n.show({mode: "cornerList", listOb: e, backdropClickToClose: !1})
    }, e.submit = function () {
        e.user && e.user.email && d.forgotPwd(e.user, function (e) {
            e.error ? c.update({error: "s_authError" == e.error ? "accessDenied" : e.error}) : (s.show({
                mode: "success",
                successOptions: {msg: f.get("pwdEmailSent")}
            }), p.history.back())
        })
    }, e.backClicked = function () {
        p.history.back()
    }
}]), app.controller("GlobalCtrl", ["cache", "modals", "popovers", "np", "book", "$http", "$compile", "$injector", "$rootScope", "initializer", "translit", "error", "notes", "$sce", "design", "settings", "status", "tinCan", "$scope", "backend", "stg", "$location", function (e, t, n, r, i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w, k) {
    putTest = function (e) {
    }, b.init = function () {
        putTest("Global init"), b.mobile = mobile, b.native = native, b.desktop = desktop, b.ios = ios, b.preview = preview, b.config = config, b.cloudParam = y.cloudParam, b.started = !0, t.setScope(b), n.setScope(b)
    }, b.tinCanShortcut = function (e) {
        v.send(e)
    }, b.questionsAddToNotebookShortcut = function (e, t) {
        h.addNotesFromQuestions(e, t || angular.noop)
    }, b.getNotebookShortcut = function (i, o) {
        w.getNotes(function (e) {
            var t = [currentIndex];
            w.data.currentRPageOb && t.push(w.data.currentRPageOb.index);
            for (var n = 0; n < t.length; n++) for (var r = 0; r < e.length; r++) e[r].chapter == t[n] && 0 == e[r].location.indexOf(i.rootIndex) && (e[r].location = e[r].location.split(i.rootIndex)[1], h.addIcon(e[r], i.root));
            o && o()
        })
    }, b.location = function (e) {
        k.path(e)
    }, b.kTemplate = function (e) {
        return kTemplate(e)
    }, b.translit = function (e) {
        return d.get(e)
    }, b.htmlSafe = function (e) {
        return f.trustAsHtml(e)
    }, b.openAuthorWebsite = function () {
        var e = w.data.settings.language;
        "en" != e && "es" != e && "ar" != e && "fr" != e && (e = "en"), window.open("https://www.kotobee.com/" + e + "/products/author#ref=readerwatermark", "_system")
    }, b.applyNativeScroll = function (t) {
        var n, e = t.getElementsByClassName("kbContent");
        if (e.length && !(e[0].scrollHeight <= t.offsetHeight)) {
            t.children.length && "ion-scroll" == t.children[0].nodeName.toLowerCase() && (n = t.children[0], t.appendChild(e[0]), t.removeChild(n), t.scrollTop = 0), (n = document.createElement("ion-scroll")).setAttribute("scrollY", "true"), n.setAttribute("overflow-scroll", "false"), n.setAttribute("style", "width:100%;height:100%"), n.setAttribute("container-scroll", "true");
            for (var r = 0; r < t.children.length; r++) n.appendChild(t.children[r]);
            setTimeout(function () {
                var e = a(n.outerHTML)(b);
                angular.element(t).append(e)
            }, 0)
        }
    }, b.globalClick = function () {
    }, b.globalTouch = function () {
    }, b.refreshSignatures = function () {
        y.refreshSignatures()
    }, b.getService = function (e) {
        return s.get(e)
    }, b.testModals = function () {
        t.show({mode: "loading", loadingMsg: d.get("pleaseWait")});
        t.show({mode: "login", dynamic: !0, animation: "slide-in-up"}), t.show({
            mode: "login",
            dynamic: !0,
            animation: "slide-in-up"
        }), t.show({mode: "login", dynamic: !0, animation: "slide-in-up"}), t.show({
            mode: "bookInfo",
            dynamic: !0,
            animation: "slide-in-up"
        }), t.show({mode: "bookInfo", dynamic: !0, animation: "slide-in-up"}), t.show({
            mode: "update",
            dynamic: !0,
            animation: "slide-in-up",
            backdropClickToClose: !0
        }), t.show({
            mode: "bookInfo",
            dynamic: !0,
            animation: "slide-in-up"
        }), t.show({mode: "generalError"}), t.show({
            mode: "loading",
            loadingMsg: d.get("pleaseWait"),
            backdropClickToClose: !0
        }), t.show({
            mode: "note",
            dynamic: !0,
            animation: "slide-in-up",
            backdropClickToClose: !0
        }), t.show({mode: "hlight"}), t.show({
            mode: "externalSite",
            dynamic: !0,
            animation: "slide-in-up",
            backdropClickToClose: !0
        }), t.show({mode: "bookInfo", dynamic: !0, animation: "slide-in-up"}), t.show({
            mode: "flashUnsupported",
            flashOb: {text: "Text for flash unsupported site"}
        }), t.show({
            mode: "success",
            successOptions: {msg: "SUCCESS MSG"}
        }), t.show({mode: "localOnlyError"}), t.show({mode: "xFrameError"}), t.show({mode: "networkError"}), t.show({mode: "exit"}), t.show({mode: "waitTimeout"}), t.show({mode: "backToLib"}), t.show({
            mode: "notebook",
            dynamic: !0,
            animation: "slide-in-up",
            scope: {notebookClose: t.hide}
        }), t.show({mode: "search", dynamic: !0, animation: "slide-in-up"}), t.show({
            mode: "image",
            dynamic: !0,
            animation: "slide-in-up"
        }), t.show({mode: "libraryInfo", dynamic: !0, animation: "slide-in-up"}), t.show({
            mode: "bookInfo",
            dynamic: !0,
            animation: "slide-in-up"
        }), t.show({mode: "encryptionKey", backdropClickToClose: !0});
        t.show({mode: "loading", loadingMsg: d.get("pleaseWait"), timeLimit: 3e3})
    }, b.injectUserCSS = function (e) {
        p.injectUserCSS(e)
    }
}]), app.controller("LibraryCtrl", ["$scope", "error", "bookinfo", "autohide", "$sce", "$location", "$ionicPlatform", "$rootScope", "$element", "$ionicHistory", "auth", "modals", "popovers", "translit", "library", "chapters", "status", "book", "$timeout", "$ionicPopup", "$ionicModal", "$ionicScrollDelegate", "backend", "crdv", "$filter", "stg", "settings", function (i, t, n, r, e, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w, k, x, C, S, A, L) {
    var N, I, E, T, B;

    function O(e) {
        for (var t = 0; t < i.sortOb.options.length; t++) if (i.sortOb.options[t].val == e) return i.sortOb.options[t]
    }

    function P() {
        if (p.initialize(), p.addListener(M), function e() {
            if (!document.getElementById("libraryHeader")) return setTimeout(e, 100);
            r.libInitialized()
        }(), i.initialized = !0, i.catList = A.data.currentLibrary.categories, x.userLoggedIn() && ("account" != A.data.currentLibrary.authbookview || x.cloudParam("public") || (i.supportsAccountView = !0)), "categories" == A.data.currentLibrary.startingpage) R(), _("categories"); else if (0 == o.path().indexOf("/library/tab/downloads")) i.downloadedClicked(); else if (i.supportsAccountView) _("account"), b(function () {
            F({account: !0})
        }); else if (!native && !desktop || x.userLoggedIn() || config.kotobee.public || !config.kotobee.offline) {
            if (_("all"), !x.libraryHasPublicBooks() && !x.cloudParam("public") && "hide" == A.data.currentLibrary.authbookview && !x.userLoggedIn()) return i.paneMsg = "noEbooksAvailable", void R();
            b(F)
        } else _("downloaded"), i.paneMsg = null, 0 == A.data.downloaded.length && (i.paneMsg = "noEbooksDownloaded"), R();
        p.startBook && (function (e) {
            if (!config.kotobee.public && !x.userLoggedIn()) return;
            if (A.data.currentLibrary && A.data.currentLibrary.books) for (var t = 0; t < A.data.currentLibrary.books.length; t++) if (A.data.currentLibrary.books[t].id == e) return v.open(A.data.currentLibrary.books[t]);
            x.getEbook({bid: e}, function (e) {
                v.open(e)
            })
        }(p.startBook), p.startBook = null)
    }

    function M() {
        var e, t = arguments[0];
        "preload" == t && (arguments[1].accumulated || (e = !0), mobile || (e = !0), i.paneMsg = null, e && function () {
            for (var e = document.getElementsByClassName("libLoaderAnim"), t = 0; t < e.length; t++) removeClass(e[t], "hide")
        }());
        if ("postload" == t) {
            var n = arguments[2];
            e = !1, i.stopInfiniteScroll(), N = !1, i.stopRefresher();
            var r = function (e) {
                {
                    if (B) {
                        for (var t = 0, n = 0; n < e.length; n++) if (e[n].searchresults) for (var r = 0; r < e[n].searchresults.length; r++) e[n].searchresults[r].results && (t += e[n].searchresults[r].results.length);
                        return t
                    }
                    return e.length
                }
            }(n);
            i.moreData = r >= p.maxResults, i.moreData && p.setMax(r)
        }
    }

    function _(e) {
        if (i.tab = e, i.currentCustomCat = null, "category" == i.subMode) for (var t = 0; t < A.data.currentLibrary.categories.length; t++) {
            var n = A.data.currentLibrary.categories[t];
            n.tab && n.id == E.id && (i.currentCustomCat = n, i.tab = "customCat")
        }
        mobile ? k.$getByHandle("thumbs").scrollTop(!1) : document.getElementById("libraryThumbs").scrollTop = 0
    }

    function F(e) {
        e = e || {}, i.paneMsg = null, E && (e.catid = E.id, e.listmode = E.listmode), I && (e.key = I), B && (e.contentkey = B), p.getEbooks(e, function (e) {
            i.bookSource = e, "all" != i.tab && "customCat" != i.tab && "account" != i.tab || (e.empty && (i.paneMsg = "noEbooksAvailable"), i.spaceAvailable() || R(), i.$$phase || i.$apply())
        })
    }

    function R() {
        for (var e = document.getElementsByClassName("libLoaderAnim"), t = 0; t < e.length; t++) addClass(e[t], "hide")
    }

    function D(e, t) {
        t = t || A.data.currentLibrary.categories;
        for (var n = 0; n < t.length; n++) {
            if (t[n].id == e) return t[n];
            if (t[n].children) {
                var r = D(e, t[n].children);
                if (r) return r
            }
        }
    }

    function j() {
        T && T(), T = a.registerBackButtonAction(function (e) {
            i.searchOb.enabled ? i.disableSearch() : "categories" == i.tab && i.catList != A.data.currentLibrary.categories ? i.categoryBackClicked() : E ? i.back() : I ? i.back() : B && i.back(), i.$apply()
        }, 102)
    }

    i.initialized = !1, i.init = function () {
        document.getElementsByClassName("libraryView");
        x.setLibraryLoginCallback(function () {
            P()
        }), x.setLibraryLogoutCallback(function () {
            i.supportsAccountView && "all" != i.tab && (_("all"), b(F)), i.supportsAccountView = !1, R()
        }), i.sortOb = {}, i.sortOb.options = [{
            name: "dateAddedNewestFirst",
            data: "date",
            dir: "desc",
            val: "dateDesc"
        }, {name: "dateAddedOldestFirst", data: "date", dir: "asc", val: "dateAsc"}, {
            name: "titleA-Z",
            data: "name",
            dir: "asc",
            val: "titleAsc"
        }, {name: "titleZ-A", data: "name", dir: "desc", val: "titleDesc"}, {
            name: "categoryA-Z",
            data: "cat",
            dir: "asc",
            val: "catAsc"
        }, {
            name: "categoryZ-A",
            data: "cat",
            dir: "desc",
            val: "catDesc"
        }], A.data.currentLibrary && A.data.currentLibrary.defaultsort && (i.sortOb.method = O(A.data.currentLibrary.defaultsort)), i.sortOb.method || (i.sortOb.method = O("dateDesc")), p.sortMethod = i.sortOb.method, i.$on("$ionicView.beforeEnter", function (e, t) {
            if (v.removeBookConfigElem(), g.clearContent(), null, !(i.native || i.desktop || d.authenticated && "library" == config.kotobee.mode)) {
                var n = "loading";
                c.forwardView() ? n = c.forwardView().stateId : c.backView() && (n = c.backView().stateId), c.nextViewOptions({disableAnimate: !0}), o.path("/" + n)
            }
            c.forwardView() && c.forwardView().stateId, c.backView() && c.backView().stateId, "forward" == t.direction && (A.data.currentLibrary.books = [], A.data.favorites = [])
        }), i.$on("$ionicView.afterEnter", function (e, t) {
            if ("back" == t.direction) return R(), p.setBrowserTitle(), void A.resetBook();
            x.cloudParam("public") ? P() : x.cloudParam("entry") ? x.login().then(function (e) {
                e.error && P()
            }) : P()
        })
    }, i.userLogin = function () {
        x.userLoggedIn() ? x.logout() : t.update({error: "s_authError"})
    }, i.langSelected = function (e) {
        i.langDropdownExpanded = !1, A.data.settings.language = e, L.langChanged()
    }, i.showLibraryMenu = function () {
        h.show({mode: "libraryMenu", menuItem: i.menuItemClicked, backdropClickToClose: !1})
    }, i.spaceAvailable = function () {
        var e = document.getElementById("libraryThumbs"), t = document.getElementById("libraryThumbsContent");
        if (e.offsetHeight > t.offsetHeight) {
            if (N) return;
            if (!i.moreDataExists()) return;
            return N = !0, i.loadMore(), !0
        }
    }, i.scroll = function (e) {
        if ((B ? .95 : .8) < (e = e || document.getElementById("libraryThumbs")).scrollTop / (document.getElementById("libraryThumbsContent").offsetHeight - e.offsetHeight)) {
            if (N) return;
            if (!i.moreDataExists()) return;
            N = !0, i.loadMore()
        }
    }, i.bookClicked = function (e) {
        n.show({book: e, categoryClicked: i.categoryClicked})
    }, i.refresherExists = function () {
        try {
            if (!A.data.currentLibrary) return !1;
            if ("categories" == i.tab) return !1;
            if ("downloaded" == i.tab) return !1;
            if ("favorites" == i.tab) return !0;
            if ("account" == i.tab) return !0;
            if ("all" == i.tab) return !0
        } catch (e) {
            return !1
        }
        return !0
    }, i.doRefresh = function () {
        var e = {accumulated: !0};
        "all" == i.tab ? F(e) : "account" == i.tab ? (e.account = !0, F(e)) : "favorites" == i.tab ? i.loadFavorites(e) : i.stopRefresher()
    }, i.sort = function () {
        p.sortMethod = i.sortOb.method, "downloaded" == i.tab ? S("orderBy")(i.data.downloaded, i.sortOb.method.data) : "account" == i.tab ? F({account: !0}) : F()
    }, i.menuItemClicked = function (e) {
        "language" == e && L.langChanged(), "redeemCode" == e && (h.hide(), i.redeemCodeClicked()), "info" == e && (h.hide(), u.show({
            mode: "libraryInfo",
            dynamic: !0,
            animation: "slide-in-up",
            libraryInfo: A.data.currentLibrary.libraryinfo
        })), "logout" == e && (h.hide(), i.data.user.pwd || i.data.user.code ? x.logout() : t.update({error: "s_authError"})), "exit" == e && (h.hide(), u.show({
            mode: "exit",
            backdropClickToClose: !1,
            exitOptions: {
                exit: function () {
                    C.exit()
                }
            }
        }))
    }, i.loadFavorites = function (e) {
        e = e || {}, i.paneMsg = null, E && (e.catid = E.id), I && (e.key = I), B && (e.contentkey = B), e.favs = !0, p.getEbooks(e, function (e) {
            i.bookSource = e, "favorites" == i.tab && (e.error && (i.paneMsg = "failedToGetFavs"), 0 == e.length && (i.paneMsg = "noFavsAvailable"), i.spaceAvailable() || R())
        })
    }, i.searchEbooks = function (e) {
        if (e && e.length && 0 != e.length) {
            if (e.length < 3) return t.update({error: "lessThan3Characters"}), void u.hide();
            i.subMode = "search", i.title = "searchResults", config.searchLibContent ? B = p.currentContentKey = e : I = p.currentKey = e, E = p.currentCat = null, i.currentCat = E, i.supportsAccountView && "all" != i.tab ? (_("account"), b(function () {
                F({account: !0})
            })) : (_("all"), b(F)), j()
        }
    }, i.enableSearch = function () {
        i.searchOb.enabled = !0, j()
    }, i.disableSearch = function () {
        i.searchOb.enabled = !1, T && T()
    }, i.loadMore = function () {
        var e = {more: !0, accumulated: !0};
        "all" == i.tab ? F(e) : "account" == i.tab ? (e.account = !0, F(e)) : "favorites" == i.tab ? i.loadFavorites(e) : (i.stopInfiniteScroll(), N = !0)
    }, i.stopInfiniteScroll = function () {
        s.$broadcast("scroll.infiniteScrollComplete")
    }, i.stopRefresher = function () {
        s.$broadcast("scroll.refreshComplete")
    }, i.moreDataExists = function () {
        try {
            if (!A.data.currentLibrary) return !1;
            if ("categories" == i.tab) return !1;
            if ("downloaded" == i.tab) return !1;
            var e;
            if ("favorites" == i.tab && (e = i.data.favorites), "all" == i.tab && (e = A.data.currentLibrary.books), "account" == i.tab && (e = A.data.currentLibrary.books), 0 == e.length) return !1
        } catch (e) {
            return !1
        }
        return i.moreData
    }, i.back = function () {
        i.subMode = !1, i.title = null, I = p.currentKey = null, B = p.currentContentKey = null, E = p.currentCat = null, i.currentCat = E, i.supportsAccountView && "all" != i.tab ? (_("account"), b(function () {
            F({account: !0})
        })) : (_("all"), b(F)), T && T()
    }, i.categoryBackClicked = function () {
        if (i.catList && i.catList.length) {
            var e = i.catList[0].parent;
            for (e = D(e.id); ;) {
                if (!(e = e.parent)) return void (i.catList = A.data.currentLibrary.categories);
                if ("separate" == (e = D(e.id)).submode) return void (i.catList = e.children)
            }
        }
    }, i.categoryClicked = function (e) {
        native && C.vibrate(), "expand" != e.submode ? "separate" != e.submode ? (E = p.currentCat = e, I = p.currentKey = null, B = p.currentContentKey = null, i.subMode = "category", i.title = E.name, i.currentCat = E, i.supportsAccountView ? (_("account"), b(function () {
            F({account: !0})
        })) : (_("all"), b(F)), j()) : i.catList = e.children : e.expand = !e.expand
    }, i.categoriesClicked = function () {
        native && C.vibrate(), E = I = null, i.title = i.subMode = null, _("categories"), i.paneMsg = null, R()
    }, i.accountClicked = function () {
        native && C.vibrate(), E = I = null, i.title = i.subMode = null, _("account"), R(), b(function () {
            F({account: !0})
        })
    }, i.allClicked = function () {
        native && C.vibrate(), E = I = null, i.title = i.subMode = null, _("all"), b(F)
    }, i.downloadedClicked = function () {
        native && C.vibrate(), E = I = null, i.title = i.subMode = null, _("downloaded"), i.paneMsg = null, 0 == A.data.downloaded.length && (i.paneMsg = "noEbooksDownloaded"), i.bookSource = A.data.downloaded, R()
    }, i.favoritesClicked = function () {
        native && C.vibrate(), E = I = null, i.title = i.subMode = null, _("favorites"), i.loadFavorites()
    }, i.redeemCodeClicked = function () {
        d.redeemCode({source: "topmenu"}, function () {
            i.allClicked()
        })
    }
}]), app.controller("LoginCtrl", ["$scope", "initializer", "crdv", "$ionicHistory", "popovers", "design", "modals", "error", "backend", "auth", "stg", "cache", "translit", "$location", function (t, n, r, i, o, e, a, s, l, c, d, u, h, f) {
    t.model = {};
    t.init = function () {
        mobile || (e.stylize("login", e.getBgStyle()), l.addListener("pathsChanged", function () {
            e.stylize("login", e.getBgStyle())
        })), "email" == config.kotobee.loginmode ? t.canLoginByEmail = !0 : "code" == config.kotobee.loginmode ? t.canLoginByCode = !0 : t.canLoginByEmail = t.canLoginByCode = !0, t.mode = t.canLoginByEmail ? "email" : "code", t.$on("$ionicView.afterEnter", function () {
            u.setOb("title", replaceHTML(u.getOb("title"), h.get("login")))
        }), t.native || t.desktop || t.$on("$ionicView.beforeEnter", function () {
            if (!n.initialized || config.kotobee.public || l.userLoggedIn()) {
                var e = "loading";
                i.forwardView() ? e = i.forwardView().stateId : i.backView() && (e = i.backView().stateId), i.nextViewOptions({disableAnimate: !0}), f.path("/" + e)
            }
        })
    }, t.showMenu = function () {
        var e = [{
            name: h.get("exit"), func: function () {
                o.hide(), a.show({
                    mode: "exit", backdropClickToClose: !1, exitOptions: {
                        exit: function () {
                            r.exit()
                        }
                    }
                })
            }
        }];
        o.show({mode: "cornerList", listOb: e, backdropClickToClose: !1})
    }, t.login = function () {
        if (t.model) {
            if ("code" == t.mode) {
                if (!t.model.code) return void s.update({error: "enterYourCode"});
                d.data.user.code = t.model.code, d.data.user.email = d.data.user.pwd = null
            } else {
                if (!d.data.user.email) return void s.update({error: "enterYourEmail"});
                if (!t.model.pwd) return void s.update({error: "enterYourPwd"});
                d.data.user.pwd = t.model.pwd, d.data.user.code = null
            }
            config.kotobee.permsLoaded ? e() : c.getPermissions(e)
        }

        function e() {
            l.login({dontShowErrorDialog: !0, userInput: !0}).then(function (e) {
                e.error ? s.update({error: "s_authError" == e.error ? "accessDenied" : e.error}) : (t.model.pwd = null, t.model.code = null, c.startup())
            })
        }
    }, t.register = function () {
        a.hide(), f.path("/register")
    }, t.forgotPassword = function () {
        f.path("/forgotpwd")
    }, t.signInByEmail = function () {
        t.mode = "email"
    }, t.redeemCode = function () {
        t.mode = "code"
    }
}]), app.controller("MediaCtrl", ["$ionicScrollDelegate", "media", "$ionicModal", "$location", "$rootScope", "$scope", "selection", "crdv", "stg", "$ionicLoading", function (e, t, n, r, i, o, a, s, l, c) {
    o.init = function () {
    }, o.mediaClicked = function (e) {
        t.show(e)
    }, o.hide = function () {
        t.hide()
    }
}]), app.controller("NotebookCtrl", ["$scope", "$ionicScrollDelegate", "$timeout", "crdv", "translit", "$rootScope", "selection", "bookmarks", "book", "chapters", "$location", "modals", "$stateParams", "notes", "hlights", "stg", function (i, n, r, o, u, a, s, l, h, c, e, d, t, f, p, g) {
    i.model = {}, i.ui = {}, i.noteBtns = {notes: !0, bookmarks: !0, hlights: !0};
    i.init = function () {
    }, i.notebookClose = function () {
        d.hide(), i.bookmarkContent = null, i.noteContent = null, i.hlightContent = null, i.notebook = {}
    }, i.noteBtnClicked = function (e, t) {
        "all" == e ? t.notes = t.bookmarks = t.hlights = !(t.notes && t.bookmarks && t.hlights) : (t.notes = t.bookmarks = t.hlights = !1, t[e] = !0), overflowScroll ? document.getElementById("notebookContent").scrollTop = 0 : n.$getByHandle("notebookScroll").scrollTop()
    }, i.pdfExport = function () {
        var e = i.serializeNotebookHtml(),
            t = (g.data.book.meta.dc.title ? g.data.book.meta.dc.title : u.get("book")) + ".pdf";
        r(function () {
            o.createPDF(e, t, function (e) {
            })
        }, 500)
    }, i.serializeNotebookHtml = function () {
        var e = "<br/>",
            t = '<html><head><meta charset="UTF-8" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head><body>';
        t += d([u.get("notebookFor"), ' "' + g.data.book.meta.dc.title + '"'], "h1"), t += e + e;
        for (var n = g.data.notebookContent.results, r = 0; r < n.length; r++) if (n[r]) {
            var i = "";
            i += d(h.getTitleByIndex(r), "h2") + e;
            var o = "..................................................................................";
            i += d([o + o], "p");
            for (var a = 0; a < n[r].length; a++) {
                var s = n[r][a], l = "";
                null != s.nid ? "page" == s.type ? l += d([u.get("pageNote") + ": ", c(s.note)], "p") + e : "content" == s.type && (l += d([u.get("noteFor"), ' "' + s.src + '"'], "p") + e, s.note.includes("<img ") && (s.note = s.note.replace(/\sstyle="(.*?)"/, ""), s.note = s.note.replace(/\sclass="(.*?)"/, ""), s.note = s.note.replace("<img ", '<img height="100"')), l += d([u.get("note") + ": ", c(s.note)], "p") + e) : null != s.hid ? l += d([u.get("highlight"), " [" + s.color + "]:", ' "' + s.src + '"'], "p", 'style="background-color:' + s.color + '"') + e : null != s.bmid && (l += d([u.get("contentBookmark")], "p") + e), i += d([l], "p")
            }
            t += d([i], "p", 'style="border:solid 3px #000;background-color:#ddd"')
        }

        function c(e) {
            return e.replace(/(?:\r\n|\r|\n)/g, "<br/>")
        }

        function d(e, t, n) {
            for (var r = "", i = 0; i < e.length; i++) {
                var o = e[i];
                if (o = o.replace(/[\u2018\u2019]/g, "'").replace(/[\u201C\u201D]/g, '"'), s = /^[\u0000-\u007fñáéíóúü]*$/.test(o)) r += s ? o : "<em>Non-unicode text</em>"; else for (var a = 0; a < o.length; a++) {
                    var s;
                    r += (s = /^[\u0000-\u007fñáéíóúü]*$/.test(o[a])) ? o[a] : "?"
                }
            }
            return "<" + t + (n ? " " + n : "") + ">" + r + "</" + t + ">"
        }

        return t += "</body></html>"
    }, i.shareNotebook = function () {
        var e = i.serializeNotebookTxt();
        o.share(e)
    }, i.serializeNotebookTxt = function () {
        for (var e = "\n", t = u.get("notebookFor") + ' "' + g.data.book.meta.dc.title + '"' + e, n = t.length; n--;) t += "#";
        t += "\n\n";
        for (var r = g.data.notebookContent.results, i = 0; i < r.length; i++) if (r[i]) {
            var o = u.get("chapter") + " " + (i + 1);
            t += o + e;
            for (n = o.length; n--;) t += "_";
            t += "\n\n";
            for (var a = 0; a < r[i].length; a++) {
                var s = r[i][a];
                null != s.nid ? "page" == s.type ? t += u.get("pageNote") + ": " + s.note + e : "content" == s.type && (s.src ? t += u.get("noteFor") + ' "' + s.src + '"' + e : t += u.get("note") + e, t += u.get("note") + ": " + s.note + e) : null != s.hid ? (t += u.get("highlightFor") + ' "' + s.src + '"' + e, t += u.get("highlightColor") + " " + s.color + e) : null != s.bmid && (t += u.get("contentBookmark") + e), t += "........................\n\n"
            }
        }
        return t
    }, i.deleteFromNotebookContent = function (e, t) {
        for (var n = g.data.notebookContent.results, r = 0; r < n.length; r++) if (n[r]) for (var i = 0; i < n[r].length; i++) if (n[r][i][e] == t) return n[r].splice(i, 1), void (n[r].length || n.splice(r, 1))
    }, i.noteItemClicked = function (e) {
        var t = e.chapter, n = e.location;
        n = String(n).split(",")[0], d.hide(), r(function () {
            c.redirect(t, {hash: n})
        }, 100)
    }, i.deleteNote = function (r, e) {
        f.confirmDeletion(function () {
            g.deleteNote(r, null, function (e) {
                i.noteContent = e, s.deleteNoteMarker(r), i.deleteFromNotebookContent("nid", r);
                for (var t = document.getElementsByClassName("note" + r), n = t.length; n--;) n == t.length - 1 && (removeClass(t[n], "last"), t[n].removeAttribute("nloc"), t[n].removeAttribute("ncontent")), removeClass(t[n], "contentNoteBG"), removeClass(t[n], "note" + r);
                a.$$phase || a.$apply()
            })
        }), e.stopPropagation()
    }, i.deleteBookmark = function (t, e) {
        l.confirmDeletion(function () {
            g.deleteBookmark(t, null, function (e) {
                i.bookmarkContent = e, s.deleteBookMarker(t), i.deleteFromNotebookContent("bmid", t), a.$$phase || a.$apply()
            }), e.stopPropagation()
        })
    }, i.deleteHlight = function (t, e) {
        p.confirmDeletion(function () {
            p.delete(t, null, function (e) {
                i.hlightContent = e, i.deleteFromNotebookContent("hid", t), a.$$phase || a.$apply()
            })
        }), e.stopPropagation()
    }
}]), app.controller("OAuthCtrl", ["$scope", "$stateParams", "backend", "$injector", "initializer", "design", "stg", "sso", function (e, n, t, r, i, o, a, s) {
    e.init = function () {
        o.stylize("oauth", o.getBgStyle()), t.getFingerprint(function (e) {
            var t = !0;
            n.state && n.state != e && (t = !1), t && s.setTokens(n.provider, decodeURIComponent(n.idToken), decodeURIComponent(n.accessToken)), i.initialize()
        })
    }
}]), app.controller("PreviewCtrl", ["cache", "modals", "popovers", "bookinfo", "crdv", "np", "book", "$http", "$rootScope", "initializer", "translit", "error", "notes", "$sce", "design", "settings", "status", "tinCan", "$scope", "backend", "stg", "$location", function (e, t, n, r, i, o, a, s, l, c, d, u, h, f, p, g, m, v, b, y, w, k) {
    b.init = function () {
        putTest("Preview init"), b.mobile = mobile, b.native = native, b.desktop = desktop, b.ios = ios, b.preview = preview, b.config = config, putTest("Global init good")
    }, b.start = function () {
        l.data = w.data, l.view = w.view, b.cloudParam = y.cloudParam, t.setScope(b), n.setScope(b), b.started = !0
    }, b.previewPage = function (e, t) {
        b.started ? (t = t || {
            lang: "en",
            book: {name: "Alice", description: "A great book indeed"}
        }, "bookInfo" == (e = e || "bookInfo") && (config = t.config ? t.config : {
            kotobee: {
                entry: 1,
                mode: "library"
            }
        }, w.data.user = t.user ? t.user : {loggedIn: !0}, w.data.currentLibrary = t.library ? t.library : {}, d.setLang(t.lang ? t.lang : "en"), r.show({book: t.book}, {animation: "none"}))) : setTimeout(function () {
            b.previewPage(e, t)
        }, 100)
    }, b.kTemplate = function (e) {
        return kTemplate(e)
    }, b.translit = function (e) {
        return d.get(e)
    }, b.htmlSafe = function (e) {
        return f.trustAsHtml(e)
    }
}]), app.controller("ReaderCtrl", ["$ionicScrollDelegate", "modals", "library", "$sce", "$location", "$rootScope", "$scope", "selection", "$ionicSideMenuDelegate", "$state", "$ionicPopover", "chapters", "book", "$timeout", "stg", function (e, t, n, r, i, o, a, s, l, c, d, u, h, f, p) {
    a.init = function () {
        a.mode = "reading"
    }, a.chapterClicked = function (e) {
        u.displayChapters()
    }, a.backClicked = function (e) {
        l.isOpenLeft() || t.show({
            mode: "backToLib", backdropClickToClose: !1, backToLibOptions: {
                back: function () {
                    t.hide(), i.path("/library")
                }
            }
        })
    }, a.searchClicked = function (e) {
        a.applyHeader("search")
    }, a.menuClicked = function (e) {
    }, a.setting1Clicked = function (e) {
    }, a.setting2Clicked = function (e) {
    }, a.setting3Clicked = function (e) {
    }, a.linkClicked = function () {
    }
}]), app.controller("RedeemCodeCtrl", ["$scope", "initializer", "popovers", "crdv", "design", "stg", "$location", "modals", "$ionicHistory", "error", "backend", "auth", "cache", "translit", "$window", function (t, n, r, i, e, o, a, s, l, c, d, u, h, f, p) {
    t.init = function () {
        mobile || (e.stylize("redeemCode", e.getBgStyle()), d.addListener("pathsChanged", function () {
            e.stylize("redeemCode", e.getBgStyle())
        })), t.$on("$ionicView.afterEnter", function () {
            h.setOb("title", replaceHTML(h.getOb("title"), f.get("redeemCode")))
        }), t.native || t.desktop || t.$on("$ionicView.beforeEnter", function () {
            if (!n.initialized || d.cloudParam("public") || o.data.user && d.userLoggedIn()) {
                var e = "loading";
                l.forwardView() ? e = l.forwardView().stateId : l.backView() && (e = l.backView().stateId), l.nextViewOptions({disableAnimate: !0}), a.path("/" + e)
            }
        })
    }, t.showMenu = function () {
        var e = [{
            name: f.get("exit"), func: function () {
                r.hide(), s.show({
                    mode: "exit", backdropClickToClose: !1, exitOptions: {
                        exit: function () {
                            i.exit()
                        }
                    }
                })
            }
        }];
        r.show({mode: "cornerList", listOb: e, backdropClickToClose: !1})
    }, t.submit = function () {
        function e() {
            d.cloudParam("entry") ? (p.history.back(), d.login()) : d.login().then(function (e) {
                e.error ? c.update({error: "s_authError" == e.error ? "accessDenied" : e.error}) : u.startup()
            })
        }

        t.user && t.user.code && (o.data.user.code = t.user.code, o.data.user.email = o.data.user.pwd = null, config.kotobee.permsLoaded ? e() : u.getPermissions(e))
    }, t.backClicked = function () {
        p.history.back()
    }
}]), app.controller("RegisterCtrl", ["$scope", "initializer", "popovers", "crdv", "modals", "design", "stg", "$ionicHistory", "$location", "backend", "translit", "cache", "error", "$window", function (t, n, r, i, o, e, a, s, l, c, d, u, h, f) {
    t.init = function () {
        t.user = {
            email1: "",
            email2: ""
        }, mobile || (e.stylize("register", e.getBgStyle()), c.addListener("pathsChanged", function () {
            e.stylize("register", e.getBgStyle())
        })), t.$on("$ionicView.afterEnter", function () {
            u.setOb("title", replaceHTML(u.getOb("title"), d.get("register")))
        }), t.native || t.desktop || t.$on("$ionicView.beforeEnter", function () {
            if (!n.initialized || config.kotobee.public || c.userLoggedIn()) {
                var e = "loading";
                s.forwardView() ? e = s.forwardView().stateId : s.backView() && (e = s.backView().stateId), s.nextViewOptions({disableAnimate: !0}), l.path("/" + e)
            }
        })
    }, t.showMenu = function () {
        var e = [{
            name: d.get("exit"), func: function () {
                r.hide(), o.show({
                    mode: "exit", backdropClickToClose: !1, exitOptions: {
                        exit: function () {
                            i.exit()
                        }
                    }
                })
            }
        }];
        r.show({mode: "cornerList", listOb: e, backdropClickToClose: !1})
    }, t.create = function () {
        !function () {
            var e = t.user;
            return -1 != e.email1.indexOf("@") && /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e.email1) ? e.email1 == e.email2 || (h.update({error: "emailsDontMatch"}), !1) : (h.update({error: "emailFormatError"}), !1)
        }() || c.register(t.user, function (e) {
            if (e.error) h.update(e); else {
                var t = "d_accountCreated";
                e.success && e.success.approvalRequired && (t = "d_accountCreatedApprovalRequired"), o.show({
                    mode: "success",
                    successOptions: {msg: d.get(t)}
                }), f.history.back()
            }
        })
    }, t.backClicked = function () {
        f.history.back()
    }
}]), app.controller("RendererCtrl", ["$rootScope", "$ionicHistory", "modals", "events", "nav", "backend", "library", "settings", "book", "auth", "status", "popovers", "$sce", "error", "translit", "cache", "$ionicPlatform", "bookmarks", "hlights", "notes", "$ionicSideMenuDelegate", "$scope", "$ionicScrollDelegate", "$filter", "chapters", "$ionicPopup", "$location", "$timeout", "selection", "crdv", "$ionicLoading", "stg", "search", "$ionicModal", function (s, t, l, e, n, r, i, o, c, a, d, u, h, f, p, g, m, v, b, y, w, k, x, C, S, A, L, N, I, E, T, B, O, P) {
    function M(e) {
        "c" == e.key && (e.ctrlKey || e.metaKey) && I.copyToClipboard(), e.shiftKey && ("ArrowRight" == e.key ? I.extendRight() : "ArrowLeft" == e.key && I.extendLeft())
    }

    k.init = function () {
        s.renderScope = k, I.listener = k.selection, k.searchContent = {}, k.sideMenuMode = "bookSettings";
        var e = m.registerBackButtonAction(function (e) {
            kInteractive.frameIsOpen ? kInteractive.closeFrame() : kInteractive.alertIsOpen ? kInteractive.closeAlert() : kInteractive.videoIsFullscreen ? kInteractive.closeFullscreenVideo() : "default" != k.header.mode ? "selection" == k.header.mode ? I.reset() : k.applyHeader("default") : B.data.book.chapter.viewport && n.getFxlScale() != n.getFxlFit().bestFit ? n.fxlZoomFit() : "library" == config.kotobee.mode ? L.path("/library") : isReaderApp ? L.path("/app") : l.show({
                mode: "exit",
                backdropClickToClose: !1,
                exitOptions: {
                    exit: function () {
                        E.exit()
                    }
                }
            }), k.$apply()
        }, 103);
        k.$on("$destroy", e), k.native || k.desktop || k.$on("$ionicView.beforeEnter", function () {
            if (!a.authenticated) {
                var e = "loading";
                t.forwardView() ? e = t.forwardView().stateId : t.backView() && (e = t.backView().stateId), t.nextViewOptions({disableAnimate: !0}), L.path("/" + e)
            }
        })
    }, k.setSideMenuMode = function (e) {
        k.sideMenuMode = e
    }, k.applyHeader = function (e) {
        try {
            k.header.mode = e
        } catch (e) {
        }
    }, k.header = {mode: "default"}, k.selection = function (e) {
        mobile ? "activated" == e || "selectionFixed" == e ? k.applyHeader("selection") : "deactivated" == e && k.applyHeader("default") : "selectionFixed" == e ? (addClass(document.getElementById("selectionOptions"), "showBar"), document.getElementById("copyBtn").setAttribute("data-clipboard-text", I.getSelectedText()), window.addEventListener("keydown", M)) : "deactivated" == e && (removeClass(document.getElementById("selectionOptions"), "showBar"), window.removeEventListener("keydown", M))
    }, k.contentLink = function (e) {
        S.applyChapterStateFromURL(e.getAttribute("href"))
    }, k.chapterLink = function (e) {
        if (0 < e.parentElement.getElementsByTagName("ol").length) {
            var t = e.offsetHeight + 20;
            if (overflowScroll || x.$getByHandle("chapters").scrollBy(0, t, !0), !e.getAttribute("href") || e.getAttribute("data-dontshow")) return void (hasClass(e.parentElement, "expanded") ? removeClass(e.parentElement, "expanded") : addClass(e.parentElement, "expanded"));
            addClass(e.parentElement, "expanded")
        }
        w.toggleLeft(!1), w.toggleRight(!1), L.search("vi");
        var n = S.getIndexFromTocElem(e);
        S.applyChapterStateFromURL(e.getAttribute("href"), {vIndex: 0, index: n}), k.$$phase || k.$apply()
    }, k.targetCurrentChapter = function (e) {
        S.highlightCurrentTocChapter()
    }, k.externalLink = function (e) {
        var t = e.getAttribute("href"), n = e.getAttribute("target");
        r.externalLink(t, {target: n}), kInteractive.events && kInteractive.events.add({
            action: "linkClicked",
            param: t,
            elem: e
        })
    }, k.bookmarkClicked = function (e) {
        v.addBookmark()
    }, k.noteClicked = function (e, t) {
        y.noteClicked(e ? [e] : null, t)
    }, k.search = function (e, n, t, r) {
        if (e && e.length && 0 != e.length) {
            if (e.length < 3) return f.update({error: "lessThan3Characters"}), void l.hide();
            k.applyHeader("default"), null == t && (k.searchStack = [0]), d.update(p.get("searching"), null, {
                dots: !0,
                timeoutDuration: 6e4
            }), n || (n = "all", t = t || 0);
            var i = {key: e, mode: n, limit: 40, start: t, array: r};
            N(function () {
                O.start(i, function (e) {
                    d.update(null), k.searchContent = e;
                    for (var t = 0; t < k.searchContent.results.length; t++) if (k.searchContent.results[t] && k.searchContent.results[t].matches.length) {
                        k.searchContent.notEmpty = !0;
                        break
                    }
                    "all" == n ? (k.$broadcast("scroll.infiniteScrollComplete"), overflowScroll ? document.getElementById("searchScroll").scrollTop = 0 : x.$getByHandle("searchScroll").scrollTop()) : "chapter" == n && N(function () {
                        k.applyHeader("searchItems")
                    }, 500)
                })
            }, 500)
        }
    }, k.searchMore = function () {
        for (var e, t = k.searchContent.results.length; t--;) if (k.searchContent.results[t] && k.searchContent.results[t].matches[0]) {
            e = k.searchContent.results[t].matches[0];
            break
        }
        e ? (k.searchStack.push(e.chapter + 1), overflowScroll ? document.getElementById("searchScroll").scrollTop = 0 : x.$getByHandle("searchScroll").scrollTop(), k.search(k.searchContent.key, "all", e.chapter + 1)) : k.searchContent.more = !1
    }, k.searchBack = function () {
        if (!(k.searchStack.length <= 1)) {
            k.searchStack.pop();
            var e = k.searchStack.pop();
            overflowScroll ? document.getElementById("searchScroll").scrollTop = 0 : x.$getByHandle("searchScroll").scrollTop(), k.search(k.searchContent.key, "all", e)
        }
    }, k.locateInChapter = function (e) {
        l.hide(), k.search(e, "chapter")
    }, k.clearResults = function () {
        k.searchContent = {}, k.applyHeader("default"), overflowScroll ? document.getElementById("searchScroll").scrollTop = 0 : x.$getByHandle("searchScroll").scrollTop()
    }, k.searchItemClickedVeryOld = function (e) {
        var r = e.item;
        e.index, e.matches;
        l.hide(), timeOut(function () {
            S.addListener(function e(t) {
                if ("newChapter" == t) {
                    S.removeListener(e);
                    var n = I.getElemsByLocation(r.location)[0];
                    timeOut(function () {
                        addClass(n, "searchItemHighlightFade"), timeOut(function () {
                            removeClass(n, "searchItemHighlightFade")
                        }, 2200)
                    }, 1200)
                }
            }), L.path(c.root + "/reader/chapter/" + r.chapter + "/" + r.location)
        }, 300)
    }, k.searchItemClicked = function (e) {
        O.searchItemClicked(e, {timer: !0}, function () {
            s.renderScope.applyHeader(""), N(function () {
                s.renderScope.applyHeader("searchItems"), s.$$phase || s.$apply()
            })
        })
    }, k.searchItemClickedOld = function (e, t) {
        var o = e.item, n = e.index, r = e.matches;

        function a(e) {
            "renderedChapter" == e && (d.update(), S.removeListener(a), r.index = n, k.applyHeader("searchItems"))
        }

        l.hide(), timeOut(function () {
            d.update(p.get("pleaseWait"), null, {dots: !0}), S.addListener(a);
            var n = o.chapter, r = o.location, i = {hash: r};
            S.getPageOb({page: n}, function (e) {
                if (S.shouldBePaged(e)) {
                    var t = I.getPageByLocation(e, r);
                    null != t && (i.vIndex = t, L.search({vi: t}))
                }
                if (L.path(c.root + "/reader/chapter/" + n + "/" + r, i), e.index == currentIndex) {
                    if (i.vIndex && i.vIndex == currentVIndex) return void a("renderedChapter");
                    S.loadChapterByIndex(currentIndex, i)
                }
                s.$$phase || s.$apply()
            })
        }, 300)
    }, k.fxlZoomIn = function (e) {
        n.fxlZoomIn(e)
    }, k.fxlZoomOut = function (e) {
        n.fxlZoomOut(e)
    }, k.fxlZoomFit = function (e) {
        n.fxlZoomFit(e)
    }
}]), app.controller("SdkCtrl", ["$scope", "modals", "stg", "$element", function (i, o, a, e) {
    var s, t = {name: "Local book", mode: "book", locked: !0, liburl: "http://dev.kotobee.com/"};

    function l(e) {
        e = e || i.profiles;
        for (var t = [], n = 0; n < e.length; n++) {
            var r = {};
            r.name = e[n].name, r.mode = e[n].mode, r.liburl = e[n].liburl, r.cloudid = e[n].cloudid, r.hostPath = e[n].hostPath, r.locked = e[n].locked, t.push(r)
        }
        a.writeSlot("sdkProfiles", t, function () {
        })
    }

    function n(e) {
        hasParentWithId(e.target, "sdkProfiler", 50) || hasParent(e.target, "modal", 50) || i.close()
    }

    i.init = function () {
        debug || e[0].parentNode.removeChild(e[0])
    }, i.profilerClicked = function () {
        i.expanded ? i.close() : i.open(), a.readSlot("sdkProfiles", function (e) {
            e && e.length || (e = [clone(t)]), i.profiles = e, i.$$phase || i.$apply()
        }), a.readSlot("sdkProfilesEnabled", function (e) {
            i.useProfiles = e, i.$$phase || i.$apply()
        })
    }, i.toProfiles = function () {
        e[0].getElementsByClassName("profiles")[0].scrollIntoViewIfNeeded()
    }, i.open = function () {
        i.expanded = !0, document.addEventListener("click", n)
    }, i.close = function () {
        i.expanded = !1, document.removeEventListener("click", n)
    }, i.lockedProfileClicked = function (e) {
        o.show({
            mode: "generalError",
            errorOptions: {msg: "The default profile is always locked. You can never delete it."}
        })
    }, i.delProfile = function (t) {
        if (!s) {
            o.hide();
            var n = {title: "Confirmation", msg: "Are you sure you want to delete this profile?", barStyle: "bar-dark"},
                e = {
                    label: "delete", style: "button-assertive", func: function () {
                        n.dontAskChecked && (s = !0), o.hide();
                        for (var e = 0; e < i.profiles.length; e++) if (t == i.profiles[e]) return i.profiles.splice(e, 1), void l()
                    }
                }, r = {
                    label: "cancel", func: function () {
                        n.dontAskChecked && (s = !0), o.hide()
                    }
                };
            n.dontAsk = !0, n.btns = [e, r], o.show({mode: "confirm", confirmOptions: n})
        }
    }, i.editProfile = function (e) {
        e.editing = !0
    }, i.saveEditedProfile = function (e) {
        l(), e.editing = !1
    }, i.cancelEditingProfile = function (e) {
        e.editing = !1
    }, i.cancelNewProfileForm = function () {
        i.addingProfile = !1
    }, i.showNewProfileForm = function () {
        i.newProfile = {mode: "book", liburl: "http://dev.kotobee.com/", cloudid: null}, i.addingProfile = !0
    }, i.addProfile = function (e) {
        e.hostType = e.hostPath ? "kotobee" : null, e.name || (e.name = "Untitled profile"), i.profiles.push(e), l(), i.addingProfile = !1
    }, i.useProfilesChanged = function () {
        a.writeSlot("sdkProfilesEnabled", i.useProfiles, function () {
        })
    }, i.connect = function (e) {
        o.hide();
        var t = {title: "Confirmation", msg: "Restart the reader?", barStyle: "bar-dark"}, n = {
            label: "Restart", style: "button-balanced", func: function () {
                o.hide(), a.writeSlot("sdkProfile", e, function () {
                    setTimeout(function () {
                        location.reload()
                    }, 300)
                })
            }
        }, r = {
            label: "cancel", func: function () {
                o.hide()
            }
        };
        t.btns = [n, r], o.show({mode: "confirm", confirmOptions: t})
    }
}]), app.controller("SearchItemsCtrl", ["$ionicScrollDelegate", "search", "book", "chapters", "cache", "$ionicModal", "$location", "virt", "$rootScope", "$scope", "selection", function (e, n, t, i, r, o, a, s, l, c, d) {
    c.index = 0;
    c.init = function () {
        c.index = 0, c.titleMode = 3, c.results = [];
        var e = c.searchContent.results[currentIndex];
        e && (c.results = e.matches), c.results.index && (c.index = c.results.index), 0 == c.results.length ? c.titleMode = "empty" : c.highlightCurrentItem({initial: !0}), c.$on("$destroy", function () {
            n.removeHighlights()
        })
    }, c.backClicked = function () {
        c.applyHeader("default")
    }, c.up = function () {
        0 == c.index && (c.index = c.results.length), c.index--, c.highlightCurrentItem()
    }, c.down = function () {
        c.index == c.results.length - 1 && (c.index = -1), c.index++, c.highlightCurrentItem()
    }, c.highlightCurrentItem = function (e) {
        var t;
        c.results && i.getPageOb({page: currentIndex}, function (e) {
            n.removeHighlights(), t = c.results[c.index].location, i.addListener(r), i.redirect(currentIndex, {hash: t})
        });

        function r(e) {
            if ("renderedChapter" == e) {
                0, i.removeListener(r), i.hideLoader();
                var t = i.getCurrentHash(), n = d.getElemsByLocation(t);
                n[0] && (n[0].offsetParent ? (c.titleMode = "title", addClass(n[0], "searchItemHighlight"), s.safeScrollToElem("content", n[0], !0)) : c.titleMode = "hidden")
            }
        }
    }
}]), app.controller("SelectionCtrl", ["$ionicScrollDelegate", "chapters", "translit", "error", "status", "modals", "notes", "$window", "$location", "$sce", "$rootScope", "backend", "hlights", "$scope", "selection", "crdv", "stg", function (e, t, i, o, a, n, s, r, l, c, d, u, h, f, p, g, m) {
    f.init = function () {
    }, f.tts = function (e) {
        if (config.tts) {
            e = e || 0;
            var t = p.getSelectedText();
            if (t) if (desktop) o.update({error: "speechUnsupportedInDesktop"}); else if (preview) o.update({error: "speechUnsupportedInPreview"}); else if (native && "undefined" != typeof TTS) g.tts(t, function (e) {
            }); else try {
                if ("speechSynthesis" in window && SpeechSynthesisUtterance) {
                    a.showAndHide(i.get("preparingVoice"), 600, {dots: !0}), window.speechSynthesis.cancel();
                    var n = new SpeechSynthesisUtterance, r = window.speechSynthesis.getVoices();
                    if (!r.length) {
                        if (20 < e) return;
                        return setTimeout(function () {
                            f.tts(++e)
                        }, 50)
                    }
                    if (n.lang = config.defaultTtsLanguage ? config.defaultTtsLanguage : "en-US", n.rate = (config.ttsRate ? config.ttsRate : 100) / 100, n.voice = r.filter(function (e) {
                        return e.lang == n.lang
                    })[0], !n.voice) return;
                    n.text = t, window.speechSynthesis.speak(n)
                } else o.update({error: "speechUnsupported"})
            } catch (e) {
                o.update({error: "speechUnsupported"})
            }
        }
    }, f.copy = function () {
        p.copyToClipboard()
    }, f.share = function () {
        if (config.share) {
            var e = p.getSelectedText();
            e && g.share(e)
        }
    }, f.note = function (e) {
        if (config.annotations) {
            var t, n = p.getLocation(), r = [];
            n.left && ((t = {type: "content"}).location = n.left, t.chapter = m.data.currentPageOb.index, t.src = p.getSelectedText(void 0), t.event = e, r.push(t)), n.right && ((t = {type: "content"}).location = n.right, t.chapter = m.data.currentRPageOb.index, t.src = p.getSelectedText(void 0), t.event = e, r.push(t)), s.noteClicked(r, function (e) {
                p.reset()
            })
        }
    }, f.highlight = function () {
        if (config.annotations) {
            var e, t = p.getSelectedNodes(), n = p.getLocation(), r = [];
            n.left && ((e = {}).location = n.left, e.chapter = m.data.currentPageOb.index, e.src = p.getSelectedText(t), r.push(e)), n.right && ((e = {}).location = n.right, e.chapter = m.data.currentRPageOb.index, e.src = p.getSelectedText(t), r.push(e));
            for (var i = 0; i < t.length; i++) if (hasClass(t[i], "contentHlightBG")) {
                for (var o = getClassThatStartsWith(t[i], "hlight"), a = 0; a < r.length; a++) r[a].hid = o.substr(6);
                return void m.getHlightById(r[0].hid, function (e) {
                    for (var t = 0; t < r.length; t++) r[t].color = e.color;
                    s()
                })
            }
            s()
        }

        function s() {
            h.showPopup(r, function (e) {
                p.reset()
            })
        }
    }, f.google = function () {
        if (config.googleLookup) {
            var e = p.getSelectedText();
            if (e) try {
                var t = "http://www.google.com/custom?q=" + e;
                return void u.externalLink(t, {secure: !0})
            } catch (e) {
            }
        }
    }, f.wikipedia = function () {
        if (config.wikipediaLookup) {
            var e = p.getSelectedText();
            if (e) try {
                var t = "https://" + (config.wikipediaLang ? config.wikipediaLang : "en") + ".wikipedia.org/wiki/" + e;
                u.externalLink(t, {secure: !0})
            } catch (e) {
            }
        }
    }, f.backClicked = function () {
        p.reset()
    }
}]), app.controller("SelectionOptionsCtrl", ["$scope", "$http", "stg", "$ionicScrollDelegate", "$ionicPopup", "$timeout", "selection", function (e, t, n, r, i, o, a) {
    e.init = function () {
    }, e.expand = function () {
        a.expand()
    }, e.extendRight = function () {
        a.extendRight()
    }, e.extendLeft = function () {
        a.extendLeft()
    }
}]), app.controller("TabMenuCtrl", ["$scope", "cache", "modals", "nav", "settings", "book", "notes", "$rootScope", "$ionicSideMenuDelegate", "library", "$stateParams", "$location", "$sce", "$ionicScrollDelegate", "chapters", "virt", "translit", "$ionicModal", "hlights", "$timeout", "$filter", "stg", "crdv", "selection", function (t, e, n, r, i, o, a, c, s, l, d, u, h, f, p, g, m, v, b, y, w, k, x, C) {
    t.init = function () {
        t.$watch(function () {
            return s.isOpenRight()
        }, function (e) {
            e || y(function () {
                t.setSideMenuMode("bookSettings")
            }, 100)
        })
    }, t.chaptersClicked = function () {
        p.displayChapters()
    }, t.mediaClicked = function () {
        if (k.data.settings.rtl) {
            if (s.isOpenLeft() && "media" != t.sideMenuMode) return s.toggleLeft(), void y(t.mediaClicked, 300)
        } else if (s.isOpenRight() && "media" != t.sideMenuMode) return s.toggleRight(), void y(t.mediaClicked, 300);
        native && x.vibrate(), t.setSideMenuMode("media"), mobile && r.resize(), k.data.settings.rtl ? s.toggleLeft() : s.toggleRight()
    }, t.notebookClicked = function () {
        c.widescreen ? t.chaptersClicked() : (native && x.vibrate(), a.updateNotebookArray({}, function () {
            overflowScroll || r.resize(), n.show({
                mode: "notebook",
                dynamic: !0,
                scope: t,
                animation: "slide-in-up",
                cb: function () {
                    overflowScroll ? document.getElementById("notebookContent").scrollTop = 0 : f.$getByHandle("notebookScroll").scrollTop()
                }
            })
        }))
    }, t.pdfClicked = function () {
        p.convertPDF()
    }, t.printClicked = function () {
        p.print()
    }, t.settingsClicked = function () {
        if (k.data.settings.rtl) {
            if (s.isOpenLeft() && "bookSettings" != t.sideMenuMode) return s.toggleLeft(), void y(t.settingsClicked, 300)
        } else if (s.isOpenRight() && "bookSettings" != t.sideMenuMode) return s.toggleRight(), void y(t.settingsClicked, 300);
        native && x.vibrate(), t.setSideMenuMode("bookSettings"), mobile && r.resize(), k.data.settings.rtl ? s.toggleLeft() : s.toggleRight()
    }, t.searchClicked = function (e) {
        native && x.vibrate(), mobile && r.resize(), n.show({
            mode: "search",
            dynamic: !0,
            animation: "slide-in-up",
            scope: t,
            cb: function () {
                t.searchContent.notEmpty || y(function () {
                    x.showKeyboard()
                }, 200), e && e()
            }
        })
    }, t.settingsClose = function () {
        n.hide(), k.writeSlot("settings" + k.getBookId(!0), t.data.settings)
    };
    var S = [];
    t.customTabClicked = function (e, t) {
        var n = document.createElement("div");
        if (e.relToRoot = !0, "audio" == e.type) {
            var r, i = ph.join(bookPath, e.audio);
            e.id || (e.id = Math.round(1e4 * Math.random()));
            for (var o = 0; o < S.length; o++) if (S[o].getAttribute("id") == "audio-" + e.id && !(r = S[o]).paused) return r.pause(), void (r.src = "");
            if (!r) {
                (r = document.createElement("audio")).setAttribute("data-dontclose", !0), r.setAttribute("id", "audio-" + e.id), r.setAttribute("controls", "true"), r.setAttribute("autoplay", "true"), r.setAttribute("data-tap-disabled", "false");
                var a = document.createElement("source");
                a.src = i, r.appendChild(a), r.appendChild(document.createTextNode("Your browser does not support the audio element")), r.className = "ki-noHighlight", r.oncanplay = function () {
                    kInteractive.tinCan({verb: "played", activity: "Audio: " + i})
                }
            }
            if (r.setAttribute("src", i), r.play(), S.push(r), kInteractive.scorm) {
                var s = {};
                s.id = kInteractive.getScormId(e.title, i), s.description = "Played audio link: " + i, s.type = "other", s.learnerResponses = "Played", s.objective = e.options ? e.options.objective : null, s.timestamp = new Date, kInteractive.scorm.setInteractions([s])
            }
            kInteractive.events && kInteractive.events.add({action: "audioPlayed", param: i, elem: r})
        } else {
            kInteractive.writeData(n, e);
            var l = e.url;
            if (e.hash && (l += e.hash), n.className = "kInteractive link", !l) return kInteractive.action(n, t), void t.stopPropagation();
            n.setAttribute("href", l), e.target && "_blank" == e.target.toLowerCase() && n.setAttribute("target", "_BLANK"), l.match(/http[s]?:/g) ? c.renderScope.externalLink(n) : 0 == l.indexOf("/") ? window.open(l) : 0 == l.indexOf("mailto:") ? window.location.href = l : (0 != l.indexOf("#") && (l = ph.join(k.data.book.chapter.url, l)), p.applyChapterStateFromURL(l))
        }
    }
}]), app.controller("TextSizeCtrl", ["$scope", "$location", "cssParser", "stg", "settings", "markers", "$injector", function (t, e, n, r, i, o, a) {
    function s() {
        "rfl" == r.data.book.chapter.layout && ("double" != r.data.book.chapter.view && r.data.settings.pageScroll || a.get("chapters").regenerateSpreads(null, function () {
        }))
    }

    t.backClicked = function () {
        t.applyHeader("default")
    }, t.plus = function () {
        var e = i.getTextSize();
        30 < e || (e = Math.round(10 * (e + .1)) / 10, t.data.settings.textSize = e + "em", i.updateTextSize(), i.writeTextSize(), s())
    }, t.minus = function () {
        var e = i.getTextSize();
        e <= .2 || (e = Math.round(10 * (e - .1)) / 10, t.data.settings.textSize = e + "em", i.updateTextSize(), i.writeTextSize(), s())
    }
}]), app.controller("ThumbCtrl", ["$scope", "$filter", "$rootScope", "np", "$element", "stg", "$ionicModal", "modals", "chapters", "backend", "book", "$location", "$timeout", "$ionicLoading", "$ionicPopup", "crdv", function (n, e, t, r, i, o, a, s, l, c, d, u, h, f, p, g) {
    n.imgLoading = !0, n.init = function () {
        if (n.book.coverImg = d.getCoverImgPath(n.book), chromeApp) if (o.data.chromeAssets[n.book.coverImg]) n.book.coverImg = o.data.chromeAssets[n.book.coverImg]; else {
            var t = n.book.coverImg;
            delete n.book.coverImg, getImgDataSrc(t, function (e) {
                n.book.coverImg = e, o.data.chromeAssets[t] = e, n.$apply()
            })
        }
    }, n.coverLoaded = function () {
        n.imgLoading = !1
    }
}]);
log = kLog;
app.directive("iframeOnload", [function () {
    return {
        scope: !1, link: function (e, t, n) {
            t.on("load", function () {
                return e.modal.siteOptions.loaded()
            })
        }
    }
}]), app.directive("containerScroll", ["$timeout", function (o) {
    return {
        scope: !1, link: function (e, t, n) {
            var r = Math.round(99999 * Math.random());
            addClass(t[0], "containerMobileScroll containerScroll" + r), function n() {
                o(function () {
                    var t = document.getElementsByClassName("containerScroll" + r);

                    function e(e) {
                        t[0].getElementsByClassName("kbContent");
                        e.touches && 1 < e.touches.length || e.stopPropagation()
                    }

                    t.length ? t[0].addEventListener("touchstart", e) : ++i < 50 && n()
                }, 40)
            }();
            var i = 0
        }
    }
}]), app.directive("enterWithoutShift", function () {
    return function (t, e, n) {
        e.bind("keydown keypress", function (e) {
            e.shiftKey || 13 === e.which && (t.$apply(function () {
                t.$eval(n.enterWithoutShift)
            }), e.preventDefault())
        })
    }
}), app.directive("enterWithCtrl", function () {
    return function (t, e, n) {
        e.bind("keydown keypress", function (e) {
            e.ctrlKey && 13 === e.which && (t.$apply(function () {
                t.$eval(n.enterWithCtrl)
            }), e.preventDefault())
        })
    }
}), app.directive("searchheader", ["$timeout", "$parse", function (o, a) {
    return {
        restrict: "E",
        replace: !1,
        scope: {
            obj: "=obj",
            prop: "=prop",
            kotobeeGradient: "=kotobeeGradient",
            onValue: "=onValue",
            offValue: "=offValue",
            noCancel: "=noCancel",
            searchKeyOb: "=searchKeyOb",
            onsearch: "&"
        },
        templateUrl: kTemplate("headers/headerSearch.html"),
        link: function (n, r, i) {
            n.$watch("obj[prop]", function (e, t) {
                e === a(i.onValue)(n) && o(function () {
                    r[0].getElementsByTagName("input")[0].focus()
                })
            }), n.hide = function () {
                n.obj[n.prop] = n.offValue
            }
        }
    }
}]), app.directive("ngEnter", function () {
    return function (t, e, n) {
        e.bind("keydown keypress", function (e) {
            13 === e.which && (t.$apply(function () {
                t.$eval(n.ngEnter)
            }), e.preventDefault())
        })
    }
}), app.directive("nextchapterscroll", function () {
    return {restrict: "E", templateUrl: kTemplate("components/nextChapterScroll.html")}
}), app.directive("autofocusme", ["$timeout", function (r) {
    return {
        link: function (e, t, n) {
            r(function () {
                t[0].focus()
            }, 350)
        }
    }
}]), app.directive("readerheader", function () {
    return {restrict: "E", templateUrl: kTemplate("headers/readerHeader.html"), scope: !1}
}), app.directive("headerdefault", function () {
    return {restrict: "E", templateUrl: kTemplate("headers/headerDefault.html"), scope: !1}
}), app.directive("headerselection", function () {
    return {restrict: "E", templateUrl: kTemplate("headers/headerSelection.html"), scope: !1}
}), app.directive("headersearchitems", function () {
    return {restrict: "E", templateUrl: kTemplate("headers/headerSearchItems.html"), scope: !1}
}), app.directive("headertextsize", function () {
    return {restrict: "E", templateUrl: kTemplate("headers/headerTextSize.html"), scope: !1}
}), app.directive("mouseEvents", ["$ionicGesture", "settings", "nav", "stg", "$ionicScrollDelegate", function (e, t, r, n, i) {
    return {
        restrict: "A", link: function (e, t, n) {
            r.init(t)
        }
    }
}]), app.directive("vanillaScroll", function () {
    return {
        restrict: "A", link: function (e, t, n) {
            t[0].addEventListener("scroll", function () {
                e.scroll(this)
            })
        }
    }
}), app.directive("selectOptions", function () {
    return {restrict: "E", templateUrl: kTemplate("headers/selectOptions.html")}
}), app.directive("selectionOptions", function () {
    return {restrict: "E", templateUrl: kTemplate("components/selectionOptions.html")}
}), app.directive("tabMenu", function () {
    return {restrict: "E", replace: !0, templateUrl: kTemplate("panels/tabMenu.html")}
}), app.directive("media", function () {
    return {restrict: "E", replace: !0, templateUrl: kTemplate("panels/media.html"), scope: !1}
}), app.directive("noteitem", function () {
    return {restrict: "E", templateUrl: kTemplate("components/noteItem.html")}
}), app.directive("bookmarkitem", function () {
    return {restrict: "E", templateUrl: kTemplate("components/bookmarkItem.html")}
}), app.directive("hlightitem", function () {
    return {restrict: "E", templateUrl: kTemplate("components/hlightItem.html")}
}), app.directive("bookThumb", function () {
    return {restrict: "E", replace: !0, templateUrl: kTemplate("panels/bookThumb.html")}
}), app.directive("thumbnail", function () {
    return {
        restrict: "A", link: function (e, t, n) {
            t.attr("style", "background-size:cover,width:50px,height:50px")
        }
    }
}), app.directive("onimgload", function () {
    return {
        restrict: "A", link: function (t, e, n) {
            e.bind("load", function (e) {
                t[n.onimgload](), t.$apply()
            })
        }
    }
}), app.directive("showafterimageload", function () {
    return {
        restrict: "A", link: function (e, t, n) {
            t.bind("load", function (e) {
                e.currentTarget.style.opacity = 1, autoprefixTransform(e.currentTarget, "translate(-50%, -50%) scale(1)")
            })
        }
    }
}), app.directive("headerShrink", ["autohide", function (r) {
    return {
        restrict: "A", link: function (e, t, n) {
            r.setup(e, t, n)
        }
    }
}]), app.directive("categoryList", ["autohide", function (e) {
    return {
        restrict: "E",
        templateUrl: kTemplate("components/categoryList.html"),
        scope: {
            rtl: "=rtl",
            list: "=list",
            parent: "=parent",
            backlist: "=backlist",
            odd: "=odd",
            level: "=level",
            categoryClicked: "=clicked",
            categoryBackClicked: "=backClicked"
        }
    }
}]), app.directive("sdk", function () {
    return {restrict: "E", templateUrl: mobile ? "" : "templates/web/panels/sdk.html"}
}), app.directive("sdkProfileForm", function () {
    return {
        restrict: "E",
        templateUrl: kTemplate("panels/sdkProfileForm.html"),
        scope: {profile: "=profile", save: "=save", cancel: "=cancel"}
    }
}), app.filter("bookSetup", ["$rootScope", "stg", "selection", "media", "chapters", "cache", "$ionicScrollDelegate", function (c, d, i, u, h, o, e) {
    return function () {
        var e = document.getElementById("chaptersContent"), l = document.getElementById("epubContainer");

        function t(e) {
            e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation()
        }

        o.setOb("epubContainer", l), o.setOb("chaptersContent", e), e.addEventListener("contextmenu", function (e) {
            t(e)
        }), e.addEventListener("mousedown", function (e) {
            if (2 === e.which) return t(e), !1
        }), e.addEventListener("click", function (e) {
            if (2 === e.which) return t(e), !1
        }), document.getElementById("chapters").addEventListener("click", function (e) {
            var t = e.target;
            if ("a" == t.nodeName.toLowerCase()) {
                if (!r(t)) return;
                var n = t.getAttribute("href");
                if (n) {
                    if (n.match(/http[s]?:/g)) return;
                    if (0 == n.indexOf("/")) return;
                    c.renderScope.chapterLink(t)
                } else c.renderScope.chapterLink(t)
            } else if ("i" == t.nodeName.toLowerCase()) {
                if (!r(t)) return;
                if (0 < t.parentElement.getElementsByTagName("ol").length) t.offsetHeight, t.parentElement.classList.toggle("expanded")
            }

            function r(e) {
                for (var t = e.parentNode; t && t != document.body;) {
                    if (hasClass(t, "menu") && (hasClass(t, "menu-left") || hasClass(t, "menu-right"))) return !0;
                    t = t.parentNode
                }
            }
        });
        var n = document.getElementById("chapters");

        function r(e) {
            if (hasParentWithId(e.target, "epubContainer", 99)) {
                i.active() && i.reset();
                var t = e.target;
                if ("sections" != t.nodeName.toLowerCase() && !hasClass(t, "k-section") && "video" != t.nodeName.toLowerCase() && "audio" != t.nodeName.toLowerCase()) {
                    if (t.hasAttribute("contenteditable")) return e.stopPropagation(), void t.focus();
                    for (var n = t.childNodes.length; n--;) if ("#text" == t.childNodes[n].nodeName && "" != t.childNodes[n].nodeValue.replace(/\s+/g, " ").trim()) return void i.elementDown(t, e)
                }
            }
        }

        n.addEventListener("touchstart", r), n.addEventListener("mousedown", r), n.addEventListener("keyup", function (e) {
            if (hasParentWithId(e.target, "epubContainer", 99)) {
                var t = e.target;
                t && hasClass(t, "ki-textfield") && kInteractive.events.add({
                    action: "answerClicked",
                    disableRemote: !0,
                    param: null,
                    elem: t
                })
            }
        }), n.addEventListener("dragend", function (e) {
            if (hasParentWithId(e.target, "epubContainer", 99)) {
                var t = e.target;
                t && hasClass(t, "ki-draggable") && kInteractive.events.add({
                    action: "answerClicked",
                    disableRemote: !0,
                    param: null,
                    elem: t
                })
            }
        }), n.addEventListener("click", function (e) {
            if (hasParentWithId(e.target, "epubContainer", 99)) {
                var t = e.target;
                if (t) {
                    for (var n = t; n && n != l;) {
                        if ("a" == n.nodeName.toLowerCase()) {
                            if (hasClass(n, "ki-btn")) kInteractive.action(n, e); else {
                                var r = n.getAttribute("href");
                                if (!r) return kInteractive.action(n, e), void e.stopPropagation();
                                r.match(/http[s]?:/g) ? c.renderScope.externalLink(n) : 0 == r.indexOf("/") ? window.open(r) : 0 == r.indexOf("mailto:") ? window.location.href = r : (0 != r.indexOf("#") && (r = ph.join(d.data.book.chapter.url, r)), h.applyChapterStateFromURL(r))
                            }
                            return void e.stopPropagation()
                        }
                        if ("input" == n.nodeName.toLowerCase() && "submit" != n.type) return hasClass(n, "ki-inputbox") && kInteractive.events.add({
                            action: "answerClicked",
                            disableRemote: !0,
                            param: null,
                            elem: t
                        }), void e.stopPropagation();
                        n = n.parentNode
                    }
                    if ("video" != t.nodeName.toLowerCase() && "audio" != t.nodeName.toLowerCase()) {
                        if ("img" == t.nodeName.toLowerCase()) {
                            if (hasClass(t, "kInteractive") && "none" != kInteractive.readData(t).behavior) return kInteractive.action(t, e), void e.stopPropagation();
                            var i = t.parentNode;
                            if (hasClass(i, "kInteractive")) {
                                if (hasClass(i, "widget")) return kInteractive.action(t, e), void e.stopPropagation();
                                if (hasClass(i, "questions")) return kInteractive.action(t, e), void e.stopPropagation()
                            }
                            var o = !0, a = kInteractive.readData(t);
                            if (a && a.popup || (o = !1), t.hasAttribute("static") && (o = !1), t.hasAttribute("data-static") && (o = !1), o) {
                                var s = {};
                                return s.thumbnail = s.src = cleanURL(a.path ? ph.join(d.data.book.chapter.absoluteURL, a.path) : t.getAttribute("src")), s.large = "large" == a.popupSize, s.title = t.getAttribute("alt") ? t.getAttribute("alt") : ph.basename(s.thumbnail), s.ext = ph.getExtension(s.thumbnail), s.type = "image", u.show(s), void e.stopPropagation()
                            }
                        }
                        return hasClass(t, "ki-btn") ? (kInteractive.action(t, e), void e.stopPropagation()) : hasClass(t, "kInteractive") ? (kInteractive.action(t, e), void e.stopPropagation()) : t.hasAttribute("contenteditable") ? (t.focus(), void e.stopPropagation()) : void ("input" != t.nodeName.toLowerCase() || e.stopPropagation())
                    }
                }
            }
        })
    }
}]), app.filter("chapterHtml", ["$injector", "events", "translit", function (e, t, n) {
    return function (e) {
        if (e) {
            for (var t = e.getElementsByTagName("li"), n = t.length; n--;) {
                addClass(t[n], "item");
                var r = t[n].getElementsByTagName("ol").length ? " parent" : "";
                t[n].innerHTML = '<i class="icon' + r + '"> </i> ' + t[n].innerHTML
            }
            e.innerHTML = e.innerHTML.replace(/(<a .*?)(>)/g, '$1 onclick="return false;" $2')
        }
    }
}]), app.filter("contentHtml", ["$rootScope", "$filter", "selection", "stg", function (e, t, n, L) {
    return function (e, t) {
        var n = document.createElement("div");
        n.setAttribute("id", "epubContent"), t = t || L.data.book.chapter.absoluteURL;
        for (var r = e.getElementsByTagName("body")[0], i = [], o = 0; o < r.childNodes.length; o++) 3 == r.childNodes[o].nodeType && i.push(r.childNodes[o]);
        for (o = 0; o < i.length; o++) {
            var a = i[o], s = document.createElement("span");
            s.textContent = a.textContent, a.nextSibling ? r.insertBefore(s, a.nextSibling) : r.appendChild(s), r.removeChild(a)
        }
        kInteractive && kInteractive.preRender(e, {chapterUrl: t});
        var l = getElementsByAttribute(e, "*", "src");
        for (o = 0; o < l.length; o++) {
            if (shouldParse(p = l[o].getAttribute("src")) && l[o].setAttribute("src", ph.join(t, p)), "img" == l[o].nodeName.toLowerCase() && (hasClass(l[o], "kInteractive") || hasClass(l[o].parentNode, "kInteractive") || l[o].style.height || l[o].getAttribute("height") || (l[o].style.maxWidth = "100%"), chromeApp && l[o].getAttribute("src"))) {
                var c = l[o], d = c.getAttribute("src");
                if (isAbsoluteURLAndNotDataPath(d)) {
                    var u = c.getAttribute("chrome");
                    L.data.chromeAssets[d] ? c.setAttribute("src", L.data.chromeAssets[d]) : u && L.data.chromeAssets[u] ? c.setAttribute("src", L.data.chromeAssets[u]) : (u = Math.round(1e5 * Math.random()), c.setAttribute("src", ""), c.setAttribute("chrome", u), getImgDataSrc(d, function (t) {
                        setTimeout(function () {
                            L.data.chromeAssets[u] = t;
                            var e = getElementsByAttribute(document, "img", "chrome", u);
                            e.length && e[0].setAttribute("src", t)
                        }, 300)
                    }))
                }
            }
        }
        var h = getElementsByAttribute(e, "*", "poster");
        for (o = 0; o < h.length; o++) {
            shouldParse(p = h[o].getAttribute("poster")) && h[o].setAttribute("poster", ph.join(t, p))
        }
        var f = getElementsByAttribute(e, "image", "xlink:href");
        for (o = 0; o < f.length; o++) {
            var p;
            shouldParse(p = f[o].getAttribute("xlink:href")) && f[o].setAttribute("xlink:href", ph.join(t, p))
        }
        var g = getElementsByAttribute(e, "*", "style");
        for (o = 0; o < g.length; o++) {
            var m = g[o].getAttribute("style");
            -1 != m.toLowerCase().indexOf("url(") && (hasParent(g[o], "kInteractive", 5) || g[o].setAttribute("style", m.replace(/(.*?url\()(.+?)(\).*?)/g, v)))
        }

        function v() {
            var e = arguments[2];
            return 0 == e.indexOf('"') && (e = e.split('"')[1]), 0 == e.indexOf("'") && (e = e.split("'")[1]), 0 == e.indexOf("&quot;") && (e = e.split("&quot;")[1]), -1 != e.indexOf("http://") ? arguments[0] : -1 != e.indexOf("https://") ? arguments[0] : 0 == e.indexOf("data:") ? arguments[0] : (e = ph.join(t, e), arguments[1] + e + arguments[3])
        }

        var b = document.createElement("sections"), y = e.getElementsByTagName("body")[0];
        if (partitionEnabled) {
            for (var w = new Array, k = 0; ;) {
                var x = !0, C = !1, S = 0;
                w[k] = document.createElement("section"), w[k].setAttribute("sec", k), addClass(w[k], "k-section");
                for (o = y.childNodes.length; o--;) if (!y.childNodes[o].style || "absolute" != y.childNodes[o].style.position) {
                    if (!((S += (null != y.childNodes[o].textContent ? y.childNodes[o].textContent : y.childNodes[o].data).length) < 4e3 || x)) {
                        C = !0;
                        break
                    }
                    x = !1, w[k].insertBefore(y.childNodes[o], w[k].firstChild)
                }
                if (!C) break;
                k++
            }
            for (o = 0; o < w.length; o++) b.insertBefore(w[o], b.firstChild)
        } else {
            var A = document.createElement("section");
            A.setAttribute("sec", "0"), addClass(A, "k-section");
            for (o = y.childNodes.length; o--;) A.insertBefore(y.childNodes[o], A.firstChild);
            b.appendChild(A)
        }
        return y.appendChild(b), n.innerHTML = e.getElementsByTagName("body")[0].innerHTML, pauseVideoAndAudio(n), n
    }
}]), app.filter("contentJs", ["$rootScope", "cache", "cssParser", "$filter", "selection", "stg", "$q", "settings", "chapters", "bookmarks", "hlights", "notes", function (e, s, t, n, r, l, c, d, i, u, h, f) {
    return function (e) {
        var i, o = c.defer(), t = s.getOb("epubContent");

        function a() {
            function e() {
                if (t++, "#e7e3d9" == rgb2hex(window.getComputedStyle(s.getOb("epubContent")).getPropertyValue("background-color"))) {
                    clearInterval(r), removeClass(i, "hide");
                    for (var e = document.getElementsByTagName("style"), t = 0; t < e.length; t++) if (e[t].hasAttribute("kotobee")) {
                        var n = e[t].innerHTML;
                        n = n.replace(/[^}]*?{[^}]*?background-color:#e7e3d9 !important;.*?}/g, ""), e[t].innerHTML = n
                    }
                    d.initialize(), o.resolve({})
                }
            }

            removeClass(s.getOb("epubContent"), "bgInherit");
            var r = setInterval(e, 30);
            e()
        }

        return document.getElementById("epubMeta") ? (document.getElementById("epubMeta").innerHTML = "", i = document.getElementById("epubMeta")) : ((i = document.createElement("div")).setAttribute("id", "epubMeta"), i.className = "hide", t.parentNode.insertBefore(i, t.nextSibling)), s.setOb("epubMeta", i), r.newChapter(), e ? l.getBookmarks(function (r) {
            l.getNotes(function (n) {
                l.getHlights(function (e) {
                    for (var t = 0; t < r.length; t++) r[t].chapter == currentIndex && u.addIcon(r[t]);
                    for (t = 0; t < n.length; t++) n[t].chapter == currentIndex && f.addIcon(n[t]);
                    for (t = 0; t < e.length; t++) e[t].chapter == currentIndex && h.addHlight(e[t]);
                    a()
                })
            })
        }) : a(), o.promise
    }
}]), app.filter("contentVirt", ["stg", "bookmarks", "notes", "workers", "hlights", "$timeout", "$filter", "cache", "$ionicScrollDelegate", "$injector", function (C, S, A, L, N, I, e, E, t, T) {
    var B, O, P, M, _ = [];
    return function (e, t, c) {
        if (config.parseCachingVer) c && c(); else try {
            function n(e) {
                if (e) {
                    for (var t = _.length; t--;) if (_[t] == e) return;
                    var n = E.getOb("epubContent").className;
                    addClass(E.getOb("epubContent"), "reveal");
                    var r = e.offsetTop - E.getOb("epubContent").offsetTop;
                    0 != r && (e.style.marginTop = r + "px", _.push(e), E.getOb("epubContent").className = n)
                }
            }

            var d = [];

            function r(e, t) {
                (t = t || {}).id = Math.round(9999 * Math.random());
                t.cb;
                if (null == t.includeAnnotations && (t.includeAnnotations = !0), hasClass(e, "parsed")) return t.cb && t.cb(e), e;
                addClass(e, "parsed");
                var n = e.innerHTML;
                if (L.supported() && t.allowWorkers) {
                    var i = {};
                    return d.push({html: n, el: e, options: t}), 1 == d.length && function r() {
                        i.html = d[0].html;
                        i.WEBVIEW_SERVER_URL = window.WEBVIEW_SERVER_URL;
                        i.native = window.native;
                        i.mobile = window.mobile;
                        L.call("htmlParser", "parse", [i], function (e) {
                            var t = replaceHTML(d[0].el, e), n = d[0].options;
                            n.includeAnnotations && u(t), d.shift(), n.cb && n.cb(t), d.length && r()
                        })
                    }(), !0
                }
                var r, o = [];
                n.indexOf("<pre"), n.indexOf("<code"), n.indexOf("<script");
                o.push(/([< \/][^>]*?>)((\s*[^<\s]+\s+?)+)([^<\s]+\s*)(<)/g), r = /(>)([^<\n]*?[^<]+?)(<[^\/])/g;
                for (var a = 0; a < o.length; a++) {
                    var s = o[a];
                    n = n.replace(s, function (e, t) {
                        if (0 <= t.indexOf('class="parsed"')) return e;
                        if (0 == t.indexOf("<pre")) return e;
                        if (0 == t.indexOf("<code")) return e;
                        if (0 == t.indexOf("<script")) return e;
                        var n = "", r = arguments[2].split(" ");
                        "" == r[r.length - 1] && r.splice(-1, 1), r.push(arguments[4]);
                        for (var i = 0; i < r.length; i++) {
                            var o = i == r.length - 1 ? "" : " ";
                            n += "<span>" + r[i] + o + "</span>"
                        }
                        return t + n + "<"
                    })
                }
                r && (n = n.replace(r, function (e, t) {
                    return arguments[2].trim() ? t + ("<span>" + arguments[2] + "</span>") + arguments[3] : e
                })), n = n.replace(/(<a [\s\S]*?)(>)/g, '$1 onclick="return false;" $2'), native && mobile && (n = n.replace(/(<img[^>]*src=)"(.*?)"/g, function (e, t) {
                    return t + '"' + cleanURL(arguments[2]) + '"'
                }));
                var l = replaceHTML(e, n);
                return t.includeAnnotations && u(l), c && c(l), l
            }

            function u(e) {
                for (var o = 0, t = e; null != (t = t.previousSibling);) o++;
                var a = [currentIndex];
                a.push(T.get("chapters").getUnanchoredIndex(currentIndex)), C.data.currentRPageOb && a.push(C.data.currentRPageOb.index), I(function () {
                    C.getBookmarks(function (i) {
                        C.getNotes(function (r) {
                            C.getHlights(function (e) {
                                for (var t = 0; t < a.length; t++) {
                                    for (var n = 0; n < i.length; n++) i[n].chapter == a[t] && String(i[n].location).split(".")[1] == o && S.addIcon(i[n]);
                                    for (n = 0; n < r.length; n++) r[n].chapter == a[t] && String(r[n].location).split(".")[1] == o && A.addIcon(r[n]);
                                    for (n = 0; n < e.length; n++) e[n].chapter == a[t] && String(e[n].location).split(".")[1] == o && N.addHlight(e[n])
                                }
                            })
                        })
                    })
                }, 1e3)
            }

            if ("reset" == e) return B = O = null, P = !0, void (_ = []);
            var i = E.getOb("epubContent");
            if ("reveal" == e) return void addClass(i, "reveal");
            if ("undoReveal" == e) return void removeClass(i, "reveal");
            if ("parse" == e) return void r(t, {includeAnnotations: !1, allowWorkers: !0, source: "parse mode", cb: c});
            if ("parseAndAnnotations" == e) return void r(t, {allowWorkers: !0, source: "parseAndAnnotations mode"});
            var o, a, s, l = i.parentNode.parentNode,
                h = l.style.webkitTransform || l.style.mozTransform || l.style.transform,
                f = (o = null == e && null != t ? t : !overflowScroll || !config.overflowScroll && preview && mobile ? -Number(h.split(",")[1].slice(0, -2)) : E.getOb("epubContainer").scrollTop) < M ? "up" : "down",
                p = (M = o) + l.parentNode.offsetHeight, g = i.children;
            if (P) {
                for (var m = [], v = 0, b = 0; b < g.length; b++) {
                    for (var y = [], w = g[b], k = 0; k < w.childNodes.length; k++) y[k] = {}, w.childNodes[k].offsetTop + w.childNodes[k].offsetHeight < o - 200 ? y[k].add = ["cNone", "noMargin"] : w.childNodes[k].offsetTop > p + 200 ? y[k].add = ["cNone", "noMargin"] : (0 == v && (y[k].setMargin = !0, v = 1, a = k), y[k].remove = ["cNone", "noMargin"], y[k].setParse = !0, s = k);
                    for (k = 0; k < y.length; k++) y[k].setMargin && n(w.childNodes[k]), y[k].setParse && m.push([w.childNodes[k], {
                        source: "from clean",
                        allowWorkers: !0
                    }]), addRemoveClass(w.childNodes[k], y[k].add, y[k].remove);
                    for (k = 0; k < y.length; k++) ;
                    null != a && (B = w.childNodes[a]), null != s && (O = w.childNodes[s])
                }
                if (P = !1, m.length) for (k = 0; k < m.length; k++) {
                    var x = m[k];
                    k == m.length - 1 && (x[1].cb = c), r(x[0], x[1])
                } else c && c();
                return
            }
            if ("fxl" == C.data.book.chapter.layout) return;
            if (1 < g.length) return;
            if (1 == g[0].childNodes.length) return;
            w = g[0];
            if ("up" == f) {
                if (!(B.offsetTop + B.offsetHeight) < o - 0 && !(B.offsetTop > o - 200)) return;
                if (O == w.childNodes[0]) return
            } else if ("down" == f) {
                if (!(O.offsetTop > p + 0 || O.offsetTop + O.offsetHeight < p + 200)) return;
                if (B == w.childNodes[w.childNodes.length - 1]) return
            }
            B && (B.offsetTop + B.offsetHeight < o - 0 ? (addClass(B, "cNone"), addClass(B, "noMargin"), B.nextSibling && (removeClass(B = B.nextSibling, "noMargin"), n(B), B = r(B, {source: "topElem1"}))) : B.offsetTop > o - 200 && B.previousSibling && (addClass(B, "noMargin"), removeClass(B = B.previousSibling, "cNone"), removeClass(B, "noMargin"), n(B), B = r(B, {source: "topElem2"}))), O && (O.offsetTop > p + 0 ? (addClass(O, "cNone"), O.previousSibling && (removeClass(O = O.previousSibling, "cNone"), O = r(O, {source: "bottomElem1"}))) : O.offsetTop + O.offsetHeight < p + 200 && O.nextSibling && (removeClass(O = O.nextSibling, "cNone"), O = r(O, {source: "bottomElem2"})))
        } catch (e) {
        }
    }
}]), app.filter("js", ["$rootScope", "$q", "jsParser", function (e, l, c) {
    return function (e, t) {
        var n = l.defer();
        t = t || {};
        for (var r = [], i = e.getElementsByTagName("script"), o = 0; o < i.length; o++) if (i[o].getAttribute("src")) {
            var a = i[o].getAttribute("src");
            if (0 <= a.indexOf("/kotobeeInteractive.js")) continue;
            a.indexOf(":/"), r.push({mode: "url", val: a})
        } else r.push({mode: "code", val: i[o].innerHTML});
        var s = e.getElementsByTagName("body")[0];
        return s.getAttribute("onload") && r.push({
            mode: "code",
            val: s.getAttribute("onload")
        }), t.noJsParse ? n.resolve() : c.inject(r, function (e) {
            n.resolve(e)
        }), n.promise
    }
}]), app.filter("coverPath", ["stg", function (r) {
    return function (e, t) {
        var n = (config.kotobee.liburl ? config.kotobee.liburl : "") + "img/ui/defaultCover.png";
        return e ? isAbsoluteURLPath(e) ? e : e = cleanURL(e = t ? (config.kotobee.liburl ? config.kotobee.liburl : "../../") + "books/" + t + "/EPUB/" + e : ph.join(bookPath, r.data.packageURL, e)) : n
    }
}]), app.filter("categoryStyle", ["stg", function (e) {
    return function (e) {
        var t = "";
        isKotobeeHosted() && (t = publicRoot);
        var n = "";
        "image" != e.display && "imagetext" != e.display || !e.img || (n += "background-image:url(" + (t + "imgUser/" + e.img) + ");");
        return "image" == e.display && (n += "color:transparent;"), e.css && (n += e.css), n
    }
}]), app.filter("catImgPath", ["stg", function (e) {
    return function (e) {
        var t = (config.kotobee.liburl ? config.kotobee.liburl : "") + "imgUser/" + e;
        return config.kotobee.liburl + "/" + ph.join(bookPath, t)
    }
}]), app.filter("decodeHtmlEntities", function () {
    return function (e) {
        return decodeHTMLEntities(e)
    }
}), app.filter("nativeLinks", function () {
    return function (e) {
        var t = document.createElement("div");
        t.innerHTML = e;
        for (var n = t.getElementsByTagName("a"), r = 0; r < n.length; r++) {
            var i = n[r].getAttribute("href");
            n[r].setAttribute("onclick", "window.open('" + i + "', '_system');"), n[r].setAttribute("href", "#")
        }
        return t.innerHTML
    }
}), app.filter("moreDataExists", ["stg", function (r) {
    return function (e, t) {
        try {
            if (!r.currentLibrary) return !1;
            if ("categories" == t) return !1;
            if ("downloaded" == t) return !1;
            var n;
            if ("favorites" == t && (n = r.favorites), "all" == t && (n = r.currentLibrary.books), 0 == n.length) return !1
        } catch (e) {
            return !1
        }
        return e
    }
}]), app.filter("round", function () {
    return function (e) {
        return Math.round(e)
    }
}), app.filter("arrayEmpty", ["$filter", function (n) {
    return function (e) {
        if (!e) return !0;
        for (var t = 0; t < e.length; t++) if (Array.isArray(e[t])) {
            if (!n("arrayEmpty")(e[t])) return !1
        } else if (e[t]) return !1;
        return !0
    }
}]), app.filter("langFromId", ["stg", function (n) {
    return function (e) {
        for (var t = 0; t < n.data.languages.length; t++) if (n.data.languages[t].val == e) return n.data.languages[t].label;
        return e
    }
}]), app.filter("cleanurl", function () {
    return cleanURL
}), app.filter("unsafe", ["$sce", function (e) {
    return e.trustAsHtml
}]), app.filter("nl2br", function () {
    return function (e) {
        return e ? 0 <= e.indexOf("</") ? e : e.replace(/\n/g, "<br>") : ""
    }
}), app.filter("releasePlatform", function () {
    return function (e) {
        switch (e) {
            case"win32":
                return "Windows 32-bit";
            case"win64":
                return "Windows 64-bit";
            case"win":
                return "Windows";
            case"mac":
                return "Macintosh"
        }
    }
}), app.filter("filesizeLabel", function () {
    return function (e) {
        return e ? 1e6 < e ? Math.round(10 * e / 1e6) / 10 + " GB" : 1e3 < e ? Math.round(10 * e / 1e3) / 10 + " MB" : Math.round(10 * e) / 10 + " KB" : ""
    }
}), app.filter("styles", ["$rootScope", "$q", "cssParser", "$filter", "selection", "stg", function (e, u, h, t, n, r) {
    return function (e, t) {
        var n = u.defer();
        t = t || {};
        for (var r, i = [], o = e.getElementsByTagName("link"), a = 0; a < o.length; a++) if ("text/css" == o[a].getAttribute("type") && o[a].getAttribute("href").length) {
            var s = ph.join(t.path, o[a].getAttribute("href")), l = !1;
            if (isAbsoluteURLPath(o[a].getAttribute("href")) && (s = o[a].getAttribute("href"), l = !0), c(s)) continue;
            s == bookPath + "EPUB/css/base.css" && (r = !0), i.push({type: "path", val: s, dontCache: l})
        }

        function c(e) {
            if (0 <= e.indexOf("/css/kotobeeInteractive.css")) return !0
        }

        r || config.dontForceBaseCss || i.unshift({type: "path", val: bookPath + "EPUB/css/base.css", dontCache: !1});
        var d = e.getElementsByTagName("style");
        for (a = 0; a < d.length; a++) i.push({type: "local", val: d[a].innerHTML, root: t.path});
        return t.noCssParse ? n.resolve() : h.inject(i, t, function (e) {
            n.resolve(e)
        }), n.promise
    }
}]), app.filter("t", ["translit", function (n) {
    return function (e, t) {
        return n.getLang() ? n.get(e, Array.prototype.slice.call(arguments, 2)) : ""
    }
}]), app.factory("auth", ["$q", "backend", "modals", "$location", "sync", "$ionicHistory", "$injector", "design", "status", "stg", "book", "view", "chapters", "$compile", "translit", "login", function (t, i, o, n, r, a, e, s, l, c, d, u, h, f, p, g) {
    var m = {};

    function v() {
        if (config.kotobee && config.kotobee.sso) if (config.kotobee.sso.length) {
            if (Array.isArray(config.kotobee.sso)) {
                var n = {};
                config.kotobee.sso.forEach(function (e) {
                    if (e.enabled) {
                        var t = Object.assign({}, e);
                        delete t.provider, t.params.clientsecret && delete t.params.clientsecret, t.params.pkce && delete t.params.pkce, t.params.version && delete t.params.version, n[e.provider] = t
                    }
                    native && "google" == e.provider && delete n[e.provider]
                }), Object.keys(n).length ? config.kotobee.sso = n : delete config.kotobee.sso
            }
        } else delete config.kotobee.sso
    }

    return m.authenticate = function () {
        var e = t.defer();
        return putTest("inside"), m.getPermissions(function (e) {
            u.generate();
            try {
                if ("book" == config.kotobee.mode && isKotobeeHosted()) if (config.kotobee.public) bookPath = publicRoot + "epub/"; else {
                    var t = publicRoot.split("/books/")[1].split("/")[0];
                    bookPath = "/books/" + t + "/EPUB/epub/"
                }
                if ("kotobee" == config.kotobee.hostType && (bookPath = config.kotobee.liburl + "books/" + config.kotobee.hostPath + "/EPUB/epub/"), (native || desktop) && e && i.cloudParam("offline") && "offline" == e.error) return void m.startup({tab: "downloads"})
            } catch (e) {
            }
            g.start()
        }), e.promise
    }, m.getPermissions = function (n) {
        "library" == config.kotobee.mode ? i.getUnauthLibrary(function (e) {
            if ("offline" != (e = e || {}).error) {
                if (e.cloud) for (var t in e.cloud) config.kotobee[t] = e.cloud[t];
                config.kotobee.permsLoaded = !0, config.kotobee.offline = e.offline, v(), n()
            } else n(e)
        }) : "book" == config.kotobee.mode ? config.kotobee.cloudid ? i.getPermissions(function (e) {
            for (var t in e) config.kotobee[t] = e[t];
            config.kotobee.permsLoaded = !0, v(), n()
        }) : (config.kotobee.public = !0, v(), n()) : e.get("app").getPermissions(n)
    }, m.startup = function (e) {
        if (e = e || {}, native && function () {
            if ({}.watermarkPlaceholder) {
                var e = '<div id="watermark"><span>' + p.get("createdUsing") + '</span><a href="#" class="inlineBlock" style="vertical-align: sub" onclick="window.open(\'https://www.kotobee.com\', \'_system\');return false;"><img width="163" src="' + rootDir + 'img/ui/authorLogo.png"></a></div>',
                    t = document.createElement("div");
                t.innerHTML = e, document.body.insertBefore(t, document.getElementById("html5Fallback")), setTimeout(function () {
                    addClass(document.getElementById("watermark"), "show")
                }, 4e3)
            }
        }(), "library" == config.kotobee.mode) {
            m.authenticated = !0;
            var t = "";
            e.tab && (t = "/tab/" + e.tab);
            try {
                n.path("/library" + t)
            } catch (e) {
            }
            s.applyRichTextLibrary(), a.clearHistory()
        } else "book" == config.kotobee.mode ? d.loadBook().then(function () {
            s.applyRichTextLibrary(), m.authenticated = !0, n.path("/reader"), a.clearHistory(), r.initialize(), setTimeout(function () {
                h.initialize()
            }, 1e3)
        }) : "app" == config.kotobee.mode && (m.authenticated = !0, n.path("/app"), a.clearHistory());
        kotobee && kotobee.dispatchEvent("ready")
    }, m.redeemCode = function (e, t) {
        var n = clone(e), r = {
            model: {}, submit: function () {
                o.hide(), n.code = r.model.code, n.code && (l.update(p.get("pleaseWait"), null, {dots: !0}), i.redeemCode(n, function (e) {
                    e && !e.error ? (l.update(), t()) : l.showAndHide(p.get(e ? e.error : "unexpectedError"), 3e3)
                }))
            }
        };
        o.show({mode: "redeemCode", redeemCodeInfo: r})
    }, m
}]), app.factory("autohide", ["$document", "$injector", "cache", "selection", "chapters", "library", "stg", function (o, a, e, n, s, t, i) {
    var l, c, d, u, h, f, p, g, r = {}, m = !0;

    function v() {
        var e = {}, t = document.getElementById("libraryThumbs");
        if (t && "none" != getComputedStyle(t).display) e.mode = "library", e.header = o[0].getElementById("libraryHeader"), e.footer = o[0].getElementById("libraryFooter"), e.footer && (e.footerHeight = e.footer.offsetHeight), e.scope = angular.element(t).scope(), e.libTabs = o[0].getElementById("libraryTabs"), e.libTabs && (e.libTabHeight = e.libTabs.offsetHeight); else {
            e.mode = "reader", e.header = o[0].getElementById("readerHeader"), e.scope = angular.element(e.header).scope(), e.tabMenu = o[0].getElementById("tabMenu"), e.tabMenuHeight = e.tabMenu.offsetHeight;
            var n = o[0].body.getElementsByClassName("navControls");
            if (n.length) {
                var r = (n = n[n.length - 1]).getElementsByClassName("next");
                r.length && (e.navNext = r[0]);
                var i = n.getElementsByClassName("prev");
                i.length && (e.navPrev = i[0]), e.navWidth = e.navNext.offsetWidth
            }
        }
        return e.headerHeight = e.header.offsetHeight, e
    }

    function b(e) {
        if (e.target) {
            if (function (e) {
                var t = e.nodeName.toLowerCase();
                if ("a" == t) return !0;
                if ("video" == t) return !0;
                if ("audio" == t) return !0;
                if (hasClass(e, "kInteractive")) return !0;
                if (hasParent(e, "kInteractive")) return !0
            }(e.target)) return;
            var t = e.target.nodeName.toLowerCase();
            if ("button" == t) return;
            if ("a" == t) return;
            if ("input" == t) return;
            if (hasParentNode(e.target, "button")) return;
            if (hasParentNode(e.target, "a")) return;
            if (hasParentNode(e.target, "input")) return
        }
        c = !0, n.active() ? n.reset() : "hidden" == l ? S("buttons") : "buttons" == l ? S("hidden") : "midway" == l && S("buttons")
    }

    function y(n) {
        f = null;
        var e = v();
        if ("reader" == e.mode) "neverShow" == config.autohideReaderMode && p && (new Date).getTime() - g < 800 && Math.abs(n.clientX - p.x) < 50 && o("tab", "hidden"); else if ("library" == e.mode) {
            if ("showOnScroll" == config.autohideLibMode) {
                var t = document.getElementsByClassName("bookThumbsContainer")[0],
                    r = document.getElementById("libraryThumbs"), i = Number(getElemPadding(r).top);
                i = i || 0, t.offsetHeight < r.offsetHeight - i && S("buttons")
            }
            "neverShow" == config.autohideLibMode && p && (new Date).getTime() - g < 800 && Math.abs(n.clientX - p.x) < 50 && o("header", "hidden")
        }

        function o(e, t) {
            Math.abs(n.clientY - p.y) < 15 || (n.clientY < p.y ? p.y > .85 * document.body.clientHeight && S(e) : n.clientY > .85 * document.body.clientHeight && S(t), n.clientY > p.y ? p.y < .15 * document.body.clientHeight && S(e) : n.clientY < .15 * document.body.clientHeight && S(t))
        }

        p = null
    }

    function w(e) {
        p = {x: e.clientX, y: e.clientY}, g = (new Date).getTime()
    }

    function k(e) {
        var t = 40;
        if (p) {
            var n = f = f || v();
            if ("library" == n.mode && (t = 5), !("reader" == n.mode && "showOnTap" == config.autohideReaderMode || "library" == n.mode && "showOnTap" == config.autohideLibMode)) {
                if (h = h || Math.max(t, e.detail.scrollTop), c) return c = !1, h = Math.max(t, e.detail.scrollTop), void ("hidden" == l && (h -= n.headerHeight, u = n.headerHeight));
                if ("reader" == n.mode) {
                    if (m) return;
                    if ("default" != n.scope.header.mode) return;
                    if (a.get("nav").transforming) return
                } else if ("library" == n.mode) {
                    if (n.scope.subMode) return;
                    if (n.scope.searchOb.enabled) return
                }
                d = n.headerHeight - (n.headerHeight - (e.detail.scrollTop - h)), l = d >= n.headerHeight ? (h = e.detail.scrollTop - n.headerHeight, d = n.headerHeight, "hidden") : d < 0 ? (h = Math.max(t, e.detail.scrollTop), d = 0, "buttons") : "midway", null == u && (u = 0);
                var r = removeClass;
                if (u == n.headerHeight) {
                    if (d == n.headerHeight) return;
                    if (14 < d) return;
                    h = Math.max(t, e.detail.scrollTop), d = 0, r = addClass
                }
                d + u != 0 && (u = d, x(r, {dims: n}))
            }
        }
    }

    function x(e, t) {
        var n = (t = t || {}).dims;
        if (n = n || v(), e(n.header, "ease"), C(n.header, d, n.headerHeight, "up", !!ios), "reader" == n.mode) {
            if (t.headerOnly) return;
            if (t.tabOnly) return void r();
            e(n.navNext, "ease"), e(n.navPrev, "ease"), C(n.navNext, d * n.navWidth / n.headerHeight, n.navWidth, i.data.settings.rtl ? "left" : "right"), C(n.navPrev, d * n.navWidth / n.headerHeight, n.navWidth, i.data.settings.rtl ? "right" : "left"), r()
        } else if ("library" == n.mode) {
            if (n.libTabs || (n = v()), n.libTabs && (e(n.libTabs, "ease"), C(n.libTabs, d, n.libTabHeight, "up")), t.headerOnly) return;
            n.footer && (e(n.footer, "ease"), C(n.footer, d * n.footerHeight / n.headerHeight, n.footerHeight, "down", !!ios))
        }

        function r() {
            e(n.tabMenu, "ease"), C(n.tabMenu, d * n.tabMenuHeight / n.headerHeight, n.tabMenuHeight, "down", !!ios)
        }
    }

    function C(r, i, e, o, a) {
        var s = 1 - (i = Math.min(e, i)) / 44;
        ionic.requestAnimationFrame(function () {
            var e;
            if (r && ("up" == o ? e = "translate3d(0, -" + i + "px, 0)" : "down" == o ? e = "translate3d(0, " + i + "px, 0)" : "right" == o ? e = "translate3d(" + i + "px, 0, 0)" : "left" == o && (e = "translate3d(-" + i + "px, 0, 0)"), r.style[ionic.CSS.TRANSFORM] = e, a)) for (var t = 0, n = r.children.length; t < n; t++) r.children[t].style.opacity = s
        })
    }

    function S(e) {
        var t = v();
        "buttons" == e ? (u = d = 0, x(addClass)) : "header" == e ? (u = d = 0, x(addClass, {headerOnly: !0})) : "tab" == e ? (u = d = 0, x(addClass, {tabOnly: !0})) : "hidden" == e && (u = d = t.headerHeight, x(addClass, {dims: t})), l = e
    }

    return r.initialize = function () {
        mobile && (document.body.addEventListener(mobile && !mobileDebug ? "touchend" : "mouseup", y), document.body.addEventListener(mobile && !mobileDebug ? "touchstart" : "mousedown", w), config.autohideHeader && !config.autohideReaderMode && (config.autohideReaderMode = "showOnScroll"), config.autohideHeader || (config.autohideReaderMode = "alwaysShow"), config.autohideLibHeader && !config.autohideLibMode && (config.autohideLibMode = "showOnScroll"), config.autohideLibHeader || (config.autohideLibMode = "alwaysShow"))
    }, r.setup = function (e, t, n) {
        if (l = "buttons", "reader" == n.headerShrink) {
            if ("alwaysShow" == config.autohideReaderMode) return;
            if ("neverShow" == config.autohideReaderMode) return S("hidden"), addClass(document.getElementById("chapters"), "fillSpace"), e.$watch("header.mode", function (e, t) {
                e != t && S("selection" == e || "searchItems" == e || "textSize" == e ? "header" : "hidden")
            }), void addClass(document.getElementById("tabMenu"), "transparent");
            "showOnTap" == config.autohideReaderMode && (S("hidden"), addClass(document.getElementById("chapters"), "transparentBtns"), addClass(document.getElementById("chapters"), "fillSpace"))
        }
        if ("library" == n.headerShrink) {
            if ("alwaysShow" == config.autohideLibMode) return;
            if ("neverShow" == config.autohideLibMode) return;
            config.autohideLibMode
        }
        var r, i;
        (a.get("nav").addListener("tap", b), "reader" == n.headerShrink) ? (e.$watch("data.settings.textSize", function (e, t) {
            !r && (r = !0, "showOnTap" == config.autohideReaderMode) || S("buttons")
        }), e.$watch("header.mode", function (e, t) {
            !i && (i = !0, "showOnTap" == config.autohideReaderMode) || S("buttons")
        }), s.addListener(function (e) {
            "newChapter" == e && setTimeout(function () {
                m = !1
            }, 1500)
        }), "showOnTap" == config.autohideReaderMode && S("hidden")) : "library" == n.headerShrink && (e.$watch("subMode", function (e, t) {
            S("buttons")
        }), e.$watch("searchOb.enabled", function (e, t) {
            S("buttons")
        }));
        t.bind("scroll", k)
    }, r.hideBtns = function () {
        S("hidden")
    }, r.showBtns = function () {
        S("buttons")
    }, r.libInitialized = function () {
        mobile && setTimeout(function () {
            "neverShow" == config.autohideLibMode && S("hidden"), "showOnTap" == config.autohideLibMode && S("hidden")
        })
    }, r
}]), app.factory("backend", ["khttp", "$http", "error", "translit", "cache", "$location", "$injector", "$ionicHistory", "$rootScope", "modals", "$window", "status", "crdv", "$sce", "$timeout", "stg", "$q", "sync", function (r, c, d, u, e, n, h, t, s, f, l, i, p, g, m, v, b, o) {
    var y, w, k = {}, a = [], x = {transformRequest: angular.identity, headers: {"Content-Type": void 0}};

    function C() {
        try {
            if ("undefined" != typeof lti && lti && email && hash) {
                v.data.user.email = email, v.data.user.pwd = hash, v.data.user.rememberMe = !0;
                var e = document.getElementsByTagName("head")[0];
                if (e.length) {
                    e[0];
                    for (var t = document.getElementsByTagName("script"), n = 0; n < t.length; n++) if (t[n].hasAttribute("lti")) {
                        t[n].parentNode.removeChild(t[n]);
                        break
                    }
                }
            }
        } catch (e) {
        }
    }

    k.getAuthVarsOld = function () {
        return {libid: config.kotobee.libid, email: v.data.user.email, pwd: v.data.user.pwd}
    }, k.getAuthVars = function () {
        var e = {email: v.data.user.email, pwd: v.data.user.pwd, code: v.data.user.code, env: config.kotobee.mode};
        return C(), e.cloudid = config.kotobee.cloudid, "library" == e.env && v.data.book && (e.bid = v.data.book.id), uuid && (e.fingerprint = uuid), e
    }, k.addListener = function (e, t) {
        a.push({event: e, func: t})
    }, k.initialize = function (e) {
        e = e || {
            putTest: function () {
            }, $$phase: !0
        };
        putTest("X");
        var n = b.defer();
        return putTest("Y"), putTest("Z"), putTest("J"), d.detect("s_authError", k.loginErrorDetection), putTest("K"), v.readSlot("user" + config.kotobee.cloudid, function (e) {
            if (config.kotobee.cloudid) {
                var t = e;
                t && (v.data.user = t)
            }
            v.data.user || (v.data.user = {}), 0 == v.data.user.length && (v.data.user = {}), v.data.user.loggedIn = !1, putTest("L"), preview ? n.resolve() : k.getFingerprint(function (e) {
                uuid = e, n.resolve()
            })
        }), n.promise
    }, k.getFingerprint = function (o) {
        function a() {
            var e = {
                excludeUserAgent: !0,
                excludeScreenResolution: !0,
                excludeDoNotTrack: !0,
                excludeAvailableScreenResolution: !0,
                excludeOpenDatabase: !0,
                excludePlugins: !0,
                excludeCanvas: !0,
                excludeWebGL: !0,
                excludeJsFonts: !0,
                excludeCanvas: !1,
                excludeWebGL: !1
            };
            new Fingerprint2(e).get(function (e, t) {
                try {
                    e = e || process.env.USERNAME, v.writeSlot("fingerprint", e, function () {
                        o(e)
                    })
                } catch (e) {
                }
            })
        }

        native && window.plugins && window.plugins.uniqueDeviceID ? window.plugins.uniqueDeviceID.get(function (e) {
            e && e.length ? o(e) : a()
        }, a) : desktop ? "mac" == os ? a() : require("child_process").exec("wmic CPU get ProcessorId", {cwd: "."}, function (e, t, n) {
            if (t) {
                var r = t.toUpperCase().split("PROCESSORID");
                if (r.length) {
                    var i = r[1].trim();
                    i.length ? o(i) : a()
                } else a()
            } else a()
        }) : a()
    };
    var S = null, A = null;
    k.setLibraryLoginCallback = function (e) {
        S = e
    }, k.setLibraryLogoutCallback = function (e) {
        A = e
    }, k.loginErrorDetection = function (t) {
        v.data.user.loggedIn = !1, t && ("email" == config.kotobee.loginmode ? t.loginOptions.canLoginByEmail = !0 : "code" == config.kotobee.loginmode ? t.loginOptions.canLoginByCode = !0 : t.loginOptions.canLoginByEmail = t.loginOptions.canLoginByCode = !0, t.loginOptions.mode = t.loginOptions.canLoginByEmail ? "email" : "code", t.loginOptions.signIn = function () {
            f.hide(), setTimeout(function () {
                if ("code" == t.loginOptions.mode) {
                    if (!t.model || !t.model.code) return void d.update({error: "enterYourCode"});
                    v.data.user.code = t.model.code, v.data.user.email = v.data.user.pwd = null
                } else {
                    if (!v.data.user.email) return void d.update({error: "enterYourEmail"});
                    if (!t.model || !t.model.pwd) return void d.update({error: "enterYourPwd"});
                    v.data.user.pwd = t.model.pwd, v.data.user.code = null
                }

                function e() {
                    k.login({userInput: !0}).then(function (e) {
                        e.error || t.model && (t.model.pwd = t.model.code = null)
                    })
                }

                config.kotobee.permsLoaded ? e() : h.get("auth").getPermissions(e)
            }, 800)
        }, t.loginOptions.register = function () {
            f.hide(), n.path("/register")
        }, t.loginOptions.forgotPassword = function () {
            f.hide(), n.path("/forgotpwd")
        }, t.loginOptions.redeemCode = function () {
            t.loginOptions.mode = "code"
        }, t.loginOptions.signInByEmail = function () {
            t.loginOptions.mode = "email"
        })
    };
    var L, N = null;
    k.refreshSignatures = function (t) {
        var e = config.kotobee.liburl + "user/signatures";
        c.post(e, getFormData(k.getAuthVars()), x).success(function (e) {
            e.error || (v.data.user.signatures = e.signatures, t && t())
        })
    };
    var I = {ping: !0};

    function E(e) {
        if ((v.data.currentLibrary = e) && e.categories) {
            for (var t = [], n = 0; n < e.categories.length; n++) t.push(e.categories[n]);
            for (n = 0; n < e.categories.length; n++) for (var r = e.categories[n], i = 0; i < t.length; i++) t[i].parent && t[i].parent.id == r.id && (r.children || (r.children = []), r.children.push(t[i]), t[i].nested = !0);
            for (n = 0; n < e.categories.length; n++) e.categories[n].nested && (e.categories.splice(n, 1), n--)
        }
    }

    function T(e) {
        var t = getFormData(k.getAuthVars());
        t.append("software", isReaderApp ? "readerapp" : "reader"), t.append("platform", navigator.userAgent), t.append("assetType", config.kotobee.mode);
        try {
            t.append("assetName", "book" == config.kotobee.mode ? v.data.book.meta.dc.title : v.data.currentLibrary.name)
        } catch (e) {
        }
        var n = window.location.href;
        return t.append("assetPath", n.split("#")[0]), config.kotobee.cloudid && t.append("assetId", config.kotobee.cloudid), "library" == config.kotobee.mode && (v.data.book && null != v.data.book.id ? t.append("bid", v.data.book.id) : e.bid && t.append("bid", e.bid)), v.data.user.email && t.append("email", v.data.user.email), v.data.user.code && t.append("code", v.data.user.code), e.action && t.append("action", e.action), e.param && t.append("param", e.param), v.data.book && v.data.book.chapter && v.data.book.chapter.title && t.append("chapter", v.data.book.chapter.title), t
    }

    return k.login = function (i, e) {
        i = i || {};
        var t = {func: arguments.callee, args: arguments};
        document.body.focus = null;
        var o, n, a = b.defer();
        i.ping || (o = f.show({
            mode: "loading",
            loadingMsg: u.get("pleaseWait"),
            timeLimit: 1e4
        }), v.data.user.loggedIn = !1), e && (N = e), "book" == config.kotobee.mode && (n = config.kotobee.liburl + "library/auth"), "library" == config.kotobee.mode && (n = config.kotobee.liburl + "library/get"), C(), preview || (k.fingerprint = uuid);
        var r = k.getAuthVars(), s = {}, l = Boolean(i.accessToken || i.idToken);
        return v.data.sso && v.data.sso.oauth ? (s.ssoprovider = v.data.sso.oauth.provider, s.ssoaccesstoken = v.data.sso.oauth.accessToken, s.ssoidtoken = v.data.sso.oauth.idToken, l = Boolean(s.ssoaccesstoken || s.ssoidtoken)) : i.ssoProvider && l && (s.ssoprovider = i.ssoProvider, s.ssoaccesstoken = i.accessToken, s.ssoidtoken = i.idToken), Object.keys(s).length && (r = Object.assign(r, s)), i.userInput && (r.input = !0), r.platformdesc = navigator.userAgent, native ? (r.platform = "mobile", device && (r.platformdesc = device.platform + " " + device.model + " " + device.version + " " + (device.manufacturer ? device.manufacturer : ""))) : r.platform = desktop ? "desktop" : "web", r.v = readerV, i.ping && (r.ping = !0, r.pwd = i.pwd), r.v = config.v, l && (v.data.user.rememberMe = !0), c.post(n, getFormData(r), x).success(function (e) {
            if (clearTimeout(L), o && f.hide(o), e.error) return e.public && (w = !0), i.dontShowErrorDialog || d.update(e), v.data.user.pwd = null, v.data.user.code = null, i.ping && k.logout({dontSignoutSSO: !0}), void a.resolve(e);
            var t = 3e5;
            if (void 0 === t && (t = 3e5), y && clearTimeout(y), y = setTimeout(function () {
                e.pwd && (I.pwd = e.pwd), k.login(I)
            }, t), !i.ping) if (l && e.email && (v.data.user.email = e.email), v.data.user.pwd = e.pwd, v.data.user.id = e.userid, v.data.user.name = e.username, v.data.user.lastchap = e.lastchap, v.data.user.signatures = e.signatures, v.data.user.role = e.role, "book" == config.kotobee.mode && e.chapters && h.get("book").setAllowedChapters(e.chapters), v.data.user.rememberMe) {
                var n = {rememberMe: !0};
                v.data.user.email && v.data.user.pwd ? (n.email = v.data.user.email, n.pwd = v.data.user.pwd) : v.data.user.code && (n.code = v.data.user.code), v.writeSlot("user" + config.kotobee.cloudid, n, r)
            } else v.clearSlot("user" + config.kotobee.cloudid, r);

            function r() {
                if (!e.cloudid && !e.success) return i.dontShowErrorDialog || d.update({error: "s_authError"}), void a.resolve({error: "s_authError"});
                v.data.user.loggedIn = !0, "library" == config.kotobee.mode && (E(e), S && S()), a.resolve(e), N && (N(e), N = null)
            }
        }).error(function (e) {
            clearTimeout(L), f.hide(), d.update({error: "networkError", ref: t})
        }), a.promise
    }, k.libraryHasPublicBooks = function () {
        return w
    }, k.logout = function (e) {
        (e = e || {}).dontSignoutSSO || h.get("login").logout(), v.data.user.pwd = null, v.data.user.loggedIn = !1, v.data.user.email = null, v.data.user.code = null, v.data.sso.oauth && delete v.data.sso.oauth, v.writeSlot("user" + config.kotobee.cloudid, v.data.user, function () {
            "library" == config.kotobee.mode ? m(function () {
                if (d.update({error: "s_authError"}), k.cloudParam("entry")) {
                    for (var e = 0; e < v.data.currentLibrary.books.length; e++) v.data.currentLibrary.books[e].favorite = !1;
                    p.applyExistingBooks()
                } else v.data.currentLibrary = {};
                A && A()
            }, 200) : (n.path("/login"), t.clearHistory())
        })
    }, k.getPermissions = function (n) {
        var r = {func: arguments.callee, args: arguments}, e = {};
        return e.env = config.kotobee.mode, e.cloudid = config.kotobee.cloudid, c.post(config.kotobee.liburl + "library/permissions", getFormData(e), x).success(function (e) {
            if (e.error) {
                d.update({error: "errorAndCallback", msg: e.error, cb: p.exit});
                var t = document.getElementsByClassName("loaded");
                t.length && t[0].parentNode.removeChild(t[0])
            } else n && n(e)
        }).error(function (e, t) {
            (native || desktop) && k.cloudParam("offline") ? n && n({error: "offline"}) : d.update({
                error: "networkError",
                ref: r
            })
        })
    }, k.register = function (e, t) {
        var n = {func: arguments.callee, args: arguments},
            r = f.show({mode: "loading", loadingMsg: u.get("registeringAccount")}), i = k.getAuthVars();
        i.email = e.email1, i.promocode = e.promocode, i.root = config.kotobee.liburl;
        var o = getFormData(i);
        return o.append("platform", navigator.userAgent), c.post(config.kotobee.liburl + "user/register", o, x).success(function (e) {
            f.hide(r), e.error ? d.update(e) : t && t(e)
        }).error(function (e) {
            d.update({error: "networkError", ref: n})
        })
    }, k.forgotPwd = function (e, t) {
        var n = {func: arguments.callee, args: arguments},
            r = f.show({mode: "loading", loadingMsg: u.get("retrieving")}), i = k.getAuthVars();
        i.email = e.email, i.root = config.kotobee.liburl;
        var o = getFormData(i);
        return c.post(config.kotobee.liburl + "user/forgotpwd", o, x).success(function (e) {
            f.hide(r), e.error ? d.update(e) : t && t(e)
        }).error(function (e) {
            d.update({error: "networkError", ref: n})
        })
    }, k.redeemCode = function (e, t) {
        var n = {func: arguments.callee, args: arguments}, r = getFormData(k.getAuthVars());
        r.append("redeemcode", e.code), r.append("platform", navigator.userAgent), c.post(config.kotobee.liburl + "user/redeemcode", r, x).success(function (e) {
            t(e)
        }).error(function () {
            d.update({error: "networkError", ref: n})
        })
    }, k.userLoggedIn = function () {
        if (v.data.user.loggedIn) return !0;
        try {
            if ("library" == config.kotobee.mode && v.data.book && ("public" == v.data.book.accessmode || "all" == v.data.book.accessmode)) return !0
        } catch (e) {
        }
    }, k.downloadEbookTest = function (e, t) {
        var n = {id: e.id, mode: e.binary};
        return k.sendRawPost("http://192.168.1.5/files/test.zip", n, {
            responseType: "blob", onProgress: function (e) {
            }
        }, function (e) {
            if (e.error) return d.update(e), void t();
            t(e)
        })
    }, k.downloadEbook = function (e, t, n) {
        try {
            var r = {responseType: "blob", onProgress: t};
            mobile && native && (r.responseType = "arraybuffer");
            var i = {id: e.id, mode: "binary", requester: "reader"};
            return k.sendRawPost(config.kotobee.liburl + "library/ebook/download", i, r, function (e) {
                if (e.error) return d.update(e), void n();
                n(e)
            })
        } catch (e) {
        }
    }, k.tincan = function (e, t) {
        var n = getFormData(k.getAuthVars());
        for (var r in e) n.append(r, e[r]);
        c.post(config.kotobee.liburl + "tincan", n, x).success(function (e) {
            t && t()
        }).error(function (e, t) {
        })
    }, k.getUnauthLibrary = function (n) {
        if ("library" == config.kotobee.mode) {
            var r = {func: arguments.callee, args: arguments}, e = getFormData(k.getAuthVars());
            c.post(config.kotobee.liburl + "library/getbasic", e, x).success(function (e) {
                E(e), n && n(e)
            }).error(function (e, t) {
                (native || desktop) && k.cloudParam("offline") ? n && n({error: "offline"}) : d.update({
                    error: "networkError",
                    ref: r
                })
            })
        }
    }, k.addtoFav = function (e, t) {
        var n = {func: arguments.callee, args: arguments}, r = getFormData(k.getAuthVars());
        r.append("bid", e.id), r.append("cloudid", k.cloudParam("cloudid")), r.append("type", "book"), c.post(config.kotobee.liburl + "library/favorite/add", r, x).success(function (e) {
            if (e.error) return d.update(e), void t();
            t(e)
        }).error(function () {
            d.update({error: "networkError", ref: n})
        })
    }, k.removeFav = function (e, t) {
        var n = {func: arguments.callee, args: arguments}, r = getFormData(k.getAuthVars());
        r.append("bid", e.id), r.append("cloudid", k.cloudParam("cloudid")), r.append("type", "book"), c.post(config.kotobee.liburl + "library/favorite/remove", r, x).success(function (e) {
            if (e.error) return d.update(e), void t();
            t(e)
        }).error(function (e) {
            d.update({error: "networkError", ref: n})
        })
    }, k.checkBookUpdates = function (e, t) {
        var n = {func: arguments.callee, args: arguments}, r = getFormData(k.getAuthVars());
        r.append("bid", e.bid), null != e.checksum && r.append("checksum", e.checksum), null != e.ver && r.append("ver", e.ver), c.post(config.kotobee.liburl + "library/ebook/checkupdates", r, x).success(function (e) {
            e.error ? t() : t(e)
        }).error(function (e) {
            d.update({error: "networkError", ref: n})
        })
    }, k.getServerLang = function (e, t) {
        if (!isKotobeeHosted() || config.loadLangsLocally) return r.get(cacheBust(rootDir + "locales/" + e.lang + ".js"));
        var n = getFormData();
        return n.append("lang", e.lang), n.append("root", rootDir), n.append("v", readerV), n.append("base", publicRoot), r.post(config.kotobee.liburl + "library/getlang", n, x)
    }, k.getS3Paths = function (t) {
        var e = getFormData();
        c.post(config.kotobee.liburl + "library/s3paths", e, x).success(function (e) {
            v.data.paths = e, function (e) {
                for (var t = 0; t < a.length; t++) a[t].event == e && a[t].func()
            }("pathsChanged"), t && t(e)
        }).error(function () {
        })
    }, k.addBookStat = function (e, t) {
        if (e = e || {}, !preview && config.kotobee.cloudid) {
            window.location.href;
            0;
            var n = getFormData(k.getAuthVars());
            n.append("type", e.type), c.post(config.kotobee.liburl + "library/ebook/stat", n, x).success(function (e) {
            }).error(function () {
            })
        }
    }, k.addEvent = function (e, t) {
        if (e = e || {}, kotobee && kotobee.dispatchEvent(e.action, e.param), !preview) {
            var n = window.location.href;
            if (debug || !(0 <= n.indexOf("localhost/") || 0 <= n.indexOf("localhost:"))) {
                var r = T(e);
                c.post(config.kotobee.liburl + "event/add", r, x).success(function (e) {
                    t && t(e)
                }).error(function () {
                })
            }
        }
    }, k.addStat = function (e, t) {
        if (e = e || {}, !preview) {
            var n = window.location.href;
            if (!(0 <= n.indexOf("localhost/") || 0 <= n.indexOf("localhost:"))) {
                var r = T(e);
                c.post(config.kotobee.liburl + "stat/add", r, x).success(function (e) {
                    t && t(e)
                }).error(function () {
                })
            }
        }
    }, k.setUserData = function (e, t) {
        var n = getFormData(k.getAuthVars());
        n.append("label", e.label), n.append("data", e.data), e.overwrite && n.append("overwrite", e.overwrite), e.category && n.append("category", e.category), e.subcategory && n.append("subcategory", e.subcategory), e.options && n.append("options", e.options), c.post(config.kotobee.liburl + "cloud/set", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.getUserData = function (e, t) {
        var n = getFormData(k.getAuthVars());
        e.label && n.append("label", e.label), e.category && n.append("category", e.category), e.subcategory && n.append("subcategory", e.subcategory), e.allUsers && n.append("allUsers", !0), e.options && n.append("options", e.options), c.post(config.kotobee.liburl + "cloud/get", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.getUserList = function (e, t) {
        var n = getFormData(k.getAuthVars());
        e.role && n.append("role", e.role), c.post(config.kotobee.liburl + "cloud/users", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.getUserDataArray = function (e, t) {
        var n = getFormData(k.getAuthVars());
        e.array && n.append("array", e.array), c.post(config.kotobee.liburl + "cloud/getarray", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.setUserDataArray = function (e, t) {
        var n = getFormData(k.getAuthVars());
        e.array && n.append("array", e.array), c.post(config.kotobee.liburl + "cloud/setarray", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.deleteUserData = function (e, t) {
        var n = getFormData(k.getAuthVars());
        n.append("label", e.label), n.append("data", e.data), e.all && n.append("all", e.all), e.category && n.append("category", e.category), e.subcategory && n.append("subcategory", e.subcategory), e.options && n.append("options", e.options), c.post(config.kotobee.liburl + "cloud/delete", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.sendEmail = function (e, t) {
        var n = getFormData(k.getAuthVars());
        n.append("to", e.to), n.append("message", e.message), n.append("subject", e.subject), e.cc && n.append("cc", e.cc), e.html && n.append("html", e.html), e.fromEmail && n.append("fromEmail", e.fromEmail), e.fromName && n.append("fromName", e.fromName), c.post(config.kotobee.liburl + "cloud/send", n, x).success(function (e) {
            if (e.error) throw e;
            t(e)
        }).error(function () {
            throw"Network Error. Please try again"
        })
    }, k.externalLink = function (n, e) {
        try {
            if ((e = e || {}).secure && !native && !desktop && !preview) return void l.open(n);

            function r(e, t) {
                native ? p.openInNativeBrowser(e, t) : desktop ? require("nw.gui").Shell.openExternal(e) : window.open(e, "_blank")
            }

            if (e.target && "_blank" == e.target.toLowerCase()) return void r(n, !0);
            if (native) return void r(n);
            var i = {
                title: u.get("externalLink"),
                src: g.trustAsResourceUrl(n),
                openInNativeBrowser: r,
                status: "loading"
            }, o = setTimeout(function () {
                i.status = "", i.error = u.get("errorLoadingPage"), s.$$phase || s.$apply()
            }, 1e4);
            i.loaded = function (e, t, n) {
                i.status = "loaded", clearTimeout(o), s.$$phase || s.$apply()
            };
            var a = f.show({
                mode: "externalSite",
                animation: "slide-in-up",
                dynamic: !0,
                backdropClickToClose: !1,
                siteOptions: i
            });
            desktop || preview || k.getXframeOptions({url: n}, function (e) {
                if (i.status = "loaded", s.$$phase || s.$apply(), e && e.success) {
                    var t = e.success.toLowerCase();
                    "sameorigin" != t && "deny" != t || (f.hide(a), setTimeout(function () {
                        f.show({mode: "xFrameError", errorOptions: {url: n, openInNativeBrowser: r}})
                    }, 500))
                }
            })
        } catch (e) {
        }
    }, k.createRequest = function (e, t, n) {
        t = t || {};
        var r = getFormData(k.getAuthVars());
        for (var i in t) r.append(i, t[i]);
        c.post(e, r, x).success(function (e) {
            n(e)
        }).error(function () {
            n(!1)
        })
    }, k.convertPDF = function (e, t) {
        if (e = e || {}, !preview) {
            var n = getFormData(k.getAuthVars());
            n.append("url", e.url), c.post(config.kotobee.liburl + "library/pdf", n, x).success(function (e) {
                t(e)
            }).error(function () {
            })
        }
    }, k.getXframeOptions = function (e, t) {
        var n = getFormData(k.getAuthVars());
        n.append("url", e.url), c.post(config.kotobee.liburl + "getxframe", n, x).success(function (e) {
            e.error ? t() : t(e)
        }).error(function (e) {
        })
    }, k.hasAccessTo = function (e, n) {
        if ("library" == config.kotobee.mode) {
            var t = getFormData(k.getAuthVars());
            for (var r in e = e || {}) t.append(r, e[r]);
            t.append("v", readerV), c.post(config.kotobee.liburl + "user/access", t, x).success(function (e) {
                n && n(e)
            }).error(function (e, t) {
                n && n({error: ""})
            })
        } else n && n({success: !0})
    }, k.setLastChapter = function (n) {
        var e = getFormData(k.getAuthVars());
        e.append("chapter", currentIndex), c.post(config.kotobee.liburl + "user/lastchap", e, x).success(function (e) {
            n && n(e)
        }).error(function (e, t) {
            n && n({error: ""})
        })
    }, k.cloudParam = function (e) {
        return config.kotobee[e]
    }, k.getEbook = function (e, t) {
        var n = {func: arguments.callee, args: arguments}, r = getFormData(k.getAuthVars());
        for (var i in e) r.append(i, e[i]);
        c.post(config.kotobee.liburl + "library/ebook/get", r, x).success(function (e) {
            e.error && d.update(e), t && t(e)
        }).error(function (e) {
            d.update({error: "networkError", ref: n}), t && t({error: "networkError"})
        })
    }, k.getEbooks = function (e, t, n) {
        var r = {func: arguments.callee, args: arguments}, i = getFormData(k.getAuthVars());
        for (var o in e) i.append(o, e[o]);
        i.append("v", readerV), c.post(config.kotobee.liburl + "library/ebook/all", i, x).success(function (e) {
            e.error && d.update(e), n && n(e, t)
        }).error(function (e) {
            d.update({error: "networkError", ref: r}), n && n({error: "networkError"}, t)
        })
    }, k.sendRawPost = function (t, n, r, i, o) {
        o = o || 0;
        var e = "", a = {};
        if (!r.ignoreCredentials) {
            var s = k.getAuthVars();
            a = Object.assign(a, s)
        }
        if (a = Object.assign(a, n), r.queryString) e = Object.entries(a).map(function (e) {
            var t = e[1];
            return Array.isArray(t) ? (t = serializeObject(t, e[0]), Object.entries(t).map(function (e) {
                return e[0] + "=" + encodeURIComponent(e[1])
            }).join("&")) : e[0] + "=" + encodeURIComponent(t)
        }).join("&"), t += e ? "?" + e : ""; else for (var l in a) {
            var c = a[l];
            null != c && "object" != typeof c && ("string" == typeof c && (c = encodeURIComponent(c = ("." + c).substr(1))), "boolean" == typeof c && (c = c ? 1 : 0), e += "&" + l + "=" + c)
        }
        var d, u = new XMLHttpRequest;
        return u.open(r.method ? r.method : "POST", t, !0), "GET" != r.method && u.setRequestHeader("Content-type", "application/x-www-form-urlencoded"), r.onProgress && (u.onprogress = function (e) {
            var t;
            if (e.lengthComputable) t = e.loaded / e.total; else {
                if (!e.target.getResponseHeader("x-decompressed-content-length")) return;
                t = e.loaded / Number(e.target.getResponseHeader("x-decompressed-content-length"))
            }
            r.onProgress(t)
        }), r.responseType && (u.responseType = r.responseType), u.addEventListener("error", function (e) {
            i({error: "networkError"}), d = !0
        }, !1), u.onreadystatechange = function (e) {
            u.aborted || 4 == u.readyState && (200 == u.status ? m(function () {
                i(u.response)
            }) : u.onerror())
        }, u.onerror = function (e) {
            if (!d) {
                if (!(3 <= o)) return k.sendRawPost(t, n, r, i, ++o);
                m(function () {
                    i({error: "d_connectionTimedOut"})
                })
            }
        }, r.queryString || "GET" == r.method ? u.send() : u.send(e), u
    }, k.abort = function (e) {
        e && 4 != e.readyState && (e.aborted = !0, e.abort())
    }, k
}]), app.factory("book", ["$http", "error", "$timeout", "$rootScope", "crdv", "khttp", "translit", "modals", "design", "$location", "library", "np", "sync", "cssInjector", "jsParser", "chapters", "cssParser", "$q", "status", "backend", "tinCan", "stg", "$sce", "$filter", function (e, r, t, n, i, v, b, y, o, a, s, l, c, d, u, w, h, f, k, p, x, C, g, S) {
    var m, A = {};
    return A.root = "", A.currentBook = null, A.initialize = function () {
    }, A.getCoverImgPath = function (e, t) {
        if (t = t || e.path, !e.cover) return "img/ui/defaultCover.png";
        var n = "";
        return n = C.data.currentLibrary.cloud && C.data.currentLibrary.cloud.public ? C.getPublicRoot("book") + e.path + "/EPUB/" + e.cover : S("coverPath")(e.cover, t), e.exists && (native ? n = i.libEbooksDirectory.nativeURL + t + "/EPUB/" + e.cover.replace(/_thumb/g, "") : desktop && (n = ph.normalize(l.getBooksPath() + t + "/" + e.cover.replace(/_thumb/g, "")))), n = cleanURL(n)
    }, A.getBgImgPath = function (e, t) {
        if (t = t || e.path, !e.cover) return "";
        var n = C.getPublicRoot("book");
        return n += e.path + "/" + e.bgimg
    }, A.setAllowedChapters = function (e) {
        if (A.allowedChapters = null, e && e.length) {
            for (var t = e.split(","), n = 0; n < t.length; n++) t[n] = t[n];
            A.allowedChapters = t
        }
    }, A.reload = function () {
        A.open(A.currentBook, currentIndex)
    }, A.open = function (n, r) {
        if (preview) return y.hide(), void setTimeout(function () {
            y.show({mode: "generalError", errorOptions: {msg: b.get("cantPreviewLibBook")}})
        }, 500);
        native ? (i.vibrate(), bookPath = i.libEbooksDirectory.nativeURL + n.path + "/EPUB/") : desktop ? (bookPath = l.getBooksPath() + n.path + "/", "mac" == os && (bookPath = "file://" + bookPath)) : (bookPath = C.data.currentLibrary.cloud.public ? C.getPublicRoot("book") : config.kotobee.liburl + "books/", bookPath += n.path + "/EPUB/"), A.currentBook = n, y.hide(), setTimeout(function () {
            var e;
            k.update(b.get("pleaseWait"), null, {dots: !0}), e = function (e) {
                e.success ? (A.setAllowedChapters(e.chapters), A.loadBook().then(function () {
                    !function (e, i) {
                        if (!e.dver || e.dver < 2) return i();
                        if (config.noBookOverride) return i();
                        v.get(cacheBust(ph.join(bookPath, "_kmeta/config.js"))).success(function (e) {
                            if (-1 != e.indexOf("var config")) {
                                e = e.replace("var config", "var bookConfig");
                                var t = document.createElement("script");
                                t.setAttribute("bookconfig", !0);
                                var n = document.getElementsByTagName("head");
                                for (var r in n.length && n[0].appendChild(t), t.innerHTML = e, m = m || clone(config), bookConfig) "kotobee" != r && (config[r] = bookConfig[r]);
                                config.htmlInNotes = bookConfig.htmlInNotes, o.injectUserCSS(config), o.applyRichTextLibrary(), o.convertTabs(), i && i()
                            } else i()
                        }).error(function () {
                            i && i()
                        })
                    }(n, function () {
                        if (C.data.book.accessmode = n.accessmode, C.data.book.id = n.id, C.data.epub.bookThumb = A.getCoverImgPath(n, C.data.book.path), chromeApp) if (C.data.chromeAssets[C.data.book.bookThumb]) C.data.epub.bookThumb = C.data.chromeAssets[C.data.book.bookThumb]; else {
                            var t = C.data.epub.bookThumb;
                            delete C.data.epub.bookThumb, getImgDataSrc(t, function (e) {
                                C.data.epub.bookThumb = e, C.data.chromeAssets[t] = e
                            })
                        }
                        k.update(), A.root = "/book/" + C.data.book.id;
                        var e = "";
                        null != r && (e = "/chapter/" + r), a.path(A.root + "/reader" + e), c.initialize(), setTimeout(function () {
                            w.initialize(r)
                        }, 1e3)
                    })
                })) : k.update()
            }, (native || desktop) && n.exists ? e({success: !0}) : p.hasAccessTo({testagainst: n.id, open: !0}, e)
        }, 200)
    }, A.removeBookConfigElem = function () {
        for (var e = document.getElementsByTagName("script"), t = 0; t < e.length; t++) if (e[t].hasAttribute("bookconfig")) {
            e[t].parentNode.removeChild(e[t]);
            break
        }
        if (m) {
            for (var n in config) "kotobee" != n && delete config[n];
            for (var n in m) config[n] = m[n];
            o.injectUserCSS(config)
        }
    }, A.loadBook = function () {
        var n = {func: arguments.callee, args: arguments}, e = f.defer();

        function m() {
            S("chapterHtml")(C.data.toc), function () {
                var e = C.data.toc;
                if (!A.allowedChapters) return;
                for (var t = e.getElementsByTagName("a"), n = 0; n < A.allowedChapters.length; n++) {
                    var r, i, o = A.allowedChapters[n], a = null;
                    if (isNaN(o)) {
                        if ((i = o.replace(/['"](.*?)['"]/g, "$1")).match(/\[\*\]$/g) && (a = !0, i = i.replace(/\[\*\]$/g, "")), i.match(/^index::/g)) {
                            var s = i.replace(/^index::/g, "");
                            r = w.getChapterURL(Number(s)), i = ""
                        }
                    } else r = w.getChapterURL(Number(o));
                    for (var l = 0; l < t.length; l++) {
                        var c = null;
                        i && i == t[l].textContent && (c = !0), r && r == t[l].getAttribute("href") && (c = !0), c && (t[l].setAttribute("data-allow", !0), a && t[l].setAttribute("data-allow-children", !0))
                    }
                }
                for (l = 0; l < t.length; l++) {
                    if (c = t[l].hasAttribute("data-allow") || t[l].hasAttribute("data-dontshow") || hasClass(t[l], "parentNotRestricted")) {
                        if (t[l].removeAttribute("data-allow"), t[l].hasAttribute("data-allow-children")) {
                            var d = t[l].nextElementSibling;
                            if (d && "ol" == d.nodeName.toLowerCase()) {
                                var u = d.getElementsByTagName("a");
                                for (n = 0; n < u.length; n++) addClass(u[n], "parentNotRestricted")
                            }
                        }
                    } else {
                        t[l].className = "restricted", t[l].setAttribute("data-index", l);
                        var h = document.createElement("label");
                        h.className = "restrictedLabel", h.textContent = b.get("restricted"), t[l].parentNode.appendChild(h)
                    }
                }
                for (l = 0; l < t.length; l++) {
                    var f = t[l].getAttribute("href"),
                        p = getElementsByAttribute(C.data.epub.manifest, "item", "href", f);
                    if (p.length) {
                        var g = getElementsByAttribute(C.data.epub.spine, "itemref", "idref", p[0].id);
                        if (g.length && "restricted" == t[l].className) for (var m = g.length; m--;) if ("no" != g[m].getAttribute("linear")) {
                            g[m].setAttribute("linear", "no");
                            break
                        }
                    }
                }
                var v = e.getElementsByClassName("restricted");
                for (l = 0; l < v.length; l++) v[l].setAttribute("href", "")
            }(), "files" == config.serialNavMode && function () {
                C.data.toc;
                for (var e = C.data.epub.spine.getElementsByTagName("itemref"), t = 1; t < e.length; t++) {
                    for (var n = null, r = t - 1; 0 <= r; r--) if ("no" != e[r].getAttribute("linear") && e[r].getAttribute("idref") == e[t].getAttribute("idref")) {
                        n = !0;
                        break
                    }
                    n && e[t].setAttribute("linear", "no")
                }
            }(), C.data.book.chapters = C.data.toc.innerHTML, e.resolve()
        }

        return C.resetBook(), h.clearCache(), u.clearCache(), w.clearCache(), v.get(cacheBust(ph.join(bookPath, "META-INF/container.xml?v=" + readerV))).success(function (e) {
            config.kotobee.encodekey && (e = 1.1 <= config.v ? CryptoJS.AES.decrypt(e, config.kotobee.encodekey).toString(CryptoJS.enc.Utf8) : kInteractive.XORCipher().decode(config.kotobee.encodekey, e));
            var t = parseXml(e);
            C.data.epub = {};
            try {
                C.data.packageURL = t.getElementsByTagName("rootfile")[0].getAttribute("full-path")
            } catch (e) {
                return k.update(), void r.update({
                    error: "errorAndCallback",
                    msg: native ? "errorLoadingBookNative" : "errorLoadingBook",
                    cb: i.exit
                })
            }
            o.convertTabs();
            var p = config.v, g = native || isKotobeeHosted();
            !function (e) {
                window.location.origin;
                var t = Math.round(9999 * Math.random());
                "book" == config.kotobee.mode && !isReaderApp && 1.3 <= p && !g ? v.get("js/templates.js?c=" + t).success(e).error(function () {
                    r.update({error: "networkError", ref: n})
                }) : e()
            }(function (f) {
                v.get(cacheBust(ph.join(bookPath, C.data.packageURL))).success(function (e) {
                    if ("book" == config.kotobee.mode && !isReaderApp) if (1.3 <= p) {
                        var t = CryptoJS.MD5(e.replace(/\s+/g, "")).toString();
                        if (config.kotobee.hostPath && "kotobee" == config.kotobee.hostType && (t = ""), g) {
                            if (0 != config.checksum.indexOf(t)) return void r()
                        } else {
                            var n = CryptoJS.MD5(f).toString();
                            if (t + n != config.checksum && (f = f.replace(/(\S)\n/g, "$1\r\n"), t + n != config.checksum)) return r()
                        }
                    } else if (1.2 <= p && CryptoJS.MD5(e).toString() != config.checksum) return void r();

                    function r() {
                        k.update(), y.show({mode: "generalError", errorOptions: {msg: b.get("errorLoadingPage")}});
                        var e = document.getElementsByClassName("loaded");
                        e.length && e[0].parentNode.removeChild(e[0])
                    }

                    config.kotobee.encodekey && (e = 1.1 <= config.v ? CryptoJS.AES.decrypt(e, config.kotobee.encodekey).toString(CryptoJS.enc.Utf8) : kInteractive.XORCipher().decode(config.kotobee.encodekey, e));
                    var i = parseXml(e = e.replace(/href="([^"]*?&[^"]*?)"/g, function (e, t) {
                        return 'href="' + t.replace(/&/g, "") + '"'
                    }));
                    C.data.epub.metadata = i.getElementsByTagName("metadata")[0], C.data.epub.manifest = i.getElementsByTagName("manifest")[0], C.data.epub.spine = i.getElementsByTagName("spine")[0], C.data.mediaList = [], C.data.book.meta = {}, C.data.book.version = 3;
                    try {
                        for (var o = 0; o < C.data.epub.metadata.childNodes.length; o++) {
                            var a;
                            if (8 != (a = C.data.epub.metadata.childNodes[o]).nodeType && "#text" != a.nodeName) if (a.hasAttribute("name") && "meta" == a.nodeName.toLowerCase()) C.data.book.meta[a.getAttribute("name")] = a.getAttribute("content"); else for (var s = (a.hasAttribute("property") ? a.getAttribute("property") : a.nodeName).split(":"), l = C.data.book.meta, c = 0; c < s.length; c++) c == s.length - 1 ? l[s[c].toLowerCase()] = a.innerHTML ? a.innerHTML : a.textContent : (l[s[c].toLowerCase()] || (l[s[c].toLowerCase()] = {}), l = l[s[c].toLowerCase()])
                        }
                    } catch (e) {
                    }

                    function d(e, t) {
                        t = t || {};
                        for (var n = getElementsByAttribute(C.data.epub.manifest, "item", "media-type", e + "/.*"), r = 0; r < n.length; r++) {
                            var i = n[r].getAttribute("href");
                            if (0 != i.indexOf("js/widgets/") && (0 != i.indexOf("xhtml/pdf") || -1 == i.indexOf("/page"))) {
                                var o = {};
                                o.thumbnail = cleanURL(t.thumb ? t.thumb : ph.join(bookPath, C.data.packageURL, n[r].getAttribute("href"))), o.title = ph.removeExtension(ph.basename(o.thumbnail));
                                var a = n[r].getAttribute("media-type");
                                o.ext = a.split(e + "/")[1], o.type = e, o.src = cleanURL(ph.join(bookPath, C.data.packageURL, n[r].getAttribute("href"))), C.data.mediaList.push(o), chromeApp && isAbsoluteURLAndNotDataPath(o.thumbnail) && (C.data.chromeAssets[o.thumbnail] ? o.thumbnail = C.data.chromeAssets[o.thumbnail] : s(o))
                            }
                        }

                        function s(t, n) {
                            getImgDataSrc(t.thumbnail, function (e) {
                                C.data.chromeAssets[t.thumbnail] = e, t.thumbnail = e, n && n()
                            })
                        }
                    }

                    C.initializeSettings(), config.videosInMediaTab && d("video", {thumb: "img/ui/videoFile.png"}), config.audioInMediaTab && d("audio", {thumb: "img/ui/audioFile.png"}), config.imagesInMediaTab && d("image", {});
                    var u = getElementsByAttribute(C.data.epub.manifest, "item", "properties", "cover-image");
                    0 < u.length ? C.data.epub.bookThumb = S("coverPath")(u[0].getAttribute("href")) : C.data.book.meta.cover && 0 < (u = getElementsByAttribute(C.data.epub.manifest, "item", "id", C.data.book.meta.cover)).length && (C.data.epub.bookThumb = S("coverPath")(u[0].getAttribute("href"))), chromeApp && C.data.epub.bookThumb && (C.data.chromeAssets[C.data.epub.bookThumb] ? C.data.epub.bookThumb = C.data.chromeAssets[C.data.epub.bookThumb] : getImgDataSrc(C.data.epub.bookThumb, function (e) {
                        C.data.chromeAssets[C.data.epub.bookThumb] = e, C.data.epub.bookThumb = e
                    }));
                    try {
                        C.data.tocPath = getElementsByAttribute(C.data.epub.manifest, "item", "properties", "[s]*nav[s]*")[0].getAttribute("href")
                    } catch (e) {
                        var h = C.data.epub.spine.getAttribute("toc");
                        if (!h) return void m();
                        try {
                            C.data.book.version = 2, C.data.tocPath = getElementsByAttribute(C.data.epub.manifest, "item", "id", h)[0].getAttribute("href")
                        } catch (e) {
                            return void m()
                        }
                    }
                    v.get(cacheBust(ph.join(bookPath, C.data.packageURL, C.data.tocPath))).success(function (e) {
                        if (config.kotobee.encodekey && (e = 1.1 <= config.v ? CryptoJS.AES.decrypt(e, config.kotobee.encodekey).toString(CryptoJS.enc.Utf8) : kInteractive.XORCipher().decode(config.kotobee.encodekey, e)), 2 == C.data.book.version) {
                            var t = parseXml(e).getElementsByTagName("navMap");
                            t.length && (C.data.toc = function e(t) {
                                var n = document.createElement("ol");
                                for (var r = 0; r < t.childNodes.length; r++) if (t.childNodes[r]) {
                                    var i = t.childNodes[r];
                                    if (8 != i.nodeType && "#text" != i.nodeName && "navpoint" == i.nodeName.toLowerCase()) {
                                        for (var o, a, s, l = 0; l < i.childNodes.length; l++) if (i.childNodes[l]) {
                                            var c = i.childNodes[l].nodeName.toLowerCase();
                                            "content" == c ? a = i.childNodes[l].getAttribute("src") : "navlabel" == c ? o = i.childNodes[l].textContent.trim() : "navpoint" == c && (s = s || e(i))
                                        }
                                        var d = document.createElement("li"), u = document.createElement("a");
                                        u.innerHTML = o || "", u.setAttribute("href", a ? ph.join(C.data.tocPath, a) : ""), d.appendChild(u), s && d.appendChild(s), n.appendChild(d)
                                    }
                                }
                                return n
                            }(t[0]))
                        } else for (var n = parseHtml(e).getElementsByTagName("nav"), r = 0; r < n.length; r++) if (!n[r].hasAttribute("epub:type") || "toc" == n[r].getAttribute("epub:type")) for (var i = n[r].getElementsByTagName("ol"), o = 0, a = 0; a < i.length; a++) {
                            var s = i[a].getElementsByTagName("a");
                            if (!(s.length < o)) {
                                o = s.length, C.data.toc = i[a];
                                for (var l = s.length; l--;) s[l].getAttribute("href") ? s[l].setAttribute("href", ph.join(C.data.tocPath, s[l].getAttribute("href"))) : s[l].setAttribute("href", "")
                            }
                        }
                        m()
                    }), x.send({verb: "opened", activity: "Book: " + C.data.book.meta.dc.title})
                }).error(function () {
                    r.update({error: "networkError", ref: n})
                })
            })
        }).error(function (e) {
            k.update(), native || desktop || "file://" != window.location.origin ? r.update({
                error: "errorAndCallback",
                msg: native ? "errorLoadingBookNative" : "errorLoadingBook",
                cb: i.exit
            }) : r.update({error: "This browser failed to run the ebook app locally. Please try a different browser, or upload the web files to your server and run the web app online"})
        }), e.promise
    }, A.getTitleByIndex = function (e) {
        if (C.data.toc) try {
            for (var t = C.data.toc.getElementsByTagName("li"), n = [], r = 0; r < t.length; r++) if (t[r]) {
                var i = t[r].getElementsByTagName("a");
                i.length && "true" != i[0].getAttribute("data-dontshow") && n.push(t[r])
            }
            return n[e].getElementsByTagName("a")[0].textContent
        } catch (e) {
        }
    }, A
}]), app.factory("bookinfo", ["khttp", "error", "$timeout", "auth", "$rootScope", "crdv", "np", "library", "book", "sync", "$location", "events", "translit", "modals", "cssInjector", "jsParser", "chapters", "cssParser", "$q", "status", "backend", "tinCan", "stg", "$sce", "$filter", function (a, e, r, t, s, l, c, n, d, i, o, u, h, f, p, g, m, v, b, y, w, k, x, C, S) {
    var A, L, N, I, E = {};

    function T(e) {
        var t = {};
        return t.background = "url('" + e + "')", t["background-size"] = "cover", t["background-position"] = "center center", t.opacity = "1", t
    }

    function B() {
        if ("loading" == A) {
            if ("public" == L.accessmode || "all" == L.accessmode) return;
            L.redirect = null, w.hasAccessTo({testagainst: L.id}, function (e) {
                e.success ? P() : (A = "denied", L.redirect = x.data.currentLibrary.unauthredirect, L.overrideunauthredirect && (L.redirect = L.unauthredirect)), M(), s.$$phase || s.$apply()
            })
        }
    }

    function O(e) {
        return x.data.info || (x.data.info = {}), x.data.info["book" + e.id] || (x.data.info["book" + e.id] = {}), x.data.info["book" + e.id]
    }

    function P() {
        L && (native || desktop ? A = L.updating ? "updating" : L.exists ? "open" : O(L).loading ? "downloading" : O(L).extracting ? "extracting" : w.cloudParam("public") ? "download" : x.data.user.loggedIn ? "download" : "public" == L.accessmode || "all" == L.accessmode ? "download" : w.cloudParam("entry") ? "login" : "download" : w.cloudParam("public") ? A = "open" : x.data.user.loggedIn ? A = "open" : "public" == L.accessmode || "all" == L.accessmode ? A = "open" : w.cloudParam("entry") && (A = "login"))
    }

    function M() {
        N && N.ui && (N.ui.actionBtnIcon = function () {
            if ("open" == A) return "ion-eye size18";
            if ("login" == A) return "ion-person";
            if ("download" == A) return "fa fa-cloud-download";
            if ("downloading" == A) return null;
            if ("updating" == A) return null;
            if ("loading" == A) return null
        }(), N.ui.actionBtnSpinnerIcon = function () {
            if ("downloading" == A) return "dots";
            {
                if ("updating" == A) return "dots";
                if ("loading" == A) return "dots"
            }
        }(), N.ui.actionBtnLabel = function () {
            if ("open" == A) return "openBook";
            if ("login" == A) return "loginToRead";
            if ("download" == A) return "download";
            if ("downloading" == A) return "downloading";
            if ("updating" == A) return "updating";
            if ("extracting" == A) return "extracting";
            if ("loading" == A) return "pleaseWait";
            if ("denied" == A) return "bookAccessDenied"
        }(), N.ui.actionBtnStyle = "open" == A ? "openBtn" : "login" == A ? "openBtn" : "downloading" == A ? "downloadingBtn" : "updating" == A ? "downloadingBtn" : "extracting" == A ? "downloadingBtn" : "loading" == A ? "loadingBtn" : "denied" == A ? "deniedBtn" : "downloadBtn")
    }

    function _() {
        E.show(I), r(function () {
            E.update(L)
        }, 800)
    }

    return E.redeemCode = function () {
        f.hide(), t.redeemCode({source: "bookinfo"}, function () {
            E.show(I)
        })
    }, E.show = function (t, e) {
        e = e || {}, L = (I = t).book, native && l.vibrate(), t.book.coverImg = d.getCoverImgPath(t.book), t.book.coverStyle = t.book.bannerStyle = {"background-image": "url('" + t.book.coverImg + "')"}, t.book.bgimg && (t.book.bannerStyle = T(d.getBgImgPath(t.book))), chromeApp && (x.data.chromeAssets[t.book.coverImg] ? t.book.coverStyle = t.book.bannerStyle = {"background-image": "url('" + x.data.chromeAssets[t.book.coverImg] + "')"} : getImgDataSrc(t.book.coverImg, function (e) {
            x.data.chromeAssets[t.book.coverImg] = e, t.book.coverStyle = {"background-image": "url('" + e + "')"}, t.book.bgimg || (t.book.bannerStyle = t.book.coverStyle)
        }), t.book.bgimg && (x.data.chromeAssets[t.book.bgImg] ? t.book.bannerStyle = T(x.data.chromeAssets[t.book.bgImg]) : getImgDataSrc(d.getBgImgPath(t.book), function (e) {
            x.data.chromeAssets[t.book.bgImg] = e, t.book.bannerStyle = T(e)
        })));
        var n = {};
        for (var r in t.book.meta || (t.book.meta = {}), t.book.meta) n[r] = t.book.meta[r];
        t.book.meta.dc = n;
        var i = {};
        i.book = t.book, i.categoryClicked = t.categoryClicked, i.ui = {}, N = i;
        var o = "slide-in-up";
        "none" == e.animation && (o = "none"), f.show({
            mode: "bookInfo",
            dynamic: !0,
            animation: o,
            bookInfoOptions: i
        }), function () {
            P(), !native && !desktop || "download" != A || "public" != L.accessmode && "all" != L.accessmode && (A = "loading");
            native || desktop || "open" != A || "public" != L.accessmode && "all" != L.accessmode && (A = "loading");
            "login" == A && (L.unauthredirect && (L.redirect = x.data.currentLibrary.unauthredirect), L.overrideunauthredirect && (L.redirect = L.unauthredirect));
            M()
        }(), function (t) {
            if ("library" != config.kotobee.mode) return;
            if (!native && !desktop) return;
            if (!L.exists) return;
            !function (r) {
                var i = c.getBooksPath() + L.path;
                "mac" == os && (i = "file://" + i);
                native && (i = l.libEbooksDirectory.nativeURL + L.path + "/EPUB");

                function e(n) {
                    a.get(cacheBust(ph.join(i, "_kmeta/config.js"))).success(function (e) {
                        if (!e) return n();
                        e = e.replace("var config = ", "");
                        var t = JSON.parse(e).checksum;
                        if (!t) return n();
                        n(t)
                    }).error(function () {
                        n()
                    })
                }

                !function (t) {
                    a.get(cacheBust(ph.join(i, "ver.txt"))).success(function (e) {
                        t(e)
                    }).error(function () {
                        t()
                    })
                }(function (n) {
                    asyncCheck(null != n, e, [], function (e) {
                        var t = {};
                        t.bid = L.id, null != n && (t.ver = n), null != e && (t.checksum = e), w.checkBookUpdates(t, function (e) {
                            if (e) {
                                if (null == t.ver && (desktop ? c.writeFile(i + "/ver.txt", e.ver) : native && l.writeFile(e.ver, L.path + "/EPUB/ver.txt", l.libEbooksDirectory)), e.latestVer > e.ver) return r(!0);
                                r()
                            }
                        })
                    })
                })
            }(function (e) {
                t.updateAvailable = e, s.$$phase || s.$apply()
            })
        }(i), setTimeout(B, mobile ? 1e3 : 500)
    }, E.update = function (e) {
        L.updating || (L.updating = !0, E.download(e, function () {
            L.updating = !1
        }), s.$$phase || s.$apply())
    }, E.download = function (t, n) {
        function e(e) {
            O(t).progress = Math.ceil(100 * e), s.$$phase || s.$apply()
        }

        O(t).loading || (l.vibrate(), l.toast(h.get("bookIsDownloading")), O(t).loading = !0, P(), M(), O(t).progress = 0, setTimeout(function () {
            w.downloadEbook(t, e, function (e) {
                O(t).loading = null, e && (O(t).extracting = !0, P(), M(), r(function () {
                    !function (e, t, n, r) {
                        native ? l.writeEbook(e, t, n, r) : desktop && c.writeEbook(e, t, n, r)
                    }("src.zip", t, e, function (e) {
                        O(t).extracting = null, P(), M(), f.hide(), r(function () {
                            f.show({
                                mode: "bookDownloaded",
                                downloadedOptions: {book: t, open: d.open},
                                apply: !0
                            }), l.applyExistingBooks(x.data.currentLibrary.books), w.addBookStat({type: "download"}), n && n()
                        }, 1e3)
                    })
                }))
            })
        }, 500))
    }, E.action = function (e) {
        if ("loading" != A) if ("denied" != A) {
            if ("open" == A) {
                if (N.updateAvailable) return f.hide(), void r(function () {
                    f.show({
                        mode: "bookUpdateAvailable",
                        updateAvailableOptions: {book: L, open: d.open, update: _},
                        apply: !0
                    })
                }, 500);
                d.open(e)
            } else "login" == A ? (f.hide(), setTimeout(w.login, 1e3)) : "download" == A && E.download(e);
            P(), M()
        } else u.add({action: "accessDeniedBtnClicked", param: e.name, bid: e.id})
    }, E.delete = function (e) {
        l.toast(h.get("deletingBook")), l.vibrate(), function (e, t) {
            native ? l.deleteEbook(e, t) : desktop && c.deleteEbook(e, t)
        }(e, function () {
            P(), M(), s.$$phase || s.$apply()
        })
    }, E.toggleFav = function (e) {
        e.favorite ? E.removeFav(e, !0) : E.addToFav(e, !0)
    }, E.addToFav = function (e, t) {
        t ? e.favorite = !0 : y.update(h.get("addingToFavorites"), null, {dots: !0}), w.addtoFav(e, function () {
            e.favorite = !0, t || y.update()
        })
    }, E.removeFav = function (e, t) {
        t ? e.favorite = !1 : y.update(h.get("removingFromFavorites"), null, {dots: !0}), w.removeFav(e, function () {
            e.favorite = !1, t || y.update(), angular.element(document.getElementById("library")).scope().loadFavorites()
        })
    }, E
}]), app.factory("cache", function () {
    var n = {}, r = {};
    return n.initialize = function () {
        n.setOb("body", document.getElementsByTagName("body")[0]);
        var e = document.getElementsByTagName("title"), t = null;
        e.length ? t = e[0] : (t = document.createElement("title"), document.head.appendChild(t)), n.setOb("title", t)
    }, n.setOb = function (e, t) {
        return r[e] = t
    }, n.getOb = function (e) {
        return r[e]
    }, n
}), app.factory("chapterAPI", ["chapters", "stg", "$ionicSideMenuDelegate", "nav", "notes", "translit", "events", "scorm", "selection", "$ionicScrollDelegate", "$rootScope", "$location", "backend", "tinCan", "settings", function (i, o, e, t, a, n, s, r, l, c, d, u, h, f, p) {
    var g = {}, m = [];

    function v() {
        if (!(arguments.length < 2)) {
            var e, t = arguments[0], n = {};
            e = 2 == arguments.length ? arguments[1] : (n = arguments[1], arguments[2]), n.unique && y(t);
            var r = {event: t, cb: e};
            m.push(r)
        }
    }

    function b(e, t) {
        if (e) {
            var n = function (e) {
                if (!e) return;
                for (var t = m.length; t--;) if (m[t].event == e) return m[t]
            }(e);
            n && n.cb && n.cb.apply(this, [t])
        }
    }

    function y(e) {
        for (var t = m.length; t--;) e && m[t].event != e || m.splice(t, 1)
    }

    function w() {
        var e = document.getElementById("tabMenu");
        if (e) return angular.element(e).scope()
    }

    function k() {
        var e = w();
        e && e.notebookClicked()
    }

    function x() {
        var e = w();
        e && e.pdfClicked()
    }

    function C() {
        var e = w();
        e && e.printClicked()
    }

    function S() {
        var e = w();
        e && e.settingsClicked()
    }

    function A() {
        var e = w();
        e && e.searchClicked()
    }

    function L(n) {
        var e = w();
        e && e.searchClicked(function () {
            if (n) {
                var e = document.getElementById("readerBody"), t = angular.element(e).scope();
                t.clearResults(), d.$$phase || d.$apply(), setTimeout(function () {
                    document.getElementById("searchModalField").value = n, t.search(n)
                }, 30)
            }
        })
    }

    function N() {
        var e = w();
        e && e.mediaClicked()
    }

    function I() {
        var e = w();
        e && e.chaptersClicked()
    }

    function E() {
        e.toggleRight(!1), e.toggleLeft(!1), t.fullscreen()
    }

    function T(e, t) {
        o.data.settings.language = e, p.langChanged(t)
    }

    function B(e) {
        n.setDirection(e)
    }

    function O() {
        i.nextChapter()
    }

    function P() {
        i.prevChapter()
    }

    function M(e) {
        i.loadChapterByIndex(e)
    }

    function _(e) {
        u.search("vi"), i.applyChapterStateFromURL(e, {vIndex: 0}), d.$$phase || d.$apply()
    }

    function F(e, t, n) {
        i.preloadChapterFromApi(e, t, n)
    }

    function R() {
        i.clearCache()
    }

    function D(e) {
        i.neverCache(e)
    }

    function j() {
        var e, t = c.$getByHandle("content");
        if (t && (e = t.getScrollPosition()), 1 == e.zoom) {
            var n = document.getElementById("epubContainer");
            if (hasClass(n.children[0], "scroll")) {
                var r = n.children[0].style.transform.replace(/.*?scale\((.*?)\).*?/g, "$1");
                r && (e.zoom = Number(r))
            }
        }
        return e
    }

    function H(e) {
        var t = c.$getByHandle("content");
        t && t.scrollTo(0, 0, e)
    }

    function q(e, t) {
        var n = c.$getByHandle("content");
        n && n.scrollTo(0, e, t)
    }

    function U(e, t) {
        var n = clone(t = t || {});
        n.content = e, kInteractive.alert(n)
    }

    function z(e, t) {
        var n = {};
        n.content = e, isFunction(t) ? (n.okBtn = "Yes", n.noBtn = "No", n.cb = t) : (t.okBtn && (n.okBtn = t.okBtn), t.noBtn && (n.noBtn = t.noBtn), n.cb = t.cb, n.noBackdrop = t.noBackdrop), kInteractive.confirm(n)
    }

    function $(e, t) {
        h.externalLink(e, t)
    }

    function V(e, t) {
        var n = l.convertElemsToLocation([t]), r = {};
        r.chapter = i.getElemChapterIndex(t), r.location = n.left ? n.left : n.right, r.type = "content", r.src = t.textContent, r.note = e, o.addNote(r, function () {
            a.addIcon(r)
        })
    }

    function W(e, t) {
        r.setManual(e, t)
    }

    function G(e) {
        e = e || {}, f.send(e)
    }

    function K(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        if (!e.label) throw"'label' variable required.";
        if (!e.data) throw"'data' variable required.";
        h.setUserData(e, t)
    }

    function X(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        if (!e.label && !e.category && !e.subcategory) throw"No variable passed to use as a keyword.";
        h.getUserData(e, t)
    }

    function J(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        h.getUserList(e, t)
    }

    function Y(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        h.getUserDataArray({array: JSON.stringify(e)}, t)
    }

    function Z(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        h.setUserDataArray({array: JSON.stringify(e)}, t)
    }

    function Q(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        if (!e.label) throw"'label' variable required.";
        h.deleteUserData(e, t)
    }

    function ee(e, t) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        if (!e.to) throw"'to' variable required.";
        if (!e.message) throw"'message' variable required.";
        if (!e.subject) throw"'subject' variable required.";
        if (!e.fromName) throw"'fromName' variable required.";
        if (!e.fromEmail) throw"'fromEmail' variable required.";
        h.sendEmail(e, t)
    }

    function te(e, t, n) {
        if (!o.data.user.loggedIn) throw"User must be logged in.";
        if (!e) throw"Event name is required.";
        2 == arguments.length && isFunction(t) && (n = t, t = null);
        var r = {};
        r.event = e, r.data = JSON.stringify(t || {}), s.add({action: "customEvent", param: JSON.stringify(r)}, n)
    }

    return g.initialize = function () {
        kotobee.addEventListener = v, kotobee.dispatchEvent = b, kotobee.clearListeners = y, kotobee.openNotebook = k, kotobee.exportPDF = x, kotobee.print = C, kotobee.openSettings = S, kotobee.openSearch = A, kotobee.search = L, kotobee.openMedia = N, kotobee.openChapters = I, kotobee.toggleFullscreen = E, kotobee.setLanguage = T, kotobee.setDirection = B, kotobee.nextChapter = O, kotobee.prevChapter = P, kotobee.gotoChapterIndex = M, kotobee.gotoChapterHref = _, kotobee.getChapter = F, kotobee.clearCache = R, kotobee.neverCache = D, kotobee.getScrollPosition = j, kotobee.scrollToTop = H, kotobee.scrollTo = q, kotobee.view = {}, kotobee.popup = U, kotobee.confirm = z, kotobee.openLink = $, kotobee.addToNotebook = V, kotobee.sendScorm = W, kotobee.sendTinCan = G, kotobee.setData = K, kotobee.getData = X, kotobee.getDataArray = Y, kotobee.setDataArray = Z, kotobee.getUsers = J, kotobee.deleteData = Q, kotobee.sendEmail = ee, kotobee.triggerEvent = te, Object.defineProperty(kotobee, "user", {
            get: function () {
                var e = clone(o.data.user);
                return delete e.pwd, delete e.rememberMe, delete e.signatures, e
            }, set: function (e) {
                return null
            }
        }), Object.defineProperty(kotobee, "book", {
            get: function () {
                return o.data.book
            }, set: function (e) {
                return null
            }
        }), Object.defineProperty(kotobee, "epub", {
            get: function () {
                return o.data.epub
            }, set: function (e) {
                return null
            }
        }), Object.defineProperty(kotobee, "currentPage", {
            get: function () {
                return o.data.currentPageOb
            }, set: function (e) {
                return null
            }
        }), Object.defineProperty(kotobee, "currentChapter", {
            get: function () {
                return o.data.currentPageOb
            }, set: function (e) {
                return null
            }
        }), Object.defineProperty(kotobee.view, "swipe", {
            get: function () {
                return !t.options.swipeDisabled
            }, set: function (e) {
                t.options.swipeDisabled = !e
            }
        }), Object.defineProperty(kotobee.view, "doubletap", {
            get: function () {
                return !t.options.doubletapDisabled
            }, set: function (e) {
                t.options.doubletapDisabled = !e
            }
        }), Object.defineProperty(kotobee.view, "scroll", {
            get: function () {
                var e = c.$getByHandle("content");
                if (e) return e.getScrollView().options.scrollingY
            }, set: function (e) {
                var t = c.$getByHandle("content");
                t && (t.getScrollView().options.scrollingY = e)
            }
        }), Object.defineProperty(kotobee, "documentation", {
            get: function () {
                var e = [];
                e.push({
                    method: "openNotebook()",
                    desc: "Opens the reader's notebook panel."
                }), e.push({
                    method: "exportPDF()",
                    desc: "Exports the current chapter as a PDF file."
                }), e.push({method: "print()", desc: "Prints the current chapter."}), e.push({
                    method: "openSettings()",
                    desc: "Opens the reader's settings panel."
                }), e.push({
                    method: "openSearch()",
                    desc: "Opens the reader's search panel."
                }), e.push({
                    method: "openMedia()",
                    desc: "Opens the reader's media panel."
                }), e.push({
                    method: "openChapters()",
                    desc: "Opens the reader's chapters panel (table of contents)."
                }), e.push({
                    method: "toggleFullscreen()",
                    desc: "Toggle reader into fullscreen mode."
                }), e.push({
                    method: "setLanguage(lang)",
                    desc: "Set the reader language. This method takes the language's 2 character abbreviation as input. Possible values: en,fr,es,pt,nl,de,hu,it,sw,ms,no,pl,ro,ru,tr,ar,zh,jp,ko."
                });
                var t = [];
                t.push({
                    method: "nextChapter()",
                    desc: "Jump to the next chapter, relative to the current chapter."
                }), t.push({
                    method: "prevChapter()",
                    desc: "Jump to the previous chapter, relative to the current chapter."
                }), t.push({
                    method: "gotoChapterIndex(index)",
                    desc: "Jump to a certain chapter, passing its index as input."
                }), t.push({
                    method: "gotoChapterHref(url)",
                    desc: "Jump to a certain chapter, passing its relative URL as input."
                }), t.push({
                    method: "getChapter(url, callback, errorCallback)",
                    desc: "Retrieve the chapter object, passing its relative URL as input. This method also takes 2 more arguments: a success callback with the chapter object, and an error callback."
                }), t.push({
                    method: "clearCache()",
                    desc: "Clear any cached chapter content."
                }), t.push({
                    method: "neverCache(chapterOb)",
                    desc: "Set the reader never to cache a specific chapter. This will cause chapters to be continuously loaded and never stored in memory. The chapter object is passed an input."
                }), t.push({
                    method: "getScrollPosition()",
                    desc: "Get the current chapter's scroll position."
                }), t.push({
                    method: "scrollToTop(animate)",
                    desc: "Scroll to the top of the chapter. This method also takes a second argument, to indicate whether scroll animation should be used."
                }), t.push({
                    method: "scrollTo(y, animate)",
                    desc: "Scroll to a certain y location. The y location is provided as an input. This method also takes a second argument, to indicate whether scroll animation should be used."
                });
                var n = [];
                n.push({
                    method: "view.doubletap",
                    desc: "Property to enable or disable double tapping (or double clicking) to zoom in."
                }), n.push({
                    method: "view.swipe",
                    desc: "Property to enable or disable swiping."
                }), n.push({method: "view.scroll", desc: "Property to enable or disable vertical scrolling."});
                var r = [];
                r.push({
                    method: "popup(html, options)",
                    desc: "Display certain HTML content inside the reader's popup. Takes an optional object with the following properties:",
                    args: [{
                        Property: "title",
                        Description: "The text appearing in the title bar of the popup."
                    }, {
                        Property: "okBtn",
                        Description: "The label of the default OK button at the footer of the popup."
                    }, {
                        Property: "cb",
                        Description: "A callback function, called when the user clicks on OK."
                    }, {
                        Property: "raw",
                        Description: "Display only the passed HTML (raw) as a popup, without a frame and OK button. The above properties won't be effective if raw is set to true."
                    }, {Property: "noBackdrop", Description: "Don't display a backdrop when the popup is opened."}]
                }), r.push({
                    method: "confirm(html,callback)",
                    desc: "Display certain content inside a confirmation box. The second argument represents the callback function in case the user confirms.",
                    args: [{
                        Property: "okBtn",
                        Description: "The label of the 'Yes' button at the footer of the popup. Defaults to 'Yes'"
                    }, {
                        Property: "noBtn",
                        Description: "The label of the 'No' button at the footer of the popup. Defaults to 'No'"
                    }, {
                        Property: "cb",
                        Description: "A callback function, called when the user clicks on the 'Yes' button."
                    }, {Property: "noBackdrop", Description: "Don't display a backdrop when the popup is opened."}]
                }), r.push({
                    method: "openLink(url)",
                    desc: "Open a certain URL inside a sliding panel."
                }), r.push({
                    method: "addToNotebook(note, element)",
                    desc: "Add certain content to the notebook. The note is provided as the first argument, and the element to attach the note to is provided as the second argument."
                });
                var i = [];
                i.push({
                    method: "sendScorm(element,value)",
                    desc: "Set a SCORM run-time element with a value. This requires that the ebook is running as a SCORM package inside an LMS."
                }), i.push({
                    method: "sendTinCan(activityOb)",
                    desc: "Send a Tin Can activity to the LRS configured in the ebook/library settings. Available for cloud ebooks and libraries only."
                });
                var o = [];
                o.push({
                    method: "setData(dataOb, callback)",
                    desc: "Write data into the database for the currently logged in user. You will be able to fully label that data, for easy retrieval later. This methods takes an object with the following options:",
                    args: [{
                        Property: "label",
                        Description: "The label (key) representing this slot of data (required)."
                    }, {Property: "data", Description: "The data to write (required)."}, {
                        Property: "overwrite",
                        Description: "In case this data exists, overwrite it"
                    }, {
                        Property: "category",
                        Description: "For better organization, set a category for this data. This will make queries more efficient."
                    }, {
                        Property: "subcategory",
                        Description: "For further organization, set a subcategory for this data. This will make queries more efficient."
                    }, {
                        Property: "options",
                        Description: "Set options for this data. This is treated as normal text, and can be used when querying for data."
                    }]
                }), o.push({
                    method: "setDataArray(array, callback)",
                    desc: "Set a collection of data items into the database in a single request, for the currently logged in user. It takes an array of objects, each taking the same parameters as 'setData' method above."
                }), o.push({
                    method: "getData(queryOb, callback)",
                    desc: "Retrieve data for the currently logged in user. It takes an object with the following options, and triggers a callback (the second argument) passing back the array of data.",
                    args: [{
                        Property: "label",
                        Description: "The label (key) representing this slot of data."
                    }, {
                        Property: "category",
                        Description: "The category assigned to this data, to use as a search parameter."
                    }, {
                        Property: "subcategory",
                        Description: "The subcategory assigned to this data, to use as a search parameter."
                    }, {
                        Property: "options",
                        Description: "The options for this data, to use as a search parameter."
                    }, {
                        Property: "allUsers",
                        Description: "Expand the scope of search to all users with access to this cloud ebook or library. To use this option, the user must have global data permissions."
                    }, {Property: "role", Description: "Search by user role."}]
                }), o.push({
                    method: "getDataArray(array, callback)",
                    desc: "Send a collection of search queries for the currently logged in user, all in a single request. It takes an array of objects specified in the getData method, in addition to an 'id' object to label the results returned in an array."
                }), o.push({
                    method: "getUsers",
                    desc: "For logged in users with global data permissions, get an array of all users added to this cloud ebook/library.",
                    args: [{Property: "role", Description: "Limit the results to a specific user role."}]
                }), o.push({
                    method: "deleteData(queryOb, callback)",
                    desc: "Delete a certain data slot for the currently logged in user. It takes an object with the following options:",
                    args: [{
                        Property: "label",
                        Description: "The label (key) representing this slot of data (required)."
                    }, {
                        Property: "category",
                        Description: "The category assigned to this data, to use as a search parameter."
                    }, {
                        Property: "subcategory",
                        Description: "The subcategory assigned to this data, to use as a search parameter."
                    }, {
                        Property: "options",
                        Description: "Set options for this data. This is treated as normal text, and can be used when querying for data."
                    }, {
                        Property: "all",
                        Description: "If this is true, all matching results will be deleted. It not, only the first result is deleted."
                    }]
                }), o.push({
                    method: "sendEmail(emailOb, callback)",
                    desc: "Send a custom email. Note you must first contact Kotobee Support and have email sending credentials in order to activate email sending through the API. This method takes an object with the following options:",
                    args: [{Property: "to", Description: "The email address of the recipient."}, {
                        Property: "message",
                        Description: "The message body to send."
                    }, {
                        Property: "html",
                        Description: "An optional boolean specifying whether the message body is HTML formatted. Default: false."
                    }, {Property: "subject", Description: "The email subject."}, {
                        Property: "fromName",
                        Description: "The sender name."
                    }, {Property: "fromEmail", Description: "The sender email."}, {
                        Property: "cc",
                        Description: "An optional array of other email addresses to send a copy to."
                    }]
                }), o.push({
                    method: "triggerEvent(event, params, callback)",
                    desc: "Trigger a custom event to notify subscribers using email, software, or push notifications. The optional params variable holds any kind of data that is needed to be sent as it is to the subscribers"
                });
                var a = [];
                a.push({
                    prop: "epub",
                    desc: "The parsed epub object, showing the metadata, manifest, spine, and book thumbnail."
                }), a.push({
                    prop: "book",
                    desc: "The book object obtained from the epub, by the reader."
                }), a.push({
                    prop: "currentChapter",
                    desc: "The current chapter object, containing all its parsed properties."
                }), a.push({
                    prop: "currentPage",
                    desc: "In the case that a reflowable layout is paginated (displayed without a scrollbar, as single page or double page view), the currently displayed page(s) is(are) returned by this property."
                }), a.push({
                    prop: "user",
                    desc: "The currently logged in user. Return an object containing his id, name, email, and user role (if exists)."
                });
                var s = [];
                s.push({
                    event: "addEventListener(event, [options], callback)",
                    desc: "Listen to a certain event (string) and call a function once the event is fired. This function takes an optional second argument (options) with the following properties:",
                    args: [{
                        Property: "unique",
                        Description: "If an event listener already exists for this event, it will be removed, before adding the new one."
                    }]
                }), s.push({
                    event: null,
                    desc: "An event object will be passed to the callback function containing the DOM element and any additional data associated with the event."
                }), s.push({
                    event: "dispatchEvent(event)",
                    desc: "Fire a certain event. The function takes the event name (as a string)."
                }), s.push({
                    event: "clearListeners(event)",
                    desc: "Clear all listeners that are listening to a certain event (as a string). If no event is passed, then all listeners attached to the kotobee object are cleared."
                });
                var l = [];
                l.push({
                    event: "ready",
                    desc: "Triggered from the document object, whenever the ebook or library initialization is complete. It is fired just once."
                }), l.push({
                    event: "chapterLoaded",
                    desc: "Triggered whenever a new chapter is loaded and ready for use."
                }), l.push({
                    event: "chapterViewed",
                    desc: "Similar to chapterLoaded, but is triggered when the chapter is viewed on the screen."
                }), l.push({
                    event: "scrolled",
                    desc: "Triggered whenever a chapter is scrolled. An object is passed back containing the scroll position."
                }), l.push({
                    event: "linkClicked",
                    desc: "Triggered when the user clicks on an external link inside any chapter."
                }), l.push({
                    event: "audioPlayed",
                    desc: "Triggered when the user clicks an audio play button."
                }), l.push({
                    event: "audioLinkClicked",
                    desc: "Triggered when a text hyperlinked to audio is clicked."
                }), l.push({
                    event: "videoPlayed",
                    desc: "Triggered when the user clicks a video play button."
                }), l.push({
                    event: "popup",
                    desc: "Triggered when a link popup is clicked and displayed on the screen."
                }), l.push({
                    event: "questionPopup",
                    desc: "Triggered when a questions component, set to display in a popup, is opened."
                }), l.push({
                    event: "questionsSubmitted",
                    desc: "Triggered when a question set is answered and submitted."
                }), l.push({
                    event: "answerClicked",
                    desc: "Triggered when a question answer box (radiobox, checkbox, textfield, etc) is changed. In the case of drag and drop questions, this even is triggered when an item is dragged into a category box."
                }), l.push({event: "3dModelViewed", desc: "Triggered when a 3D model is activated."});
                var c = "color: #000; font-weight: bold; font-size:18px",
                    d = "color: #224e97; font-size:12px; font-weight:bold",
                    u = "color: #224e97; font-size:12px; font-weight:bold", h = "margin-left:6px;",
                    f = "font-weight:bold;";
                setTimeout(console.clear.bind(console)), v("%cKotobee Reader API", "color: #000; font-weight: bold; font-size:22px;border:solid 1px #000;border-radius:8px;padding:5px 10px;"), v("%cThis documentation lists brief explanations of the different Kotobee Reader API methods, properties, and events, used to interact with the reader and build scalable ebook applications. A backend Developer API is also available for remotely controlling different aspects of your cloud ebooks and libraries, here: http://support.kotobee.com/en/support/solutions/folders/8000082574."), g(), v("%cUI Methods", c), v("%cThese methods are used to interact with the reader's different UI elements and components.", f);
                for (var p = 0; p < e.length; p++) v("%c" + e[p].method, d), v("%c" + e[p].desc, h);
                g(), v("%cContent Methods", c), v("%cThese methods are used to display/set content in different ways.", f);
                for (p = 0; p < r.length; p++) v("%c" + r[p].method, d), v("%c" + r[p].desc, h), r[p].args && m(r[p].args);
                g(), v("%cNavigation Methods", c), v("%cThese methods are used mainly to navigate to different chapters efficiently.", f);
                for (p = 0; p < t.length; p++) v("%c" + t[p].method, d), v("%c" + t[p].desc, h);
                g(), v("%cView Options", c), v("%cThese properties are used to control viewing options.", f);
                for (p = 0; p < n.length; p++) v("%c" + n[p].method, d), v("%c" + n[p].desc, h);
                g(), v("%cSCORM / Tin Can Methods", c), v("%cThese methods are used to send progress to an LMS or LRS.", f);
                for (p = 0; p < i.length; p++) v("%c" + i[p].method, d), v("%c" + i[p].desc, h);
                g(), v("%cCloud Methods", c), v("%cThese methods are used to store and retrieve user data into the database, for that cloud ebook or library. These methods are available for logged in users only.", f);
                for (p = 0; p < o.length; p++) v("%c" + o[p].method, d), v("%c" + o[p].desc, h), o[p].args && m(o[p].args);
                g(), v("%cProperties", c), v("%cThese properties are used to describe the book and user.", f);
                for (p = 0; p < a.length; p++) v("%c" + a[p].prop, "color: #224e97; font-size:12px; font-weight:bold"), v("%c" + a[p].desc, h);
                g(), v("%cEvents Methods", c), v("%cThese methods are used to listen to and manage events fired by kotobee.", f);
                for (p = 0; p < s.length; p++) s[p].event && v("%c" + s[p].event, u), v("%c" + s[p].desc, h), s[p].args && m(s[p].args);
                v("%cEvent types", "font-weight:bold;font-size:14px;margin-top:6px;margin-bottom:6px;");
                for (p = 0; p < l.length; p++) v("%c" + l[p].event, u), v("%c" + l[p].desc, h);

                function g() {
                    v("")
                }

                function m(e) {
                    setTimeout(console.table.bind(console, e))
                }

                function v(e, t) {
                    setTimeout(console.log.bind(console, e, t || ""))
                }

                return null
            }, set: function (e) {
                return null
            }
        })
    }, g
}]), app.factory("chapters", ["khttp", "tinCan", "backend", "context", "events", "library", "error", "crdv", "skeleton", "$stateParams", "sync", "$ionicSideMenuDelegate", "scorm", "cache", "modals", "status", "$injector", "$timeout", "virt", "$ionicPopup", "translit", "selection", "$ionicScrollDelegate", "$filter", "$rootScope", "cssInjector", "cssParser", "jsParser", "$location", "$sce", "$q", "stg", function (r, f, s, p, i, e, a, o, l, c, d, t, u, g, h, m, v, n, b, y, w, k, x, C, S, A, L, N, I, E, T, B) {
    var O, P, M, _, F, R, D, j, H, q, U, z, $, V = {}, W = [], G = [], K = [];

    function X(e) {
        for (var t = 0; t < K.length; t++) if (K[t] == e) return !0
    }

    function J(t, n) {
        var r = {leftOb: {}};
        V.getPageOb({page: t.index, source: "getNextIndex"}, function (e) {
            if (!e) return n();
            e.pages ? t.vIndex < e.pages.length - 1 ? (r.leftOb.index = t.index, r.leftOb.vIndex = t.vIndex + 1) : (r.leftOb.index = t.index + 1, r.leftOb.vIndex = 0) : r.leftOb.index = t.index + 1, n(r)
        })
    }

    function Y(t, n) {
        var r = {leftOb: {}};
        if (V.shouldBePaged(t)) {
            if (!t.vIndex || 0 == t.vIndex) return void V.getPageOb({
                page: t.index - 1,
                source: "stepBack"
            }, function (e) {
                r.leftOb.index = t.index - 1, e.pages && e.pages.length && (r.leftOb.vIndex = e.pages.length - 1), n(r)
            });
            r.leftOb.index = t.index, r.leftOb.vIndex = t.vIndex - 1
        } else r.leftOb.index = t.index - 1;
        n(r)
    }

    function Z(e) {
        if (!(e < 0 || e >= B.data.epub.spine.getElementsByTagName("itemref").length - 1)) {
            var t = B.data.epub.spine.getElementsByTagName("itemref")[e];
            if (t) {
                var n = t.getAttribute("properties");
                if (n) for (var r = n.split(" "), i = 0; i < r.length; i++) if (0 < r[i].indexOf("-spread-")) return r[i].split("-spread-")[1]
            }
        }
    }

    function Q(e, t, n) {
        var r = V.cacheLookup(e);
        r ? n(r) : V.preloadChapter(e, t, n)
    }

    function ee() {
        "undefined" != typeof kotobeeReady && kotobeeReady(), void 0 !== kotobee && kotobee.ready && kotobee.ready()
    }

    function te(e) {
        for (var t = 0; t < W.length; t++) W[t](e);
        if ("renderedChapter" == e) {
            try {
                document.dispatchEvent(new Event("kotobeeChapterLoaded"))
            } catch (e) {
            }
            if (kotobee) {
                var n = Object.assign({}, B.data.currentPageOb);
                n.container = document.getElementById("spreadL"), kotobee.dispatchEvent("chapterLoaded", n), B.data.currentRPageOb && ((n = Object.assign({}, B.data.currentRPageOb)).container = document.getElementById("spreadR"), kotobee.dispatchEvent("chapterLoaded", n))
            }
            u.setBookmark(currentIndex);
            var r = {};
            r.id = "chapter-" + currentIndex, r.description = "View chapter: " + B.data.book.chapter.title, r.learnerResponses = "Viewed", r.type = "other", r.timestamp = new Date, u.setInteractions([r]), i.add({
                action: "chapterViewed",
                param: B.data.book.chapter.title,
                data: currentIndex
            }), ne()
        }
    }

    function ne() {
        var e = (new Date).getTime(), t = (e - U) / 1e3;
        0 != t && B.data.book && (i.add({
            action: "activeTime",
            param: t,
            data: {title: B.data.book.chapter.title, index: currentIndex}
        }), U = e)
    }

    function re() {
        l.isFirstChapter({first: F}, function (t) {
            l.isLastChapter({last: P}, function (e) {
                B.data.book.chapter.notLastChapter = !e, B.data.book.chapter.notFirstChapter = !t, S.$$phase || S.$apply()
            })
        })
    }

    function ie() {
        timeOut(function () {
            m.update(null)
        }, 1e3)
    }

    function oe(e, t, n) {
        r.get(cacheBust(e)).success(function (e) {
            config.kotobee.encodekey && (e = 1.1 <= config.v ? CryptoJS.AES.decrypt(e, config.kotobee.encodekey).toString(CryptoJS.enc.Utf8) : kInteractive.XORCipher().decode(config.kotobee.encodekey, e)), e = (e = e.replace(/<br\s*?\/>/g, "<br>")).replace(/(<)([^ >]+)([^>]*?)(\/>)/g, "$1$2$3></$2>"), t && t(e)
        }).error(function () {
            n && n()
        })
    }

    V.busy = !0, V.initialize = function (a) {
        if (document.getElementById("chaptersInner")) {
            z || (z = !0, function () {
                var e, t;
                window.onpageshow = window.onfocus = function () {
                    U = (new Date).getTime()
                }, window.onpagehide = window.onblur = function () {
                    ne()
                }, void 0 !== document.hidden ? (e = "hidden", t = "visibilitychange") : void 0 !== document.msHidden ? (e = "msHidden", t = "msvisibilitychange") : void 0 !== document.webkitHidden && (e = "webkitHidden", t = "webkitvisibilitychange");
                document.addEventListener(t, function () {
                    document[e] ? ne() : U = (new Date).getTime()
                }, !1)
            }()), config.firstDoublePage || (config.firstDoublePage = 0), null == B.data.settings.pageScroll && (B.data.settings.pageScroll = !0), p.initialize(), U = (new Date).getTime(), currentIndex = null, B.data.currentPageOb = null, O = B.data.epub.spine.getElementsByTagName("itemref").length, P = O;
            for (var e = B.data.epub.spine.getElementsByTagName("itemref"), t = e.length; t--;) if (!e[t].hasAttribute("linear") || "no" != e[t].getAttribute("linear")) {
                P = t + 1;
                break
            }
            for (t = F = 0; t < e.length; t++) if (!e[t].hasAttribute("linear") || "no" != e[t].getAttribute("linear")) {
                F = t;
                break
            }
            V.displayTOC(), s.addBookStat({type: "view"}), R || (w.addListener(function () {
                var e = document.getElementById("chaptersInner");
                e && replaceHTML(e, B.data.book.chapters ? B.data.book.chapters : '<h5 class="panelEmpty"><i class="icon ion-alert-circled"></i> ' + w.get("noTOC") + "</h5>")
            }), R = !0);
            var n = document.getElementById("chaptersInner").getElementsByClassName("restricted");
            for (t = 0; t < n.length; t++) n[t].addEventListener("click", function (e) {
                var t = {
                    ch: e.currentTarget.textContent,
                    chIndex: e.currentTarget.getAttribute("data-index"),
                    currentCh: B.data.book.chapter.title
                };
                i.add({action: "restrictedTocClicked", param: JSON.stringify(t)})
            });
            C("bookSetup")(), V.showLoader(), V.resetPages(), V.preloadEdgeChapters(function () {
                var i = 0, o = 0;
                if (null != V.startChapter && "book" == config.kotobee.mode) {
                    var e = v.get("book").root + "/reader/chapter/" + V.startChapter;
                    return V.startHash && (e += "/" + V.startHash), I.path(e), V.hideLoader(), d.trigger(), void (S.$$phase || S.$apply())
                }
                B.readSlot("lastLoc" + B.getBookId(), function (r) {
                    B.readSlot("lastLocY" + B.getBookId(), function (e) {
                        config.preserveLoc && "app" != config.kotobee.mode && (i = r ? Number(r) : 0, o = e ? Number(e) : 0), B.data.user && null != B.data.user.lastchap && (i = Number(B.data.user.lastchap));
                        var t = u.getBookmark();
                        t && (i = Number(t)), null != a && (i = a);
                        var n = {};
                        o && (n.scroll = o), V.loadChapterByIndex(i, n).then(function () {
                            V.hideLoader(), d.trigger()
                        })
                    })
                })
            })
        } else setTimeout(V.initialize, 50)
    }, V.displayTOC = function () {
        var e = document.getElementById("chaptersInner");
        e && (replaceHTML(e, B.data.book.chapters ? B.data.book.chapters : '<h5 class="panelEmpty"><i class="icon ion-alert-circled"></i> ' + w.get("noTOC") + "</h5>"), g.setOb("title", replaceHTML(g.getOb("title"), B.data.book.meta.dc.title)))
    }, V.preloadEdgeChapters = function (t) {
        V.getPageOb({page: F, source: "preloadEdgeChapters"}, function (e) {
            V.getPageOb({page: P - 1, source: "preloadEdgeChapters"}, function (e) {
                _ = M = null, t()
            })
        })
    }, V.displayChapters = function () {
        if (!S.widescreen || config.notebookTab) {
            var e = t.$getByHandle("menus");
            e._instances[0].left.width = e._instances[0].right.width = 330, e._instances[0].left.el.style.width = e._instances[0].right.el.style.width = "330px", S.widescreen && (B.data.settings.rtl ? (e._instances[0].right.width = 480, e._instances[0].right.el.style.width = "480px") : (e._instances[0].left.width = 480, e._instances[0].left.el.style.width = "480px"), v.get("notes").updateNotebookArray({}, function () {
                S.$$phase || S.$apply()
            })), mobile && v.get("nav").resize(), B.data.settings.rtl ? t.toggleRight() : t.toggleLeft(), native && o.vibrate()
        }
    }, V.clearCache = function () {
        G = []
    }, V.neverCache = function (e) {
        e && (X(e.url) || K.push(e.url))
    }, V.hideLoader = function () {
        var e = document.getElementById("ebookLoaderAnim");
        e && addClass(e, "hide")
    }, V.showLoader = function () {
        var e = document.getElementById("ebookLoaderAnim");
        e && removeClass(e, "hide")
    }, V.addListener = function (e) {
        W.push(e)
    }, V.removeListener = function (e) {
        for (var t = W.length; t--;) W[t] == e && W.splice(t, 1)
    }, V.redirectToHashPage = function (i, e) {
        var o = e.leftOb;
        if (o.pages && o.pages.length) {
            var a = parseHtml(o.raw ? o.raw : o.content);
            C("contentVirt")("parse", a.getElementById("epubContent"), function () {
                var e = a.getElementById(i);
                if (!e) {
                    var t = a.getElementsByName(i);
                    t.length && (e = t[0])
                }
                if (e) {
                    var n = k.convertElemsToLocation([e], a.getElementById("epubContent")).left,
                        r = k.getPageByLocation(o, n);
                    V.loadChapterByIndex(o.index, {hash: i, vIndex: r})
                }
            })
        }
    }, V.redirect = function (e, t) {
        t = t || {};
        var n = v.get("book").root + "/reader/chapter/" + e;
        t.hash && (n += "/" + t.hash);
        var r = V.getCurrentHash();
        if (t.hash ? I.search("vi") : I.search({vi: t.vIndex}), I.path(n), currentIndex == e) {
            if (!r) return V.loadChapterByIndex(e, t);
            if (r == t.hash) return V.loadChapterByIndex(e, t)
        }
        try {
            document.dispatchEvent(new Event("kotobeeBeforeChapterLoaded"))
        } catch (e) {
        }
        kotobee.dispatchEvent("kotobeeBeforeChapterLoaded"), S.$$phase || S.$apply()
    }, V.getCurrentHash = function () {
        var e = I.path(), t = (e = e.replace(/\?.*/g, "")).split("/" + currentIndex + "/");
        if (!(t.length < 2)) return t[1]
    }, V.loadLocation = function (a, e) {
        var s = T.defer();
        e = e || {};
        var n = !a.match(/[^0-9.]/g);
        return V.showLoader(), V.getPageOb({page: e.index}, function (i) {
            if (!i.pages || !i.pages.length) {
                if (n) {
                    var e = k.getElemsByLocation(a);
                    if (!e[0]) return s.resolve();
                    b.safeScrollToElem("content", e[0], !0)
                } else b.safeAnchorScroll("content", a, !0);
                return V.hideLoader(), s.resolve()
            }
            if (n) {
                var t = k.getPageByLocation(i, a);
                return V.loadChapterByIndex(i.index, {vIndex: t}), s.resolve()
            }
            var o = parseHtml(i.raw ? i.raw : i.content);
            C("contentVirt")("parse", o.getElementById("epubContent"), function () {
                var e, t;
                if (!(e = o.getElementById(a))) {
                    var n = o.getElementsByName(a);
                    n.length && (e = n[0])
                }
                e && (t = k.convertElemsToLocation([e], o.getElementById("epubContent")).left);
                var r = 0;
                return t && (r = k.getPageByLocation(i, t)), V.loadChapterByIndex(i.index, {vIndex: r}), s.resolve()
            })
        }), s.promise
    }, V.indexFromUrl = function (e, t) {
        var n;
        t = t || {};
        var r = ph.getHash(e);
        t.hash && (r = t.hash), e = ph.removeHash(ph.normalize(e));
        for (var i = B.data.epub.manifest.getElementsByTagName("item"), o = 0; o < i.length; o++) if (ph.removeHash(ph.normalize(i[o].getAttribute("href"))) == e) {
            n = i[o].getAttribute("id");
            break
        }
        i = B.data.epub.spine.getElementsByTagName("itemref");
        var a, s = t.order ? t.order : 1;
        for (o = 0; o < i.length; o++) if (i[o].getAttribute("idref") == n && i[a = o].getAttribute("id") == r) {
            if (--s) continue;
            return o
        }
        return a
    }, V.arePagesAppearingTogether = function (e, t, n) {
        var r = V.getCurrentView(t.index), i = e.vIndex;
        i < 0 && e.pages && e.pages.length && (i += e.pages.length), isNaN(i) && (i = null);
        var o = t.vIndex;
        if (o < 0 && t.pages && t.pages.length && (o += t.pages.length), isNaN(o) && (o = null), e.index == t.index && i == o) return n(!0);
        if ("double" != r.view) return n();
        if ("rfl" == e.layout) {
            if (e.index == t.index && i == o + 1) return n(!0);
            if (t.pages && 1 == t.pages.length && e.index == t.index + 1 && 0 == i) return n(!0)
        }
        return "fxl" == e.layout && e.index == t.index + 1 ? n(!0) : n()
    }, V.getNextIndexOld = function (t, n) {
        var r = {}, e = V.getCurrentView(t.index);
        if (r.leftOb = {
            index: t.index + 1,
            vIndex: 0
        }, t.vIndex || (t.vIndex = 0), "double" == e.view) if (r.double = !0, "rfl" == t.layout) if (2 <= t.pages.length - 1 - t.vIndex) r.leftOb.index = t.index, r.leftOb.vIndex = t.vIndex + 2; else {
            if (t.pages.length - 1 - t.vIndex != 1) return void V.getPageOb({
                page: t.index + 1,
                source: "getNextIndex"
            }, function (e) {
                1 == e.pages.length ? (r.leftOb.vIndex = 0, r.leftOb.index = t.index + 2) : (r.leftOb.vIndex = 1, r.leftOb.index = t.index + 1), n(r)
            });
            r.leftOb.index = t.index + 1, r.leftOb.vIndex = 0
        } else r.leftOb.index++; else "rfl" != t.layout || B.data.settings.pageScroll || (1 <= t.pages.length - 1 - t.vIndex ? (r.leftOb.index = t.index, r.leftOb.vIndex = t.vIndex + 1) : (r.leftOb.index = t.index + 1, r.leftOb.vIndex = 0));
        return n(r), r
    }, V.getElemChapterIndex = function (e, t) {
        var n;
        return t = t || {}, "single" == B.data.currentView ? n = currentIndex : traverseToTop(e, "spreadL") ? n = currentIndex : traverseToTop(e, "spreadR") && (n = B.data.currentRPageOb.index), t.ignoreAnchors && (n = V.getUnanchoredIndex(n)), n
    }, V.getUnanchoredIndex = function (e) {
        var t = ph.removeHash(V.getChapterURL(e));
        return V.indexFromUrl(t)
    }, V.getNextIndex = function (e, t) {
        var n = V.getCurrentView(e.index, {vIndex: e.vIndex});
        J(e, function (e) {
            if (!e) return t();
            "double" == n.view ? e.leftOb.index >= P - 1 ? t(e) : J(e.leftOb, t) : t(e)
        })
    }, V.getPrevIndexOld = function (t, n) {
        var r = {};
        r.leftOb = {index: t.index - 1, vIndex: 0}, t.vIndex || (t.vIndex = 0);
        if ("double" == V.getCurrentView(t.index - 1, {}).view) if (r.double = !0, config.firstDoublePage || (config.firstDoublePage = 0), "rfl" == t.layout) if (1 < t.vIndex) r.leftOb.index = t.index, r.leftOb.vIndex = t.vIndex - 2, r.leftOb.index < config.firstDoublePage && r.leftOb.vIndex++; else {
            if (1 != t.vIndex) return void V.getPageOb({page: t.index - 1, source: "getPrevIndex"}, function (e) {
                1 == e.pages.length ? (r.leftOb.index = t.index - 2, r.leftOb.vIndex = -1, r.leftOb.index < config.firstDoublePage && (r.leftOb.index = t.index - 1, r.leftOb.vIndex = 0)) : (r.leftOb.index = t.index - 1, r.leftOb.vIndex = t.vIndex - 2, r.leftOb.index < config.firstDoublePage && (r.leftOb.vIndex = t.vIndex - 1)), n(r)
            });
            r.leftOb.index = t.index - 1, r.leftOb.vIndex = -1, r.leftOb.index < config.firstDoublePage && (r.leftOb.index = t.index, r.leftOb.vIndex = 0)
        } else r.leftOb.index = t.index - 2, r.leftOb.index < config.firstDoublePage && (r.leftOb.index = t.index - 1); else "rfl" != t.layout || B.data.settings.pageScroll || (0 < t.vIndex ? (r.leftOb.index = t.index, r.leftOb.vIndex = t.vIndex - 1) : (r.leftOb.index = t.index - 1, r.leftOb.vIndex = -1));
        return n(r), r
    }, V.getPrevIndex = function (e, t) {
        Y(e, function (e) {
            "double" == V.getCurrentView(e.leftOb.index, {vIndex: e.leftOb.vIndex}).view ? e.leftOb.index <= F ? t(e) : Y(e.leftOb, t) : t(e)
        })
    }, V.nextChapter = function (e, r) {
        l.isLastChapter(null, function (e) {
            e ? o.toast(w.get("inLastChapter")) : (p.interruptAnimation(), l.getNextIndex({
                index: currentIndex,
                vIndex: currentVIndex
            }, function (e) {
                if (e) {
                    for (var t = B.data.epub.spine.getElementsByTagName("itemref")[e.leftOb.index]; t && t.hasAttribute("linear") && "no" == t.getAttribute("linear");) {
                        if (++e.leftOb.index >= t.length - 1) return void o.toast(w.get("inLastChapter"));
                        t = B.data.epub.spine.getElementsByTagName("itemref")[e.leftOb.index]
                    }
                    var n = t.getAttribute("id");
                    S.renderScope.applyHeader("default"), null != e.leftOb.vIndex && (n = null), V.redirect(e.leftOb.index, {
                        hash: n,
                        vIndex: e.leftOb.vIndex
                    }), S.$$phase || S.$apply(), r && r(e)
                }
            }))
        })
    }, V.prevChapter = function (e, r) {
        l.isFirstChapter(null, function (e) {
            e ? o.toast(w.get("inFirstChapter")) : (p.interruptAnimation(), l.getPrevIndex({
                index: currentIndex,
                vIndex: currentVIndex
            }, function (e) {
                e.vIndex;
                e.leftOb.index < 0 && (e.leftOb.index = 0);
                for (var t = B.data.epub.spine.getElementsByTagName("itemref")[e.leftOb.index]; t && t.hasAttribute("linear") && "no" == t.getAttribute("linear");) {
                    if (--e.leftOb.index < 0) return e.leftOb.index = 0, void o.toast(w.get("inFirstChapter"));
                    t = B.data.epub.spine.getElementsByTagName("itemref")[e.leftOb.index]
                }
                S.renderScope.applyHeader("default");
                var n = t.getAttribute("id");
                null != e.leftOb.vIndex && (n = null), V.redirect(e.leftOb.index, {
                    hash: n,
                    vIndex: e.leftOb.vIndex
                }), S.$$phase || S.$apply(), r && r(e)
            }))
        })
    }, V.getCurrentView = function (e, t) {
        var n = (t = t || {}).returnType;
        if (null != e) {
            var r = l.getCurrentView(e, t);
            if (r) return o(r);
            if (e < config.firstDoublePage) return o({view: null, index: e});
            var i = B.data.settings.viewMode;
            return "single" == i ? o({
                view: null,
                index: e,
                scroll: B.data.settings.pageScroll
            }) : "double" != i ? "auto" == i ? "left" == Z(e) && "right" == Z(e + 1) ? o({
                view: "double",
                index: e
            }) : "right" == Z(e) && "left" == Z(e - 1) ? o({view: "double", index: e - 1}) : o({
                view: null,
                index: e,
                scroll: B.data.settings.pageScroll
            }) : o({
                view: null,
                index: e,
                scroll: B.data.settings.pageScroll
            }) : config.singleViewOnPortrait && 1.3 * window.innerWidth < window.innerHeight ? o({
                view: null,
                index: e
            }) : o(l.isSingle(e, t.vIndex) ? {view: null, index: e} : {view: "double", index: e})
        }

        function o(e) {
            return e.view || (e.view = "single"), "view" == n ? (t.cb && t.cb(e.view), e.view) : "page" == n ? (t.cb && t.cb(e.page), e.page) : (t.cb && t.cb(e), e)
        }
    }, V.loadChapterByIndex = function (i, o) {
        var a = (o = o || {}).deferred;
        return a = a || T.defer(), null == i && (i = currentIndex), i < 0 ? (a.resolve(), a.promise) : (O < i && (i = 0), function (e) {
            var t = v.get("book");
            if (v.get("chapters"), !t.allowedChapters) return !1;
            for (var n = 0; n < t.allowedChapters.length; n++) {
                var r = t.allowedChapters[n];
                if (isNaN(r)) {
                    var i = r.replace(/['"](.*?)['"]/g, "$1");
                    if (!B.data.toc) continue;
                    for (var o = B.data.toc.getElementsByTagName("a"), a = 0; a < o.length; a++) if (o[a].textContent == i) return !1
                } else if (Number(r) == e) return !1
            }
            return !0
        }(i) ? V.nextChapter() : (V.showLoader(), V.getPageOb({page: i, source: "loadChapterByIndex"}, function (r) {
            V.getSurroundingPages({index: r.index, vIndex: o.vIndex}, function () {
                V.hideLoader();
                var e = {index: i, vIndex: o.vIndex};
                if (l.normalize(e), !o.hash && (e.index != i || null != e.vIndex && e.vIndex != o.vIndex)) return V.loadChapterByIndex(e.index, {
                    hash: o.hash,
                    vIndex: e.vIndex,
                    reload: o.reload,
                    deferred: a
                }), a.promise;
                var n = V.getChapterURL(i), t = !1;
                if (0 == n.indexOf("#") && (t = !0), o.hash && r.pages && r.pages.length && (t = !0), t) return V.loadLocation(o.hash, {
                    index: i,
                    source: "from loadChapterByIndex"
                }).then(function (e) {
                });
                o.leftOb = r, o.leftOb.index = i, o.leftOb.currentVIndex = o.leftOb.vIndex, o.leftOb.vIndex = o.vIndex, asyncCheck(!(r.pages && o.leftOb.vIndex >= r.pages.length - 1), V.getPageOb, [{
                    page: i + 1,
                    source: "loadChapterByIndex"
                }], function () {
                    V.planPageMapping(o, function (e) {
                        if ((e = e || {}).redirect) return V.redirect(e.redirect.index, {
                            hash: o.hash,
                            vIndex: o.vIndex,
                            reload: o.reload,
                            deferred: a
                        }), a.promise;
                        if (o.deferred = null, B.data.currentPageOb || (B.data.currentPageOb = o.leftOb), V.urlMatchesIndex(n, currentIndex) && !o.reload && currentVIndex == o.vIndex) {
                            currentIndex = i, re();
                            var t = o.hash;
                            return (t = t || ph.getHash(o.leftOb.url)) ? V.loadLocation(t, {
                                index: currentIndex,
                                source: "from loadChapterByIndex2"
                            }).then(function () {
                                te("renderedChapter"), V.highlightCurrentTocChapter()
                            }) : (x.$getByHandle("content").scrollTop(!0), te("renderedChapter"), V.highlightCurrentTocChapter()), B.data.book.chapter.url = n, B.data.book.chapter.absoluteURL = ph.join(bookPath, B.data.packageURL, B.data.book.chapter.url), a.resolve(), a.promise
                        }
                        p.startTransition(o, a)
                    })
                })
            })
        }), a.promise))
    }, V.getSurroundingPages = function (e, t) {
        if ("single" == B.data.settings.viewMode) return t();
        if (!e) return t();
        var n = l.getJoint(e.index, e.vIndex);
        if (n && 1 < n.length) return V.getPageOb({page: e.index - 1}, t);
        asyncCheck(n, V.getPageOb, [{page: e.index}], function () {
            V.getPageOb({page: e.index + 1}, function () {
                V.getPageOb({page: e.index - 1}, t)
            })
        })
    }, V.planPageMapping = function (t, e) {
        var n = V.getCurrentView(t.leftOb.index, {vIndex: t.leftOb.vIndex});
        if (n.index == t.leftOb.index) if (V.shouldBePaged(t.leftOb) || "double" == n.view) if (t.view = "double", t.rightOb || (t.rightOb = {}), "fxl" == t.leftOb.layout) {
            V.getChapterURL(t.leftOb.index + 1) ? (t.rightOb.index = t.leftOb.index + 1, t.rightOb.url = ph.join(bookPath, B.data.packageURL, V.getChapterURL(t.leftOb.index + 1))) : t.rightOb = null, o()
        } else {
            if (t.rightOb.url = t.leftOb.url, t.leftOb.viewport = v.get("spread").getViewport(t.leftOb), t.vIndex = Number(t.vIndex), isNaN(t.vIndex) && (t.vIndex = 0), t.leftOb.vIndex = t.vIndex, t.vIndex < 0 || t.vIndex >= t.leftOb.pages.length) {
                var r = 0;
                return t.vIndex < 0 && (r = t.vIndex), t.vIndex = t.leftOb.pages.length + r, t.leftOb.vIndex = t.leftOb.pages.length + r, t.rightOb.vIndex = t.leftOb.vIndex + 1, t.rightOb.index = t.leftOb.index, void e({redirect: {index: n.index}})
            }
            if (t.leftOb.content = t.leftOb.pages[t.vIndex].content, "single" == n.view) return t.rightOb = null, void o();
            if (t.vIndex + 1 < t.leftOb.pages.length) t.rightOb = clone(t.leftOb), t.rightOb.vIndex = t.vIndex + 1, t.rightOb.index = t.leftOb.index, t.rightOb.content = t.leftOb.pages[t.rightOb.vIndex].content, o(); else {
                if (t.leftOb.index >= O - 1) return t.rightOb = null, void o();
                t.rightOb.index = t.leftOb.index + 1;
                var i = V.getChapterURL(t.rightOb.index);
                V.getPageOb({page: t.rightOb.index}, function (e) {
                    t.rightOb = e, t.rightOb.vIndex = 0, t.rightOb.url = ph.join(bookPath, B.data.packageURL, i), t.rightOb.pages && t.rightOb.pages.length && (t.rightOb.content = t.rightOb.pages[0].content), t.rightOb.viewport = v.get("spread").getViewport(t.rightOb), o()
                })
            }
        } else t.view = "single", "fxl" != t.leftOb.layout && (t.leftOb.viewport = null), t.leftOb.raw && (t.leftOb.content = t.leftOb.raw), o(); else e({redirect: {index: n.index}});

        function o() {
            e && e({url: t.leftOb.url})
        }
    }, V.getCacheOrPreload = Q, V.currentUrlMatchesVIndex = function (e) {
        return getQueryStringValue("vi") == e
    }, V.urlMatchesIndex = function (e, t) {
        if (null != t) {
            e = ph.normalize(e);
            ph.getHash(e);
            var n, r = ph.removeHash(e), i = B.data.epub.spine.getElementsByTagName("itemref")[t];
            if (i) {
                for (var o = B.data.epub.manifest.getElementsByTagName("item"), a = 0; a < o.length; a++) o[a].getAttribute("id") == i.getAttribute("idref") && (n = o[a].getAttribute("href"));
                return !!n && ph.removeHash(ph.normalize(n)) == ph.removeHash(ph.normalize(r))
            }
        }
    }, V.applyChapterStateFromURL = function (e, t) {
        if (t = t || {}, 0 != e.indexOf("#")) {
            var n = ph.getHash(e), r = t.index ? t.index : V.indexFromUrl(e);
            null != r && (S.renderScope.applyHeader("default"), V.redirect(r, {
                hash: n,
                vIndex: t.vIndex
            }), S.$$phase || S.$apply())
        } else V.redirect(currentIndex, {hash: e.substr(1)})
    }, V.loadChapterByURL = function (t, n) {
        var e = ph.relative(ph.join(bookPath, B.data.packageURL), t.leftOb.url);
        t = t || {};
        var r = T.defer(), i = t.hash ? t.hash : ph.getHash(e), o = t.leftOb.index;
        if (0 == e.indexOf("#") && (i = e.substr(1)), null != o) {
            if (!t.reload && V.urlMatchesIndex(e, currentIndex) && currentVIndex == t.vIndex) return currentIndex = o, re(), i ? (n && n(), V.loadLocation(i, {
                index: currentIndex,
                source: "from loadChapterByUrl"
            })) : (c.hash && x.$getByHandle("content").scrollTop(!0), r.resolve(), n && n(), r.promise);
            if (desktop) require("nw.gui").App.clearCache();
            kInteractive.clearAudioVideo(document), currentVIndex = t.vIndex;
            var a = V.getCurrentView(o, {vIndex: currentVIndex});
            return B.data.currentView = a.view, $ = null == currentIndex, currentIndex = o = a.index, re(), B.data.currentPageOb = t.leftOb, B.data.currentRPageOb = t.rightOb, delete t.leftOb.currentVIndex, mobile && x.$getByHandle("content").resize(), V.busy = !0, V.loadChapterByURLRaw(t).then(function (e) {
                V.busy = !1, t.scroll && x.$getByHandle("content").scrollTo(0, t.scroll, !1);
                config.kotobee.cloudid && (config.kotobee.public || s.setLastChapter()), setTimeout(function () {
                    b.reset(t.scroll ? t.scroll : 0, function () {
                        i ? V.loadLocation(i, {index: currentIndex, source: "loadChapterByURLRaw"}).then(function () {
                            $ && N.replaceScript(e || []), te("renderedChapter"), V.highlightCurrentTocChapter(), ie(), ee(), n && n()
                        }) : (N.replaceScript(e || []), te("renderedChapter"), V.highlightCurrentTocChapter(), ie(), ee(), n && n())
                    }, 30)
                })
            })
        }
        n && n()
    }, V.cacheLookup = function (e, t) {
        if (!X(e)) for (var n = 0; n < G.length; n++) if (G[n].url == ph.removeHash(e)) {
            var r = G[n];
            return G.splice(n, 1), G.push(r), r
        }
    }, V.removeFromCache = function (e, t) {
        for (var n = 0; n < G.length; n++) if (G[n].url == ph.removeHash(e) && G[n].view == t) return void G.splice(n, 1)
    }, V.addToCache = function (e, t) {
        if (t = t || {}, e.url = ph.removeHash(e.url), !X(e.url)) {
            var n = V.cacheLookup(e.url, e.view);
            n ? t.update && (n.url = e.url, n.title = e.title, n.viewport = e.viewport, n.content = e.content, n.layout = e.layout, n.styles = e.styles, e.script && (n.script = e.script)) : (20 < G.length && G.shift(), t.lowPriority ? G = [e].concat() : G.push(e))
        }
    }, V.loadChapterByURLRaw = function (d) {
        d = d || {};
        var e = ph.relative(ph.join(bookPath, B.data.packageURL), d.leftOb.url), u = T.defer();
        B.data.book.chapter.url = e, B.data.book.chapter.absoluteURL = ph.join(bookPath, B.data.packageURL, B.data.book.chapter.url);
        ph.getHash(B.data.book.chapter.url);
        b.disable(), b.lock(), m.update(null);
        var h = [];
        return function (t) {
            var n;
            if (n = V.cacheLookup(B.data.book.chapter.absoluteURL, "single")) return copyObjToObj(n, t.leftOb, {onlyIfNotExists: !0}), t.leftOb.cached = !0, i();
            var r = {showError: !0, deferred: u, view: t.view, id: t.id, view: null};

            function i() {
                if ("single" != t.view && t.rightOb) {
                    var e = t.rightOb.url;
                    (n = V.cacheLookup(e, "single")) ? (copyObjToObj(n, t.rightOb, {onlyIfNotExists: !0}), t.rightOb.cached = !0, o(t)) : V.preloadChapter(e, r, function (e) {
                        copyObjToObj(e, t.rightOb, {onlyIfNotExists: !0}), o(t)
                    })
                } else o(t)
            }

            V.preloadChapter(B.data.book.chapter.absoluteURL, r, function (e) {
                copyObjToObj(e, t.leftOb, {onlyIfNotExists: !0}), i()
            })
        }(d), u.promise;

        function o(e) {
            var t = (e = e || {}).leftOb.title, n = (e.leftOb.content, e.leftOb.viewport),
                r = (e.leftOb.styles, e.leftOb.script, e.leftOb.layout), i = e.isCached, o = e.leftOb, a = e.rightOb;
            o && (h = h.concat(o.script)), a && (h = h.concat(a.script)), makeArrayUnique(h), t = t || o.title, B.data.book.chapter.title = t, f.send({
                verb: "navigated",
                activity: (currentIndex ? "Chapter " + currentIndex + ": " : "") + t
            }), mobile || !$ && Boolean(n) == Boolean(B.data.book.chapter.viewport) || v.get("nav").resetEpubContainer(n);
            var s = document.getElementById("epubInner");
            e.source = "from chapters", pauseVideoAndAudio(s = p.populateSpreads(s, e)), g.setOb("epubContent", document.getElementById("epubContent")), g.getOb("epubContainer").focus(), i || p.setContentSize(g.getOb("epubContent"), d), B.data.book.chapter.viewport = n, B.data.book.chapter.layout = r, B.data.book.chapter.view = e.view, B.data.book.chapter.paged = V.shouldBePaged(o), re();
            var l = document.getElementById("chapters");
            removeClass(l, ["rfl", "fxl", "double", "single"]), addClass(l, B.data.book.chapter.viewport ? "fxl" : "rfl"), addClass(l, e.view), B.data.book.chapter.paged ? addClass(l, "paged") : removeClass(l, "paged"), kInteractive.postRender(document);
            i || (L.replaceStyles(""), L.replaceStyles(o.styles.replace(/#spreadR/g, "#spreadL"), {append: !0}), a && a.viewport && L.replaceStyles(a.styles.replace(/#spreadL/g, "#spreadR"), {append: !0})), L.replaceStyles("#epubContainer div#epubContent, #epubContainer.stylesEnabled div#epubContent { background-color:#e7e3d9 !important;}", {append: !0}), config.preserveLoc && "app" != config.kotobee.mode && B.writeSlot("lastLoc" + B.getBookId(), currentIndex), B.writeSlot("lastLocY" + B.getBookId(), 0);
            for (var c = 0; c < W.length; c++) W[c]("newChapter");
            C("contentJs")(i).then(function () {
                k.reset(), b.unlock(), u.resolve(h)
            })
        }
    }, V.preloadChapterFromApi = function (e, t) {
        return V.preloadChapter(ph.join(bookPath, B.data.packageURL, e), {}, t)
    }, V.loadAndDecrypt = function (e, t, n) {
        return oe(ph.join(bookPath, B.data.packageURL, e), t, n)
    };
    var ae, se, le, ce = [];

    function de(e, t) {
        var n = (e = e || {}).first, r = e.page, i = e.vIndex;
        (null == r && (r = currentIndex), null == i && (i = currentVIndex), "single" == V.getCurrentView(r, {vIndex: i}).view) ? V.shouldBePaged(e.page ? e : B.data.currentPageOb) ? t(r <= n && 0 == currentVIndex) : t(r <= n) : B.data.currentPageOb.pages ? t(r <= n && 0 == currentVIndex) : t(r <= n)
    }

    function ue(e, t) {
        var n = (e = e || {}).max, r = e.page, i = e.vIndex, o = e.view;
        return null == r && (r = currentIndex, i = currentVIndex, o = V.getCurrentView(r, {returnType: "view"})), "single" == o ? (null == e.index && (e.index = e.page), V.shouldBePaged(null != e.page ? e : B.data.currentPageOb), a(o ? n - 1 <= r : n - 1 <= r && M - 1 <= i)) : a(n - 1 <= r ? !M || M - 2 <= i : n - 2 <= r && (!(M && _ - 1 <= i) || M <= 1));

        function a(e) {
            return t && t(e), e
        }
    }

    function he() {
        var e = ph.removeHash(window.location.href), t = document.getElementsByTagName("base");
        if (t.length) for (var n = 0; n < t.length; n++) if (t[n].getAttribute("href")) {
            e = window.location.origin + "/" + t[n].getAttribute("href");
            break
        }
        return 0 <= e.indexOf("chrome-extension://") ? B.data.book.chapter.absoluteURL : isAbsoluteURLPath(B.data.book.chapter.absoluteURL) ? B.data.book.chapter.absoluteURL : "/" == B.data.book.chapter.absoluteURL[0] ? getDomainFromURL(e) + B.data.book.chapter.absoluteURL : ph.join(e, B.data.book.chapter.absoluteURL)
    }

    function fe() {
        return "library" == config.kotobee.mode ? B.data.paths.private + "books/" + B.data.book.chapter.absoluteURL.split("/books/")[1] : B.data.paths.private + B.data.book.chapter.absoluteURL.substr(1)
    }

    return V.preloadChapter = function (h, f, p) {
        var e = {func: arguments.callee, args: arguments};
        if (f = f || {}, existsInArray(h, ce)) return setTimeout(function () {
            V.preloadChapter(h, f, p)
        }, 50);
        ce.push(h), oe(h, function (e) {
            for (var a = parseHtml(e), s = C("contentHtml")(a, h), t = a.getElementsByTagName("meta"), l = null, n = 0; n < t.length; n++) {
                var r = t[n].getAttribute("name");
                if (r && "viewport" == r.toLowerCase()) {
                    l = {};
                    var i = t[n].getAttribute("content");
                    if (!i) break;
                    for (var o = i.split(","), c = 0; c < o.length; c++) {
                        var d = o[c].split("=");
                        d[1] && (d[1] = d[1].replace("px", ""), l[d[0].trim()] = Number(d[1].trim()))
                    }
                }
            }
            var u = l ? "fxl" : "rfl";
            C("js")(a).then(function (o) {
                C("styles")(a, {path: h, id: f.id}).then(function (e) {
                    var t, n = a.getElementsByTagName("title");
                    if (n.length) t = n[0].textContent.trim(); else {
                        var r = a.getElementsByTagName("h1");
                        r.length && (t = r[0].textContent.trim())
                    }
                    t = t || B.data.book.meta.dc.title;
                    var i = {url: h, title: t, viewport: l, layout: u, content: s.outerHTML, styles: e, script: o};
                    f.dontCache || V.addToCache(i, f), removeFromArray(h, ce), p && p(i)
                })
            })
        }, function () {
            removeFromArray(h, ce), f.showError && (a.update({
                error: "networkError",
                ref: e
            }), f.deferred && f.deferred.reject({}), ie())
        })
    }, V.clearContent = function () {
        replaceHTML("epubInner", ""), ne()
    }, V.getChapterURL = function (e) {
        var t;
        null == e && (e = currentIndex), e < 0 && (e = 0);
        try {
            var n = B.data.epub.spine.getElementsByTagName("itemref");
            if (e >= n.length) return;
            t = n[e]
        } catch (e) {
        }
        var r = getElementsByAttribute(B.data.epub.manifest, "item", "id", t.getAttribute("idref"))[0].getAttribute("href"),
            i = t.getAttribute("id");
        return i && (r += "#" + i), r
    }, V.isFirstChapter = function (e) {
        de({first: 0}, e)
    }, V.isFirstVisibleChapter = function (e) {
        de({first: F}, e)
    }, V.isLastChapter = function (e) {
        return ue({max: O}, e)
    }, V.isLastVisibleChapter = function (e) {
        return ue({max: P}, e)
    }, V.isLastVisibleSingleChapter = function (e, t, n) {
        return ue({max: P, page: e, vIndex: t, view: "single"}, n)
    }, V.getPageOb = function (e, n) {
        var r = (e = e || {}).page;
        null == r && (r = currentIndex);
        var t = V.getChapterURL(r);
        if (!t) return n ? n() : null;
        Q(ph.join(bookPath, B.data.packageURL, t), {}, function (t) {
            if (t.index = r, "fxl" == t.layout && (t.spread = Z(t.index)), t.nonlinear = function (e) {
                var t = B.data.epub.spine.getElementsByTagName("itemref")[e];
                if (t) return "no" == t.getAttribute("linear")
            }(t.index), t.pages || "fxl" == t.layout || !V.shouldBePaged(t) || e.dontParse) return l.add(t), n ? n(t) : null;
            v.get("spread").parseReflowableChapter(t, function (e) {
                return t.pages = e.pages, t.raw = e.raw, l.add(t), n ? n(t) : null
            })
        })
    }, V.shouldBePaged = function (e, t) {
        return (!e || "fxl" != e.layout) && ("double" == B.data.settings.viewMode || ("single" == B.data.settings.viewMode ? !B.data.settings.pageScroll : (!t && e && (t = V.getCurrentView(e.index).view), "single" != t || !B.data.settings.pageScroll)))
    }, V.convertPDF = function () {
        var n = {func: arguments.callee, args: arguments};
        if (preview) a.update({error: "savePdfUnsupportedInPreview"}); else if (!desktop && !native) if (config.pdfsavingOptions || config.pdfbooksaving) {
            var e = {
                scale: 100, range: "chapter", submit: function () {
                    h.hide(), t(e)
                }
            };
            h.show({mode: "pdfSave", pdfSaveOptions: e})
        } else t();

        function t(i) {
            (i = i || {}).scale || (i.scale = 100), i.range || (i.range = "chapter");
            var o = he();
            isKotobeeHosted() && config.kotobee.cloudid && !config.kotobee.public && (o = fe()), -1 != window.location.href.indexOf("http://localhost:8080/#/book/") && (o = fe());
            var e = B.data.book.chapter.title, t = {url: o, filename: e};
            m.update(w.get("pleaseWait"), null, {
                dots: !0,
                timeoutDuration: 6e4
            }), s.createRequest(config.kotobee.liburl + "library/pdf/status", {}, function (e) {
                if ("converting" == e.status) return m.update(), m.showAndHide(w.get("pdfInProgress"), 2500);
                s.createRequest(config.kotobee.liburl + "link/pdfgenerate/url", t, function (e) {
                    if (!e) return m.update(), void a.update({error: "networkError", ref: n});
                    var r = e;
                    asyncCheck(!i.includeNotes, B.getNotes, [], function (e) {
                        if (D && D.parentNode && D.parentNode.removeChild(D), (D = document.createElement("iframe")).setAttribute("style", "display:none"), D.setAttribute("name", "pdfFrame"), document.body.appendChild(D), j && j.parentNode && j.parentNode.removeChild(j), (j = document.createElement("form")).setAttribute("style", "visibility:hidden:position:absolute"), j.setAttribute("method", "post"), j.setAttribute("action", r), j.setAttribute("target", "pdfFrame"), addFormHiddenInput("url", o, j), addFormHiddenInput("filename", B.data.book.chapter.title, j), addFormHiddenInput("fileext", "pdf", j), addFormHiddenInput("scale", i.scale, j), addFormHiddenInput("range", i.range, j), "book" == i.range && addFormHiddenInput("bid", B.data.book.id, j), e) {
                            for (var t = [], n = 0; n < e.length; n++) "book" != i.range && e[n].chapter != currentIndex || t.push({
                                chapter: e[n].chapter,
                                note: e[n].note,
                                src: e[n].src
                            });
                            addFormHiddenInput("notes", JSON.stringify(t), j)
                        }
                        addFormHiddenInput("format", config.pdfMode ? config.pdfMode : "imgpdf", j), asyncCheck(!config.kotobee.encodekey, oe, [B.data.book.chapter.absoluteURL], function (e) {
                            function n() {
                                D && D.parentNode && D.parentNode.removeChild(D), j && j.parentNode && j.parentNode.removeChild(j), m.update()
                            }

                            config.kotobee.encodekey && addFormHiddenInput("data", e, j), document.body.appendChild(j), setTimeout(function () {
                                D.addEventListener ? D.addEventListener("load", n, !0) : D.attachEvent && D.attachEvent("onload", n), j.submit();
                                var t = setInterval(function () {
                                    s.createRequest(config.kotobee.liburl + "library/pdf/status", {}, function (e) {
                                        "converting" != e.status && (clearInterval(t), n())
                                    })
                                }, 2e3)
                            })
                        })
                    })
                })
            })
        }
    }, V.pdfPrintOld = function () {
        preview ? a.update({error: "savePdfUnsupportedInPreview"}) : desktop || native || (m.update(w.get("pleaseWait"), null, {dots: !0}), window.location.href = "https://www.kotobee.com/link/pdfgenerate?url=" + he(), setTimeout(function () {
            m.update()
        }, 4e3))
    }, V.printAsBitmap = function () {
        var r = {func: arguments.callee, args: arguments};
        if (!native && !mobile) {
            var i = he();
            isKotobeeHosted() && config.kotobee.cloudid && !config.kotobee.public && (i = fe());
            var e = B.data.book.chapter.title, t = {url: i, filename: e};
            m.update(w.get("pleaseWait"), null, {dots: !0}), s.createRequest(config.kotobee.liburl + "link/pdfgenerate/url", t, function (e) {
                if (!e) return m.update(), void a.update({error: "networkError", ref: r});
                var t = e;

                function n() {
                    try {
                        var e = this.contentWindow;
                        setTimeout(function () {
                            e.__container__ = this, e.focus(), e.print(), m.update()
                        }, 2500)
                    } catch (e) {
                        m.update()
                    }
                }

                H && H.parentNode && H.parentNode.removeChild(H), (H = document.createElement("iframe")).setAttribute("style", "display:none"), H.setAttribute("name", "printFrame"), H.id = "printContainer", H.style.visibility = "hidden", H.style.position = "fixed", H.style.right = "0", H.style.bottom = "0", document.body.appendChild(H), q && q.parentNode && q.parentNode.removeChild(q), (q = document.createElement("form")).setAttribute("style", "visibility:hidden:position:absolute"), q.setAttribute("method", "post"), q.setAttribute("action", t), q.setAttribute("target", "printFrame"), addFormHiddenInput("url", i, q), addFormHiddenInput("filename", B.data.book.chapter.title, q), addFormHiddenInput("fileext", "pdf", q), addFormHiddenInput("print", !0, q), addFormHiddenInput("format", "imghtml", q), asyncCheck(!config.kotobee.encodekey, oe, [B.data.book.chapter.absoluteURL], function (e) {
                    config.kotobee.encodekey && addFormHiddenInput("data", e, q), document.body.appendChild(q), q.submit(), H.onload = n, setTimeout(function () {
                        m.update()
                    }, 8e3)
                })
            })
        }
    }, V.print = function () {
        native || mobile || ("fxl" == B.data.book.chapter.layout ? V.printAsBitmap() : (m.update(w.get("pleaseWait"), null, {dots: !0}), closePrintIframe(), oe(he(), function (e) {
            var t, n = ph.removeFilename(he());
            return e = (e = (e = e.replace("<head>", "<head><meta http-equiv=\"Content-Security-Policy\" content=\"default-src * gap://ready file: filesystem: data:; style-src * 'self' 'unsafe-inline' filesystem: data:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.youtube.com https://*.kotobee.com http://*.youtube.com https://*.ytimg.com http://*.ytimg.com;img-src * filesystem: data: blob: android-webview-video-poster:\">")).replace("<head>", "<head><script> window.onload = function() { window.print(); parent.closePrintIframe(); }<\/script>")).replace("<head>", "<head><base href='" + n + "/'/>"), (t = document.createElement("iframe")).id = "printContainer", t.style.visibility = "hidden", t.style.position = "fixed", t.style.right = "0", t.style.bottom = "0", t.setAttribute("srcdoc", e), document.body.appendChild(t), void m.update()
        })))
    }, V.regenerateSpreads = function (e, n) {
        var r;
        e = e || {}, V.shouldBePaged(B.data.currentPageOb) && (V.regeneratingSpreads ? se = !0 : (se = !1, g.getOb("epubContainer").style.opacity = 0, V.showLoader(), B.data.currentPageOb.pages && B.data.currentPageOb.pages.length && (r = currentVIndex / B.data.currentPageOb.pages.length), ae && clearTimeout(ae), ae = setTimeout(function () {
            V.regeneratingSpreads = !0, le && clearTimeout(le), le = setTimeout(function () {
                V.regeneratingSpreads = !1, V.regenerateSpreads(e, n)
            }, 2e4), V.resetPages(), V.preloadEdgeChapters(function () {
                V.getPageOb({page: currentIndex}, function (e) {
                    var t = {};
                    t.viewMode = B.data.settings.viewMode, t.vIndex = currentVIndex, r && e.pages && (t.vIndex = Math.floor(e.pages.length * r), t.vIndex != currentVIndex && I.search({vi: t.vIndex})), t.reload = !0, V.loadChapterByIndex(currentIndex, t).then(function () {
                        V.regeneratingSpreads = !1, clearTimeout(le), se ? setTimeout(function () {
                            se = !1, V.regenerateSpreads(t, n)
                        }, 100) : (n && n(), g.getOb("epubContainer").style.opacity = 1, V.hideLoader())
                    })
                })
            })
        }, e.resize ? 600 : 30)))
    }, V.resetPages = function (e) {
        e = e || {};
        for (var t = 0; t < G.length; t++) G[t].pages = null;
        return l.reset(), e.buildChapterMode ? l.initialize({
            first: F,
            last: P
        }) : B.data.book.meta.rendition && "pre-paginated" == B.data.book.meta.rendition.layout ? l.initialize({
            first: F,
            last: P
        }) : "single" == B.data.settings.viewMode && B.data.settings.pageScroll ? l.initialize({
            first: F,
            last: P
        }) : void 0
    }, V.getIndexFromTocElem = function (e) {
        for (var t = e.getAttribute("href"), n = document.getElementById("chaptersInner").getElementsByTagName("a"), r = 0, i = 0; i < n.length && (n[i].getAttribute("href") != t || "restricted" == n[i].className || (r++, e != n[i])); i++) ;
        return V.indexFromUrl(e.getAttribute("href"), {order: r})
    }, V.highlightCurrentTocChapter = function () {
        if (mobile && v.get("nav").resize(), B.data.currentPageOb) {
            var e = B.data.currentPageOb.index;
            if (B.data.book) {
                for (var t = B.data.book.chapter.url, n = document.getElementById("chaptersInner").getElementsByTagName("a"), r = [], i = 0; i < n.length; i++) -1 != n[i].getAttribute("href").indexOf(t) && V.getIndexFromTocElem(n[i]) == e && r.push({
                    elem: n[i],
                    id: ph.getHash(n[i].getAttribute("href"))
                });
                V.deApplySelectedChapter(), r.length && V.applySelectedChapter(function e(t) {
                    try {
                        if ("none" != t.style.display) return t;
                        if (t.previousElementSibling) return e(t.previousElementSibling);
                        if ("none" != t.parentNode.style.display) return e(t.parentNode);
                        var n = t.parentNode.previousElementSibling.getElementsByTagName("li");
                        return e(n[n.length - 1])
                    } catch (e) {
                        return t
                    }
                }(r[0].elem.parentNode))
            }
        }
    }, V.applySelectedChapter = function (e, t) {
        if (e && (null == t && (t = !0), addClass(e, "selected"), addClass(e, "currentChapter"), t)) {
            for (var n = e, r = g.getOb("chaptersContent"); (e = e.parentNode) && e != r;) "li" == e.nodeName.toLowerCase() && addClass(e, "expanded");
            overflowScroll ? r.scrollTo ? r.scrollTo(0, Math.round(getTopOffsetRelativeTo(n, r)), !0) : r.scrollTop = Math.round(getTopOffsetRelativeTo(n, r)) : x.$getByHandle("chapters").scrollTo(0, Math.round(n.offsetTop - r.parentNode.offsetHeight / 2), !1)
        }
    }, V.deApplySelectedChapter = function () {
        for (var e = g.getOb("chaptersContent"), t = e.getElementsByClassName("selected"), n = t.length; n--;) removeClass(t[n], "selected");
        for (n = (t = e.getElementsByClassName("currentChapter")).length; n--;) t[n].removeAttribute("name")
    }, V.elemInChapterElem = function (e, t) {
        return !(B.data.currentPageOb.index != t || !hasParentWithId(e, "spreadL", 99)) || (!(!B.data.currentRPageOb || B.data.currentRPageOb.index != t || !hasParentWithId(e, "spreadR", 99)) || void 0)
    }, V
}]), app.factory("context", ["$interpolate", "skeleton", "cssParser", "cache", "$rootScope", "stg", "$injector", "khttp", function (e, o, s, I, t, E, w, l) {
    var k, T, B, x, O = {};

    function r(n, r) {
        var i;
        null != E.data.currentPageOb.currentVIndex && (isNaN(E.data.currentPageOb.currentVIndex) || (i = E.data.currentPageOb.vIndex, E.data.currentPageOb.vIndex = currentVIndex)), o.getNextIndex(E.data.currentPageOb, function (t) {
            var e;
            null != i && (E.data.currentPageOb.vIndex = i), t && (e = [n, t.leftOb]), asyncCheck(!t, k.arePagesAppearingTogether, e, function (e) {
                if (e && t) return r("next");
                null != currentVIndex && (E.data.currentPageOb.vIndex = currentVIndex), o.getPrevIndex(E.data.currentPageOb, function (e) {
                    null != i && (E.data.currentPageOb.vIndex = i);
                    k.getCurrentView(e.leftOb.index, {vIndex: e.leftOb.vIndex});
                    k.arePagesAppearingTogether(n, e.leftOb, function (e) {
                        return r(e ? "prev" : null)
                    })
                })
            })
        })
    }

    function i(e) {
        if (!(e = e || {}).reload) {
            var t = I.getOb("epubContainer");
            null != t.style.opacity && (t.style.opacity = null, k.hideLoader()), native && (t.scrollTop = 0);
            var n = document.getElementsByClassName("activeSlidePage");
            if (n.length) {
                var r = n[0];
                "navSlide" == E.data.settings.navAnim ? r.style.transform = null : "navStack" == E.data.settings.navAnim ? r.style.transform = null : "navFade" == E.data.settings.navAnim ? r.style.opacity = null : "navFlip" == E.data.settings.navAnim ? autoprefixTransform(r, null) : "navBookBlock" == E.data.settings.navAnim && (deleteTransform(r), deleteTransform(t), t.style.opacity = null);
                for (var i = 0; i < t.children.length; i++) if ("shadow" == t.children[i].className) {
                    t.removeChild(t.children[i]);
                    break
                }
                removeClass(r, "anim"), removeClass(r, "activeSlidePage");
                var o = '<h3 id="ebookLoaderAnim"><div class="splashSpinner large"><div class="dot1"></div><div class="dot2"></div></div></h3>';
                document.getElementById("nextPage").innerHTML = o, document.getElementById("prevPage").innerHTML = o
            }
        }
    }

    function a(r, i) {
        if (B) i(s.applyRoot(r, B)); else {
            var o = isKotobeeHosted(), e = "lib/ionic/release/css/ionic.min.css";
            o && (e = "/bundles/vijualib/templates/reader/cloud/lib/ionic/release/css/ionic.min.css"), l.get(e).success(function (e) {
                if (T = e, o) l.get("/bundles/vijualib/templates/reader/cloud/css/styles.min.css").success(function (e) {
                    B = e, a()
                }).error(function () {
                    i(s.applyRoot(r, B))
                }); else {
                    var t = "css/styles.min.css", n = "http://localhost:8080" == window.location.origin;
                    n && (t = "css/style.css"), l.get(t).success(function (e) {
                        B = e, n ? l.get("css/base.css").success(function (e) {
                            B = e + " " + B, l.get("css/kotobeeInteractive.css").success(function (e) {
                                B += e, a()
                            }).error(function () {
                                a()
                            })
                        }).error(function () {
                            a()
                        }) : a()
                    }).error(function () {
                        i(s.applyRoot(r, B))
                    })
                }
            }).error(function () {
                i(s.applyRoot(r, B))
            })
        }

        function a() {
            i(B)
        }
    }

    function c(t, n) {
        t = t || {};
        t.container && (k.shouldBePaged(t.leftOb) && (t.leftOb && (t.leftOb.viewport = w.get("spread").getViewport(t.leftOb)), t.rightOb && (t.rightOb.viewport = w.get("spread").getViewport(t.rightOb))), t.simulate ? d(t, n) : k.getPageOb({page: t.leftOb.index}, function (e) {
            copyObjToObj(e, t.leftOb, {onlyIfNotExists: !0}), t.leftOb.pages && t.leftOb.vIndex < 0 && (t.leftOb.vIndex += t.leftOb.pages.length), t.rightOb ? k.getPageOb({page: t.rightOb.index}, function (e) {
                copyObjToObj(e, t.rightOb, {onlyIfNotExists: !0}), t.rightOb.pages && t.rightOb.vIndex < 0 && (t.rightOb.vIndex += t.rightOb.pages.length), d(t, n)
            }) : d(t, n)
        }))
    }

    function d(t, e) {
        t.id = Math.round(999 * Math.random());
        var n = t.container, i = t.leftOb, r = t.rightOb, o = i.url, a = ph.removeHash(window.location.href),
            s = document.createElement("html"), l = document.createElement("head");
        // CHANGED: 1
        addClass(s, "iframed");
        var w_ifr = "@media (min-width: 1300px){html{padding-left:330px}}";
        // ----
        ios && (l.innerHTML = "<meta http-equiv=\"Content-Security-Policy\" content=\"default-src * filesystem: data:; style-src 'self' 'unsafe-inline' filesystem: data:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.youtube.com http://*.youtube.com https://*.ytimg.com http://*.ytimg.com;img-src * filesystem: data: file:\">"), s.appendChild(l);
        var c = document.createElement("base"), d = document.getElementsByTagName("base");
        if (d.length) for (var u = 0; u < d.length; u++) {
            var h = d[u].getAttribute("href");
            if (h) {
                a = 0 == h.indexOf("/") || isAbsoluteURLPath(h) ? h : ph.join(window.location.origin, h);
                break
            }
        }

        function f(e) {
            var t = "";
            T && (t += T);
            var n = !mobile && !i.viewport,
                r = " body{margin:0; padding-top:0px;} #epubContainer{padding-top:0px;position:absolute;top:0;left:0;right:0;bottom:0 !important}";
            return mobile || (r += "body, #epubContainer{padding-top:1px;}"), t += r, t += "html,#epubContainer{overflow-y:" + (n ? "auto" : "hidden") + "}", t += "#epubScroller{position: static;height: 100%;width: 100%;box-sizing: border-box;transform-origin:left top;}", n && (t += "#epubContainer{overflow:auto !important}"), mobile && (t += " #epubContent ::-webkit-scrollbar {display: none;} #epubContent {-ms-overflow-style: none;overflow: -moz-scrollbars-none;}"), t += "#epubScroller{padding:" + getElemPadding(I.getOb("epubContainer").getElementsByClassName("scroll")[0], {computed: !0}).left + "px}", i.viewport && i.viewport.width && (t += "#epubContent{width:" + i.viewport.width + "px;height:" + i.viewport.height + "px; overflow:hidden}", t += "html{overflow-x:" + (mobile ? "hidden" : "auto") + "}", t += " #epubInner{height:0;} ", t += " #spreadL,#spreadR{position:absolute !important; top:0 !important;font-size: 1em !important;overflow:hidden;}"), i.viewport || mobile || (t += "#epubScroller{overflow:auto}"), t += " #epubContent{padding:0px; line-height: 1.6;} ", t += " #epubContent{box-sizing:border-box; font-size:" + E.data.settings.textSize + " !important;}", t += " #epubContent.hide{display:block !important}", t += " #epubContent section{margin-top:0 !important}", E.data.settings.textSize && (t += " #epubContent{font-size: " + E.data.settings.textSize + "}"), t += B, t = (t += e = e || "").replace("background-color:#e7e3d9 !important;", "")
        }

        function p() {
            var e = arguments[2];
            return 0 == e.indexOf('"') && (e = e.split('"')[1]), 0 == e.indexOf("'") && (e = e.split("'")[1]), 0 == e.indexOf("&quot;") && (e = e.split("&quot;")[1]), -1 != e.indexOf("http://") ? arguments[0] : -1 != e.indexOf("https://") ? arguments[0] : 0 == e.indexOf("data:") ? arguments[0] : (e = ph.relative(ph.removeFilename(o), e), arguments[1] + e + arguments[3])
        }

        0 == o.indexOf("/") || isAbsoluteURLPath(o) ? c.setAttribute("href", ph.removeFilename(o) + "/") : c.setAttribute("href", ph.join(a, ph.removeFilename(o)) + "/"), t.simulate || l.appendChild(c);
        var g = document.createElement("div");
        g.className = "stylesEnabled", g.id = "epubContainer";
        var m = document.createElement("div");
        m.id = "epubScroller", m.className = "scroll", g.appendChild(m);
        var v = document.createElement("div");

        function b(e) {
            e = (e = (e = (e = e || "").replace(/<div class="answer correct">/g, '<div class="answer">')).replace(/<div class="correct">/g, "<div>")).replace(/<p class="explanation">.*?<\/p>/g, ""), t.simulate || (e = e.replace(/(style=".*?url\()(.+?)(\).*?")/g, p));
            isKotobeeHosted();
            isReaderApp || t.simulate || (e = (e = e.replace(/src="(?!http[s]?\:\/\/)([^"]*)?"/g, function (e, t) {
                return 'src="' + ph.relative(o, t) + '"'
            })).replace(/xlink:href="(?!http[s]?\:\/\/)([^"]*)?"/g, function (e, t) {
                return 'xlink:href="' + ph.relative(o, t) + '"'
            }));
            i.title;
            return native && mobile && (e = e.replace(/(<img[^>]*src=)"(.*?)"/g, function (e, t) {
                return t + '"' + cleanURL(arguments[2]) + '"'
            })), e
        }

        v.id = "epubInner", m.appendChild(v);
        var y = document.createElement("style");
        y.setAttribute("type", "text/css"), i.pages && null != i.vIndex ? i.content = i.pages[i.vIndex].content : !i.content && i.raw && (i.content = i.raw), i.content = b(i.content), r && (r.pages && null != r.vIndex ? r.content = r.pages[r.vIndex].content : !r.content && r.raw && (r.content = r.raw), r.content = b(r.content)), t.cached = !1, v = O.populateSpreads(v, t), t.cached || (i.styles = i.styles.replace(/#spreadR/g, "#spreadL"), t.simulate || (i.styles = i.styles.replace(/(url\()(.*?)(\))/g, p)), r && (r.styles = r.styles.replace(/#spreadL/g, "#spreadR"), t.simulate || (r.styles = r.styles.replace(/(url\()(.*?)(\))/g, p))));
        i.styles;
        var w = f(i.styles);
        // UPDATED
        !t.cached && r && (w += " " + f(r.styles), r.styles), y.innerHTML = w + w_ifr, l.appendChild(y);
        // ----
        var k = v.getElementsByTagName("audio");
        for (u = k.length; u--;) {
            try {
                k[u].pause(), k[u].children.length || (k[u].src = "")
            } catch (e) {
            }
            var x = k[u].parentNode;
            x.previousSibling && hasClass(x.previousSibling, "playBtn") && removeClass(x.previousSibling, "hide"), x.removeChild(k[u])
        }
        var C = v.getElementsByTagName("video");
        for (u = C.length; u--;) {
            try {
                C[u].pause(), C[u].children.length || (C[u].src = "")
            } catch (e) {
            }
            var S = C[u].parentNode;
            S.previousSibling && hasClass(S.previousSibling, "playBtn") && removeClass(S.previousSibling, "hide"), S.removeChild(C[u])
        }
        var A = document.createElement("body");
        E.data.settings.rtl && addClass(A, "rtl"), addClass(A, i.layout), addClass(A, t.view), addClass(A, "transitionFrame"), A.appendChild(g), s.appendChild(A);
        var L = document.createElement("iframe");
        if (L.setAttribute("srcdoc", s.outerHTML), L.style.visibility = "hidden", detectIE() || native && ios) {
            var N = "javascript: window.frameElement.getAttribute('srcdoc');";
            L.setAttribute("src", N), L.contentWindow && (L.contentWindow.location = N)
        }
        L.onload = function () {
            L.style.visibility = "visible", P(L, t)
        }, n && (n.innerHTML = "", n.appendChild(L), e && e(L))
    }

    function P(e, t) {
        var n = (t = t || {}).leftOb, r = {}, i = !!t.rightOb, o = e.contentDocument,
            a = o.getElementById("epubContent"), s = o.getElementById("epubContainer");
        if (O.setContentSize(a, t), n.viewport) {
            r.epubContainer = s, r.epubContent = a, r.viewport = n.viewport, r.view = i ? "double" : "single", r.stylesFromEpubContent = !0;
            var l = w.get("nav").getFxlFit(r, "FROM CONTEXT"), c = l.scrollContainer;
            autoprefixTransform(c, "scale(" + l.bestFit + ")"), autoprefixTransformOrigin(c, "top left;"), c.style.height = "100%", w.get("nav").fxlAdjustAlignment(r)
        } else {
            deleteTransform(a);
            var d = o.getElementById("spreadL");
            d.style.width = d.style.height = null;
            var u = o.getElementById("spreadR");
            u && u.parentNode.removeChild(u)
        }
    }

    return O.initialize = function () {
        k = w.get("chapters")
    }, O.startTransition = function (t, n) {
        i(t), setTimeout(function () {
            var e = {animID: x = Math.round(1e4 * Math.random()), reload: t.reload, pageOb: t.leftOb};
            !function m(v, b) {
                v = v || {};
                if (v.reload) return void (b && b());
                var y = I.getOb("epubContainer");
                if (null == currentIndex) return y.style.opacity = 0, k.showLoader(), void (b && b());
                r(v.pageOb, function (e) {
                    if (!e) return y.style.opacity = 0, v.pageOb.index != currentIndex && k.showLoader(), void (b && b());
                    var t = document.getElementById(e + "Page");
                    t.style.opacity = null;
                    var n = t.getElementsByTagName("iframe");
                    if (n.length) {
                        var r = n[0].contentDocument.getElementById("epubContent"), i = n[0].srcdoc;
                        if (r || !i) {
                            if (n[0].style.visibility = "visible", r) {
                                var o = w.get("nav").viewFromElem(r);
                                "fxl" == o.layout && P(n[0], o)
                            }
                        } else if (requestAnimationFrame) return void requestAnimationFrame(function () {
                            m(v, b)
                        })
                    }
                    if ("navSlide" == E.data.settings.navAnim) E.data.settings.rtl ? t.style.transform = "translate3d(" + ("next" == e ? "-" : "") + y.offsetWidth + "px,0,0)" : t.style.transform = "translate3d(" + ("next" == e ? "" : "-") + y.offsetWidth + "px,0,0)", setTimeout(function () {
                        v.animID == x && (E.data.settings.rtl ? autoprefixTransform(y, "translate3d(" + ("next" == e ? "" : "-") + y.offsetWidth + "px,0,0)") : autoprefixTransform(y, "translate3d(" + ("next" == e ? "-" : "") + y.offsetWidth + "px,0,0)"), t.style.transform = "translate3d(0,0,0)", addClass(y, "anim"), addClass(t, "anim"), addClass(t, "activeSlidePage"), setTimeout(function () {
                            v.animID == x && (autoprefixTransform(y, null), removeClass(y, "anim"), b && b())
                        }, 330))
                    }, 30); else if ("navStack" == E.data.settings.navAnim) setTimeout(function () {
                        v.animID == x && (E.data.settings.rtl ? autoprefixTransform(y, "translate3d(" + ("next" == e ? "" : "-") + y.offsetWidth + "px,0,0)") : autoprefixTransform(y, "translate3d(" + ("next" == e ? "-" : "") + y.offsetWidth + "px,0,0)"), t.style.transform = "translate3d(0,0,0)", addClass(y, "anim"), addClass(t, "anim"), addClass(t, "activeSlidePage"), setTimeout(function () {
                            v.animID == x && (autoprefixTransform(y, null), removeClass(y, "anim"), b && b())
                        }, 330))
                    }, 30); else if ("navFade" == E.data.settings.navAnim) t.style.left = 0, t.style.opacity = 1, addClass(t, "anim"), addClass(t, "activeSlidePage"), setTimeout(function () {
                        v.animID == x && b && b()
                    }, 330); else if ("navFlip" == E.data.settings.navAnim) addClass(y, "anim"), E.data.settings.rtl ? (autoprefixTransform(y, "next" == e ? "rotateY(90deg)" : "rotateY(-90deg)"), autoprefixTransform(t, "next" == e ? "rotateY(-90deg)" : "rotateY(90deg)")) : (autoprefixTransform(y, "next" == e ? "rotateY(-90deg)" : "rotateY(90deg)"), autoprefixTransform(t, "next" == e ? "rotateY(90deg)" : "rotateY(-90deg)")), y.style.opacity = 0, setTimeout(function () {
                        v.animID == x && (autoprefixTransform(t, null), addClass(t, "anim"), addClass(t, "activeSlidePage"), setTimeout(function () {
                            v.animID == x && (removeClass(y, "anim"), autoprefixTransform(y, null), b && b())
                        }, 630))
                    }, 30); else if ("navBookBlock" == E.data.settings.navAnim) {
                        var a = document.createElement("div");
                        a.className = "shadow", a.style.opacity = 0, a.appendChild(document.createElement("div")), y.appendChild(a), addClass(y, "anim"), E.data.settings.rtl ? autoprefixTransform(y, "next" == e ? "rotateY(90deg)" : "rotateY(-90deg)") : autoprefixTransform(y, "next" == e ? "rotateY(-90deg)" : "rotateY(90deg)");
                        var s = y.style.transform || y.style.webkitTransform || y.style.mozTransform, l = "right";
                        if (E.data.book.chapter.viewport) {
                            var c = w.get("nav").getFxlFit();
                            l = c.innerWidth + c.marginLeft + "px"
                        }
                        var d = "left";
                        E.data.book.chapter.viewport && (d = y.style.paddingLeft || "left"), autoprefixTransformOrigin(y, "rotateY(90deg)" == s ? l + " top" : d + " top"), y.style.opacity = 0, addClass(t, "anim"), addClass(t, "activeSlidePage");
                        var u = document.createElement("div");
                        u.className = "shadow", u.style.opacity = .7, t.appendChild(u), a.style.opacity = 0, a.style.height = y.scrollHeight + "px", u.style.width = y.style.width, u.style.height = y.style.height, E.data.book.chapter.viewport && (u.style.right = a.style.right = "auto", u.style.marginLeft = a.style.marginLeft = y.style.paddingLeft, a.style.width = y.style.width, v.pageOb.viewport || (t.style.opacity = 0)), u.style.marginRight = y.style.marginRight, u.style.marginBottom = y.style.marginBottom;
                        var h = getElemMargin(y);
                        h.top || (h.top = 0);
                        var f = getComputedStyle(y).paddingTop.split("px");
                        u.style.marginTop = Number(h.top) + Number(f[0]) + "px";
                        var p = getComputedStyle(y).backgroundColor, g = "rgba(0,0,0,0)" == (p = p.replace(/ /g, ""));
                        g && (y.style.backgroundColor = "#fff"), setTimeout(function () {
                            v.animID == x && (u.style.opacity = null, setTimeout(function () {
                                a.style.opacity = .4, setTimeout(function () {
                                    autoprefixTransformOrigin(y, null), u.parentNode && u.parentNode.removeChild(u), a.parentNode && a.parentNode.removeChild(a), v.animID == x && (removeClass(y, "anim"), y.style.opacity = null, g && (y.style.backgroundColor = null), autoprefixTransform(y, null), b && b())
                                }, 430)
                            }, 200))
                        }, 30)
                    }
                })
            }(e, function () {
                k.loadChapterByURL(t, function () {
                    setTimeout(function () {
                        e.animID == x && (i(t), function (n) {
                            function r(n, r, i) {
                                n && k.getPageOb({page: n.leftOb.index}, function (e) {
                                    if (e) {
                                        var t = {};
                                        t.leftOb = clone(e), t.vIndex = n.leftOb.vIndex, t.vIndex < 0 && e.pages && e.pages.length && (t.vIndex += e.pages.length), k.planPageMapping(t, function (e) {
                                            a(t.leftOb.url, function (e) {
                                                t.styles = e, t.container = document.getElementById(r), t.view = k.getCurrentView(t.leftOb.index, t.leftOb).view, t.source = "from preloadchapters", c(t, i)
                                            })
                                        })
                                    }
                                })
                            }

                            k.isFirstChapter(function (t) {
                                k.isLastChapter(function (e) {
                                    e || o.getNextIndex(n.leftOb, function (e) {
                                        k.getSurroundingPages(e ? e.leftOb : null, function () {
                                            r(e, "nextPage")
                                        })
                                    }), t || o.getPrevIndex(n.leftOb, function (e) {
                                        k.getSurroundingPages(e ? e.leftOb : null, function () {
                                            r(e, "prevPage")
                                        })
                                    })
                                })
                            })
                        }(t), n && n.resolve())
                    }, 500)
                })
            })
        })
    }, O.interruptAnimation = function () {
        i()
    }, O.simulateChapter = function (r, i) {
        a(r.url, function (e) {
            var t = document.createElement("div"), n = {};
            n.styles = e, n.styles += "#spreadL{left:0 !important;width:auto !important;height:auto !important;position:static !important;}", n.styles += "#epubContent{width:auto !important;height: auto !important;}", n.container = t, n.leftOb = clone(r), "double" == k.getCurrentView(n.leftOb.index).view && (n.rightOb = {}, n.rightOb.content = "<div><sections class='blankForSimulation'></sections></div>", n.rightOb.styles = "", n.rightOb.layout = "rfl"), n.simulate = !0, c(n, i)
        })
    }, O.populateSpreads = function (e, t) {
        var n = 0;
        "rfl" == (t = t || {}).leftOb.layout && "double" == t.view && (n = config.spreadSpacing ? config.spreadSpacing : 0);
        var r = t.leftContent ? t.leftContent : t.leftOb.content;
        if (!t.cached) {
            (c = document.createElement("div")).innerHTML = t.leftContent ? t.leftContent : t.leftOb.content;
            var i = c.children[0], o = i.children[0];
            copyAttributes(i, o), removeClass(o, "adjustedLineHeight"), o.id = "spreadL", o.style.transform = o.style.transformOrigin = o.style.height = null, t.leftOb.viewport ? (o.style.left = "0px", o.style.width = t.leftOb.viewport.width + "px", o.style.height = t.leftOb.viewport.height + "px", E.data.settings.rtl && (o.style.left = "auto", o.style.right = "0px")) : (o.style.left = null, o.style.width = null, o.style.height = null), addClass(o, t.leftOb.layout), r = c.innerHTML
        }
        var a = replaceHTML(e, r);
        if (t.rightOb) {
            var s;
            if (1 < a.children[0].children.length) for (var l = 0; l < a.children[0].children.length; l++) if ("spreadR" == a.children[0].children[l].id) {
                s = a.children[0].children[l];
                break
            }
            if (!s) {
                var c;
                (c = document.createElement("div")).innerHTML = t.rightContent ? t.rightContent : t.rightOb.content;
                var d = c.children[0];
                copyAttributes(d, s = d.children[0]), removeClass(s, "adjustedLineHeight"), s.id = "spreadR", s.style.transform = s.style.transformOrigin = s.style.height = null, a.children[0].appendChild(s)
            }
            t.rightOb.viewport && (t.leftOb.viewport && (s.style.left = t.leftOb.viewport.width + n + "px", E.data.settings.rtl && (s.style.right = s.style.left, s.style.left = "auto")), s.style.width = t.rightOb.viewport.width + "px", s.style.height = t.rightOb.viewport.height + "px", addClass(s, t.rightOb.layout))
        }
        return a
    }, O.test = function (e) {
    }, O.setContentSize = function (e, t) {
        var n = (t = t || {}).leftOb, r = t.rightOb;
        e.style.width = e.style.height = null;
        var i = 0;
        "rfl" == t.leftOb.layout && "double" == t.view && (i = config.spreadSpacing ? config.spreadSpacing : 0);
        var o = n.viewport;
        if (o) {
            if (o.width) {
                var a = o.width;
                r && r.viewport && (a += r.viewport.width + i), e.style.width = a + 0 + "px"
            }
            if (o.height) {
                var s = o.height;
                r && r.viewport && (s = Math.max(s, r.viewport.height)), e.style.height = s + 0 + 0 + "px"
            }
        }
    }, O
}]), app.factory("crdv", ["stg", "status", "error", "translit", "$rootScope", "$injector", "khttp", "$ionicSideMenuDelegate", function (a, l, t, i, c, e, n, r) {
    var d = {};

    function o(e) {
        a.data.settings.rtl ? r.toggleLeft() : r.toggleRight()
    }

    function u() {
        try {
            return cordova, !0
        } catch (e) {
            return !1
        }
    }

    function s(e, t) {
        for (var n = 0, r = 0; r < t.length; r++) t[r] == e && n++;
        return n
    }

    function h(i, o, a, s) {
        try {
            l.updateProgress(0), i.getEntries(function (e) {
                var r = 0;
                !function t() {
                    if (r >= e.length) i.close(function () {
                        a && a()
                    }); else {
                        l.updateProgress(r / e.length);
                        var n = e[r];
                        r++, n.getData(new zip.BlobWriter, function (e) {
                            try {
                                if ("/" == n.filename.substr(-1)) return void t();
                                d.writeFile(e, ph.join(o, n.filename), d.libEbooksDirectory, function () {
                                    t()
                                })
                            } catch (e) {
                                s && s()
                            }
                        }, function (e, t) {
                        })
                    }
                }()
            })
        } catch (e) {
            s && s()
        }
    }

    function f(e) {
        switch (e.code) {
            case FileError.QUOTA_EXCEEDED_ERR:
                "QUOTA_EXCEEDED_ERR";
                break;
            case FileError.NOT_FOUND_ERR:
                "NOT_FOUND_ERR";
                break;
            case FileError.SECURITY_ERR:
                "SECURITY_ERR";
                break;
            case FileError.INVALID_MODIFICATION_ERR:
                "INVALID_MODIFICATION_ERR";
                break;
            case FileError.INVALID_STATE_ERR:
                "INVALID_STATE_ERR";
                break;
            default:
                "Unknown Error"
        }
    }

    return d.initialize = function (l) {
        putTest("in1"), u() ? (putTest("in3"), a.data.cordova = !0, putTest("in4"), document.addEventListener("deviceready", function () {
            (function () {
                try {
                    StatusBar && (StatusBar.overlaysWebView(!1), ios ? StatusBar.styleDefault() : StatusBar.styleLightContent())
                } catch (e) {
                }
                try {
                    document.addEventListener("deviceready", function () {
                    }, !1)
                } catch (e) {
                }
                try {
                    navigator.splashscreen && setTimeout(function () {
                        navigator.splashscreen.hide()
                    }, 1e3)
                } catch (e) {
                }
                try {
                    mobile && native && "undefined" != typeof Keyboard && Keyboard.hideFormAccessoryBar(!1)
                } catch (e) {
                }
            })(), c.$$phase || c.$apply();
            a.copyLocalToNativeStorage(), d.initAds(), d.initDirectories({}, function () {
                n.get("permit.json").success(function (a) {
                    function s() {
                        var e = {error: "errorAndCallback", msg: "noAppPermit", cb: d.exit};
                        t.update(e), c.$$phase || c.$apply()
                    }

                    ("udid" == a.type ? window.plugins.uniqueDeviceID.get : "mac" == a.type ? window.MacAddress.getMacAddress : window.plugins.imeiplugin.getImei)(function (e) {
                        e || s();
                        try {
                            for (var t, n = a.list.split("\n"), r = 0; r < n.length; r++) {
                                var i = n[r].trim().split(" ")[0].trim(), o = n[r].trim().split("/")[0].trim();
                                if (i == e || o == e) {
                                    t = !0;
                                    break
                                }
                            }
                        } catch (e) {
                            return void s()
                        }
                        t ? l() : s()
                    }, s)
                }).error(function () {
                    l()
                })
            }), document.addEventListener("menubutton", o, !1), c.$$phase || c.$apply()
        }, !1), putTest("in5")) : l()
    }, d.showKeyboard = function () {
        try {
            if (!u()) return;
            Keyboard.show()
        } catch (e) {
        }
    }, d.hideKeyboard = function () {
        try {
            Keyboard.hide()
        } catch (e) {
        }
    }, d.tts = function (e, t) {
        var n = {text: e, rate: 1};
        try {
            "iOS" == window.device.platform && ("9" == window.device.version.charAt(0) ? n.rate = 1.5 : "10" == window.device.version.substr(0, 2) ? n.rate = 1.5 : "11" == window.device.version.substr(0, 2) && (n.rate = 1.5))
        } catch (e) {
        }
        TTS.speak(n, function () {
            t(!0)
        }, function (e) {
            d.toast(i.get("ttsUnavailableMsg")), t(!1)
        })
    }, d.toast = function (e) {
        u() && window.plugins.toast.showShortBottom(e)
    }, d.copyToClipboard = function (e) {
        if (u()) try {
            cordova.plugins.clipboard ? cordova.plugins.clipboard.copy(e) : window.plugins.clipboard.copy(e), d.toast(i.get("copiedToClipboard"))
        } catch (e) {
        }
    }, d.share = function (e) {
        if (u()) try {
            window.plugins.socialsharing.share(e)
        } catch (e) {
        }
    }, d.createPDF = function (e, t, n) {
        try {
            var r = new jsPDF;
            margins = {
                top: 10,
                bottom: 0,
                left: 10,
                width: 180
            }, e = e.replace(/<br\/>/g, "<p><br/></p>"), r.fromHTML(e, margins.left, margins.top, {width: margins.width}, function (e) {
                try {
                    cordova, d.docDirectory.getFile(t, {create: !0}, function (e) {
                        e.createWriter(function (e) {
                            e.onwriteend = function (e) {
                            }, e.onerror = function (e) {
                            }, e.write(r.output()), d.toast(i.get("pdfSaved"))
                        }, f)
                    }, f)
                } catch (e) {
                    try {
                        setTimeout(function () {
                            r.save(t)
                        }, 1e3)
                    } catch (e) {
                    }
                }
            }, margins)
        } catch (e) {
        }
    }, d.initDirectories = function (n, r) {
        function i(e) {
        }

        n = n || {}, window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem, window.requestFileSystem(LocalFileSystem.TEMPORARY, 10485760, function (e) {
            d.cacheDirectory = e.root, window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function (e) {
                d.docDirectory = e.root, n.useDir && (d.docDirectory = n.useDir);
                var t = "kotobeeReader";
                isReaderApp ? t = "kotobeeReaderApp" : config.kotobee.cloudid && (t += config.kotobee.cloudid), d.docDirectory.getDirectory(t, {create: !0}, function (e) {
                    d.appDirectory = e, d.appDirectory.getDirectory("library", {create: !0}, function (e) {
                        d.libEbooksDirectory = e, d.appDirectory.getDirectory("local", {create: !0}, function (e) {
                            d.localDirectory = e, d.localDirectory.getDirectory("books", {create: !0}, function (e) {
                                d.localBooksDirectory = e, d.localDirectory.getDirectory("thumbs", {create: !0}, function (e) {
                                    d.localThumbsDirectory = e, d.libEbooksDirectory.getFile(".nomedia", {create: !0}, function () {
                                        d.localDirectory.getFile(".nomedia", {create: !0}, function () {
                                            r()
                                        }, i)
                                    }, i)
                                }, i)
                            }, i)
                        }, i)
                    }, i)
                }, function () {
                    d.docDirectory.nativeURL != cordova.file.dataDirectory && window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (e) {
                        d.initDirectories({useDir: e}, r)
                    })
                })
            }, i)
        }, i)
    }, d.exit = function () {
        u() && (navigator.app ? navigator.app.exitApp() : navigator.device && navigator.device.exitApp())
    }, d.applyExistingBooksOld = function (i, o) {
        if (u()) {
            var e = d.libEbooksDirectory.createReader(), a = [], s = function () {
                e.readEntries(function (e) {
                    if (e.length) a = a.concat(function (e) {
                        return Array.prototype.slice.call(e || [], 0)
                    }(e)), s(); else {
                        for (var t = 0; t < a.length; t++) for (var n = a[t].name, r = 0; r < i.length; r++) i[r].path == n && (i[r].exists = !0);
                        o()
                    }
                }, function (e) {
                })
            };
            s()
        } else o()
    }, d.applyExistingBooks = function (e) {
        if ((native || desktop) && (e || a.data.currentLibrary && (e = a.data.currentLibrary.books), e)) {
            for (var t = [], n = 0; n < e.length; n++) e[n].exists = !1;
            for (var r = 0; r < a.data.downloaded.length; r++) a.data.downloaded[r].favorite = !1;
            for (r = 0; r < a.data.downloaded.length; r++) {
                t.push(a.data.downloaded[r].id);
                var i = a.data.downloaded[r].path;
                a.data.downloaded[r].favorite = null;
                for (n = 0; n < e.length; n++) if (e[n].path == i) {
                    e[n].exists = !0, a.data.downloaded[r].favorite = e[n].favorite;
                    break
                }
            }
            var o = a.data.downloaded;
            for (r = o.length; r--;) 2 <= s(o[r].id, t) && o.splice(r, 1);
            c.$$phase || c.$apply()
        }
    }, d.vibrate = function (e) {
        u() && (config.noVibration || (e = e || 28, ios || (ios && (e /= 4), "high" == config.vibrationIntensity ? e = 40 : "medium" == config.vibrationIntensity ? e = 28 : "low" == config.vibrationIntensity && (e = 15), navigator && navigator.vibrate ? navigator.vibrate(e) : navigator && navigator.notification && navigator.notification.vibrate && navigator.notification.vibrate(e))))
    }, d.deleteEbook = function (t, n) {
        d.libEbooksDirectory.getDirectory(t.path, {}, function (e) {
            e.removeRecursively(function () {
                for (var e = 0; e < a.data.downloaded.length; e++) a.data.downloaded[e].path == t.path && (t.exists = !1, a.data.downloaded.splice(e, 1), e--);
                a.writeSlot("downloaded" + a.getBookId(!0), a.data.downloaded, function () {
                    n()
                })
            }, function (e) {
            })
        }, f)
    }, d.writeEbook = function (n, r, e, i) {
        var o = e;
        d.libEbooksDirectory.getDirectory(r.path, {create: !0}, function (e) {
            var t = ph.join(r.path, n);
            d.writeFile(o, t, d.libEbooksDirectory, function () {
                d.unzipViaPlugin(ph.join(d.libEbooksDirectory.nativeURL, t), ph.join(d.libEbooksDirectory.nativeURL, r.path, "EPUB"), function (e) {
                    r.exists = !0, a.data.downloaded.push(r), d.applyExistingBooks(a.data.currentLibrary.books), a.writeSlot("downloaded" + a.getBookId(!0), a.data.downloaded, function () {
                        i()
                    })
                }, function (e) {
                })
            })
        })
    }, d.unzip = function (e, t, n, r) {
        d.unzipBlob(e, t, n, r)
    }, d.unzipBlob = function (e, t, n, r) {
        zip.workerScriptsPath = "lib/zip/", zip.createReader(new zip.BlobReader(e), function (e) {
            h(e, t, n, r)
        })
    }, d.unzipViaPlugin = function (e, t, n, r) {
        zip.unzip(e, t, n, r)
    }, d.unzipData64 = function (e, t, n, r) {
        zip.workerScriptsPath = "lib/zip/", setTimeout(function () {
            zip.createReader(new zip.Data64URIReader(e), function (e) {
                setTimeout(function () {
                    h(e, t, n, r)
                }, 100)
            })
        }, 100)
    }, d.writeFile = function (o, e, t, a) {
        var n = ph.basename(e);
        try {
            d.getDirectoryRelativeToBooks(ph.normalize(e), t, function (e) {
                try {
                    e.getFile(n, {create: !0, exclusive: !1}, function (e) {
                        e.createWriter(function (n) {
                            var r = o.byteLength ? o.byteLength : o.size, i = 0;

                            function t() {
                                var e = Math.min(4194304, r - i), t = o.slice(i, i + e);
                                n.write(t), i += e
                            }

                            n.onwrite = function (e) {
                                i < r ? t() : a && a(!0)
                            }, n.onerror = function (e) {
                                a && a(!1)
                            }, t()
                        }, f)
                    }, function (e, t) {
                    })
                } catch (e) {
                }
            })
        } catch (e) {
        }
    }, d.getDirectoryRelativeToBooks = function (e, t, n) {
        t = t || d.libEbooksDirectory;
        var r = e.split("/");
        if (1 != r.length) {
            var i = r[0];
            t.getDirectory(i, {create: !0}, function (e) {
                r.shift();
                var t = r.join("/");
                d.getDirectoryRelativeToBooks(t, e, n)
            }, function (e) {
            })
        } else n(t)
    }, d.openInNativeBrowser = function (e, t) {
        e = e.toString();
        try {
            if (t) return void window.open(e, "_system");
            try {
                if (cordova.InAppBrowser) {
                    window.plugins.toast.show("  " + i.get("loadingExternalPage") + "  ", 4e4, "bottom");
                    var n = ios ? "yes" : "no",
                        r = cordova.InAppBrowser.open(e, "_blank", "location=no,hidden=no,clearcache=yes,closebuttoncaption=Go back to App,toolbar=" + n + ",presentationstyle=formsheet");
                    return r.addEventListener("loadstart", function () {
                    }), r.addEventListener("loadstop", function () {
                        ios || window.plugins.toast.hide()
                    }), void r.addEventListener("loaderror", function () {
                        if (!ios) {
                            try {
                                r && r.close()
                            } catch (e) {
                            }
                            window.plugins.toast.hide(), window.plugins.toast.showLongBottom("  " + i.get("errorLoadingPage") + "  ")
                        }
                    })
                }
            } catch (e) {
            }
            try {
                if (window.inAppBrowserXwalk) {
                    return void window.inAppBrowserXwalk.open(e, {
                        toolbarColor: "#FFFFFF",
                        toolbarHeight: "40",
                        closeButtonText: "< Close",
                        closeButtonSize: "25",
                        closeButtonColor: "#000000",
                        openHidden: !1
                    })
                }
            } catch (e) {
            }
            return void window.open(e, "_system")
        } catch (e) {
        }
    }, d.initAds = function () {
        try {
            if ("undefined" == typeof admob) return;
            if (!admob) return
        } catch (e) {
            return
        }
        config.kotobee.admobId && (admob.setOptions({publisherId: config.kotobee.admobId}), admob.createBannerView())
    }, d.mobileDownload = function (r) {
        if (u() && cordova.plugins.fileOpener2) {
            var i = new XMLHttpRequest;
            i.open("GET", cleanURL(r.replace("../../", "epub/EPUB/"))), i.responseType = "arraybuffer", i.addEventListener("error", function (e) {
            }), i.addEventListener("load", function () {
                var n = i.response, e = "";
                switch (device.platform.toLowerCase()) {
                    case"android":
                        e = cordova.file.externalRootDirectory;
                        break;
                    case"ios":
                        e = cordova.file.documentsDirectory
                }
                var t = e;
                window.resolveLocalFileSystemURL(t, function (e) {
                    e.getFile(ph.basename(r), {create: !0, exclusive: !1}, function (t) {
                        t.createWriter(function (e) {
                            e.write(n), e.onwriteend = function () {
                                var e = t.toURL();
                                cordova.plugins.fileOpener2.open(e, n.type, {
                                    error: function (e) {
                                    }, success: function () {
                                    }
                                })
                            }, e.onerror = function (e) {
                            }
                        }, function (e) {
                        })
                    }, function (e) {
                    })
                }, function (e) {
                })
            }), i.send()
        }
    }, d
}]), app.factory("cssParser", ["khttp", "cache", "stg", "workers", function (l, e, t, k) {
    var o, x = {}, r = [];

    function C(e) {
        e = e.replace(/\r?\n|\r/g, " ");
        var t, n = [], r = "key", i = [0], o = n, a = [o];

        function s(e) {
            return e = e || 1, i[i.length - e]
        }

        for (var l = 0; l < e.length; l++) t = t || {}, "}" == e[l] ? ("properties" == r && (t.properties = e.substring(s(), l).trim(), t.keys && t.keys.length && (t.keys[t.keys.length - 1] = t.keys[t.keys.length - 1].trim()), o.push(t)), "key" == r && 1 < a.length && (a.pop(), o = a[a.length - 1]), t = null, r = "key", i.push(l + 1)) : "{" == e[l] ? ("properties" == r && (t.children || (t.children = []), t.keys && t.keys.length && (t.keys[t.keys.length - 1] = t.keys[t.keys.length - 1].trim()), n.push(t), o = t.children, a.push(o), (t = {keys: []}).keys.push(e.substring(s(), l).trim())), i.push(l + 1), r = "properties") : "key" == r && (t.keys || (t.keys = [""]), "," == e[l] ? t.keys.push("") : t.keys[t.keys.length - 1] += e[l]);
        return n
    }

    return x.clearCache = function () {
        r = []
    }, x.inject = function (i, b, e) {
        b = b || {};
        var o = "", a = 0;

        function s(e, t) {
            for (var n = 0; n < r.length; n++) if (r[n].url == e && r[n].id == t) return r.push(r[n]), r[n]
        }

        function y(e) {
            7 < r.length && r.shift(), r.push(e)
        }

        function w(e) {
            var t = e;
            return t = (t = (t = (t = (t = t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g, "")).replace(/ {2,}/g, " ")).replace(/ ([{:}]) /g, "$1")).replace(/([;,]) /g, "$1")).replace(/ !/g, "!")
        }

        !function t(g, n) {
            if (!g) return g = {}, void v();
            if ("path" == g.type) {
                var m = g.val;
                if (!m || 0 <= m.indexOf("EPUB/css/kotobeeInteractive.css")) return void v();
                var e = s(m, b.id);
                e ? v(e.val) : l.get(g.dontCache ? m : cacheBust(m)).success(function (e) {
                    r(e, m, "url")
                }).error(function () {
                    v()
                })
            } else r(g.val, g.root);

            function r(e, t, n) {
                if (!e) return v();
                if (config.dontParseCss) return "url" == n && y({url: m, val: e, id: b.id}), void v(e);
                if (k.supported()) {
                    var r = {};
                    return r.data = e, r.rootPath = t, r.cssOb = g, r.desktop = desktop, void k.call("cssParser", "parse", [r], function (e) {
                        "url" == n && y({url: m, val: e, id: b.id}), v(e)
                    })
                }
                e = (e = (e = (e = (e = (e = x.applyRoot(t, e)).replace(/\/\*[\s\S]*?\*\//g, "")).replace(/<!--/g, "")).replace(/-->/g, "")).replace(/@charset.*?;/g, "")).replace(/@namespace.*?;/g, "");
                var i = "spreadL";
                b.id && (i = b.id);
                var o = (g.parentClass ? g.parentClass : "#epubContainer.stylesEnabled") + " #" + i, a = C(e), s = "";
                try {
                    for (var l = 0; l < a.length; l++) {
                        var c = p(a[l].keys);
                        if (s += c.joined, s += "{", a[l].children && a[l].children.length) for (var d = 0; d < a[l].children.length; d++) {
                            var u = p(a[l].children[d].keys);
                            if (s += u.joined, s += "{" + a[l].children[d].properties + "}", u.hasBody) {
                                var h = f(a[l].properties);
                                h && (s += "#epubContainer{" + h + "}")
                            }
                        }
                        if (a[l].properties && (s += a[l].properties), s += "}", c.hasBody) {
                            var h = f(a[l].properties);
                            h && (s += "#epubContainer{" + h + "}")
                        }
                    }
                } catch (e) {
                }

                function f(e) {
                    if (e) {
                        for (var t = e.split(";"), n = "", r = 0; r < t.length; r++) t[r] && -1 != t[r].trim().indexOf("background") && (n = t[r].trim().replace(/url\(.*?\)/g, "") + ";");
                        return n
                    }
                }

                function p(e) {
                    for (var t = {}, n = 0; n < e.length; n++) if (e[n]) {
                        var r = e[n].trim();
                        0 != r.indexOf("body") ? 0 != r.indexOf("html") ? 0 != r.indexOf("@media") && 0 != r.indexOf("@") && isNaN(r[0]) && "from" != r && "to" != r && (e[n] = o + " " + r) : e[n] = r.replace("html", o) : (e[n] = r.replace("body", o), 0 == e[n].indexOf("html") && (e[n] = e[n].replace("html", o)), t.hasBody = !0)
                    }
                    return t.joined = e.join(","), t
                }

                e = w(e = s), "url" == n && y({url: m, val: e, id: b.id}), v(e)
            }

            function v(e) {
                e && (o += e), ++a < i.length ? t(i[a], n) : n && n(o)
            }
        }(i[a], e)
    }, x.applyRoot = function (r, e) {
        if (e) {
            return e.replace(/url\((.*?)\)/g, function (e, t) {
                var n = "";
                return 0 == t.indexOf('"') ? (t = t.substr(1, t.length - 2), n = '"') : 0 == t.indexOf("'") && (t = t.substr(1, t.length - 2), n = "'"), -1 != t.indexOf("http://") ? e : -1 != t.indexOf("https://") ? e : 0 == t.indexOf("data:") ? e : "url(" + n + (t = ph.join(r, t)) + n + ")"
            })
        }
    }, x.getStyles = function () {
        return o
    }, x.replaceStyles = function (e, t) {
        var n;
        t = t || {};
        for (var r = document.getElementsByTagName("style"), i = 0; i < r.length; i++) if (null != r[i].getAttribute("kotobee")) {
            n = r[i];
            break
        }
        o = e, t.append && (o = n.innerHTML + " " + e), n = replaceHTML(n, o)
    }, x.hideStyles = function () {
        removeClass(e.getOb("epubContainer"), "stylesEnabled")
    }, x.showStyles = function () {
        addClass(e.getOb("epubContainer"), "stylesEnabled")
    }, x.stylize = function (e, t) {
        var n = document.getElementById(e);
        if (n) {
            for (var r = n.getAttribute("style"), i = Object.keys(t), o = r ? r + ";" : "", a = 0; a < i.length; a++) o += i[a] + ":" + t[i[a]] + ";";
            n.setAttribute("style", o)
        }
    }, x
}]), app.factory("design", ["cssParser", "$interpolate", "stg", "khttp", function (n, r, e, i) {
    var t, o, a = {};
    return a.getBgStyle = function () {
        if (!t) {
            var e = "";
            isKotobeeHosted() && (e = publicRoot), "stretch" == (t = {
                "background-image": 'url("' + (config.splashBg ? e + "imgUser/" + config.splashBg : "none") + '")',
                "background-color": config.splashBgColor ? config.splashBgColor : "#3f3248",
                color: (config.splashColor ? config.splashColor : "#fff") + " !important",
                "background-size": config.splashBgSize ? config.splashBgSize : "cover"
            })["background-size"] && (t["background-size"] = "100% 100%")
        }
        return t
    }, a.convertTabs = function () {
        if (config.tabs) for (var e = 0; e < config.tabs.length; e++) {
            var t = document.createElement("div");
            if (t.setAttribute("data-kotobee", config.tabs[e]), config.tabs[e] = kInteractive.readData(t), config.tabs[e] && config.tabs[e].icon) {
                var n = "";
                isKotobeeHosted() && (n = publicRoot), config.tabs[e].iconStyle = {"background-image": "url(" + n + "imgUser/" + config.tabs[e].icon + ")"}
            }
        }
    }, a.injectUserCSS = function (n) {
        function t() {
            for (var e = document.getElementsByTagName("style"), t = 0; t < e.length; t++) if (e[t].hasAttribute("user")) {
                e[t].innerHTML = r(o)(n);
                break
            }
        }

        o ? t() : i.get(cacheBust(rootDir + "css/user.css")).success(function (e) {
            o = e, t()
        })
    }, a.applyRichTextLibrary = function () {
        for (var e, t, n = document.getElementsByTagName("script"), r = 0; r < n.length; r++) if (n[r].getAttribute("src") && 0 <= n[r].getAttribute("src").indexOf("quill/quill.min.js")) {
            e = n[r];
            break
        }
        var i = document.getElementsByTagName("link");
        for (r = 0; r < i.length; r++) if (i[r].getAttribute("href") && 0 <= i[r].getAttribute("href").indexOf("quill/quill.snow.css")) {
            t = i[r];
            break
        }
        if (config.htmlInNotes) {
            var o = document.getElementsByTagName("head")[0];
            if (!e) {
                var a = document.createElement("script");
                a.src = rootDir + "lib/quill/quill.min.js", o.appendChild(a)
            }
            if (!t) {
                var s = document.createElement("link");
                s.setAttribute("rel", "stylesheet"), s.setAttribute("href", rootDir + "lib/quill/quill.snow.css"), o.appendChild(s)
            }
        } else e && e.parentNode.removeChild(e), t && t.parentNode.removeChild(t)
    }, a.stylize = function (e, t) {
        n.stylize(e, t)
    }, a
}]), app.factory("error", ["modals", "translit", "$injector", "$location", "$ionicHistory", function (i, o, a, s, l) {
    var c = {}, d = [];
    return c.modal = null, c.update = function (e) {
        var t, n = a.get("backend");
        if (e) switch (e.error) {
            case"s_authError":
                "library" == config.kotobee.mode && n.cloudParam("entry") ? t = {
                    mode: "login",
                    dynamic: !0,
                    animation: "slide-in-up",
                    loginOptions: {}
                } : (s.path("/login"), l.clearHistory());
                break;
            case"networkError":
                t = {mode: "networkError", errorOptions: {ref: e.ref, retry: c.retry}};
                break;
            case"localonlyError":
                t = {mode: "localOnlyError", errorOptions: {ref: e.ref, retry: c.retry}};
                break;
            case"errorAndCallback":
                t = {mode: "generalError", errorOptions: {msg: o.get(e.msg), cb: e.cb}};
                break;
            case"ssoEmailError":
                t = {mode: "ssoEmailError", errorOptions: {provider: {name: e.provider}, cb: e.cb}};
                break;
            default:
                t = {mode: "generalError", errorOptions: {msg: o.get(e.error)}}
        }
        for (var r = 0; r < d.length; r++) d[r].error == e.error && d[r].func(t);
        t && i.show(t)
    }, c.retry = function (e) {
        i.hide(), timeOut(function () {
            e.func.apply(null, e.args)
        }, 100)
    }, c.detect = function (e, t) {
        d.push({error: e, func: t})
    }, c.removeDetection = function (e, t) {
        for (var n = 0; n < d.length; n++) if (t == d[n].func && e == d[n].error) return void d.splice(n, 1)
    }, c
}]), app.factory("events", ["backend", function (n) {
    var e = {};
    return e.initialize = function () {
        readerV < 1.5 || (kInteractive.events = this)
    }, e.add = function (e, t) {
        readerV < 1.5 || (e.target = e.currentTarget = e.elem, kotobee.dispatchEvent(e.action, e), e.disableRemote || n.addEvent(e, t))
    }, e
}]), app.factory("initializer", ["$rootScope", "$injector", "np", "chapterAPI", "translit", "autohide", "scorm", "events", "workers", "cssParser", "status", "tinCan", "book", "$location", "chapters", "error", "modals", "popovers", "$ionicHistory", "$ionicPlatform", "crdv", "cache", "auth", "design", "stg", "backend", "settings", function (c, i, e, o, d, a, s, l, u, t, n, h, r, f, p, g, m, v, b, y, w, k, x, C, S, A, L) {
    var N, I, E, T = {}, B = [];

    function O(e, t) {
        e.className = "", setTimeout(function () {
            e.className = "icon fa fa-cog fa-spin size16", setTimeout(t, 400)
        }, 500)
    }

    function P() {
        var r = require("nw.gui");
        N = N || new r.Menu({type: "menubar"});
        var e = new r.Menu;
        e.append(l({label: d.get("exit")}, a)), N.append(l({label: d.get("file")}, a, e));
        for (var t = new r.Menu, n = new r.Menu, i = S.data.languages, o = 0; o < i.length; o++) n.append(l({label: i[o].label}, s));

        function a(e) {
            this.label.toLowerCase() == d.get("exit").toLowerCase() && r.App.quit()
        }

        function s(e) {
            var t = this.label;
            setTimeout(function () {
                for (var e = 0; e < S.data.languages.length; e++) if (S.data.languages[e].label == t) return S.data.settings.language = S.data.languages[e].val, L.langChanged(), void (c.$$phase || c.$apply())
            }, 300)
        }

        function l(e, t, n) {
            return t && (e.click = t), n && (e.submenu = n), new r.MenuItem(e)
        }

        t.append(l({label: d.get("language")}, a, n)), N.append(l({label: d.get("settings")}, a, t)), r.Window.get().menu = N
    }

    return T.initialize = function () {
        T.initialized || T.initializing || (S.data.initPath = f.path(), f.path("/loading"), function (r) {
            putTest("preInitialize"), T.initializing = !0, e.initialize(), w.initialize(function () {
                C.injectUserCSS(config);
                var e = T.getLogo();
                T.playAudio(), T.displayBg(), A.addListener("pathsChanged", T.playAudio), A.addListener("pathsChanged", T.displayBg);
                for (var t = document.getElementsByTagName("link"), n = 0; n < t.length; n++) if ("shortcut icon" == t[n].getAttribute("rel")) {
                    t[n].getAttribute("href") || t[n].setAttribute("href", config.icon ? config.icon : e.logo);
                    break
                }
                putTest("preInitialize2"), k.initialize(), h.initialize(), u.initialize(), S.initialize(), s.initialize(), l.initialize(), a.initialize(), o.initialize(), S.initializeSettings(function () {
                    L.langChanged(), putTest("preInitialize3"), window.addEventListener("message", function (e) {
                        var t = e.data && "string" == typeof e.data ? e.data.split(":") : [""];
                        if ("next" == t[0]) p.nextChapter(); else if ("prev" == t[0]) p.prevChapter(); else if ("notebook" == t[0]) angular.element(document.getElementById("tabMenu")).scope().notebookClicked(); else if ("goto" == t[0]) f.path(i.get("library").root + "/reader/chapter/" + Number(t[1])); else if ("zoom" == t[0]) for (var n = document.getElementsByTagName("meta"), r = 0; r < n.length; r++) "viewport" == n[r].getAttribute("name") && n[r].setAttribute("content", "initial-scale=" + t[1])
                    }, !1), window.kbOpenChapterURL = function (e) {
                        e && (-1 == e.indexOf(":/") && (e = ph.join(S.data.book.chapter.url, e)), p.applyChapterStateFromURL(e))
                    }, window.addEventListener("keydown", function (e) {
                        if ("a" == e.key && (e.ctrlKey || e.metaKey)) {
                            var t = e.target;
                            if (!t || !t.nodeName) return;
                            "input" != t.nodeName.toLowerCase() && "textarea" != t.nodeName.toLowerCase() || t.select()
                        }
                    }), setTimeout(function () {
                        ionic.tap.requiresNativeClick = function (e) {
                            return !(!ionic.Platform.isWindowsPhone() || "A" != e.tagName && "BUTTON" != e.tagName && !e.hasAttribute("ng-click") && ("INPUT" != e.tagName || "button" != e.type && "submit" != e.type)) || !!(!e || e.disabled || /^(file|range)$/i.test(e.type) || /^(object|video|audio)$/i.test(e.tagName) || ionic.tap.isLabelContainingFileInput(e)) || ionic.tap.isElementTapDisabled(e)
                        }
                    }, 1e3), desktop && P(), native || (document.onkeydown = function (e) {
                        "app" != config.kotobee.mode && document.activeElement && "epubContainer" == document.activeElement.id && (m.shown() || (e = e || window.event).shiftKey || ("37" == e.keyCode ? (S.data.settings.rtl ? p.nextChapter() : p.prevChapter(), c.$$phase || c.$apply()) : "39" == e.keyCode && (S.data.settings.rtl ? p.prevChapter() : p.nextChapter(), c.$$phase || c.$apply())))
                    }), putTest("preInitialize4"), k.setOb("title", replaceHTML(k.getOb("title"), d.get("loading") + "..")), d.addListener(function () {
                        desktop && function () {
                            if (N) for (; N.items.length;) N.removeAt(0);
                            P()
                        }(), I || S.data.book || S.data.book.meta || k.setOb("title", replaceHTML(k.getOb("title"), d.get("loading") + "..")), putTest("translit.addListener2"), I = !0, r && r()
                    }), putTest("preInitialize5"), config.kotobee.cloudid && A.getS3Paths()
                })
            })
        }(function () {
            y.ready(function () {
                setTimeout(function () {
                    !function (e) {
                        putTest("postInitialize start"), function e(t) {
                            return t();
                            if ("localhost" == location.hostname) return t();
                            var n = document.getElementById("iconDetector");
                            if (preview && -1 != window.location.href.indexOf("&screenshot")) return void (-(n.style.opacity = 1) == window.location.href.indexOf("&startup") && t && t());
                            O(n, function () {
                                E = E || setTimeout(function () {
                                    n.style.opacity = 1, t && t()
                                }, 8e3), n.offsetWidth < 10 ? setTimeout(function () {
                                    e(t)
                                }, 1e3) : (clearTimeout(E), n.style.opacity = 1, setTimeout(function () {
                                    t && t()
                                }, 1e3))
                            })
                        }(function () {
                            putTest("postInitialize start2"), A.initialize(e).then(function () {
                                if (putTest("MM"), "library" == config.kotobee.mode || isReaderApp) {
                                    try {
                                        S.readSlot("downloaded" + S.getBookId(!0), function (e) {
                                            S.data.downloaded = e, putTest("MMMM")
                                        })
                                    } catch (e) {
                                        S.data.downloaded = []
                                    }
                                    S.data.downloaded || (S.data.downloaded = [])
                                } else "book" == config.kotobee.mode ? (bookPath = "epub/", preview && (bookPath = config.kotobee.bookPath), bookPath = bookPath || "epub/") : "app" == config.kotobee.mode || (n.update(), g.update({
                                    error: "errorAndCallback",
                                    msg: "cantReadConfigFile",
                                    cb: w.exit
                                }));
                                x.authenticate(e)
                            }), y.registerBackButtonAction(function (e) {
                                var t = b.currentView();
                                "forgotPwd" == t.stateId ? f.path("/login") : "register" == t.stateId ? f.path("/login") : "library" == t.stateId && isReaderApp ? f.path("/app") : m.show({
                                    mode: "exit",
                                    backdropClickToClose: !1,
                                    exitOptions: {
                                        exit: function () {
                                            w.exit()
                                        }
                                    }
                                }), c.$apply()
                            }, 101), T.initialized = !0, T.initializing = !0, function () {
                                for (var e = 0; e < B.length; e++) B[e].apply(this, arguments)
                            }()
                        })
                    }()
                }, 700)
            })
        }))
    }, T.displayBg = function () {
        C.stylize("home", C.getBgStyle())
    }, T.playAudio = function () {
        if (config.audio && !document.bgAudio) {
            var e = "";
            isKotobeeHosted() && (e = publicRoot);
            var t = e + "imgUser/" + config.audio, n = document.createElement("audio");
            n.setAttribute("data-dontclose", !0), n.setAttribute("controls", "true"), n.setAttribute("autoplay", "true"), n.setAttribute("src", t), config.audioLoop && n.setAttribute("loop", "true"), n.setAttribute("data-tap-disabled", "false");
            var r = document.createElement("source");
            r.src = t, n.appendChild(r), n.appendChild(document.createTextNode("Your browser does not support the audio element")), n.oncanplay = function () {
                kInteractive.tinCan({verb: "played", activity: "Audio: " + t})
            }, n.play(), document.bgAudio = n
        }
    }, T.getLogo = function () {
        var e = "";
        return isKotobeeHosted() && (e = publicRoot), {
            logo: config.logo ? e + "imgUser/" + config.logo : rootDir + "img/ui/defaultWelcomeLogoNew.png",
            slogan: config.slogan ? config.slogan : ""
        }
    }, T.addListener = function (e) {
        B.push(e)
    }, T.handleRedirect = function (e) {
        var t = !1, n = new URLSearchParams(window.location.search), r = n.get("provider") || "",
            i = n.get("state") || "";
        if (r) {
            var o = new URLSearchParams("?" + e.slice(1)), a = o.get("id_token") || "", s = o.get("access_token") || "";
            if (a || s) {
                var l = getBaseSuffix() + "/#/oauth/" + r + "/" + encodeURIComponent(a) + "/" + encodeURIComponent(s);
                t = !0, window.location.replace(l)
            }
        } else i && (t = !0, window.location.replace(getBaseSuffix() + "/"));
        return t
    }, T.start = function () {
        f.path("/loading"), y.ready(function () {
            try {
                try {
                    document.addEventListener("deviceready", function () {
                    }, !1)
                } catch (e) {
                }
                setTimeout(function () {
                    var e = angular.element(document.body).scope();
                    e.cloudParam = A.cloudParam, m.setScope(e), v.setScope(e), e.started = !0, setTimeout(function () {
                        T.postInitialize(e)
                    }, 700)
                }, native ? 1e3 : 0), putTest("setTimeout called")
            } catch (e) {
                putTest("in catch"), putTest(e)
            }
        })
    }, T
}]), app.factory("jsParser", ["khttp", "cache", function (u, e) {
    var h, r, i, t = {}, n = [];
    return t.clearCache = function () {
        n = []
    }, t.inject = function (a, e) {
        var s = [];

        function l(e) {
            for (var t = 0; t < n.length; t++) if (n[t].url == e) return n.push(n[t]), n[t]
        }

        function c(e) {
            5 < n.length && n.shift(), n.push(e)
        }

        function d() {
            for (var e = 0; e < s.length; e++) {
                var t;
                if (s[e]) 0 <= s[e].indexOf("window.location.href") && (t = /window\.location\.href[\s]*?=(.*?)[;\n]/g, s[e] = s[e].replace(t, "try { kbOpenChapterURL($1); } catch(er){};")), 0 <= s[e].indexOf("event.stopPropagation()") && (t = /event\.stopPropagation\(\)/g, s[e] = s[e].replace(t, "void(0)")), 0 <= s[e].indexOf("<![CDATA[") && (t = /<!\[CDATA\[/g, s[e] = s[e].replace(t, "//<![CDATA["), t = /\]\]>/g, s[e] = s[e].replace(t, "//]]>"))
            }
        }

        (function e(t, n) {
            if (!t) return void o();
            if ("code" == t.mode) s.push(t.val), o(); else {
                var r = l(t.val);

                function i(e) {
                    e && s.push(e), o()
                }

                r ? i(r.val) : u.get(cacheBust(t.val)).success(function (e) {
                    c({url: t.val, val: e}), i(e)
                }).error(function () {
                    i()
                })
            }

            function o() {
                ++h < a.length ? e(a[h], n) : (d(), n && n(s))
            }
        })(a[h = 0], e)
    }, t.getScript = function () {
        return r
    }, t.replaceScript = function (e) {
        if (r = e, i && i.length) for (var t = 0; t < i.length; t++) i[t].parentNode && i[t].parentNode.removeChild(i[t]);
        i = [];
        for (t = 0; t < e.length; t++) {
            var n = document.createElement("script");
            n.setAttribute("kotobee", ""), n.setAttribute("type", "text/javascript"), n.innerHTML = e[t], i.push(n);
            try {
                document.head.appendChild(n)
            } catch (e) {
            }
            try {
                try {
                    document.dispatchEvent(new Event("DOMContentLoaded"))
                } catch (e) {
                }
            } catch (e) {
            }
        }
    }, t
}]), app.factory("khttp", ["$http", function (i) {
    var e = {};
    return e.get = function (e) {
        return i.get(cleanURL(e))
    }, e.post = function (e, t, n, r) {
        return i.post(cleanURL(e), t, n, r)
    }, e
}]), app.factory("library", ["stg", "translit", "cache", "$rootScope", "backend", "crdv", function (i, e, t, n, o, a) {
    var s, l = {}, r = [];

    function c(e) {
        e = e || {}, l.maxResults = e.large ? 40 : 20
    }

    function d() {
        for (var e = 0; e < r.length; e++) r[e].apply(this, arguments)
    }

    return l.sortMethod = {}, l.root = "", l.initialize = function () {
        l.setBrowserTitle(), c(), r = [], d("initialized")
    }, l.setMax = function (e) {
        l.maxResults = e
    }, l.setBrowserTitle = function () {
        t.setOb("title", replaceHTML(t.getOb("title"), i.data.currentLibrary.name ? i.data.currentLibrary.name : e.get("library")))
    }, l.addListener = function (e) {
        r.push(e)
    }, l.getEbooks = function (n, r) {
        n = n || {}, s = Math.round(1e5 * Math.random()), d("preload", n), n.accumulated || addClass(document.getElementById("libraryThumbs"), "dim");
        n.more ? function (e) {
            e = e || {}, l.maxResults += e.large ? 20 : 6
        }(n.contentkey ? {large: !0} : {}) : c(n.contentkey ? {large: !0} : {}), n.sort = l.sortMethod.data, n.sortDir = l.sortMethod.dir, n.max = l.maxResults, o.getEbooks(n, s, function (e, t) {
            t == s && (removeClass(document.getElementById("libraryThumbs"), "dim"), e.error || (a.applyExistingBooks(e), function (e) {
                try {
                    n.favs ? i.data.favorites = e : i.data.currentLibrary.books = e
                } catch (e) {
                }
            }(e)), e && e.length || (e.empty = !0), d("postload", n, e), r && r(e))
        })
    }, l
}]), app.factory("login", ["$rootScope", "$location", "$injector", "error", "modals", "backend", "stg", "sso", function (e, n, r, i, o, a, s, l) {
    var t = {};

    function c(e, t, n, r) {
        e && t && (n || r) && (s.data.user = {email: t, loggedIn: !0}, a.login({
            accessToken: n,
            idToken: r,
            ssoProvider: e
        }).then(function (e) {
            s.data.sso.ssoBusy = !1, e.error ? i.update({error: "s_authError" == e.error ? "accessDenied" : e.error}) : d(!0)
        }).catch(function (e) {
        }))
    }

    function d(e) {
        function t(e) {
            !s.data.user.email && s.data.sso.oauth ? n.path("/login") : (o.hide(), e && e.error ? n.path("/login") : r.get("auth").startup())
        }

        a.cloudParam("public") || a.cloudParam("entry") ? r.get("auth").startup() : e ? t() : a.login().then(t)
    }

    return e.$on("SignIn", function (e, t) {
        l.signInBrowser(t, c)
    }), t.init = function () {
    }, t.start = function () {
        config.kotobee && config.kotobee.sso ? l.initialize(function () {
            if (!s.data.user.email && s.data.sso && s.data.sso.oauth) {
                var e = s.data.sso.oauth.provider;
                l.getSSOEmail(e, function (e) {
                    d()
                })
            } else d()
        }) : d()
    }, t.logout = function () {
        config.kotobee && config.kotobee.sso && s.data.sso.oauth && l.signOutBrowser(s.data.sso.oauth.provider), s.data.user.rememberMe = !1
    }, t
}]), app.factory("markers", ["$rootScope", "error", "cache", "stg", "$location", "$injector", "$ionicScrollDelegate", function (e, t, k, x, n, C, r) {
    var i = {}, o = new Array, a = {};
    return i.addMarker = function (e) {
        o.push(e), i.refreshMarker(e)
    }, i.deleteMarker = function (e) {
        for (var t = 0; t < o.length; t++) o[t].id == e && o.splice(t, 1)
    }, i.windowResize = function () {
        (function () {
            if (n.path() && 0 <= n.path().indexOf("/reader")) return !1;
            return !0
        })() || a.width == window.innerWidth && a.height == window.innerHeight || (i.refreshMarkers(), a.width = window.innerWidth, a.height = window.innerHeight)
    }, i.refreshMarkers = function () {
        for (var e = 0; e < o.length; e++) i.refreshMarker(o[e])
    }, i.refreshMarkerById = function (e) {
        for (var t = 0; t < o.length; t++) if (o[t].id == e) return void i.refreshMarker(o[t])
    }, i.getMarker = function (e) {
        for (var t = 0; t < o.length; t++) if (o[t].id == e) return o[t]
    }, i.refreshMarker = function (e) {
        var t = e.target();
        if (t && e.elem) {
            var n = "", r = "page";
            (hasClass(e.elem, "contentSideNoteMarker") || hasClass(e.elem, "contentBookMarker")) && (r = "side");
            var i = k.getOb("epubContainer").getElementsByClassName("scroll")[0], o = k.getOb("epubContent");
            if (i) {
                var a, s, l = t.getBoundingClientRect(), c = i.getBoundingClientRect(), d = o.getBoundingClientRect(),
                    u = getElemPadding(k.getOb("epubContainer")), h = 1;
                a = i.scrollTop, s = i.scrollLeft;
                var f = C.get("nav");
                x.data.book.chapter.viewport && (h = f.getFxlScale());
                var p, g, m, v = (l.top + a - (c.top + 0)) / h;
                if ("side" == r) {
                    p = 0;
                    var b = Number(u.left) + (d.left - c.left + s), y = c.right - d.right + s;
                    (m = x.data.book.chapter.viewport ? b : b < y ? b : y) < 30 && (m = 30), x.data.settings.rtl && (g = 0, p = null), p -= b
                } else {
                    if (0 == e.elem.offsetWidth) return;
                    p = (l.left + s - c.left) / h
                }
                null != v && (n += "top: " + (v + e.offsetTop) + "px; "), null != p && (n += "left: " + (p + e.offsetLeft) + "px; "), null != g && (n += "right: " + (g - e.offsetLeft) + "px; "), null != m && (n += "width: " + m + "px; ");
                var w = 1 / h;
                "" != (n += "transform:translateZ(0) scale(" + w + ");-webkit-transform:translateZ(0) scale(" + w + ");-moz-transform:translateZ(0) scale(" + w + ");") && (e.elem.style.cssText = n), e.callback && e.callback()
            }
        }
    }, i.checkMarkerExistsAtSameLocation = function (i, o) {
        x.getNotes(function (e) {
            for (var t = 0; t < e.length; t++) {
                var n = e[t];
                if ("page" == n.type) {
                    var r = document.getElementById("note" + n.nid);
                    if (r && r != i && r.style.top == i.style.top) return o(!0)
                }
            }
            x.getBookmarks(function (e) {
                for (var t = 0; t < e.length; t++) {
                    var n = e[t], r = document.getElementById("bookmark" + n.bmid);
                    if (r && (r != i && r.style.top == i.style.top)) return o(!0)
                }
                o()
            })
        })
    }, i.show = function () {
        for (var e = 0; e < o.length; e++) o[e].elem.style.visibility = "shown"
    }, i.hide = function () {
        for (var e = 0; e < o.length; e++) o[e].elem.style.visibility = "hidden"
    }, window.addEventListener("resize", i.windowResize, !0), i
}]), app.factory("media", ["$ionicModal", "tinCan", "$rootScope", "modals", function (e, t, n, r) {
    var i = {};
    return i.show = function (e) {
        "image" == e.type ? (t.send({
            verb: "viewed image",
            activity: e.title ? e.title : e.thumbnail
        }), r.show({
            mode: "image",
            dynamic: !0,
            animation: "slide-in-up",
            image: e,
            large: e.large
        })) : "video" == e.type ? (t.send({
            verb: "viewed video",
            activity: e.title ? e.title : e.thumbnail
        }), r.show({
            mode: "video",
            animation: "slide-in-up",
            video: e,
            large: e.large
        }, null, pauseVideoAndAudio)) : "audio" == e.type && (t.send({
            verb: "listened to audio",
            activity: e.title ? e.title : e.thumbnail
        }), r.show({mode: "audio", animation: "slide-in-up", audio: e, large: e.large}, null, pauseVideoAndAudio))
    }, i.hide = function () {
        r.hide()
    }, i
}]), app.factory("modals", ["$ionicModal", "$q", "$injector", "$ionicPlatform", "$rootScope", function (n, r, i, e, t) {
    var o, a, s, l, c = {}, d = [], u = {animation: "zoom-in", focusFirstInput: !1, backdropClickToClose: !1};
    c.setScope = function (e) {
        (a = e).hideModal = c.hide, o || h(), a.$on("modal.shown", function (e) {
            s && s._cb && s._cb(e.target || e)
        }), a.$on("modal.hidden", function (e) {
            l && clearTimeout(l), s && s._closeCb && s._closeCb(event.target), setTimeout(function () {
                d.shift(), f(), function () {
                    for (var e = document.getElementsByClassName("modal-backdrop"), t = e.length; t--;) hasClass(e[t], "hide") && e[t].parentNode.removeChild(e[t])
                }()
            }, 500)
        })
    };
    var h = function () {
        var t = r.defer(), e = clone(u);
        return e.scope = a, n.fromTemplateUrl(kTemplate("modals/modals.html"), e).then(function (e) {
            o = e, t.resolve()
        }), t.promise
    };

    function f() {
        if (s = null, d.length) {
            var e = d[0];
            if (e) {
                if ((s = e).hidden) return d.shift(), void (1 < d.length && f());
                u.backdropClickToClose = !!e.backdropClickToClose && e.backdropClickToClose, u.animation = e.animation ? e.animation : "zoom-in", e.large ? addClass(document.body, "largeModal") : removeClass(document.body, "largeModal"), h().then(function () {
                    a.modal = e, o && (o.show(), a.$$phase || a.$apply(), s && s.timeLimit && (l = setTimeout(function () {
                        var e = s;
                        c.hide(s);
                        var t = {
                            wait: function () {
                                c.hide(), c.show(e)
                            }
                        };
                        c.show({mode: "waitTimeout", timeoutOptions: t})
                    }, s.timeLimit)), setTimeout(function () {
                        e.cb && e.cb(o)
                    }, 750))
                })
            }
        }
    }

    return c.show = function (e, t, n) {
        if (o) return t && (e._cb = t), n && (e._closeCb = n), d.push(e), 1 == d.length && f(), e;
        h().then(function () {
            c.show(e)
        })
    }, c.obShown = function (e) {
        return s == e
    }, c.shown = function () {
        return !!o && o.isShown()
    }, c.hide = function (e, t) {
        o && (e ? s == e ? (o.hide(), native && i.get("crdv").hideKeyboard()) : e.hidden = !0 : (o.hide(), native && i.get("crdv").hideKeyboard()), t && t())
    }, c
}]), app.factory("nav", ["cache", "crdv", "$ionicGesture", "$location", "$compile", "$rootScope", "$ionicSideMenuDelegate", "selection", "markers", "settings", "$timeout", "chapters", "$ionicScrollDelegate", "stg", function (S, t, n, e, o, a, r, s, l, c, i, d, u, A) {
    var h, f, p, g, L = {}, m = 15, v = 0, b = {}, y = [];

    function w(e, t) {
        for (var n = 0; n < y.length; n++) y[n].event == e && y[n].func(t)
    }

    function k(e) {
        if ("newChapter" == e) {
            var t = S.getOb("epubContainer"),
                n = (S.getOb("epubContent"), (f = u.$getByHandle("content")).getScrollView().options);
            if (n.scrollbarFadeDelay = 0, n.scrollingY = !0, n.minZoom = .2, n.maxZoom = 3.5, n.zooming = !0, A.data.book.chapter.viewport) {
                n.deceleration = .85, n.scrollingX = !0, n.scrollbarY = !1, f.scrollTo(0, 0, !1);
                try {
                    L.getFxlFit(null, "from setChapterLayout").bestFit
                } catch (e) {
                }
                L.fxlZoomFit({noAnim: !0, immediateScrollRefresh: !0})
            } else t.style.marginLeft = null, t.style.paddingLeft = null, t.style.paddingTop = null, f.scrollTo(0, 0, !1), n.zooming && f.zoomTo(1, !1, 0, 0), n.deceleration = .95, n.scrollbarY = !0, mobile || (n.scrollingY = !1), setTimeout(function () {
                config.textSizeControls || (n.zooming = !1), n.scrollingX = !1, config.textSizeControls || (n.zooming = !1)
            }, 500);
            setTimeout(l.refreshMarkers, 1e3);
            var r = t.getElementsByClassName("scroll");
            r.length && (removeClass(r[0], "afterDelay"), setTimeout(function () {
                addClass(r[0], "afterDelay")
            }, 2e3))
        }
    }

    function x() {
        if (!config.hideTOCAtWidescreen) {
            var e = 1300 <= b.width;
            a.widescreen != e && (w("widescreenChanged"), a.widescreen = e), e ? (addClass(document.body, "widescreen"), r.toggleLeft(!1), r.toggleRight(!1)) : removeClass(document.body, "widescreen"), a.$$phase || a.$apply()
        }
    }

    function C(e) {
        var t = S.getOb("epubContainer");
        "margin" == e ? (t.style.paddingLeft && (t.style.setProperty("margin-left", t.style.paddingLeft, "important"), t.style.paddingLeft = null), t.style.paddingTop && (t.style.setProperty("margin-top", t.style.paddingTop, "important"), t.style.paddingTop = null)) : (t.style.marginLeft && (t.style.setProperty("padding-left", t.style.marginLeft, "important"), t.style.marginLeft = null), t.style.marginTop && (t.style.setProperty("padding-top", t.style.marginTop, "important"), t.style.marginTop = null))
    }

    function N(e) {
        e = e || L.getFxlScale();
        var t = L.getFxlFit(null, "from fxlRefreshHorizontalVerticalScrolling"), n = f.getScrollView().options;
        e * t.widthFit <= t.widthFit ? n.scrollingX = !1 : n.scrollingX = !0, e * t.widthFit <= t.heightFit ? n.scrollingY = !1 : n.scrollingY = !0
    }

    function I(e) {
        if (!L.options.swipeDisabled && !(m < v || mobile && function () {
            var e = document.getElementById("readerBody").style.transform || document.getElementById("readerBody").style.webkitTransform;
            if (e && "translate3d(0px, 0px, 0px)" != e && "translate3d(0px, 0, 0)" != e) return !0
        }())) {
            var t = A.data.book.chapter.viewport ? 1 : .8, n = A.data.book.chapter.viewport ? 100 : 70;
            if (!(Math.abs(e.gesture.velocityX) < t || Math.abs(e.gesture.distance) < n || 1 < e.gesture.touches.length)) return !0
        }
    }

    function E() {
        return !(e.path() && 0 <= e.path().indexOf("/reader"))
    }

    function T() {
        if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullscreenElement || document.msFullscreenElement) return document.exitFullscreen ? document.exitFullscreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.mozExitFullscreen ? document.mozExitFullscreen() : document.msExitFullscreen && document.msExitFullscreen(), !0
    }

    return L.options = {}, L.init = function (e) {
        mobile && (n.on("swipeleft", L.swipeLeft, e), n.on("swiperight", L.swipeRight, e)), n.on("dragstart", L.dragStart, e), n.on("drag", L.drag, e), n.on("tap", L.tap, e), n.on("doubletap", L.fxlToggleTapZoom, e), n.on("transformstart", L.transformstart, e), n.on("transformend", L.transformend, e), h || (window.addEventListener("resize", L.windowResize, !0), b.width = window.innerWidth, b.height = window.innerHeight, mobile || x(), d.addListener(k), h = !0, L.addListener("widescreenChanged", function () {
            setTimeout(L.fxlZoomFit, 400)
        }), document.body.addEventListener("keyup", function (e) {
            27 == e.keyCode && T()
        }))
    }, L.resetEpubContainer = function (e) {
        var t = document.getElementsByClassName("perspectiveContainer")[0], n = S.getOb("epubContainer");
        angular.element(n).scope().$destroy(), n.parentNode.removeChild(n);
        var r = '<ion-content id="epubContainer" ng-controller="ContentCtrl" class="ebook-content has-header has-footer" ng-init="init()"                             has-header="true" has-footer="true" delegate-handle="content" padding="true"                             scroll="true" direction="xy" zooming="true" overflow-scroll="' + !e + '" tabIndex="0" has-bouncing="true"                     on-touch="mouseDown()" on-release="mouseUp()" on-scroll="scroll()" mouse-events ';
        mobile && (r += 'has-bouncing="true" header-shrink="reader"');
        var i = o(r += '><div id="epubInner"></div>            </ion-content>')(a);
        t.insertBefore(i[0], t.firstChild), S.setOb("epubContainer", document.getElementById("epubContainer"))
    }, L.addListener = function (e, t) {
        y.push({event: e, func: t})
    }, L.windowResize = function () {
        E() || b.width == window.innerWidth && b.height == window.innerHeight || (L.fxlZoomFit(), b.width = window.innerWidth, b.height = window.innerHeight, mobile || x(), d.regenerateSpreads({resize: !0}))
    }, L.getScroller = function () {
        return f
    }, L.transformstart = function () {
        L.transforming = !0, A.data.book.chapter.viewport && (function (e) {
            if (!e) {
                var t = S.getOb("epubContainer");
                (e = t.getElementsByClassName("scroll")).length && (e = e[0])
            }
            e && deleteTransformOrigin(e)
        }(), p = (new Date).getTime(), g = L.getFxlScale(), C("margin"))
    }, L.transformend = function () {
        if (L.transforming = !1, !E()) if (A.data.book.chapter.viewport) {
            var e = (new Date).getTime(), t = L.getFxlScale();
            if (mobile && t < g && e - p < 800) return void L.fxlZoomFit();
            var n = L.getFxlFit(null, "from transformend").bestFit;
            t < n ? (u.$getByHandle("content").zoomTo(n, !0), t = n) : 3 < t && (u.$getByHandle("content").zoomTo(3, !0), t = n), N(3, "transformend"), setTimeout(l.refreshMarkers, 1e3), L.repaint()
        } else {
            if (!config.textSizeControls) return;
            var r = f.getScrollPosition().zoom, i = c.getTextSize(), o = Math.round(r * i * 10) / 10;
            o < .2 && (o = .2), A.data.settings.textSize = o + "em", c.updateTextSize(), c.writeTextSize(), f.zoomTo(1, !0);
            var a = angular.element(S.getOb("epubContent")).scope();
            a.header.mode = "textSize", a.$$phase || a.$apply(), setTimeout(l.refreshMarkers, 1e3)
        }
    }, L.repaint = function () {
        redrawForChrome(S.getOb("epubContent"))
    }, L.resize = function () {
        f.resize()
    }, L.swipeRight = function (e) {
        E() || I(e) && (f.resize(), native && t.vibrate(), A.data.settings.rtl ? d.nextChapter() : d.prevChapter())
    }, L.swipeLeft = function (e) {
        E() || I(e) && (f.resize(), native && t.vibrate(), A.data.settings.rtl ? d.prevChapter() : d.nextChapter())
    }, L.dragStart = function () {
        E() || (A.data.book.chapter.viewport || f.zoomTo(1, !1), v = 0, f.freezeScroll(!1))
    }, L.drag = function (e) {
        v++
    }, L.tap = function (e) {
        w("tap", e)
    }, L.fxlToggleTapZoom = function (e) {
        try {
            if (!e.gesture.srcEvent.isTrusted) return
        } catch (e) {
        }
        if (!L.options.doubletapDisabled && S.getOb("epubContent") && A.data.book.chapter.viewport && A.data.book.chapter.viewport.width) {
            var t = L.getFxlScale(), n = L.getFxlFit(null, "from fxlToggleTapZoom").bestFit,
                r = f.getScrollView().options.minZoom;
            if (null == r && (r = t - 1), Math.round(100 * t) != Math.round(100 * n) && r < t) L.fxlZoomFit(e); else {
                var i = 2 * L.getFxlFit(null, "from fxlToggleTapZoom").bestFit,
                    o = L.getFxlFit(null, "from fxlToggleTapZoom");
                u.$getByHandle("content").zoomTo(i, !0, e.gesture.center.pageX - o.marginLeft, e.gesture.center.pageY - o.marginTop), s.reset(), C("margin"), N(i)
            }
            setTimeout(l.refreshMarkers, 1e3), setTimeout(L.repaint, 1e3)
        }
    }, L.fxlZoomIn = function (e) {
        s.reset();
        var t = 1.2 * L.getFxlScale(), n = L.getFxlFit(null, "from fxlZoomIn");
        n.bestFit;
        3 < t && (t = 3), u.$getByHandle("content").zoomTo(t, !0), C("margin");
        S.getOb("epubContent"), document.getElementById("readerBody");
        N(t), setTimeout(l.refreshMarkers, 1e3)
    }, L.fxlZoomOut = function (e) {
        s.reset();
        var t = .8 * L.getFxlScale(), n = L.getFxlFit(null, "from fxlZoomOut").bestFit;
        t < n && (t = n), u.$getByHandle("content").zoomTo(t, !0), C("margin"), N(t), setTimeout(l.refreshMarkers, 1e3)
    }, L.fxlZoomFit = function (e) {
        if (e = e || {}, S.getOb("epubContent") && A.data.book && A.data.book.chapter.viewport && A.data.book.chapter.viewport.width) {
            s.reset();
            var t = L.getFxlFit(null, "from fxlZoomFit"), n = e.noAnim;
            f.zoomTo(t.bestFit, !n), L.fxlAdjustAlignment(), C("padding"), N(t.bestFit), setTimeout(l.refreshMarkers, 1e3)
        }
    }, L.fxlAdjustAlignment = function (e) {
        (e = e || {}).epubContent || (e.epubContent = S.getOb("epubContent")), e.epubContainer || (e.epubContainer = S.getOb("epubContainer"));
        var t = L.getFxlFit(e, "from fxlAdjustAlignment"), n = getElemMargin(e.epubContent, {computed: !0});
        "auto" == n.left && (n.left = 0), "auto" == n.top && (n.top = 0), autoprefixTransform(e.epubContent, "scale(" + t.widthFit + ")"), autoprefixTransformOrigin(e.epubContent, -n.left + "px " + -n.top + "px"), e.epubContainer.style.marginLeft = e.epubContainer.style.marginRight = null, e.epubContainer.style.paddingLeft = e.epubContainer.style.paddingRight = null, e.epubContainer.style.setProperty("padding-left", t.marginLeft + "px", "important"), e.epubContainer.style.setProperty("padding-top", t.marginTop + "px", "important");
        e.epubContainer.getElementsByClassName("scroll")[0];
        e.epubContainer.style.width = Math.min(t.innerWidth, t.outerWidth) + "px"
    }, L.getSpreadHeight = function (e) {
        for (var t = 0, n = 0; n < e.children.length; n++) {
            var r = e.children[n];
            r.id && 0 == r.id.indexOf("spread") && (t = Math.max(t, Number(r.style.height.split("px")[0])))
        }
        return t
    }, L.getSpreadWidth = function (e) {
        for (var t = 0, n = 0; n < e.children.length; n++) {
            var r = e.children[n];
            r.id && 0 == r.id.indexOf("spread") && (t += Number(r.style.width.split("px")[0]))
        }
        return t
    }, L.viewFromElem = function (e) {
        for (var t = {maxHeight: 0, totalWidth: 0}, n = 0; n < e.children.length; n++) {
            var r = e.children[n];
            if (r.id && 0 == r.id.indexOf("spread")) {
                var i = Number(r.style.height.split("px")[0]), o = Number(r.style.width.split("px")[0]),
                    a = {width: o, height: i};
                "spreadL" == r.id ? (t.leftOb || (t.leftOb = {}), t.leftOb.viewport = a, t.leftOb.layout = hasClass(r, "fxl") ? "fxl" : "rfl", t.layout = t.leftOb.layout) : "spreadR" == r.id && (t.view = "double", t.rightOb || (t.rightOb = {}), t.rightOb.left = Number(r.style.left.split("px")[0]), t.rightOb.viewport = a, t.rightOb.layout = hasClass(r, "fxl") ? "fxl" : "rfl"), t.maxHeight = Math.max(i, t.maxHeight), t.totalWidth += o
            }
        }
        return t.leftOb && t.rightOb && t.rightOb.left && (t.totalWidth += t.rightOb.left - t.leftOb.viewport.width), t
    }, L.getFxlFit = function (e, t) {
        (e = e || {}).viewport || (e.viewport = A.data.book.chapter.viewport);
        var n = {};
        e.epubContent || (e.epubContent = S.getOb("epubContent"));
        var r = e.view;
        r = r || A.data.currentView;
        var i = {x: 0};
        e.epubContainer || (e.epubContainer = S.getOb("epubContainer"));
        var o = e.epubContainer.getElementsByClassName("scroll");
        o.length && (i = getElemPadding(o[0], {computed: !0}), n.scrollContainer = o[0]), "auto" == i.x && (i.x = 0), "auto" == i.y && (i.y = 0);
        var a = getElemMargin(e.epubContent, {computed: !0}), s = getElemPadding(e.epubContent, {computed: !0}),
            l = a.x, c = a.y;
        "auto" == l && (l = 0), "auto" == c && (c = 0);
        var d = s.x, u = s.y;
        "auto" == d && (d = 0), "auto" == u && (u = 0);
        var h = e.viewport.width + l, f = e.viewport.height + c;
        if ("double" == r) {
            var p = L.viewFromElem(e.epubContent);
            h = p.totalWidth, f = p.maxHeight
        }
        var g = document.getElementById("readerBody"), m = document.getElementById("readerHeader"),
            v = document.getElementById("tabMenu"), b = g.getBoundingClientRect().width,
            y = g.getBoundingClientRect().height;
        mobile && "alwaysShow" != config.autohideReaderMode && "showOnScroll" != config.autohideReaderMode || (y -= m.getBoundingClientRect().height + v.getBoundingClientRect().height), e.includeScrollPadding || (b -= i.x, y -= i.y);
        var w = b / h, k = y / f;
        if (n.readerWidth = b, n.readerHeight = y, n.widthFit = w, n.heightFit = k, config.fitToScreen) n.bestFit = k < w ? k : w, n.bestFitType = k < w ? "vertical" : "horizontal"; else {
            var x = w;
            1 <= x && (x = 1);
            var C = k / x;
            n.bestFitType = "vertical", C < 1 && .7 <= C && (x = k, n.bestFitType = "vertical"), n.bestFit = x
        }
        return n.bestFit = n.bestFit / n.widthFit, n.innerWidth = h, n.innerHeight = f, n.outerWidth = b, n.outerHeight = y, n.marginLeft = Math.round((n.outerWidth - n.widthFit * n.bestFit * n.innerWidth) / 2), n.marginTop = Math.round((n.outerHeight - n.widthFit * n.bestFit * n.innerHeight) / 2), n.marginTop < 0 && (n.marginTop = 0), n
    }, L.getFxlScale = function () {
        return u.$getByHandle("content").getScrollPosition().zoom
    }, L.fullscreen = function () {
        var e = document.body;
        T() || (e.requestFullscreen ? e.requestFullscreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.msRequestFullscreen && e.msRequestFullscreen())
    }, L
}]), app.factory("np", ["stg", "status", "error", "translit", "$rootScope", "crdv", "modals", "$http", "$ionicSideMenuDelegate", function (a, e, t, n, r, s, i, o, l) {
    var c, d, u, h, f, p, g, m, v, b = {}, y = kLog;
    return b.initialize = function (e) {
        if (desktop) {
            try {
                u = require("nw.gui"), require("child_process").exec, h = u.Window.get(), process.cwd(), (process.env.HOME || process.env.USERPROFILE) + "/Desktop", f = require("path").dirname(process.execPath), v = f + "/node_modules/", "mac" == os && (v = ""), isReaderApp && (v = ""), debug || (v = ""), c = require(v + "fs.extra"), require(v + "async"), d = require(v + "buckle"), p = u.App.dataPath, g = p + "/temp", m = p + "/Books", b.createIfNotExists(m), b.createIfNotExists(g);
                try {
                    h.removeAllListeners()
                } catch (e) {
                    y("ERROR " + e, 1)
                }
                h.on("close", function () {
                    b.exit()
                })
            } catch (e) {
            }
            e && e()
        } else e && e()
    }, b.createIfNotExists = function (t, n) {
        desktop && c.exists(t, function (e) {
            e ? n && n() : b.createIfNotExists(ph.parent(t), function () {
                c.mkdirSync(t), n && n()
            })
        })
    }, b.createIfNoParentsExists = function (t, n) {
        desktop && c.exists(t, function (e) {
            e ? n && n() : b.createIfNoParentsExists(ph.parent(t), function () {
                c.mkdirSync(t), n && n()
            })
        })
    }, b.writeEbook = function (e, i, t, o) {
        desktop && b.createTempDir(function (n) {
            var r = new FileReader;
            r.onload = function () {
                var e = ph.join(n, "book.zip");
                "mac" == os && (e = n + "/book.zip"), c.writeFileSync(e, Buffer.from(new Uint8Array(r.result)));
                var t = ph.join(m, i.path);
                "mac" == os && (t = m + "/" + i.path), b.extractZip(e, t, function () {
                    i.exists = !0, a.data.downloaded.push(i), s.applyExistingBooks(a.data.currentLibrary.books), a.writeSlot("downloaded" + a.getBookId(!0), a.data.downloaded, function () {
                        b.removeDirectory(n, function () {
                            o && o()
                        })
                    })
                })
            }, r.readAsArrayBuffer(t)
        })
    }, b.deleteEbook = function (t, n) {
        b.removeDirectory(ph.join(m, t.path), function () {
            for (var e = 0; e < a.data.downloaded.length; e++) a.data.downloaded[e].path == t.path && (t.exists = !1, a.data.downloaded.splice(e, 1), e--);
            a.writeSlot("downloaded" + a.getBookId(!0), a.data.downloaded, function () {
                n && n()
            })
        })
    }, b.fileExists = function (e, t) {
        c.exists(e, function (e) {
            t(e)
        })
    }, b.removeFile = function (e, t) {
        b.removeDirectory(e, t)
    }, b.removeDirectory = function (e, t) {
        c.rmrf(e, function (e) {
            t && t(e)
        })
    }, b.extractZip = function (e, t, n) {
        d.open(e, t, function () {
            c.readdir(t, n)
        })
    }, b.readFile = function (e) {
        return c.readFileSync(e) + ""
    }, b.writeFile = function (e, t, n) {
        c.writeFileSync(e, t, n)
    }, b.createTempDir = function (t) {
        var n = g + "/f" + randStr(5);
        b.fileExists(n, function (e) {
            e ? b.createTempDir(t) : c.mkdir(n, function () {
                t(n)
            })
        })
    }, b.openLink = function (e) {
        u.Shell.openExternal(e)
    }, b.getBooksPath = function () {
        return m + "/"
    }, b.writeArrayBuffer = function (e, t, n, r) {
        var i = arrayBufferToBuffer(e);
        c.open(t, "w", function (e, t) {
            if (e) throw"error opening file: " + e;
            c.write(t, i, 0, i.length, null, function (e) {
                e ? r && r(!1) : c.close(t, function () {
                    r && r(!0)
                })
            })
        })
    }, b.copy = function (n, e, t, r) {
        if ((t = t || {}).replace) for (var i = 0; i < t.replace.length; i++) n = n.replace(t.replace[i].key, t.replace[i].val);
        t.header && (n = t.header + n), t.footer && (n += t.footer), t.encoding || (t.encoding = "ascii"), n = (n += "").replace(/\xA0/g, " "), n = utf8Encode(n), c.writeFile(e, n, t.encoding, function (e, t) {
            r && r(n)
        })
    }, b.exit = function () {
        a.getActions(function (e) {
            if (e && e.length) {
                i.hide();
                var t = {title: "confirmation", msg: "annotationsSyncExitWarning", barStyle: "bar-dark"}, n = {
                    label: "delete", style: "button-assertive", func: function () {
                        u.App.quit()
                    }
                }, r = {
                    label: "cancel", func: function () {
                        i.hide()
                    }
                };
                t.btns = [n, r], i.show({mode: "confirm", confirmOptions: t})
            } else u.App.quit()
        })
    }, b
}]), app.factory("popovers", ["$ionicPopover", "$q", "$rootScope", function (e, n, r) {
    var i, o, t = {}, a = [];
    t.setScope = function (e) {
        o = e, i || s()
    };
    var s = function () {
        var t = n.defer();
        return o = o || r, e.fromTemplateUrl(kTemplate("modals/popovers.html"), {scope: o}).then(function (e) {
            i = e, t.resolve()
        }), t.promise
    };

    function l() {
        if (0 != a.length) {
            var e = a.shift();
            e.apply ? o.$apply(function () {
                o.popover = e
            }) : o.popover = e, i && (i.isShown() || i.show(e.event))
        }
    }

    return t.show = function (e) {
        i ? (a.push(e), 1 == a.length && l()) : s().then(function () {
            t.show(e)
        })
    }, t.shown = function () {
        return !!i && i.isShown()
    }, t.hide = function () {
        i && (o.popover = null, i && i.hide(), l())
    }, t
}]), app.factory("scorm", ["$injector", function (o) {
    var f, p, a, g = {};

    function s() {
        a.doLMSCommit("")
    }

    function m(e, t, n) {
        var r = v(e + "." + t + "." + n);
        return r && "" != r || (r = v(e + "_" + t + "." + n)), r
    }

    function v(e) {
        return a.doLMSGetValue(e)
    }

    function b(e, t) {
        return a.doLMSSetValue(e, t)
    }

    return g.initialize = function () {
        if (!(config.v < 1.2)) {
            kInteractive.scorm = this;
            try {
                if (!scormEnabled) return
            } catch (e) {
                return
            }
            (a = o.get("scormWrapper")).doLMSInitialize(""), 1.2 == (p = a.getAPIVersion()) ? "not attempted" == v("cmi.core.lesson_status") && (b("cmi.core.lesson_status", "browsed"), s()) : "not attempted" == v("cmi.completion_status") && (b("cmi.completion_status", "unknown"), s()), f = function () {
                try {
                    var e = v("cmi.suspend_data");
                    return JSON.parse(e)
                } catch (e) {
                    return []
                }
            }();
            try {
                for (var e = 0; e < config.scorm.objectives.length; e++) {
                    for (var t = Number(v("cmi.objectives._count")), n = t = t || 0, r = config.scorm.objectives[e], i = 0; i < t; i++) m("cmi.objectives", i, "id") == r.id && (n = i);
                    b("cmi.objectives." + n + ".id", r.id), 1.2 != p && b("cmi.objectives." + n + ".description", r.name)
                }
            } catch (e) {
            }
            s()
        }
    }, g.setBookmark = function (e, t) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        b(1.2 == p ? "cmi.core.lesson_location" : "cmi.location", e), t || s()
    }, g.getBookmark = function () {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        return v(1.2 == p ? "cmi.core.lesson_location" : "cmi.location")
    }, g.setInteractions = function (e) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        for (var t = 0; t < e.length; t++) {
            for (var n = f.length, r = 0; r < f.length; r++) f[r].id == e[t].id && (n = r);
            f[n] = e[t], g.setInteraction(n, e[t], !0)
        }
        !function () {
            if (!f.length) return;
            for (var e = Number(v("cmi.objectives._count")), t = {}, n = 0; n < f.length; n++) t[f[n].qid] = f[n];
            for (n = 0; n < e; n++) {
                var r = v("cmi.objectives." + n + ".id");
                if (r) {
                    var i = 0;
                    for (var o in t) t[o].objective == r && (i += t[o].scoreMax);
                    g.setObjective({id: r, scoreMax: i}, !0), g.setObjective({id: r, scoreRaw: 0}, !0)
                }
            }
            i = 0;
            for (var o in t) i += t[o].scoreMax;
            b(1.2 == p ? "cmi.core.score.max" : "cmi.score.max", i), b(1.2 == p ? "cmi.core.score.min" : "cmi.score.min", 0), b(1.2 == p ? "cmi.core.score.raw" : "cmi.score.raw", 0);
            for (var a = 0; a < f.length; a++) {
                var s = f[a], l = null, c = null;
                for (n = 0; n < e; n++) s.objective == m("cmi.objectives", n, "id") && (l = s.objective, c = n);
                if (l) {
                    var d = Number(v("cmi.objectives." + c + ".score.raw"));
                    d = d || 0;
                    var u = {};
                    u.id = l, u.scoreRaw = s.result * s.weighting + d, u.scoreMin = 0, u.scoreScaled = u.scoreRaw / u.scoreMax, u.completionStatus = "unknown", u.successStatus = "unknown", g.setObjective(u, !0)
                }
                var h = Number(v(1.2 == p ? "cmi.core.score.raw" : "cmi.score.raw"));
                h = h || 0, b(1.2 == p ? "cmi.core.score.raw" : "cmi.score.raw", s.result * s.weighting + h)
            }
        }(), function (e) {
            try {
                b("cmi.suspend_data", JSON.stringify(e))
            } catch (e) {
            }
        }(f), s()
    }, g.setInteraction = function (e, t, n) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        t.id && b("cmi.interactions." + e + ".id", t.id), t.result && b("cmi.interactions." + e + ".result", t.result), t.correctResponses && b("cmi.interactions." + e + ".correct_responses.0.pattern", t.correctResponses), t.type && b("cmi.interactions." + e + ".type", t.type), t.weighting && b("cmi.interactions." + e + ".weighting", t.weighting), t.objective && b("cmi.interactions." + e + ".objectives.0.id", t.objective), 1.2 == p ? (t.timestamp && b("cmi.interactions." + e + ".time", function (e) {
            var t = e.getSeconds();
            t < 10 && (t = "0" + t);
            var n = e.getMinutes();
            n < 10 && (n = "0" + n);
            var r = e.getHours();
            return r < 10 && (r = "0" + r), r + ":" + n + ":" + t
        }(t.timestamp)), t.latency && b("cmi.interactions." + e + ".latency", function (e) {
            var t = Math.floor(e / 3600);
            e -= 60 * t * 60;
            var n = Math.floor(e / 60);
            return (e -= 60 * n) < 10 && (e = "0" + e), t < 10 && (t = "0" + t), n < 10 && (n = "0" + n), t + ":" + n + ":" + e
        }(t.latency)), t.learnerResponses && b("cmi.interactions." + e + ".student_response", t.learnerResponses)) : (t.timestamp && b("cmi.interactions." + e + ".timestamp", function (e) {
            var t = e.toISOString().split(".");
            return t.splice(t.length - 1, 1), t.join(".")
        }(t.timestamp)), t.latency && b("cmi.interactions." + e + ".latency", function (e) {
            var t = e, n = Math.floor(t / 31104e3);
            t = e - 31104e3 * n;
            var r = Math.floor(t / 2592e3);
            t = e - 2592e3 * r;
            var i = Math.floor(t / 86400);
            t = e - 86400 * i;
            var o = Math.floor(t / 3600);
            t = e - 3600 * o;
            var a = Math.floor(t / 60);
            return "P" + n + "Y" + r + "M" + i + "DT" + o + "H" + a + "M" + (t = e - 60 * a) + "S"
        }(t.latency)), t.learnerResponses && b("cmi.interactions." + e + ".learner_responses", t.learnerResponses), t.description && b("cmi.interactions." + e + ".description", t.description)), n || s()
    }, g.setObjective = function (e, t) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        for (var n = Number(v("cmi.objectives._count")), r = n, i = 0; i < n; i++) m("cmi.objectives", i, "id") == e.id && (r = i);
        null != e.id && b("cmi.objectives." + r + ".id", e.id), null != e.scoreRaw && b("cmi.objectives." + r + ".score.raw", e.scoreRaw), null != e.scoreMin && b("cmi.objectives." + r + ".score.min", e.scoreMin), null != e.scoreMax && b("cmi.objectives." + r + ".score.max", e.scoreMax), 1.2 == p ? null != e.successStatus && b("cmi.objectives." + r + ".status", e.successStatus) : (null != e.description && b("cmi.objectives." + r + ".description", e.description), null != e.successStatus && b("cmi.objectives." + r + ".success_status", e.successStatus), null != e.completionStatus && b("cmi.objectives." + r + ".completion_status", e.completionStatus), null != e.scoreScaled && b("cmi.objectives." + r + ".score.scaled", e.scoreScaled)), t || s()
    }, g.setManual = function (e, t) {
        b(e, t), s()
    }, g.interactionExistsOld = function (e) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        for (var t = Number(v("cmi.interactions._count")), n = 0; n < t; n++) if (m("cmi.interactions", n, "id") == e) return !0
    }, g.interactionExists = function (e) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        for (var t = 0; t < f.length; t++) if (f[t].id == e) return !0
    }, g.objectiveExists = function (e) {
        try {
            if (!scormEnabled) return
        } catch (e) {
            return
        }
        for (var t = Number(v("cmi.objectives._count")), n = 0; n < t; n++) if (m("cmi.objectives", n, "id") == e) return !0
    }, g
}]), app.factory("sdk", ["$document", "$injector", "cache", "selection", "skeleton", "chapters", "stg", "$filter", function (e, t, n, r, i, o, a, s) {
    var l = {};
    return l.initialize = function () {
    }, l
}]), app.factory("search", ["$http", "error", "book", "$rootScope", "modals", "status", "$location", "chapters", "cache", "$timeout", "$filter", "translit", "virt", "selection", "stg", function (e, t, n, l, c, d, r, u, i, o, a, h, s, f, p) {
    var g, m = {};

    function v(e, o, a, t) {
        if (e) if (0 != e.children.length) {
            for (var n = 0; n < e.children.length; n++) 0 != i(e.children[n]) && (t = !1, hasClass(e.children[n], "k-section") && s.checkIfRequiresParse(e.children[n]), v(e.children[n], o, a, !0));
            t && r(e)
        } else 0 < i(e) && r(e);

        function r(e) {
            for (var t = e, n = f.convertElemsToLocation([t], o).left, r = '<span class="searchItem">' + t.textContent + "</span>", i = (r.toLowerCase().indexOf(m.key.toLowerCase()), r.length + Math.round((70 - r.length) / 2)); t.previousSibling && !(r.length >= i);) t.previousSibling.textContent && (r = t.previousSibling.textContent + r), t = t.previousSibling;
            r.length;
            for (t = e; t.nextSibling && !(70 <= r.length);) t.nextSibling.textContent && (r += t.nextSibling.textContent), t = t.nextSibling;
            m.result[a].matches.push({chapter: a, elem: e, hint: r.trim(), location: n})
        }

        function i(e) {
            return (e.textContent.toLowerCase().match(new RegExp(m.key.toLowerCase(), "g")) || []).length
        }
    }

    function b() {
        for (var e = 0, t = m.result.length; t--;) if (m.result[t]) for (var n = m.result[t].matches.length; n--;) e++;
        return e
    }

    function y(i, o) {
        var e = p.data.epub.spine.getElementsByTagName("itemref");
        return i > e.length - 1 ? o(!1) : (i = g[i], u.getPageOb({page: i, dontParse: !0}, function (e) {
            var t = document.createElement("div"), n = parseHtml(e.raw ? e.raw : e.content),
                r = n.getElementById("epubContent");
            t.appendChild(r);
            n.getElementsByTagName("title");
            m.result[i] = [], m.result[i].title = e.title, m.result[i].matches = [], a("contentVirt")("parse", r, function (e) {
                v(e, e, i), o(!0)
            })
        }))
    }

    return m.start = function (e, t) {
        if (m.key = e.key, e.array ? m.result = e.array : m.result = new Array, "all" == e.mode) !function (t, n) {
            var r = 0;
            t.start && (r = t.start);
            g = function () {
                for (var e = [], t = p.data.epub.spine.getElementsByTagName("itemref"), n = 0; n < t.length; n++) e.push(u.getUnanchoredIndex(n));
                return e
            }();
            var i = b(), o = function (e) {
                t.limit && b() - i >= t.limit ? n({
                    results: m.result,
                    more: !0,
                    key: m.key
                }) : e ? y(++r, o) : n({results: m.result, key: m.key})
            };
            y(r, o)
        }(e, t); else if ("chapter" == e.mode) {
            var n = i.getOb("epubContent");
            m.result[currentIndex] = [], m.result[currentIndex].matches = [], v(n, n, currentIndex), t({
                results: m.result,
                key: m.key
            })
        }
    }, m.removeHighlights = function () {
        for (var e = document.getElementsByClassName("searchItemHighlight"), t = e.length; t--;) removeClass(e[t], "searchItemHighlight")
    }, m.searchItemClicked = function (e, t, n) {
        t = t || {};
        var r = e.item, i = e.index, o = e.matches;

        function a() {
            d.update(h.get("pleaseWait"), null, {dots: !0}), u.addListener(s);
            var t = r.chapter, n = r.location;
            u.getPageOb({page: t}, function (e) {
                if (m.removeHighlights(), e.pages && e.pages.length) ;
                u.redirect(t, {hash: n}), l.$$phase || l.$apply()
            })
        }

        function s(e) {
            "renderedChapter" == e && (d.update(), u.removeListener(s), o.index = i, l.renderScope.applyHeader("searchItems"), n && n())
        }

        c.hide(), t.timer ? timeOut(a, 300) : a()
    }, m
}]), app.factory("selection", ["markers", "cache", "error", "stg", "virt", "$rootScope", "$injector", "$ionicScrollDelegate", "translit", function (o, f, e, h, p, t, n, g, r) {
    var a, s, l, c, d, u, m, v, b, y, w, k, x, C, S, A, L, N, I, E, T, B = {};

    function O(e) {
        return 0 < parents(e, {stopAtIds: ["spreadL", "spreadR"], filterByClass: "ki-noHighlight"}).length
    }

    B.getLocation = function () {
        return S
    }, B.elementDown = function (e, t) {
        y = e;
        var n = !0;
        mobile || ("a" == e.nodeName.toLowerCase() && (n = !1), O(e) && (n = !1), e.parentNode && "a" == e.parentNode.nodeName.toLowerCase() && (n = !1), n && addClass(e, "highlightOver")), redrawForChrome(y.parentElement);
        var r = mobile && !mobileDebug ? 400 : 100;
        if (n || (r *= 4), k = setTimeout(B.elementHeld, r), mobile && !mobileDebug) {
            if (!t.touches || !t.touches.length) return;
            C = t.touches[0], I = C.clientX, E = C.clientY
        } else I = t.clientX, E = t.clientY, C = t;
        document.body.addEventListener(mobile && !mobileDebug ? "touchend" : "mouseup", B.elementUp), document.body.addEventListener(mobile && !mobileDebug ? "touchmove" : "mousemove", P)
    };
    var P = function (e) {
        C = mobile && !mobileDebug ? e.touches[0] : e, "activated" == A && e.stopPropagation()
    };

    function M(e, t) {
        for (t = t || e; !e.nextSibling;) if ((e = e.parentNode) == t) return;
        for (e = e.nextSibling; e.childNodes[0];) e = e.childNodes[0];
        return "#text" == e.nodeName && e.textContent.trim() ? e : M(e, t)
    }

    function _(e, t) {
        for (t = t || e; !e.previousSibling;) if ((e = e.parentNode) == t) return;
        for (e = e.previousSibling; e.childNodes.length;) e = e.childNodes[e.childNodes.length - 1];
        return "#text" == e.nodeName && e.textContent.trim() ? e : _(e, t)
    }

    function F(e) {
        return 8 == e.nodeType || "#text" == e.nodeName || "br" == e.nodeName.toLowerCase() || (0 == e.offsetWidth || void 0)
    }

    function R(e, t) {
        var n = e.split("."), r = t.split(".");
        if (e == t) return 0;
        for (var i = 0; i < n.length; i++) {
            if (Number(n[i]) > Number(r[i])) return 1;
            if (Number(n[i]) < Number(r[i])) return -1
        }
        return n.length > r.length ? 1 : -1
    }

    B.elementUp = function (e) {
        y && (mobile || removeClass(y, "highlightOver"), y = null, clearTimeout(k)), T && removeClass(f.getOb("epubContent"), "disableEvents"), T = !1, document.body.removeEventListener(mobile && !mobileDebug ? "touchend" : "mouseup", B.elementUp), document.body.removeEventListener(mobile && !mobileDebug ? "touchmove" : "mousemove", P), t.$$phase || t.$apply()
    }, B.elementHeld = function () {
        y && (n.get("nav").transforming || C && (Math.abs(C.clientX - I) > (mobile ? 30 : 10) || Math.abs(C.clientY - E) > (mobile ? 30 : 10) || O(y) || (addClass(y, "highlightSelected"), Y(y), B.elementUp())))
    }, B.getSelectedText = function (e) {
        e = e || document.getElementsByClassName("highlightSelected");
        for (var t = "", n = 0; n < e.length; n++) t += e[n].textContent;
        return t
    }, B.getElemsByLocation = function (e, t) {
        t = t || f.getOb("epubContent");
        var n = new Array;
        if (!e) return n;
        var r = e.split(",");
        if ("double" == h.data.currentView) {
            for (var i = [], o = 0; o < r.length; o++) {
                var a = r[o];
                a = "1" + a.substr(1), i.push(a)
            }
            r = r.concat(i)
        }
        for (o = 0; o < r.length; o++) if (r[o]) {
            for (var s = r[o].split("."), l = t, c = 0; c < s.length; c++) if (l) {
                1 == c && p.checkIfRequiresParseAndAnnotations(l.children[Number(s[c])]);
                var d = 0;
                l.hasAttribute("kb-offset") && (d = Number(l.getAttribute("kb-offset"))), -1 != l.parentNode.className.indexOf("kInteractive questions") && s.length - c == 2 && (l = l.children[0]);
                var u = l.children[Number(s[c]) - d];
                if (!u) break;
                l = u
            }
            l && n.push(l)
        }
        return n
    }, B.expand = function () {
        l = l.parentNode, z(), l = c = b, $(), mobile && q(), U()
    }, B.extendRight = function (e) {
        if (e || "rtl" != getComputedStyle(l).direction) {
            if (x) {
                var t = M(l, f.getOb("epubContent"));
                if (F(l = t.parentNode)) return void B.extendRight(e)
            } else {
                t = M(c, f.getOb("epubContent"));
                if (F(c = t.parentNode)) return void B.extendRight(e)
            }
            z(), $(), mobile && q(), U()
        } else B.extendLeft(!0)
    }, B.extendLeft = function (e) {
        if (e || "rtl" != getComputedStyle(l).direction) {
            if (x) {
                var t = _(l, f.getOb("epubContent"));
                if (F(c = t.parentNode)) return void B.extendLeft(e)
            } else {
                t = _(l, f.getOb("epubContent"));
                if (F(l = t.parentNode)) return void B.extendLeft(e)
            }
            z(), $(), mobile && q(), U()
        } else B.extendRight(!0)
    }, B.newChapter = function () {
        mobile && (o.deleteMarker("anchor1Marker"), o.deleteMarker("anchor2Marker"), a = B.createAnchorMarker("anchor1"), s = B.createAnchorMarker("anchor2"), addClass(a, "disable"), addClass(s, "disable"))
    }, B.getPageByLocation = function (e, t) {
        var n = e.pages;
        if (n && n.length) {
            for (var r = 0; r < n.length - 1; r++) {
                if (R(t, n[r].lastLocation) <= 0) return r
            }
            return n.length - 1
        }
    }, B.getTopCornerLocation = function () {
        var e = B.getTopCornerElement();
        return B.convertElemsToLocation([e]).left
    }, B.getTopCornerElement = function () {
        for (var e = f.getOb("epubContent"), t = f.getOb("epubContainer"), n = e.children[0], r = g.$getByHandle("content").getScrollPosition().top + 25, i = new Array, o = n.getElementsByClassName("k-section"), a = 0; a < o.length; a++) hasClass(o[a], "cNone") || i.push(o[a]);
        var s, l = document.getElementById("readerHeader").offsetHeight + 10;
        for (a = 0; a < i.length; a++) for (var c = i[a].getElementsByTagName("*"), d = 0; d < c.length; d++) if (!c[d].children.length) {
            var u = c[d].getBoundingClientRect();
            if (u.bottom > l) {
                if (u.top > l && u.top < l + 10) return c[d];
                var h = u.top - l;
                s ? h < s.distance && u.bottom < l + t.offsetHeight && (s = {
                    elem: c[d],
                    bounds: u,
                    distance: h
                }) : s = {elem: c[d], bounds: u, distance: h}
            }
        }
        if (s) return s.elem;
        for (a = 0; a < i.length; a++) if (0 < i[a].offsetTop - r) return i[a];
        return i[0]
    }, B.getIdArray = function (e) {
        for (var t = B.getTopCornerElement(), n = []; t && t != f.getOb("epubContent");) t.getAttribute && t.getAttribute("id") && n.push(t.getAttribute("id")), t = t.previousSibling ? t.previousSibling : t.parentNode;
        return n
    };

    function D(e) {
        var t = 0;
        for (e && e.parentNode && e.parentNode.hasAttribute("kb-offset") && (t = Number(e.parentNode.getAttribute("kb-offset"))); e = e.previousSibling;) "#text" != e.nodeName && 8 != e.nodeType && t++;
        return t
    }

    function H(e, t) {
        t = t || f.getOb("epubContent");
        for (var n = ""; e != t;) {
            n = D(e) + "." + n, e = e.parentNode
        }
        var r = "left";
        return "" == n ? {
            index: "",
            side: r
        } : ("1" == n[0] && (n = "0" + n.substr(1), r = "right"), {index: n.substr(0, n.length - 1), side: r})
    }

    var q = function () {
        o.refreshMarkerById("anchor1Marker"), o.refreshMarkerById("anchor2Marker")
    }, U = function () {
        return S = B.convertElemsToLocation(document.getElementsByClassName("highlightSelected"))
    };
    B.refreshSelectionLocation = U, B.convertElemsToLocation = function (e, t) {
        t = t || f.getOb("epubContent");
        for (var n = "", r = "", i = 0; i < e.length; i++) {
            var o = H(e[i], t);
            "left" == o.side ? n += (n ? "," : "") + o.index : r += (r ? "," : "") + o.index
        }
        return {left: n, right: r}
    };
    var z = function () {
        d = new Array, u = new Array;
        for (var e = f.getOb("epubContent").parentNode, t = l; d.push(t), (t = t.parentNode) != e;) ;
        for (t = c; u.push(t), (t = t.parentNode) != e;) ;
        var n = function () {
            for (i = 0; i < d.length; i++) for (j = 0; j < u.length; j++) if (u[j] == d[i]) return [u[j], i, j]
        }();
        for (b = n[0], m = n[1], v = n[2], i = 0; i < b.childNodes.length; i++) {
            if (b.childNodes[i] == d[m - 1]) {
                x = !1;
                break
            }
            if (b.childNodes[i] == u[v - 1]) {
                x = !0;
                break
            }
        }
    }, $ = function () {
        try {
            if (W(), addClass(l, "highlightSelected"), addClass(c, "highlightSelected"), l == c) return void (S = {left: H(l)});
            if (l == b) return void (S = {left: H(l)});
            if (c == b) return void (S = {left: H(c)});
            V(x ? c : l, x ? l : c)
        } catch (e) {
        }
    }, V = function (e, t, n) {
        var r;
        if ("first" == (n = n || "first")) {
            if (e.parentNode == b) return void V(e, t, "second");
            for (r = e; (r = r.nextSibling) && r;) "#text" != r.nodeName && 8 != r.nodeType && addClass(r, "highlightSelected");
            V(e.parentNode, t, "first")
        } else if ("second" == n) {
            if (t.parentNode == b) return void V(e, t, "third");
            for (r = t; (r = r.previousSibling) && r;) "#text" != r.nodeName && 8 != r.nodeType && addClass(r, "highlightSelected");
            V(e, t.parentNode, n)
        } else if ("third" == n) {
            var o, a = x ? u[v - 1] : d[m - 1], s = x ? d[m - 1] : u[v - 1];
            for (i = 0; i < b.childNodes.length; i++) if (a != b.childNodes[i]) {
                if (s == b.childNodes[i]) break;
                o && "#text" != b.childNodes[i].nodeName && 8 != b.childNodes[i].nodeType && addClass(b.childNodes[i], "highlightSelected")
            } else o = !0
        }
    }, W = function () {
        try {
            var e = document.getElementsByClassName("highlightSelected");
            if (!e) return;
            for (var t = e.length; t--;) removeClass(e[t], "highlightSelected");
            mobile && p.forceRepaint()
        } catch (e) {
        }
    };

    function G(e) {
        var t = 1;
        return h.data.book.chapter.viewport && (t = n.get("nav").getFxlScale()), e.getBoundingClientRect().width / t
    }

    B.listener = null, B.addSpanAtCloseTag = function () {
        var e = document.createElement("span"), t = x ? l : c;
        return t.parentNode.insertBefore(e, t.nextSibling), e
    }, B.getSelectedNodes = function () {
        return document.getElementsByClassName("highlightSelected")
    }, B.reset = function () {
        W(), mobile && (a && (addClass(a, "disable"), addClass(s, "disable")), s && (removeClass(a, "tween"), removeClass(s, "tween"))), x = A = null, B.listener && B.listener("deactivated")
    }, B.deleteNoteMarker = function (e) {
        var t = document.getElementById("note" + e);
        t && t.parentNode && t.parentNode.removeChild(t), o.deleteMarker("noteMarker" + e)
    }, B.getNoteMarker = function (e) {
        return o.getMarker("noteMarker" + e)
    }, B.createAnchorMarker = function (r) {
        var t = document.createElement("span");
        return t.setAttribute("id", r + "Marker"), t.setAttribute("anchor", r), addClass(t, "anchorMarker"), f.getOb("epubMeta").appendChild(t), t.addEventListener(mobileDebug ? "mousedown" : "touchstart", function (e) {
            addClass(w = t, "selected"), N = null, document.addEventListener(mobileDebug ? "mousemove" : "touchmove", K), L && clearInterval(L), L = setInterval(X, 60), document.addEventListener(mobileDebug ? "mouseup" : "touchend", J), addClass(f.getOb("epubContent"), "defaultCursor"), A = "anchorDragged", e.stopPropagation()
        }), o.addMarker({
            id: r + "Marker", elem: t, offsetTop: -45, offsetLeft: -10, target: function () {
                var e, t = 0;
                if ("anchor1" == r) {
                    if (!(e = l)) return void (this.offsetLeft = -10);
                    try {
                        n = "rtl" == getComputedStyle(e).direction
                    } catch (e) {
                    }
                    t = x ? n ? 0 : G(e) : n ? G(e) : 0
                } else {
                    if (!(e = c)) return void (this.offsetLeft = -10);
                    var n;
                    try {
                        n = "rtl" == getComputedStyle(e).direction
                    } catch (e) {
                    }
                    t = x ? n ? G(e) : 0 : n ? 0 : G(e)
                }
                return this.offsetLeft = -10 + t, e
            }
        }), t
    }, B.createNoteMarker = function (n, e, t) {
        if (t = t || {}, !document.getElementById("note" + n.nid)) {
            var r = document.createElement("span");
            r.setAttribute("id", "note" + n.nid), addClass(r, t.class ? t.class : "contentNoteMarker"), f.getOb("epubMeta").appendChild(r);
            var i = 0;
            return i = i || 0, i = -18, o.addMarker({
                id: "noteMarker" + n.nid,
                elem: r,
                offsetTop: i,
                target: function () {
                    return hasClass(this.elem, "contentNoteMarker") ? this.offsetLeft = G(e) - 13 : this.offsetLeft = 0, hasClass(this.elem, "contentNoteMarker") || this.offsetTop < 10 && (this.offsetTop = 10), e
                },
                callback: function () {
                    var t = this;
                    o.checkMarkerExistsAtSameLocation(this.elem, function (e) {
                        return e ? (t.offsetTop += 39, void o.refreshMarker(t)) : n.callback ? n.callback() : void 0
                    })
                }
            }), r
        }
    }, B.deleteBookMarker = function (e) {
        var t = document.getElementById("bookmark" + e);
        t && t.parentNode && t.parentNode.removeChild(t), o.deleteMarker("bookMarker" + e)
    }, B.createBookMarker = function (n, e) {
        var t = document.createElement("span");
        t.setAttribute("id", "bookmark" + n.bmid), addClass(t, "contentBookMarker"), f.getOb("epubMeta").appendChild(t);
        var r = 0;
        return r = r || 0, o.addMarker({
            id: "bookMarker" + n.bmid,
            elem: t,
            offsetLeft: 0,
            offsetTop: r,
            target: function () {
                return this.offsetTop < 10 && (this.offsetTop = 10), e
            },
            callback: function () {
                var t = this;
                o.checkMarkerExistsAtSameLocation(this.elem, function (e) {
                    return e ? (t.offsetTop += 39, void o.refreshMarker(t)) : n.callback ? n.callback() : void 0
                })
            }
        }), t
    }, B.embedAnchorMarker = function (e) {
    };
    var K = function (e) {
        (N = e).stopPropagation()
    }, X = function (e) {
        try {
            if (e && e.stopPropagation(), mobile) {
                if ("anchorDragged" != A) return;
                if (!N) return
            }
            var t;
            if (mobile) {
                var n = mobileDebug ? N : N.targetTouches[0];
                t = document.elementFromPoint(n.clientX, Math.round(n.clientY + a.offsetHeight / 2))
            } else t = e.target;
            if (f.getOb("epubContent") == t) return;
            if (!f.getOb("epubContent").contains(t)) return;
            if (1 < (t.textContent.match(new RegExp(" ", "g")) || []).length) return;
            if (mobile) if ("anchor1" == w.getAttribute("anchor")) {
                if (l == t) return;
                l = t
            } else {
                if (c == t) return;
                c = t
            } else c = t;
            z(), $(), redrawForChrome(l.parentElement), redrawForChrome(c.parentElement), mobile && q()
        } catch (e) {
        }
    }, J = function (e) {
        try {
            var t = f.getOb("epubContainer");
            document.removeEventListener(mobile && !mobileDebug ? "touchend" : "mouseup", J), mobile ? (document.removeEventListener(mobileDebug ? "mousemove" : "touchmove", K), removeClass(w, "selected"), clearInterval(L)) : t.removeEventListener("mousemove", X), removeClass(f.getOb("epubContent"), "defaultCursor"), w = null, S = U(), A = "selectionFixed", B.listener && B.listener(A), e.stopPropagation()
        } catch (e) {
        }
    }, Y = function (e) {
        try {
            var t = f.getOb("epubContainer");
            l = c = e, mobile ? (removeClass(a, "disable"), removeClass(s, "disable"), timeOut(function () {
                addClass(a, "tween"), addClass(s, "tween")
            }, 100), q()) : (t.addEventListener("mousemove", X), document.addEventListener("mouseup", J)), U(), A = "activated", B.listener && B.listener(A)
        } catch (e) {
        }
    };
    return B.active = function () {
        return "selectionFixed" == A || "activated" == A
    }, B.copyToClipboard = function () {
        if (config.clipboardCopy) {
            var t = B.getSelectedText();
            if (t) if (native) n.get("crdv").copyToClipboard(t); else if (desktop) {
                require("nw.gui").Clipboard.get().set(t, "text"), status.showAndHide(r.get("copiedToClipboard"), 500)
            } else {
                var e = document.createElement("textarea");
                document.body.appendChild(e), e.value = t, e.focus(), e.select();
                try {
                    document.execCommand("Copy"), n.get("status").showAndHide(r.get("copiedToClipboard"), 500)
                } catch (e) {
                    n.get("modals").show({mode: "flashUnsupported", flashOb: {text: t}}), setTimeout(function () {
                        document.getElementById("clipboardText").focus(), document.getElementById("clipboardText").select()
                    }, 200)
                }
                e.remove()
            }
        }
    }, B
}]), app.factory("settings", ["$http", "error", "spread", "book", "cache", "modals", "$ionicScrollDelegate", "translit", "$timeout", "virt", "selection", "$injector", "stg", "markers", "sync", "crdv", "cssParser", function (e, t, n, r, d, i, u, o, a, h, s, l, f, c, p, g, m) {
    var v = {};
    return v.pinchActive = !1, v.stylesInitialize = function () {
    }, v.initialize = function () {
        v.stylingChanged(), v.lineAdjustChanged(), v.updateTextSize(), c.refreshMarkers()
    }, v.getTextSize = function () {
        return Number(f.data.settings.textSize.slice(0, -2))
    }, v.viewModeChanged = function () {
        n.applyMode(f.data.settings.viewMode)
    }, v.updateTextSize = function () {
        try {
            var e = d.getOb("epubContent"), t = d.getOb("epubContent").style;
            if (t.fontSize == f.data.settings.textSize) return;
            t.fontSize = f.data.settings.textSize;
            for (var n = 0; n < e.children.length; n++) try {
                e.children[n].style.fontSize = "1em"
            } catch (e) {
            }
            var r, i = d.getOb("epubContainer"), o = e.parentNode.parentNode,
                a = o.style.webkitTransform || o.style.mozTransform || o.style.transform;
            r = overflowScroll ? d.getOb("epubContainer").scrollTop : Number(a.split(",")[1].slice(0, -2));
            var s = e.offsetHeight, l = i.offsetTop, c = i.offsetHeight;
            s + r < c + l ? h.safeScroll("content", 0, l + s - c, !0) : s < c && u.$getByHandle("content").scrollTop(!1), h.reset()
        } catch (e) {
        }
    }, v.writeTextSize = function () {
        f.writeSlot("settings" + f.getBookId(!0), f.data.settings, function () {
            c.refreshMarkers()
        })
    }, v.stylingChanged = function () {
        f.data.settings.styling ? m.showStyles() : m.hideStyles(), c.refreshMarkers()
    }, v.saveSettings = function () {
        f.writeSlot("settings" + f.getBookId(!0), f.data.settings)
    }, v.langChanged = function (e) {
        l.get("nav").fxlZoomFit(), f.writeSlot("settings" + f.getBookId(!0), f.data.settings, function () {
            o.setLang(f.data.settings.language, e), c.refreshMarkers()
        })
    }, v.lineAdjustChanged = function () {
        f.data.settings.lineAdjust ? addClass(d.getOb("epubContent"), "adjustedLineHeight") : removeClass(d.getOb("epubContent"), "adjustedLineHeight"), c.refreshMarkers()
    }, v.sync = function () {
        p.onOnline(function () {
            native ? g.toast(o.get("syncComplete")) : i.show({
                mode: "success",
                successOptions: {msg: o.get("syncComplete")}
            })
        })
    }, v
}]), app.factory("skeleton", ["stg", function (t) {
    var d = {}, o = [], l = [];

    function u() {
        var e = t.data.settings.viewMode;
        return "double" == e && config.singleViewOnPortrait && 1.3 * window.innerWidth < window.innerHeight && (e = "single"), e
    }

    function h(e) {
        o = [], (e = e || {}).firstBone || (e.firstBone = a());
        for (var t = e.firstBone, n = u(), r = e.lastJoint; t;) {
            var i = [];
            if (t.joint = i, "single" == n ? i.push(t) : "double" == n ? (i.push(t), r && delete t.alone, t.alone || t.index >= config.firstDoublePage && t.next && (i.push(t = t.next), t.joint = i)) : "auto" == n && i.push(t), r && ((i.prev = r).next = i), o.push(i), r = null, t.next && (r = i), e.lastBone == t) break;
            t = s(t, e)
        }
        return o[o.length - 1]
    }

    function a(e) {
        var t;
        e = e || 0;
        for (var n = 0; n < l.length; n++) l[n].index < e || (t ? l[n].index < t.index ? t = l[n] : l[n].index == t.index && l[n].vIndex < t.vIndex && (t = l[n]) : t = l[n]);
        return t
    }

    function i(e) {
        for (var t, n = 0; n < l.length; n++) l[n].index > e || (t ? l[n].index > t.index ? t = l[n] : l[n].index == t.index && l[n].vIndex > t.vIndex && (t = l[n]) : t = l[n]);
        return t
    }

    function s(e, t) {
        return t = t || {}, e.next ? e.next : t.connectedOnly ? void 0 : c(e.index + 1)
    }

    function c(e) {
        var t, n, r = i();
        if (r) for (; e <= r.index;) {
            if (t && (e = t.index + 1), n = d.getBone(e)) return n;
            t = null, e++
        }
    }

    function f(e) {
        var t = c(e);
        if (t) return t.joint
    }

    function p(e) {
        var t;
        for (""; e;) e.index + "." + e.vIndex, (e = (t = e).next) && "->";
        return t
    }

    function g(e, t) {
        var n;
        for (t = t || ""; e;) {
            t += " [";
            for (var r = 0; r < e.length; r++) t += e[r].index + "." + e[r].vIndex + ",";
            t = t.substr(0, t.length - 1) + "]", (e = (n = e).next) && (t += "->")
        }
        return n
    }

    return d.reset = function () {
        l = [], o = []
    }, d.initialize = function (e) {
        d.reset();
        for (var t = (e = e || {}).first; t < e.last; t++) d.add({index: t})
    }, d.trace = function () {
        var e = -1;
        for (; ;) {
            var t = c(e + 1);
            if (!t) break;
            var n = p(t);
            e = n.index
        }
        var r = -1;
        for (; ;) {
            var i = f(r + 1);
            if (!i) break;
            var o = g(i);
            r = o[o.length - 1].index
        }
    }, d.add = function (e) {
        var t, n, r, i, o = d.getBone(e.index);
        if (o) {
            var a = e.pages && e.pages.length;
            if (o.total && a) return;
            if (!o.total && !a) return;
            d.remove(o)
        }
        if (e.pages && e.pages.length) for (var s = 0; s < e.pages.length; s++) (i = {}).index = e.index, i.vIndex = s, i.total = e.pages.length, t && ((i.prev = t).next = i), l.push(i), t = i, 0 == s && (n = i), s == e.pages.length - 1 && (r = i); else (i = {}).index = e.index, i.vIndex = null, l.push(i), n = r = i;
        !function (e, t) {
            var n = d.getBone(e.index - 1);
            if (n) {
                var r = n;
                1 < n.total && (r = d.getBone(e.index - 1, n.total - 1)), (r.next = e).prev = r
            }
            var i, o = d.getBone(t.index + 1);
            o && ((o.prev = t).next = o);
            if ("double" == u()) {
                var a = d.getJoint(e.index - 1), s = d.getJoint(t.index + 1);
                if (a) return h();
                var l = t.total ? t.total : 1;
                if (s && 1 == s.length && s[0].index >= config.firstDoublePage && (i = !0), s) {
                    var c;
                    if (i || l % 2 == 0 && (c = !0), i && l % 2 == 1 && (c = !0), c) return h();
                    e.alone = !0
                }
            }
            h()
        }(n, r)
    }, d.remove = function (e) {
        e.prev && e.prev.next && (e.prev.next = null), e.next && e.next.prev && (e.next.prev = null);
        for (var t = 0; t < l.length; t++) if (l[t] == e) return void l.splice(t, 1)
    }, d.getBone = function (e, t) {
        for (var n = 0; n < l.length; n++) if (l[n].index == e) {
            if (null == t) return l[n];
            if (l[n].vIndex == t) return l[n]
        }
    }, d.normalize = function (e) {
        if ("double" == d.getCurrentView(e.index, e).view) if (null != e.vIndex) {
            var t = d.getJoint(e.index, e.vIndex);
            if (t) {
                var n = t[0].index, r = t[0].vIndex;
                (n != e.index || null != r && r != e.vIndex) && (e.index = n, null != r && (e.vIndex = r))
            }
        } else (e.index - config.firstDoublePage) % 2 == 1 && e.index--
    }, d.getJoint = function (e, t) {
        for (var n = 0; n < o.length; n++) for (var r = 0; r < o[n].length; r++) if (o[n][r].index == e) {
            if (t <= -1 && o[n][r].total && (t += o[n][r].total), null == t) return o[n];
            if (null == o[n][r].vIndex) return o[n];
            if (o[n][r].vIndex == t) return o[n]
        }
    }, d.nextJoint = function (e, t) {
        var n = d.getBone(e, t);
        if (n) {
            var r = n.joint.next;
            if (r) return {index: r.index, vIndex: r.vIndex}
        }
    }, d.prevJoint = function (e, t) {
        var n = d.getBone(e, t);
        if (n) {
            var r = n.joint.prev;
            if (r) return {index: r.index, vIndex: r.vIndex}
        }
    }, d.getNextIndex = function (e, t) {
        var n = {}, r = d.getJoint(e.index, e.vIndex);
        return r && r.next ? n.leftOb = {
            index: r.next[0].index,
            vIndex: r.next[0].vIndex
        } : n.leftOb = {index: r[r.length - 1].index + 1, vIndex: 0}, t && t(n), n
    }, d.getPrevIndex = function (e, t) {
        var n = {}, r = d.getJoint(e.index, e.vIndex);
        return r && r.prev ? n.leftOb = {
            index: r.prev[0].index,
            vIndex: r.prev[0].vIndex
        } : n.leftOb = {index: r[0].index - 1, vIndex: -1}, t && t(n), n
    }, d.isSingle = function (e, t) {
        var n = d.getJoint(e, t);
        if (n) return 1 == n.length
    }, d.getCurrentView = function (e, t) {
        var n = d.getJoint(e, t.vIndex);
        if (n) {
            var r = {};
            return r.view = 1 == n.length ? "single" : "double", r.index = e, r
        }
    }, d.isLastChapter = function (e, t) {
        var n = null == (e = e || {}).index ? currentIndex : e.index, r = null == e.vIndex ? currentVIndex : e.vIndex;
        return t(d.getJoint(n, r) == i(e.last).joint)
    }, d.isFirstChapter = function (e, t) {
        return e = e || {}, t(d.getJoint(currentIndex, currentVIndex) == a(e.first).joint)
    }, d.isNeighbor = function (e, t) {
        for (var n = d.getJoint(currentIndex, currentVIndex), r = n.next, i = n.prev, o = 0; o < 2; o++) {
            var a = [r, i][o], s = ["next", "prev"][o];
            if (a) for (var l = 0; l < a.length; l++) if (a[l].index == e.index) {
                if (null == a[l].vIndex) return t(s);
                if (a[l].vIndex == e.vIndex) return t(s)
            }
        }
        t()
    }, d
}]), app.factory("spread", ["$document", "$injector", "cache", "selection", "skeleton", "chapters", "stg", "$filter", function (e, t, n, w, r, c, d, u) {
    var i = {};

    function k(e) {
        if (!e.childNodes.length) return !1;
        if (e.className.indexOf && 0 <= e.className.indexOf("kInteractive")) {
            if (hasClass(e, "video")) return !1;
            if (hasClass(e, "gallery")) return !1;
            if (hasClass(e, "audio")) return !1;
            if (hasClass(e, "widget")) return !1;
            if (hasClass(e, "widget")) return !1;
            if (hasClass(e, "threed")) return !1
        }
        return !0
    }

    function x(e) {
        try {
            if ("span" == e.nodeName.toLowerCase()) return !1;
            if (e.style) {
                if ("always" == e.style.pageBreakBefore || "always" == getComputedStyle(e).pageBreakBefore) return e;
                if (e.previousSibling && e.previousSibling.nodeName && "span" != e.previousSibling.nodeName.toLowerCase() && e.previousSibling.style && ("always" == e.previousSibling.style.pageBreakAfter || "always" == getComputedStyle(e).pageBreakAfter)) return e
            }
            for (var t = 0; t < e.childNodes.length; t++) {
                var n = x(e.childNodes[t]);
                if (n) return n
            }
        } catch (e) {
        }
        return !1
    }

    function C(e, t) {
        var n = getFilteredChildIndex(t);
        if (0 < n) {
            var r = e.parentNode, i = getFilteredChildIndex(e);
            n != i && (r.getAttribute("kb-offset") || r.setAttribute("kb-offset", n - i))
        }
    }

    return i.initialize = function () {
    }, i.applyMode = function (e) {
        "double" == e ? i.activateDblPage() : "single" == e ? i.activateSinglePage() : "auto" == e && i.activateAutoPage()
    }, i.activateSinglePage = function () {
        if (c.shouldBePaged(d.data.currentPageOb)) c.regenerateSpreads(); else {
            c.resetPages({buildChapterMode: !0});
            var e = {viewMode: "single", reload: !0};
            c.loadChapterByIndex(currentIndex, e, function () {
            })
        }
    }, i.activateDblPage = function () {
        if (c.shouldBePaged(d.data.currentPageOb)) c.regenerateSpreads(); else {
            c.resetPages({buildChapterMode: !0});
            var e = {viewMode: "double", reload: !0};
            c.loadChapterByIndex(currentIndex, e, function () {
            })
        }
    }, i.activateAutoPage = function () {
        "double" == c.getCurrentView(currentIndex, {vIndex: currentVIndex}).view ? i.activateDblPage() : i.activateSinglePage()
    }, i.getViewport = function (e) {
        e = e || {};
        var t = document.getElementById("readerBody"), n = document.getElementById("readerHeader"),
            r = document.getElementById("tabMenu"), i = t.getBoundingClientRect().width,
            o = t.getBoundingClientRect().height;
        mobile && "alwaysShow" != config.autohideReaderMode && "showOnScroll" != config.autohideReaderMode && "showOnTap" != config.autohideReaderMode || (o -= n.getBoundingClientRect().height + r.getBoundingClientRect().height);
        var a = c.getCurrentView(e.index, {vIndex: e.vIndex});
        a = a || {view: "double"};
        var s = {}, l = config.spreadSpacing ? config.spreadSpacing : 0;
        return "double" == a.view ? s.width = Math.round((i - l) / 2) : (s.width = i, "double" == d.data.settings.viewMode && (s.width = i / 2), 1.3 * window.innerWidth < window.innerHeight && (s.width = i)), s.height = o, s
    }, i.parseReflowableChapter = function (e, c) {
        e.raw && !e.pages && (e.content = e.raw), t.get("context").simulateChapter(e, function (a) {
            var s = i.getViewport(e), l = {pages: []};
            l.pageWidth = s.width, l.pageHeight = s.height, l.url = e.url, l.index = e.index, a.style.width = "100%", a.style.height = "100%", a.style.position = "absolute", a.style.zIndex = -1, a.style.visibility = "hidden", a.setAttribute("data-index", l.index), document.body.appendChild(a), a.addEventListener("error", function (e) {
            }), a.addEventListener("load", function () {
                var e = a.contentDocument.documentElement, n = e.getElementsByTagName("body")[0];
                n.style.width = s.width + "px", n.style.height = 2 * s.height + "px";
                var t = e.getElementsByTagName("style")[0].innerHTML;
                l.supportsPageBreakStyles = 0 <= t.indexOf("page-break-after") || 0 <= t.indexOf("page-break-before");
                var r = a.contentDocument.getElementById("spreadR");
                r && r.parentNode.removeChild(r), a.contentDocument.getElementById("epubScroller").style.overflowY = "hidden";
                var i = a.contentDocument.getElementById("epubContent"), o = i.outerHTML;
                u("contentVirt")("parse", i, function () {
                    var e = function (e, r) {
                        r.pages || (r.pages = []);
                        r.index || (r.index = 0);
                        r.lastStop || (r.lastStop = document.createElement("div"));
                        var t = r.lastStop, n = [];
                        e.style.width = r.pageWidth + "px";
                        var i = e, o = r.pageHeight - 0, a = getElemMargin(e, {computed: !0}),
                            s = getElemPadding(e, {computed: !0}), l = a.top, c = a.bottom, d = s.top, u = s.bottom;
                        "auto" == l && (l = 0);
                        "auto" == c && (c = 0);
                        "auto" == d && (d = 0);
                        "auto" == u && (u = 0);
                        l = l || 0;
                        c = c || 0;
                        d = d || 0;
                        u = u || 0;
                        a = Number(a), s = Number(s);
                        var h = l + d, f = c + u, p = traverseToBottom(e, "epubContent");
                        for (; ;) {
                            if (!i || 8 == i.nodeType) {
                                if ("continue" == y()) continue;
                                break
                            }
                            var g = getBoundingBox(i);
                            if (g.bottom < o - f) {
                                if (r.supportsPageBreakStyles && x(i)) {
                                    if (b(i, {src: "breakStyle"}), o = g.bottom + r.pageHeight - h - f, "break" == y()) break;
                                    continue
                                }
                                var m = i.cloneNode(!0);
                                if (t.appendChild(m), n.length && C(m, i, "less"), "break" == y()) break
                            } else if (k(i)) {
                                m = cloneNodeAttributes(i);
                                t.appendChild(m), n.length && C(m, i, "canDigInside"), t = t.childNodes[t.childNodes.length - 1], i = i.childNodes[0]
                            } else if (b(i, {src: "end"}), "break" == y()) break
                        }

                        function v(e) {
                            if (!e) return "";
                            r.url;
                            for (var t = getElementsByAttribute(e, "*", "src"), n = 0; n < t.length; n++) {
                                t[n].getAttribute("src");
                                0
                            }
                            return e.outerHTML
                        }

                        function b(e) {
                            o = g.top + r.pageHeight - h - f, t && (n.length, n.push({
                                content: v(traverseToTop(t, "epubContent")),
                                lastLocation: w.convertElemsToLocation([e], p).left
                            })), (t = function (e) {
                                ({});
                                var t, n = parents(e);
                                for (var r = 0; r < n.length - 1; r++) if ("#document" != n[r].nodeName.toLowerCase() && "html" != n[r].nodeName.toLowerCase()) {
                                    var i = cloneNodeAttributes(n[r]);
                                    t = t ? (t.appendChild(i), C(i, n[r], "duplicate"), t.childNodes[0]) : i
                                }
                                return t
                            }(e)).appendChild(e.cloneNode(!0))
                        }

                        function y() {
                            return i.nextSibling ? (i = i.nextSibling, "sibling") : i.parentNode && "body" != i.nodeName.toLowerCase() ? (i = i.parentNode, t = t.parentNode ? t.parentNode : traverseToBottom(t, "epubContent"), y()) : (t && n.push({content: v(traverseToTop(t, "epubContent"))}), "break")
                        }

                        if (1 == n.length) {
                            i = traverseToBottom(e, "epubContent");
                            n[0].content = v(i)
                        }
                        return n
                    }(n, l);
                    a.parentNode.removeChild(a);
                    var t = {};
                    t.pages = e, t.raw = o, t.viewport = s, c(t)
                })
            })
        })
    }, i
}]), app.factory("sso", ["$rootScope", "$location", "stg", "$ionicHistory", "translit", "$injector", "modals", "error", function (e, l, i, c, t, o, d, u) {
    var h = {}, f = ios ? "yes" : "no", a = "http://localhost:8100";

    function s(e) {
        if (!i.data.sso.oauth) return null;
        var t = Object.assign({}, i.data.sso.oauth);
        return t.provider == e ? t : null
    }

    function p(e, t) {
        var n = native ? a : window.location.protocol + "//" + window.location.host;
        return n += getBaseSuffix(), t || (n += function (e) {
            return "/?provider=" + e
        }(e)), n
    }

    function g(e, n) {
        if (native) {
            if (cordova.InAppBrowser) {
                var r = cordova.InAppBrowser.open(e.url, "_blank", e.options);
                r.addEventListener("loadstart", function (e) {
                    if (0 === e.url.indexOf(a)) {
                        r.close();
                        var t = new URL(e.url);
                        n && n(t)
                    }
                }), r.addEventListener("loaderror", function (e) {
                    if (!ios) try {
                        r && r.close()
                    } catch (e) {
                    }
                }), r.addEventListener("exit", function (e) {
                })
            }
        } else window.location.replace(e.url)
    }

    return h.initialize = function (e) {
        i.data.sso || (i.data.sso = {}), config.kotobee.sso.okta && (i.data.sso.okta = !0, i.data.sso.oktaLogo = rootDir + "img/ui/sso/okta.png"), config.kotobee.sso.google && (i.data.sso.google = !0, i.data.sso.googleLogo = rootDir + "img/ui/sso/google.png"), config.kotobee.sso.facebook && (i.data.sso.facebook = !0, i.data.sso.facebookLogo = rootDir + "img/ui/sso/facebook.png"), config.kotobee.sso.auth0 && (i.data.sso.auth0 = !0, i.data.sso.auth0Logo = rootDir + "img/ui/sso/auth0.png"), e && e()
    }, h.setTokens = function (e, t, n) {
        i.data.sso || (i.data.sso = {});
        var r = {provider: e, idToken: t, accessToken: n};
        i.data.sso.oauth = r
    }, h.getSSOEmail = function (n, r) {
        var e = s(n);
        if (e) switch (n) {
            case"facebook":
                var t = {fields: "id,email", access_token: e.accessToken};
                o.get("backend").sendRawPost("https://graph.facebook.com/v7.0/me", t, {
                    ignoreCredentials: !0,
                    queryString: !0
                }, function (e) {
                    if (e) {
                        var t = e.email;
                        i.data.user.email = t, i.data.user.loggedIn = "string" == typeof e.email, t || u.update({
                            error: "ssoEmailError",
                            provider: n.toCamelCase()
                        }), r(t)
                    } else r()
                });
                break;
            default:
                r()
        } else r()
    }, h.signInBrowser = function (o, a) {
        var e, t, n;
        switch (o) {
            case"okta":
                e = ("/" == config.kotobee.sso[o].params.domain.slice(-1) ? config.kotobee.sso[o].params.domain.slice(0, -1) : config.kotobee.sso[o].params.domain) + "/oauth2/default/v1/authorize";
                break;
            case"google":
                e = "https://accounts.google.com/o/oauth2/v2/auth";
                break;
            case"facebook":
                e = "https://www.facebook.com/v7.0/dialog/oauth", t = "token", n = "public_profile email";
                break;
            case"auth0":
                e = "https://" + config.kotobee.sso[o].params.domain.replace(/http[s]?:\/\//g, "") + "/authorize"
        }
        t = encodeURIComponent(t || "token id_token"), n = encodeURIComponent(n || "openid profile email");
        var s = randStr(11, ""), r = p(o);
        g({
            url: e + "?client_id=" + config.kotobee.sso[o].params.clientid + "&response_type=" + t + "&scope=" + n + "&state=" + uuid + "&nonce=" + s + "&redirect_uri=" + encodeURIComponent(r),
            options: "location=no,hidden=no,clearsessioncache=yes,clearcache=yes,closebuttoncaption=Go back to App,toolbar=" + f + ",presentationstyle=formsheet"
        }, function (e) {
            var t = new URLSearchParams(e.hash.slice(1));
            if (t.get("state") != uuid) ; else {
                var n = t.get("access_token") || "", r = t.get("id_token") || "";
                if (h.setTokens(o, r, n), r) {
                    var i = function (e) {
                        var t = e.split(".")[1].replace(/-/g, "+").replace(/_/g, "/"),
                            n = decodeURIComponent(atob(t).split("").map(function (e) {
                                return "%" + ("00" + e.charCodeAt(0).toString(16)).slice(-2)
                            }).join(""));
                        return JSON.parse(n)
                    }(r);
                    i.nonce != s || a && (a(o, i.email, n, r), d.hide(), l.path("/"), c.clearHistory())
                } else if (n) switch (o) {
                    case"facebook":
                        h.getSSOEmail(o, function (e) {
                            e ? a && (a(o, e, n, r), d.hide(), l.path("/"), c.clearHistory()) : (d.hide(), u.update({
                                error: "ssoEmailError",
                                provider: o.toCamelCase()
                            }))
                        })
                }
            }
        })
    }, h.signOutBrowser = function (e) {
        var t = "location=no,hidden=yes", n = s(e);
        if (n) switch (e) {
            case"okta":
                g({
                    url: ("/" == config.kotobee.sso[e].params.domain.slice(-1) ? config.kotobee.sso[e].params.domain.slice(0, -1) : config.kotobee.sso[e].params.domain) + "/oauth2/default/v1/logout?id_token_hint=" + n.idToken + "&state=" + uuid + "&post_logout_redirect_uri=" + encodeURIComponent(p(e, !0)),
                    options: t
                });
                break;
            case"google":
                o.get("backend").sendRawPost("https://oauth2.googleapis.com/revoke", {token: n.accessToken}, {ignoreCredentials: !0}, function (e) {
                    native || (delete i.data.sso.oauth, l.path("/login"), c.clearHistory())
                });
                break;
            case"facebook":
                o.get("backend").sendRawPost("https://graph.facebook.com/v7.0/me/permissions", {token: n.accessToken}, {
                    method: "delete",
                    ignoreCredentials: !0
                }, function (e) {
                    native || (delete i.data.sso.oauth, l.path("/login"), c.clearHistory())
                });
                break;
            case"auth0":
                "/" == config.kotobee.sso[e].params.domain.slice(-1) ? config.kotobee.sso[e].params.domain.slice(0, -1) : config.kotobee.sso[e].params.domain;
                g({
                    url: "https://" + config.kotobee.sso[e].params.domain + "/v2/logout?client_id=" + config.kotobee.sso[e].params.clientid + "&returnTo=" + p(e, !0),
                    options: t
                })
        }
    }, h
}]), app.factory("status", ["$ionicLoading", "translit", "$q", function (a, e, s) {
    var t, l = {}, c = 1e4;

    function d() {
        t && (clearTimeout(t), t = null)
    }

    function u() {
        d(), c && (t = setTimeout(function () {
            l.update().then(function () {
                l.showAndHide(e.get("statusTimeoutError"), 3e3)
            })
        }, c))
    }

    return l.update = function (e, t, n) {
        var r = s.defer();
        if ((n = n || {}).dots && (e += ' <ion-spinner icon="dots" class="loadingSpinner"></ion-spinner>'), n.progress && (e += '<div class="loadingProgress"></div>'), c = n.timeoutDuration ? n.timeoutDuration : 1e4, d(), e) {
            u();
            var i = {template: e};
            for (var o in n) i[o] = n[o];
            a.show(i), l.updateProgress()
        } else a.hide();
        return timeOut(function () {
            r.resolve()
        }, t || 250), r.promise
    }, l.updateProgress = function (e) {
        1 < (e = e || 0) && (e = 1);
        var t = document.getElementsByClassName("loadingProgress");
        t.length && (t[0].style.width = Math.round(100 * e) + "%"), 0 < e && u()
    }, l.showAndHide = function (e, t) {
        l.update(e, t).then(function () {
            l.update()
        })
    }, l
}]), app.factory("stg", ["sync", "$rootScope", function (a, e) {
    var s = {data: {}, view: {}};
    return s.initialize = function () {
        e.data = s.data, e.view = s.view, s.reset(), s.setLanguages(), preview && s.clearSlots()
    }, s.initializeSettings = function (t) {
        try {
            s.readSlot("settings" + s.getBookId(!0), function (e) {
                s.data.settings = e, 0 == s.data.settings.length && (s.data.settings = {}), n()
            })
        } catch (e) {
            s.data.settings = {}, n()
        }

        function n() {
            s.applyDefaultSettings();
            try {
                if (config.defaultLanguage && (s.data.settings.language = config.defaultLanguage, s.langChanged()), s.data.settings.navAnim = config.defaultNavAnim ? config.defaultNavAnim : "navBookBlock", s.data.settings.viewMode = config.defaultViewMode ? config.defaultViewMode : "auto", s.data.settings.pageScroll = null == config.defaultPageScroll || config.defaultPageScroll, !preview) return void s.readSlot("settings" + s.getBookId(!0), function (e) {
                    e && (e.language && (s.data.settings.language = e.language, s.langChanged()), e.navAnim && (s.data.settings.navAnim = e.navAnim), e.viewMode && (s.data.settings.viewMode = e.viewMode)), config.forcedLanguage && (s.data.settings.language = config.forcedLanguage, s.langChanged()), t && t()
                })
            } catch (e) {
            }
            t && t()
        }
    }, s.langChanged = function () {
        "ar" == s.data.settings.language ? s.data.settings.rtl = !0 : s.data.settings.rtl = !1
    }, s.reset = function () {
        s.resetBook(), s.resetLibrary()
    }, s.setLanguages = function () {
        s.data.languages = [{label: "English", val: "en"}, {label: "Français", val: "fr"}, {
            label: "Español",
            val: "es"
        }, {label: "Português", val: "pt"}, {label: "Nederlands", val: "nl"}, {
            label: "Deutsch",
            val: "de"
        }, {label: "Magyar", val: "hu"}, {label: "Italiano", val: "it"}, {
            label: "Svenska",
            val: "sw"
        }, {label: "Melayu", val: "ms"}, {label: "Norsk", val: "no"}, {label: "Polski", val: "pl"}, {
            label: "Român",
            val: "ro"
        }, {label: "Pусский", val: "ru"}, {label: "Türkçe", val: "tr"}, {label: "العربية", val: "ar"}, {
            label: "汉语",
            val: "zh-cn"
        }, {label: "漢語", val: "zh-tw"}, {label: "日本語", val: "jp"}, {label: "한국어", val: "ko"}]
    }, s.resetBook = function () {
        s.data.epub = {}, s.data.toc = "", s.data.mediaList = [], s.data.packageURL = "", s.data.book = {}, s.data.book.chapter = {}, s.data.chromeAssets = []
    }, s.resetLibrary = function () {
        s.data.downloaded = [], s.data.favorites = [], s.data.currentLibrary = {}
    }, s.applyDefaultSettings = function () {
        s.data.settings && (s.data.settings.styling || (s.data.settings.styling = !0), s.data.settings.textSize || (s.data.settings.textSize = "1em"), s.data.settings.lineAdjust || (s.data.settings.lineAdjust = !0), s.data.settings.language || (s.data.settings.language = "en"), null == config.viewModeOptional && (config.viewModeOptional = !0), null == config.pageScrollOptional && (config.pageScrollOptional = !0), null == config.navAnimOptional && (config.navAnimOptional = !0), null == config.languageOptional && (config.languageOptional = !0))
    }, s.getBookId = function (e) {
        if (config.kotobee.cloudid) return "book" == config.kotobee.mode ? "_" + config.kotobee.cloudid : "library" == config.kotobee.mode ? "_" + config.kotobee.cloudid + "_" + (e ? "" : s.data.book ? s.data.book.id : "") : void 0;
        var t, n = "", r = "";
        try {
            t = s.data.book.meta.dc.identifier
        } catch (e) {
        }
        if (desktop) {
            var i = require("nw.gui");
            r = t || i.App.manifest.name + (i.App.manifest.rand ? i.App.manifest.rand : "")
        } else if (native) r = t || (cordova.rand ? cordova.rand : ""); else {
            r = (r = (r = (r = location.href.split("#")[0]).replace("https://", "http://")).replace("http://www.", "http://")).replace("http://", "");
            try {
                n = e ? "" : t || s.data.book.meta.dc.title
            } catch (e) {
            }
        }
        var o = "_" + (r + n).replace(/[\/\s:#]/g, "");
        return config.ignoreQueryStringInLocalStorage && (o = o.replace(/\?.*/g, "")), o
    }, s.addBookmark = function (r, i) {
        s.readSlot("bookmark" + s.getBookId(), function (e) {
            var t = e;

            function n(e) {
                e && (t = e), r.chapter = currentIndex, r.cloudid = config.kotobee.cloudid, t.push(r), s.writeSlot("bookmark" + s.getBookId(), t, function () {
                    return a.queue("bookmark/add", r), i && i(!0), !0
                })
            }

            null != r.bmid ? s.deleteBookmark(r.bmid, null, n) : s.uniqueId(t, "bmid", function (e) {
                r.bmid = e, n()
            })
        })
    }, s.getBookmarks = function (t) {
        s.readSlot("bookmark" + s.getBookId(), function (e) {
            t && t(e)
        })
    }, s.deleteBookmark = function (r, i, o) {
        s.readSlot("bookmark" + s.getBookId(), function (e) {
            for (var t = 0; t < e.length; t++) if (e[t].bmid == r) {
                var n = e[t];
                return e.splice(t, 1), void s.writeSlot("bookmark" + s.getBookId(), e, function () {
                    i || a.queue("bookmark/delete", n), o && o(e)
                })
            }
        })
    }, s.deleteNote = function (r, i, o) {
        s.readSlot("note" + s.getBookId(), function (e) {
            for (var t = 0; t < e.length; t++) if (e[t].nid == r) {
                var n = e[t];
                return e.splice(t, 1), void s.writeSlot("note" + s.getBookId(), e, function () {
                    i || a.queue("note/delete", n), o && o(e)
                })
            }
        })
    }, s.addNote = function (i, o) {
        try {
            s.readSlot("note" + s.getBookId(), function (r) {
                function t(e) {
                    e && (r = e), null == i.chapter && (i.chapter = currentIndex), i.cloudid = config.kotobee.cloudid;
                    var t = {};
                    for (var n in i) "event" != n && (t[n] = i[n]);
                    r.push(t), s.writeSlot("note" + s.getBookId(), r, function () {
                        return a.queue("note/add", t), o && o(!0), !0
                    })
                }

                null != i.nid ? s.deleteNote(i.nid, null, t) : s.uniqueId(r, "nid", function (e) {
                    i.nid = e, t()
                })
            })
        } catch (e) {
        }
        return !0
    }, s.getNotes = function (e) {
        s.readSlot("note" + s.getBookId(), e)
    }, s.deleteHlight = function (r, i, o) {
        s.readSlot("hlight" + s.getBookId(), function (e) {
            for (var t = 0; t < e.length; t++) if (e[t].hid == r) {
                var n = e[t];
                return e.splice(t, 1), void s.writeSlot("hlight" + s.getBookId(), e, function () {
                    i || a.queue("hlight/delete", n), o && o(e)
                })
            }
        })
    }, s.addHlight = function (r, i) {
        s.readSlot("hlight" + s.getBookId(), function (t) {
            function n(e) {
                e && (t = e), null == r.chapter && (r.chapter = currentIndex), r.cloudid = config.kotobee.cloudid, t.push(r), s.writeSlot("hlight" + s.getBookId(), t, function () {
                    return a.queue("hlight/add", r), i && i(!0), !0
                })
            }

            null != r.hid ? s.deleteHlight(r.hid, null, n) : s.uniqueId(t, "hid", function (e) {
                r.hid = e, n()
            })
        })
    }, s.getHlightById = function (n, r) {
        s.getHlights(function (e) {
            for (var t = 0; t < e.length; t++) if (e[t].hid == n) return r && r(e[t]), e[t]
        })
    }, s.getHlights = function (e) {
        s.readSlot("hlight" + s.getBookId(), e)
    }, s.addAction = function (t, n) {
        s.readSlot("actions" + s.getBookId(), function (e) {
            e.push(t), s.writeSlot("actions" + s.getBookId(), e, function () {
                return n && n(!0), !0
            })
        })
    }, s.deleteAction = function (n, r) {
        s.readSlot("actions" + s.getBookId(), function (e) {
            for (var t = 0; t < e.length; t++) if (JSON.stringify(n) == JSON.stringify(e[t])) return e.splice(t, 1), void s.writeSlot("actions" + s.getBookId(), e, function () {
                return r && r(e), e
            });
            r && r()
        })
    }, s.getActions = function (e) {
        s.readSlot("actions" + s.getBookId(), e)
    }, s.readSlot = function (t, n) {
        var r;
        if (chromeApp) chrome.storage.local.get(t, function (e) {
            e = e ? isEmpty(e) ? [] : e[t] : [], n && n(e)
        }); else if (native) try {
            NativeStorage.getItem(t, function (e) {
                e || n([]);
                var t = JSON.parse(e);
                n && n(t)
            }, function () {
                n && n([])
            })
        } catch (e) {
            i()
        } else i();

        function i() {
            if (!(r = localStorage[t])) return n && n([]), [];
            var e = JSON.parse(r);
            return n && n(e), e
        }
    }, s.writeSlot = function (e, t, n) {
        if (chromeApp) {
            var r = {};
            r[e] = t, chrome.storage.local.set(r, function () {
                n && n()
            })
        } else if (native) try {
            NativeStorage.setItem(e, JSON.stringify(t), function () {
                n && n()
            }, function (e) {
                i()
            })
        } catch (e) {
            i()
        } else i();

        function i() {
            localStorage[e] = JSON.stringify(t), n && n()
        }
    }, s.clearSlot = function (e, t) {
        if (chromeApp) chrome.storage.local.remove(e, function () {
            t && t()
        }); else if (native) try {
            NativeStorage.remove(e, function () {
                t && t()
            }, function () {
                n()
            })
        } catch (e) {
        } else n();

        function n() {
            delete localStorage[e], t && t()
        }
    }, s.clearSlots = function (i) {
        if (chromeApp) chrome.storage.local.clear(i); else if (native) try {
            NativeStorage.clear(i, function () {
                e()
            })
        } catch (e) {
        } else e();

        function e() {
            var n = [];
            for (var e in localStorage) n.push(e);
            var r = -1;
            !function e() {
                r++;
                if (r >= n.length) return void (i && i());
                var t = n[r];
                0 == t.indexOf("note_") ? s.clearSlot(t, e) : 0 == t.indexOf("bookmark_") ? s.clearSlot(t, e) : 0 == t.indexOf("hlight_") ? s.clearSlot(t, e) : 0 == t.indexOf("settings_") && s.clearSlot(t, e)
            }()
        }
    }, s.copyLocalToNativeStorage = function () {
        if (native) try {
            for (var e in localStorage) NativeStorage.setItem(e, localStorage[e]), delete localStorage[e]
        } catch (e) {
        }
    }, s.uniqueId = function (e, n, r) {
        var i = 0;
        n = n || "id";
        for (var t = 0; t < e.length; t++) Number(e[t][n]) > i && (i = Number(e[t][n]));
        s.readSlot("actions" + s.getBookId(), function (e) {
            for (var t = 0; t < e.length; t++) Number(e[t].data[n]) > i && (i = Number(e[t].data[n]));
            return r && r(i + 1), i + 1
        })
    }, s.getPublicRoot = function (e) {
        var t = "";
        return s.data.paths && ("book" == config.kotobee.mode || "book" == e ? t = s.data.paths.books : "library" != config.kotobee.mode && "library" != e || (t = s.data.paths.libraries)), t = t || ""
    }, s
}]), app.factory("sync", ["$injector", "translit", "$rootScope", "$http", "error", function (o, e, t, a, s) {
    var l, c, d, u, h, n, f, p = {}, g = {transformRequest: angular.identity, headers: {"Content-Type": void 0}};

    function m() {
        t.data.syncing || (t.data.syncing = !0, t.$$phase || t.$apply())
    }

    function v() {
        t.data.syncing && (t.data.syncing = !1, t.$$phase || t.$apply())
    }

    return p.initialize = function () {
        config.kotobee.cloudid && (c = c || o.get("stg"), d = d || o.get("bookmarks"), u = u || o.get("notes"), h = h || o.get("hlights"), n = n || o.get("chapters"), c.getActions(function (e) {
            l = e, window.addEventListener ? (window.addEventListener("offline", p.onOffline, !1), window.addEventListener("online", p.onOnline, !1)) : (document.addEventListener("offline", p.onOffline, !1), document.addEventListener("online", p.onOnline, !1))
        }))
    }, p.trigger = function () {
        p.offline() ? p.onOffline() : p.onOnline()
    }, p.offline = function () {
        if (o.get("backend").cloudParam("sync")) try {
            return "NONE" == navigator.network.connection.type.toUpperCase() && "UNKNOWN" == navigator.network.connection.type.toUpperCase()
        } catch (e) {
            return !1
        }
    }, p.onOffline = function () {
        o.get("backend").cloudParam("sync")
    }, p.onOnline = function (i) {
        o.get("backend").cloudParam("sync") && (f || p.applyChanges(function () {
            m();
            var e = getFormData(o.get("backend").getAuthVars());
            a.post(config.kotobee.liburl + "library/notebook/all", e, g).success(function (e) {
                if (v(), e.error) return s.update(e), void (i && i());
                var t = e.notes ? e.notes : [], n = e.bookmarks ? e.bookmarks : [], r = e.hlights ? e.hlights : [];
                u.deleteAll(!0, function () {
                    u.addNotesFromSync(t, function () {
                        d.deleteAll(!0, function () {
                            d.addBookmarksFromSync(n, function () {
                                h.deleteAll(!0, function () {
                                    h.addHlightsFromSync(r, function () {
                                        i && i()
                                    })
                                })
                            })
                        })
                    })
                })
            }).error(function (e) {
                t.data.syncing = !1, s.update({error: "cantLoadNodes"}), i && i()
            })
        }))
    }, p.queue = function (e, t) {
        if (c && config.kotobee.cloudid && !config.kotobee.public) {
            var n = {type: e, data: clone(t)};
            l.push(n), c.addAction(n, function () {
                p.offline() || f || p.applyChanges()
            })
        }
    }, p.applyChanges = function (e) {
        if (v(), o.get("backend").cloudParam("sync") && c && c.data.user && (c.data.user.email || c.data.user.code)) try {
            var t = {func: arguments.callee, args: arguments};
            if (0 == l.length) return f = !1, e ? e() : null;
            m(), f = !0;
            var n = l[0], r = getFormData(o.get("backend").getAuthVars());
            for (var i in n.data) r.append(i, n.data[i]);
            a.post(config.kotobee.liburl + "library/" + n.type, r, g).success(function (e) {
                l.splice(0, 1), c.deleteAction(n, function () {
                    p.applyChanges()
                })
            }).error(function (e) {
                f = !1, setTimeout(v, 300), s.update({error: "syncOnConnectionMsg", ref: t})
            })
        } catch (e) {
        }
    }, p
}]), app.factory("tinCan", ["stg", "backend", function (t, n) {
    var e = {};
    return e.initialize = function () {
    }, e.send = function (e) {
        !function (e) {
            try {
                if (!config.gAnalyticsID) return;
                if (!ga) return
            } catch (e) {
                return
            }
            ga("send", "event", e.activity, e.verb, t.data.book.meta.dc.title)
        }(e), n.cloudParam("tincan") && (e.name = t.data.user.name ? t.data.user.name : "User", t.data.user.email ? e.email = t.data.user.email : t.data.user.code && (e.email = t.data.user.code + "@promocode"), n.tincan(e))
    }, e
}]), app.factory("translit", ["$interpolate", "$http", "$injector", "$rootScope", "cache", function (r, e, a, s, l) {
    var i, o, c = {}, d = {}, u = [];
    return c.addListener = function (e) {
        u.push(e)
    }, c.setLangOld = function (e) {
        i = e
    }, c.setDirection = function (e) {
        if ("rtl" == e || "ltr" == e) {
            var t = a.get("stg");
            if (t.data.settings) {
                var n = t.data.settings.rtl;
                "rtl" == e ? (t.data.settings.rtl = !0, l.getOb("body") && addClass(l.getOb("body"), "rtl"), l.getOb("viewContainer") && l.getOb("viewContainer").setAttribute("dir", "rtl")) : (t.data.settings.rtl = !1, l.getOb("body") && removeClass(l.getOb("body"), "rtl"), l.getOb("viewContainer") && l.getOb("viewContainer").removeAttribute("dir", "rtl"));
                var r = document.getElementById("spreadR");
                if (r && "double" == t.data.currentView) {
                    var i = document.getElementById("spreadL");
                    if (n && "rtl" != e || !n && "rtl" == e) {
                        var o = i.style.cssText;
                        i.style.cssText = r.style.cssText, r.style.cssText = o
                    }
                }
                s.$$phase || s.$apply(), setTimeout(function () {
                    var e = a.get("chapters");
                    e.displayTOC(), e.highlightCurrentTocChapter()
                }, 200)
            }
        }
    }, c.setLang = function (t, n) {
        a.get("backend").getServerLang({lang: t}).success(function (e) {
            o = e, i = t, s.data && (s.data.lc || (s.data.lc = 0), s.data.lc = Number(s.data.lc) + 1), function () {
                for (var e = 0; e < u.length; e++) u[e](i)
            }(), l.getOb("viewContainer") || l.setOb("viewContainer", document.getElementsByClassName("view-container")[0]), c.setDirection("ar" == t ? "rtl" : "ltr"), n && n()
        }).error(function (e, t) {
            n && n()
        })
    }, c.getLang = function () {
        return i
    }, c.get = function (e, t) {
        if (!o) return e;
        if (!i) return e;
        if (o[e] && (e = o[e]), t) for (var n = 0; n < t.length; n++) e = r(e)(t[n]);
        return e
    }, c.getOld = function (e, t) {
        if (d[i][e] && (e = d[i][e]), t) for (var n = 0; n < t.length; n++) e = r(e)(t[n]);
        return e
    }, c
}]), app.factory("view", ["stg", function (r) {
    var e = {};
    return e.generate = function () {
        var e = r.data.currentLibrary, t = r.data.currentLibrary.cloud, n = r.view;
        n.registration = {}, n.registration.promocode = t && !t.public && e && !e.cloud.promocodesdisabled && e.promocodesettings.inregistration, n.topmenu = {}, n.topmenu.promocode = t && !t.public && e && !e.cloud.promocodesdisabled && e.promocodesettings.intopmenu, n.topmenu = {}, n.topmenu.promocode = t && !t.public && e && !e.cloud.promocodesdisabled && e.promocodesettings.intopmenu, n.bookinfo = {}, n.bookinfo.promocode = t && !t.public && e && !e.cloud.promocodesdisabled && e.promocodesettings.inbookinfo
    }, e
}]), app.factory("virt", ["$ionicScrollDelegate", "$filter", "$location", "cache", "$q", function (l, n, e, c, o) {
    var t, d, r, i, u = {};
    u.lock = function () {
        d = !0
    }, u.unlock = function () {
        d = !1
    }, u.enable = function () {
        t || d || (t = !0, i && clearInterval(i), r = setInterval(a, 60), a())
    }, u.disableAfter = function (e) {
        i && clearInterval(i), i = setInterval(function () {
            u.disable(), clearInterval(i)
        }, e)
    }, u.disable = function () {
        t && (d || (t = !1, clearInterval(r)))
    };
    var a = function () {
        d || n("contentVirt")()
    };
    return u.reset = function (e, t) {
        d || (u.reveal(!0), n("contentVirt")("reset"), n("contentVirt")(null, e, function () {
            u.reveal(!1), t && t()
        }))
    }, u.checkIfRequiresParse = function (e) {
        hasClass(e, "parsed") || n("contentVirt")("parse", e)
    }, u.checkIfRequiresParseAndAnnotations = function (e) {
        hasClass(e, "parsed") || n("contentVirt")("parseAndAnnotations", e)
    }, u.reveal = function (e) {
        d || n("contentVirt")(e ? "reveal" : "undoReveal")
    }, u.safeAnchorScroll = function (e, t, n) {
        if (!d) {
            var r = o.defer();
            u.reveal(!0);
            var i = document.getElementById(t);
            return u.safeScrollToElem(e, i, n), timeOut(function () {
                u.reset(), r.resolve()
            }, 1300), r.promise
        }
    }, u.safeScroll = function (e, t, n, r) {
        if (!d) {
            var i = o.defer();
            return r = r || !0, u.reveal(!0), l.$getByHandle(e).scrollTo(Math.round(t), Math.round(n), r), timeOut(function () {
                u.reset(), i.resolve()
            }, 1300), i.promise
        }
    }, u.safeScrollToElem = function (e, t, n) {
        if (t && !d) {
            u.reveal(!0);
            var r = c.getOb("epubContainer"), i = 0, o = getComputedStyle(r).paddingTop;
            o && (i = Number(o.split("px")[0]));
            var a = l.$getByHandle(e).getScrollPosition().top;
            mobile || "auto" == getComputedStyle(r).overflowY && (a = r.scrollTop);
            var s = a - (r.getBoundingClientRect().top + i) - 25;
            return u.safeScroll(e, 0, t.getBoundingClientRect().top + s, n)
        }
    }, u.forceRepaint = function () {
        try {
            var e = document.createTextNode(" ");
            document.body.appendChild(e), setTimeout(function () {
            }, 0)
        } catch (e) {
        }
    }, u
}]), app.factory("workers", ["stg", function (e) {
    var r, i, o, t, n = {}, a = [], s = [], l = [];

    function c(e) {
        t = !0
    }

    n.initialize = function () {
        if (p()) {
            try {
                r = new Worker(rootDir + "js/workers/cssParser.js"), i = new Worker(rootDir + "js/workers/htmlParser.js"), o = new Worker(rootDir + "js/workers/search.js"), r.addEventListener("error", c, !1), i.addEventListener("error", c, !1), o.addEventListener("error", c, !1), r.addEventListener("message", h, !1), i.addEventListener("message", h, !1), o.addEventListener("message", h, !1)
            } catch (e) {
                t = !0
            }
            navigator.serviceWorker && navigator.serviceWorker.register("service-worker.js")
        }
    };
    var d = 0;

    function u(e) {
        if (e.length) {
            var t = e[0].args, n = e[0].id;
            f(t[0]).postMessage({func: t[1], params: t[2], id: n})
        }
    }

    function h(e) {
        var t = function (e) {
            if (e == r) return a;
            if (e == i) return s;
            if (e == o) return l
        }(e.target);
        !function (e) {
            for (var t = 0; t < e.length; t++) ;
        }(t);
        var n = t[0].args[3];
        n && n(e.data.data), t.shift(), u.apply(this, [t])
    }

    function f(e) {
        return "cssParser" == e ? r : "htmlParser" == e ? i : "search" == e ? o : void 0
    }

    function p() {
        return !t && "undefined" != typeof Worker
    }

    return n.call = function (e, t, n, r) {
        if (++d, f(e)) {
            var i = function (e) {
                if ("cssParser" == e) return a;
                if ("htmlParser" == e) return s;
                if ("search" == e) return l
            }(e), o = [e, t, n, r];
            i.push({args: o, id: d}), 1 == i.length && u(i)
        }
    }, n.supported = function () {
        return p()
    }, n
}]), app.factory("bookmarks", ["selection", "translit", "crdv", "popovers", "stg", "cache", "modals", "virt", "chapters", function (i, o, t, a, s, e, l, c, d) {
    var u, h = {};
    return h.addBookmark = function () {
        var e = {};
        e.chapter = currentIndex, e.location = i.getTopCornerLocation(), s.addBookmark(e, function () {
            h.addIcon(e), t.toast(o.get("bookmarked"))
        })
    }, h.addBookmarksFromSync = function (t, n) {
        var r = -1;
        !function e() {
            ++r >= t.length ? n && n() : function (t, n) {
                s.readSlot("bookmark" + s.getBookId(), function (e) {
                    e = e || [], t.chapter == currentIndex && (d.busy || arrayContainsProperty(e, "bmid", t.bmid) || h.addIcon(t)), e.push(t), s.writeSlot("bookmark" + s.getBookId(), e, n)
                })
            }(t[r], e)
        }()
    }, h.addIconIfNotShown = function (e) {
        h.addIcon(e)
    }, h.addIcon = function (n) {
        var e = i.getElemsByLocation(n.location);
        if (e[0]) {
            var r = i.createBookMarker(n, e[0]);
            if (r.className = "contentBookMarker", r.setAttribute("bmid", n.bmid), r.setAttribute("bloc", e[0].offsetTop), r.addEventListener("tap", function (e) {
                e.stopImmediatePropagation()
            }), r.addEventListener("click", function (e) {
                c.safeScrollToElem("content", r, !0);
                var t = {};
                t.bmid = this.getAttribute("bmid"), t.location = this.getAttribute("bloc")
            }), r.addEventListener("hold", function (e) {
                var t = [{
                    name: o.get("delete"), func: function () {
                        h.delete(n.bmid), a.hide()
                    }
                }, {
                    name: o.get("cancel"), func: function () {
                        a.hide()
                    }
                }];
                a.show({mode: "list", listOb: t, backdropClickToClose: !1})
            }), !mobile) {
                var t = document.createElement("span");
                t.className = "editIcon icon ion-ios-close", t.addEventListener("click", function (e) {
                    h.confirmDeletion(function () {
                        h.delete(n.bmid), l.hide()
                    })
                }), t.addEventListener("tap", function (e) {
                    e.stopImmediatePropagation()
                }), r.appendChild(t), r.addEventListener("mouseover", function (e) {
                    addClass(r, "edit"), r.addEventListener("mouseout", function (e) {
                        removeClass(r, "edit")
                    })
                })
            }
        }
    }, h.confirmDeletion = function (e) {
        if (u) return e();
        l.hide();
        var t = {title: "confirmation", msg: "bookmarkDeleteConfirm", barStyle: "bar-dark"}, n = {
            label: "delete", style: "button-assertive", func: function () {
                t.dontAskChecked && (u = !0), e && e(), l.hide()
            }
        }, r = {
            label: "cancel", func: function () {
                t.dontAskChecked && (u = !0), l.hide()
            }
        };
        t.dontAsk = !0, t.btns = [n, r], l.show({mode: "confirm", confirmOptions: t})
    }, h.delete = function (e, t, n) {
        i.deleteBookMarker(e), s.deleteBookmark(e, t, n)
    }, h.deleteAll = function (r, i) {
        s.getBookmarks(function (t) {
            var n = -1;
            !function e() {
                n++;
                if (n >= t.length) return void (i && i());
                h.delete(t[n].bmid, r, e)
            }()
        })
    }, h
}]), app.factory("hlights", ["selection", "crdv", "backend", "stg", "$rootScope", "modals", "chapters", function (o, e, t, a, n, s, l) {
    var i, c = {};
    return c.addHlightsFromSync = function (r, i) {
        var o = -1;
        a.readSlot("hlight" + a.getBookId(), function (n) {
            n = n || [], function e() {
                o++;
                if (o % 100 == 0) return setTimeout(e, 100);
                if (o >= r.length) return a.writeSlot("hlight" + a.getBookId(), n, i), i ? i() : null;
                var t = r[o];
                t.chapter == currentIndex && (l.busy || arrayContainsProperty(n, "hid", t.hid) || c.addHlight(t));
                n.push(t);
                e()
            }()
        })
    }, c.addHlight = function (e) {
        for (var t = document.getElementsByClassName("hlight" + e.hid), n = t.length; n--;) t[n].style.backgroundColor = null, removeClass(t[n], "contentHlightBG"), removeClass(t[n], "hlight" + e.hid);
        for (n = (t = o.getElemsByLocation(e.location)).length; n--;) t[n] && ("double" == a.data.currentView && !l.elemInChapterElem(t[n], e.chapter) || (addClass(t[n], "contentHlightBG"), addClass(t[n], "hlight" + e.hid), t[n].style.backgroundColor = e.color));
        return c
    }, c.showPopup = function (r, i) {
        n.$new(!0).hlightOb = {}, r = r || [];
        var e = {
            save: function (e) {
                for (var t = 0; t < r.length; t++) {
                    var n = r[t];
                    null == n.chapter && (n.chapter = l.getElemChapterIndex(o.getSelectedNodes()[0])), n.color = e, null == n.src && (n.src = o.getSelectedText()), a.addHlight(n, function () {
                        c.addHlight(n), t == r.length - 1 && timeOut(function () {
                            s.hide(), i && i(!0)
                        }, 300)
                    })
                }
            }
        };
        e.color = r[0].color ? r[0].color : "#fffb85", r[0].hid && (e.delete = function () {
            for (var e = 0; e < r.length; e++) c.delete(r[0].hid, null, function () {
                e == r.length - 1 && timeOut(function () {
                    s.hide(), i && i()
                }, 300)
            })
        }), s.show({mode: "hlight", hlightOptions: e})
    }, c.confirmDeletion = function (e) {
        if (i) return e();
        s.hide();
        var t = {title: "confirmation", msg: "hlightDeleteConfirm", barStyle: "bar-dark"}, n = {
            label: "delete", style: "button-assertive", func: function () {
                t.dontAskChecked && (i = !0), e && e(), s.hide()
            }
        }, r = {
            label: "cancel", func: function () {
                t.dontAskChecked && (i = !0), s.hide()
            }
        };
        t.dontAsk = !0, t.btns = [n, r], s.show({mode: "confirm", confirmOptions: t})
    }, c.delete = function (e, t, n) {
        for (var r = document.getElementsByClassName("hlight" + e), i = r.length; i--;) i == r.length - 1 && removeClass(r[i], "last"), removeClass(r[i], "contentHlightBG"), r[i].style.backgroundColor = null, removeClass(r[i], "hlight" + e);
        a.deleteHlight(e, t, n)
    }, c.deleteAll = function (r, i) {
        a.getHlights(function (t) {
            var n = -1;
            !function e() {
                n++;
                if (n % 100 == 0) return setTimeout(e, 100);
                if (n >= t.length) return i ? i() : null;
                if (t[n].chapter != currentIndex) return a.deleteHlight(t[n].hid, r, e);
                c.delete(t[n].hid, r, e())
            }()
        })
    }, c
}]), app.factory("notes", ["selection", "translit", "crdv", "$ionicGesture", "stg", "$rootScope", "cache", "modals", "popovers", "$injector", "virt", "$timeout", "chapters", "book", "$sce", function (b, l, e, t, y, n, r, s, c, i, d, u, w, h, f) {
    var o, p, g = {};

    function k(e) {
        for (var t = e.split(" "), n = 0; n < t.length; n++) if (t[n] && 0 == t[n].trim().indexOf("note")) return t[n].trim().substr(4)
    }

    return g.addNotesFromSync = function (t, n) {
        var r = -1;
        !function e() {
            ++r >= t.length ? n && n() : function (t, n) {
                y.readSlot("note" + y.getBookId(), function (e) {
                    e = e || [], t.chapter == currentIndex && (w.busy || arrayContainsProperty(e, "nid", t.nid) || g.addIcon(t)), e.push(t), y.writeSlot("note" + y.getBookId(), e, n)
                })
            }(t[r], e)
        }()
    }, g.addNotesFromQuestions = function (e, t) {
        for (var n = e.elem.getElementsByClassName("ques"), r = [], i = [], o = 0; o < n.length; o++) {
            var a = n[o], s = a.getElementsByClassName("questionTxt");
            s.length || (s = a.getElementsByTagName("p"));
            for (var l = s[0].textContent, c = a.getElementsByClassName("ans"), d = 0; d < c.length; d++) {
                var u, h = c[d], f = h.className;
                f = f.split(" "), "radio" == h.type ? u = "mcq" : "checkbox" == h.type ? u = "mmcq" : "text" == h.type ? u = "sa" : "textarea" == h.type && (u = "sa");
                var p = k(h.className), g = "";
                if ("mcq" == u || "mmcq" == u) {
                    if (!h.checked) {
                        p && i.push({nid: p, elem: h});
                        continue
                    }
                    g = h.nextElementSibling.textContent
                }
                if ("sa" == u) {
                    if ("" == h.value) {
                        p && i.push({nid: p, elem: h});
                        continue
                    }
                    g = h.value
                }
                var m = {};
                m.chapter || (m.chapter = w.getElemChapterIndex(h, {ignoreAnchors: !0})), m.location || (m.location = b.convertElemsToLocation([h], e.root).left, e.rootIndex && (m.location = e.rootIndex + "." + m.location)), m.type || (m.type = "content"), m.src || (m.src = l), m.note = g, p && (m.nid = p), r.push({
                    ob: m,
                    elem: h
                })
            }
        }

        function v(e) {
            e >= i.length ? t && t() : y.deleteNote(i[e].nid, null, function () {
                removeClass(i[e].elem, "note" + i[e].nid), v(++e)
            })
        }

        !function e(t) {
            if (t >= r.length) return void v(0);
            y.addNote(r[t].ob, function () {
                addClass(r[t].elem, "note" + r[t].ob.nid), e(++t)
            })
        }(0)
    }, g.addIcon = function (a, e) {
        if ("page" == a.type) {
            if (!(i = b.getElemsByLocation(a.location))[0]) return;
            var n = b.createNoteMarker(a, i[0], {class: "contentSideNoteMarker"});
            if (n.setAttribute("nid", a.nid), n.setAttribute("ncontent", a.note ? a.note : ""), n.setAttribute("nloc", a.location), n.addEventListener("click", function (e) {
                d.safeScrollToElem("content", n, !0);
                var t = {};
                t.note = this.getAttribute("ncontent"), t.nid = this.getAttribute("nid"), t.location = this.getAttribute("nloc"), t.type = "page", g.noteClicked([t]), e.stopImmediatePropagation()
            }), n.addEventListener("tap", function (e) {
                e.stopImmediatePropagation()
            }), n.addEventListener("hold", function (e) {
                var t = [{
                    name: l.get("edit"), func: function () {
                        c.hide(), g.noteClicked([a])
                    }
                }, {
                    name: l.get("delete"), func: function () {
                        y.deleteNote(a.nid, null, function () {
                            b.deleteNoteMarker(a.nid), c.hide()
                        })
                    }
                }, {
                    name: l.get("cancel"), func: function () {
                        c.hide()
                    }
                }];
                c.show({mode: "list", listOb: t, backdropClickToClose: !1})
            }), !mobile) {
                var t = document.createElement("span");
                t.className = "editIcon icon ion-ios-close", t.addEventListener("click", function (e) {
                    g.confirmDeletion(function () {
                        y.deleteNote(a.nid, null, function () {
                            b.deleteNoteMarker(a.nid)
                        })
                    }), e.stopImmediatePropagation()
                }), t.addEventListener("tap", function (e) {
                    e.stopImmediatePropagation()
                }), n.appendChild(t), n.addEventListener("mouseover", function (e) {
                    addClass(n, "edit"), n.addEventListener("mouseout", function (e) {
                        removeClass(n, "edit")
                    })
                })
            }
        }
        if ("content" == a.type) {
            for (var r, i = b.getElemsByLocation(a.location, e), o = 0; o < i.length; o++) i[o] && addClass(i[o], "note" + a.nid);
            if (1 == i.length && i[0]) {
                var s = i[0].type;
                if ("radio" == s || "checkbox" == s) return void (i[0].checked = !0);
                if ("text" == s || "textarea" == s) return void (i[0].value = a.note)
            }
            for (o = 0; o < i.length; o++) i[o] && ("double" == y.data.currentView && !w.elemInChapterElem(i[o], a.chapter) || addClass(r = i[o], "contentNoteBG"));
            if (!r) return;
            r.setAttribute("ncontent", a.note ? a.note : ""), r.setAttribute("nloc", a.location), addClass(r, "last"), u(function () {
                try {
                    var e = b.createNoteMarker(a, r);
                    e && (e.onclick = function (e) {
                        for (var t, n = this.getAttribute("id"), r = document.getElementsByClassName(n), i = 0; i < r.length; i++) "double" == y.data.currentView && !w.elemInChapterElem(r[i], a.chapter) || (t = r[i]);
                        t.getAttribute("ncontent");
                        var o = {};
                        o.note = t.getAttribute("ncontent"), o.location = t.getAttribute("nloc"), o.nid = n.substr(4), o.type = "content", o.src = t.textContent, g.noteClicked([o]), e.stopImmediatePropagation(), e.preventDefault()
                    }, e.addEventListener("tap", function (e) {
                        e.stopImmediatePropagation()
                    }))
                } catch (e) {
                }
            })
        }
    }, g.confirmDeletion = function (e) {
        if (o) return e();
        s.hide();
        var t = {title: "confirmation", msg: "noteDeleteConfirm", barStyle: "bar-dark"}, n = {
            label: "delete", style: "button-assertive", func: function () {
                t.dontAskChecked && (o = !0), e && e(), s.hide()
            }
        }, r = {
            label: "cancel", func: function () {
                t.dontAskChecked && (o = !0), s.hide()
            }
        };
        t.dontAsk = !0, t.btns = [n, r], s.show({mode: "confirm", confirmOptions: t})
    }, g.noteClicked = function (o, a) {
        try {
            var e = {
                save: function (e) {
                    config.htmlInNotes && (e = p.container.children[0].innerHTML);
                    for (var t = 0; t < o.length; t++) ;
                    for (t = 0; t < o.length; t++) {
                        var n = o[t];
                        n.chapter || (n.chapter = w.getElemChapterIndex(b.getSelectedNodes()[0], {ignoreAnchors: !0})), n.location || (n.location = b.getTopCornerLocation()), n.type || (n.type = "page"), n.src || (n.src = "content" == n.type ? b.getSelectedText() : "");
                        var r = null == n.nid;
                        n.note = e;
                        var i = t == o.length - 1;
                        y.addNote(n, function () {
                            if (r) g.addIcon(n); else {
                                b.getNoteMarker(n.nid).elem.setAttribute("ncontent", n.note);
                                var e = b.getElemsByLocation(n.location), t = e[e.length - 1];
                                t && t.setAttribute("ncontent", n.note)
                            }
                            i && u(function () {
                                s.hide(), a && a(!0)
                            }, 300)
                        })
                    }
                }
            };
            (o = o || [{}])[0].note && (e.note = o[0].note, e.delete = function () {
                g.confirmDeletion(function () {
                    for (var e = 0; e < o.length; e++) g.delete(o[0].nid, null, function () {
                        e == o.length - 1 && u(function () {
                            s.hide(), a && a()
                        }, 300)
                    })
                })
            }), s.show({
                mode: "note",
                dynamic: !0,
                animation: "slide-in-up",
                noteOptions: e,
                event: o[0].event
            }), function e(t) {
                if (!config.htmlInNotes) return;
                var n = document.getElementById("noteTextArea");
                if (!n) return setTimeout(function () {
                    e(t)
                }, 30);
                var r = {theme: "snow"};
                p = new Quill(n, r);
                p.clipboard.dangerouslyPasteHTML(0, t.note)
            }(e)
        } catch (e) {
        }
    }, g.delete = function (e, t, n) {
        b.deleteNoteMarker(e);
        for (var r = document.getElementsByClassName("note" + e), i = r.length; i--;) i == r.length - 1 && (removeClass(r[i], "last"), r[i].removeAttribute("nloc"), r[i].removeAttribute("ncontent")), removeClass(r[i], "contentNoteBG"), removeClass(r[i], "note" + e);
        y.deleteNote(e, t, n)
    }, g.deleteAll = function (r, i) {
        y.getNotes(function (t) {
            var n = -1;
            !function e() {
                n++;
                if (n >= t.length) return void (i && i());
                g.delete(t[n].nid, r, e)
            }()
        })
    }, g.updateNotebookArray = function (o, a) {
        var s = new Array;

        function l(e, t) {
            if (!e) return e;
            for (var n = 0; n < e.length; n++) e[n] = digits(e[n], t);
            return e
        }

        y.getBookmarks(function (e) {
            for (var t = 0; t < e.length; t++) {
                var n = e[t];
                n.chapter = w.getUnanchoredIndex(n.chapter), s[n.chapter] || (s[n.chapter] = new Array), s[n.chapter].push(n)
            }
            y.getNotes(function (e) {
                for (var t = 0; t < e.length; t++) {
                    var n = e[t];
                    n.chapter = w.getUnanchoredIndex(n.chapter), s[n.chapter] || (s[n.chapter] = new Array), n.noteTrusted = "", n.note && (n.noteTrusted = f.trustAsHtml(n.note.replace(new RegExp("\r?\n", "g"), "<br />"))), s[n.chapter].push(n)
                }
                y.getHlights(function (e) {
                    for (var t = 0; t < e.length; t++) {
                        (n = e[t]).chapter = w.getUnanchoredIndex(n.chapter), s[n.chapter] || (s[n.chapter] = new Array), s[n.chapter].push(n)
                    }
                    for (var n in s) s[n].title = h.getTitleByIndex(n);
                    for (t = 0; t < s.length; t++) if (s[t]) for (var r = 0; r < s[t].length; r++) if (s[t][r].location) {
                        var i = String(s[t][r].location).split(",");
                        s[t][r].locationDec = Number("0." + l(i[0].split("."), 3).join(""))
                    }
                    y.data.notebookContent = {results: s, showDelete: o.showDelete}, a && a()
                })
            })
        })
    }, g
}]);
var kInteractive = {
    preRender: function (e, t) {
        var n, r = (t = t || {}).singleElem, i = e || document;
        r ? (n = [e], i = document) : n = i.getElementsByClassName("kInteractive"), void 0 !== isKotobee && (kInteractive.absoluteURL = t.chapterUrl ? t.chapterUrl : angular.element(document.body).scope().data.book.chapter.absoluteURL);
        for (var o = n.length; o--;) {
            var a = n[o];
            this.hasClass(a, "gallery") && kInteractive.gallery.preRender(a, i, o), this.hasClass(a, "questions") && kInteractive.questions.preRender(a, i, o), !this.hasClass(a, "image") && "img" != a.nodeName.toLowerCase() || kInteractive.image.preRender(a, i, o), this.hasClass(a, "link") && kInteractive.link.preRender(a, i, o), this.hasClass(a, "container") && kInteractive.container.preRender(a, i, o), this.hasClass(a, "equation") && kInteractive.equation.preRender(a, i, o), this.hasClass(a, "lipsync") && kInteractive.lipsync.preRender(a, i, o)
        }
    }, postRender: function (t, e) {
        var n = (e = e || {}).singleElem;
        void 0 !== isKotobee && (kInteractive.absoluteURL = e.chapterUrl ? e.chapterUrl : angular.element(document.body).scope().data.book.chapter.absoluteURL), kInteractive.videoIsFullscreen = !1, kInteractive.timestamp = new Date, kInteractive.currentVideo = kInteractive.currentAudio = null, kInteractive.clearAudioVideo(t);
        var r, i = t || document;
        n ? (r = [t], i = document) : r = i.getElementsByClassName("kInteractive");
        for (var o = r.length; o--;) {
            var a = r[o], s = o;
            null != e.forcedIndex && (s = e.forcedIndex), this.hasClass(a, "container") ? kInteractive.container.postRender(i, a, s, e) : this.hasClass(a, "questions") ? kInteractive.questions.postRender(i, a, s, e) : this.hasClass(a, "widget") ? kInteractive.widget.postRender(i, a, s, e) : this.hasClass(a, "video") ? kInteractive.video.postRender(i, a, s) : this.hasClass(a, "audio") ? kInteractive.audio.postRender(i, a, s) : this.hasClass(a, "threed") ? kInteractive.threed.postRender(i, a, s, e) : this.hasClass(a, "gallery") ? kInteractive.gallery.postRender(i, a, s) : this.hasClass(a, "image") ? kInteractive.image.postRender(i, a, s) : this.hasClass(a, "equation") ? kInteractive.equation.postRender(i, a, s) : this.hasClass(a, "lipsync") && kInteractive.lipsync.postRender(i, a, s)
        }
        this.firstRun && (window.addEventListener("resize", function (e) {
            kInteractive.resizeEvent(t, n)
        }), this.firstRun = !1), kInteractive.resizeEvent(t, n)
    }, actionEvent: function (e) {
        return kInteractive.action(e.target)
    }, action: function (e, t) {
        if ("undefined" == typeof editorMode || !editorMode) {
            void 0 !== isKotobee && (kInteractive.absoluteURL = angular.element(document.body).scope().data.book.chapter.absoluteURL);
            for (var n = e; !this.hasClass(n, "kInteractive");) {
                if (!n.parentNode) return;
                if ((n = n.parentNode) == document.body) return
            }
            return this.hasClass(n, "questions") ? kInteractive.questions.action(n, e) : this.hasClass(n, "widget") ? kInteractive.widget.action(n) : this.hasClass(e, "link") ? kInteractive.link.action(n, e) : this.hasClass(e, "image") ? kInteractive.image.action(n, e) : this.hasClass(n, "gallery") ? kInteractive.gallery.action(n, e) : this.hasClass(n, "audio") ? kInteractive.audio.action(n, e) : this.hasClass(n, "video") ? kInteractive.video.action(n, e) : this.hasClass(n, "threed") ? kInteractive.threed.action(n, e) : this.hasClass(n, "equation") ? kInteractive.equation.action(n, e) : this.hasClass(n, "lipsync") ? kInteractive.lipsync.action(n, e) : void 0
        }
    }, trigger: function (e, t) {
        this.action(t, e)
    }, resize: function (e, t) {
        kInteractive.resizeEvent(e, t)
    }, resizeEvent: function (e, t) {
        var n = e || document;
        t && (n = document);
        for (var r = n.getElementsByClassName("kInteractive"), i = r.length; i--;) {
            var o = r[i];
            this.hasClass(o, "image") ? kInteractive.image.resize(o) : this.hasClass(o, "gallery") ? kInteractive.gallery.resize(o) : this.hasClass(o, "container") ? kInteractive.container.resize(o) : this.hasClass(o, "video") ? kInteractive.video.resize(o) : this.hasClass(o, "widget") ? kInteractive.widget.resize(o) : this.hasClass(o, "equation") && kInteractive.equation.resize(o)
        }
    }, vQueue: [], youTubeReady: !1, firstRun: !0
};
if (void 0 === isKotobee) {
    kotobee = {};
    var kotobeeListeners = [];

    function getKotobeeListener(e) {
        if (e) for (var t = kotobeeListeners.length; t--;) if (kotobeeListeners[t].event == e) return kotobeeListeners[t]
    }

    function clearKotobeeListeners(e) {
        for (var t = kotobeeListeners.length; t--;) e && kotobeeListeners[t].event != e || kotobeeListeners.splice(t, 1)
    }

    function dispatchKotobeeEvent() {
    }

    function kInteractionStart() {
        this.log = function (e) {
        }, kInteractive.setDOMParser(), kInteractive.preRender(), kInteractive.postRender()
    }

    function kInteractionStartSingleElem(e, t) {
        kInteractive.setDOMParser(), kInteractive.preRender(e, {singleElem: !0}), kInteractive.postRender(e, {
            singleElem: !0,
            forcedIndex: t
        })
    }

    function renderMathJax() {
        MathJax && MathJax.typeset && MathJax.typeset()
    }

    document.addEventListener("DOMContentLoaded", function (e) {
        "undefined" != typeof kotobeeReady && kotobeeReady(e), document.dispatchEvent(new Event("kotobeeReady")), document.dispatchEvent(new Event("kotobeeChapterLoaded")), kotobee.dispatchEvent("ready"), kotobee.dispatchEvent("chapterLoaded"), document.addEventListener("scroll", function (e) {
            kotobee.dispatchEvent("scrolled", e)
        })
    }), kotobee.addEventListener = function () {
        if (!(arguments.length < 2)) {
            var e, t = arguments[0], n = {};
            e = 2 == arguments.length ? arguments[1] : (n = arguments[1], arguments[2]), n.unique && clearKotobeeListeners(t);
            var r = {event: t, cb: e};
            kotobeeListeners.push(r)
        }
    }, kotobee.dispatchEvent = function (e, t) {
        if (e) {
            var n = getKotobeeListener(e);
            n && n.cb && n.cb.apply(this, [t])
        }
    };
    try {
        document.addEventListener("DOMContentLoaded", kInteractionStart, !1)
    } catch (e) {
        window.addEventListener("load", kInteractionStart, !1)
    }
}
kInteractive.audio = {
    preRender: function (e, t) {
    }, postRender: function (e, t, n) {
        var r = e.createDocumentFragment(), i = kInteractive.readData(t);
        t.setAttribute("id", "ki-audio-" + n), t.innerHTML = "";
        var o = document.createElement("div");
        o.setAttribute("id", "ki-audio-" + n + "-container"), o.className = "container";
        var a = document.createElement("a");
        a.className = "playBtn ki-btn", a.appendChild(document.createElement("span")), void 0 === isKotobee && a.addEventListener("click", kInteractive.actionEvent);
        var s = document.createElement("div");
        if (i.style && kInteractive.c.addClass(s, i.style), r.appendChild(a), r.appendChild(o), s.appendChild(r), t.appendChild(s), i.autoplay) kInteractive.action(t)
    }, action: function (e) {
        kInteractive.stopCurrentMedia();
        var t = kInteractive.readData(e);
        if (t) {
            t.audioType || (t.audioType = t.type);
            e.getAttribute("id");
            e.getElementsByClassName("playBtn")[0].className = "playBtn ki-btn hide";
            var n = t.src;
            if ("file" == t.audioType && (n = void 0 === isKotobee ? t.audio : t.relToRoot ? ph.join(bookPath, t.audio) : ph.join(kInteractive.absoluteURL, t.audio)), kInteractive.scorm) {
                var r = {};
                r.id = kInteractive.getScormId(e.getAttribute("id"), n), r.description = "Played audio: " + n, r.type = "other", r.learnerResponses = "Played", r.objective = t.options ? t.options.objective : null, r.timestamp = new Date, kInteractive.scorm.setInteractions([r])
            }
            kInteractive.events && kInteractive.events.add({action: "audioPlayed", param: n, elem: e, data: t});
            var i = document.createElement("audio");
            i.setAttribute("controls", "true"), i.setAttribute("autoplay", "true"), i.setAttribute("data-tap-disabled", "false");
            var o = document.createElement("source");
            o.src = kInteractive.cleanURL(n), i.appendChild(o), i.appendChild(document.createTextNode("Your browser does not support the audio element")), i.className = "ki-noHighlight", i.oncanplay = function () {
                kInteractive.currentAudio == e && kInteractive.tinCan({verb: "played", activity: "Audio: " + n})
            }, e.getElementsByClassName("container")[0].appendChild(i), i.play(), kInteractive.currentAudio = e, kInteractive.c.addClass(kInteractive.currentAudio, "playing")
        }
    }
};
log = console.log;
var kInteractiveCommon = {
    checkResponsiveFloat: function (e, t) {
        if (e && e.disableWrapForMobile && "none" != e.float) {
            var n = t.parentNode;
            t.offsetWidth > .6 * n.offsetWidth && .4 * (n.offsetWidth - t.offsetWidth) < 100 ? kInteractive.c.addClass(t, "fullRow") : kInteractive.c.removeClass(t, "fullRow")
        }
    }, openFrame: function (u) {
        var h = document.getElementById("kInteractiveFrame"), f = document.getElementById("kiDarkOverlay"), p = "";
        if (u.dict || (u.dict = {}), u.width && (p += "width:" + u.width + "px;max-width:" + u.width + "px;"), u.height && (p += "height:" + u.height + "px;max-height:" + u.height + "px;"), h || ((f = document.createElement("div")).id = "kiDarkOverlay", document.body.appendChild(f), f.style.display = "none", f.style.position = "fixed", f.addEventListener("click", kInteractive.closeFrame), (h = document.createElement("div")).id = "kInteractiveFrame"), u.pos || (u.pos = "top"), "none" != u.pos) {
            var e = document.createElement("a"), t = "closeBtn";
            u.pos && (t += " " + u.pos), e.className = t;
            var n = u.dict.close ? u.dict.close : "Close";
            try {
                n = angular.element(document.body).scope().translit("close")
            } catch (e) {
            }
            "side" != u.pos && (e.innerHTML = n), e.addEventListener("click", kInteractive.closeFrame), h.appendChild(e)
        }
        var g = u.class ? u.class : "";
        (u.width || u.height) && (g += " fixed"), u.aspectRatio && (g += " aspectRatio"), h.style.display = "block", h.className = g, document.body.appendChild(h), kInteractive.frameIsOpen = !0, kInteractive.frameOb = u;
        try {
            if (void 0 !== isKotobee && !native) {
                var r = window.location.hash.split("#");
                1 < r.length && (window.location.hash += (-1 == r[1].indexOf("?") ? "?" : "&") + "popup", window.addEventListener("hashchange", this.backBtnPressed))
            }
        } catch (e) {
        }

        function i() {
            f.style.display = "block", f.className = "show";
            var e = window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName("body")[0].clientHeight,
                t = window.innerWidth || document.documentElement.clientWidth || document.getElementsByTagName("body")[0].clientWidth;
            e -= 20, t -= 20;
            var n = 1;
            if (u.width && u.height) {
                var r = t / u.width, i = e / u.height;
                1 < (n = r < i ? r : i) && (n = 1)
            }
            var o = "display:block;";
            o += p;
            var a = u.width || u.height ? "-50%,-50%" : "0%,0%";
            o += "-webkit-transform:translate(" + a + ") scale(" + n + ");-moz-transform:translate(" + a + ") scale(" + n + ");transform:translate(" + a + ") scale(" + n + ");", o += "position:fixed;", void 0 === isKotobee && "-50%,-50%" == a && (o += "top:" + Math.round(window.innerHeight / 2) + "px;", o += "left:" + Math.round(window.innerWidth / 2) + "px;"), -1 != g.indexOf("aspectRatio") && window.innerWidth / window.innerHeight > 16 / 9 && (o += "padding-bottom: " + 95 * window.innerHeight / Math.round(window.innerWidth) + "%"), h.style.cssText = o, h.className = g + " ready";
            var s = h.getElementsByClassName("closeBtn");
            if (s.length) {
                var l = s[0], c = 1 / n, d = "-50%";
                kInteractive.hasClass(l, "side") && (d = "0%"), l.style.cssText = "-webkit-transform: translate(" + d + ",0%) scale(" + c + ");-webkit-transform-origin: 50% 50%;-moz-transform: translate(" + d + ",0%) scale(" + c + ");-moz-transform-origin: 50% 50%;transform: translate(" + d + ",0%) scale(" + c + ");transform-origin: 50% 50%;"
            }
        }

        kInteractive.openFrame.resized = i, window.addEventListener("resize", i), setTimeout(function () {
            i(), u.cb && u.cb(h)
        }, 100)
    }, closeAlert: function (e) {
        e && e.stopPropagation();
        var t = document.getElementById("kiSystemAlertBox"), n = document.getElementById("kiSystemAlertBackdrop");
        t.parentNode.removeChild(t), n.parentNode.removeChild(n), kInteractive.alertIsOpen = !1, window.removeEventListener("resize", kInteractive.alert.resized), kInteractive.alert.resized = null
    }, backBtnPressed: function (e) {
        e.oldURL && e.oldURL.match(/[?&]popup/g) && (window.removeEventListener("hashchange", kInteractive.backBtnPressed), kInteractive.closeFrame())
    }, closeFrame: function () {
        var e = document.getElementById("kInteractiveFrame"), t = document.getElementById("kiDarkOverlay");
        kInteractive.frameIsOpen = !1, window.removeEventListener("resize", kInteractive.openFrame.resized), kInteractive.openFrame.resized = null, kInteractive.c.removeClass(e, "ready");
        var n = kInteractive.frameOb, r = "";
        n.width && (r += "width:" + n.width + "px;max-width:" + n.width + "px;"), n.height && (r += "height:" + n.height + "px;max-height:" + n.height + "px;"), e.style.cssText = r, t.className = "", setTimeout(function () {
            e.innerHTML = "", e.style.display = t.style.display = "none", n.closed && n.closed(), kInteractive.frameOb = null
        }, 300), window.removeEventListener("hashchange", kInteractive.closeFrame), window.location.hash = window.location.hash.replace(/[?&]popup/g, "")
    }, stopCurrentMedia: function () {
        if (kInteractive.currentVideo) {
            var e = kInteractive.currentVideo.getAttribute("id") + "-container";
            if (n = document.getElementById(e)) {
                var t = n.parentNode;
                n.parentNode.removeChild(n), (r = document.createElement("div")).setAttribute("id", e), r.className = "container", (i = kInteractive.currentVideo.getElementsByClassName("playBtn")[0]).className = "playBtn ki-btn", kInteractive.c.removeClass(kInteractive.currentVideo, "playing"), t.appendChild(r)
            }
        }
        var n;
        if (kInteractive.currentAudio) if (e = kInteractive.currentAudio.getAttribute("id")) {
            if (e += "-container", n = document.getElementById(e)) {
                var r, i;
                t = n.parentNode;
                n.parentNode.removeChild(n), (r = document.createElement("div")).setAttribute("id", e), r.className = "container playerContainer", (i = kInteractive.currentAudio.getElementsByClassName("playBtn")[0]) && (i.className = "playBtn ki-btn"), kInteractive.c.removeClass(kInteractive.currentAudio, "playing"), t.appendChild(r)
            }
        } else try {
            var o = kInteractive.currentAudio.getElementsByTagName("audio");
            o.length && (o[0].pause(), o[0].src = ""), kInteractive.currentAudio.pause && (kInteractive.currentAudio.pause(), kInteractive.currentAudio.src = "");
            for (var a = document.getElementsByClassName("kiAudioLoader"), s = a.length; s--;) a[s].parentNode.removeChild(a[s])
        } catch (e) {
        }
    }, hasClass: function (e, t) {
        if (e && e.className) for (var n = e.className.trim().split(" "), r = 0; r < n.length; r++) if (n[r] && n[r].trim() == t) return !0
    }, appendAfterDelay: function (e, t) {
        setTimeout(function () {
            e.appendChild(t)
        }, 30)
    }, replaceHTML: function (e, t) {
        var n = "string" == typeof e ? document.getElementById(e) : e, r = n.cloneNode(!1);
        return r.innerHTML = t, n.parentNode.replaceChild(r, n), r
    }, tinCan: function (e) {
        if (void 0 !== isKotobee) try {
            angular.element(document.body).scope().tinCanShortcut(e)
        } catch (e) {
        }
    }, setDOMParser: function () {
        !function (e) {
            "use strict";
            var t = e.prototype, o = t.parseFromString;
            try {
                if ((new e).parseFromString("", "text/html")) return
            } catch (e) {
            }
            t.parseFromString = function (e, t) {
                if (/^\s*text\/html\s*(?:;|$)/i.test(t)) {
                    var n, r = document.implementation.createHTMLDocument(""), i = r.documentElement;
                    return i.innerHTML = e, n = i.firstElementChild, 1 === i.childElementCount && "html" === n.localName.toLowerCase() && r.replaceChild(n, i), r
                }
                return o.apply(this, arguments)
            }
        }(DOMParser)
    }, compareVersions: function (e, t) {
        if (e == t) return 0;
        if (null == e) return 1;
        if (null == t) return -1;
        var n = e.split("."), r = t.split(".");
        return r.length ? n.length ? Number(n[0]) > Number(r[0]) ? 1 : Number(r[0]) > Number(n[0]) ? -1 : (n.shift(1), r.shift(1), kInteractive.compareVersions(n.join("."), r.join("."))) : -1 : 1
    }, readData: function (e) {
        try {
            var t = e.getAttribute("data-kotobee");
            t = t || e.getAttribute("data");
            var n = 1;
            if (!t) return;
            return JSON.parse(decodeURI(kInteractive.XORCipher(n).decode("kotobee%%author", t)))
        } catch (e) {
            try {
                return JSON.parse(kInteractive.XORCipher(n).decode("kotobee%%author", t))
            } catch (e) {
            }
        }
    }, writeData: function (e, t, n) {
        n = n || 1;
        var r = encodeURI(JSON.stringify(t)), i = e.hasAttribute("data-kotobee") ? "data-kotobee" : "data";
        e.setAttribute(i, kInteractive.XORCipher(n).encode("kotobee%%author", r))
    }, XORCipher: function (e) {
        var u = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        return {
            encode: function (e, t) {
                return function (e) {
                    var t, n, r, i, o, a, s, l, c = 0, d = "";
                    if (!e) return e;
                    for (; t = e[c++], n = e[c++], r = e[c++], i = (s = t << 16 | n << 8 | r) >> 12 & 63, o = s >> 6 & 63, a = 63 & s, d += u.charAt(s >> 18 & 63) + u.charAt(i) + u.charAt(o) + u.charAt(a), c < e.length;) ;
                    return ((l = e.length % 3) ? d.slice(0, l - 3) : d) + "===".slice(l || 3)
                }(t = function (n, e) {
                    return i(e, function (e, t) {
                        return e.charCodeAt(0) ^ r(n, t)
                    })
                }(e, t))
            }, decode: function (e, t) {
                return function (n, e) {
                    return i(e, function (e, t) {
                        return String.fromCharCode(e ^ r(n, t))
                    }).join("")
                }(e, t = function (e) {
                    var t, n, r, i, o, a, s, l, c = 0, d = [];
                    if (!e) return e;
                    e += "";
                    for (; i = u.indexOf(e.charAt(c++)), o = u.indexOf(e.charAt(c++)), a = u.indexOf(e.charAt(c++)), s = u.indexOf(e.charAt(c++)), t = (l = i << 18 | o << 12 | a << 6 | s) >> 16 & 255, n = l >> 8 & 255, r = 255 & l, d.push(t), 64 !== a && (d.push(n), 64 !== s && d.push(r)), c < e.length;) ;
                    return d
                }(t))
            }
        };

        function r(e, t) {
            return e.charCodeAt(Math.floor(t % e.length))
        }

        function i(e, t) {
            for (var n = [], r = 0; r < e.length; r++) n[r] = t(e[r], r);
            return n
        }
    }, getScormId: function (e, t) {
        return e + (t = t ? "-" + t.replace(/[^a-zA-Z0-9]/g, "-").substr(0, 80) : "")
    }, confirm: function (e) {
        kInteractive.alert(e)
    }, alert: function (e) {
        if (e) {
            var t = document.createElement("div");
            if (t.setAttribute("id", "kiSystemAlertBox"), e.raw && (t.className = "raw"), t.style.position = "fixed", void 0 === isKotobee && (t.style.top = Math.round(window.innerHeight / 2) + "px", t.style.left = Math.round(window.innerWidth / 2) + "px"), e.raw) t.innerHTML = e.content.replace("&nbsp;", "&#160;"); else {
                var n = document.createElement("div");
                n.innerHTML = e.content.replace("&nbsp;", "&#160;"), n.className = "content", t.appendChild(n)
            }
            if (e.title) {
                var r = document.createElement("div");
                r.innerHTML = e.title.replace("&nbsp;", "&#160;"), r.className = "header", t.insertBefore(r, t.firstChild)
            }
            kInteractive.alertIsOpen = !0;
            var i = document.createElement("a");
            if (!e.raw) {
                var o = document.createElement("div");
                o.className = "footer";
                var a = "OK";
                try {
                    a = angular.element(document.body).scope().translit("ok")
                } catch (e) {
                }
                if (e.okBtn && (a = e.okBtn), i.innerHTML = a.replace("&nbsp;", "&#160;"), i.className = "okBtn", i.addEventListener("click", kInteractive.closeAlert), e.cb && i.addEventListener("click", e.cb), o.appendChild(i), e.noBtn) {
                    var s = document.createElement("a");
                    s.innerHTML = e.noBtn, s.className = "cancelBtn", s.addEventListener("click", kInteractive.closeAlert), o.appendChild(s)
                }
                t.appendChild(o)
            }
            var l = document.createElement("div");
            e.noBackdrop || (l.setAttribute("id", "kiSystemAlertBackdrop"), l.addEventListener("click", kInteractive.closeAlert), l.style.position = "fixed", document.body.appendChild(l)), document.body.appendChild(t), i.focus(), kInteractive.alert.resized = c, window.addEventListener("resize", c), setTimeout(function () {
                kInteractive.c.addClass(t, "show"), kInteractive.c.addClass(l, "show")
            }, 50)
        }

        function c() {
            void 0 === isKotobee && (t.style.top = Math.round(window.innerHeight / 2) + "px", t.style.left = Math.round(window.innerWidth / 2) + "px")
        }
    }, c: {
        addClass: function (e, t) {
            var n = e.className.trim();
            if (t instanceof Array) {
                for (var r = !0, i = 0; i < t.length; i++) -1 == n.indexOf(t[i]) && (r = !1, n += ("" == n ? "" : " ") + t[i]);
                if (r) return
            } else {
                if (0 <= n.indexOf(t)) return;
                n += ("" == n ? "" : " ") + t
            }
            e.className = n
        }, toggleClass: function (e, t) {
            this.strHasClass(e.className, t) ? this.removeClass(e, t) : this.addClass(e, t)
        }, hasClass: function (e, t) {
            return this.strHasClass(e.className, t)
        }, strHasClass: function (e, t) {
            for (var n = (e = e || "").trim().split(" "), r = 0; r < n.length; r++) if (n[r] == t) return !0;
            return !1
        }, removeClass: function (e, t) {
            var n = e.className;
            if (t instanceof Array) {
                for (var r = !0, i = 0; i < t.length; i++) 0 <= n.indexOf(t[i]) && (r = !1, n = n.replace(t[i], ""));
                if (r) return
            } else {
                if (-1 == n.indexOf(t)) return;
                n = (n = n.replace(t, "")).replace(/ {2,}?/g, " ")
            }
            "" == (n = n.trim()) ? e.removeAttribute("class") : e.className = n
        }, removeHash: function (e) {
            return -1 == e.indexOf("#") ? e : e.substring(0, e.lastIndexOf("#"))
        }, removeFilename: function (e) {
            var t = kInteractive.c.normalizedArray(e);
            return -1 == t[t.length - 1].indexOf(".") ? e : (t.splice(t.length - 1, 1), t.join("/"))
        }, normalizedArray: function (e) {
            for (var t = (e = e.replace(/\\/g, "/")).split("/"), n = t.length; n--;) t[n] ? ".." == t[n] && 0 < n && ".." != t[n - 1] && (t.splice(n, 1), t.splice(n - 1, 1)) : t.splice(n, 1);
            return t[0].match(/http[s]?:$/g) && (t[0] += "//" + t[1], t.splice(1, 1)), t[0].match(/kotobee:$/g) && (t[0] += "//" + t[1], t.splice(1, 1)), "file:" == t[0] && (t[0] += "///" + t[1], t.splice(1, 1)), t
        }
    }, shuffleArray: function (e) {
        e.sort(function () {
            return Math.random() - .5
        })
    }, allowDrop: function (e) {
        e.preventDefault()
    }, drag: function (e) {
        e.dataTransfer && e.dataTransfer.setData("text", e.target.id), dragged = e.target
    }, drop: function (e) {
        e.preventDefault(), e.target.hasAttribute("ondragover") && e.target.appendChild(e.view.dragged)
    }, escapeHtml: function (e) {
        var t = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#039;"};
        return e.replace(/[&<>"']/g, function (e) {
            return t[e]
        })
    }, getChildIndex: function (e) {
        for (var t = 0; null != (e = e.previousSibling);) t++;
        return t
    }, isAbsolutePath: function (e) {
        if (e) return 0 == e.trim().indexOf("http://") || (0 == e.trim().indexOf("https://") || (0 == e.trim().indexOf("//") || (0 == e.trim().indexOf("data:") || (!!/.\:[\\\/].*/g.test(e.trim()) || void 0))))
    }, isMobile: function (e) {
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) return !0;
        try {
            if (0 < window.location.href.indexOf("?preview")) {
                var t = window.location.href.split("?");
                t = t[1].split("&");
                for (var n = {}, r = 0; r < t.length; r++) {
                    var i = t[r].split("=");
                    n[i[0]] = i[1]
                }
                if (n.mobile) return !0
            }
        } catch (e) {
        }
    }, getChildIndex: function (e) {
        for (var t = 0; null != (e = e.previousSibling);) t++;
        return t
    }, closeFullscreenVideo: function () {
        kInteractive.currentVideo && (kInteractive.currentVideo.webkitExitFullscreen ? kInteractive.currentVideo.webkitExitFullscreen() : kInteractive.currentVideo.mozCancelFullScreen ? kInteractive.currentVideo.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.mozCancelFullScreen && document.mozCancelFullScreen(), kInteractive.videoIsFullscreen = !1)
    }, getWidgetHome: function (e, t) {
        return {}, e.path ? void 0 === isKotobee ? e.path : ph.join(angular.element(document.body).scope().data.book.chapter.absoluteURL, e.path) : void 0 === isKotobee ? "../js/widgets/" : bookPath + "EPUB/js/widgets/"
    }, getWidgetUrl: function (e, t) {
        var n = kInteractive.getWidgetHome(e, t) + "/" + e.name + "/" + e.src;
        if (void 0 !== isKotobee) {
            var r = angular.element(document.body).scope().data.user;
            r && r.email && r.signatures && r.signatures.bookwidgets && e.id && 0 == e.id.indexOf("com.kidimedia") && (n += "?oauth_signature=" + r.signatures.bookwidgets.signature, n += "&oauth_nonce=" + r.signatures.bookwidgets.nonce, n += "&oauth_timestamp=" + r.signatures.bookwidgets.timestamp, n += "&oauth_consumer_key=" + r.signatures.bookwidgets.key, n += "&lti_version=LTI-1p0", n += "&oauth_signature_method=HMAC-SHA1", n += "&oauth_version=1.0", n += "&tool_consumer_info_product_family_code=kotobee", n += "&lis_person_contact_email_primary=" + r.email, n += "&lis_person_name_full=" + (r.name ? r.name : ""), n += "&user_id=" + r.id, n += "&lti_message_type=basic-lti-launch-request", angular.element(document.body).scope().refreshSignatures && angular.element(document.body).scope().refreshSignatures())
        }
        return n = kInteractive.cleanURL(n)
    }, clearAudioVideo: function (e) {
        var t = e || document;
        kInteractive.stopCurrentMedia();
        for (var n = t.getElementsByTagName("audio"), r = n.length; r--;) try {
            if (n[r].hasAttribute("data-dontclose")) continue;
            n[r].pause(), n[r].children.length || (n[r].src = "")
        } catch (e) {
        }
        var i = t.getElementsByTagName("video");
        for (r = i.length; r--;) i[r].pause(), i[r].children.length || (i[r].src = "")
    }, cleanURL: function (e) {
        try {
            native && mobile && (e = window.Ionic.WebView.convertFileSrc(e))
        } catch (e) {
        }
        return e
    }, listenForSwiping: function (a) {
        a.addEventListener("touchstart", function (e) {
            s = e.touches[0].clientX, l = e.touches[0].clientY
        }, !1), a.addEventListener("touchmove", function (e) {
            if (null === s) return;
            if (null === l) return;
            var t = e.touches[0].clientX, n = e.touches[0].clientY, r = s - t, i = l - n;
            5 < r ? (a.dispatchEvent(new Event("swipeleft")), o()) : r < -5 ? (a.dispatchEvent(new Event("swiperight")), o()) : 5 < i ? (a.dispatchEvent(new Event("swipeup")), o()) : i < -5 && (a.dispatchEvent(new Event("swipedown")), o());

            function o() {
                l = s = null
            }

            e.preventDefault()
        }, !1);
        var s = null, l = null
    }
};
for (var item in kInteractiveCommon) kInteractive[item] = kInteractiveCommon[item];
kInteractive.container = {
    preRender: function (e, t) {
        kInteractive.readData(e)
    }, postRender: function (e, t, n) {
        var r = kInteractive.readData(t);
        if (r && (kInteractive.isMobile() && "cScroll" == r.type && void 0 !== isKotobee && angular.element(document.body).scope().applyNativeScroll(t), r.path)) {
            var i = r.path;
            void 0 !== isKotobee && (i = ph.join(kInteractive.absoluteURL, r.path));
            var o = t.getAttribute("style");
            i = kInteractive.cleanURL(i), t.setAttribute("style", o + ' background-image:url("' + i + '");')
        }
    }, action: function (e) {
    }, resize: function (e) {
        var t = kInteractive.readData(e);
        t && kInteractive.checkResponsiveFloat(t, e)
    }
}, kInteractive.equation = {
    preRender: function (e, t) {
        if (("undefined" == typeof editorMode || !editorMode) && "undefined" == typeof MathJax) {
            MathJax = {loader: {load: ["input/asciimath", "input/mml", "input/tex", "output/chtml", "ui/menu"]}};
            var n = document.createElement("script"), r = "";
            r = void 0 === isKotobee ? "../../js/lib/mathjax/startup.js" : bookPath + "EPUB/js/lib/mathjax/startup.js", n.src = kInteractive.cleanURL(r), n.setAttribute("type", "text/javascript"), document.head.appendChild(n)
        }
    }, postRender: function (e, t, n) {
        var r = e.createDocumentFragment(), i = kInteractive.readData(t);
        if (i) {
            t.setAttribute("id", "ki-equation-" + n), t.innerHTML = "";
            var o = i.content;
            "mathml" == i.type ? o = "<math>" + o + "</math>" : "asciimath" == i.type ? o = "`" + o + "`" : "tex" == i.type && (o = "\\(" + o + "\\)");
            var a = "inline" == i.placement ? "span" : "div", s = document.createElement(a);
            s.setAttribute("id", "ki-equation-" + n + "-container"), s.className = "parsed container", s.innerHTML = o;
            var l = document.createElement(a);
            i.style && kInteractive.c.addClass(l, i.style), r.appendChild(s), l.appendChild(r), t.appendChild(l), "undefined" != typeof editorMode && editorMode || MathJax && MathJax.typeset && MathJax.typeset()
        }
    }, action: function (e) {
        kInteractive.readData(e)
    }, resize: function (e) {
        kInteractive.readData(e)
    }
}, kInteractive.gallery = {
    preRender: function (e, t) {
        var n = t.createDocumentFragment(), r = kInteractive.readData(e);
        if (r) {
            e.innerHTML = "";
            var i = e.getAttribute("data-index");
            i = i || 0;
            var o = document.createElement("div");
            o.className = "imgMask";
            var a = document.createElement("div");
            a.className = "images " + r.scale, o.appendChild(a);
            for (var s = 0; s < r.imgs.length; s++) {
                var l = document.createElement("div");
                l.className = "imgContainer ki-btn";
                var c = void 0 === isKotobee ? r.imgs[s].path : ph.join(kInteractive.absoluteURL, r.imgs[s].path);
                c = kInteractive.cleanURL(c), l.setAttribute("style", "background-color:" + r.bgColor + ";background-image:url('" + c + "')"), r.imgs[s].caption && l.setAttribute("data-caption", r.imgs[s].caption), void 0 !== isKotobee || kInteractive.c.hasClass(e, "fullscreen") || l.addEventListener("click", kInteractive.actionEvent), a.appendChild(l)
            }
            var d = document.createElement("div");
            d.className = "navBtns";
            var u = document.createElement("a");
            u.className = "next btn ki-btn", d.appendChild(u);
            var h = document.createElement("a");
            h.className = "prev btn ki-btn", d.appendChild(h), n.appendChild(d), void 0 !== isKotobee && !kInteractive.c.hasClass(e, "fullscreen") || (u.addEventListener("click", kInteractive.actionEvent), h.addEventListener("click", kInteractive.actionEvent)), n.appendChild(o);
            var f = document.createElement("div");
            f.className = "kFooter", r.footerShadow && (f.className += " shadow"), n.appendChild(f);
            var p = document.createElement("div");
            p.className = "imgCaption";
            var g = document.createElement("div");
            if (g.className = "inner", g.style.display = "none", r.imgs[0] && r.imgs[0].caption && (g.innerHTML = r.imgs[0].caption, g.style.display = null), p.appendChild(g), f.appendChild(p), r.thumbnails) {
                var m = document.createElement("div");
                m.className = "kThumbs", r.thumbShowOnHover && (m.className += " showOnHover"), "small" == r.thumbSize ? kInteractive.c.addClass(m, "small") : "large" == r.thumbSize ? kInteractive.c.addClass(m, "large") : kInteractive.c.addClass(m, "medium"), f.appendChild(m)
            }
            if (kInteractive.c.hasClass(e, "fullscreen")) {
                var v = document.createElement("div");
                v.className = "fullscreenControls", v.innerHTML = "<a class='closeBtn ki-btn'></a>", e.appendChild(v), v.children[0].addEventListener("click", kInteractive.actionEvent), document.addEventListener("keydown", kInteractive.gallery.detectKey)
            }
            var b = document.createElement("div");
            r.style && kInteractive.c.addClass(b, r.style), b.appendChild(n), e.appendChild(b), kInteractive.gallery.dimBtns(e), kInteractive.gallery.resize(e), this.showImage(e, {
                index: i,
                dontGoFullscreen: !0
            }), setTimeout(function () {
                kInteractive.gallery.showImage(e, {index: i, dontGoFullscreen: !0})
            }, 80)
        }
    }, postRender: function (e, t, n) {
        kInteractive.gallery.resize(t);
        var r = this.getState(t);
        this.showImage(t, {index: r.selectedIndex, dontGoFullscreen: !0})
    }, action: function (e, t) {
        e.getElementsByClassName("images")[0].getElementsByClassName("selected")[0];
        if (kInteractive.hasClass(t, "btn")) kInteractive.hasClass(t, "next") ? kInteractive.gallery.showImage(e, {dir: "next"}) : kInteractive.hasClass(t, "prev") && kInteractive.gallery.showImage(e, {dir: "prev"}); else if (kInteractive.hasClass(t, "closeBtn")) kInteractive.gallery.exitFullscreen(); else {
            if (kInteractive.hasClass(t, "imgContainer")) return kInteractive.gallery.goToFullscreen(e);
            if (kInteractive.hasClass(t, "kMapItem")) {
                var n = kInteractive.getChildIndex(t);
                kInteractive.gallery.goToThumb(e, {windowIndex: n, highlightThumb: !1})
            } else if (kInteractive.hasClass(t, "kThumb")) {
                n = t.getAttribute("data-index");
                kInteractive.gallery.showImage(e, {index: t.getAttribute("data-index")})
            } else if (kInteractive.hasClass(t, "thumbNavBtn")) {
                kInteractive.hasClass(t, "next") ? kInteractive.gallery.goToThumb(e, {
                    dir: "nextWindow",
                    highlightThumb: !1
                }) : kInteractive.hasClass(t, "prev") && kInteractive.gallery.goToThumb(e, {
                    dir: "prevWindow",
                    highlightThumb: !1
                })
            }
        }
        kInteractive.gallery.dimBtns(e)
    }, goToThumb: function (e, t) {
        t = t || {};
        var n, r, i = this.getState(e), o = i.thumbWindows, a = i.activeWindow, s = i.currentIndex, l = i.selectedIndex,
            c = i.currentThumb, d = t.index;
        if (null == d && (null != t.windowIndex ? d = t.windowIndex * o[0].children[0].children.length : ("nextThumb" == t.dir && (d = l + 1), "prevThumb" == t.dir && (d = l - 1), "nextWindow" == t.dir && (d = s + o[0].children[0].children.length), "prevWindow" == t.dir && (d = s - o[0].children[0].children.length))), o.length) for (var u = o[0].getElementsByClassName("kThumb"), h = u.length; h--;) if (u[h].getAttribute("data-index") == d) {
            n = u[h], r = n.parentNode;
            break
        }
        if (r) {
            if (a != r) {
                s < d ? (a.style.left = -e.offsetWidth + "px", r.style.left = e.offsetWidth / 2 + "px") : (a.style.left = e.offsetWidth + "px", r.style.left = -e.offsetWidth / 2 + "px"), r.style.display = "none", setTimeout(function () {
                    r.style.display = "block", setTimeout(function () {
                        r.style.left = 0
                    }, 20)
                }, 20);
                var f = e.getElementsByClassName("kMapItem");
                if (f.length) {
                    var p = (f = f[0]).getElementsByClassName("active");
                    p.length && kInteractive.c.removeClass(p[0], "active"), kInteractive.c.addClass(f.children[kInteractive.getChildIndex(r)], "active")
                }
                kInteractive.c.addClass(r, "active"), kInteractive.c.removeClass(a, "active")
            }
            t.highlightThumb && (kInteractive.c.removeClass(c, "active"), kInteractive.c.addClass(n, "active"))
        }
    }, dimBtns: function (e) {
        for (var t, n = e.getElementsByClassName("kThumbWindow"), r = n.length; r--;) if (kInteractive.c.hasClass(n[r], "active")) {
            t = n[r];
            break
        }
        if (t) {
            var i = e.getElementsByClassName("thumbNavBtn");
            for (r = 0; r < i.length; r++) kInteractive.c.hasClass(i[r], "next") ? t.nextElementSibling ? kInteractive.c.removeClass(i[r], "disable") : kInteractive.c.addClass(i[r], "disable") : kInteractive.c.hasClass(i[r], "prev") && (t.previousElementSibling ? kInteractive.c.removeClass(i[r], "disable") : kInteractive.c.addClass(i[r], "disable"))
        }
        var o = e.getElementsByClassName("imgContainer");
        if (o.length) {
            var a = kInteractive.c.hasClass(o[0], "selected"), s = kInteractive.c.hasClass(o[o.length - 1], "selected"),
                l = e.getElementsByClassName("btn");
            for (r = 0; r < l.length; r++) kInteractive.c.hasClass(l[r], "next") ? s ? kInteractive.c.addClass(l[r], "disable") : kInteractive.c.removeClass(l[r], "disable") : kInteractive.c.hasClass(l[r], "prev") && (a ? kInteractive.c.addClass(l[r], "disable") : kInteractive.c.removeClass(l[r], "disable"))
        }
    }, getState: function (e) {
        var t = {};
        t.images = e.getElementsByClassName("images")[0], t.selectedImg = t.images.getElementsByClassName("selected"), t.imgContainer = e.getElementsByClassName("imgContainer"), t.thumbWindows = e.getElementsByClassName("kThumbWindows");
        for (var n = 0; n < t.imgContainer.length; n++) if (kInteractive.c.hasClass(t.imgContainer[n], "selected")) {
            t.selectedIndex = n;
            break
        }
        if (t.thumbWindows.length) {
            var r = t.thumbWindows[0].getElementsByClassName("active");
            for (n = 0; n < r.length; n++) kInteractive.c.hasClass(r[n], "kThumbWindow") ? (t.activeWindow = r[n], t.currentIndex = Number(t.activeWindow.children[0].getAttribute("data-index"))) : t.currentThumb = r[n]
        }
        return t
    }, goToFullscreen: function (e) {
        if (!kInteractive.c.hasClass(e, "fullscreen")) {
            var t = document.createElement("div");
            t.innerHTML = e.outerHTML;
            var n = t.children[0];
            document.body.appendChild(n);
            var r = this.getState(e), i = e.getBoundingClientRect();
            n.setAttribute("data-index", r.selectedIndex), n.setAttribute("id", "kFullscreenGallery"), n.style.top = i.top + "px", n.style.left = i.left + "px", n.style.width = i.width + "px", n.style.height = i.height + "px", kInteractive.listenForSwiping(n), n.addEventListener("swipeleft", function () {
                kInteractive.gallery.showImage(n, {dir: "next"})
            }), n.addEventListener("swiperight", function () {
                kInteractive.gallery.showImage(n, {dir: "prev"})
            }, !1), void 0 === isKotobee && (n.style.position = "fixed"), kInteractive.c.addClass(n, "fullscreen"), kInteractive.preRender(n, {singleElem: !0}), kInteractive.postRender(n, {singleElem: !0}), setTimeout(function () {
                kInteractive.c.addClass(n, "in")
            }, 20)
        }
    }, showImage: function (e, t) {
        t = t || {};
        var n = kInteractive.readData(e), r = this.getState(e), i = r.images, o = r.selectedImg, a = r.imgContainer,
            s = t.index;
        if (null == s && o.length && (s = kInteractive.getChildIndex(o[0]) + ("next" == t.dir ? 1 : -1)), s < 0 && (s = 0), null == s && (s = 0), !t.dontGoFullscreen && s == r.selectedIndex) return kInteractive.gallery.goToFullscreen(e);
        o.length && kInteractive.c.removeClass(o[0], "selected"), kInteractive.c.addClass(a[s], "selected"), a[s].style.left = i.offsetWidth * s + "px", a[s].style.display = "block", i.style.left = -i.offsetWidth * s + "px", this.goToThumb(e, {
            index: s,
            highlightThumb: !0
        });
        var l = e.getElementsByClassName("imgCaption");
        if (l.length) {
            var c = (l = l[0]).getElementsByClassName("inner");
            if (c.length && ((c = c[0]).style.display = "none", a[s].hasAttribute("data-caption") && (c.innerHTML = a[s].getAttribute("data-caption"), n.captionFontSize && (c.style.fontSize = n.captionFontSize + "em"), n.captionColor && (c.style.color = n.captionColor), c.style.display = null), !n.footerOverlap)) {
                var d = e.getElementsByClassName("imgMask");
                if (!d.length) return;
                d = d[0];
                var u = e.getElementsByClassName("kFooter")[0];
                d.style.bottom = u.offsetHeight + "px"
            }
        }
    }, detectKey: function (e) {
        kInteractive.gallery.exitFullscreen()
    }, exitFullscreen: function () {
        var e = document.getElementById("kFullscreenGallery");
        e && (kInteractive.c.removeClass(e, "in"), e.style.opacity = 0, setTimeout(function () {
            e.parentNode.removeChild(e), document.removeEventListener("keydown", kInteractive.gallery.detectKey)
        }, 1e3))
    }, resize: function (e) {
        var t = kInteractive.readData(e);
        if (t && (kInteractive.checkResponsiveFloat(t, e), t.thumbnails)) {
            var n = kInteractive.gallery.getState(e).selectedIndex;
            null == n && (e.getAttribute("data-index"), n = n || 0);
            var r = e.getElementsByClassName("kThumbs")[0];
            r.innerHTML = "";
            var i = 50;
            "small" == t.thumbSize ? i = 40 : "large" == t.thumbSize && (i = 60);
            var o, a = Math.floor((e.offsetWidth - 80) / i), s = document.createElement("div");
            s.className = "kThumbWindows";
            for (var l = 0; l < t.imgs.length; l++) if (t.imgs[l].thumbPath) {
                var c = document.createElement("a");
                c.className = "ki-btn kThumb" + (l == n ? " active" : ""), c.setAttribute("data-index", l);
                var d = void 0 === isKotobee ? t.imgs[l].thumbPath : ph.join(kInteractive.absoluteURL, t.imgs[l].thumbPath);
                d = kInteractive.cleanURL(d), c.setAttribute("style", "background-image:url('" + d + "')"), void 0 !== isKotobee && !kInteractive.c.hasClass(e, "fullscreen") || c.addEventListener("click", kInteractive.actionEvent), l % a == 0 && ((o = document.createElement("div")).className = "kThumbWindow", s.appendChild(o)), l == n && kInteractive.c.addClass(o, "active"), o.appendChild(c)
            }
            if (r.appendChild(s), t.thumbMap) {
                var u = document.createElement("div");
                u.className = "kThumbMap";
                for (l = 0; l < t.imgs.length; l++) if (l % a == 0) {
                    var h = document.createElement("a");
                    h.className = "ki-btn kMapItem" + (l == n ? " active" : ""), u.appendChild(h), void 0 !== isKotobee && !kInteractive.c.hasClass(e, "fullscreen") || h.addEventListener("click", kInteractive.actionEvent)
                }
                r.appendChild(u)
            }
            if (1 < s.children.length) {
                var f = document.createElement("a");
                f.className = "thumbNavBtn next", r.appendChild(f);
                var p = document.createElement("a");
                p.className = "thumbNavBtn prev", r.appendChild(p), void 0 !== isKotobee && !kInteractive.c.hasClass(e, "fullscreen") || (f.addEventListener("click", kInteractive.actionEvent), p.addEventListener("click", kInteractive.actionEvent))
            }
        }
    }
}, kInteractive.image = {
    preRender: function (e, t) {
        var n = kInteractive.readData(e);
        n && (n.style && kInteractive.c.addClass(e, n.style), n.popup && n.splash && (e.src = n.splash), e.parentNode && kInteractive.hasClass(e.parentNode, "link") || void 0 === isKotobee && e.addEventListener("click", kInteractive.actionEvent))
    }, postRender: function (e, t, n) {
        kInteractive.readData(t)
    }, action: function (e, r, t) {
        if (r.parentNode && kInteractive.hasClass(r.parentNode, "kInteractive") && kInteractive.hasClass(r.parentNode, "link")) kInteractive.action(r.parentNode, event); else {
            var n = kInteractive.readData(r);
            if (n) {
                var i = n.behavior;
                if ("none" != i) s(r, "none"), l(r, "none"), c(r, "none"), setTimeout(function () {
                    "wiggle" == i ? (s(r, "wiggle"), l(r, "0.5s"), c(r, "1")) : "jump" == i ? (s(r, "jump"), l(r, "0.7s"), c(r, "1")) : "scale" == i && (s(r, "scale"), l(r, "0.5s"), c(r, "1"));
                    var n = function () {
                        var e, t = document.createElement("fakeelement"), n = {
                            animation: "animationend",
                            OAnimation: "oAnimationEnd",
                            MozAnimation: "animationend",
                            WebkitAnimation: "webkitAnimationEnd"
                        };
                        for (e in n) if (void 0 !== t.style[e]) return n[e]
                    }();
                    n && r.addEventListener(n, function e(t) {
                        s(r, "none"), l(r, "none"), c(r, "none"), r.removeEventListener(n, e)
                    })
                }), kInteractive.tinCan({
                    verb: "clicked",
                    activity: i + "image: " + r.getAttribute("src")
                }); else if (n.popup) {
                    var o = {class: "image"}, a = document.createElement("img");
                    a.src = n.path, kInteractive.isAbsolutePath(n.path) || void 0 !== isKotobee && (a.src = ph.join(kInteractive.absoluteURL, n.path)), o.width = a.naturalWidth, o.height = a.naturalHeight, o.pos = "side", o.cb = function (e) {
                        e.appendChild(a)
                    }, o.closed = function () {
                    }, kInteractive.openFrame(o)
                }
            }
        }

        function s(e, t) {
            e.style.webkitAnimation = e.style.mozAnimation = e.style.animation = t
        }

        function l(e, t) {
            e.style.webkitAnimationDuration = e.style.mozAnimationDuration = e.style.animationDuration = t
        }

        function c(e, t) {
            e.style.webkitAnimationIterationCount = e.style.mozAnimationIterationCount = e.style.animationIterationCount = t
        }
    }, resize: function (e) {
        var t = kInteractive.readData(e);
        t && kInteractive.checkResponsiveFloat(t, e)
    }
}, kInteractive.link = {
    preRender: function (e, t) {
        var n = kInteractive.readData(e);
        if (n && ("undefined" == typeof editorMode || !editorMode)) {
            if ("#" == e.getAttribute("href") && e.setAttribute("href", ""), "div" == e.nodeName.toLowerCase()) {
                var r = document.createElement("a"), i = e.getAttribute("href") ? e.getAttribute("href") : n.href;
                e.getAttribute("data-href") && (i = e.getAttribute("data-href")), i = i || "", r.setAttribute("href", i), r.setAttribute("target", n.target ? n.target : ""), r.setAttribute("style", e.getAttribute("style")), r.setAttribute("data-kotobee", e.getAttribute("data-kotobee")), r.className = e.className, e.id ? r.id = e.id : n.id && (r.id = n.id), kInteractive.c.addClass(r, "btn"), r.style.opacity = Number(n.transparency) / 100, e.parentNode.replaceChild(r, e), e = r
            }
            void 0 === isKotobee && ("popup" != n.type && "audio" != n.type && "action" != n.type || e.setAttribute("onclick", "return false;"), e.addEventListener("click", kInteractive.actionEvent))
        }
    }, postRender: function (e, t, n) {
    }, action: function (t, e, n) {
        var r = kInteractive.readData(e);
        if (r) {
            if ("popup" == r.type) {
                var i = "<div class='kbAlertScroll'>" + r.msg + "</div>";
                if (i = i.replace(/src="(.*?)"/g, function () {
                    var e = arguments[1];
                    return void 0 !== isKotobee && (e = ph.join(kInteractive.absoluteURL, e)), 'src="' + e + '"'
                }), "image" == r.popupMode) {
                    var o = r.popupImg;
                    void 0 !== isKotobee && (o = ph.join(kInteractive.absoluteURL, o)), i = "<img src='" + (o = kInteractive.cleanURL(o)) + "'/>"
                }
                kInteractive.alert({content: i}), setTimeout(function () {
                    if (kInteractive.scorm) {
                        var e = {};
                        e.id = kInteractive.getScormId("popup", r.msg), e.description = "Shown popup message: " + r.msg, e.type = "other", e.learnerResponses = "Shown", e.timestamp = new Date, kInteractive.scorm.setInteractions([e])
                    }
                    kInteractive.events && kInteractive.events.add({action: "popup", param: r.msg, elem: t, data: r})
                })
            } else if ("action" == r.type) {
                var a = r.asset, s = r.action;
                if (a.remote) {
                    if ("widget" == a.type) {
                        var l = document.createElement("div");
                        l.className = "kInteractive widget kbHidden", l.setAttribute("data-kotobee", a.data), document.body.appendChild(l), kInteractive.trigger("click", l)
                    }
                    return
                }
                for (var c = document.getElementsByClassName(a.classname), d = 0; d < c.length; d++) if (kInteractive.hasClass(c[d], "kInteractive") && kInteractive.hasClass(c[d], a.type)) if ("activate" == s) if ("gallery" == a.type) {
                    var u = c[d].getElementsByClassName("next");
                    kInteractive.trigger("click", u[0])
                } else if ("questions" == a.type) {
                    for (var h = c[d].getElementsByClassName("ki-btn"), f = 0; f < h.length; f++) if ("submit" == h[f].type) {
                        kInteractive.trigger("click", h[f]);
                        break
                    }
                } else kInteractive.trigger("click", c[d]); else "visibility" == s && kInteractive.c.toggleClass(c[d], "kbHidden")
            } else if ("audio" == r.type) {
                kInteractive.stopCurrentMedia();
                var p, g = document.createElement("audio"), m = r.src;

                function v() {
                    p || (kInteractive.c.addClass(y, "hide"), p = !0)
                }

                "file" == r.audioType && (m = void 0 === isKotobee ? r.audio : ph.join(kInteractive.absoluteURL, r.audio)), g.setAttribute("src", m);
                var b = document.createElement("div");
                b.className = "kiAudioLoader", b.style.transform = b.style.webkitTransform = b.style.mozTransform = "scale(1)";
                var y = document.createElement("div");
                if (y.className = "kiAudioSpinner", b.appendChild(y), e.parentNode.insertBefore(b, e), g.onplaying = v, setTimeout(v, 5e3), g.play(), kInteractive.currentAudio = g, kInteractive.tinCan({
                    verb: "played",
                    activity: "Audio: " + m
                }), kInteractive.scorm) {
                    var w = {};
                    w.id = kInteractive.getScormId(e.textContent, m), w.description = "Played audio link: " + m, w.type = "other", w.learnerResponses = "Played", w.objective = r.options ? r.options.objective : null, w.timestamp = new Date, kInteractive.scorm.setInteractions([w])
                }
                kInteractive.events && kInteractive.events.add({action: "audioLinkClicked", param: m, elem: t, data: r})
            } else if ("attachment" == r.type) {
                var k = r.file;
                if (void 0 !== isKotobee && (k = ph.join(kInteractive.absoluteURL, r.file)), void 0 !== kotobee && native) return void angular.element(document.body).scope().getService("crdv").mobileDownload(k);
                var x = document.createElement("a");
                document.body.appendChild(x), x.setAttribute("style", "display: none"), x.href = kInteractive.cleanURL(k), x.target = "_blank", x.download = r.file.split("/")[r.file.split("/").length - 1], x.setAttribute("onclick", "");
                var C = document.createEvent("MouseEvents");
                C.initMouseEvent("click"), x.dispatchEvent(C), x.remove()
            }
            return !1
        }
    }
}, kInteractive.lipsync = {
    preRender: function (e, t) {
    }, postRender: function (e, t, n) {
        var r, i = e.createDocumentFragment(), o = kInteractive.readData(t);
        t.setAttribute("id", r = "ki-lipsync-" + n), t.innerHTML = "";
        var a = document.createElement("div");
        if (a.className = "container", o.sync) {
            var s = document.createElement("div");
            s.className = "audioContainer";
            var l = document.createElement("a");
            l.className = "playBtn ki-btn", l.appendChild(document.createElement("span")), void 0 === isKotobee && l.addEventListener("click", kInteractive.actionEvent), s.appendChild(l);
            var c = document.createElement("div");
            c.setAttribute("id", r + "-container"), c.className = "playerContainer", s.appendChild(c), o.interaction.playBtn ? o.interaction.btnAlignment && kInteractive.c.addClass(s, o.interaction.btnAlignment) : s.style.display = "none", a.appendChild(s)
        }
        var d = document.createElement("div");
        d.className = "contentContainer", d.innerHTML = void 0 === isKotobee ? function (e) {
            document.createElement("div");
            var t = /(>)([^<\n]*?[^<]+?)(<[^\/])/g;
            e = e.replace(/([< \/][^>]*?>)((\s*[^<\s]+\s+?)+)([^<\s]+\s*)(<)/g, function (e, t) {
                if (0 <= t.indexOf('class="parsed"')) return e;
                if (0 == t.indexOf("<pre")) return e;
                if (0 == t.indexOf("<code")) return e;
                if (0 == t.indexOf("<script")) return e;
                var n = arguments[2].split(" ");
                "" == n[n.length - 1] && n.splice(-1, 1), n.push(arguments[4]);
                for (var r = "", i = 0; i < n.length; i++) {
                    var o = i == n.length - 1 ? "" : " ";
                    r += "<span>" + n[i] + o + "</span>"
                }
                return t + r + "<"
            }), e = e.replace(t, function (e, t) {
                return arguments[2].trim() ? t + ("<span>" + arguments[2] + "</span>") + arguments[3] : e
            });
            return e = (e = e.replace(/(<a [\s\S]*?)(>)/g, '$1 onclick="return false;" $2')).replace("&nbsp;", "&#160;")
        }(o.content) : o.content, a.appendChild(d);
        var u = document.createElement("div");
        o.style && kInteractive.c.addClass(u, o.style), i.appendChild(a), u.appendChild(i), t.appendChild(u);
        var h = document.createElement("style");
        h.className = "parsed";
        var f = "";
        if (f += "#" + r + " .lipSyncCurrentWord {", f += "color:" + o.layout.color + ";", o.layout.underline && (f += "text-decoration:underline;"), o.layout.scale && 1 < Number(o.layout.scale) && (f += "transform:scale(" + o.layout.scale + ");", f += "padding:0 3px;", f += "display:inline-block;"), f += "}", h.innerHTML = f, t.appendChild(h), o.autoplay) kInteractive.action(t)
    }, action: function (i, e) {
        kInteractive.stopCurrentMedia();
        var o = kInteractive.readData(i);
        if (o) {
            o.audioType || (o.audioType = o.type);
            i.getAttribute("id");
            i.getElementsByClassName("playBtn")[0].className = "playBtn ki-btn hide";
            var t = o.src;
            if ("file" == o.audioType && (t = void 0 === isKotobee ? o.audio : o.relToRoot ? ph.join(bookPath, o.audio) : ph.join(kInteractive.absoluteURL, o.audio)), kInteractive.scorm) {
                var n = {};
                n.id = kInteractive.getScormId(i.getAttribute("id"), t), n.description = "Played audio: " + t, n.type = "other", n.learnerResponses = "Played", n.objective = o.options ? o.options.objective : null, n.timestamp = new Date, kInteractive.scorm.setInteractions([n])
            }
            kInteractive.events && kInteractive.events.add({action: "audioPlayed", param: t, elem: i, data: o});
            var r = document.createElement("audio");
            r.setAttribute("controls", "true"), r.setAttribute("autoplay", "true"), r.setAttribute("data-tap-disabled", "false");
            var a = document.createElement("source");
            a.src = t, r.appendChild(a), r.appendChild(document.createTextNode("Your browser does not support the audio element")), r.className = "ki-noHighlight", r.oncanplay = function () {
                kInteractive.currentAudio == i && kInteractive.tinCan({verb: "played", activity: "Audio: " + t})
            }, r.ontimeupdate = function (e) {
                !function (e) {
                    var t, n = o;
                    for (var r = n.sync.length; r--;) if (e >= n.sync[r]) {
                        t = r;
                        break
                    }
                    if (null == t) return;
                    l != t && (null != l && s[l] && kInteractive.c.removeClass(s[l], "lipSyncCurrentWord"), s[t] && kInteractive.c.addClass(s[t], "lipSyncCurrentWord"), l = t)
                }(r.currentTime)
            }, i.getElementsByClassName("playerContainer")[0].appendChild(r), r.play(), kInteractive.currentAudio = i, kInteractive.c.addClass(kInteractive.currentAudio, "playing");
            var s = function () {
                for (var e = [], t = i.getElementsByClassName("contentContainer")[0], n = t.getElementsByClassName("lipSyncCurrentWord"), r = n.length; r--;) hasClass(n[r], "lipSyncCurrentWord") && removeClass(n[r], "lipSyncCurrentWord");
                for (; t.children && t.children.length;) t = t.children[0];
                e.push(t);
                for (; t;) if (t.nextSibling) {
                    for (t = t.nextSibling; t.children && t.children.length;) t = t.children[0];
                    if (3 == t.nodeType) continue;
                    if ("" == t.textContent) continue;
                    e.push(t)
                } else if ("contentContainer" == (t = t.parentNode).className) break;
                return e
            }(), l = 0;
            kInteractive.c.addClass(s[l], "lipSyncCurrentWord")
        }
    }
}, kInteractive.questions = {
    preRender: function (e, t, n, r) {
        var i = t.createDocumentFragment(), o = kInteractive.readData(e);
        if (o) {
            var a = o.dict, s = o.userDict;
            if (a = a || {}, s = s || a, o.options || (o.options = {}), e.id || (e.id = "ki-qs-" + n + "-" + Math.ceil(1e3 * Math.random())), e.innerHTML = "", o.layout && o.layout.popup && !kInteractive.hasClass(e, "inpopup")) {
                var l = document.createElement("img"), c = o.layout.popupImg;
                return c = kInteractive.cleanURL(c), l.src = c, i.appendChild(l), void 0 === isKotobee && l.addEventListener("click", kInteractive.actionEvent), void e.appendChild(i)
            }
            if (o.options.randomize) {
                for (var d = 0; d < o.q.length; d++) o.q[d].origin = d;
                for (var u, h, f = o.q.length; 0 !== f;) h = Math.floor(Math.random() * f), f -= 1, u = o.q[f], o.q[f] = o.q[h], o.q[h] = u
            }
            if (o.options.questionsDisplayed) {
                var p = Number(o.options.questionsDisplayed);
                o.q = o.q.slice(0, p)
            }
            if (o.title) {
                var g = document.createElement("span");
                g.innerHTML = "<h4>" + kInteractive.escapeHtml(o.title) + "</h4>", i.appendChild(g)
            }
            var m = null;
            o.options && o.options.emailForm && (m = this.f.createEmailForm(s));
            var v = null;
            "none" != o.action && (v = this.f.createSubmitBtn(s, e));
            var b = null, y = null, w = null;
            o.options && o.options.clearAnswers && (b = this.f.createClearBtn(s)), o.options && o.options.addToNotebook && (w = this.f.createAddToNotebookBtn(s)), o.options && o.options.preserveAnswers && (y = this.f.createPreserveBtn(s, e));
            var k = this.f.createSeparator(), x = document.createElement("div");
            x.className = "qContainer";
            var C = document.createElement("div");
            if (C.className = "btnContainer", "slides" == o.options.displayMode) e.qIndex = 0, x.appendChild(kInteractive.questions.f.createQElem(o, {
                index: 0,
                elem: e,
                rendered: !1
            })), i.appendChild(x), i.appendChild(C), kInteractive.questions.f.showNavBtns(0, i, {
                isFrag: !0,
                userDict: s,
                qsData: o
            }); else {
                for (d = 0; d < o.q.length; d++) x.appendChild(kInteractive.questions.f.createQElem(o, {
                    index: d,
                    elem: e,
                    rendered: !1
                }));
                i.appendChild(x), m && C.appendChild(m), v && C.appendChild(v), C.appendChild(document.createTextNode(" ")), w && C.appendChild(w), b && C.appendChild(b), y && C.appendChild(y), k && i.appendChild(k), i.appendChild(C)
            }
            o.options.rtl ? (e.setAttribute("dir", "rtl"), kInteractive.c.addClass(e, "rtl")) : e.setAttribute("dir", "ltr");
            var S = document.createElement("div");
            o.style && kInteractive.c.addClass(S, o.style), S.appendChild(i), e.appendChild(S)
        }
    }, postRender: function (e, t, n) {
        var r = kInteractive.readData(t);
        if (r) {
            var i = r.dict;
            r.userDict;
            i = i || {}, i;
            for (var o = t.getElementsByClassName("ques"), a = t.getElementsByClassName("explanation"), s = a.length; s--;) a[s].parentNode.removeChild(a[s]);
            var l = t.getElementsByClassName("reference");
            for (s = l.length; s--;) l[s].parentNode.removeChild(l[s]);
            for (var c = 0; c < o.length; c++) {
                var d = o[c].getElementsByClassName("ans"), u = (d.length, c);
                r.options.randomize && (u = Number(o[c].getAttribute("data-o"))), document[t.id] && document[t.id].preserve && document[t.id].q && document[t.id].q[u] && kInteractive.questions.f.showExp(r.userDict, o[c], r.q[u]);
                for (s = 0; s < d.length; s++) if (kInteractive.c.removeClass(d[s].parentNode, "correct"), 0 <= d[s].getAttribute("id").indexOf("ki-tf-")) document[t.id] && document[t.id].preserve && document[t.id].q && document[t.id].q[u] && (document[t.id].q[u][s] ? d[s].setAttribute("checked", !0) : d[s].removeAttribute("checked"), r.options && r.options.highlightCorrect && (0 == s && r.q[u].a || 1 == s && !r.q[u].a) && kInteractive.c.addClass(d[s].parentNode, "correct")); else if (0 <= d[s].getAttribute("id").indexOf("ki-dd-")) {
                    if (document[t.id] && document[t.id].preserve && document[t.id].q && document[t.id].q[u]) for (var h = 0; h < document[t.id].q[u].length; h++) {
                        var f = document[t.id].q[u][h];
                        try {
                            for (var p = document.getElementById(f.id), g = p; !kInteractive.c.hasClass(g, "ques");) g = g.parentNode;
                            g.getElementsByClassName("categoryContainer")[0].children[f.category].appendChild(p)
                        } catch (e) {
                        }
                    }
                } else 0 <= d[s].getAttribute("id").indexOf("ki-sa-") ? document[t.id] && document[t.id].preserve && document[t.id].q && document[t.id].q[u] && (d[s].removeAttribute("value"), document[t.id].q[u] && d[s].setAttribute("value", document[t.id].q[u])) : document[t.id] && document[t.id].preserve && document[t.id].q && document[t.id].q[u] && (document[t.id].q[u][s] ? d[s].setAttribute("checked", !0) : d[s].removeAttribute("checked"), r.options && r.options.highlightCorrect && r.q[u].c[s].a && kInteractive.c.addClass(d[s].parentNode, "correct"));
                if (document[t.id]) {
                    var m = t.getElementsByClassName("questions-preserve");
                    m.length && (document[t.id].preserve ? m[0].setAttribute("checked", !0) : m[0].removeAttribute("checked"))
                }
            }
        }
    }, action: function (m, t, e) {
        var n = kInteractive.readData(m);
        if (n) {
            var r = n.dict, i = n.userDict;
            if (r = r || {}, i = i || r, n.layout && n.layout.popup && !kInteractive.hasClass(m, "inpopup") && "img" == t.nodeName.toLowerCase()) {
                function o(e) {
                    for (var t = 0; e = e.previousSibling;) "#text" != e.nodeName && 8 != e.nodeType && t++;
                    return t
                }

                var a = document.getElementById("epubContent");
                a && m.setAttribute("data-loc", function (e, t) {
                    for (var n = ""; e != t;) {
                        n = o(e) + "." + n, e = e.parentNode
                    }
                    return "" == n ? "" : n.substr(0, n.length - 1)
                }(m, a));
                var v = document.createElement("iframe");
                v.setAttribute("nwdisable", "true"), v.setAttribute("nwfaketop", "true"), v.setAttribute("scrolling", "yes");
                var b = document.createElement("div");
                return b.className = "scroller", b.appendChild(v), n.cb = function (e) {
                    var t, n = document.createElement("head");
                    if (void 0 === isKotobee) {
                        for (var r = document.getElementsByTagName("link"), i = 0; i < r.length; i++) {
                            var o = r[i];
                            if (0 <= o.getAttribute("href").indexOf("base.css")) {
                                var a = o.getAttribute("href").split("/");
                                delete a[a.length - 1], t = a.join("/");
                                break
                            }
                        }
                        if (!t) return
                    }
                    var s = void 0 === isKotobee ? kInteractive.c.removeHash(window.location.href) : kInteractive.absoluteURL;
                    s = kInteractive.c.removeFilename(s) + "/", s = kInteractive.cleanURL(s), void 0 !== isKotobee && desktop && !kInteractive.isAbsolutePath(s) && (s = kInteractive.c.removeFilename(kInteractive.c.removeHash(window.location.href)) + "/" + s);
                    for (var l = s.split("EPUB/xhtml")[1].split("/").length - 1, c = "", d = 0; d < l; d++) c += "../";
                    n = "<head>";
                    if (n += '<base href="' + s + '"/>', n += '<link rel="stylesheet" type="text/css" href="' + (c + "css/base.css") + '" />', n += '<link rel="stylesheet" type="text/css" href="' + (c + "css/global.css") + '" />', n += '<link rel="stylesheet" type="text/css" href="' + (c + "css/kotobeeInteractive.css") + '" />', n += '<script type="text/javascript" src="' + (c + "js/kotobeeInteractive.js") + '"><\/script>', n += '<script type="text/javascript" src="' + (c + "js/global.js") + '"><\/script>', void 0 !== isKotobee) {
                        var u = clone(config);
                        u.kotobee.email = angular.element(document.body).scope().data.user.email, n += '<script type="text/javascript">var config=' + JSON.stringify(u) + ";<\/script>"
                    }
                    n += '<meta name="viewport" content="viewport-fit=cover,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,width=device-width">', n += '<meta charset="utf-8" />', n += "</head>";
                    var h = m.outerHTML;
                    h = (h = (h = (h = (h = (h = h.replace("<img", '<img style="display:none"')).replace(/([;\s]*?height:)(.*)?;/i, "$1auto")).replace(/([;\s]*?width:)(.*)?;/i, "$1auto")).replace(/([;\s]*?top:)(.*)?;/i, "$1auto")).replace(/([;\s]*?left:)(.*)?;/i, "$1auto")).replace('class="', 'class="inpopup ');
                    var f = "<html>" + n + "<body>" + (h += '<div class="vSpace20"></div>') + "</body></html>";
                    v.setAttribute("srcdoc", f);
                    var p = "javascript: window.frameElement.getAttribute('srcdoc');";

                    function g() {
                        if (void 0 !== isKotobee) {
                            var e = {};
                            e.root = v.contentDocument.documentElement.ownerDocument.body, e.rootIndex = m.getAttribute("data-loc"), angular.element(document.body).scope().getNotebookShortcut(e, function () {
                            })
                        }
                    }

                    v.setAttribute("src", p), v.contentWindow && (v.contentWindow.location = p), e.appendChild(b), v.addEventListener ? v.addEventListener("load", g, !0) : v.attachEvent && v.attachEvent("onload", g)
                }, n.closed = function () {
                }, n.pos = n.layout.pos, kInteractive.openFrame(n), kInteractive.tinCan({
                    verb: "opened",
                    activity: "Questions: " + n.title
                }), void setTimeout(function () {
                    if (kInteractive.scorm) {
                        var e = {};
                        e.id = kInteractive.getScormId("question", n.title), e.description = "Opened question popup: " + n.title, e.learnerResponses = "Opened", e.type = "other", e.timestamp = new Date, kInteractive.scorm.setInteractions([e])
                    }
                    kInteractive.events && kInteractive.events.add({
                        action: "questionPopup",
                        param: n.title,
                        elem: m,
                        data: n
                    })
                }, 800)
            }
            if (!kInteractive.hasClass(t, "kInteractive")) {
                if (kInteractive.hasClass(t, "questions-next")) {
                    var s = m.qIndex ? m.qIndex : 0;
                    if (++s < 0) return;
                    if (s >= n.q.length) return;
                    var l = (I = m.getElementsByClassName("qContainer")[0]).children[0];
                    if (n.options.strictNav) if (!(_ = kInteractive.questions.f.assess(l, n.q[s - 1], n)).correct) return void kInteractive.questions.f.showExp(n.userDict, l, n.q[s - 1]);
                    m.getElementsByClassName("btnContainer")[0];
                    return I.innerHTML = "", I.appendChild(kInteractive.questions.f.createQElem(n, {
                        index: s,
                        elem: m,
                        rendered: !0
                    })), l && (m.questions || (m.questions = []), m.questions.push(l)), kInteractive.questions.f.showNavBtns(s, m, {
                        userDict: i,
                        qsData: n
                    }), void (m.qIndex = s)
                }
                if (kInteractive.hasClass(t, "questions-prev")) {
                    if (!m.questions) return;
                    if (!m.questions.length) return;
                    s = m.qIndex ? m.qIndex : 0;
                    return s--, (I = m.getElementsByClassName("qContainer")[0]).innerHTML = "", I.appendChild(m.questions.pop()), kInteractive.questions.f.showNavBtns(s, m, {
                        userDict: i,
                        qsData: n
                    }), void (m.qIndex = s)
                }
                if (kInteractive.hasClass(t, "questions-clear")) {
                    for (var c = m.getElementsByClassName("ans"), d = [], u = 0; u < c.length; u++) c[u].checked = !1, c[u].value = null, kInteractive.c.removeClass(c[u].parentNode, "correct"), kInteractive.c.removeClass(c[u], "incorrect"), kInteractive.c.hasClass(c[u].parentNode, "dCategory") && d.push(c[u]);
                    for (u = 0; u < d.length; u++) d[u].parentNode.parentNode.parentNode.getElementsByClassName("ki-dd-answers")[0].appendChild(d[u]);
                    var h = m.getElementsByClassName("explanation");
                    for (u = h.length; u--;) h[u].parentNode.removeChild(h[u]);
                    var f = m.getElementsByClassName("reference");
                    for (u = f.length; u--;) f[u].parentNode.removeChild(f[u]);
                    document[m.id] = null
                } else {
                    if (kInteractive.hasClass(t, "questions-notebook")) {
                        var p, g = n.layout && n.layout.popup && kInteractive.hasClass(m, "inpopup");
                        if (void 0 === isKotobee && !g) return void kInteractive.alert({
                            content: r.kotobeeOnly,
                            title: i.sorry ? i.sorry : "Sorry"
                        });
                        var y = {elem: m};
                        if (void 0 !== isKotobee) p = angular.element(document.body).scope(); else {
                            try {
                                p = window.parent.getGlobal()
                            } catch (e) {
                                return void kInteractive.alert({
                                    content: r.kotobeeOnly,
                                    title: i.sorry ? i.sorry : "Sorry"
                                })
                            }
                            y.rootIndex = m.getAttribute("data-loc"), y.root = m
                        }
                        return kInteractive.c.addClass(t, "busy"), void p.questionsAddToNotebookShortcut(y, function () {
                            kInteractive.c.removeClass(t, "busy"), kInteractive.alert({content: i.savedToNotebook ? i.savedToNotebook : "Saved to notebook!"})
                        })
                    }
                    if (kInteractive.hasClass(t, "questions-preserve")) return document[m.id] || (document[m.id] = {}), void (document[m.id].preserve = t.checked);
                    if (kInteractive.hasClass(t, "questions-submit")) {
                        var w = "Untitled questions", k = m.getElementsByTagName("h4");
                        k.length && (w = k[0].textContent || k[0].data);
                        var x, C = 0, S = "", A = 0, L = 0, N = [];
                        if ("slides" == n.options.displayMode) {
                            x = m.questions.slice(0);
                            var I = m.getElementsByClassName("qContainer")[0];
                            x.push(I.children[0])
                        } else x = m.getElementsByClassName("ques");
                        var E = x.length;
                        for (u = 0; u < x.length; u++) if (!kInteractive.hasClass(x[u], "sp")) {
                            var T = 0 < (c = x[u].getElementsByClassName("ans")).length, B = n.q[u];
                            if (n.options.randomize && (B = n.q[Number(x[u].getAttribute("data-o"))]), B.q || (B.q = ""), B.q = B.q.replace(/<html.*<body>(.*?)<\/body><\/html>/g, "$1"), kInteractive.scorm && n.options && n.options.answerOnce && kInteractive.scorm.interactionExists(kInteractive.getScormId(m.id + "-" + (u + 1), B.q))) {
                                var O = "<p style='text-align:center'>" + (i.alreadySubmitted ? i.alreadySubmitted : "This test has already been submitted!") + "</p>";
                                return void kInteractive.alert({content: O})
                            }
                            var P = {}, M = c[0].getAttribute("id");
                            N.push(P), P.id = kInteractive.getScormId(m.id + "-" + (u + 1), B.q), P.qid = m.id, 0 <= M.indexOf("ki-tf-") ? P.type = "true-false" : 0 <= M.indexOf("ki-mcq-") || M.indexOf("ki-mmcq-") ? P.type = "choice" : 0 <= M.indexOf("ki-dd-") ? P.type = "drag-drop" : 0 <= M.indexOf("ki-sa-") && (P.type = "short-answer"), P.objective = n.options ? n.options.objective : null, P.timestamp = kInteractive.timestamp, P.latency = Math.round(((new Date).getTime() - kInteractive.timestamp.getTime()) / 1e3), P.description = B.q;
                            var _, F = [];
                            (_ = kInteractive.questions.f.assess(x[u], B, n)).correctResponses && (P.correctResponses = _.correctResponses), _.learnerResponses && (P.learnerResponses = _.learnerResponses), F = (F = _.ddInteractionOb) || [];
                            T = _.correct;
                            if (F.length) for (var R = 0; R < F.length; R++) P.correctResponses && (P.correctResponses += "; "), P.learnerResponses && (P.learnerResponses += "; "), P.correctResponses += F[R].correct, P.learnerResponses += F[R].learner;
                            P.result = 0, null != B.weight && (A += B.weight, T && (L += B.weight, P.result = B.weight)), P.scoreMax = n.options ? Number(n.options.totalScore) : null, kInteractive.questions.f.showExp(n.userDict, x[u], B);
                            var D = i.question ? i.question.replace("[no]", u + 1) : "Question " + (u + 1);
                            T ? (S += "<span style='border-bottom: dotted 1px #aaa;' title='" + B.q.replace(/'/g, "&#39;") + "'>" + D + ".</span>  <span style='color:#366c20'>" + i.correct + "</span><br/>", C++) : S += "<span style='border-bottom: dotted 1px #aaa;' title='" + B.q.replace(/'/g, "&#39;") + "'>" + D + ".</span>  <span style='color:#7a1818'>" + i.incorrect + "</span><br/>"
                        }
                        for (u = 0; u < N.length; u++) N[u].weighting = Math.round(1e3 * n.options.totalScore / A) / 1e3;

                        function j() {
                            var e = "Questions: " + w + ". Score: " + C + " questions out of " + E;
                            e += ". Action: " + q, "selfAnswerReport" == q && (e += ". Details: " + S), kInteractive.tinCan({
                                verb: "solved",
                                activity: e
                            })
                        }

                        var H, q = n.action;
                        if (n.options.totalScore && A && (H = Math.round(10 * n.options.totalScore * L / A) / 10), "selfAnswer" == q || "selfAnswerReport" == q) {
                            var U = "";
                            "ar" == n.options.language && (U = ' direction="rtl"');
                            O = "";
                            if (i.scoreWeight) {
                                if (null != H) {
                                    var z = "";
                                    n.options.passScore && (H >= n.options.passScore || H == n.options.totalScore ? z += i.pass : z += i.fail), z && (z += ". "), O += "<h3" + U + ">" + (z || "") + i.scoreWeight.replace("[score]", H).replace("[total]", n.options.totalScore) + "</h3>"
                                }
                                O += "<p" + U + ">" + i.score.replace("[correct]", C).replace("[total]", E) + "</p>"
                            } else O = "You scored " + C + " question(s) out of " + E;
                            "selfAnswerReport" == q && (O = "<p" + U + "><strong>" + O + "</strong></p><p><strong>" + (i.details ? i.details : "Details") + "</strong></p><p class='kbAlertScroll'>" + S + "</p>"), kInteractive.alert({content: O}), j()
                        }
                        if ("email" == q || n.options.reportEmail || n.options.emailForm) {
                            var $ = "selfAnswer" != q && "selfAnswerReport" != q && "email" != q;
                            try {
                                if (!config.kotobee.cloudid) return void ($ && kInteractive.alert({
                                    content: r.cloudOnly,
                                    title: i.sorry ? i.sorry : "Sorry"
                                }))
                            } catch (e) {
                                return void ($ && kInteractive.alert({
                                    content: r.cloudOnly,
                                    title: i.sorry ? i.sorry : "Sorry"
                                }))
                            }
                            var V = {};
                            V.ans = new Array;
                            for (var W = 0; W < x.length; W++) for (c = x[W].getElementsByClassName("ans"), u = 0; u < c.length; u++) c[u].checked && V.ans.push({
                                q: W,
                                index: u,
                                label: c[u].nextSibling.textContent || c[u].nextSibling.data
                            });
                            V.title = w;
                            var G = {};
                            if (G.recipient = n.address, n.options.reportEmail && (G.recipient = n.options.reportEmail), G.content = JSON.stringify(V), G.mode = config.kotobee.mode, G.cloudid = config.kotobee.cloudid, G.email = config.kotobee.email ? config.kotobee.email : angular.element(document.body).scope().data.user.email, n.options.emailForm) {
                                var K = document.getElementsByName("recipientEmail");
                                K.length && (G.recipient = G.recipient ? G.recipient + "," + K[0].value : K[0].value)
                            }
                            var X = t.value;
                            t.value = i.submitting ? i.submitting : "Submitting ..", t.setAttribute("disabled", "true");
                            var J = new XMLHttpRequest;
                            J.onreadystatechange = function () {
                                try {
                                    if (4 === J.readyState && 200 === J.status) {
                                        if (t.value = X, t.removeAttribute("disabled"), !$) return;
                                        JSON.parse(J.responseText).success ? kInteractive.alert({content: i.submitted ? i.submitted : "Answers submitted!"}) : kInteractive.alert({content: i.errorSubmitting ? i.errorSubmitting : "An error has occurred while sending answers to the server"})
                                    }
                                } catch (e) {
                                    if (t.value = X, t.setAttribute("value", t.value), t.removeAttribute("disabled"), !$) return;
                                    kInteractive.alert({content: i.errorSubmitting ? i.errorSubmitting : "An error has occurred while sending answers to the server"})
                                }
                            };
                            var Y = config.kotobee.liburl ? config.kotobee.liburl : "http://www.kotobee.com/";
                            Y += "library/report/questions", J.open("POST", Y), J.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                            var Z = "a=a";
                            for (var Q in G) {
                                var ee;
                                null != (ee = G[Q]) && "object" != typeof ee && ("string" == typeof ee && (ee = encodeURIComponent(ee)), "boolean" == typeof ee && (ee = ee ? 1 : 0), Z += "&" + Q + "=" + ee)
                            }
                            J.send(Z), j()
                        }
                        document[m.id] || (document[m.id] = {}), document[m.id].q = [];
                        var te = m.getElementsByClassName("ques");
                        for (W = 0; W < te.length; W++) {
                            var ne = W;
                            n.options.randomize && (ne = Number(te[W].getAttribute("data-o"))), document[m.id].q[ne] = [];
                            var re = te[W].getElementsByClassName("ans");
                            for (u = 0; u < re.length; u++) kInteractive.hasClass(re[u], "txtfield") ? document[m.id].q[ne][u] = re[u].value : re[u].type && "checkbox" == re[u].type.toLowerCase() ? document[m.id].q[ne][u] = re[u].checked : re[u].type && "radio" == re[u].type.toLowerCase() ? document[m.id].q[ne][u] = re[u].checked : kInteractive.c.hasClass(re[u].parentNode, "dCategory") && (document[m.id].q[ne][u] = {
                                id: re[u].id,
                                category: kInteractive.getChildIndex(re[u].parentNode)
                            })
                        }
                        setTimeout(function () {
                            kInteractive.scorm && kInteractive.scorm.setInteractions(N), kInteractive.events && kInteractive.events.add({
                                action: "questionsSubmitted",
                                param: w,
                                elem: m,
                                data: n
                            })
                        }, 500)
                    }
                }
            }
        }
    }, f: {
        showExp: function (e, t, n) {
            if (n.exp && !t.getElementsByClassName("explanation").length) {
                var r = document.createElement("p");
                r.className = "explanation", r.innerHTML = kInteractive.escapeHtml(n.exp), kInteractive.appendAfterDelay(t, r)
            }
            if (n.ref && !t.getElementsByClassName("reference").length) {
                var i = document.createElement("a");
                i.className = "reference", i.innerHTML = e.learnMode ? e.learnMode : "Learn more", i.setAttribute("href", kInteractive.escapeHtml(n.ref)), i.setAttribute("target", "_blank"), kInteractive.appendAfterDelay(t, i)
            }
        }, createQElem: function (e, t) {
            var n = (t = t || {}).index, r = t.elem, i = t.rendered, o = this.getQId(r), a = e.q[n],
                s = document.createElement("div");
            s.className = "ques", null != a.origin && s.setAttribute("data-o", a.origin), a.q || (a.q = "");
            "undefined" != typeof config && config.v;
            var l = e.options.numbering;
            "sp" == a.type && (l = !1), a.q = a.q.replace(/<html.*<body>(.*?)<\/body><\/html>/g, "$1");
            try {
                s.innerHTML = "<div class='questionTxt'><strong>" + (l ? "<span class='no'>" + (n + 1) + "</span>" : "") + "</strong> " + a.q + "</div>"
            } catch (e) {
                s.innerHTML = "<div class='questionTxt'><strong>" + (l ? "<span class='no'>" + (n + 1) + "</span>" : "") + kInteractive.escapeHtml(" " + a.q) + "</strong></div>"
            }
            if (a.path) {
                var c, d = document.createElement("img");
                c = i ? void 0 === isKotobee ? a.path : ph.join(kInteractive.absoluteURL, a.path) : a.path, d.src = kInteractive.cleanURL(c), d.className = typeof isKotobee, s.appendChild(d)
            }
            if (s.classList.add(a.type), "sp" == a.type && (a.topBorder && kInteractive.c.addClass(s, "topBorder"), a.bottomBorder && kInteractive.c.addClass(s, "bottomBorder"), kInteractive.c.addClass(s, "separator")), "sa" == a.type) {
                var u = a.lines ? a.lines : 1, h = document.createElement(1 < u ? "textarea" : "input"),
                    f = "ki-sa-" + o + "-" + n;
                h.id = f, h.name = "sa-" + o + "-" + n, 1 == u ? h.type = "text" : h.rows = a.lines ? a.lines : 1, h.className = "ki-textfield ans txtfield", document[item.id] && document[item.id].preserve && document[item.id].q && document[item.id].q[n] && (h.value = document[item.id].q[n]), s.appendChild(h)
            } else if ("mcq" == a.type || "mmcq" == a.type) for (var p = a.c, g = 0; g < p.length; g++) {
                f = "ki-mcq-" + o + "-" + n + "-" + g;
                var m = document.createElement("input");
                m.id = f, "mmcq" == a.type ? (m.name = "name", m.type = "checkbox") : (m.name = "mcq-" + o + "-" + n, m.type = "radio"), m.className = "ki-inputbox ans", (v = document.createElement("label")).htmlFor = f, v.innerHTML = " " + kInteractive.escapeHtml(p[g].t), v.className = "ki-noHighlight", (y = document.createElement("div")).className = "answer", document[item.id] && document[item.id].preserve && document[item.id].q && document[item.id].q[n] && (m.checked = document[item.id].q[n][g], e.options && e.options.highlightCorrect && a.c[g].a && kInteractive.c.addClass(y, "correct")), y.appendChild(m), y.appendChild(v), s.appendChild(y)
            } else if ("tf" == a.type) for (g = 0; g < 2; g++) {
                f = "ki-tf-" + o + "-" + n + "-" + g;
                var v, b = document.createElement("input");
                b.type = "radio", b.className = "ki-inputbox ans", b.id = f, b.name = "tf-" + o + "-" + n, (v = document.createElement("label")).htmlFor = f, a.choice1 && a.choice2 ? v.innerHTML = kInteractive.escapeHtml(" " + (0 == g ? a.choice1 : a.choice2)) : v.innerHTML = " " + (0 == g ? "True" : "False"), v.className = "ki-noHighlight";
                var y = document.createElement("div");
                document[item.id] && document[item.id].preserve && document[item.id].q && document[item.id].q[n] && (b.checked = document[item.id].q[n][g], e.options && e.options.highlightCorrect && (0 == g && a.a || 1 == g && !a.a) && kInteractive.c.addClass(y, "correct")), y.appendChild(b), y.appendChild(v), s.appendChild(y)
            } else if ("dd" == a.type) {
                var w = document.createElement("div");
                w.className = "categoryContainer";
                var k = [];
                for (g = 0; g < a.k.length; g++) {
                    var x = a.k[g], C = g, S = document.createElement("div");
                    S.className = "dCategory ki-noHighlight ki-dd-category-" + C, S.setAttribute("ondragover", "kInteractive.allowDrop(event)"), S.setAttribute("ondrop", "kInteractive.drop(event)");
                    var A = document.createElement("div");
                    A.innerHTML = x.category.name, A.className = "qTitle", S.appendChild(A);
                    for (var L = 0; L < x.category.answers.length; L++) k.push(x.category.answers[L].t);
                    w.appendChild(S)
                }
                s.appendChild(w);
                var N = document.createElement("div");
                N.className = "ki-dd-clearfix", s.appendChild(N);
                var I = document.createElement("div");
                I.setAttribute("ondragover", "kInteractive.allowDrop(event)"), I.setAttribute("ondrop", "kInteractive.drop(event)"), I.className = "ki-dd-answers ki-noHighlight";
                var E = [];
                for (g = 0; g < k.length; g++) {
                    C = g, y = k[g];
                    var T = document.createElement("div");
                    f = "ki-dd-" + o + "-" + n + "-" + C;
                    T.id = f, T.innerHTML = "<span></span>", T.children[0].innerText = y, T.className = "ki-draggable ans ki-noHighlight", T.draggable = !0, T.setAttribute("ondragstart", "kInteractive.drag(event)"), E.push(T)
                }
                kInteractive.shuffleArray(E);
                for (g = 0; g < E.length; g++) I.appendChild(E[g]);
                s.appendChild(I)
            }
            var B = document.createElement("p");
            return B.className = "separator", s.appendChild(B), document[item.id] && document[item.id].preserve && document[item.id].q && document[item.id].q[n] && kInteractive.questions.f.showExp(e.userDict, s, a), s
        }, getQId: function (e) {
            return Number(e.id.replace("ki-qs-", ""))
        }, createSubmitBtn: function (e, t) {
            var n = this.getQId(t), r = document.createElement("input"), i = "ki-" + n + "-btn";
            return r.type = "submit", r.value = e.submit ? e.submit : "Submit Answers", r.id = i, r.className = "btn ki-btn questions-submit", void 0 === isKotobee && r.addEventListener("click", kInteractive.actionEvent), r
        }, createClearBtn: function (e) {
            var t = document.createElement("input");
            return t.type = "submit", t.value = e.clear ? e.clear : "Clear Answers", t.className = "btn ki-btn ki-questions questions-clear", void 0 === isKotobee && t.addEventListener("click", kInteractive.actionEvent), t
        }, createAddToNotebookBtn: function (e) {
            var t = document.createElement("input");
            return t.type = "submit", t.value = e.notebook ? e.notebook : "Save to Notebook", t.className = "btn ki-btn ki-questions questions-notebook", void 0 === isKotobee && t.addEventListener("click", kInteractive.actionEvent), t
        }, createPreserveBtn: function (e, t) {
            var n = this.getQId(t), r = document.createElement("div");
            r.style.marginTop = "5px";
            var i = document.createElement("input");
            i.type = "checkbox", i.name = "preserveAnswers", i.className = "ki-btn ki-questions questions-preserve", i.id = "ki-" + n + "-preserveAnswersBtn", document[item.id] && (i.checked = document[item.id].preserve), r.appendChild(i);
            var o = document.createElement("label");
            return o.htmlFor = i.id, o.innerHTML = " " + (e.preserve ? e.preserve : "Preserve submitted answers"), o.className = "ki-noHighlight", r.appendChild(o), void 0 === isKotobee && i.addEventListener("change", kInteractive.actionEvent), r
        }, createNextBtn: function (e) {
            var t = document.createElement("input");
            return t.type = "submit", t.value = e.next ? e.next : "Next", t.className = "btn ki-btn ki-questions questions-next", void 0 === isKotobee && t.addEventListener("click", kInteractive.actionEvent), t
        }, createPrevBtn: function (e) {
            var t = document.createElement("input");
            return t.type = "submit", t.value = e.prev ? e.prev : "Previous", t.className = "btn ki-btn ki-questions questions-prev", void 0 === isKotobee && t.addEventListener("click", kInteractive.actionEvent), t
        }, createSeparator: function () {
            document.createElement("p").className = "separator"
        }, createEmailForm: function (e) {
            var a = document.createElement("div");
            return a.setAttribute("class", "emailForm"), function (e, t, n) {
                var r = document.createElement("div");
                r.className = "address", r.innerHTML = "<p><strong>" + e + "</strong><em>" + t + "</em></p>";
                var i = document.createElement("input");
                i.name = n, i.type = "text", i.className = "txtfield", r.appendChild(i);
                var o = document.createElement("p");
                o.className = "separator", r.appendChild(o), a.appendChild(r)
            }(e.recipientEmail ? e.recipientEmail : "Recipient email", e.separateEmails ? e.separateEmails : "Separate multiple emails with commas", "recipientEmail"), a
        }, showNavBtns: function (e, t, n) {
            var r;
            (r = (n = n || {}).isFrag ? t.lastElementChild : t.getElementsByClassName("btnContainer")[0]).innerHTML = "";
            var i = kInteractive.questions.f.createPrevBtn(n.userDict);
            r.appendChild(i), e <= 0 && i.classList.add("disabled");
            var o = kInteractive.questions.f.createNextBtn(n.userDict);
            if (r.appendChild(o), e >= n.qsData.q.length - 1 && o.classList.add("disabled"), e == n.qsData.q.length - 1) {
                var a = kInteractive.questions.f.createSubmitBtn(n.userDict, t);
                a.classList.add("shift"), r.appendChild(a)
            }
        }, assess: function (e, t, n) {
            for (var r = {ddInteractionOb: []}, i = e.getElementsByClassName("ans"), o = 0 < i.length, a = 0; a < i.length; a++) if (0 <= i[a].getAttribute("id").indexOf("ki-tf-")) 0 == a && t.a ? r.correctResponses = t.choice1 : 1 != a || t.a || (r.correctResponses = t.choice2), i[a].checked ? (r.learnerResponses = a ? t.choice2 : t.choice1, 0 != a || t.a ? 1 == a && t.a && (o = !1) : o = !1) : 0 == a && t.a ? o = !1 : 1 != a || t.a || (o = !1), n.options && n.options.highlightCorrect && (0 == a && t.a || 1 == a && !t.a) && kInteractive.c.addClass(i[a].parentNode, "correct"); else if (0 <= i[a].getAttribute("id").indexOf("ki-sa-")) {
                var s = i[a].value.toLowerCase();
                s = s && s.trim(), o = !0;
                for (var l = "", c = 0; c < t.k.length; c++) {
                    var d = t.k[c].t;
                    if (!d) {
                        o = !1;
                        break
                    }
                    l && (l += "+"), l += d = d.toLowerCase();
                    for (var u = d.split(","), h = !1, f = 0; f < u.length; f++) if (0 <= s.indexOf(u[f].trim())) {
                        h = !0;
                        break
                    }
                    if (!h) {
                        o = !1;
                        break
                    }
                }
                r.correctResponses = l, r.learnerResponses = s
            } else if (0 <= i[a].getAttribute("id").indexOf("ki-dd-")) {
                kInteractive.c.removeClass(i[a], "incorrect");
                for (var p, g = i[a].id.split("-")[4], m = 0, v = 0; v < t.k.length; v++) {
                    if (g < (m += t.k[v].category.answers.length)) {
                        p = v;
                        break
                    }
                }
                var b = e.getElementsByClassName("dCategory")[p], y = {};
                if (y.correct = i[a].innerText + " -> " + b.children[0].innerText, kInteractive.c.hasClass(i[a].parentNode, "ki-dd-answers")) kInteractive.c.addClass(i[a], "incorrect"), o = !1, y.learner = i[a].innerText + " unassigned"; else {
                    var w = i[a].parentNode, k = w.children[0].innerText, x = kInteractive.getChildIndex(w);
                    y.learner = i[a].innerText + " -> " + k, x != p && n.options && n.options.highlightCorrect && (o = !1, kInteractive.c.addClass(i[a], "incorrect"))
                }
                r.ddInteractionOb.push(y)
            } else t.c[a].a && (r.correctResponses = t.c[a].t), i[a].checked && (r.learnerResponses = t.c[a].t), i[a].checked && !t.c[a].a ? o = !1 : !i[a].checked && t.c[a].a && (o = !1), n.options && n.options.highlightCorrect && t.c[a].a && kInteractive.c.addClass(i[a].parentNode, "correct");
            return r.correct = o, r
        }
    }
}, kInteractive.threed = {
    preRender: function (e, t) {
    }, postRender: function (e, t, n, r) {
        var i = e.createDocumentFragment(), o = kInteractive.readData(t);
        if (o) {
            t.innerHTML = "";
            var a = t.getAttribute("style");
            if (o.inter.placeholderPath) {
                var s = void 0 === isKotobee ? o.inter.placeholderPath : ph.join(kInteractive.absoluteURL, o.inter.placeholderPath);
                a += "background-image:url('" + (s = kInteractive.cleanURL(s)) + "');"
            }
            t.setAttribute("style", a);
            var l = document.createElement("a");
            o.inter.includeMsg ? (l.innerHTML = kInteractive.escapeHtml(o.inter.msg), l.className = "msgBtn ki-btn") : l.className = "invisibleBtn ki-btn", i.appendChild(l), void 0 === isKotobee && l && l.addEventListener("click", kInteractive.actionEvent), t.appendChild(i)
        }
    }, action: function (m, e, t) {
        var v = kInteractive.readData(m);
        if (v) {
            "inPanel" == v.inter.target ? kInteractive.c.addClass(m, "running") : m.innerHTML = "";
            var b = document.createElement("div");
            if (b.className = "loading", m.appendChild(b), "undefined" == typeof THREE) {
                var n, r = document.getElementsByTagName("head")[0], i = r.getElementsByTagName("script");
                if (void 0 !== isKotobee) n = bookPath + "EPUB/js/kotobeeInteractive3D.js"; else for (var o = 0; o < i.length; o++) if (0 <= i[o].src.indexOf("kotobeeinteractive.js")) {
                    n = i[o].src.replace("kotobeeinteractive.js", "kotobeeinteractive3D.js");
                    break
                }
                if (!n) return;
                var a = document.createElement("script");
                a.type = "text/javascript", a.src = n, a.onload = s, a.onreadystatechange = function () {
                    "complete" == this.readyState && s()
                }, r.appendChild(a)
            } else s()
        }

        function s() {
            var g, e = m;
            if ("inPanel" == v.inter.target) {
                var t = {
                    class: "threed", cb: function (e) {
                        var t = document.createElement("div");
                        t.className = "container", e.appendChild(t), n(t)
                    }, closed: function () {
                        kInteractive.c.removeClass(m, "running")
                    }
                };
                kInteractive.openFrame(t)
            } else n(e);

            function n(t) {
                var n;
                setTimeout(function () {
                    if (kInteractive.scorm) {
                        var e = {};
                        e.id = kInteractive.getScormId("_3D", v.name ? v.name : "Model"), e.description = "Opened 3D model: " + (v.name ? v.name : "No name"), e.learnerResponses = "Viewed", e.type = "other", e.timestamp = new Date, kInteractive.scorm.setInteractions([e])
                    }
                    kInteractive.events && kInteractive.events.add({
                        action: "3dModelViewed",
                        param: v.name ? v.name : "No name",
                        elem: m,
                        data: v
                    })
                }, 800), g && cancelAnimationFrame(g), n = function () {
                    try {
                        var e = document.createElement("canvas");
                        return !(!window.WebGLRenderingContext || !e.getContext("webgl") && !e.getContext("experimental-webgl"))
                    } catch (e) {
                        return !1
                    }
                }() ? new THREE.WebGLRenderer({precision: "highp"}) : new THREE.CanvasRenderer;
                var e = t.offsetWidth, r = t.offsetHeight,
                    i = new THREE.PerspectiveCamera(v.camera.viewAngle, e / r, v.camera.near, v.camera.far),
                    l = new THREE.Scene;
                null != v.scene.bgColor && n.setClearColor(v.scene.bgColor, 1), l.add(i), i.position.x = v.camera.x, i.position.y = v.camera.y, i.position.z = v.camera.z, n.setSize(e, r), v.scene.floor && (floor = new THREE.Mesh(new THREE.PlaneGeometry(500, 500, 1, 1), new THREE.MeshPhongMaterial({color: v.scene.floorColor ? v.scene.floorColor : 10066329})), floor.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2)), floor.position.y = -80, floor.receiveShadow = !0, l.add(floor));
                var c = new THREE.LoadingManager;
                c.onProgress = function (e, t, n) {
                }, function o(a) {
                    if (!(a >= v.objects.length)) {
                        var s = v.objects[a],
                            e = void 0 === isKotobee ? s.path : ph.join(kInteractive.absoluteURL, s.path);
                        e = cleanURL(e), new THREE.OBJLoader(c).load(e, function (i) {
                            b && b.parentNode && b.parentNode.removeChild(b), n.domElement.parentNode || t.appendChild(n.domElement), i.position.set(s.x, s.y, s.z), i.traverse(function (n) {
                                if (n instanceof THREE.Mesh) {
                                    var r = n == i.children[i.children.length - 1];
                                    if (s.textPath) {
                                        var e = new THREE.ImageLoader(c),
                                            t = void 0 === isKotobee ? s.textPath : ph.join(kInteractive.absoluteURL, s.textPath);
                                        e.load(t, function (e) {
                                            var t = new THREE.Texture;
                                            t.image = e, t.needsUpdate = !0, n.material.map = t, r && l.add(i), o(++a)
                                        }, function () {
                                        }, function (e) {
                                        })
                                    } else r && l.add(i), o(++a)
                                }
                            })
                        }, function (e) {
                            e.lengthComputable && (e.loaded, e.total)
                        }, function (e) {
                        })
                    }
                }(0), new THREE.OrbitControls(i, n.domElement).target = new THREE.Vector3(0, 0, 0);
                for (var o = 0; o < v.lights.length; o++) if ("pointLight" == v.lights[o].type) {
                    var a = new THREE.PointLight(v.lights[o].color);
                    a.position.set(v.lights[o].x, v.lights[o].y, v.lights[o].z), l.add(a)
                } else if ("directionalLight" == v.lights[o].type) {
                    var s = new THREE.DirectionalLight(v.lights[o].color, v.lights[o].intensity);
                    s.position.set(v.lights[o].x, v.lights[o].y, v.lights[o].z), l.add(s)
                } else if ("hemisphereLight" == v.lights[o].type) {
                    var d = new THREE.HemisphereLight(v.lights[o].sky, v.lights[o].ground, v.lights[o].intensity);
                    d.position.set(v.lights[o].x, v.lights[o].y, v.lights[o].z), l.add(d)
                } else if ("spotLight" == v.lights[o].type) {
                    var u = new THREE.SpotLight(v.lights[o].color, v.lights[o].intensity, v.lights[o].distance, v.lights[o].angle, v.lights[o].exponent, v.lights[o].decay);
                    u.position.set(v.lights[o].x, v.lights[o].y, v.lights[o].z), l.add(u)
                } else if ("ambientLight" == v.lights[o].type) {
                    var h = new THREE.AmbientLight(v.lights[o].color);
                    l.add(h)
                } else if ("areaLight" == v.lights[o].type) {
                    var f = new THREE.AreaLight(v.lights[o].color, v.lights[o].intensity);
                    l.add(f)
                }
                var p = new THREE.Clock;
                !function e() {
                    try {
                        n.render(l, i)
                    } catch (e) {
                        return
                    }
                    p.getDelta();
                    g = requestAnimFrame(e)
                }()
            }
        }
    }
}, kInteractive.video = {
    preRender: function (e, t) {
    }, postRender: function (e, t, n) {
        var r = e.createDocumentFragment(), i = kInteractive.readData(t);
        if (i) {
            var o = "";
            if (i.splash && (o = void 0 === isKotobee ? i.splash : ph.join(kInteractive.absoluteURL, i.splash)), o) {
                t.style.backgroundImage = null;
                var a = t.style.cssText;
                o = kInteractive.cleanURL(o), t.setAttribute("style", "background-image:url('" + o + "');" + a)
            }
            t.setAttribute("id", "ki-video-" + n), t.innerHTML = "";
            var s = document.createElement("div");
            s.setAttribute("id", "ki-video-" + n + "-container"), s.className = "container";
            var l = document.createElement("div");
            i.style && kInteractive.c.addClass(l, i.style);
            var c = document.createElement("a");
            c.className = "playBtn ki-btn", c.appendChild(document.createElement("span")), void 0 === isKotobee && c.addEventListener("click", kInteractive.actionEvent), r.appendChild(c), r.appendChild(s), l.appendChild(r), t.appendChild(l), i.autoplay && kInteractive.action(t)
        }
    }, action: function (o) {
        var a = kInteractive.readData(o);
        if (a) {
            if (a.popup && "kInteractiveFrame" != o.parentNode.id) {
                var e = {
                    pos: "side", aspectRatio: "16:9", cb: function (e) {
                        var t = document.createElement("div");
                        t.innerHTML = o.outerHTML;
                        var n = t.children[0];
                        n.style.width = "100%", n.style.height = "100%", n.style.margin = "0", n.style.position = "absolute", n.style.left = 0, n.style.top = 0, kInteractive.c.removeClass(n, "kbHidden"), e.appendChild(n);
                        var r = o.id.split("ki-video-")[1];
                        kInteractive.postRender(document, n, r), setTimeout(function () {
                            kInteractive.action(n)
                        }, 100)
                    }
                };
                return kInteractive.openFrame(e)
            }
            var t = o.getAttribute("id") + "-container", s = o.getElementsByClassName("playBtn")[0];
            if (!(0 <= s.className.indexOf("loading"))) {
                if (kInteractive.stopCurrentMedia(), s.className = "playBtn ki-btn loading", a.autoplay && (s.className = "playBtn ki-btn hide"), kInteractive.scorm) {
                    var n = {};
                    n.id = kInteractive.getScormId(o.getAttribute("id"), a.src), n.description = "Played video: " + a.src, n.type = "other", n.learnerResponses = "Played", n.objective = a.options ? a.options.objective : null, n.timestamp = new Date, kInteractive.scorm.setInteractions([n])
                }
                if (kInteractive.events && kInteractive.events.add({
                    action: "videoPlayed",
                    param: a.src,
                    elem: o,
                    data: a
                }), "file" == a.type) {
                    u(void 0 === isKotobee ? a.video : ph.join(kInteractive.absoluteURL, a.video))
                } else {
                    var r, i = new URL(a.src);
                    if (i.origin.includes("youtube.com") || i.origin.includes("youtu.be")) {
                        if (!(r = i.origin.includes("youtube.com") ? i.searchParams.get("v") : i.pathname.split("/")[1])) return;
                        if (window && window.iBooks) return setTimeout(function () {
                            s.className = "playBtn ki-btn"
                        }, 1500), void (window.location.href = a.src);
                        var l = {
                            videoId: r, playerVars: {autoplay: 1, rel: "0"}, events: {
                                onReady: function () {
                                }, onStateChange: function (e) {
                                    e.data == YT.PlayerState.PLAYING && kInteractive.tinCan({
                                        verb: "played",
                                        activity: "Video: " + a.src
                                    })
                                }
                            }
                        };
                        if (kInteractive.youTubeStatus) if ("loading" == kInteractive.youTubeStatus) {
                            if (kInteractive.vQueue) return;
                            kInteractive.vQueue = function () {
                                s.className = "playBtn ki-btn hide", new YT.Player(t, l)
                            }
                        } else "ready" == kInteractive.youTubeStatus && (s.className = "playBtn ki-btn hide", new YT.Player(t, l)); else {
                            window.onYouTubePlayerAPIReady = function () {
                                kInteractive.youTubeStatus = "ready", kInteractive.vQueue(), kInteractive.vQueue = null
                            };
                            var c = document.createElement("script");
                            c.src = "https://www.youtube.com/player_api";
                            var d = document.getElementsByTagName("script")[0];
                            d.parentNode.insertBefore(c, d), kInteractive.youTubeStatus = "loading", kInteractive.vQueue = function () {
                                s.className = "playBtn ki-btn hide", new YT.Player(t, l)
                            }
                        }
                    } else u(a.src)
                }
                kInteractive.currentVideo = o, kInteractive.c.addClass(kInteractive.currentVideo, "playing")
            }
        }

        function u(e) {
            var t, n = document.createElement("video");
            n.setAttribute("width", "100%"), n.setAttribute("height", "100%"), n.setAttribute("src", kInteractive.cleanURL(e)), n.setAttribute("autoplay", "true"), n.setAttribute("data-tap-disabled", "false"), 0 != e.indexOf("http://") && 0 != e.indexOf("https://") || (t = !0), t && n.setAttribute("crossorigin", "anonymous");
            var r = !1;
            try {
                r = -1 < navigator.userAgent.toLowerCase().indexOf("android")
            } catch (e) {
            }
            r || n.setAttribute("type", "video/mp4"), n.setAttribute("webkit-playsinline", "true"), n.setAttribute("controls", "true"), n.className = "ki-noHighlight", a.hideDownloadBtn && (n.className += " hideDownloadBtn"), n.innerHTML = "Your browser doesn't support HTML5 video.", t && (n.crossOrigin = "anonymous"), n.oncanplay = function () {
                kInteractive.currentVideo == o && (s.className = "playBtn ki-btn hide", kInteractive.tinCan({
                    verb: "played",
                    activity: "Video: " + e
                }))
            }, n.addEventListener("error", function (e) {
                kInteractive.stopCurrentMedia()
            }), n.addEventListener("webkitfullscreenchange", function (e) {
                var t = null !== document.webkitFullscreenElement;
                kInteractive.videoIsFullscreen = t
            });
            var i = o.getElementsByClassName("container")[0];
            i.setAttribute("data-tap-disabled", "true"), i.appendChild(n)
        }
    }, resize: function (e) {
        var t = kInteractive.readData(e);
        t && (kInteractive.checkResponsiveFloat(t, e), t.maintainRatio && "px" == t.widthUnit && t.height && t.width && "absolute" != e.style.position && (e.style.height = e.offsetWidth * (t.height / t.width) + "px"))
    }
}, kInteractive.widget = {
    preRender: function (e, t) {
    }, postRender: function (e, t, n, r) {
        r = r || {};
        var i = e.createDocumentFragment(), o = kInteractive.readData(t);
        if (o) {
            var a = o.name, s = (o.src, o.width), l = o.height;
            if ("page" == o.mode) {
                if (t.children.length) return;
                var c = document.createElement("div");
                c.className = "cover", i.appendChild(c), o.interaction && (c.style.pointerEvents = "none");
                var d = document.createElement("div");
                d.className = "iframeContainer";
                var u = document.createElement("iframe");
                if (u.setAttribute("nwdisable", "true"), u.setAttribute("nwfaketop", "true"), u.setAttribute("sandbox", "allow-same-origin allow-scripts allow-forms allow-modals"), u.setAttribute("width", t.style.width ? t.style.width : s + o.widthUnit), u.setAttribute("height", t.style.height ? t.style.height : l + "px"), u.src = kInteractive.getWidgetUrl(o, r), void 0 !== kotobee && -1 !== u.src.indexOf(".amazonaws.com")) {
                    var h = document.createElement("a");
                    h.href = u.src, u.addEventListener("load", function (e) {
                        e.target.contentWindow.postMessage({
                            user: {
                                name: kotobee.user.name ? kotobee.user.name : "",
                                email: kotobee.user.email ? kotobee.user.email : "",
                                loggedIn: kotobee.user.loggedIn
                            },
                            book: kotobee.book.meta.dc.identifier,
                            chapter: kotobee.currentChapter.url.split("EPUB/xhtml/")[1]
                        }, h.protocol + "//" + h.hostname)
                    })
                }
                d.appendChild(u), i.appendChild(d);
                var f = t.style.width, p = t.style.height;
                0 <= f.indexOf("px") && (o.widthUnit = "px"), 0 <= f.indexOf("%") && (o.widthUnit = "%");
                try {
                    o.widthUnit ? o.width = Number(f.split(o.widthUnit)[0]) : o.width = Number(f)
                } catch (e) {
                    o.width = Number(f)
                }
                try {
                    o.height = Number(p.split("px")[0])
                } catch (e) {
                    o.height = Number(p)
                }
                kInteractive.writeData(t, o)
            } else {
                if (!t.children.length && !t.innerHTML.trim()) {
                    var g = document.createElement("img");
                    g.src = kInteractive.getWidgetHome(o, r) + "/" + a + "/Icon.png?c=" + Math.round(9999 * Math.random()), g.className = "wdgtIcon", i.appendChild(g)
                }
                void 0 === isKotobee && t.addEventListener("click", kInteractive.actionEvent)
            }
            t.appendChild(i)
        }
    }, action: function (t) {
        var n = kInteractive.readData(t);
        if (n) {
            var r = kInteractive.getWidgetUrl(n), i = document.createElement("iframe");
            i.setAttribute("nwdisable", "true"), i.setAttribute("nwfaketop", "true"), i.setAttribute("sandbox", "allow-same-origin allow-scripts allow-forms allow-modals"), n.cb = function (e) {
                i.src = r, e.appendChild(i)
            }, n.cb1 = "yes", n.closed = function () {
            }, n.responsive && (n.width = n.height = null), kInteractive.openFrame(n), kInteractive.tinCan({
                verb: "opened",
                activity: "Widget: " + n.name
            }), setTimeout(function () {
                if (kInteractive.scorm) {
                    var e = {};
                    e.id = kInteractive.getScormId("widget", n.name), e.description = "Opened popup widget: " + n.name, e.learnerResponses = "Opened", e.type = "other", e.timestamp = new Date, kInteractive.scorm.setInteractions([e])
                }
                kInteractive.events && kInteractive.events.add({
                    action: "popupWidgetOpened",
                    param: n.name,
                    elem: t,
                    data: n
                })
            }, 800)
        }
    }, resize: function (e) {
        var t = kInteractive.readData(e);
        if (t && "page" == t.mode && "px" == t.widthUnit) {
            var n = t.width, r = t.height, i = e.parentNode;
            if (i) if (n > i.offsetWidth) {
                var o = i.offsetWidth / n, a = e.children.length - 1;
                e.children[a].style.transform = e.children[a].style.webkitTransform = e.children[a].style.mozTransform = "scale(" + o + ")", e.children[a].style.transformOrigin = e.children[a].style.webkitTransformOrigin = e.children[a].style.mozTransformOrigin = "0 0", e.style.maxWidth = e.style.width, e.style.height = Math.round(r * o) + "px"
            } else {
                for (a = 0; a < e.children.length; a++) e.children[a].style.transform = e.children[a].style.webkitTransform = e.children[a].style.mozTransform = e.children[a].style.transformOrigin = e.children[a].style.webkitTransformOrigin = e.children[a].style.mozTransformOrigin = null;
                e.style.maxWidth = null, e.style.height = r + "px"
            }
        }
    }
};